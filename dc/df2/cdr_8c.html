<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: cdr.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">cdr.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Call Detail Record API.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;inttypes.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d42/lock_8h_source.html">asterisk/lock.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d07/cdr_8h_source.html">asterisk/cdr.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d47/callerid_8h_source.html">asterisk/callerid.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d45/manager_8h_source.html">asterisk/manager.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/da3/causes_8h_source.html">asterisk/causes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d90/linkedlists_8h_source.html">asterisk/linkedlists.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d00/sched_8h_source.html">asterisk/sched.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html">asterisk/config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db0/cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d0f/stringfields_8h_source.html">asterisk/stringfields.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/dfe/config__options_8h_source.html">asterisk/config_options.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d05/json_8h_source.html">asterisk/json.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d33/parking_8h_source.html">asterisk/parking.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d79/stasis_8h_source.html">asterisk/stasis.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d4a/stasis__channels_8h_source.html">asterisk/stasis_channels.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html">asterisk/stasis_bridges.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d25/stasis__message__router_8h_source.html">asterisk/stasis_message_router.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/da5/astobj2_8h_source.html">asterisk/astobj2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d1e/taskprocessor_8h_source.html">asterisk/taskprocessor.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for cdr.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/df2/cdr_8c__incl.png" border="0" usemap="#cdr_8c" alt=""/></div>
<map name="cdr_8c" id="cdr_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="2716,319,2800,345"/>
<area shape="rect" id="node10" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1589,543,1703,569"/>
<area shape="rect" id="node18" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1742,162,1881,189"/>
<area shape="rect" id="node20" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="855,319,970,345"/>
<area shape="rect" id="node21" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="733,393,890,420"/>
<area shape="rect" id="node24" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="2861,319,2996,345"/>
<area shape="rect" id="node25" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="2096,468,2247,495"/>
<area shape="rect" id="node29" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="1169,244,1296,271"/>
<area shape="rect" id="node30" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="2619,244,2726,271"/>
<area shape="rect" id="node36" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="422,244,547,271"/>
<area shape="rect" id="node37" href="../../d4/d05/json_8h.html" title="Asterisk JSON abstraction layer. " alt="" coords="427,319,542,345"/>
<area shape="rect" id="node38" href="../../db/d45/manager_8h.html" title="The AMI &#45; Asterisk Manager Interface &#45; is a TCP protocol created to manage Asterisk with third&#45;party ..." alt="" coords="1619,319,1764,345"/>
<area shape="rect" id="node40" href="../../de/d47/callerid_8h.html" title="CallerID (and other GR30) management and generation Includes code and algorithms from the Zapata libr..." alt="" coords="2795,162,2929,189"/>
<area shape="rect" id="node41" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="317,162,453,189"/>
<area shape="rect" id="node42" href="../../d4/da3/causes_8h.html" title="Internal Asterisk hangup causes. " alt="" coords="3427,80,3561,107"/>
<area shape="rect" id="node43" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="3585,80,3712,107"/>
<area shape="rect" id="node44" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="3105,162,3206,189"/>
<area shape="rect" id="node45" href="../../db/dfe/config__options_8h.html" title="Configuration option&#45;handling. " alt="" coords="2489,162,2669,189"/>
<area shape="rect" id="node46" href="../../d2/d33/parking_8h.html" title="Call Parking API. " alt="" coords="5,162,140,189"/>
<area shape="rect" id="node47" href="../../d9/d4a/stasis__channels_8h.html" title="asterisk/stasis_channels.h" alt="" coords="866,80,1055,107"/>
<area shape="rect" id="node48" href="../../dc/d4e/stasis__bridges_8h.html" title="asterisk/stasis_bridges.h" alt="" coords="1149,80,1327,107"/>
<area shape="rect" id="node49" href="../../d4/d25/stasis__message__router_8h.html" title="asterisk/stasis_message\l_router.h" alt="" coords="477,155,655,196"/>
<area shape="rect" id="node50" href="../../d0/d1e/taskprocessor_8h.html" title="An API for managing task processing threads that can be shared across modules. " alt="" coords="3736,80,3913,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="2218,692,2373,719"/>
<area shape="rect" id="node4" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="3017,393,3155,420"/>
<area shape="rect" id="node8" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="2604,393,2739,420"/>
<area shape="rect" id="node5" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="2200,617,2343,644"/>
<area shape="rect" id="node12" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="1423,617,1485,644"/>
<area shape="rect" id="node13" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="1311,692,1458,719"/>
<area shape="rect" id="node16" href="../../d3/dda/backtrace_8h.html" title="Asterisk backtrace generation. " alt="" coords="1855,617,2005,644"/>
<area shape="rect" id="node17" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1220,617,1347,644"/>
<area shape="rect" id="node19" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="1001,244,1145,271"/>
<area shape="rect" id="node22" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="2259,319,2417,345"/>
<area shape="rect" id="node26" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="1609,244,1773,271"/>
<area shape="rect" id="node27" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="2108,319,2235,345"/>
<area shape="rect" id="node28" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="1835,393,1982,420"/>
<area shape="rect" id="node31" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="1660,393,1811,420"/>
<area shape="rect" id="node32" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="1372,244,1533,271"/>
<area shape="rect" id="node33" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="2374,244,2545,271"/>
<area shape="rect" id="node34" href="../../de/dc8/ccss_8h.html" title="Call Completion Supplementary Services API. " alt="" coords="2233,244,2349,271"/>
<area shape="rect" id="node35" href="../../db/d3c/framehook_8h.html" title="FrameHook Architecture. " alt="" coords="1950,244,2107,271"/>
<area shape="rect" id="node39" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="623,244,773,271"/>
<area shape="rect" id="node23" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="2273,393,2403,420"/>
</map>
</div>
</div>
<p><a href="../../dc/df2/cdr_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d08/structbe__list.html">be_list</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of registered backends.  <a href="../../d5/d08/structbe__list.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d82/structbridge__leave__data.html">bridge_leave_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d3a/structcdr__batch.html">cdr_batch</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The actual batch queue.  <a href="../../d4/d3a/structcdr__batch.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d81/structcdr__batch__item.html">cdr_batch_item</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queued CDR waiting to be batched.  <a href="../../dc/d81/structcdr__batch__item.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dc6/structcdr__beitem.html">cdr_beitem</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registration object for CDR backends.  <a href="../../dc/dc6/structcdr__beitem.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">An in-memory representation of an active CDR.  <a href="../../d4/db4/structcdr__object.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d0f/structcdr__object__fn__table.html">cdr_object_fn_table</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A virtual table used for <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a>.  <a href="../../d1/d0f/structcdr__object__fn__table.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A wrapper object around a snapshot. Fields that are mutable by the CDR engine are replicated here.  <a href="../../dc/d50/structcdr__object__snapshot.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d3d/structmo__list.html">mo_list</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of registered modifiers.  <a href="../../d6/d3d/structmo__list.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d57/structmodule__config.html">module_config</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The configuration settings for this module.  <a href="../../db/d57/structmodule__config.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d6c/structparty__b__userfield__update.html">party_b_userfield_update</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a8052195443a9cb5835d7d2b3ab7279aa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>(fmt, ...)</td></tr>
<tr class="separator:a8052195443a9cb5835d7d2b3ab7279aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64c2a67abebb54e4d8defda57e4e9206"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a64c2a67abebb54e4d8defda57e4e9206">cdr_set_debug_mode</a>(mod_cfg)</td></tr>
<tr class="separator:a64c2a67abebb54e4d8defda57e4e9206"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac08eabc66e6d2ae4fe32d1393d745acf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ac08eabc66e6d2ae4fe32d1393d745acf">DEFAULT_BATCH_SAFE_SHUTDOWN</a>&#160;&#160;&#160;&quot;1&quot;</td></tr>
<tr class="separator:ac08eabc66e6d2ae4fe32d1393d745acf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6686f1af7beb39a27b62183cc28ffca"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ad6686f1af7beb39a27b62183cc28ffca">DEFAULT_BATCH_SCHEDULER_ONLY</a>&#160;&#160;&#160;&quot;0&quot;</td></tr>
<tr class="separator:ad6686f1af7beb39a27b62183cc28ffca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a123fa013ecd2c91686ad58c0b8d985b3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a123fa013ecd2c91686ad58c0b8d985b3">DEFAULT_BATCH_SIZE</a>&#160;&#160;&#160;&quot;100&quot;</td></tr>
<tr class="separator:a123fa013ecd2c91686ad58c0b8d985b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1e44ecfc38cdda9d76e6976c11b0f6b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ac1e44ecfc38cdda9d76e6976c11b0f6b">DEFAULT_BATCH_TIME</a>&#160;&#160;&#160;&quot;300&quot;</td></tr>
<tr class="separator:ac1e44ecfc38cdda9d76e6976c11b0f6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a309d01905cce8329cb8b36e6dbe32c8f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a309d01905cce8329cb8b36e6dbe32c8f">DEFAULT_BATCHMODE</a>&#160;&#160;&#160;&quot;0&quot;</td></tr>
<tr class="separator:a309d01905cce8329cb8b36e6dbe32c8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5ff29d3c8a52b6b058a6094e8871c76"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#aa5ff29d3c8a52b6b058a6094e8871c76">DEFAULT_CONGESTION</a>&#160;&#160;&#160;&quot;0&quot;</td></tr>
<tr class="separator:aa5ff29d3c8a52b6b058a6094e8871c76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf8ded95b0a2e24134fa5eed072bd8db"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#adf8ded95b0a2e24134fa5eed072bd8db">DEFAULT_ENABLED</a>&#160;&#160;&#160;&quot;1&quot;</td></tr>
<tr class="separator:adf8ded95b0a2e24134fa5eed072bd8db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea4f7938cad0fcc78ffa4870723afdb7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#aea4f7938cad0fcc78ffa4870723afdb7">DEFAULT_END_BEFORE_H_EXTEN</a>&#160;&#160;&#160;&quot;1&quot;</td></tr>
<tr class="separator:aea4f7938cad0fcc78ffa4870723afdb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f8c393359ffd1043afb3462ceee07b7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a9f8c393359ffd1043afb3462ceee07b7">DEFAULT_INITIATED_SECONDS</a>&#160;&#160;&#160;&quot;0&quot;</td></tr>
<tr class="separator:a9f8c393359ffd1043afb3462ceee07b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55dd918534b04e187255e12bf5e5f777"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a55dd918534b04e187255e12bf5e5f777">DEFAULT_UNANSWERED</a>&#160;&#160;&#160;&quot;0&quot;</td></tr>
<tr class="separator:a55dd918534b04e187255e12bf5e5f777"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4610636f10e4604ba296cbf9287b0c7b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a4610636f10e4604ba296cbf9287b0c7b">FORMAT_STRING</a>&#160;&#160;&#160;&quot;%-25.25s %-25.25s %-15.15s %-8.8s %-8.8s %-8.8s %-8.8ld %-8.8ld\n&quot;</td></tr>
<tr class="separator:a4610636f10e4604ba296cbf9287b0c7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4610636f10e4604ba296cbf9287b0c7b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a4610636f10e4604ba296cbf9287b0c7b">FORMAT_STRING</a>&#160;&#160;&#160;&quot;%-10.10s %-20.20s %-25.25s %-15.15s %-15.15s %-8.8s %-8.8s %-8.8s %-8.8ld %-8.8ld\n&quot;</td></tr>
<tr class="separator:a4610636f10e4604ba296cbf9287b0c7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18373cd65e0761a3bd4e760a8e015baa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a18373cd65e0761a3bd4e760a8e015baa">MAX_BATCH_SIZE</a>&#160;&#160;&#160;1000</td></tr>
<tr class="separator:a18373cd65e0761a3bd4e760a8e015baa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d10e69bcfc7ad99f2b0d4256715aae2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a5d10e69bcfc7ad99f2b0d4256715aae2">MAX_BATCH_TIME</a>&#160;&#160;&#160;86400</td></tr>
<tr class="separator:a5d10e69bcfc7ad99f2b0d4256715aae2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4991c2ca36e7b5e4817953aeff633d3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ae4991c2ca36e7b5e4817953aeff633d3">TITLE_STRING</a>&#160;&#160;&#160;&quot;%-25.25s %-25.25s %-15.15s %-8.8s %-8.8s %-8.8s %-8.8s %-8.8s\n&quot;</td></tr>
<tr class="separator:ae4991c2ca36e7b5e4817953aeff633d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4991c2ca36e7b5e4817953aeff633d3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ae4991c2ca36e7b5e4817953aeff633d3">TITLE_STRING</a>&#160;&#160;&#160;&quot;%-10.10s %-20.20s %-25.25s %-15.15s %-15.15s %-8.8s %-8.8s %-8.8s %-8.8s %-8.8s\n&quot;</td></tr>
<tr class="separator:ae4991c2ca36e7b5e4817953aeff633d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a3bdd3cd3f0f0a84448a50181c3cee316"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316">process_bridge_enter_results</a> { <a class="el" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316a62a0455d2eb58c31a04b25d2c7eed117">BRIDGE_ENTER_ONLY_PARTY</a>, 
<a class="el" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316ad10fe7b54c407ca92612577a074e58c7">BRIDGE_ENTER_OBTAINED_PARTY_B</a>, 
<a class="el" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316a7975da294ade48d4154d1f00ec059039">BRIDGE_ENTER_NO_PARTY_B</a>, 
<a class="el" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316ab55afa346f826bd34c53c5d08acdbfae">BRIDGE_ENTER_NEED_CDR</a>
 }<tr class="memdesc:a3bdd3cd3f0f0a84448a50181c3cee316"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return types for process_bridge_enter functions.  <a href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a3bdd3cd3f0f0a84448a50181c3cee316"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a655a57e3cbf981c79dbcf7f61d8d9f88"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a655a57e3cbf981c79dbcf7f61d8d9f88">AO2_GLOBAL_OBJ_STATIC</a> (module_configs)</td></tr>
<tr class="memdesc:a655a57e3cbf981c79dbcf7f61d8d9f88"><td class="mdescLeft">&#160;</td><td class="mdescRight">The container for the module configuration.  <a href="#a655a57e3cbf981c79dbcf7f61d8d9f88">More...</a><br /></td></tr>
<tr class="separator:a655a57e3cbf981c79dbcf7f61d8d9f88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29ba08b358224b4c820e5df826273b5b"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a29ba08b358224b4c820e5df826273b5b">ast_cdr_alloc</a> (void)</td></tr>
<tr class="memdesc:a29ba08b358224b4c820e5df826273b5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a CDR record.  <a href="#a29ba08b358224b4c820e5df826273b5b">More...</a><br /></td></tr>
<tr class="separator:a29ba08b358224b4c820e5df826273b5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca84ca1a31569fb8916b3209ca35160a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#aca84ca1a31569fb8916b3209ca35160a">ast_cdr_backend_suspend</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:aca84ca1a31569fb8916b3209ca35160a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suspend a CDR backend temporarily.  <a href="#aca84ca1a31569fb8916b3209ca35160a">More...</a><br /></td></tr>
<tr class="separator:aca84ca1a31569fb8916b3209ca35160a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67072dcfd4f1b7486826cffb25dfbc6c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a67072dcfd4f1b7486826cffb25dfbc6c">ast_cdr_backend_unsuspend</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:a67072dcfd4f1b7486826cffb25dfbc6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unsuspend a CDR backend.  <a href="#a67072dcfd4f1b7486826cffb25dfbc6c">More...</a><br /></td></tr>
<tr class="separator:a67072dcfd4f1b7486826cffb25dfbc6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49ad75e3e3203433d5a7f6b63dab856d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a49ad75e3e3203433d5a7f6b63dab856d">ast_cdr_clear_property</a> (const char *channel_name, enum <a class="el" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37">ast_cdr_options</a> option)</td></tr>
<tr class="memdesc:a49ad75e3e3203433d5a7f6b63dab856d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear a property on a CDR for a channel.  <a href="#a49ad75e3e3203433d5a7f6b63dab856d">More...</a><br /></td></tr>
<tr class="separator:a49ad75e3e3203433d5a7f6b63dab856d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e23f3be8d570dbc8e6c872c566c09d9"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a0e23f3be8d570dbc8e6c872c566c09d9">ast_cdr_disp2str</a> (int disposition)</td></tr>
<tr class="memdesc:a0e23f3be8d570dbc8e6c872c566c09d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disposition to a string.  <a href="#a0e23f3be8d570dbc8e6c872c566c09d9">More...</a><br /></td></tr>
<tr class="separator:a0e23f3be8d570dbc8e6c872c566c09d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e8acc90934bc4647dd675a251d9e6ab"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a7e8acc90934bc4647dd675a251d9e6ab">ast_cdr_dup</a> (struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *cdr)</td></tr>
<tr class="memdesc:a7e8acc90934bc4647dd675a251d9e6ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Duplicate a public CDR.  <a href="#a7e8acc90934bc4647dd675a251d9e6ab">More...</a><br /></td></tr>
<tr class="separator:a7e8acc90934bc4647dd675a251d9e6ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5634f8ea707fb2fdf87abdd55a539764"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a5634f8ea707fb2fdf87abdd55a539764">ast_cdr_engine_term</a> (void)</td></tr>
<tr class="separator:a5634f8ea707fb2fdf87abdd55a539764"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a849140919895e9871b901d6805f47eba"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a849140919895e9871b901d6805f47eba">ast_cdr_fork</a> (const char *channel_name, struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a> *<a class="el" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>)</td></tr>
<tr class="memdesc:a849140919895e9871b901d6805f47eba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fork a CDR.  <a href="#a849140919895e9871b901d6805f47eba">More...</a><br /></td></tr>
<tr class="separator:a849140919895e9871b901d6805f47eba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ce5d9fd0bec829301262576b9afdaf5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a4ce5d9fd0bec829301262576b9afdaf5">ast_cdr_format_var</a> (struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *cdr, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, char **ret, char *workspace, int workspacelen, int raw)</td></tr>
<tr class="memdesc:a4ce5d9fd0bec829301262576b9afdaf5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Format a CDR variable from an already posted CDR.  <a href="#a4ce5d9fd0bec829301262576b9afdaf5">More...</a><br /></td></tr>
<tr class="separator:a4ce5d9fd0bec829301262576b9afdaf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28b931d52c71271afd601186db95fec2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a28b931d52c71271afd601186db95fec2">ast_cdr_free</a> (struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *cdr)</td></tr>
<tr class="memdesc:a28b931d52c71271afd601186db95fec2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free a CDR record.  <a href="#a28b931d52c71271afd601186db95fec2">More...</a><br /></td></tr>
<tr class="separator:a28b931d52c71271afd601186db95fec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a740f0c21a596d9d15654f31d8e74432f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a740f0c21a596d9d15654f31d8e74432f">ast_cdr_generic_unregister</a> (struct <a class="el" href="../../d5/d08/structbe__list.html">be_list</a> *generic_list, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:a740f0c21a596d9d15654f31d8e74432f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5aba419cbee0fdecc0ada086857edaaf"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a5aba419cbee0fdecc0ada086857edaaf">ast_cdr_get_config</a> (void)</td></tr>
<tr class="memdesc:a5aba419cbee0fdecc0ada086857edaaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtain the current CDR configuration.  <a href="#a5aba419cbee0fdecc0ada086857edaaf">More...</a><br /></td></tr>
<tr class="separator:a5aba419cbee0fdecc0ada086857edaaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90a1e29081a1827a2cc4c535ef07c8c2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a90a1e29081a1827a2cc4c535ef07c8c2">ast_cdr_getvar</a> (const char *channel_name, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>, size_t length)</td></tr>
<tr class="memdesc:a90a1e29081a1827a2cc4c535ef07c8c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve a CDR variable from a channel's current CDR.  <a href="#a90a1e29081a1827a2cc4c535ef07c8c2">More...</a><br /></td></tr>
<tr class="separator:a90a1e29081a1827a2cc4c535ef07c8c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1819c3aecd7b59e2734810f52b219059"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a1819c3aecd7b59e2734810f52b219059">ast_cdr_is_enabled</a> (void)</td></tr>
<tr class="memdesc:a1819c3aecd7b59e2734810f52b219059"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return TRUE if CDR subsystem is enabled.  <a href="#a1819c3aecd7b59e2734810f52b219059">More...</a><br /></td></tr>
<tr class="separator:a1819c3aecd7b59e2734810f52b219059"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0eef9f12c37f55a0ca10c9b7d3c50063"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a0eef9f12c37f55a0ca10c9b7d3c50063">ast_cdr_message_router</a> (void)</td></tr>
<tr class="memdesc:a0eef9f12c37f55a0ca10c9b7d3c50063"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the message router for the CDR engine.  <a href="#a0eef9f12c37f55a0ca10c9b7d3c50063">More...</a><br /></td></tr>
<tr class="separator:a0eef9f12c37f55a0ca10c9b7d3c50063"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a262bb97e8cbf833e7e6c1b80209b8abb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a262bb97e8cbf833e7e6c1b80209b8abb">ast_cdr_modifier_register</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *<a class="el" href="../../d5/dd1/cdr__sqlite3__custom_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>, <a class="el" href="../../dc/d07/cdr_8h.html#a5f51cd53e2482c562f7f348d68f4243c">ast_cdrbe</a> <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a>)</td></tr>
<tr class="memdesc:a262bb97e8cbf833e7e6c1b80209b8abb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a CDR modifier.  <a href="#a262bb97e8cbf833e7e6c1b80209b8abb">More...</a><br /></td></tr>
<tr class="separator:a262bb97e8cbf833e7e6c1b80209b8abb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bee4ca0e02f5bf17d5e32eca79d7998"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a3bee4ca0e02f5bf17d5e32eca79d7998">ast_cdr_modifier_unregister</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:a3bee4ca0e02f5bf17d5e32eca79d7998"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a CDR modifier.  <a href="#a3bee4ca0e02f5bf17d5e32eca79d7998">More...</a><br /></td></tr>
<tr class="separator:a3bee4ca0e02f5bf17d5e32eca79d7998"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdbcf7f728cbacea0b28bf9c51f99b92"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#abdbcf7f728cbacea0b28bf9c51f99b92">ast_cdr_register</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *<a class="el" href="../../d5/dd1/cdr__sqlite3__custom_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>, <a class="el" href="../../dc/d07/cdr_8h.html#a5f51cd53e2482c562f7f348d68f4243c">ast_cdrbe</a> <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a>)</td></tr>
<tr class="memdesc:abdbcf7f728cbacea0b28bf9c51f99b92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a CDR handling engine.  <a href="#abdbcf7f728cbacea0b28bf9c51f99b92">More...</a><br /></td></tr>
<tr class="separator:abdbcf7f728cbacea0b28bf9c51f99b92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af73a38a457f60f9c8a86286b3280c4d8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#af73a38a457f60f9c8a86286b3280c4d8">ast_cdr_reset</a> (const char *channel_name, int keep_variables)</td></tr>
<tr class="memdesc:af73a38a457f60f9c8a86286b3280c4d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the detail record.  <a href="#af73a38a457f60f9c8a86286b3280c4d8">More...</a><br /></td></tr>
<tr class="separator:af73a38a457f60f9c8a86286b3280c4d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa16b81388933557fa1c47537897c24a9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#aa16b81388933557fa1c47537897c24a9">ast_cdr_serialize_variables</a> (const char *channel_name, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, char delim, char sep)</td></tr>
<tr class="memdesc:aa16b81388933557fa1c47537897c24a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serializes all the data and variables for a current CDR record.  <a href="#aa16b81388933557fa1c47537897c24a9">More...</a><br /></td></tr>
<tr class="separator:aa16b81388933557fa1c47537897c24a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e119010fb723a389d3aabc45c0f9435"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a2e119010fb723a389d3aabc45c0f9435">ast_cdr_set_config</a> (struct <a class="el" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a> *<a class="el" href="../../d0/d8a/muted_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>)</td></tr>
<tr class="memdesc:a2e119010fb723a389d3aabc45c0f9435"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the current CDR configuration.  <a href="#a2e119010fb723a389d3aabc45c0f9435">More...</a><br /></td></tr>
<tr class="separator:a2e119010fb723a389d3aabc45c0f9435"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcdba7928fed6e22df50a8d9b6c4cbf8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#afcdba7928fed6e22df50a8d9b6c4cbf8">ast_cdr_set_property</a> (const char *channel_name, enum <a class="el" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37">ast_cdr_options</a> option)</td></tr>
<tr class="memdesc:afcdba7928fed6e22df50a8d9b6c4cbf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a property on a CDR for a channel.  <a href="#afcdba7928fed6e22df50a8d9b6c4cbf8">More...</a><br /></td></tr>
<tr class="separator:afcdba7928fed6e22df50a8d9b6c4cbf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a5de28755e68ba2351a38210afc2423"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a1a5de28755e68ba2351a38210afc2423">ast_cdr_setuserfield</a> (const char *channel_name, const char *userfield)</td></tr>
<tr class="memdesc:a1a5de28755e68ba2351a38210afc2423"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set CDR user field for channel (stored in CDR)  <a href="#a1a5de28755e68ba2351a38210afc2423">More...</a><br /></td></tr>
<tr class="separator:a1a5de28755e68ba2351a38210afc2423"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cb15fc5160b2842ef7aa5b4f238b7fb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a4cb15fc5160b2842ef7aa5b4f238b7fb">ast_cdr_setvar</a> (const char *channel_name, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="memdesc:a4cb15fc5160b2842ef7aa5b4f238b7fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a variable on a CDR.  <a href="#a4cb15fc5160b2842ef7aa5b4f238b7fb">More...</a><br /></td></tr>
<tr class="separator:a4cb15fc5160b2842ef7aa5b4f238b7fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a915cbbaeaf06834cc96f4b8e3c224251"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a915cbbaeaf06834cc96f4b8e3c224251">ast_cdr_unregister</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:a915cbbaeaf06834cc96f4b8e3c224251"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a CDR handling engine.  <a href="#a915cbbaeaf06834cc96f4b8e3c224251">More...</a><br /></td></tr>
<tr class="separator:a915cbbaeaf06834cc96f4b8e3c224251"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5407117331cea1d5aad43894168d1180"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316">process_bridge_enter_results</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a5407117331cea1d5aad43894168d1180">base_process_bridge_enter</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *bridge, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *<a class="el" href="../../d4/d84/structchannel.html">channel</a>)</td></tr>
<tr class="separator:a5407117331cea1d5aad43894168d1180"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a377ae573cc6f72eabf85a177b7c6b474"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a377ae573cc6f72eabf85a177b7c6b474">base_process_bridge_leave</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *bridge, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *<a class="el" href="../../d4/d84/structchannel.html">channel</a>)</td></tr>
<tr class="separator:a377ae573cc6f72eabf85a177b7c6b474"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5690606c82b9a2854eadc611e1574cc2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a5690606c82b9a2854eadc611e1574cc2">base_process_dial_end</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *caller, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *peer, const char *dial_status)</td></tr>
<tr class="separator:a5690606c82b9a2854eadc611e1574cc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a0eefa699d34246b28d3b4bf25df8c9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a5a0eefa699d34246b28d3b4bf25df8c9">base_process_parked_channel</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../d0/d47/structast__parked__call__payload.html">ast_parked_call_payload</a> *parking_info)</td></tr>
<tr class="separator:a5a0eefa699d34246b28d3b4bf25df8c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8eaa5eabaf72c8c63f40f6b03f196573"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a8eaa5eabaf72c8c63f40f6b03f196573">base_process_party_a</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *snapshot)</td></tr>
<tr class="separator:a8eaa5eabaf72c8c63f40f6b03f196573"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbc6a65e2dece6fa788aebe847752e3c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#abbc6a65e2dece6fa788aebe847752e3c">bridge_candidate_add_to_cdr</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a> *party_b)</td></tr>
<tr class="separator:abbc6a65e2dece6fa788aebe847752e3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d37a638dca298b75ff958c962471698"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a3d37a638dca298b75ff958c962471698">bridge_candidate_process</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *base_cand_cdr)</td></tr>
<tr class="memdesc:a3d37a638dca298b75ff958c962471698"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process a single bridge_candidate.  <a href="#a3d37a638dca298b75ff958c962471698">More...</a><br /></td></tr>
<tr class="separator:a3d37a638dca298b75ff958c962471698"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa174050d87a517c5b0db7c5ea2af32b3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#aa174050d87a517c5b0db7c5ea2af32b3">bridge_state_process_bridge_leave</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *bridge, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *<a class="el" href="../../d4/d84/structchannel.html">channel</a>)</td></tr>
<tr class="separator:aa174050d87a517c5b0db7c5ea2af32b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b57bf227fb5fef47ce776810a2a2053"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a2b57bf227fb5fef47ce776810a2a2053">bridge_state_process_party_b</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *snapshot)</td></tr>
<tr class="separator:a2b57bf227fb5fef47ce776810a2a2053"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae8c02f876344b3e49f91b1755ac078f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#aae8c02f876344b3e49f91b1755ac078f">cdr_all_cmp_fn</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="separator:aae8c02f876344b3e49f91b1755ac078f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fc4102c3217d702e3465ee8859c44bf"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a4fc4102c3217d702e3465ee8859c44bf">cdr_all_hash_fn</a> (const void *obj, const int flags)</td></tr>
<tr class="separator:a4fc4102c3217d702e3465ee8859c44bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2812e34e2a42693cf02793d873f9c577"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a2812e34e2a42693cf02793d873f9c577">cdr_all_print_fn</a> (void *v_obj, void *where, <a class="el" href="../../d5/da5/astobj2_8h.html#af236ed10cd1eddcbad0579ed0cf9f4c5">ao2_prnt_fn</a> *prnt)</td></tr>
<tr class="separator:a2812e34e2a42693cf02793d873f9c577"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b92f90cd704735201d9c840842bd0bc"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a9b92f90cd704735201d9c840842bd0bc">cdr_all_relink</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr)</td></tr>
<tr class="separator:a9b92f90cd704735201d9c840842bd0bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20aa34dca45895c5ccd7a0b580987ab9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a20aa34dca45895c5ccd7a0b580987ab9">cdr_all_unlink</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr)</td></tr>
<tr class="separator:a20aa34dca45895c5ccd7a0b580987ab9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c1412651d3d5121de1ef7c473dac3b4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a3c1412651d3d5121de1ef7c473dac3b4">cdr_detach</a> (struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *cdr)</td></tr>
<tr class="separator:a3c1412651d3d5121de1ef7c473dac3b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9235d826a774900dc1916fd6dc63082"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#aa9235d826a774900dc1916fd6dc63082">cdr_enable_batch_mode</a> (struct <a class="el" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a> *<a class="el" href="../../d0/d8a/muted_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>)</td></tr>
<tr class="separator:aa9235d826a774900dc1916fd6dc63082"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaee16cde4e4e220e1b20aad913c3ea7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#acaee16cde4e4e220e1b20aad913c3ea7">cdr_engine_shutdown</a> (void)</td></tr>
<tr class="separator:acaee16cde4e4e220e1b20aad913c3ea7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4705b2dc3ab2f2294119c7fc9ceeb003"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a4705b2dc3ab2f2294119c7fc9ceeb003">cdr_format_var_internal</a> (struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *cdr, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:a4705b2dc3ab2f2294119c7fc9ceeb003"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c028476f292cc1ae19c7bc9f89ab4e3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a3c028476f292cc1ae19c7bc9f89ab4e3">cdr_generic_register</a> (struct <a class="el" href="../../d5/d08/structbe__list.html">be_list</a> *generic_list, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *<a class="el" href="../../d5/dd1/cdr__sqlite3__custom_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>, <a class="el" href="../../dc/d07/cdr_8h.html#a5f51cd53e2482c562f7f348d68f4243c">ast_cdrbe</a> <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a>)</td></tr>
<tr class="separator:a3c028476f292cc1ae19c7bc9f89ab4e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26ef22f050d742f08715473a63720bb5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a26ef22f050d742f08715473a63720bb5">cdr_get_tv</a> (struct timeval when, const char *fmt, char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, int bufsize)</td></tr>
<tr class="separator:a26ef22f050d742f08715473a63720bb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c041a2fdf7380bf2767067dae488f60"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a5c041a2fdf7380bf2767067dae488f60">cdr_master_cmp_fn</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="separator:a5c041a2fdf7380bf2767067dae488f60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4d1a552b91a5b7ab7b4ea4fea301169"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ae4d1a552b91a5b7ab7b4ea4fea301169">cdr_master_hash_fn</a> (const void *obj, const int flags)</td></tr>
<tr class="separator:ae4d1a552b91a5b7ab7b4ea4fea301169"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa06976cdf68174771e4bd9c77b0360eb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#aa06976cdf68174771e4bd9c77b0360eb">cdr_master_print_fn</a> (void *v_obj, void *where, <a class="el" href="../../d5/da5/astobj2_8h.html#af236ed10cd1eddcbad0579ed0cf9f4c5">ao2_prnt_fn</a> *prnt)</td></tr>
<tr class="separator:aa06976cdf68174771e4bd9c77b0360eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a737259f181b5de3c4ee0538dde7ca44f"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a737259f181b5de3c4ee0538dde7ca44f">cdr_object_alloc</a> (struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *chan, const struct timeval *event_time)</td></tr>
<tr class="memdesc:a737259f181b5de3c4ee0538dde7ca44f"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> constructor  <a href="#a737259f181b5de3c4ee0538dde7ca44f">More...</a><br /></td></tr>
<tr class="separator:a737259f181b5de3c4ee0538dde7ca44f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89033e69df1c30043f7f2dbdcfd3ec12"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a89033e69df1c30043f7f2dbdcfd3ec12">cdr_object_check_party_a_answer</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr)</td></tr>
<tr class="memdesc:a89033e69df1c30043f7f2dbdcfd3ec12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check to see if a CDR needs to be answered based on its Party A. Note that this is safe to call as much as you want - we won't answer twice.  <a href="#a89033e69df1c30043f7f2dbdcfd3ec12">More...</a><br /></td></tr>
<tr class="separator:a89033e69df1c30043f7f2dbdcfd3ec12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c51536e3755c5538d1c6e9f804f8457"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a6c51536e3755c5538d1c6e9f804f8457">cdr_object_check_party_a_hangup</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr)</td></tr>
<tr class="memdesc:a6c51536e3755c5538d1c6e9f804f8457"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check to see if a CDR needs to move to the finalized state because its Party A hungup.  <a href="#a6c51536e3755c5538d1c6e9f804f8457">More...</a><br /></td></tr>
<tr class="separator:a6c51536e3755c5538d1c6e9f804f8457"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af90187a3766c8b50aa4b984a62e30219"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#af90187a3766c8b50aa4b984a62e30219">cdr_object_create_and_append</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, const struct timeval *event_time)</td></tr>
<tr class="memdesc:af90187a3766c8b50aa4b984a62e30219"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> and append it to an existing chain.  <a href="#af90187a3766c8b50aa4b984a62e30219">More...</a><br /></td></tr>
<tr class="separator:af90187a3766c8b50aa4b984a62e30219"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ef86baa7657cc22cd8ca9188ec2a1f6"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a7ef86baa7657cc22cd8ca9188ec2a1f6">cdr_object_create_public_records</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr)</td></tr>
<tr class="memdesc:a7ef86baa7657cc22cd8ca9188ec2a1f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a chain of <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> objects from a chain of <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> suitable for consumption by the registered CDR backends.  <a href="#a7ef86baa7657cc22cd8ca9188ec2a1f6">More...</a><br /></td></tr>
<tr class="separator:a7ef86baa7657cc22cd8ca9188ec2a1f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5444a54e2ceea8a25176f88a839f1786"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a5444a54e2ceea8a25176f88a839f1786">cdr_object_dispatch</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr)</td></tr>
<tr class="memdesc:a5444a54e2ceea8a25176f88a839f1786"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dispatch a CDR.  <a href="#a5444a54e2ceea8a25176f88a839f1786">More...</a><br /></td></tr>
<tr class="separator:a5444a54e2ceea8a25176f88a839f1786"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b4b598a8c5733e77b60de4440599b97"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a0b4b598a8c5733e77b60de4440599b97">cdr_object_dispatch_all_cb</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="memdesc:a0b4b598a8c5733e77b60de4440599b97"><td class="mdescLeft">&#160;</td><td class="mdescRight">This dispatches <em>all</em> cdr_objects. It should only be used during shutdown, so that we get billing records for everything that we can.  <a href="#a0b4b598a8c5733e77b60de4440599b97">More...</a><br /></td></tr>
<tr class="separator:a0b4b598a8c5733e77b60de4440599b97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7d529dbc732a4c6773bdf43fe41135c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ae7d529dbc732a4c6773bdf43fe41135c">cdr_object_dtor</a> (void *obj)</td></tr>
<tr class="memdesc:ae7d529dbc732a4c6773bdf43fe41135c"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> Destructor  <a href="#ae7d529dbc732a4c6773bdf43fe41135c">More...</a><br /></td></tr>
<tr class="separator:ae7d529dbc732a4c6773bdf43fe41135c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34a146403fab13026f6e302c753be741"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a34a146403fab13026f6e302c753be741">cdr_object_finalize</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr)</td></tr>
<tr class="memdesc:a34a146403fab13026f6e302c753be741"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalize a CDR.  <a href="#a34a146403fab13026f6e302c753be741">More...</a><br /></td></tr>
<tr class="separator:a34a146403fab13026f6e302c753be741"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c2c48505a390f6206a8344cae18ed91"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a3c2c48505a390f6206a8344cae18ed91">cdr_object_finalize_party_b</a> (void *obj, void *arg, void *data, int flags)</td></tr>
<tr class="separator:a3c2c48505a390f6206a8344cae18ed91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cdc281513509f0204d371e2c51fd18e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a0cdc281513509f0204d371e2c51fd18e">cdr_object_format_property</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr_obj, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>, size_t length)</td></tr>
<tr class="memdesc:a0cdc281513509f0204d371e2c51fd18e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Format one of the standard properties on a <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a>.  <a href="#a0cdc281513509f0204d371e2c51fd18e">More...</a><br /></td></tr>
<tr class="separator:a0cdc281513509f0204d371e2c51fd18e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a950160d2c2449f652f0342b416909030"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a950160d2c2449f652f0342b416909030">cdr_object_format_var_internal</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>, size_t length)</td></tr>
<tr class="memdesc:a950160d2c2449f652f0342b416909030"><td class="mdescLeft">&#160;</td><td class="mdescRight">Format a variable on a <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a>.  <a href="#a950160d2c2449f652f0342b416909030">More...</a><br /></td></tr>
<tr class="separator:a950160d2c2449f652f0342b416909030"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa7b9b4b0bda02dc2c931c52879f3640"><td class="memItemLeft" align="right" valign="top">static long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#aaa7b9b4b0bda02dc2c931c52879f3640">cdr_object_get_billsec</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr)</td></tr>
<tr class="memdesc:aaa7b9b4b0bda02dc2c931c52879f3640"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the billsec for a <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a>.  <a href="#aaa7b9b4b0bda02dc2c931c52879f3640">More...</a><br /></td></tr>
<tr class="separator:aaa7b9b4b0bda02dc2c931c52879f3640"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89dc924870cf4d81f8841a3b4f33d722"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:a89dc924870cf4d81f8841a3b4f33d722"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3bae5915bf7ced464da5700ba9257cd"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ac3bae5915bf7ced464da5700ba9257cd">cdr_object_get_by_name_cb</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="separator:ac3bae5915bf7ced464da5700ba9257cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2852e80c63e181da49149e0a30522140"><td class="memItemLeft" align="right" valign="top">static long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a2852e80c63e181da49149e0a30522140">cdr_object_get_duration</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr)</td></tr>
<tr class="separator:a2852e80c63e181da49149e0a30522140"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae391d5e66065256893c2ef6c784e6d9f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ae391d5e66065256893c2ef6c784e6d9f">cdr_object_party_b_left_bridge_cb</a> (void *obj, void *arg, void *data, int flags)</td></tr>
<tr class="memdesc:ae391d5e66065256893c2ef6c784e6d9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback used to notify CDRs of a Party B leaving the bridge.  <a href="#ae391d5e66065256893c2ef6c784e6d9f">More...</a><br /></td></tr>
<tr class="separator:ae391d5e66065256893c2ef6c784e6d9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46fb3c14485f999d7039c7b9fb3f33d9"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a46fb3c14485f999d7039c7b9fb3f33d9">cdr_object_pick_party_a</a> (struct <a class="el" href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a> *left, struct <a class="el" href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a> *right)</td></tr>
<tr class="memdesc:a46fb3c14485f999d7039c7b9fb3f33d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given two CDR snapshots, figure out who should be Party A for the resulting CDR.  <a href="#a46fb3c14485f999d7039c7b9fb3f33d9">More...</a><br /></td></tr>
<tr class="separator:a46fb3c14485f999d7039c7b9fb3f33d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b0de636092270f4f2b0ecff29eb6135"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a4b0de636092270f4f2b0ecff29eb6135">cdr_object_select_all_by_name_cb</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="separator:a4b0de636092270f4f2b0ecff29eb6135"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6f0c67eb7eb3db1986267c0f64eacd1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ab6f0c67eb7eb3db1986267c0f64eacd1">cdr_object_set_disposition</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, int hangupcause)</td></tr>
<tr class="memdesc:ab6f0c67eb7eb3db1986267c0f64eacd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the disposition on a <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> based on a hangupcause code.  <a href="#ab6f0c67eb7eb3db1986267c0f64eacd1">More...</a><br /></td></tr>
<tr class="separator:ab6f0c67eb7eb3db1986267c0f64eacd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9409d6642fce1018ef347f2fcece7eea"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a9409d6642fce1018ef347f2fcece7eea">cdr_object_snapshot_copy</a> (struct <a class="el" href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a> *dst, struct <a class="el" href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a> *src)</td></tr>
<tr class="memdesc:a9409d6642fce1018ef347f2fcece7eea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy a snapshot and its details.  <a href="#a9409d6642fce1018ef347f2fcece7eea">More...</a><br /></td></tr>
<tr class="separator:a9409d6642fce1018ef347f2fcece7eea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f169319f8865c4f86897f944ae0f00c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a5f169319f8865c4f86897f944ae0f00c">cdr_object_swap_snapshot</a> (struct <a class="el" href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a> *old_snapshot, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *new_snapshot)</td></tr>
<tr class="memdesc:a5f169319f8865c4f86897f944ae0f00c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Swap an old <a class="el" href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a>'s <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> for a new <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a>.  <a href="#a5f169319f8865c4f86897f944ae0f00c">More...</a><br /></td></tr>
<tr class="separator:a5f169319f8865c4f86897f944ae0f00c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec9ada03f8f99aa4c972b141bcbd2ee3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../d1/d0f/structcdr__object__fn__table.html">cdr_object_fn_table</a> *fn_table)</td></tr>
<tr class="memdesc:aec9ada03f8f99aa4c972b141bcbd2ee3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transition a <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> to a new state.  <a href="#aec9ada03f8f99aa4c972b141bcbd2ee3">More...</a><br /></td></tr>
<tr class="separator:aec9ada03f8f99aa4c972b141bcbd2ee3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0da1ef8c056af9f1566664d6f6563f23"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a0da1ef8c056af9f1566664d6f6563f23">cdr_object_transition_state_init</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../d1/d0f/structcdr__object__fn__table.html">cdr_object_fn_table</a> *fn_table, int do_init)</td></tr>
<tr class="memdesc:a0da1ef8c056af9f1566664d6f6563f23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transition a <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> to a new state with initiation flag.  <a href="#a0da1ef8c056af9f1566664d6f6563f23">More...</a><br /></td></tr>
<tr class="separator:a0da1ef8c056af9f1566664d6f6563f23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae17c6fb1569bdee3442031db51476073"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ae17c6fb1569bdee3442031db51476073">cdr_object_update_cid</a> (struct <a class="el" href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a> *old_snapshot, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *new_snapshot)</td></tr>
<tr class="separator:ae17c6fb1569bdee3442031db51476073"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a396def329f80f3d866244fe08abac54a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a396def329f80f3d866244fe08abac54a">cdr_object_update_party_b</a> (void *obj, void *arg, void *data, int flags)</td></tr>
<tr class="separator:a396def329f80f3d866244fe08abac54a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9996dd8c278c3be2f3a04bacb316f053"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a9996dd8c278c3be2f3a04bacb316f053">cdr_object_update_party_b_userfield_cb</a> (void *obj, void *arg, void *data, int flags)</td></tr>
<tr class="memdesc:a9996dd8c278c3be2f3a04bacb316f053"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback used to update the userfield on Party B on all CDRs.  <a href="#a9996dd8c278c3be2f3a04bacb316f053">More...</a><br /></td></tr>
<tr class="separator:a9996dd8c278c3be2f3a04bacb316f053"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae78649474f95f4adb19a0791ed39f4fc"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ae78649474f95f4adb19a0791ed39f4fc">cdr_submit_batch</a> (int shutdown)</td></tr>
<tr class="separator:ae78649474f95f4adb19a0791ed39f4fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77dc1728a978dd5a7d045800200be4cc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a77dc1728a978dd5a7d045800200be4cc">cdr_toggle_runtime_options</a> (void)</td></tr>
<tr class="memdesc:a77dc1728a978dd5a7d045800200be4cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if CDRs are enabled and enables/disables the necessary options.  <a href="#a77dc1728a978dd5a7d045800200be4cc">More...</a><br /></td></tr>
<tr class="separator:a77dc1728a978dd5a7d045800200be4cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7263fb983d894a47154469f5b2886e02"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a7263fb983d894a47154469f5b2886e02">check_new_cdr_needed</a> (struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *old_snapshot, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *new_snapshot)</td></tr>
<tr class="memdesc:a7263fb983d894a47154469f5b2886e02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if we need to add a new CDR based on snapshots.  <a href="#a7263fb983d894a47154469f5b2886e02">More...</a><br /></td></tr>
<tr class="separator:a7263fb983d894a47154469f5b2886e02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fa8c4c4ee405c2f3e1eee79cdbbbc38"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a0fa8c4c4ee405c2f3e1eee79cdbbbc38">cli_complete_show</a> (struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="memdesc:a0fa8c4c4ee405c2f3e1eee79cdbbbc38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Complete user input for 'cdr show'.  <a href="#a0fa8c4c4ee405c2f3e1eee79cdbbbc38">More...</a><br /></td></tr>
<tr class="separator:a0fa8c4c4ee405c2f3e1eee79cdbbbc38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac38aa7c2170730c4e820202c3838d182"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ac38aa7c2170730c4e820202c3838d182">cli_show_channel</a> (struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:ac38aa7c2170730c4e820202c3838d182"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42aa90cd5dc2d0c7ddc58bc021634de5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a42aa90cd5dc2d0c7ddc58bc021634de5">cli_show_channels</a> (struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a42aa90cd5dc2d0c7ddc58bc021634de5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4db02bc1bd27f2f2dde30febbf37243"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#af4db02bc1bd27f2f2dde30febbf37243">CONFIG_INFO_CORE</a> (&quot;cdr&quot;, cfg_info, module_configs, <a class="el" href="../../d7/d1b/res__prometheus_8c.html#ae006c692706bf9b5e8a21e8140382c75">module_config_alloc</a>,.files=<a class="el" href="../../db/dfe/config__options_8h.html#a60d2944aab4537720434ab9c90e12418">ACO_FILES</a>(&amp;<a class="el" href="../../dc/df2/cdr_8c.html#a5992da1d576df52445a82f5a49d6b54f">module_file_conf</a>),.post_apply_config=<a class="el" href="../../dc/df2/cdr_8c.html#ae8a3bad648f2a5bdc92e536ecd7d9484">module_config_post_apply</a>,)</td></tr>
<tr class="separator:af4db02bc1bd27f2f2dde30febbf37243"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b10f449baa91a185f72f31509abb95f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a7b10f449baa91a185f72f31509abb95f">copy_variables</a> (struct <a class="el" href="../../dd/de6/structvarshead.html">varshead</a> *to_list, struct <a class="el" href="../../dd/de6/structvarshead.html">varshead</a> *from_list)</td></tr>
<tr class="memdesc:a7b10f449baa91a185f72f31509abb95f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy variables from one list to another.  <a href="#a7b10f449baa91a185f72f31509abb95f">More...</a><br /></td></tr>
<tr class="separator:a7b10f449baa91a185f72f31509abb95f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34685f905c456c1a4eb347d066a8b5e6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a34685f905c456c1a4eb347d066a8b5e6">create_subscriptions</a> (void)</td></tr>
<tr class="memdesc:a34685f905c456c1a4eb347d066a8b5e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the Stasis subcriptions for CDRs.  <a href="#a34685f905c456c1a4eb347d066a8b5e6">More...</a><br /></td></tr>
<tr class="separator:a34685f905c456c1a4eb347d066a8b5e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae65f9813539412cd935004baea3e03f0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ae65f9813539412cd935004baea3e03f0">destroy_subscriptions</a> (void)</td></tr>
<tr class="memdesc:ae65f9813539412cd935004baea3e03f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy the active Stasis subscriptions.  <a href="#ae65f9813539412cd935004baea3e03f0">More...</a><br /></td></tr>
<tr class="separator:ae65f9813539412cd935004baea3e03f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd2af5f788049cdd54db340fe84f9775"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316">process_bridge_enter_results</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#afd2af5f788049cdd54db340fe84f9775">dial_state_process_bridge_enter</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *bridge, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *<a class="el" href="../../d4/d84/structchannel.html">channel</a>)</td></tr>
<tr class="separator:afd2af5f788049cdd54db340fe84f9775"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e72bf1ce974244771ee9d705ad29538"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a9e72bf1ce974244771ee9d705ad29538">dial_state_process_dial_begin</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *caller, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *peer)</td></tr>
<tr class="separator:a9e72bf1ce974244771ee9d705ad29538"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8823a0495202bc84ec88bfa2e2deb510"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a8823a0495202bc84ec88bfa2e2deb510">dial_state_process_dial_end</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *caller, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *peer, const char *dial_status)</td></tr>
<tr class="separator:a8823a0495202bc84ec88bfa2e2deb510"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99f90e851983820ff988acc4eff68b9c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a99f90e851983820ff988acc4eff68b9c">dial_state_process_party_b</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *snapshot)</td></tr>
<tr class="separator:a99f90e851983820ff988acc4eff68b9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7379eaa5658d0fa7eaacb189b8236255"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a7379eaa5658d0fa7eaacb189b8236255">dial_status_end</a> (const char *dialstatus)</td></tr>
<tr class="separator:a7379eaa5658d0fa7eaacb189b8236255"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a6754fd8cd7b0a3d9014a15ccb7b718"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0">ast_cdr_disposition</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a0a6754fd8cd7b0a3d9014a15ccb7b718">dial_status_to_disposition</a> (const char *dial_status)</td></tr>
<tr class="separator:a0a6754fd8cd7b0a3d9014a15ccb7b718"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8c94889c52e8fd9c9f77d4b71c89cdd"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316">process_bridge_enter_results</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ad8c94889c52e8fd9c9f77d4b71c89cdd">dialed_pending_state_process_bridge_enter</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *bridge, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *<a class="el" href="../../d4/d84/structchannel.html">channel</a>)</td></tr>
<tr class="separator:ad8c94889c52e8fd9c9f77d4b71c89cdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e015edf0c70e2261d82a38fea83457f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a0e015edf0c70e2261d82a38fea83457f">dialed_pending_state_process_dial_begin</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *caller, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *peer)</td></tr>
<tr class="separator:a0e015edf0c70e2261d82a38fea83457f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24cc031156cc9f757aac40a4b4301ac2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a24cc031156cc9f757aac40a4b4301ac2">dialed_pending_state_process_parking_bridge_enter</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *bridge, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *<a class="el" href="../../d4/d84/structchannel.html">channel</a>)</td></tr>
<tr class="separator:a24cc031156cc9f757aac40a4b4301ac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea1036434bb1f136e2b46bd98739d99a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#aea1036434bb1f136e2b46bd98739d99a">dialed_pending_state_process_party_a</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *snapshot)</td></tr>
<tr class="separator:aea1036434bb1f136e2b46bd98739d99a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac661a0b8ae11d5cf5cae1e6aa238496b"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ac661a0b8ae11d5cf5cae1e6aa238496b">do_batch_backend_process</a> (void *data)</td></tr>
<tr class="separator:ac661a0b8ae11d5cf5cae1e6aa238496b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a871988199d244a254ad19be2ab41d6e8"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a871988199d244a254ad19be2ab41d6e8">do_cdr</a> (void *data)</td></tr>
<tr class="separator:a871988199d244a254ad19be2ab41d6e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a897c4684f64f60932cf77a2cb8402cdc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a897c4684f64f60932cf77a2cb8402cdc">filter_bridge_messages</a> (struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *bridge)</td></tr>
<tr class="memdesc:a897c4684f64f60932cf77a2cb8402cdc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Filter bridge messages based on bridge technology.  <a href="#a897c4684f64f60932cf77a2cb8402cdc">More...</a><br /></td></tr>
<tr class="separator:a897c4684f64f60932cf77a2cb8402cdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a527db94b4432c2cd6fc58c32b285153e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a527db94b4432c2cd6fc58c32b285153e">filter_channel_snapshot</a> (struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *snapshot)</td></tr>
<tr class="separator:a527db94b4432c2cd6fc58c32b285153e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2d6cdf68e61e1cece8c33f15f71b51b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ac2d6cdf68e61e1cece8c33f15f71b51b">filter_channel_snapshot_message</a> (struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *old_snapshot, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *new_snapshot)</td></tr>
<tr class="separator:ac2d6cdf68e61e1cece8c33f15f71b51b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f4d8e5786e103b3762e0d9680773a2c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a7f4d8e5786e103b3762e0d9680773a2c">finalize_batch_mode</a> (void)</td></tr>
<tr class="separator:a7f4d8e5786e103b3762e0d9680773a2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02c606cb4ff770e19ecd168b3129572d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a02c606cb4ff770e19ecd168b3129572d">finalized_state_init_function</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr)</td></tr>
<tr class="separator:a02c606cb4ff770e19ecd168b3129572d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a6d8332b52d0cf771b65a396872d16f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a0a6d8332b52d0cf771b65a396872d16f">finalized_state_process_party_a</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *snapshot)</td></tr>
<tr class="separator:a0a6d8332b52d0cf771b65a396872d16f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae23ebf460a645c91c4f3c471c3ecd925"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ae23ebf460a645c91c4f3c471c3ecd925">free_variables</a> (struct <a class="el" href="../../dd/de6/structvarshead.html">varshead</a> *headp)</td></tr>
<tr class="memdesc:ae23ebf460a645c91c4f3c471c3ecd925"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete all variables from a variable list.  <a href="#ae23ebf460a645c91c4f3c471c3ecd925">More...</a><br /></td></tr>
<tr class="separator:ae23ebf460a645c91c4f3c471c3ecd925"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78459003df6cfe438b4b820100606448"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a78459003df6cfe438b4b820100606448">handle_bridge_enter_message</a> (void *data, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:a78459003df6cfe438b4b820100606448"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6008444aa49a2254f2cce57390cdf53d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a6008444aa49a2254f2cce57390cdf53d">handle_bridge_leave_message</a> (void *data, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="memdesc:a6008444aa49a2254f2cce57390cdf53d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler for when a channel leaves a bridge.  <a href="#a6008444aa49a2254f2cce57390cdf53d">More...</a><br /></td></tr>
<tr class="separator:a6008444aa49a2254f2cce57390cdf53d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af10a28107aa2ea71e1a44a48bf1819e6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#af10a28107aa2ea71e1a44a48bf1819e6">handle_bridge_pairings</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *bridge)</td></tr>
<tr class="memdesc:af10a28107aa2ea71e1a44a48bf1819e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle creating bridge pairings for the <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> that just entered a bridge.  <a href="#af10a28107aa2ea71e1a44a48bf1819e6">More...</a><br /></td></tr>
<tr class="separator:af10a28107aa2ea71e1a44a48bf1819e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78b801aab49f4431cf358176c793eae7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a78b801aab49f4431cf358176c793eae7">handle_cdr_sync_message</a> (void *data, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="memdesc:a78b801aab49f4431cf358176c793eae7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler for a synchronization message.  <a href="#a78b801aab49f4431cf358176c793eae7">More...</a><br /></td></tr>
<tr class="separator:a78b801aab49f4431cf358176c793eae7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73171d6c53e2ddd5c0df030be05d83fe"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a73171d6c53e2ddd5c0df030be05d83fe">handle_channel_snapshot_update_message</a> (void *data, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="memdesc:a73171d6c53e2ddd5c0df030be05d83fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler for channel snapshot update messages.  <a href="#a73171d6c53e2ddd5c0df030be05d83fe">More...</a><br /></td></tr>
<tr class="separator:a73171d6c53e2ddd5c0df030be05d83fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae78a1cb56fae7c66d2a27dae30140c55"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ae78a1cb56fae7c66d2a27dae30140c55">handle_cli_debug</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:ae78a1cb56fae7c66d2a27dae30140c55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78e33070708ecfa6a26fdd84a6d29be9"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a78e33070708ecfa6a26fdd84a6d29be9">handle_cli_show</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a78e33070708ecfa6a26fdd84a6d29be9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42f51bfd026479da84c974d890c5c673"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a42f51bfd026479da84c974d890c5c673">handle_cli_status</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a42f51bfd026479da84c974d890c5c673"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4698622c0463583016f314fc86a108f"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ad4698622c0463583016f314fc86a108f">handle_cli_submit</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:ad4698622c0463583016f314fc86a108f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1a281ba026eec2a08607404d2a186e4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ac1a281ba026eec2a08607404d2a186e4">handle_dial_message</a> (void *data, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="memdesc:ac1a281ba026eec2a08607404d2a186e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler for Stasis-Core dial messages.  <a href="#ac1a281ba026eec2a08607404d2a186e4">More...</a><br /></td></tr>
<tr class="separator:ac1a281ba026eec2a08607404d2a186e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a157ceac21c95d305d1c3d739da9b15f9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a157ceac21c95d305d1c3d739da9b15f9">handle_parked_call_message</a> (void *data, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="memdesc:a157ceac21c95d305d1c3d739da9b15f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler for when a channel is parked.  <a href="#a157ceac21c95d305d1c3d739da9b15f9">More...</a><br /></td></tr>
<tr class="separator:a157ceac21c95d305d1c3d739da9b15f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9eac9bdac4d87d2284e68d62627724d9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a9eac9bdac4d87d2284e68d62627724d9">handle_parking_bridge_enter_message</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *bridge, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *<a class="el" href="../../d4/d84/structchannel.html">channel</a>, const struct timeval *event_time)</td></tr>
<tr class="memdesc:a9eac9bdac4d87d2284e68d62627724d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle entering into a parking bridge.  <a href="#a9eac9bdac4d87d2284e68d62627724d9">More...</a><br /></td></tr>
<tr class="separator:a9eac9bdac4d87d2284e68d62627724d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a235c58e8a0fcc421a4e1106e0df348d1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a235c58e8a0fcc421a4e1106e0df348d1">handle_standard_bridge_enter_message</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *bridge, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *<a class="el" href="../../d4/d84/structchannel.html">channel</a>, const struct timeval *event_time)</td></tr>
<tr class="memdesc:a235c58e8a0fcc421a4e1106e0df348d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a bridge enter message for a 'normal' bridge.  <a href="#a235c58e8a0fcc421a4e1106e0df348d1">More...</a><br /></td></tr>
<tr class="separator:a235c58e8a0fcc421a4e1106e0df348d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ba2f2526d5230859524407aad436361"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a8ba2f2526d5230859524407aad436361">init_batch</a> (void)</td></tr>
<tr class="separator:a8ba2f2526d5230859524407aad436361"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3ba06a4d885b31e4073c047d0dad02d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a> (unsigned int cdr_flag)</td></tr>
<tr class="separator:ab3ba06a4d885b31e4073c047d0dad02d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae006c692706bf9b5e8a21e8140382c75"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ae006c692706bf9b5e8a21e8140382c75">module_config_alloc</a> (void)</td></tr>
<tr class="memdesc:ae006c692706bf9b5e8a21e8140382c75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new module config object.  <a href="#ae006c692706bf9b5e8a21e8140382c75">More...</a><br /></td></tr>
<tr class="separator:ae006c692706bf9b5e8a21e8140382c75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d56b64dd166535b3583ce24f3943e8c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a6d56b64dd166535b3583ce24f3943e8c">module_config_destructor</a> (void *obj)</td></tr>
<tr class="memdesc:a6d56b64dd166535b3583ce24f3943e8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dispose of a module config object.  <a href="#a6d56b64dd166535b3583ce24f3943e8c">More...</a><br /></td></tr>
<tr class="separator:a6d56b64dd166535b3583ce24f3943e8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8a3bad648f2a5bdc92e536ecd7d9484"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ae8a3bad648f2a5bdc92e536ecd7d9484">module_config_post_apply</a> (void)</td></tr>
<tr class="separator:ae8a3bad648f2a5bdc92e536ecd7d9484"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae54741fa2db63f0cdfa96d25e40ec20a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ae54741fa2db63f0cdfa96d25e40ec20a">parked_state_process_bridge_leave</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *bridge, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *<a class="el" href="../../d4/d84/structchannel.html">channel</a>)</td></tr>
<tr class="separator:ae54741fa2db63f0cdfa96d25e40ec20a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad01956d63583675f04baf543336b7c94"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ad01956d63583675f04baf543336b7c94">post_cdr</a> (struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *cdr)</td></tr>
<tr class="separator:ad01956d63583675f04baf543336b7c94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23c29a0c6da3b09b04d3f801bd44673e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a23c29a0c6da3b09b04d3f801bd44673e">process_config</a> (int <a class="el" href="../../dc/d6b/res__xmpp_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a>)</td></tr>
<tr class="separator:a23c29a0c6da3b09b04d3f801bd44673e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c6ac25ea7536c0bc9ed18cbcf917527"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a7c6ac25ea7536c0bc9ed18cbcf917527">reload_module</a> (void)</td></tr>
<tr class="separator:a7c6ac25ea7536c0bc9ed18cbcf917527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0165bd3137a70f31dcbe5fb47b5aee2a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a0165bd3137a70f31dcbe5fb47b5aee2a">reset_batch</a> (void)</td></tr>
<tr class="separator:a0165bd3137a70f31dcbe5fb47b5aee2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89071964424cbe2e7d79b8682cc452df"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a89071964424cbe2e7d79b8682cc452df">set_variable</a> (struct <a class="el" href="../../dd/de6/structvarshead.html">varshead</a> *headp, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="separator:a89071964424cbe2e7d79b8682cc452df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2757a0953447c692fbfff2e4d7f2edd2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a2757a0953447c692fbfff2e4d7f2edd2">single_state_bridge_enter_comparison</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cand_cdr)</td></tr>
<tr class="memdesc:a2757a0953447c692fbfff2e4d7f2edd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a comparison between our <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> and a <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> already in the bridge while in the Single state. The goal of this is to find a Party B for our CDR.  <a href="#a2757a0953447c692fbfff2e4d7f2edd2">More...</a><br /></td></tr>
<tr class="separator:a2757a0953447c692fbfff2e4d7f2edd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a345860eafc9c3b90b39a4947ae4b81a4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a345860eafc9c3b90b39a4947ae4b81a4">single_state_init_function</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr)</td></tr>
<tr class="separator:a345860eafc9c3b90b39a4947ae4b81a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe5335db4bd0df691a3fb45eb744644a"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316">process_bridge_enter_results</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#afe5335db4bd0df691a3fb45eb744644a">single_state_process_bridge_enter</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *bridge, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *<a class="el" href="../../d4/d84/structchannel.html">channel</a>)</td></tr>
<tr class="separator:afe5335db4bd0df691a3fb45eb744644a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae33e55ef56f8433924bd1e1b666757db"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ae33e55ef56f8433924bd1e1b666757db">single_state_process_dial_begin</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *caller, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *peer)</td></tr>
<tr class="separator:ae33e55ef56f8433924bd1e1b666757db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6ca6ec30e128da079d404153d0fb0d7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ad6ca6ec30e128da079d404153d0fb0d7">single_state_process_parking_bridge_enter</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *bridge, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *<a class="el" href="../../d4/d84/structchannel.html">channel</a>)</td></tr>
<tr class="separator:ad6ca6ec30e128da079d404153d0fb0d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7468fe3499dfaff87d126d1993c2ebdc"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a7468fe3499dfaff87d126d1993c2ebdc">single_state_process_party_b</a> (struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *snapshot)</td></tr>
<tr class="separator:a7468fe3499dfaff87d126d1993c2ebdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdcb681e5fb3d509b769efa9d498f3f7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#abdcb681e5fb3d509b769efa9d498f3f7">snapshot_cep_changed</a> (struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *old_snapshot, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *new_snapshot)</td></tr>
<tr class="memdesc:abdcb681e5fb3d509b769efa9d498f3f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return whether or not a channel has changed its state in the dialplan, subject to endbeforehexten logic.  <a href="#abdcb681e5fb3d509b769efa9d498f3f7">More...</a><br /></td></tr>
<tr class="separator:abdcb681e5fb3d509b769efa9d498f3f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5904b00a02181783ce25d816a2e6d68"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ab5904b00a02181783ce25d816a2e6d68">snapshot_is_dialed</a> (struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *snapshot)</td></tr>
<tr class="memdesc:ab5904b00a02181783ce25d816a2e6d68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return whether or not a <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> is for a channel that was created as the result of a dial operation.  <a href="#ab5904b00a02181783ce25d816a2e6d68">More...</a><br /></td></tr>
<tr class="separator:ab5904b00a02181783ce25d816a2e6d68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e55b20165112265d58bf812ccb57de0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a8e55b20165112265d58bf812ccb57de0">start_batch_mode</a> (void)</td></tr>
<tr class="separator:a8e55b20165112265d58bf812ccb57de0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a235b2953ff727a959b670c91bc2960a4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a235b2953ff727a959b670c91bc2960a4">STASIS_MESSAGE_TYPE_DEFN_LOCAL</a> (cdr_sync_message_type)</td></tr>
<tr class="memdesc:a235b2953ff727a959b670c91bc2960a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">A message type used to synchronize with the CDR topic.  <a href="#a235b2953ff727a959b670c91bc2960a4">More...</a><br /></td></tr>
<tr class="separator:a235b2953ff727a959b670c91bc2960a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ba6c6273f321acb2b32dc754163e349"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a8ba6c6273f321acb2b32dc754163e349">submit_scheduled_batch</a> (const void *data)</td></tr>
<tr class="separator:a8ba6c6273f321acb2b32dc754163e349"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a835b27a90d895a488e4e14cc3d2dee8c">AST_MODFLAG_GLOBAL_SYMBOLS</a> | <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;CDR Engine&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .reload = reload_module, .load_pri = AST_MODPRI_CORE, .requires = &quot;extconfig&quot;, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb1aee82330e86d734034f092559cc69"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a></td></tr>
<tr class="memdesc:abb1aee82330e86d734034f092559cc69"><td class="mdescLeft">&#160;</td><td class="mdescRight">A container of all active CDRs with a Party B indexed by Party B channel name.  <a href="#abb1aee82330e86d734034f092559cc69">More...</a><br /></td></tr>
<tr class="separator:abb1aee82330e86d734034f092559cc69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabd874b0958bde3e08b5a876c2d1a395"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a></td></tr>
<tr class="memdesc:aabd874b0958bde3e08b5a876c2d1a395"><td class="mdescLeft">&#160;</td><td class="mdescRight">A container of the active master CDRs indexed by Party A channel uniqueid.  <a href="#aabd874b0958bde3e08b5a876c2d1a395">More...</a><br /></td></tr>
<tr class="separator:aabd874b0958bde3e08b5a876c2d1a395"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c9a24d791e528330adc76210fb42407"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d4/d3a/structcdr__batch.html">cdr_batch</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="separator:a3c9a24d791e528330adc76210fb42407"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ead69fce72c3bd053bdbc1e9ceb0899"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d5/d08/structbe__list.html">be_list</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a2ead69fce72c3bd053bdbc1e9ceb0899">be_list</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:a2ead69fce72c3bd053bdbc1e9ceb0899"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4213ec53168931f1d566f40e32870c4c"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d1/d0f/structcdr__object__fn__table.html">cdr_object_fn_table</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a4213ec53168931f1d566f40e32870c4c">bridge_state_fn_table</a></td></tr>
<tr class="memdesc:a4213ec53168931f1d566f40e32870c4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The virtual table for the Bridged state.  <a href="#a4213ec53168931f1d566f40e32870c4c">More...</a><br /></td></tr>
<tr class="separator:a4213ec53168931f1d566f40e32870c4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47209cbb2830370119a620706df43f19"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d54/structstasis__forward.html">stasis_forward</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a47209cbb2830370119a620706df43f19">bridge_subscription</a></td></tr>
<tr class="memdesc:a47209cbb2830370119a620706df43f19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Our subscription for bridges.  <a href="#a47209cbb2830370119a620706df43f19">More...</a><br /></td></tr>
<tr class="separator:a47209cbb2830370119a620706df43f19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a3969758c60f80011874aadde9d09ca"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a3a3969758c60f80011874aadde9d09ca">cdr_batch_lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="memdesc:a3a3969758c60f80011874aadde9d09ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock protecting modifications to the batch queue.  <a href="#a3a3969758c60f80011874aadde9d09ca">More...</a><br /></td></tr>
<tr class="separator:a3a3969758c60f80011874aadde9d09ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecd4251f0f7bfcfc7104d5b76e4e45f6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#aecd4251f0f7bfcfc7104d5b76e4e45f6">cdr_debug_enabled</a></td></tr>
<tr class="separator:aecd4251f0f7bfcfc7104d5b76e4e45f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3350735a1fc58db7a559b16073a83a3c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a3350735a1fc58db7a559b16073a83a3c">cdr_pending_cond</a></td></tr>
<tr class="separator:a3350735a1fc58db7a559b16073a83a3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acde84d468388579851a2de600c75a6e4"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#acde84d468388579851a2de600c75a6e4">cdr_pending_lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="memdesc:acde84d468388579851a2de600c75a6e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">These are used to wake up the CDR thread when there's work to do.  <a href="#acde84d468388579851a2de600c75a6e4">More...</a><br /></td></tr>
<tr class="separator:acde84d468388579851a2de600c75a6e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2256ef5c96ee6f5634e183c3c99f42f8"><td class="memItemLeft" align="right" valign="top">static const char *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a2256ef5c96ee6f5634e183c3c99f42f8">cdr_readonly_vars</a> []</td></tr>
<tr class="separator:a2256ef5c96ee6f5634e183c3c99f42f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b8b0834379a5c8dd0deaa5161785419"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a4b8b0834379a5c8dd0deaa5161785419">cdr_sched</a> = -1</td></tr>
<tr class="separator:a4b8b0834379a5c8dd0deaa5161785419"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea5f6ba47213475f890de68ec5b7e974"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#aea5f6ba47213475f890de68ec5b7e974">cdr_sched_lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="separator:aea5f6ba47213475f890de68ec5b7e974"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a28dc87e0a897d209ff16ca63bff690"><td class="memItemLeft" align="right" valign="top">static pthread_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a1a28dc87e0a897d209ff16ca63bff690">cdr_thread</a> = <a class="el" href="../../d4/dc5/extconf_8c.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></td></tr>
<tr class="separator:a1a28dc87e0a897d209ff16ca63bff690"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc796aa4d7644ba463deefc014cd6ea9"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#abc796aa4d7644ba463deefc014cd6ea9">cdr_topic</a></td></tr>
<tr class="memdesc:abc796aa4d7644ba463deefc014cd6ea9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The parent topic for all topics we want to aggregate for CDRs.  <a href="#abc796aa4d7644ba463deefc014cd6ea9">More...</a><br /></td></tr>
<tr class="separator:abc796aa4d7644ba463deefc014cd6ea9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5481f015567808a3331c677ee1922bf7"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d54/structstasis__forward.html">stasis_forward</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a5481f015567808a3331c677ee1922bf7">channel_subscription</a></td></tr>
<tr class="memdesc:a5481f015567808a3331c677ee1922bf7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Our subscription for channels.  <a href="#a5481f015567808a3331c677ee1922bf7">More...</a><br /></td></tr>
<tr class="separator:a5481f015567808a3331c677ee1922bf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1959d38582b0da24d4d42766cf13ade8"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a1959d38582b0da24d4d42766cf13ade8">cli_commands</a> []</td></tr>
<tr class="separator:a1959d38582b0da24d4d42766cf13ade8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a018b74f4d21e19c8830f1b1a802acd95"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d1/d0f/structcdr__object__fn__table.html">cdr_object_fn_table</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a018b74f4d21e19c8830f1b1a802acd95">dial_state_fn_table</a></td></tr>
<tr class="memdesc:a018b74f4d21e19c8830f1b1a802acd95"><td class="mdescLeft">&#160;</td><td class="mdescRight">The virtual table for the Dial state.  <a href="#a018b74f4d21e19c8830f1b1a802acd95">More...</a><br /></td></tr>
<tr class="separator:a018b74f4d21e19c8830f1b1a802acd95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a48de7671f066dd9349192c100d62e8"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d1/d0f/structcdr__object__fn__table.html">cdr_object_fn_table</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a2a48de7671f066dd9349192c100d62e8">dialed_pending_state_fn_table</a></td></tr>
<tr class="memdesc:a2a48de7671f066dd9349192c100d62e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The virtual table for the Dialed Pending state.  <a href="#a2a48de7671f066dd9349192c100d62e8">More...</a><br /></td></tr>
<tr class="separator:a2a48de7671f066dd9349192c100d62e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f50dd95a426c8a70710afc315164f04"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d1/d0f/structcdr__object__fn__table.html">cdr_object_fn_table</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a></td></tr>
<tr class="memdesc:a5f50dd95a426c8a70710afc315164f04"><td class="mdescLeft">&#160;</td><td class="mdescRight">The virtual table for the finalized state.  <a href="#a5f50dd95a426c8a70710afc315164f04">More...</a><br /></td></tr>
<tr class="separator:a5f50dd95a426c8a70710afc315164f04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5be5fa967836c0f0c98763deaff227b7"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a5be5fa967836c0f0c98763deaff227b7">general_option</a></td></tr>
<tr class="memdesc:a5be5fa967836c0f0c98763deaff227b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type definition for general options.  <a href="#a5be5fa967836c0f0c98763deaff227b7">More...</a><br /></td></tr>
<tr class="separator:a5be5fa967836c0f0c98763deaff227b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e03f6233c516c1beb21b5b9285ed69f"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a8e03f6233c516c1beb21b5b9285ed69f">general_options</a> [] = <a class="el" href="../../db/dfe/config__options_8h.html#af773eedd7f94d718752798605c687c4b">ACO_TYPES</a>(&amp;<a class="el" href="../../dc/dec/res_2ari_2config_8c.html#a5be5fa967836c0f0c98763deaff227b7">general_option</a>)</td></tr>
<tr class="separator:a8e03f6233c516c1beb21b5b9285ed69f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaca91b8743296407c372a0c935fd5089"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#aaca91b8743296407c372a0c935fd5089">global_cdr_sequence</a> = 0</td></tr>
<tr class="memdesc:aaca91b8743296407c372a0c935fd5089"><td class="mdescLeft">&#160;</td><td class="mdescRight">The global sequence counter used for CDRs.  <a href="#aaca91b8743296407c372a0c935fd5089">More...</a><br /></td></tr>
<tr class="separator:aaca91b8743296407c372a0c935fd5089"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27f4f033382189ae9c8466a861746a33"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a27f4f033382189ae9c8466a861746a33">ignore_categories</a> []</td></tr>
<tr class="separator:a27f4f033382189ae9c8466a861746a33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07fa2e00461eb8b105a7eabd84fc2aa6"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a07fa2e00461eb8b105a7eabd84fc2aa6">ignore_option</a></td></tr>
<tr class="separator:a07fa2e00461eb8b105a7eabd84fc2aa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af34cc8951582d4c69367b3ea49b54eee"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d6/d3d/structmo__list.html">mo_list</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#af34cc8951582d4c69367b3ea49b54eee">mo_list</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:af34cc8951582d4c69367b3ea49b54eee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5992da1d576df52445a82f5a49d6b54f"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/d9c/structaco__file.html">aco_file</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a5992da1d576df52445a82f5a49d6b54f">module_file_conf</a></td></tr>
<tr class="memdesc:a5992da1d576df52445a82f5a49d6b54f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The file definition.  <a href="#a5992da1d576df52445a82f5a49d6b54f">More...</a><br /></td></tr>
<tr class="separator:a5992da1d576df52445a82f5a49d6b54f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7452de272169d0534a08287fde1dc636"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d1/d0f/structcdr__object__fn__table.html">cdr_object_fn_table</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a7452de272169d0534a08287fde1dc636">parked_state_fn_table</a></td></tr>
<tr class="memdesc:a7452de272169d0534a08287fde1dc636"><td class="mdescLeft">&#160;</td><td class="mdescRight">The virtual table for the Parked state.  <a href="#a7452de272169d0534a08287fde1dc636">More...</a><br /></td></tr>
<tr class="separator:a7452de272169d0534a08287fde1dc636"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa421dba1330983098f1ca24a9ba128f6"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d54/structstasis__forward.html">stasis_forward</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#aa421dba1330983098f1ca24a9ba128f6">parking_subscription</a></td></tr>
<tr class="memdesc:aa421dba1330983098f1ca24a9ba128f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Our subscription for parking.  <a href="#aa421dba1330983098f1ca24a9ba128f6">More...</a><br /></td></tr>
<tr class="separator:aa421dba1330983098f1ca24a9ba128f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a361b448e9abcfc301602a2573a662d3c"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d7/de8/structast__sched__context.html">ast_sched_context</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a361b448e9abcfc301602a2573a662d3c">sched</a></td></tr>
<tr class="memdesc:a361b448e9abcfc301602a2573a662d3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scheduler items.  <a href="#a361b448e9abcfc301602a2573a662d3c">More...</a><br /></td></tr>
<tr class="separator:a361b448e9abcfc301602a2573a662d3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03d77113f205fd4450fe8866dc0f48dd"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d1/d0f/structcdr__object__fn__table.html">cdr_object_fn_table</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a03d77113f205fd4450fe8866dc0f48dd">single_state_fn_table</a></td></tr>
<tr class="memdesc:a03d77113f205fd4450fe8866dc0f48dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">The virtual table for the Single state.  <a href="#a03d77113f205fd4450fe8866dc0f48dd">More...</a><br /></td></tr>
<tr class="separator:a03d77113f205fd4450fe8866dc0f48dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d6d7bdd31cb1b6f84f2e447a7a2c6c2"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a></td></tr>
<tr class="memdesc:a6d6d7bdd31cb1b6f84f2e447a7a2c6c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Message router for stasis messages regarding channel state.  <a href="#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">More...</a><br /></td></tr>
<tr class="separator:a6d6d7bdd31cb1b6f84f2e447a7a2c6c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Call Detail Record API. </p>
<dl class="section author"><dt>Author</dt><dd>Mark Spencer <a href="#" onclick="location.href='mai'+'lto:'+'mar'+'ks'+'ter'+'@d'+'igi'+'um'+'.co'+'m'; return false;">marks<span style="display: none;">.nosp@m.</span>ter@<span style="display: none;">.nosp@m.</span>digiu<span style="display: none;">.nosp@m.</span>m.co<span style="display: none;">.nosp@m.</span>m</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>Includes code and algorithms from the Zapata library.</dd>
<dd>
We do a lot of checking here in the CDR code to try to be sure we don't ever let a CDR slip through our fingers somehow. If someone allocates a CDR, it must be completely handled normally or a WARNING shall be logged, so that we can best keep track of any escape condition where the CDR isn't properly generated and posted. </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a8052195443a9cb5835d7d2b3ab7279aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8052195443a9cb5835d7d2b3ab7279aa">&#9670;&nbsp;</a></span>CDR_DEBUG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CDR_DEBUG</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fmt, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div><div class="line">      if (<a class="code" href="../../dc/df2/cdr_8c.html#aecd4251f0f7bfcfc7104d5b76e4e45f6">cdr_debug_enabled</a>) { \</div><div class="line">         ast_verbose((fmt), ##__VA_ARGS__); \</div><div class="line">      } \</div><div class="line">   } <span class="keywordflow">while</span> (0)</div><div class="ttc" id="cdr_8c_html_aecd4251f0f7bfcfc7104d5b76e4e45f6"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aecd4251f0f7bfcfc7104d5b76e4e45f6">cdr_debug_enabled</a></div><div class="ttdeci">static int cdr_debug_enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00208">cdr.c:208</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00210">210</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02472">bridge_candidate_add_to_cdr()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02503">bridge_candidate_process()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01039">cdr_object_alloc()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01494">cdr_object_check_party_a_answer()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01386">cdr_object_dispatch()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00804">cdr_object_transition_state_init()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02708">handle_bridge_enter_message()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02404">handle_bridge_leave_message()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02278">handle_channel_snapshot_update_message()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03929">handle_cli_debug()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02105">handle_dial_message()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02751">handle_parked_call_message()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02586">handle_parking_bridge_enter_message()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02627">handle_standard_bridge_enter_message()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04340">process_config()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01692">single_state_bridge_enter_comparison()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l01653">single_state_process_dial_begin()</a>.</p>

</div>
</div>
<a id="a64c2a67abebb54e4d8defda57e4e9206"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64c2a67abebb54e4d8defda57e4e9206">&#9670;&nbsp;</a></span>cdr_set_debug_mode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define cdr_set_debug_mode</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">mod_cfg</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div><div class="line">      cdr_debug_enabled = <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;(mod_cfg)-&gt;general-&gt;settings, <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>); \</div><div class="line">   } <span class="keywordflow">while</span> (0)</div><div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="cdr_8c_html_a8052195443a9cb5835d7d2b3ab7279aa"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a></div><div class="ttdeci">#define CDR_DEBUG(fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00210">cdr.c:210</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00203">203</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02840">ast_cdr_set_config()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03929">handle_cli_debug()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00276">module_config_post_apply()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l04340">process_config()</a>.</p>

</div>
</div>
<a id="ac08eabc66e6d2ae4fe32d1393d745acf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac08eabc66e6d2ae4fe32d1393d745acf">&#9670;&nbsp;</a></span>DEFAULT_BATCH_SAFE_SHUTDOWN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_BATCH_SAFE_SHUTDOWN&#160;&#160;&#160;&quot;1&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00201">201</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04340">process_config()</a>.</p>

</div>
</div>
<a id="ad6686f1af7beb39a27b62183cc28ffca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6686f1af7beb39a27b62183cc28ffca">&#9670;&nbsp;</a></span>DEFAULT_BATCH_SCHEDULER_ONLY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_BATCH_SCHEDULER_ONLY&#160;&#160;&#160;&quot;0&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00200">200</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04340">process_config()</a>.</p>

</div>
</div>
<a id="a123fa013ecd2c91686ad58c0b8d985b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a123fa013ecd2c91686ad58c0b8d985b3">&#9670;&nbsp;</a></span>DEFAULT_BATCH_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_BATCH_SIZE&#160;&#160;&#160;&quot;100&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00196">196</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04340">process_config()</a>.</p>

</div>
</div>
<a id="ac1e44ecfc38cdda9d76e6976c11b0f6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1e44ecfc38cdda9d76e6976c11b0f6b">&#9670;&nbsp;</a></span>DEFAULT_BATCH_TIME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_BATCH_TIME&#160;&#160;&#160;&quot;300&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00198">198</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04340">process_config()</a>.</p>

</div>
</div>
<a id="a309d01905cce8329cb8b36e6dbe32c8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a309d01905cce8329cb8b36e6dbe32c8f">&#9670;&nbsp;</a></span>DEFAULT_BATCHMODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_BATCHMODE&#160;&#160;&#160;&quot;0&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00190">190</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04340">process_config()</a>.</p>

</div>
</div>
<a id="aa5ff29d3c8a52b6b058a6094e8871c76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5ff29d3c8a52b6b058a6094e8871c76">&#9670;&nbsp;</a></span>DEFAULT_CONGESTION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_CONGESTION&#160;&#160;&#160;&quot;0&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00192">192</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="adf8ded95b0a2e24134fa5eed072bd8db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf8ded95b0a2e24134fa5eed072bd8db">&#9670;&nbsp;</a></span>DEFAULT_ENABLED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_ENABLED&#160;&#160;&#160;&quot;1&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00189">189</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04340">process_config()</a>.</p>

</div>
</div>
<a id="aea4f7938cad0fcc78ffa4870723afdb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea4f7938cad0fcc78ffa4870723afdb7">&#9670;&nbsp;</a></span>DEFAULT_END_BEFORE_H_EXTEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_END_BEFORE_H_EXTEN&#160;&#160;&#160;&quot;1&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00193">193</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04340">process_config()</a>.</p>

</div>
</div>
<a id="a9f8c393359ffd1043afb3462ceee07b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f8c393359ffd1043afb3462ceee07b7">&#9670;&nbsp;</a></span>DEFAULT_INITIATED_SECONDS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_INITIATED_SECONDS&#160;&#160;&#160;&quot;0&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00194">194</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04340">process_config()</a>.</p>

</div>
</div>
<a id="a55dd918534b04e187255e12bf5e5f777"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55dd918534b04e187255e12bf5e5f777">&#9670;&nbsp;</a></span>DEFAULT_UNANSWERED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_UNANSWERED&#160;&#160;&#160;&quot;0&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00191">191</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04340">process_config()</a>.</p>

</div>
</div>
<a id="a4610636f10e4604ba296cbf9287b0c7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4610636f10e4604ba296cbf9287b0c7b">&#9670;&nbsp;</a></span>FORMAT_STRING <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FORMAT_STRING&#160;&#160;&#160;&quot;%-25.25s %-25.25s %-15.15s %-8.8s %-8.8s %-8.8s %-8.8ld %-8.8ld\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04055">cli_show_channel()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03991">cli_show_channels()</a>.</p>

</div>
</div>
<a id="a4610636f10e4604ba296cbf9287b0c7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4610636f10e4604ba296cbf9287b0c7b">&#9670;&nbsp;</a></span>FORMAT_STRING <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FORMAT_STRING&#160;&#160;&#160;&quot;%-10.10s %-20.20s %-25.25s %-15.15s %-15.15s %-8.8s %-8.8s %-8.8s %-8.8ld %-8.8ld\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a18373cd65e0761a3bd4e760a8e015baa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18373cd65e0761a3bd4e760a8e015baa">&#9670;&nbsp;</a></span>MAX_BATCH_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_BATCH_SIZE&#160;&#160;&#160;1000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00197">197</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04340">process_config()</a>.</p>

</div>
</div>
<a id="a5d10e69bcfc7ad99f2b0d4256715aae2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d10e69bcfc7ad99f2b0d4256715aae2">&#9670;&nbsp;</a></span>MAX_BATCH_TIME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_BATCH_TIME&#160;&#160;&#160;86400</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00199">199</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04340">process_config()</a>.</p>

</div>
</div>
<a id="ae4991c2ca36e7b5e4817953aeff633d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4991c2ca36e7b5e4817953aeff633d3">&#9670;&nbsp;</a></span>TITLE_STRING <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TITLE_STRING&#160;&#160;&#160;&quot;%-25.25s %-25.25s %-15.15s %-8.8s %-8.8s %-8.8s %-8.8s %-8.8s\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04055">cli_show_channel()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03991">cli_show_channels()</a>.</p>

</div>
</div>
<a id="ae4991c2ca36e7b5e4817953aeff633d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4991c2ca36e7b5e4817953aeff633d3">&#9670;&nbsp;</a></span>TITLE_STRING <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TITLE_STRING&#160;&#160;&#160;&quot;%-10.10s %-20.20s %-25.25s %-15.15s %-15.15s %-8.8s %-8.8s %-8.8s %-8.8s %-8.8s\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a3bdd3cd3f0f0a84448a50181c3cee316"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bdd3cd3f0f0a84448a50181c3cee316">&#9670;&nbsp;</a></span>process_bridge_enter_results</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316">process_bridge_enter_results</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return types for process_bridge_enter functions. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a3bdd3cd3f0f0a84448a50181c3cee316a62a0455d2eb58c31a04b25d2c7eed117"></a>BRIDGE_ENTER_ONLY_PARTY&#160;</td><td class="fielddoc"><p>The CDR was the only party in the bridge. </p>
</td></tr>
<tr><td class="fieldname"><a id="a3bdd3cd3f0f0a84448a50181c3cee316ad10fe7b54c407ca92612577a074e58c7"></a>BRIDGE_ENTER_OBTAINED_PARTY_B&#160;</td><td class="fielddoc"><p>The CDR was able to obtain a Party B from some other party already in the bridge </p>
</td></tr>
<tr><td class="fieldname"><a id="a3bdd3cd3f0f0a84448a50181c3cee316a7975da294ade48d4154d1f00ec059039"></a>BRIDGE_ENTER_NO_PARTY_B&#160;</td><td class="fielddoc"><p>The CDR was not able to obtain a Party B </p>
</td></tr>
<tr><td class="fieldname"><a id="a3bdd3cd3f0f0a84448a50181c3cee316ab55afa346f826bd34c53c5d08acdbfae"></a>BRIDGE_ENTER_NEED_CDR&#160;</td><td class="fielddoc"><p>This CDR can't handle a bridge enter message and a new CDR needs to be created </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00391">391</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                                  {<span class="comment"></span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">    * The CDR was the only party in the bridge.</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316a62a0455d2eb58c31a04b25d2c7eed117">BRIDGE_ENTER_ONLY_PARTY</a>,<span class="comment"></span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">    * The CDR was able to obtain a Party B from some other party already in the bridge</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316ad10fe7b54c407ca92612577a074e58c7">BRIDGE_ENTER_OBTAINED_PARTY_B</a>,<span class="comment"></span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">    * The CDR was not able to obtain a Party B</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316a7975da294ade48d4154d1f00ec059039">BRIDGE_ENTER_NO_PARTY_B</a>,<span class="comment"></span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">    * This CDR can&#39;t handle a bridge enter message and a new CDR needs to be created</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316ab55afa346f826bd34c53c5d08acdbfae">BRIDGE_ENTER_NEED_CDR</a>,</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;};</div><div class="ttc" id="cdr_8c_html_a3bdd3cd3f0f0a84448a50181c3cee316ad10fe7b54c407ca92612577a074e58c7"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316ad10fe7b54c407ca92612577a074e58c7">BRIDGE_ENTER_OBTAINED_PARTY_B</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00399">cdr.c:399</a></div></div>
<div class="ttc" id="cdr_8c_html_a3bdd3cd3f0f0a84448a50181c3cee316ab55afa346f826bd34c53c5d08acdbfae"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316ab55afa346f826bd34c53c5d08acdbfae">BRIDGE_ENTER_NEED_CDR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00407">cdr.c:407</a></div></div>
<div class="ttc" id="cdr_8c_html_a3bdd3cd3f0f0a84448a50181c3cee316a62a0455d2eb58c31a04b25d2c7eed117"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316a62a0455d2eb58c31a04b25d2c7eed117">BRIDGE_ENTER_ONLY_PARTY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00395">cdr.c:395</a></div></div>
<div class="ttc" id="cdr_8c_html_a3bdd3cd3f0f0a84448a50181c3cee316a7975da294ade48d4154d1f00ec059039"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316a7975da294ade48d4154d1f00ec059039">BRIDGE_ENTER_NO_PARTY_B</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00403">cdr.c:403</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04651">4651</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04651">4651</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="a655a57e3cbf981c79dbcf7f61d8d9f88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a655a57e3cbf981c79dbcf7f61d8d9f88">&#9670;&nbsp;</a></span>AO2_GLOBAL_OBJ_STATIC()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static AO2_GLOBAL_OBJ_STATIC </td>
          <td>(</td>
          <td class="paramtype">module_configs&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The container for the module configuration. </p>

</div>
</div>
<a id="a29ba08b358224b4c820e5df826273b5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29ba08b358224b4c820e5df826273b5b">&#9670;&nbsp;</a></span>ast_cdr_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a>* ast_cdr_alloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a CDR record. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">a</td><td>malloc'd <a class="el" href="../../d4/d5d/structast__cdr.html" title="Responsible for call detail data. ">ast_cdr</a> structure </td></tr>
    <tr><td class="paramname">NULL</td><td>on error (malloc failure) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03422">3422</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02998">ast_cdr_dup()</a>.</p>
<div class="fragment"><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;{</div><div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *x;</div><div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;</div><div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;   x = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*x));</div><div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;   <span class="keywordflow">return</span> x;</div><div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;}</div><div class="ttc" id="structast__cdr_html"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html">ast_cdr</a></div><div class="ttdoc">Responsible for call detail data. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00276">cdr.h:276</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aca84ca1a31569fb8916b3209ca35160a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca84ca1a31569fb8916b3209ca35160a">&#9670;&nbsp;</a></span>ast_cdr_backend_suspend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_backend_suspend </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Suspend a CDR backend temporarily. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>The backend is suspdended </td></tr>
    <tr><td class="paramname">-1</td><td>The backend could not be suspended </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02866">2866</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00322">cdr_beitem::name</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00082">load_config()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00383">my_unload_module()</a>, and <a class="el" href="../../d8/d56/cdr__odbc_8c_source.html#l00193">odbc_load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;{</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;   <span class="keywordtype">int</span> success = -1;</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dc6/structcdr__beitem.html">cdr_beitem</a> *i = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d5/d08/structbe__list.html">be_list</a>);</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d08/structbe__list.html">be_list</a>, i, list) {</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, i-&gt;<a class="code" href="../../dc/dc6/structcdr__beitem.html#a9997d8ee2df51d18efed254a5aa016fd">name</a>)) {</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Suspending CDR backend %s\n&quot;</span>, i-&gt;<a class="code" href="../../dc/dc6/structcdr__beitem.html#a9997d8ee2df51d18efed254a5aa016fd">name</a>);</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;         i-&gt;suspended = 1;</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;         success = 0;</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;      }</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;   }</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d08/structbe__list.html">be_list</a>);</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;   <span class="keywordflow">return</span> success;</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structcdr__beitem_html"><div class="ttname"><a href="../../dc/dc6/structcdr__beitem.html">cdr_beitem</a></div><div class="ttdoc">Registration object for CDR backends. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00321">cdr.c:321</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structcdr__beitem_html_a9997d8ee2df51d18efed254a5aa016fd"><div class="ttname"><a href="../../dc/dc6/structcdr__beitem.html#a9997d8ee2df51d18efed254a5aa016fd">cdr_beitem::name</a></div><div class="ttdeci">char name[20]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00322">cdr.c:322</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structbe__list_html"><div class="ttname"><a href="../../d5/d08/structbe__list.html">be_list</a></div><div class="ttdoc">List of registered backends. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00330">cdr.c:330</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a67072dcfd4f1b7486826cffb25dfbc6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67072dcfd4f1b7486826cffb25dfbc6c">&#9670;&nbsp;</a></span>ast_cdr_backend_unsuspend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_backend_unsuspend </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unsuspend a CDR backend. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>The backend was unsuspended </td></tr>
    <tr><td class="paramname">-1</td><td>The back could not be unsuspended </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02884">2884</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00322">cdr_beitem::name</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00082">load_config()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00597">my_load_module()</a>, and <a class="el" href="../../d8/d56/cdr__odbc_8c_source.html#l00193">odbc_load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;{</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;   <span class="keywordtype">int</span> success = -1;</div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dc6/structcdr__beitem.html">cdr_beitem</a> *i = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d5/d08/structbe__list.html">be_list</a>);</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d08/structbe__list.html">be_list</a>, i, list) {</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, i-&gt;<a class="code" href="../../dc/dc6/structcdr__beitem.html#a9997d8ee2df51d18efed254a5aa016fd">name</a>)) {</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Unsuspending CDR backend %s\n&quot;</span>, i-&gt;<a class="code" href="../../dc/dc6/structcdr__beitem.html#a9997d8ee2df51d18efed254a5aa016fd">name</a>);</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;         i-&gt;suspended = 0;</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;         success = 0;</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;      }</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;   }</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d08/structbe__list.html">be_list</a>);</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;   <span class="keywordflow">return</span> success;</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structcdr__beitem_html"><div class="ttname"><a href="../../dc/dc6/structcdr__beitem.html">cdr_beitem</a></div><div class="ttdoc">Registration object for CDR backends. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00321">cdr.c:321</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structcdr__beitem_html_a9997d8ee2df51d18efed254a5aa016fd"><div class="ttname"><a href="../../dc/dc6/structcdr__beitem.html#a9997d8ee2df51d18efed254a5aa016fd">cdr_beitem::name</a></div><div class="ttdeci">char name[20]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00322">cdr.c:322</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structbe__list_html"><div class="ttname"><a href="../../d5/d08/structbe__list.html">be_list</a></div><div class="ttdoc">List of registered backends. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00330">cdr.c:330</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a49ad75e3e3203433d5a7f6b63dab856d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49ad75e3e3203433d5a7f6b63dab856d">&#9670;&nbsp;</a></span>ast_cdr_clear_property()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_clear_property </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>channel_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37">ast_cdr_options</a>&#160;</td>
          <td class="paramname"><em>option</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear a property on a CDR for a channel. </p>
<dl class="section since"><dt>Since</dt><dd>12 Clears a flag previously set by <a class="el" href="../../dc/df2/cdr_8c.html#afcdba7928fed6e22df50a8d9b6c4cbf8">ast_cdr_set_property</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel_name</td><td>The CDR's channel </td></tr>
    <tr><td class="paramname">option</td><td>Option to clear from the CDR</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">1</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03575">3575</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00077">ast_clear_flag</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03312">cdr_object_get_by_name()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00723">cdr_object::flags</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da0/app__cdr_8c_source.html#l00131">appcdr_callback()</a>, <a class="el" href="../../d7/d8e/test__cdr_8c_source.html#l02324">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00400">cdr_prop_write_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;{</div><div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;</div><div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;   cdr = <a class="code" href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a>(channel_name);</div><div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;   }</div><div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;</div><div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cdr);</div><div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;   <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;      <span class="keywordflow">if</span> (it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a> == &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a>) {</div><div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;      }</div><div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(&amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">flags</a>, option);</div><div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;   }</div><div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cdr);</div><div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;</div><div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr);</div><div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;}</div><div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structcdr__object_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">cdr_object::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00723">cdr.c:723</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="cdr_8c_html_a89dc924870cf4d81f8841a3b4f33d722"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a></div><div class="ttdeci">static struct cdr_object * cdr_object_get_by_name(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03312">cdr.c:3312</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="utils_8h_html_a7b260320610a09017a9416398acd0a70"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a></div><div class="ttdeci">#define ast_clear_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00077">utils.h:77</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f50dd95a426c8a70710afc315164f04"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table finalized_state_fn_table</div><div class="ttdoc">The virtual table for the finalized state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00694">cdr.c:694</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0e23f3be8d570dbc8e6c872c566c09d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e23f3be8d570dbc8e6c872c566c09d9">&#9670;&nbsp;</a></span>ast_cdr_disp2str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_cdr_disp2str </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>disposition</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disposition to a string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">disposition</td><td>input binary form Converts the binary form of a disposition to string form. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the string form </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03430">3430</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d07/cdr_8h_source.html#l00258">AST_CDR_ANSWERED</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00257">AST_CDR_BUSY</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00259">AST_CDR_CONGESTION</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00256">AST_CDR_FAILED</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00254">AST_CDR_NOANSWER</a>, and <a class="el" href="../../dc/d07/cdr_8h_source.html#l00255">AST_CDR_NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03050">ast_cdr_format_var()</a>, <a class="el" href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00162">beanstalk_put()</a>, <a class="el" href="../../d4/d4c/cdr__csv_8c_source.html#l00211">build_csv_record()</a>, <a class="el" href="../../d7/d83/cdr__radius_8c_source.html#l00098">build_radius_record()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01440">cdr_object_finalize()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00248">cdr_read_callback()</a>, <a class="el" href="../../d8/d56/cdr__odbc_8c_source.html#l00071">execute_cb()</a>, <a class="el" href="../../df/d5a/cdr__manager_8c_source.html#l00273">manager_log()</a>, and <a class="el" href="../../d0/d2a/cdr__tds_8c_source.html#l00109">tds_log()</a>.</p>
<div class="fragment"><div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;{</div><div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">disposition</a>) {</div><div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2677fdaf6d385ca80373f0666b36b613">AST_CDR_NULL</a>:</div><div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;NO ANSWER&quot;</span>; <span class="comment">/* by default, for backward compatibility */</span></div><div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2ae5ddf52a9d2a20fc4af7b9e5dde283">AST_CDR_NOANSWER</a>:</div><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;NO ANSWER&quot;</span>;</div><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0af31f029a69fc67c7fca424569f708143">AST_CDR_FAILED</a>:</div><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;FAILED&quot;</span>;</div><div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ad5945e6977fe7c1d64bacadaad7aa9ea">AST_CDR_BUSY</a>:</div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;BUSY&quot;</span>;</div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ac3e47d059a0e67a03f822f10bb7ec5b1">AST_CDR_ANSWERED</a>:</div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;ANSWERED&quot;</span>;</div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a115c062baa559bcadd55720d6e2383bd">AST_CDR_CONGESTION</a>:</div><div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;CONGESTION&quot;</span>;</div><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;   }</div><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;UNKNOWN&quot;</span>;</div><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;}</div><div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0a2ae5ddf52a9d2a20fc4af7b9e5dde283"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2ae5ddf52a9d2a20fc4af7b9e5dde283">AST_CDR_NOANSWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00254">cdr.h:254</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0af31f029a69fc67c7fca424569f708143"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0af31f029a69fc67c7fca424569f708143">AST_CDR_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00256">cdr.h:256</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0ac3e47d059a0e67a03f822f10bb7ec5b1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ac3e47d059a0e67a03f822f10bb7ec5b1">AST_CDR_ANSWERED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00258">cdr.h:258</a></div></div>
<div class="ttc" id="structcdr__object_html_a462f09f05430fd152a129a88f52cfce7"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">cdr_object::disposition</a></div><div class="ttdeci">enum ast_cdr_disposition disposition</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00717">cdr.c:717</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0a2677fdaf6d385ca80373f0666b36b613"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2677fdaf6d385ca80373f0666b36b613">AST_CDR_NULL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00255">cdr.h:255</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0ad5945e6977fe7c1d64bacadaad7aa9ea"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ad5945e6977fe7c1d64bacadaad7aa9ea">AST_CDR_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00257">cdr.h:257</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0a115c062baa559bcadd55720d6e2383bd"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a115c062baa559bcadd55720d6e2383bd">AST_CDR_CONGESTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00259">cdr.h:259</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7e8acc90934bc4647dd675a251d9e6ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e8acc90934bc4647dd675a251d9e6ab">&#9670;&nbsp;</a></span>ast_cdr_dup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a>* ast_cdr_dup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *&#160;</td>
          <td class="paramname"><em>cdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Duplicate a public CDR. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cdr</td><td>the record to duplicate</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">a</td><td>malloc'd <a class="el" href="../../d4/d5d/structast__cdr.html" title="Responsible for call detail data. ">ast_cdr</a> structure, </td></tr>
    <tr><td class="paramname">NULL</td><td>on error (malloc failure) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02998">2998</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l03422">ast_cdr_alloc()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00680">AST_LIST_HEAD_INIT_NOLOCK</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00746">copy_variables()</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00325">ast_cdr::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/d07/cdr_8h_source.html#l00323">ast_cdr::varshead</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/df4/cdr__custom_8c_source.html#l00129">custom_log()</a>, <a class="el" href="../../d5/dd1/cdr__sqlite3__custom_8c_source.html#l00119">load_values_config()</a>, <a class="el" href="../../df/d5a/cdr__manager_8c_source.html#l00273">manager_log()</a>, and <a class="el" href="../../d3/de4/cdr__syslog_8c_source.html#l00086">syslog_log()</a>.</p>
<div class="fragment"><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;{</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *newcdr;</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;   }</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;   newcdr = <a class="code" href="../../dc/df2/cdr_8c.html#a29ba08b358224b4c820e5df826273b5b">ast_cdr_alloc</a>();</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;   <span class="keywordflow">if</span> (!newcdr) {</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;   }</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;   *newcdr = *cdr;</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(&amp;newcdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a9ffb22045a8f14bef8f2137cd779ab25">varshead</a>);</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a7b10f449baa91a185f72f31509abb95f">copy_variables</a>(&amp;newcdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a9ffb22045a8f14bef8f2137cd779ab25">varshead</a>, &amp;cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a9ffb22045a8f14bef8f2137cd779ab25">varshead</a>);</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;   newcdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a8098d02138e27b57d184b260b6669eed">next</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;   <span class="keywordflow">return</span> newcdr;</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;}</div><div class="ttc" id="structast__cdr_html_a8098d02138e27b57d184b260b6669eed"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a8098d02138e27b57d184b260b6669eed">ast_cdr::next</a></div><div class="ttdeci">struct ast_cdr * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00325">cdr.h:325</a></div></div>
<div class="ttc" id="cdr_8c_html_a29ba08b358224b4c820e5df826273b5b"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a29ba08b358224b4c820e5df826273b5b">ast_cdr_alloc</a></div><div class="ttdeci">struct ast_cdr * ast_cdr_alloc(void)</div><div class="ttdoc">Allocate a CDR record. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03422">cdr.c:3422</a></div></div>
<div class="ttc" id="cdr_8c_html_a7b10f449baa91a185f72f31509abb95f"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a7b10f449baa91a185f72f31509abb95f">copy_variables</a></div><div class="ttdeci">static int copy_variables(struct varshead *to_list, struct varshead *from_list)</div><div class="ttdoc">Copy variables from one list to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00746">cdr.c:746</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__cdr_html_a9ffb22045a8f14bef8f2137cd779ab25"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a9ffb22045a8f14bef8f2137cd779ab25">ast_cdr::varshead</a></div><div class="ttdeci">struct varshead varshead</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00323">cdr.h:323</a></div></div>
<div class="ttc" id="structast__cdr_html"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html">ast_cdr</a></div><div class="ttdoc">Responsible for call detail data. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00276">cdr.h:276</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0d1f922e093ac18824a7863fe3f5fa27"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a></div><div class="ttdeci">#define AST_LIST_HEAD_INIT_NOLOCK(head)</div><div class="ttdoc">Initializes a list head structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00680">linkedlists.h:680</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5634f8ea707fb2fdf87abdd55a539764"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5634f8ea707fb2fdf87abdd55a539764">&#9670;&nbsp;</a></span>ast_cdr_engine_term()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_cdr_engine_term </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Submit any remaining CDRs and prepare for shutdown </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04577">4577</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00232">BATCH_MODE_SAFE_SHUTDOWN</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00221">CDR_BATCHMODE</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03766">cdr_submit_batch()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, and <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00288">stasis_message_router_publish_sync()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01921">can_safely_quit()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l04277">finalize_batch_mode()</a>.</p>
<div class="fragment"><div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;{</div><div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d57/structmodule__config.html">module_config</a> *, mod_cfg, <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(module_configs), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;</div><div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;   <span class="comment">/* Since this is called explicitly during process shutdown, we might not have ever</span></div><div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;<span class="comment">    * been initialized. If so, the config object will be NULL.</span></div><div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;   <span class="keywordflow">if</span> (!mod_cfg) {</div><div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;   }</div><div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;</div><div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;   <span class="keywordflow">if</span> (cdr_sync_message_type()) {</div><div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;      <span class="keywordtype">void</span> *payload;</div><div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="code" href="../../d8/d9e/structmessage.html">message</a>;</div><div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;</div><div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>) {</div><div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;      }</div><div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;</div><div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;      <span class="comment">/* Make sure we have the needed items */</span></div><div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;      payload = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*payload), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;      <span class="keywordflow">if</span> (!payload) {</div><div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;      }</div><div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;</div><div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;CDR Engine termination request received; waiting on messages...\n&quot;</span>);</div><div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;</div><div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;      message = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(cdr_sync_message_type(), payload);</div><div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;      <span class="keywordflow">if</span> (message) {</div><div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;         <a class="code" href="../../d4/d25/stasis__message__router_8h.html#afa3a5be12d8f5918aad9d1bb97c23893">stasis_message_router_publish_sync</a>(<a class="code" href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>, message);</div><div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;      }</div><div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(message);</div><div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(payload);</div><div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;   }</div><div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;</div><div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;general-&gt;settings, <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492">CDR_BATCHMODE</a>)) {</div><div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#ae78649474f95f4adb19a0791ed39f4fc">cdr_submit_batch</a>(<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;general-&gt;batch_settings.settings, <a class="code" href="../../dc/d07/cdr_8h.html#a3142c0762d64e330ffe9f2ebe8976652a2d351981e14dab32c9749dbdd87de33c">BATCH_MODE_SAFE_SHUTDOWN</a>));</div><div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;   }</div><div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a6d6d7bdd31cb1b6f84f2e447a7a2c6c2"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a></div><div class="ttdeci">static struct stasis_message_router * stasis_router</div><div class="ttdoc">Message router for stasis messages regarding channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00371">cdr.c:371</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="cdr_8h_html_a3142c0762d64e330ffe9f2ebe8976652a2d351981e14dab32c9749dbdd87de33c"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a3142c0762d64e330ffe9f2ebe8976652a2d351981e14dab32c9749dbdd87de33c">BATCH_MODE_SAFE_SHUTDOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00232">cdr.h:232</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_afa3a5be12d8f5918aad9d1bb97c23893"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#afa3a5be12d8f5918aad9d1bb97c23893">stasis_message_router_publish_sync</a></div><div class="ttdeci">void stasis_message_router_publish_sync(struct stasis_message_router *router, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a message router&amp;#39;s subscription synchronously. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00288">stasis_message_router.c:288</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="cdr_8c_html_ae78649474f95f4adb19a0791ed39f4fc"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ae78649474f95f4adb19a0791ed39f4fc">cdr_submit_batch</a></div><div class="ttdeci">static void cdr_submit_batch(int shutdown)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03766">cdr.c:3766</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492">CDR_BATCHMODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00221">cdr.h:221</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structmodule__config_html"><div class="ttname"><a href="../../db/d57/structmodule__config.html">module_config</a></div><div class="ttdoc">The configuration settings for this module. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00222">cdr.c:222</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a849140919895e9871b901d6805f47eba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a849140919895e9871b901d6805f47eba">&#9670;&nbsp;</a></span>ast_cdr_fork()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_fork </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>channel_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a> *&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fork a CDR. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel_name</td><td>The name of the channel whose CDR should be forked </td></tr>
    <tr><td class="paramname">options</td><td>Options to control how the fork occurs.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">-1</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03637">3637</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l00719">cdr_object::answer</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::appl</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00244">AST_CDR_FLAG_FINALIZE</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00240">AST_CDR_FLAG_KEEP_VARS</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00246">AST_CDR_FLAG_RESET</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00245">AST_CDR_FLAG_SET_ANSWER</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00247">AST_CDR_LOCK_APP</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00077">ast_clear_flag</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00042">AST_STATE_UP</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::bridge</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00949">cdr_all_relink()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01075">cdr_object_create_and_append()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01440">cdr_object_finalize()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03312">cdr_object_get_by_name()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00821">cdr_object_transition_state()</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::context</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00746">copy_variables()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::data</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00118">exten</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::exten</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00707">cdr_object_snapshot::flags</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00723">cdr_object::flags</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00777">free_variables()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00736">cdr_object::last</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00721">cdr_object::lastevent</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00602">SCOPED_AO2LOCK</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00718">cdr_object::start</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00153">ast_channel_snapshot::state</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00706">cdr_object_snapshot::userfield</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00708">cdr_object_snapshot::variables</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d8e/test__cdr_8c_source.html#l02120">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d2/db9/app__forkcdr_8c_source.html#l00115">forkcdr_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;{</div><div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *, cdr, <a class="code" href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a>(channel_name), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *new_cdr;</div><div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr_obj;</div><div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;</div><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;   }</div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;</div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;   {</div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, cdr);</div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;      <span class="keyword">struct </span>timeval now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;</div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;      cdr_obj = cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a761f66169af05fad3479b4e80ddd6315">last</a>;</div><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;      <span class="keywordflow">if</span> (cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a> == &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a>) {</div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;         <span class="comment">/* If the last CDR in the chain is finalized, don&#39;t allow a fork -</span></div><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;<span class="comment">          * things are already dying at this point</span></div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;      }</div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;</div><div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;      <span class="comment">/* Copy over the basic CDR information. The Party A information is</span></div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;<span class="comment">       * copied over automatically as part of the append</span></div><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Forking CDR for channel %s\n&quot;</span>, cdr-&gt;party_a.snapshot-&gt;base-&gt;name);</div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;      new_cdr = <a class="code" href="../../dc/df2/cdr_8c.html#af90187a3766c8b50aa4b984a62e30219">cdr_object_create_and_append</a>(cdr, &amp;now);</div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;      <span class="keywordflow">if</span> (!new_cdr) {</div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;      }</div><div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;      new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a> = cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>;</div><div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(new_cdr, bridge, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">bridge</a>);</div><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(new_cdr, appl, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af535fe520577fb6b8795dea539bd0230">appl</a>);</div><div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(new_cdr, data, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7870f447ef3c43ebf148da15363b25dd">data</a>);</div><div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(new_cdr, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, cdr-&gt;context);</div><div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(new_cdr, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, cdr-&gt;exten);</div><div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;      new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">flags</a> = cdr-&gt;<a class="code" href="../../dc/dac/structast__flags.html#ac92588540e8c1d014a08cd8a45462b19">flags</a>;</div><div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;      <span class="comment">/* Explicitly clear the AST_CDR_LOCK_APP flag - we want</span></div><div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;<span class="comment">       * the application to be changed on the new CDR if the</span></div><div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;<span class="comment">       * dialplan demands it</span></div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(&amp;new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a13988d4b84386aec3e34c0d2459dd0e1">AST_CDR_LOCK_APP</a>);</div><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;</div><div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;      <span class="comment">/* If there&#39;s a Party B, copy it over as well */</span></div><div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;      <span class="keywordflow">if</span> (cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>) {</div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;         new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a> = cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>;</div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>, +1);</div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#a9b92f90cd704735201d9c840842bd0bc">cdr_all_relink</a>(new_cdr);</div><div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;         strcpy(new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>, cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>);</div><div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;         new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#ac92588540e8c1d014a08cd8a45462b19">flags</a> = cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#ac92588540e8c1d014a08cd8a45462b19">flags</a>;</div><div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(options, <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37aca37d4bd33596be9016fa99e5b7216ca">AST_CDR_FLAG_KEEP_VARS</a>)) {</div><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;            <a class="code" href="../../dc/df2/cdr_8c.html#a7b10f449baa91a185f72f31509abb95f">copy_variables</a>(&amp;new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>, &amp;cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>);</div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;         }</div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;      }</div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;      new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a> = cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a>;</div><div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;      new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a> = cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>;</div><div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;      new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">lastevent</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;</div><div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;      <span class="comment">/* Modify the times based on the flags passed in */</span></div><div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(options, <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37afd891053fefc9facc81cbec028769dbc">AST_CDR_FLAG_SET_ANSWER</a>)</div><div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;            &amp;&amp; new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab772a54f7effa7ab06616e36ae30988a">state</a> == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>) {</div><div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;         new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;      }</div><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(options, <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37ad94c296ac6b08059afe3466ea126d3e6">AST_CDR_FLAG_RESET</a>)) {</div><div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;         new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;         new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;      }</div><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;</div><div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;      <span class="comment">/* Create and append, by default, copies over the variables */</span></div><div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(options, <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37aca37d4bd33596be9016fa99e5b7216ca">AST_CDR_FLAG_KEEP_VARS</a>)) {</div><div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#ae23ebf460a645c91c4f3c471c3ecd925">free_variables</a>(&amp;new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>);</div><div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;      }</div><div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;</div><div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;      <span class="comment">/* Finalize any current CDRs */</span></div><div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(options, <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a5c7786f80ec35a01e0dd275218afa0f8">AST_CDR_FLAG_FINALIZE</a>)) {</div><div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;         <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr != new_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;            <span class="keywordflow">if</span> (it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a> == &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a>) {</div><div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;            }</div><div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;            <span class="comment">/* Force finalization on the CDR. This will bypass any checks for</span></div><div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;<span class="comment">             * end before &#39;h&#39; extension.</span></div><div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;            <a class="code" href="../../dc/df2/cdr_8c.html#a34a146403fab13026f6e302c753be741">cdr_object_finalize</a>(it_cdr);</div><div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;            <a class="code" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a>(it_cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a>);</div><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;         }</div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;      }</div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;   }</div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;</div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;}</div><div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a2e42d02e62d0d56d645c901011bb767b"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">cdr_object_snapshot::variables</a></div><div class="ttdeci">struct varshead variables</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00708">cdr.c:708</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37a5c7786f80ec35a01e0dd275218afa0f8"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a5c7786f80ec35a01e0dd275218afa0f8">AST_CDR_FLAG_FINALIZE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00244">cdr.h:244</a></div></div>
<div class="ttc" id="structast__flags_html_ac92588540e8c1d014a08cd8a45462b19"><div class="ttname"><a href="../../dc/dac/structast__flags.html#ac92588540e8c1d014a08cd8a45462b19">ast_flags::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00200">utils.h:200</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="structcdr__object_html_a621c14aed7c59835c5bc93bc88e8f3d9"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">cdr_object::answer</a></div><div class="ttdeci">struct timeval answer</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00719">cdr.c:719</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00042">channelstate.h:42</a></div></div>
<div class="ttc" id="structcdr__object_html_ad80305b5e16da9c2675d5f057bd69386"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">cdr_object::start</a></div><div class="ttdeci">struct timeval start</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00718">cdr.c:718</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_ac92588540e8c1d014a08cd8a45462b19"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#ac92588540e8c1d014a08cd8a45462b19">cdr_object_snapshot::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00707">cdr.c:707</a></div></div>
<div class="ttc" id="cdr_8c_html_a7b10f449baa91a185f72f31509abb95f"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a7b10f449baa91a185f72f31509abb95f">copy_variables</a></div><div class="ttdeci">static int copy_variables(struct varshead *to_list, struct varshead *from_list)</div><div class="ttdoc">Copy variables from one list to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00746">cdr.c:746</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="structcdr__object_html_af535fe520577fb6b8795dea539bd0230"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af535fe520577fb6b8795dea539bd0230">cdr_object::appl</a></div><div class="ttdeci">const ast_string_field appl</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a2d480b13820a3a97582a1a138036aa25"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">cdr_object_snapshot::userfield</a></div><div class="ttdeci">char userfield[AST_MAX_USER_FIELD]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00706">cdr.c:706</a></div></div>
<div class="ttc" id="structcdr__object_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">cdr_object::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00723">cdr.c:723</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="cdr_8c_html_a89dc924870cf4d81f8841a3b4f33d722"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a></div><div class="ttdeci">static struct cdr_object * cdr_object_get_by_name(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03312">cdr.c:3312</a></div></div>
<div class="ttc" id="cdr_8c_html_ae23ebf460a645c91c4f3c471c3ecd925"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ae23ebf460a645c91c4f3c471c3ecd925">free_variables</a></div><div class="ttdeci">static void free_variables(struct varshead *headp)</div><div class="ttdoc">Delete all variables from a variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00777">cdr.c:777</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37a13988d4b84386aec3e34c0d2459dd0e1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a13988d4b84386aec3e34c0d2459dd0e1">AST_CDR_LOCK_APP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00247">cdr.h:247</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="structcdr__object_html_a761f66169af05fad3479b4e80ddd6315"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a761f66169af05fad3479b4e80ddd6315">cdr_object::last</a></div><div class="ttdeci">struct cdr_object * last</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00736">cdr.c:736</a></div></div>
<div class="ttc" id="structcdr__object_html_a7870f447ef3c43ebf148da15363b25dd"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7870f447ef3c43ebf148da15363b25dd">cdr_object::data</a></div><div class="ttdeci">const ast_string_field data</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structcdr__object_html_a7543dbd0c668cd22684e8d5aea0b5b93"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">cdr_object::lastevent</a></div><div class="ttdeci">struct timeval lastevent</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00721">cdr.c:721</a></div></div>
<div class="ttc" id="lock_8h_html_a2cfb325ed371eb6e629446bac4676e9f"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a></div><div class="ttdeci">#define SCOPED_AO2LOCK(varname, obj)</div><div class="ttdoc">scoped lock specialization for ao2 mutexes. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00602">lock.h:602</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ab772a54f7effa7ab06616e36ae30988a"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab772a54f7effa7ab06616e36ae30988a">ast_channel_snapshot::state</a></div><div class="ttdeci">enum ast_channel_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00153">stasis_channels.h:153</a></div></div>
<div class="ttc" id="utils_8h_html_a7b260320610a09017a9416398acd0a70"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a></div><div class="ttdeci">#define ast_clear_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00077">utils.h:77</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f50dd95a426c8a70710afc315164f04"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table finalized_state_fn_table</div><div class="ttdoc">The virtual table for the finalized state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00694">cdr.c:694</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37ad94c296ac6b08059afe3466ea126d3e6"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37ad94c296ac6b08059afe3466ea126d3e6">AST_CDR_FLAG_RESET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00246">cdr.h:246</a></div></div>
<div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37afd891053fefc9facc81cbec028769dbc"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37afd891053fefc9facc81cbec028769dbc">AST_CDR_FLAG_SET_ANSWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00245">cdr.h:245</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="cdr_8c_html_af90187a3766c8b50aa4b984a62e30219"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#af90187a3766c8b50aa4b984a62e30219">cdr_object_create_and_append</a></div><div class="ttdeci">static struct cdr_object * cdr_object_create_and_append(struct cdr_object *cdr, const struct timeval *event_time)</div><div class="ttdoc">Create a new cdr_object and append it to an existing chain. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01075">cdr.c:1075</a></div></div>
<div class="ttc" id="cdr_8c_html_a34a146403fab13026f6e302c753be741"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a34a146403fab13026f6e302c753be741">cdr_object_finalize</a></div><div class="ttdeci">static void cdr_object_finalize(struct cdr_object *cdr)</div><div class="ttdoc">Finalize a CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01440">cdr.c:1440</a></div></div>
<div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37aca37d4bd33596be9016fa99e5b7216ca"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37aca37d4bd33596be9016fa99e5b7216ca">AST_CDR_FLAG_KEEP_VARS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00240">cdr.h:240</a></div></div>
<div class="ttc" id="structcdr__object_html_af089037b58d169050b5b9242ab0b033f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">cdr_object::bridge</a></div><div class="ttdeci">const ast_string_field bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="cdr_8c_html_a9b92f90cd704735201d9c840842bd0bc"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a9b92f90cd704735201d9c840842bd0bc">cdr_all_relink</a></div><div class="ttdeci">static void cdr_all_relink(struct cdr_object *cdr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00949">cdr.c:949</a></div></div>
<div class="ttc" id="cdr_8c_html_aec9ada03f8f99aa4c972b141bcbd2ee3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a></div><div class="ttdeci">static void cdr_object_transition_state(struct cdr_object *cdr, struct cdr_object_fn_table *fn_table)</div><div class="ttdoc">Transition a cdr_object to a new state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00821">cdr.c:821</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4ce5d9fd0bec829301262576b9afdaf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ce5d9fd0bec829301262576b9afdaf5">&#9670;&nbsp;</a></span>ast_cdr_format_var()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_cdr_format_var </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>workspace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>workspacelen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>raw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Format a CDR variable from an already posted CDR. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cdr</td><td>The dispatched CDR to process </td></tr>
    <tr><td class="paramname">name</td><td>The name of the variable </td></tr>
    <tr><td class="paramname">ret</td><td>Pointer to the formatted buffer </td></tr>
    <tr><td class="paramname">workspace</td><td>A pointer to the buffer to use to format the variable </td></tr>
    <tr><td class="paramname">workspacelen</td><td>The size of workspace </td></tr>
    <tr><td class="paramname">raw</td><td>If non-zero and a date/time is extraced, provide epoch seconds. Otherwise format as a date/time stamp </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03050">3050</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d07/cdr_8h_source.html#l00308">ast_cdr::accountcode</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00306">ast_cdr::amaflags</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00296">ast_cdr::answer</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03430">ast_cdr_disp2str()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04418">ast_channel_amaflags2string()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00108">ast_tvzero()</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00302">ast_cdr::billsec</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03018">cdr_format_var_internal()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03035">cdr_get_tv()</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00286">ast_cdr::channel</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00278">ast_cdr::clid</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00284">ast_cdr::dcontext</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00304">ast_cdr::disposition</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00282">ast_cdr::dst</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00288">ast_cdr::dstchannel</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00300">ast_cdr::duration</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00298">ast_cdr::end</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00290">ast_cdr::lastapp</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00292">ast_cdr::lastdata</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00316">ast_cdr::linkedid</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00310">ast_cdr::peeraccount</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00320">ast_cdr::sequence</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00280">ast_cdr::src</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00294">ast_cdr::start</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00314">ast_cdr::uniqueid</a>, and <a class="el" href="../../dc/d07/cdr_8h_source.html#l00318">ast_cdr::userfield</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00774">cdr_handler()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00248">cdr_read_callback()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00222">cdr_retrieve_time()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00172">mysql_log()</a>, <a class="el" href="../../df/ddb/cdr__adaptive__odbc_8c_source.html#l00379">odbc_log()</a>, and <a class="el" href="../../dd/d22/cdr__pgsql_8c_source.html#l00214">pgsql_log()</a>.</p>
<div class="fragment"><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;{</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt = <span class="stringliteral">&quot;%Y-%m-%d %T&quot;</span>;</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *varbuf;</div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;   }</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;   *ret = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;clid&quot;</span>)) {</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#ab7fd8bddf0ce6987ae5e58fb64cfc9e2">clid</a>, workspacelen);</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;src&quot;</span>)) {</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#aa8e4f370559b3fe698f36b3132467f94">src</a>, workspacelen);</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;dst&quot;</span>)) {</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#ab30db746a1bf5c869a5dc9dbfaa864d4">dst</a>, workspacelen);</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;dcontext&quot;</span>)) {</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, workspacelen);</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;channel&quot;</span>)) {</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a6396dbd53fd6fedc1fc3ba2743f00eca">channel</a>, workspacelen);</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;dstchannel&quot;</span>)) {</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a0d43f7cac6179c7c4f9521f3138195b4">dstchannel</a>, workspacelen);</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;lastapp&quot;</span>)) {</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#ae7697234189954ec7c6a81b4ab691b85">lastapp</a>, workspacelen);</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;lastdata&quot;</span>)) {</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a2176704f41b4368f2dfa94b64bfcfb6a">lastdata</a>, workspacelen);</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;start&quot;</span>)) {</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a26ef22f050d742f08715473a63720bb5">cdr_get_tv</a>(cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#ad80305b5e16da9c2675d5f057bd69386">start</a>, raw ? <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> : fmt, workspace, workspacelen);</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;answer&quot;</span>)) {</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a26ef22f050d742f08715473a63720bb5">cdr_get_tv</a>(cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>, raw ? <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> : fmt, workspace, workspacelen);</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;end&quot;</span>)) {</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a26ef22f050d742f08715473a63720bb5">cdr_get_tv</a>(cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>, raw ? <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> : fmt, workspace, workspacelen);</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;duration&quot;</span>)) {</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;      snprintf(workspace, workspacelen, <span class="stringliteral">&quot;%ld&quot;</span>, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>.tv_sec != 0 ? cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a993dee0d19091c6d48fdeda230fd6be0">duration</a> : (<span class="keywordtype">long</span>)<a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#ad80305b5e16da9c2675d5f057bd69386">start</a>) / 1000);</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;billsec&quot;</span>)) {</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;      snprintf(workspace, workspacelen, <span class="stringliteral">&quot;%ld&quot;</span>, (cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a4a98731fed2979292cd6042898671e8d">billsec</a> || !<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>) || <a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>)) ? cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a4a98731fed2979292cd6042898671e8d">billsec</a> : (<span class="keywordtype">long</span>)<a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>) / 1000);</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;disposition&quot;</span>)) {</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;      <span class="keywordflow">if</span> (raw) {</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;         snprintf(workspace, workspacelen, <span class="stringliteral">&quot;%ld&quot;</span>, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a1f9669e5d9d64aa831cd9db2dd71534f">disposition</a>);</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, <a class="code" href="../../dc/df2/cdr_8c.html#a0e23f3be8d570dbc8e6c872c566c09d9">ast_cdr_disp2str</a>(cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a1f9669e5d9d64aa831cd9db2dd71534f">disposition</a>), workspacelen);</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;      }</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;amaflags&quot;</span>)) {</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;      <span class="keywordflow">if</span> (raw) {</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;         snprintf(workspace, workspacelen, <span class="stringliteral">&quot;%ld&quot;</span>, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#aa2112d5526f7d98a80d5da0abea1cc7d">amaflags</a>);</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, <a class="code" href="../../d5/d7b/channel_8h.html#ac5686beb47ec95ccb0996ab1b596e559">ast_channel_amaflags2string</a>(cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#aa2112d5526f7d98a80d5da0abea1cc7d">amaflags</a>), workspacelen);</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;      }</div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;accountcode&quot;</span>)) {</div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#adfee50d07a98645d4d20b896ce03785a">accountcode</a>, workspacelen);</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;peeraccount&quot;</span>)) {</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a68f8603d8857718ec5ac0a42d4a507fa">peeraccount</a>, workspacelen);</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;uniqueid&quot;</span>)) {</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#ac733390e45613f1287d0b1b95e8d18ea">uniqueid</a>, workspacelen);</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;linkedid&quot;</span>)) {</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a2979e8d95424c018bf2c830b28a199d0">linkedid</a>, workspacelen);</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;userfield&quot;</span>)) {</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>, workspacelen);</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;sequence&quot;</span>)) {</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;      snprintf(workspace, workspacelen, <span class="stringliteral">&quot;%d&quot;</span>, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#acc80722d9dd9349cbba06c72d6fb5972">sequence</a>);</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((varbuf = <a class="code" href="../../dc/df2/cdr_8c.html#a4705b2dc3ab2f2294119c7fc9ceeb003">cdr_format_var_internal</a>(cdr, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>))) {</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, varbuf, workspacelen);</div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;      workspace[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;   }</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(workspace)) {</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;      *ret = workspace;</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;   }</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;}</div><div class="ttc" id="structast__cdr_html_adfee50d07a98645d4d20b896ce03785a"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#adfee50d07a98645d4d20b896ce03785a">ast_cdr::accountcode</a></div><div class="ttdeci">char accountcode[AST_MAX_ACCOUNT_CODE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00308">cdr.h:308</a></div></div>
<div class="ttc" id="structast__cdr_html_a0d43f7cac6179c7c4f9521f3138195b4"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a0d43f7cac6179c7c4f9521f3138195b4">ast_cdr::dstchannel</a></div><div class="ttdeci">char dstchannel[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00288">cdr.h:288</a></div></div>
<div class="ttc" id="structast__cdr_html_a4a98731fed2979292cd6042898671e8d"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a4a98731fed2979292cd6042898671e8d">ast_cdr::billsec</a></div><div class="ttdeci">long int billsec</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00302">cdr.h:302</a></div></div>
<div class="ttc" id="structast__cdr_html_af27d556683a4a28e6564618bcf00bec1"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#af27d556683a4a28e6564618bcf00bec1">ast_cdr::dcontext</a></div><div class="ttdeci">char dcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00284">cdr.h:284</a></div></div>
<div class="ttc" id="time_8h_html_a4e7b3508884147c7991a68361ac781a2"><div class="ttname"><a href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a></div><div class="ttdeci">int ast_tvzero(const struct timeval t)</div><div class="ttdoc">Returns true if the argument is 0,0. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00108">time.h:108</a></div></div>
<div class="ttc" id="structast__cdr_html_acc80722d9dd9349cbba06c72d6fb5972"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#acc80722d9dd9349cbba06c72d6fb5972">ast_cdr::sequence</a></div><div class="ttdeci">int sequence</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00320">cdr.h:320</a></div></div>
<div class="ttc" id="channel_8h_html_ac5686beb47ec95ccb0996ab1b596e559"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac5686beb47ec95ccb0996ab1b596e559">ast_channel_amaflags2string</a></div><div class="ttdeci">const char * ast_channel_amaflags2string(enum ama_flags flags)</div><div class="ttdoc">Convert the enum representation of an AMA flag to a string representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04418">channel.c:4418</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__cdr_html_a2176704f41b4368f2dfa94b64bfcfb6a"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a2176704f41b4368f2dfa94b64bfcfb6a">ast_cdr::lastdata</a></div><div class="ttdeci">char lastdata[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00292">cdr.h:292</a></div></div>
<div class="ttc" id="structast__cdr_html_aa2112d5526f7d98a80d5da0abea1cc7d"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#aa2112d5526f7d98a80d5da0abea1cc7d">ast_cdr::amaflags</a></div><div class="ttdeci">long int amaflags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00306">cdr.h:306</a></div></div>
<div class="ttc" id="structast__cdr_html_a2979e8d95424c018bf2c830b28a199d0"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a2979e8d95424c018bf2c830b28a199d0">ast_cdr::linkedid</a></div><div class="ttdeci">char linkedid[AST_MAX_UNIQUEID]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00316">cdr.h:316</a></div></div>
<div class="ttc" id="structast__cdr_html_ac733390e45613f1287d0b1b95e8d18ea"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#ac733390e45613f1287d0b1b95e8d18ea">ast_cdr::uniqueid</a></div><div class="ttdeci">char uniqueid[AST_MAX_UNIQUEID]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00314">cdr.h:314</a></div></div>
<div class="ttc" id="cdr_8c_html_a26ef22f050d742f08715473a63720bb5"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a26ef22f050d742f08715473a63720bb5">cdr_get_tv</a></div><div class="ttdeci">static void cdr_get_tv(struct timeval when, const char *fmt, char *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03035">cdr.c:3035</a></div></div>
<div class="ttc" id="structast__cdr_html_ab30db746a1bf5c869a5dc9dbfaa864d4"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#ab30db746a1bf5c869a5dc9dbfaa864d4">ast_cdr::dst</a></div><div class="ttdeci">char dst[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00282">cdr.h:282</a></div></div>
<div class="ttc" id="structast__cdr_html_a6396dbd53fd6fedc1fc3ba2743f00eca"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a6396dbd53fd6fedc1fc3ba2743f00eca">ast_cdr::channel</a></div><div class="ttdeci">char channel[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00286">cdr.h:286</a></div></div>
<div class="ttc" id="cdr_8c_html_a4705b2dc3ab2f2294119c7fc9ceeb003"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a4705b2dc3ab2f2294119c7fc9ceeb003">cdr_format_var_internal</a></div><div class="ttdeci">static const char * cdr_format_var_internal(struct ast_cdr *cdr, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03018">cdr.c:3018</a></div></div>
<div class="ttc" id="structast__cdr_html_a621c14aed7c59835c5bc93bc88e8f3d9"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a621c14aed7c59835c5bc93bc88e8f3d9">ast_cdr::answer</a></div><div class="ttdeci">struct timeval answer</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00296">cdr.h:296</a></div></div>
<div class="ttc" id="structast__cdr_html_ae7697234189954ec7c6a81b4ab691b85"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#ae7697234189954ec7c6a81b4ab691b85">ast_cdr::lastapp</a></div><div class="ttdeci">char lastapp[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00290">cdr.h:290</a></div></div>
<div class="ttc" id="structast__cdr_html_ad80305b5e16da9c2675d5f057bd69386"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#ad80305b5e16da9c2675d5f057bd69386">ast_cdr::start</a></div><div class="ttdeci">struct timeval start</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00294">cdr.h:294</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structast__cdr_html_a993dee0d19091c6d48fdeda230fd6be0"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a993dee0d19091c6d48fdeda230fd6be0">ast_cdr::duration</a></div><div class="ttdeci">long int duration</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00300">cdr.h:300</a></div></div>
<div class="ttc" id="structast__cdr_html_aa8e4f370559b3fe698f36b3132467f94"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#aa8e4f370559b3fe698f36b3132467f94">ast_cdr::src</a></div><div class="ttdeci">char src[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00280">cdr.h:280</a></div></div>
<div class="ttc" id="structast__cdr_html_a68f8603d8857718ec5ac0a42d4a507fa"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a68f8603d8857718ec5ac0a42d4a507fa">ast_cdr::peeraccount</a></div><div class="ttdeci">char peeraccount[AST_MAX_ACCOUNT_CODE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00310">cdr.h:310</a></div></div>
<div class="ttc" id="structast__cdr_html_af5249cf68dff13dd1dcca5929f4f3a5b"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#af5249cf68dff13dd1dcca5929f4f3a5b">ast_cdr::end</a></div><div class="ttdeci">struct timeval end</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00298">cdr.h:298</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structast__cdr_html_a1f9669e5d9d64aa831cd9db2dd71534f"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a1f9669e5d9d64aa831cd9db2dd71534f">ast_cdr::disposition</a></div><div class="ttdeci">long int disposition</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00304">cdr.h:304</a></div></div>
<div class="ttc" id="structast__cdr_html_ab7fd8bddf0ce6987ae5e58fb64cfc9e2"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#ab7fd8bddf0ce6987ae5e58fb64cfc9e2">ast_cdr::clid</a></div><div class="ttdeci">char clid[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00278">cdr.h:278</a></div></div>
<div class="ttc" id="structast__cdr_html_a2d480b13820a3a97582a1a138036aa25"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a2d480b13820a3a97582a1a138036aa25">ast_cdr::userfield</a></div><div class="ttdeci">char userfield[AST_MAX_USER_FIELD]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00318">cdr.h:318</a></div></div>
<div class="ttc" id="cdr_8c_html_a0e23f3be8d570dbc8e6c872c566c09d9"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a0e23f3be8d570dbc8e6c872c566c09d9">ast_cdr_disp2str</a></div><div class="ttdeci">const char * ast_cdr_disp2str(int disposition)</div><div class="ttdoc">Disposition to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03430">cdr.c:3430</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a28b931d52c71271afd601186db95fec2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28b931d52c71271afd601186db95fec2">&#9670;&nbsp;</a></span>ast_cdr_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_cdr_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *&#160;</td>
          <td class="paramname"><em>cdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free a CDR record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cdr</td><td><a class="el" href="../../d4/d5d/structast__cdr.html" title="Responsible for call detail data. ">ast_cdr</a> structure to free Returns nothing </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03411">3411</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00777">free_variables()</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00325">ast_cdr::next</a>, and <a class="el" href="../../dc/d07/cdr_8h_source.html#l00323">ast_cdr::varshead</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l02192">ast_channel_destructor()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02338">ast_dummy_channel_destructor()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03841">cdr_detach()</a>, <a class="el" href="../../d7/d8e/test__cdr_8c_source.html#l00169">clear_mock_cdr_backend()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03749">do_batch_backend_process()</a>.</p>
<div class="fragment"><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;{</div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;   <span class="keywordflow">while</span> (cdr) {</div><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *<a class="code" href="../../d4/d5d/structast__cdr.html#a8098d02138e27b57d184b260b6669eed">next</a> = cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a8098d02138e27b57d184b260b6669eed">next</a>;</div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;</div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#ae23ebf460a645c91c4f3c471c3ecd925">free_variables</a>(&amp;cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a9ffb22045a8f14bef8f2137cd779ab25">varshead</a>);</div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cdr);</div><div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;      cdr = <a class="code" href="../../d4/d5d/structast__cdr.html#a8098d02138e27b57d184b260b6669eed">next</a>;</div><div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;   }</div><div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;}</div><div class="ttc" id="structast__cdr_html_a8098d02138e27b57d184b260b6669eed"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a8098d02138e27b57d184b260b6669eed">ast_cdr::next</a></div><div class="ttdeci">struct ast_cdr * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00325">cdr.h:325</a></div></div>
<div class="ttc" id="structast__cdr_html_a9ffb22045a8f14bef8f2137cd779ab25"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a9ffb22045a8f14bef8f2137cd779ab25">ast_cdr::varshead</a></div><div class="ttdeci">struct varshead varshead</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00323">cdr.h:323</a></div></div>
<div class="ttc" id="cdr_8c_html_ae23ebf460a645c91c4f3c471c3ecd925"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ae23ebf460a645c91c4f3c471c3ecd925">free_variables</a></div><div class="ttdeci">static void free_variables(struct varshead *headp)</div><div class="ttdoc">Delete all variables from a variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00777">cdr.c:777</a></div></div>
<div class="ttc" id="structast__cdr_html"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html">ast_cdr</a></div><div class="ttdoc">Responsible for call detail data. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00276">cdr.h:276</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a740f0c21a596d9d15654f31d8e74432f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a740f0c21a596d9d15654f31d8e74432f">&#9670;&nbsp;</a></span>ast_cdr_generic_unregister()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_cdr_generic_unregister </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d08/structbe__list.html">be_list</a> *&#160;</td>
          <td class="paramname"><em>generic_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02953">2953</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00034">ao2_container_count()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00279">AST_LOG_WARNING</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00884">AST_RWLIST_REMOVE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l02315">match()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00322">cdr_beitem::name</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02993">ast_cdr_modifier_unregister()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l02988">ast_cdr_unregister()</a>.</p>
<div class="fragment"><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;{</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dc6/structcdr__beitem.html">cdr_beitem</a> *<a class="code" href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;   <span class="keywordtype">int</span> active_count;</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(generic_list);</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(generic_list, match, list) {</div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, match-&gt;<a class="code" href="../../dc/dc6/structcdr__beitem.html#a9997d8ee2df51d18efed254a5aa016fd">name</a>)) {</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;      }</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;   }</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;   <span class="keywordflow">if</span> (!match) {</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(generic_list);</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;   }</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;</div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;   active_count = <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(<a class="code" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a>);</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;</div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;   <span class="keywordflow">if</span> (!match-&gt;suspended &amp;&amp; active_count != 0) {</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(generic_list);</div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2878d83e36d91850732bad997524e45e">AST_LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to unregister CDR backend %s; %d CDRs are still active\n&quot;</span>,</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;         <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, active_count);</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;   }</div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;</div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6091f0518f8b6f443fd9f5150f3ac407">AST_RWLIST_REMOVE</a>(generic_list, match, list);</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(generic_list);</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Unregistered &#39;%s&#39; CDR backend\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(match);</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a512cc40ce96c63b3d5c78040baa4c9cd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a></div><div class="ttdeci">int ao2_container_count(struct ao2_container *c)</div><div class="ttdoc">Returns the number of elements in a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00034">astobj2_container.c:34</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="logger_8h_html_a2878d83e36d91850732bad997524e45e"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a2878d83e36d91850732bad997524e45e">AST_LOG_WARNING</a></div><div class="ttdeci">#define AST_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00279">logger.h:279</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_a7dd0190efe1c61151a9dbab078bdb263"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a></div><div class="ttdeci">static int match(struct ast_sockaddr *addr, unsigned short callno, unsigned short dcallno, const struct chan_iax2_pvt *cur, int check_dcallno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l02315">chan_iax2.c:2315</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="structcdr__beitem_html"><div class="ttname"><a href="../../dc/dc6/structcdr__beitem.html">cdr_beitem</a></div><div class="ttdoc">Registration object for CDR backends. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00321">cdr.c:321</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structcdr__beitem_html_a9997d8ee2df51d18efed254a5aa016fd"><div class="ttname"><a href="../../dc/dc6/structcdr__beitem.html#a9997d8ee2df51d18efed254a5aa016fd">cdr_beitem::name</a></div><div class="ttdeci">char name[20]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00322">cdr.c:322</a></div></div>
<div class="ttc" id="cdr_8c_html_aabd874b0958bde3e08b5a876c2d1a395"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_master</div><div class="ttdoc">A container of the active master CDRs indexed by Party A channel uniqueid. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00365">cdr.c:365</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6091f0518f8b6f443fd9f5150f3ac407"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6091f0518f8b6f443fd9f5150f3ac407">AST_RWLIST_REMOVE</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00884">linkedlists.h:884</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5aba419cbee0fdecc0ada086857edaaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5aba419cbee0fdecc0ada086857edaaf">&#9670;&nbsp;</a></span>ast_cdr_get_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a>* ast_cdr_get_config </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtain the current CDR configuration. </p>
<dl class="section since"><dt>Since</dt><dd>12 The configuration is a ref counted object. The caller of this function must decrement the ref count when finished with the configuration.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>on error </td></tr>
    <tr><td class="paramname">The</td><td>current CDR configuration </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02826">2826</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00223">module_config::general</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d8e/test__cdr_8c_source.html#l02522">test_cdr_init_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;{</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a> *general;</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d57/structmodule__config.html">module_config</a> *mod_cfg;</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;   mod_cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(module_configs);</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;   <span class="keywordflow">if</span> (!mod_cfg) {</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;   }</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;   general = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>);</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(mod_cfg);</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>;</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="structmodule__config_html"><div class="ttname"><a href="../../db/d57/structmodule__config.html">module_config</a></div><div class="ttdoc">The configuration settings for this module. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00222">cdr.c:222</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__cdr__config_html"><div class="ttname"><a href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a></div><div class="ttdoc">The global options available for CDRs. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00264">cdr.h:264</a></div></div>
<div class="ttc" id="structmodule__config_html_a95699733ba47a55e25760adf5c51e59a"><div class="ttname"><a href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">module_config::general</a></div><div class="ttdeci">struct ast_cdr_config * general</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00223">cdr.c:223</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a90a1e29081a1827a2cc4c535ef07c8c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90a1e29081a1827a2cc4c535ef07c8c2">&#9670;&nbsp;</a></span>ast_cdr_getvar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_getvar </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>channel_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve a CDR variable from a channel's current CDR. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel_name</td><td>The name of the party A channel that the CDR is associated with </td></tr>
    <tr><td class="paramname">name</td><td>The name of the variable to retrieve </td></tr>
    <tr><td class="paramname">value</td><td>Buffer to hold the value </td></tr>
    <tr><td class="paramname">length</td><td>The size of the buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">non-zero</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03324">3324</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00290">AST_LOG_ERROR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03243">cdr_object_format_property()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03226">cdr_object_format_var_internal()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03312">cdr_object_get_by_name()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00736">cdr_object::last</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d8e/test__cdr_8c_source.html#l02120">AST_TEST_DEFINE()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00248">cdr_read_callback()</a>, and <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00222">cdr_retrieve_time()</a>.</p>
<div class="fragment"><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;{</div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr_obj;</div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;</div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>)) {</div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;   }</div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;</div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;   cdr = <a class="code" href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a>(channel_name);</div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to find CDR for channel %s\n&quot;</span>, channel_name);</div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;   }</div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;</div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cdr);</div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;</div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;   cdr_obj = cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a761f66169af05fad3479b4e80ddd6315">last</a>;</div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#a0cdc281513509f0204d371e2c51fd18e">cdr_object_format_property</a>(cdr_obj, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, length)) {</div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;      <span class="comment">/* Property failed; attempt variable */</span></div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a950160d2c2449f652f0342b416909030">cdr_object_format_var_internal</a>(cdr_obj, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, length);</div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;   }</div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;</div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cdr);</div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;</div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr);</div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a950160d2c2449f652f0342b416909030"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a950160d2c2449f652f0342b416909030">cdr_object_format_var_internal</a></div><div class="ttdeci">static void cdr_object_format_var_internal(struct cdr_object *cdr, const char *name, char *value, size_t length)</div><div class="ttdoc">Format a variable on a cdr_object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03226">cdr.c:3226</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_a2fdd5bff193a29ec6c7278da2851ea56"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a></div><div class="ttdeci">#define AST_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00290">logger.h:290</a></div></div>
<div class="ttc" id="cdr_8c_html_a0cdc281513509f0204d371e2c51fd18e"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a0cdc281513509f0204d371e2c51fd18e">cdr_object_format_property</a></div><div class="ttdeci">static int cdr_object_format_property(struct cdr_object *cdr_obj, const char *name, char *value, size_t length)</div><div class="ttdoc">Format one of the standard properties on a cdr_object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03243">cdr.c:3243</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="cdr_8c_html_a89dc924870cf4d81f8841a3b4f33d722"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a></div><div class="ttdeci">static struct cdr_object * cdr_object_get_by_name(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03312">cdr.c:3312</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="structcdr__object_html_a761f66169af05fad3479b4e80ddd6315"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a761f66169af05fad3479b4e80ddd6315">cdr_object::last</a></div><div class="ttdeci">struct cdr_object * last</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00736">cdr.c:736</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1819c3aecd7b59e2734810f52b219059"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1819c3aecd7b59e2734810f52b219059">&#9670;&nbsp;</a></span>ast_cdr_is_enabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_is_enabled </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return TRUE if CDR subsystem is enabled. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02861">2861</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d07/cdr_8h_source.html#l00220">CDR_ENABLED</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l01127">is_cdr_flag_set()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l06276">action_coresettings()</a>, and <a class="el" href="../../d5/d03/asterisk_8c_source.html#l00450">handle_show_settings()</a>.</p>
<div class="fragment"><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;{</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a>(<a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a>);</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;}</div><div class="ttc" id="cdr_8c_html_ab3ba06a4d885b31e4073c047d0dad02d"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a></div><div class="ttdeci">static int is_cdr_flag_set(unsigned int cdr_flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01127">cdr.c:1127</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00220">cdr.h:220</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0eef9f12c37f55a0ca10c9b7d3c50063"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0eef9f12c37f55a0ca10c9b7d3c50063">&#9670;&nbsp;</a></span>ast_cdr_message_router()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a>* ast_cdr_message_router </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the message router for the CDR engine. </p>
<p>This returns the <a class="el" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a> that the CDR engine uses for dispatching <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a> messages. The reference on the message router is bumped and must be released by the caller of this function.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>if the CDR engine is disabled or unavailable </td></tr>
    <tr><td class="paramname">the</td><td><a class="el" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a> otherwise </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04291">4291</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00371">stasis_router</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00604">cdr_prop_write()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00448">cdr_read()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00506">cdr_write()</a>, <a class="el" href="../../d2/db9/app__forkcdr_8c_source.html#l00134">forkcdr_exec()</a>, <a class="el" href="../../d1/da0/app__cdr_8c_source.html#l00246">load_module()</a>, <a class="el" href="../../d1/da0/app__cdr_8c_source.html#l00166">publish_app_cdr_message()</a>, and <a class="el" href="../../d1/da0/app__cdr_8c_source.html#l00233">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;{</div><div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>) {</div><div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;   }</div><div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;</div><div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>);</div><div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>;</div><div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a6d6d7bdd31cb1b6f84f2e447a7a2c6c2"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a></div><div class="ttdeci">static struct stasis_message_router * stasis_router</div><div class="ttdoc">Message router for stasis messages regarding channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00371">cdr.c:371</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a262bb97e8cbf833e7e6c1b80209b8abb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a262bb97e8cbf833e7e6c1b80209b8abb">&#9670;&nbsp;</a></span>ast_cdr_modifier_register()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_modifier_register </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d07/cdr_8h.html#a5f51cd53e2482c562f7f348d68f4243c">ast_cdrbe</a>&#160;</td>
          <td class="paramname"><em>be</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a CDR modifier. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>name associated with the particular CDR modifier </td></tr>
    <tr><td class="paramname">desc</td><td>description of the CDR modifier </td></tr>
    <tr><td class="paramname">be</td><td>function pointer to a CDR modifier</td></tr>
  </table>
  </dd>
</dl>
<p>Used to register a Call Detail Record modifier.</p>
<p>This gives modules a chance to modify CDR fields before they are dispatched to registered backends (odbc, syslog, etc).</p>
<dl class="section note"><dt>Note</dt><dd>The <em>modified</em> CDR will be passed to <b>all</b> registered backends for logging. For instance, if cdr_manager changes the CDR data, cdr_adaptive_odbc will also get the modified CDR.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02948">2948</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l02902">cdr_generic_register()</a>.</p>
<div class="fragment"><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;{</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/cdr_8c.html#a3c028476f292cc1ae19c7bc9f89ab4e3">cdr_generic_register</a>((<span class="keyword">struct</span> <a class="code" href="../../d5/d08/structbe__list.html">be_list</a> *)&amp;<a class="code" href="../../d6/d3d/structmo__list.html">mo_list</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a>);</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;}</div><div class="ttc" id="cdr__mysql_8c_html_a787f82faccb7c1f40a2539a14855601b"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a></div><div class="ttdeci">static const char desc[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00073">cdr_mysql.c:73</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a39730e90126aad69cfc9ca4d6fcdb3a6"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a></div><div class="ttdeci">char * be</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="cdr_8c_html_a3c028476f292cc1ae19c7bc9f89ab4e3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3c028476f292cc1ae19c7bc9f89ab4e3">cdr_generic_register</a></div><div class="ttdeci">static int cdr_generic_register(struct be_list *generic_list, const char *name, const char *desc, ast_cdrbe be)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02902">cdr.c:2902</a></div></div>
<div class="ttc" id="structmo__list_html"><div class="ttname"><a href="../../d6/d3d/structmo__list.html">mo_list</a></div><div class="ttdoc">List of registered modifiers. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00333">cdr.c:333</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structbe__list_html"><div class="ttname"><a href="../../d5/d08/structbe__list.html">be_list</a></div><div class="ttdoc">List of registered backends. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00330">cdr.c:330</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3bee4ca0e02f5bf17d5e32eca79d7998"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bee4ca0e02f5bf17d5e32eca79d7998">&#9670;&nbsp;</a></span>ast_cdr_modifier_unregister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_modifier_unregister </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister a CDR modifier. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>name of CDR modifier to unregister Unregisters a CDR modifier by its name</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>The modifier unregistered successfully </td></tr>
    <tr><td class="paramname">-1</td><td>The modifier could not be unregistered at this time </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02993">2993</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l02953">ast_cdr_generic_unregister()</a>.</p>
<div class="fragment"><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;{</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/cdr_8c.html#a740f0c21a596d9d15654f31d8e74432f">ast_cdr_generic_unregister</a>((<span class="keyword">struct</span> <a class="code" href="../../d5/d08/structbe__list.html">be_list</a> *)&amp;<a class="code" href="../../d6/d3d/structmo__list.html">mo_list</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a740f0c21a596d9d15654f31d8e74432f"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a740f0c21a596d9d15654f31d8e74432f">ast_cdr_generic_unregister</a></div><div class="ttdeci">static int ast_cdr_generic_unregister(struct be_list *generic_list, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02953">cdr.c:2953</a></div></div>
<div class="ttc" id="structmo__list_html"><div class="ttname"><a href="../../d6/d3d/structmo__list.html">mo_list</a></div><div class="ttdoc">List of registered modifiers. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00333">cdr.c:333</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structbe__list_html"><div class="ttname"><a href="../../d5/d08/structbe__list.html">be_list</a></div><div class="ttdoc">List of registered backends. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00330">cdr.c:330</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abdbcf7f728cbacea0b28bf9c51f99b92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdbcf7f728cbacea0b28bf9c51f99b92">&#9670;&nbsp;</a></span>ast_cdr_register()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_register </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d07/cdr_8h.html#a5f51cd53e2482c562f7f348d68f4243c">ast_cdrbe</a>&#160;</td>
          <td class="paramname"><em>be</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a CDR handling engine. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>name associated with the particular CDR handler </td></tr>
    <tr><td class="paramname">desc</td><td>description of the CDR handler </td></tr>
    <tr><td class="paramname">be</td><td>function pointer to a CDR handler Used to register a Call Detail Record handler. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02943">2943</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l02902">cdr_generic_register()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/ddb/cdr__adaptive__odbc_8c_source.html#l00802">load_module()</a>, <a class="el" href="../../d5/dd1/cdr__sqlite3__custom_8c_source.html#l00119">load_values_config()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00597">my_load_module()</a>, <a class="el" href="../../d8/d56/cdr__odbc_8c_source.html#l00193">odbc_load_module()</a>, and <a class="el" href="../../df/ddb/cdr__adaptive__odbc_8c_source.html#l00785">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;{</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/cdr_8c.html#a3c028476f292cc1ae19c7bc9f89ab4e3">cdr_generic_register</a>(&amp;<a class="code" href="../../d5/d08/structbe__list.html">be_list</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a>);</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;}</div><div class="ttc" id="cdr__mysql_8c_html_a787f82faccb7c1f40a2539a14855601b"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a></div><div class="ttdeci">static const char desc[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00073">cdr_mysql.c:73</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a39730e90126aad69cfc9ca4d6fcdb3a6"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a></div><div class="ttdeci">char * be</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="cdr_8c_html_a3c028476f292cc1ae19c7bc9f89ab4e3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3c028476f292cc1ae19c7bc9f89ab4e3">cdr_generic_register</a></div><div class="ttdeci">static int cdr_generic_register(struct be_list *generic_list, const char *name, const char *desc, ast_cdrbe be)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02902">cdr.c:2902</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structbe__list_html"><div class="ttname"><a href="../../d5/d08/structbe__list.html">be_list</a></div><div class="ttdoc">List of registered backends. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00330">cdr.c:330</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af73a38a457f60f9c8a86286b3280c4d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af73a38a457f60f9c8a86286b3280c4d8">&#9670;&nbsp;</a></span>ast_cdr_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_reset </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>channel_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keep_variables</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the detail record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel_name</td><td>The channel that the CDR is associated with </td></tr>
    <tr><td class="paramname">keep_variables</td><td>Keep the variables during the reset. If zero, variables are discarded during the reset.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">-1</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03598">3598</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l00719">cdr_object::answer</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02473">ast_var_delete()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01494">cdr_object_check_party_a_answer()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03312">cdr_object_get_by_name()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00720">cdr_object::end</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00721">cdr_object::lastevent</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00718">cdr_object::start</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00708">cdr_object_snapshot::variables</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da0/app__cdr_8c_source.html#l00131">appcdr_callback()</a>, and <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>.</p>
<div class="fragment"><div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;{</div><div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *vardata;</div><div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;</div><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;   cdr = <a class="code" href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a>(channel_name);</div><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;   }</div><div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;</div><div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cdr);</div><div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;   <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;      <span class="comment">/* clear variables */</span></div><div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;      <span class="keywordflow">if</span> (!keep_variables) {</div><div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;         <span class="keywordflow">while</span> ((vardata = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>, entries))) {</div><div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;            <a class="code" href="../../d9/de7/chanvars_8h.html#ae19fa022349aa0481f982ccced85d7ba">ast_var_delete</a>(vardata);</div><div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;         }</div><div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;         <span class="keywordflow">if</span> (cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>) {</div><div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;            <span class="keywordflow">while</span> ((vardata = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>, entries))) {</div><div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;               <a class="code" href="../../d9/de7/chanvars_8h.html#ae19fa022349aa0481f982ccced85d7ba">ast_var_delete</a>(vardata);</div><div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;            }</div><div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;         }</div><div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;      }</div><div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;</div><div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;      <span class="comment">/* Reset to initial state */</span></div><div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;      memset(&amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a>, 0, <span class="keyword">sizeof</span>(it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a>));</div><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;      memset(&amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>, 0, <span class="keyword">sizeof</span>(it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>));</div><div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;      memset(&amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>, 0, <span class="keyword">sizeof</span>(it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>));</div><div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;      it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;      it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">lastevent</a> = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a>;</div><div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a89033e69df1c30043f7f2dbdcfd3ec12">cdr_object_check_party_a_answer</a>(it_cdr);</div><div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;   }</div><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cdr);</div><div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;</div><div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr);</div><div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;}</div><div class="ttc" id="structcdr__object__snapshot_html_a2e42d02e62d0d56d645c901011bb767b"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">cdr_object_snapshot::variables</a></div><div class="ttdeci">struct varshead variables</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00708">cdr.c:708</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="structcdr__object_html_a621c14aed7c59835c5bc93bc88e8f3d9"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">cdr_object::answer</a></div><div class="ttdeci">struct timeval answer</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00719">cdr.c:719</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structcdr__object_html_ad80305b5e16da9c2675d5f057bd69386"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">cdr_object::start</a></div><div class="ttdeci">struct timeval start</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00718">cdr.c:718</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="cdr_8c_html_a89dc924870cf4d81f8841a3b4f33d722"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a></div><div class="ttdeci">static struct cdr_object * cdr_object_get_by_name(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03312">cdr.c:3312</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="structast__var__t_html"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html">ast_var_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00028">chanvars.h:28</a></div></div>
<div class="ttc" id="chanvars_8h_html_ae19fa022349aa0481f982ccced85d7ba"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#ae19fa022349aa0481f982ccced85d7ba">ast_var_delete</a></div><div class="ttdeci">void ast_var_delete(struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02473">extconf.c:2473</a></div></div>
<div class="ttc" id="structcdr__object_html_a7543dbd0c668cd22684e8d5aea0b5b93"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">cdr_object::lastevent</a></div><div class="ttdeci">struct timeval lastevent</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00721">cdr.c:721</a></div></div>
<div class="ttc" id="structcdr__object_html_af5249cf68dff13dd1dcca5929f4f3a5b"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">cdr_object::end</a></div><div class="ttdeci">struct timeval end</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00720">cdr.c:720</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="cdr_8c_html_a89033e69df1c30043f7f2dbdcfd3ec12"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a89033e69df1c30043f7f2dbdcfd3ec12">cdr_object_check_party_a_answer</a></div><div class="ttdeci">static void cdr_object_check_party_a_answer(struct cdr_object *cdr)</div><div class="ttdoc">Check to see if a CDR needs to be answered based on its Party A. Note that this is safe to call as mu...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01494">cdr.c:1494</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa16b81388933557fa1c47537897c24a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa16b81388933557fa1c47537897c24a9">&#9670;&nbsp;</a></span>ast_cdr_serialize_variables()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_serialize_variables </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>channel_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>delim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>sep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Serializes all the data and variables for a current CDR record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel_name</td><td>The channel to get the CDR for </td></tr>
    <tr><td class="paramname">buf</td><td>A buffer to use for formatting the data </td></tr>
    <tr><td class="paramname">delim</td><td>A delimeter to use to separate variable keys/values </td></tr>
    <tr><td class="paramname">sep</td><td>A separator to use between nestings </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">the</td><td>total number of serialized variables </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03353">3353</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00290">AST_LOG_ERROR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00653">ast_str_reset()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d9/df9/chanvars_8c_source.html#l00060">ast_var_name()</a>, <a class="el" href="../../d9/df9/chanvars_8c_source.html#l00080">ast_var_value()</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00220">CDR_ENABLED</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03243">cdr_object_format_property()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03312">cdr_object_get_by_name()</a>, <a class="el" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">ast_var_t::entries</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01127">is_cdr_flag_set()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../dd/d27/res__adsi_8c_source.html#l00968">total</a>, <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00614">var</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00708">cdr_object_snapshot::variables</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l01610">handle_showchan()</a>.</p>
<div class="fragment"><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;{</div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *variable;</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;   <span class="keywordtype">char</span> workspace[256];</div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dd/d27/res__adsi_8c.html#ac7af894858cf396a219d632f40afdc8d">total</a> = 0, x = 0, i;</div><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;</div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;   cdr = <a class="code" href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a>(channel_name);</div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a>(<a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a>)) {</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to find CDR for channel %s\n&quot;</span>, channel_name);</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;      }</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;   }</div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;</div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a>(*buf);</div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cdr);</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;   <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;      <span class="keywordflow">if</span> (++x &gt; 1) {</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(buf, 0, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;      }</div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;</div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>, variable, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>) {</div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;         <span class="keywordflow">if</span> (!(var = <a class="code" href="../../d9/de7/chanvars_8h.html#a356a31cd608ec07d3668dcd589be49d8">ast_var_name</a>(variable))) {</div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;         }</div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(buf, 0, <span class="stringliteral">&quot;level %d: %s%c%s%c&quot;</span>, x, var, delim, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(<a class="code" href="../../d9/de7/chanvars_8h.html#a8e0081172db71c5021d20706c50d959c">ast_var_value</a>(variable), <span class="stringliteral">&quot;&quot;</span>), sep) &lt; 0) {</div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Data Buffer Size Exceeded!\n&quot;</span>);</div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;         }</div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;         total++;</div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;      }</div><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;</div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;      <span class="keywordflow">for</span> (i = 0; <a class="code" href="../../dc/df2/cdr_8c.html#a2256ef5c96ee6f5634e183c3c99f42f8">cdr_readonly_vars</a>[i]; i++) {</div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#a0cdc281513509f0204d371e2c51fd18e">cdr_object_format_property</a>(it_cdr, <a class="code" href="../../dc/df2/cdr_8c.html#a2256ef5c96ee6f5634e183c3c99f42f8">cdr_readonly_vars</a>[i], workspace, <span class="keyword">sizeof</span>(workspace))) {</div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;            <span class="comment">/* Unhandled read-only CDR variable. */</span></div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;            <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;         }</div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;</div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(workspace)</div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;            &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(buf, 0, <span class="stringliteral">&quot;level %d: %s%c%s%c&quot;</span>, x, <a class="code" href="../../dc/df2/cdr_8c.html#a2256ef5c96ee6f5634e183c3c99f42f8">cdr_readonly_vars</a>[i], delim, workspace, sep) &lt; 0) {</div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Data Buffer Size Exceeded!\n&quot;</span>);</div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;         }</div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;         total++;</div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;      }</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;   }</div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cdr);</div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr);</div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d27/res__adsi_8c.html#ac7af894858cf396a219d632f40afdc8d">total</a>;</div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;}</div><div class="ttc" id="structcdr__object__snapshot_html_a2e42d02e62d0d56d645c901011bb767b"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">cdr_object_snapshot::variables</a></div><div class="ttdeci">struct varshead variables</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00708">cdr.c:708</a></div></div>
<div class="ttc" id="chanvars_8h_html_a8e0081172db71c5021d20706c50d959c"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#a8e0081172db71c5021d20706c50d959c">ast_var_value</a></div><div class="ttdeci">const char * ast_var_value(const struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df9/chanvars_8c_source.html#l00080">chanvars.c:80</a></div></div>
<div class="ttc" id="cdr_8c_html_ab3ba06a4d885b31e4073c047d0dad02d"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a></div><div class="ttdeci">static int is_cdr_flag_set(unsigned int cdr_flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01127">cdr.c:1127</a></div></div>
<div class="ttc" id="chanvars_8h_html_a356a31cd608ec07d3668dcd589be49d8"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#a356a31cd608ec07d3668dcd589be49d8">ast_var_name</a></div><div class="ttdeci">const char * ast_var_name(const struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df9/chanvars_8c_source.html#l00060">chanvars.c:60</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_a2fdd5bff193a29ec6c7278da2851ea56"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a></div><div class="ttdeci">#define AST_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00290">logger.h:290</a></div></div>
<div class="ttc" id="cdr_8c_html_a0cdc281513509f0204d371e2c51fd18e"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a0cdc281513509f0204d371e2c51fd18e">cdr_object_format_property</a></div><div class="ttdeci">static int cdr_object_format_property(struct cdr_object *cdr_obj, const char *name, char *value, size_t length)</div><div class="ttdoc">Format one of the standard properties on a cdr_object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03243">cdr.c:3243</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="cdr_8c_html_a2256ef5c96ee6f5634e183c3c99f42f8"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a2256ef5c96ee6f5634e183c3c99f42f8">cdr_readonly_vars</a></div><div class="ttdeci">static const char *const cdr_readonly_vars[]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03154">cdr.c:3154</a></div></div>
<div class="ttc" id="cdr_8c_html_a89dc924870cf4d81f8841a3b4f33d722"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a></div><div class="ttdeci">static struct cdr_object * cdr_object_get_by_name(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03312">cdr.c:3312</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__var__t_html"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html">ast_var_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00028">chanvars.h:28</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structast__var__t_html_a55d5c7988e3164d7310d88c67d97a1db"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">ast_var_t::entries</a></div><div class="ttdeci">struct ast_var_t::@249 entries</div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00220">cdr.h:220</a></div></div>
<div class="ttc" id="strings_8h_html_a8239b9ad10367bfc936e9b60ff7706a8"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a></div><div class="ttdeci">void ast_str_reset(struct ast_str *buf)</div><div class="ttdoc">Reset the content of a dynamic string. Useful before a series of ast_str_append. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00653">strings.h:653</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="res__adsi_8c_html_ac7af894858cf396a219d632f40afdc8d"><div class="ttname"><a href="../../dd/d27/res__adsi_8c.html#ac7af894858cf396a219d632f40afdc8d">total</a></div><div class="ttdeci">static int total</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d27/res__adsi_8c_source.html#l00968">res_adsi.c:968</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2e119010fb723a389d3aabc45c0f9435"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e119010fb723a389d3aabc45c0f9435">&#9670;&nbsp;</a></span>ast_cdr_set_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_cdr_set_config </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a> *&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the current CDR configuration. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>The new CDR configuration </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02840">2840</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00517">ao2_replace</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00203">cdr_set_debug_mode</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04488">cdr_toggle_runtime_options()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00223">module_config::general</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d8e/test__cdr_8c_source.html#l02534">test_cdr_cleanup_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;{</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d57/structmodule__config.html">module_config</a> *mod_cfg;</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;   <span class="keywordflow">if</span> (!config) {</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;   }</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;   mod_cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(module_configs);</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;   <span class="keywordflow">if</span> (!mod_cfg) {</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;   }</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;</div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a>(mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>, config);</div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a64c2a67abebb54e4d8defda57e4e9206">cdr_set_debug_mode</a>(mod_cfg);</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a77dc1728a978dd5a7d045800200be4cc">cdr_toggle_runtime_options</a>();</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(mod_cfg);</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a64c2a67abebb54e4d8defda57e4e9206"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a64c2a67abebb54e4d8defda57e4e9206">cdr_set_debug_mode</a></div><div class="ttdeci">#define cdr_set_debug_mode(mod_cfg)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00203">cdr.c:203</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="structmodule__config_html"><div class="ttname"><a href="../../db/d57/structmodule__config.html">module_config</a></div><div class="ttdoc">The configuration settings for this module. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00222">cdr.c:222</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa81c8462bd0574f4f9e09e71f2772f44"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a></div><div class="ttdeci">#define ao2_replace(dst, src)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00517">astobj2.h:517</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structmodule__config_html_a95699733ba47a55e25760adf5c51e59a"><div class="ttname"><a href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">module_config::general</a></div><div class="ttdeci">struct ast_cdr_config * general</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00223">cdr.c:223</a></div></div>
<div class="ttc" id="cdr_8c_html_a77dc1728a978dd5a7d045800200be4cc"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a77dc1728a978dd5a7d045800200be4cc">cdr_toggle_runtime_options</a></div><div class="ttdeci">static int cdr_toggle_runtime_options(void)</div><div class="ttdoc">Checks if CDRs are enabled and enables/disables the necessary options. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l04488">cdr.c:4488</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afcdba7928fed6e22df50a8d9b6c4cbf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcdba7928fed6e22df50a8d9b6c4cbf8">&#9670;&nbsp;</a></span>ast_cdr_set_property()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_set_property </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>channel_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37">ast_cdr_options</a>&#160;</td>
          <td class="paramname"><em>option</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a property on a CDR for a channel. </p>
<dl class="section since"><dt>Since</dt><dd>12 This function sets specific administrative properties on a CDR for a channel. This includes properties like preventing a CDR from being dispatched, to setting the channel as the preferred Party A in future CDRs. See enum ast_cdr_options for more information.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel_name</td><td>The CDR's channel </td></tr>
    <tr><td class="paramname">option</td><td>Option to apply to the CDR</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">1</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03548">3548</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03312">cdr_object_get_by_name()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00723">cdr_object::flags</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da0/app__cdr_8c_source.html#l00131">appcdr_callback()</a>, <a class="el" href="../../d7/d8e/test__cdr_8c_source.html#l02324">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00400">cdr_prop_write_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;{</div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;</div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;   cdr = <a class="code" href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a>(channel_name);</div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;   }</div><div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;</div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cdr);</div><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;   <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;      <span class="keywordflow">if</span> (it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a> == &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a>) {</div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;      }</div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;      <span class="comment">/* Note: in general, set the flags on both the CDR record as well as the</span></div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;<span class="comment">       * Party A. Sometimes all we have is the Party A to look at.</span></div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">flags</a>, option);</div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>, option);</div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;   }</div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cdr);</div><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;</div><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr);</div><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;}</div><div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="structcdr__object_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">cdr_object::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00723">cdr.c:723</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="cdr_8c_html_a89dc924870cf4d81f8841a3b4f33d722"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a></div><div class="ttdeci">static struct cdr_object * cdr_object_get_by_name(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03312">cdr.c:3312</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f50dd95a426c8a70710afc315164f04"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table finalized_state_fn_table</div><div class="ttdoc">The virtual table for the finalized state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00694">cdr.c:694</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1a5de28755e68ba2351a38210afc2423"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a5de28755e68ba2351a38210afc2423">&#9670;&nbsp;</a></span>ast_cdr_setuserfield()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_cdr_setuserfield </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>channel_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>userfield</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set CDR user field for channel (stored in CDR) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel_name</td><td>The name of the channel that owns the CDR </td></tr>
    <tr><td class="paramname">userfield</td><td>The user field to set </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03477">3477</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01743">ao2_callback_data</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03312">cdr_object_get_by_name()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03455">cdr_object_update_party_b_userfield_cb()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03450">party_b_userfield_update::channel_name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01053">OBJ_MULTIPLE</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01048">OBJ_NODATA</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00706">cdr_object_snapshot::userfield</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03451">party_b_userfield_update::userfield</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d8e/test__cdr_8c_source.html#l02120">AST_TEST_DEFINE()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00357">cdr_write_callback()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l22622">handle_request_info()</a>, and <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00693">start_monitor_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;{</div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d6c/structparty__b__userfield__update.html">party_b_userfield_update</a> party_b_info = {</div><div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;      .<a class="code" href="../../dc/d6c/structparty__b__userfield__update.html#a52e3444b72c993e4da5424384673bab7">channel_name</a> = <a class="code" href="../../dc/d6c/structparty__b__userfield__update.html#a52e3444b72c993e4da5424384673bab7">channel_name</a>,</div><div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;      .userfield = <a class="code" href="../../dc/d6c/structparty__b__userfield__update.html#a3a9a77adeaf7170b7d2dec43d3344970">userfield</a>,</div><div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;   };</div><div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;</div><div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;   <span class="comment">/* Handle Party A */</span></div><div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;   cdr = <a class="code" href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a>(channel_name);</div><div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;   <span class="keywordflow">if</span> (cdr) {</div><div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cdr);</div><div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;      <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;         <span class="keywordflow">if</span> (it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a> == &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a> &amp;&amp; it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;         }</div><div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>, userfield,</div><div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;            <span class="keyword">sizeof</span>(it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>));</div><div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;      }</div><div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cdr);</div><div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;   }</div><div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;</div><div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;   <span class="comment">/* Handle Party B */</span></div><div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a63fd831fe48aed32d3ef992ad8e45293">ao2_callback_data</a>(<a class="code" href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>,</div><div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a9996dd8c278c3be2f3a04bacb316f053">cdr_object_update_party_b_userfield_cb</a>, (<span class="keywordtype">char</span> *) party_b_info.<a class="code" href="../../dc/d6c/structparty__b__userfield__update.html#a52e3444b72c993e4da5424384673bab7">channel_name</a>,</div><div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;      &amp;party_b_info);</div><div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;</div><div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr);</div><div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a9996dd8c278c3be2f3a04bacb316f053"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a9996dd8c278c3be2f3a04bacb316f053">cdr_object_update_party_b_userfield_cb</a></div><div class="ttdeci">static int cdr_object_update_party_b_userfield_cb(void *obj, void *arg, void *data, int flags)</div><div class="ttdoc">Callback used to update the userfield on Party B on all CDRs. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03455">cdr.c:3455</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01048">astobj2.h:1048</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="structparty__b__userfield__update_html_a3a9a77adeaf7170b7d2dec43d3344970"><div class="ttname"><a href="../../dc/d6c/structparty__b__userfield__update.html#a3a9a77adeaf7170b7d2dec43d3344970">party_b_userfield_update::userfield</a></div><div class="ttdeci">const char * userfield</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03451">cdr.c:3451</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a2d480b13820a3a97582a1a138036aa25"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">cdr_object_snapshot::userfield</a></div><div class="ttdeci">char userfield[AST_MAX_USER_FIELD]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00706">cdr.c:706</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="cdr_8c_html_a89dc924870cf4d81f8841a3b4f33d722"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a></div><div class="ttdeci">static struct cdr_object * cdr_object_get_by_name(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03312">cdr.c:3312</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="structparty__b__userfield__update_html_a52e3444b72c993e4da5424384673bab7"><div class="ttname"><a href="../../dc/d6c/structparty__b__userfield__update.html#a52e3444b72c993e4da5424384673bab7">party_b_userfield_update::channel_name</a></div><div class="ttdeci">const char * channel_name</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03450">cdr.c:3450</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="astobj2_8h_html_a63fd831fe48aed32d3ef992ad8e45293"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a63fd831fe48aed32d3ef992ad8e45293">ao2_callback_data</a></div><div class="ttdeci">#define ao2_callback_data(container, flags, cb_fn, arg, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01743">astobj2.h:1743</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f50dd95a426c8a70710afc315164f04"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table finalized_state_fn_table</div><div class="ttdoc">The virtual table for the finalized state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00694">cdr.c:694</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="cdr_8c_html_abb1aee82330e86d734034f092559cc69"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_all</div><div class="ttdoc">A container of all active CDRs with a Party B indexed by Party B channel name. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00368">cdr.c:368</a></div></div>
<div class="ttc" id="structparty__b__userfield__update_html"><div class="ttname"><a href="../../dc/d6c/structparty__b__userfield__update.html">party_b_userfield_update</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03449">cdr.c:3449</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01053">astobj2.h:1053</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4cb15fc5160b2842ef7aa5b4f238b7fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cb15fc5160b2842ef7aa5b4f238b7fb">&#9670;&nbsp;</a></span>ast_cdr_setvar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_setvar </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>channel_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a variable on a CDR. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel_name</td><td>The channel to set the variable on </td></tr>
    <tr><td class="paramname">name</td><td>The name of the variable to set </td></tr>
    <tr><td class="paramname">value</td><td>The value of the variable to set</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">non-zero</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03178">3178</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01716">ao2_callback</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00290">AST_LOG_ERROR</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03126">cdr_object_select_all_by_name_cb()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01053">OBJ_MULTIPLE</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01262">set_variable()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00708">cdr_object_snapshot::variables</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d8e/test__cdr_8c_source.html#l02120">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00357">cdr_write_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;{</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> *it_cdrs;</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;   <span class="keywordtype">char</span> *arg = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(channel_name);</div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;   <span class="keywordflow">for</span> (x = 0; <a class="code" href="../../dc/df2/cdr_8c.html#a2256ef5c96ee6f5634e183c3c99f42f8">cdr_readonly_vars</a>[x]; x++) {</div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a2256ef5c96ee6f5634e183c3c99f42f8">cdr_readonly_vars</a>[x])) {</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Attempt to set the &#39;%s&#39; read-only variable!\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;      }</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;   }</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;</div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;   it_cdrs = <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(<a class="code" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a4b0de636092270f4f2b0ecff29eb6135">cdr_object_select_all_by_name_cb</a>, arg);</div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;   <span class="keywordflow">if</span> (!it_cdrs) {</div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to find CDR for channel %s\n&quot;</span>, channel_name);</div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;   }</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;</div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;   <span class="keywordflow">for</span> (; (cdr = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(it_cdrs)); <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cdr), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr)) {</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cdr);</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;      <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../dd/de6/structvarshead.html">varshead</a> *headp = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;</div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;         <span class="keywordflow">if</span> (it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a> == &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a> &amp;&amp; it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;         }</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(channel_name, it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>)) {</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;            headp = &amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>;</div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a></div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;            &amp;&amp; !strcasecmp(channel_name, it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>)) {</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;            headp = &amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>;</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;         }</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;         <span class="keywordflow">if</span> (headp) {</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;            <a class="code" href="../../dc/df2/cdr_8c.html#a89071964424cbe2e7d79b8682cc452df">set_variable</a>(headp, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;         }</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;      }</div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;   }</div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(it_cdrs);</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a2e42d02e62d0d56d645c901011bb767b"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">cdr_object_snapshot::variables</a></div><div class="ttdeci">struct varshead variables</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00708">cdr.c:708</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="astobj2_8h_html_a47857055118a703ae87ea5ebaf4842ed"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a></div><div class="ttdeci">#define ao2_callback(c, flags, cb_fn, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01716">astobj2.h:1716</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="cdr_8c_html_a89071964424cbe2e7d79b8682cc452df"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a89071964424cbe2e7d79b8682cc452df">set_variable</a></div><div class="ttdeci">static void set_variable(struct varshead *headp, const char *name, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01262">cdr.c:1262</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr_8c_html_a4b0de636092270f4f2b0ecff29eb6135"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a4b0de636092270f4f2b0ecff29eb6135">cdr_object_select_all_by_name_cb</a></div><div class="ttdeci">static int cdr_object_select_all_by_name_cb(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03126">cdr.c:3126</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_a2fdd5bff193a29ec6c7278da2851ea56"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a></div><div class="ttdeci">#define AST_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00290">logger.h:290</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="cdr_8c_html_a2256ef5c96ee6f5634e183c3c99f42f8"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a2256ef5c96ee6f5634e183c3c99f42f8">cdr_readonly_vars</a></div><div class="ttdeci">static const char *const cdr_readonly_vars[]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03154">cdr.c:3154</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="cdr_8c_html_aabd874b0958bde3e08b5a876c2d1a395"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_master</div><div class="ttdoc">A container of the active master CDRs indexed by Party A channel uniqueid. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00365">cdr.c:365</a></div></div>
<div class="ttc" id="structvarshead_html"><div class="ttname"><a href="../../dd/de6/structvarshead.html">varshead</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00034">chanvars.h:34</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f50dd95a426c8a70710afc315164f04"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table finalized_state_fn_table</div><div class="ttdoc">The virtual table for the finalized state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00694">cdr.c:694</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01053">astobj2.h:1053</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a915cbbaeaf06834cc96f4b8e3c224251"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a915cbbaeaf06834cc96f4b8e3c224251">&#9670;&nbsp;</a></span>ast_cdr_unregister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_unregister </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister a CDR handling engine. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>name of CDR handler to unregister Unregisters a CDR by it's name</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>The backend unregistered successfully </td></tr>
    <tr><td class="paramname">-1</td><td>The backend could not be unregistered at this time </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02988">2988</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l02953">ast_cdr_generic_unregister()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00246">load_module()</a>, <a class="el" href="../../d5/dd1/cdr__sqlite3__custom_8c_source.html#l00119">load_values_config()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00383">my_unload_module()</a>, <a class="el" href="../../d4/d4c/cdr__csv_8c_source.html#l00344">reload()</a>, <a class="el" href="../../d0/d2a/cdr__tds_8c_source.html#l00442">tds_unload_module()</a>, and <a class="el" href="../../df/ddb/cdr__adaptive__odbc_8c_source.html#l00785">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;{</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/cdr_8c.html#a740f0c21a596d9d15654f31d8e74432f">ast_cdr_generic_unregister</a>(&amp;<a class="code" href="../../d5/d08/structbe__list.html">be_list</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a740f0c21a596d9d15654f31d8e74432f"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a740f0c21a596d9d15654f31d8e74432f">ast_cdr_generic_unregister</a></div><div class="ttdeci">static int ast_cdr_generic_unregister(struct be_list *generic_list, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02953">cdr.c:2953</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structbe__list_html"><div class="ttname"><a href="../../d5/d08/structbe__list.html">be_list</a></div><div class="ttdoc">List of registered backends. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00330">cdr.c:330</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04651">4651</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="a5407117331cea1d5aad43894168d1180"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5407117331cea1d5aad43894168d1180">&#9670;&nbsp;</a></span>base_process_bridge_enter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316">process_bridge_enter_results</a> base_process_bridge_enter </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01611">1611</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l00407">BRIDGE_ENTER_NEED_CDR</a>.</p>
<div class="fragment"><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;{</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;   <span class="comment">/* Base process bridge enter simply indicates that we can&#39;t handle it */</span></div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316ab55afa346f826bd34c53c5d08acdbfae">BRIDGE_ENTER_NEED_CDR</a>;</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a3bdd3cd3f0f0a84448a50181c3cee316ab55afa346f826bd34c53c5d08acdbfae"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316ab55afa346f826bd34c53c5d08acdbfae">BRIDGE_ENTER_NEED_CDR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00407">cdr.c:407</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a377ae573cc6f72eabf85a177b7c6b474"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a377ae573cc6f72eabf85a177b7c6b474">&#9670;&nbsp;</a></span>base_process_bridge_leave()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int base_process_bridge_leave </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01601">1601</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;{</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a5690606c82b9a2854eadc611e1574cc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5690606c82b9a2854eadc611e1574cc2">&#9670;&nbsp;</a></span>base_process_dial_end()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int base_process_dial_end </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>caller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>peer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dial_status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01606">1606</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;{</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a5a0eefa699d34246b28d3b4bf25df8c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a0eefa699d34246b28d3b4bf25df8c9">&#9670;&nbsp;</a></span>base_process_parked_channel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int base_process_parked_channel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d47/structast__parked__call__payload.html">ast_parked_call_payload</a> *&#160;</td>
          <td class="paramname"><em>parking_info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01617">1617</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00247">AST_CDR_LOCK_APP</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00723">cdr_object::flags</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../d2/d33/parking_8h_source.html#l00060">ast_parked_call_payload::parkee</a>, <a class="el" href="../../d2/d33/parking_8h_source.html#l00069">ast_parked_call_payload::parkinglot</a>, <a class="el" href="../../d2/d33/parking_8h_source.html#l00065">ast_parked_call_payload::parkingspace</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00437">cdr_object_fn_table::process_party_a</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>.</p>
<div class="fragment"><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;{</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;   <span class="keywordtype">char</span> park_info[128];</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(!strcasecmp(parking_info-&gt;<a class="code" href="../../d0/d47/structast__parked__call__payload.html#abf322ebc13d3689cf5a5e81e4569c602">parkee</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>));</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;   <span class="comment">/* Update Party A information regardless */</span></div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;   cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a20c04201646afd8fbeb4a3b001e54311">process_party_a</a>(cdr, parking_info-&gt;<a class="code" href="../../d0/d47/structast__parked__call__payload.html#abf322ebc13d3689cf5a5e81e4569c602">parkee</a>);</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;   <span class="comment">/* Fake out where we&#39;re parked */</span></div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cdr, appl, <span class="stringliteral">&quot;Park&quot;</span>);</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;   snprintf(park_info, <span class="keyword">sizeof</span>(park_info), <span class="stringliteral">&quot;%s:%u&quot;</span>, parking_info-&gt;<a class="code" href="../../d0/d47/structast__parked__call__payload.html#a85f78688c172cdbdfe2c3af48c470b35">parkinglot</a>, parking_info-&gt;<a class="code" href="../../d0/d47/structast__parked__call__payload.html#a3c927af64370b9380770ec2ea0ed9a89">parkingspace</a>);</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cdr, data, park_info);</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;   <span class="comment">/* Prevent any further changes to the App/Data fields for this record */</span></div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a13988d4b84386aec3e34c0d2459dd0e1">AST_CDR_LOCK_APP</a>);</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="structcdr__object__fn__table_html_a20c04201646afd8fbeb4a3b001e54311"><div class="ttname"><a href="../../d1/d0f/structcdr__object__fn__table.html#a20c04201646afd8fbeb4a3b001e54311">cdr_object_fn_table::process_party_a</a></div><div class="ttdeci">int(*const process_party_a)(struct cdr_object *cdr, struct ast_channel_snapshot *snapshot)</div><div class="ttdoc">Process a Party A update for the cdr_object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00437">cdr.c:437</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="structcdr__object_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">cdr_object::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00723">cdr.c:723</a></div></div>
<div class="ttc" id="structast__parked__call__payload_html_abf322ebc13d3689cf5a5e81e4569c602"><div class="ttname"><a href="../../d0/d47/structast__parked__call__payload.html#abf322ebc13d3689cf5a5e81e4569c602">ast_parked_call_payload::parkee</a></div><div class="ttdeci">struct ast_channel_snapshot * parkee</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d33/parking_8h_source.html#l00060">parking.h:60</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37a13988d4b84386aec3e34c0d2459dd0e1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a13988d4b84386aec3e34c0d2459dd0e1">AST_CDR_LOCK_APP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00247">cdr.h:247</a></div></div>
<div class="ttc" id="structast__parked__call__payload_html_a3c927af64370b9380770ec2ea0ed9a89"><div class="ttname"><a href="../../d0/d47/structast__parked__call__payload.html#a3c927af64370b9380770ec2ea0ed9a89">ast_parked_call_payload::parkingspace</a></div><div class="ttdeci">unsigned int parkingspace</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d33/parking_8h_source.html#l00065">parking.h:65</a></div></div>
<div class="ttc" id="structast__parked__call__payload_html_a85f78688c172cdbdfe2c3af48c470b35"><div class="ttname"><a href="../../d0/d47/structast__parked__call__payload.html#a85f78688c172cdbdfe2c3af48c470b35">ast_parked_call_payload::parkinglot</a></div><div class="ttdeci">const ast_string_field parkinglot</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d33/parking_8h_source.html#l00069">parking.h:69</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8eaa5eabaf72c8c63f40f6b03f196573"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8eaa5eabaf72c8c63f40f6b03f196573">&#9670;&nbsp;</a></span>base_process_party_a()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int base_process_party_a </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>snapshot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01540">1540</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00070">ast_channel_snapshot_dialplan::appl</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::appl</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00247">AST_CDR_LOCK_APP</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01059">AST_FLAG_SUBROUTINE_EXEC</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01155">AST_SOFTHANGUP_HANGUP_EXEC</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00224">CDR_END_BEFORE_H_EXTEN</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01494">cdr_object_check_party_a_answer()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01477">cdr_object_check_party_a_hangup()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01440">cdr_object_finalize()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01531">cdr_object_swap_snapshot()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00070">ast_channel_snapshot_dialplan::context</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::context</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00070">ast_channel_snapshot_dialplan::data</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::data</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00151">ast_channel_snapshot::dialplan</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00070">ast_channel_snapshot_dialplan::exten</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00118">exten</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::exten</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00155">ast_channel_snapshot::flags</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00723">cdr_object::flags</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01127">is_cdr_flag_set()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00122">ast_channel_snapshot_peer::linkedid</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00316">ast_cdr::linkedid</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::linkedid</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00147">ast_channel_snapshot::peer</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, and <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00156">ast_channel_snapshot::softhangup_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l01951">dialed_pending_state_process_party_a()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l01653">single_state_process_dial_begin()</a>.</p>
<div class="fragment"><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;{</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(strcasecmp(snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>) == 0);</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;   <span class="comment">/* Finalize the CDR if we&#39;re in hangup logic and we&#39;re set to do so */</span></div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#acd7e028035da37eabb4e2dd1ca495f0c">softhangup_flags</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a33d9271d8d892501de8c9536382d71ea">AST_SOFTHANGUP_HANGUP_EXEC</a>)</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;      &amp;&amp; <a class="code" href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a>(<a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba951b6a2ed4e5418e5e7bdab6f37061a1">CDR_END_BEFORE_H_EXTEN</a>)) {</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a34a146403fab13026f6e302c753be741">cdr_object_finalize</a>(cdr);</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;   }</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;<span class="comment">    * Only record the context and extension if we aren&#39;t in a subroutine, or if</span></div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;<span class="comment">    * we are executing hangup logic.</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ad43a4f80f859e0fa542fd4fd6cb003df">AST_FLAG_SUBROUTINE_EXEC</a>)</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;      || <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#acd7e028035da37eabb4e2dd1ca495f0c">softhangup_flags</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a33d9271d8d892501de8c9536382d71ea">AST_SOFTHANGUP_HANGUP_EXEC</a>)) {</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;      <span class="keywordflow">if</span> (strcmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7faec841658b88ad0cfbc684853acad3">context</a>, snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#a7faec841658b88ad0cfbc684853acad3">context</a>)) {</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;         <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cdr, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#a7faec841658b88ad0cfbc684853acad3">context</a>);</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;      }</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;      <span class="keywordflow">if</span> (strcmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#aaee31f4cc48985167efcd38ab252dac8">exten</a>, snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#aaee31f4cc48985167efcd38ab252dac8">exten</a>)) {</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;         <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cdr, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#aaee31f4cc48985167efcd38ab252dac8">exten</a>);</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;      }</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;   }</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a5f169319f8865c4f86897f944ae0f00c">cdr_object_swap_snapshot</a>(&amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>, snapshot);</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;   <span class="comment">/* When Party A is originated to an application and the application exits, the stack</span></div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;<span class="comment">    * will attempt to clear the application and restore the dummy originate application</span></div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;<span class="comment">    * of &quot;AppDialX&quot;. Prevent that, and any other application changes we might not want</span></div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;<span class="comment">    * here.</span></div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a13988d4b84386aec3e34c0d2459dd0e1">AST_CDR_LOCK_APP</a>)</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;      &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#af535fe520577fb6b8795dea539bd0230">appl</a>)</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;      &amp;&amp; (strncasecmp(snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#af535fe520577fb6b8795dea539bd0230">appl</a>, <span class="stringliteral">&quot;appdial&quot;</span>, 7) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af535fe520577fb6b8795dea539bd0230">appl</a>))) {</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;      <span class="keywordflow">if</span> (strcmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af535fe520577fb6b8795dea539bd0230">appl</a>, snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#af535fe520577fb6b8795dea539bd0230">appl</a>)) {</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;         <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cdr, appl, snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#af535fe520577fb6b8795dea539bd0230">appl</a>);</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      }</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;      <span class="keywordflow">if</span> (strcmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7870f447ef3c43ebf148da15363b25dd">data</a>, snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#a7870f447ef3c43ebf148da15363b25dd">data</a>)) {</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;         <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cdr, data, snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#a7870f447ef3c43ebf148da15363b25dd">data</a>);</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;      }</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      <span class="comment">/* Dial (app_dial) is a special case. Because pre-dial handlers, which</span></div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;<span class="comment">       * execute before the dial begins, will alter the application/data to</span></div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;<span class="comment">       * something people typically don&#39;t want to see, if we see a channel enter</span></div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;<span class="comment">       * into Dial here, we set the appl/data accordingly and lock it.</span></div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;      <span class="keywordflow">if</span> (!strcmp(snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#af535fe520577fb6b8795dea539bd0230">appl</a>, <span class="stringliteral">&quot;Dial&quot;</span>)) {</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a13988d4b84386aec3e34c0d2459dd0e1">AST_CDR_LOCK_APP</a>);</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;      }</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;   }</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;   <span class="keywordflow">if</span> (strcmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4b8afba70b197df95b91f884a12c3480">linkedid</a>, snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a91ff51905af3f89b6aab38f42d08adea">peer</a>-&gt;<a class="code" href="../../d5/d88/structast__channel__snapshot__peer.html#afb48324a18171a46c6f11b529cddcd40">linkedid</a>)) {</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cdr, linkedid, snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a91ff51905af3f89b6aab38f42d08adea">peer</a>-&gt;<a class="code" href="../../d5/d88/structast__channel__snapshot__peer.html#afb48324a18171a46c6f11b529cddcd40">linkedid</a>);</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;   }</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a89033e69df1c30043f7f2dbdcfd3ec12">cdr_object_check_party_a_answer</a>(cdr);</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a6c51536e3755c5538d1c6e9f804f8457">cdr_object_check_party_a_hangup</a>(cdr);</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot__dialplan_html_a7870f447ef3c43ebf148da15363b25dd"><div class="ttname"><a href="../../dc/d3d/structast__channel__snapshot__dialplan.html#a7870f447ef3c43ebf148da15363b25dd">ast_channel_snapshot_dialplan::data</a></div><div class="ttdeci">const ast_string_field data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00070">stasis_channels.h:70</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba951b6a2ed4e5418e5e7bdab6f37061a1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba951b6a2ed4e5418e5e7bdab6f37061a1">CDR_END_BEFORE_H_EXTEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00224">cdr.h:224</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="cdr_8c_html_ab3ba06a4d885b31e4073c047d0dad02d"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a></div><div class="ttdeci">static int is_cdr_flag_set(unsigned int cdr_flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01127">cdr.c:1127</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5ad43a4f80f859e0fa542fd4fd6cb003df"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ad43a4f80f859e0fa542fd4fd6cb003df">AST_FLAG_SUBROUTINE_EXEC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01059">channel.h:1059</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="structcdr__object_html_aaee31f4cc48985167efcd38ab252dac8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#aaee31f4cc48985167efcd38ab252dac8">cdr_object::exten</a></div><div class="ttdeci">const ast_string_field exten</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_a5be1fb9b43b051b087f6952b6346909a"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">ast_channel_snapshot::dialplan</a></div><div class="ttdeci">struct ast_channel_snapshot_dialplan * dialplan</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00151">stasis_channels.h:151</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structcdr__object_html_af535fe520577fb6b8795dea539bd0230"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af535fe520577fb6b8795dea539bd0230">cdr_object::appl</a></div><div class="ttdeci">const ast_string_field appl</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structcdr__object_html_a7faec841658b88ad0cfbc684853acad3"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7faec841658b88ad0cfbc684853acad3">cdr_object::context</a></div><div class="ttdeci">const ast_string_field context</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structast__channel__snapshot__dialplan_html_a7faec841658b88ad0cfbc684853acad3"><div class="ttname"><a href="../../dc/d3d/structast__channel__snapshot__dialplan.html#a7faec841658b88ad0cfbc684853acad3">ast_channel_snapshot_dialplan::context</a></div><div class="ttdeci">const ast_string_field context</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00070">stasis_channels.h:70</a></div></div>
<div class="ttc" id="structcdr__object_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">cdr_object::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00723">cdr.c:723</a></div></div>
<div class="ttc" id="structast__channel__snapshot__dialplan_html_af535fe520577fb6b8795dea539bd0230"><div class="ttname"><a href="../../dc/d3d/structast__channel__snapshot__dialplan.html#af535fe520577fb6b8795dea539bd0230">ast_channel_snapshot_dialplan::appl</a></div><div class="ttdeci">const ast_string_field appl</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00070">stasis_channels.h:70</a></div></div>
<div class="ttc" id="structcdr__object_html_a4b8afba70b197df95b91f884a12c3480"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4b8afba70b197df95b91f884a12c3480">cdr_object::linkedid</a></div><div class="ttdeci">const ast_string_field linkedid</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structast__channel__snapshot__dialplan_html_aaee31f4cc48985167efcd38ab252dac8"><div class="ttname"><a href="../../dc/d3d/structast__channel__snapshot__dialplan.html#aaee31f4cc48985167efcd38ab252dac8">ast_channel_snapshot_dialplan::exten</a></div><div class="ttdeci">const ast_string_field exten</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00070">stasis_channels.h:70</a></div></div>
<div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37a13988d4b84386aec3e34c0d2459dd0e1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a13988d4b84386aec3e34c0d2459dd0e1">AST_CDR_LOCK_APP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00247">cdr.h:247</a></div></div>
<div class="ttc" id="structast__channel__snapshot__peer_html_afb48324a18171a46c6f11b529cddcd40"><div class="ttname"><a href="../../d5/d88/structast__channel__snapshot__peer.html#afb48324a18171a46c6f11b529cddcd40">ast_channel_snapshot_peer::linkedid</a></div><div class="ttdeci">char * linkedid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00122">stasis_channels.h:122</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_acd7e028035da37eabb4e2dd1ca495f0c"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#acd7e028035da37eabb4e2dd1ca495f0c">ast_channel_snapshot::softhangup_flags</a></div><div class="ttdeci">struct ast_flags softhangup_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00156">stasis_channels.h:156</a></div></div>
<div class="ttc" id="structcdr__object_html_a7870f447ef3c43ebf148da15363b25dd"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7870f447ef3c43ebf148da15363b25dd">cdr_object::data</a></div><div class="ttdeci">const ast_string_field data</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="cdr_8c_html_a6c51536e3755c5538d1c6e9f804f8457"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a6c51536e3755c5538d1c6e9f804f8457">cdr_object_check_party_a_hangup</a></div><div class="ttdeci">static void cdr_object_check_party_a_hangup(struct cdr_object *cdr)</div><div class="ttdoc">Check to see if a CDR needs to move to the finalized state because its Party A hungup. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01477">cdr.c:1477</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#aec78000b2897c094f68ed72559e18acd">ast_channel_snapshot::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00155">stasis_channels.h:155</a></div></div>
<div class="ttc" id="cdr_8c_html_a89033e69df1c30043f7f2dbdcfd3ec12"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a89033e69df1c30043f7f2dbdcfd3ec12">cdr_object_check_party_a_answer</a></div><div class="ttdeci">static void cdr_object_check_party_a_answer(struct cdr_object *cdr)</div><div class="ttdoc">Check to see if a CDR needs to be answered based on its Party A. Note that this is safe to call as mu...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01494">cdr.c:1494</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f169319f8865c4f86897f944ae0f00c"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f169319f8865c4f86897f944ae0f00c">cdr_object_swap_snapshot</a></div><div class="ttdeci">static void cdr_object_swap_snapshot(struct cdr_object_snapshot *old_snapshot, struct ast_channel_snapshot *new_snapshot)</div><div class="ttdoc">Swap an old cdr_object_snapshot&amp;#39;s ast_channel_snapshot for a new ast_channel_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01531">cdr.c:1531</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_a91ff51905af3f89b6aab38f42d08adea"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#a91ff51905af3f89b6aab38f42d08adea">ast_channel_snapshot::peer</a></div><div class="ttdeci">struct ast_channel_snapshot_peer * peer</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00147">stasis_channels.h:147</a></div></div>
<div class="ttc" id="cdr_8c_html_a34a146403fab13026f6e302c753be741"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a34a146403fab13026f6e302c753be741">cdr_object_finalize</a></div><div class="ttdeci">static void cdr_object_finalize(struct cdr_object *cdr)</div><div class="ttdoc">Finalize a CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01440">cdr.c:1440</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a33d9271d8d892501de8c9536382d71ea"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a33d9271d8d892501de8c9536382d71ea">AST_SOFTHANGUP_HANGUP_EXEC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01155">channel.h:1155</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abbc6a65e2dece6fa788aebe847752e3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbc6a65e2dece6fa788aebe847752e3c">&#9670;&nbsp;</a></span>bridge_candidate_add_to_cdr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_candidate_add_to_cdr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a> *&#160;</td>
          <td class="paramname"><em>party_b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02472">2472</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::bridge</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00949">cdr_all_relink()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00210">CDR_DEBUG</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01494">cdr_object_check_party_a_answer()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01075">cdr_object_create_and_append()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00791">cdr_object_snapshot_copy()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00821">cdr_object_transition_state()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00721">cdr_object::lastevent</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02503">bridge_candidate_process()</a>.</p>
<div class="fragment"><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;{</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *new_cdr;</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;   new_cdr = <a class="code" href="../../dc/df2/cdr_8c.html#af90187a3766c8b50aa4b984a62e30219">cdr_object_create_and_append</a>(cdr, &amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">lastevent</a>);</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;   <span class="keywordflow">if</span> (!new_cdr) {</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;   }</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a9409d6642fce1018ef347f2fcece7eea">cdr_object_snapshot_copy</a>(&amp;new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>, party_b);</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a9b92f90cd704735201d9c840842bd0bc">cdr_all_relink</a>(new_cdr);</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a89033e69df1c30043f7f2dbdcfd3ec12">cdr_object_check_party_a_answer</a>(new_cdr);</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(new_cdr, <a class="code" href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">bridge</a>, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">bridge</a>);</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a>(new_cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a4213ec53168931f1d566f40e32870c4c">bridge_state_fn_table</a>);</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>(<span class="stringliteral">&quot;%p - Party A %s has new Party B %s\n&quot;</span>,</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;      new_cdr, new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>,</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;      party_b-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="cdr_8c_html_a8052195443a9cb5835d7d2b3ab7279aa"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a></div><div class="ttdeci">#define CDR_DEBUG(fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00210">cdr.c:210</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="structcdr__object_html_a7543dbd0c668cd22684e8d5aea0b5b93"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">cdr_object::lastevent</a></div><div class="ttdeci">struct timeval lastevent</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00721">cdr.c:721</a></div></div>
<div class="ttc" id="cdr_8c_html_a9409d6642fce1018ef347f2fcece7eea"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a9409d6642fce1018ef347f2fcece7eea">cdr_object_snapshot_copy</a></div><div class="ttdeci">static void cdr_object_snapshot_copy(struct cdr_object_snapshot *dst, struct cdr_object_snapshot *src)</div><div class="ttdoc">Copy a snapshot and its details. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00791">cdr.c:791</a></div></div>
<div class="ttc" id="cdr_8c_html_a89033e69df1c30043f7f2dbdcfd3ec12"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a89033e69df1c30043f7f2dbdcfd3ec12">cdr_object_check_party_a_answer</a></div><div class="ttdeci">static void cdr_object_check_party_a_answer(struct cdr_object *cdr)</div><div class="ttdoc">Check to see if a CDR needs to be answered based on its Party A. Note that this is safe to call as mu...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01494">cdr.c:1494</a></div></div>
<div class="ttc" id="cdr_8c_html_a4213ec53168931f1d566f40e32870c4c"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a4213ec53168931f1d566f40e32870c4c">bridge_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table bridge_state_fn_table</div><div class="ttdoc">The virtual table for the Bridged state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00659">cdr.c:659</a></div></div>
<div class="ttc" id="cdr_8c_html_af90187a3766c8b50aa4b984a62e30219"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#af90187a3766c8b50aa4b984a62e30219">cdr_object_create_and_append</a></div><div class="ttdeci">static struct cdr_object * cdr_object_create_and_append(struct cdr_object *cdr, const struct timeval *event_time)</div><div class="ttdoc">Create a new cdr_object and append it to an existing chain. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01075">cdr.c:1075</a></div></div>
<div class="ttc" id="structcdr__object_html_af089037b58d169050b5b9242ab0b033f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">cdr_object::bridge</a></div><div class="ttdeci">const ast_string_field bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="cdr_8c_html_a9b92f90cd704735201d9c840842bd0bc"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a9b92f90cd704735201d9c840842bd0bc">cdr_all_relink</a></div><div class="ttdeci">static void cdr_all_relink(struct cdr_object *cdr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00949">cdr.c:949</a></div></div>
<div class="ttc" id="cdr_8c_html_aec9ada03f8f99aa4c972b141bcbd2ee3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a></div><div class="ttdeci">static void cdr_object_transition_state(struct cdr_object *cdr, struct cdr_object_fn_table *fn_table)</div><div class="ttdoc">Transition a cdr_object to a new state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00821">cdr.c:821</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3d37a638dca298b75ff958c962471698"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d37a638dca298b75ff958c962471698">&#9670;&nbsp;</a></span>bridge_candidate_process()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_candidate_process </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>base_cand_cdr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process a single bridge_candidate. </p>
<p>When a CDR enters a bridge, it needs to make pairings with everyone else that it is not currently paired with. This function determines, for the CDR for the channel that entered the bridge and the CDR for every other channel currently in the bridge, who is Party A and makes new CDRs.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cdr</td><td>The cdr_obj being processed </td></tr>
    <tr><td class="paramname">cand_cdr</td><td>The <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> that is a candidate </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02503">2503</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::bridge</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02472">bridge_candidate_add_to_cdr()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00949">cdr_all_relink()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00210">CDR_DEBUG</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01192">cdr_object_pick_party_a()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00791">cdr_object_snapshot_copy()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00720">cdr_object::end</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02561">handle_bridge_pairings()</a>.</p>
<div class="fragment"><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;{</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a> *party_a;</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cand_cdr;</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(base_cand_cdr);</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;   <span class="keywordflow">for</span> (cand_cdr = base_cand_cdr; cand_cdr; cand_cdr = cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;      <span class="comment">/* Skip any records that are not in this bridge */</span></div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;      <span class="keywordflow">if</span> (strcmp(cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">bridge</a>, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">bridge</a>)) {</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;      }</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;      <span class="comment">/* If the candidate is us or someone we&#39;ve taken on, pass on by */</span></div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>)</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;         || (cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a></div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;            &amp;&amp; !strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>))) {</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;      }</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;      party_a = <a class="code" href="../../dc/df2/cdr_8c.html#a46fb3c14485f999d7039c7b9fb3f33d9">cdr_object_pick_party_a</a>(&amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>, &amp;cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>);</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;      <span class="comment">/* We&#39;re party A - make a new CDR, append it to us, and set the candidate as</span></div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;<span class="comment">       * Party B */</span></div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(party_a-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>)) {</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#abbc6a65e2dece6fa788aebe847752e3c">bridge_candidate_add_to_cdr</a>(cdr, &amp;cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>);</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;      }</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;      <span class="comment">/* We&#39;re Party B. Check if we can add ourselves immediately or if we need</span></div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;<span class="comment">       * a new CDR for them (they already have a Party B) */</span></div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;      <span class="keywordflow">if</span> (cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a></div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;         &amp;&amp; strcasecmp(cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>)) {</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#abbc6a65e2dece6fa788aebe847752e3c">bridge_candidate_add_to_cdr</a>(cand_cdr, &amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>);</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>(<span class="stringliteral">&quot;%p - Party A %s has new Party B %s\n&quot;</span>,</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;            cand_cdr, cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>,</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;            cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#a9409d6642fce1018ef347f2fcece7eea">cdr_object_snapshot_copy</a>(&amp;cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>, &amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>);</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#a9b92f90cd704735201d9c840842bd0bc">cdr_all_relink</a>(cand_cdr);</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;         <span class="comment">/* It&#39;s possible that this joined at one point and was never chosen</span></div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;<span class="comment">          * as party A. Clear their end time, as it would be set in such a</span></div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;<span class="comment">          * case.</span></div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;         memset(&amp;cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>, 0, <span class="keyword">sizeof</span>(cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>));</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;      }</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;   }</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(base_cand_cdr);</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a></div><div class="ttdoc">A wrapper object around a snapshot. Fields that are mutable by the CDR engine are replicated here...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00704">cdr.c:704</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="cdr_8c_html_a8052195443a9cb5835d7d2b3ab7279aa"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a></div><div class="ttdeci">#define CDR_DEBUG(fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00210">cdr.c:210</a></div></div>
<div class="ttc" id="cdr_8c_html_abbc6a65e2dece6fa788aebe847752e3c"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#abbc6a65e2dece6fa788aebe847752e3c">bridge_candidate_add_to_cdr</a></div><div class="ttdeci">static void bridge_candidate_add_to_cdr(struct cdr_object *cdr, struct cdr_object_snapshot *party_b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02472">cdr.c:2472</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="cdr_8c_html_a46fb3c14485f999d7039c7b9fb3f33d9"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a46fb3c14485f999d7039c7b9fb3f33d9">cdr_object_pick_party_a</a></div><div class="ttdeci">static struct cdr_object_snapshot * cdr_object_pick_party_a(struct cdr_object_snapshot *left, struct cdr_object_snapshot *right)</div><div class="ttdoc">Given two CDR snapshots, figure out who should be Party A for the resulting CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01192">cdr.c:1192</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="structcdr__object_html_af5249cf68dff13dd1dcca5929f4f3a5b"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">cdr_object::end</a></div><div class="ttdeci">struct timeval end</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00720">cdr.c:720</a></div></div>
<div class="ttc" id="cdr_8c_html_a9409d6642fce1018ef347f2fcece7eea"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a9409d6642fce1018ef347f2fcece7eea">cdr_object_snapshot_copy</a></div><div class="ttdeci">static void cdr_object_snapshot_copy(struct cdr_object_snapshot *dst, struct cdr_object_snapshot *src)</div><div class="ttdoc">Copy a snapshot and its details. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00791">cdr.c:791</a></div></div>
<div class="ttc" id="structcdr__object_html_af089037b58d169050b5b9242ab0b033f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">cdr_object::bridge</a></div><div class="ttdeci">const ast_string_field bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="cdr_8c_html_a9b92f90cd704735201d9c840842bd0bc"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a9b92f90cd704735201d9c840842bd0bc">cdr_all_relink</a></div><div class="ttdeci">static void cdr_all_relink(struct cdr_object *cdr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00949">cdr.c:949</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa174050d87a517c5b0db7c5ea2af32b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa174050d87a517c5b0db7c5ea2af32b3">&#9670;&nbsp;</a></span>bridge_state_process_bridge_leave()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int bridge_state_process_bridge_leave </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02015">2015</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::bridge</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00821">cdr_object_transition_state()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::uniqueid</a>.</p>
<div class="fragment"><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;{</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;   <span class="keywordflow">if</span> (strcmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">bridge</a>, bridge-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>)) {</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;   }</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;   <span class="keywordflow">if</span> (strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, channel-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>)</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;      &amp;&amp; cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a></div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;      &amp;&amp; strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, channel-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>)) {</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;   }</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a>(cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a>);</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">ast_bridge_snapshot::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f50dd95a426c8a70710afc315164f04"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table finalized_state_fn_table</div><div class="ttdoc">The virtual table for the finalized state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00694">cdr.c:694</a></div></div>
<div class="ttc" id="structcdr__object_html_af089037b58d169050b5b9242ab0b033f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">cdr_object::bridge</a></div><div class="ttdeci">const ast_string_field bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="cdr_8c_html_aec9ada03f8f99aa4c972b141bcbd2ee3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a></div><div class="ttdeci">static void cdr_object_transition_state(struct cdr_object *cdr, struct cdr_object_fn_table *fn_table)</div><div class="ttdoc">Transition a cdr_object to a new state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00821">cdr.c:821</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2b57bf227fb5fef47ce776810a2a2053"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b57bf227fb5fef47ce776810a2a2053">&#9670;&nbsp;</a></span>bridge_state_process_party_b()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_state_process_party_b </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>snapshot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02002">2002</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01046">AST_FLAG_DEAD</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01531">cdr_object_swap_snapshot()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00821">cdr_object_transition_state()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00155">ast_channel_snapshot::flags</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>.</p>
<div class="fragment"><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;{</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a></div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;      &amp;&amp; !strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>));</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a5f169319f8865c4f86897f944ae0f00c">cdr_object_swap_snapshot</a>(&amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>, snapshot);</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;   <span class="comment">/* If party B hangs up, finalize this CDR */</span></div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a67415c9cab64152013f660deee6acef6">AST_FLAG_DEAD</a>)) {</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a>(cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a>);</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;   }</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a67415c9cab64152013f660deee6acef6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a67415c9cab64152013f660deee6acef6">AST_FLAG_DEAD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01046">channel.h:1046</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f50dd95a426c8a70710afc315164f04"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table finalized_state_fn_table</div><div class="ttdoc">The virtual table for the finalized state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00694">cdr.c:694</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#aec78000b2897c094f68ed72559e18acd">ast_channel_snapshot::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00155">stasis_channels.h:155</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f169319f8865c4f86897f944ae0f00c"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f169319f8865c4f86897f944ae0f00c">cdr_object_swap_snapshot</a></div><div class="ttdeci">static void cdr_object_swap_snapshot(struct cdr_object_snapshot *old_snapshot, struct ast_channel_snapshot *new_snapshot)</div><div class="ttdoc">Swap an old cdr_object_snapshot&amp;#39;s ast_channel_snapshot for a new ast_channel_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01531">cdr.c:1531</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="cdr_8c_html_aec9ada03f8f99aa4c972b141bcbd2ee3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a></div><div class="ttdeci">static void cdr_object_transition_state(struct cdr_object *cdr, struct cdr_object_fn_table *fn_table)</div><div class="ttdoc">Transition a cdr_object to a new state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00821">cdr.c:821</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aae8c02f876344b3e49f91b1755ac078f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae8c02f876344b3e49f91b1755ac078f">&#9670;&nbsp;</a></span>cdr_all_cmp_fn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cdr_all_cmp_fn </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00912">912</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01076">OBJ_SEARCH_MASK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01120">OBJ_SEARCH_PARTIAL_KEY</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::party_b_name</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04522">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;{</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *left = obj;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *right = arg;</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *right_key = arg;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="keywordtype">int</span> cmp;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">flags</a> &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a>) {</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>:</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        right_key = right-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a54251e2cf4677a9009fd91bb86f4d4d2">party_b_name</a>;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <span class="comment">/* Fall through */</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>:</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        cmp = strcasecmp(left-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a54251e2cf4677a9009fd91bb86f4d4d2">party_b_name</a>, right_key);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a>:</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="comment">         * We could also use a partial key struct containing a length</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="comment">         * so strlen() does not get called for every comparison instead.</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        cmp = strncasecmp(left-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a54251e2cf4677a9009fd91bb86f4d4d2">party_b_name</a>, right_key, strlen(right_key));</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        <span class="comment">/* Sort can only work on something with a full or partial key. */</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        cmp = 0;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    }</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keywordflow">return</span> cmp ? 0 : <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a>;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a></div><div class="ttdoc">The arg parameter is a partial search key similar to OBJ_SEARCH_KEY. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01120">astobj2.h:1120</a></div></div>
<div class="ttc" id="structcdr__object_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">cdr_object::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00723">cdr.c:723</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="structcdr__object_html_a54251e2cf4677a9009fd91bb86f4d4d2"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a54251e2cf4677a9009fd91bb86f4d4d2">cdr_object::party_b_name</a></div><div class="ttdeci">const ast_string_field party_b_name</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a></div><div class="ttdoc">Search option field mask. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01076">astobj2.h:1076</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fc4102c3217d702e3465ee8859c44bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc4102c3217d702e3465ee8859c44bf">&#9670;&nbsp;</a></span>cdr_all_hash_fn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cdr_all_hash_fn </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00888">888</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01250">ast_str_case_hash()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01076">OBJ_SEARCH_MASK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::party_b_name</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04522">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;{</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *key;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">flags</a> &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a>) {</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>:</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      key = obj;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>:</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      cdr = obj;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      key = cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a54251e2cf4677a9009fd91bb86f4d4d2">party_b_name</a>;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;   }</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#ab08f8db2a7258e538a0da7417f58db58">ast_str_case_hash</a>(key);</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structcdr__object_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">cdr_object::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00723">cdr.c:723</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="structcdr__object_html_a54251e2cf4677a9009fd91bb86f4d4d2"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a54251e2cf4677a9009fd91bb86f4d4d2">cdr_object::party_b_name</a></div><div class="ttdeci">const ast_string_field party_b_name</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a></div><div class="ttdoc">Search option field mask. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01076">astobj2.h:1076</a></div></div>
<div class="ttc" id="strings_8h_html_ab08f8db2a7258e538a0da7417f58db58"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ab08f8db2a7258e538a0da7417f58db58">ast_str_case_hash</a></div><div class="ttdeci">static force_inline int attribute_pure ast_str_case_hash(const char *str)</div><div class="ttdoc">Compute a hash value on a case-insensitive string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01250">strings.h:1250</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2812e34e2a42693cf02793d873f9c577"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2812e34e2a42693cf02793d873f9c577">&#9670;&nbsp;</a></span>cdr_all_print_fn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cdr_all_print_fn </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>v_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>where</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da5/astobj2_8h.html#af236ed10cd1eddcbad0579ed0cf9f4c5">ao2_prnt_fn</a> *&#160;</td>
          <td class="paramname"><em>prnt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04472">4472</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::bridge</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04522">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;{</div><div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr = v_obj;</div><div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;</div><div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;   }</div><div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;   prnt(where, <span class="stringliteral">&quot;Party A: %s; Party B: %s; Bridge %s&quot;</span>,</div><div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;      cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>,</div><div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;      cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a> ? cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a> : <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>,</div><div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;      cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">bridge</a>);</div><div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="structcdr__object_html_af089037b58d169050b5b9242ab0b033f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">cdr_object::bridge</a></div><div class="ttdeci">const ast_string_field bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9b92f90cd704735201d9c840842bd0bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b92f90cd704735201d9c840842bd0bc">&#9670;&nbsp;</a></span>cdr_all_relink()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cdr_all_relink </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00949">949</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01572">ao2_link_flags</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01622">ao2_unlink_flags</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01067">OBJ_NOLOCK</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::party_b_name</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03637">ast_cdr_fork()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02472">bridge_candidate_add_to_cdr()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02503">bridge_candidate_process()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01692">single_state_bridge_enter_comparison()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l01653">single_state_process_dial_begin()</a>.</p>
<div class="fragment"><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;{</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(<a class="code" href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a>);</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;   <span class="keywordflow">if</span> (cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>) {</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      <span class="keywordflow">if</span> (strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a54251e2cf4677a9009fd91bb86f4d4d2">party_b_name</a>, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>)) {</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a77df7775a2a8b6cbef307e211dbf045c">ao2_unlink_flags</a>(<a class="code" href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a>, cdr, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a>);</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;         <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cdr, <a class="code" href="../../d4/db4/structcdr__object.html#a54251e2cf4677a9009fd91bb86f4d4d2">party_b_name</a>, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a7ce8563daf84a18540a86504d165b444">ao2_link_flags</a>(<a class="code" href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a>, cdr, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a>);</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;      }</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a77df7775a2a8b6cbef307e211dbf045c">ao2_unlink_flags</a>(<a class="code" href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a>, cdr, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a>);</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cdr, <a class="code" href="../../d4/db4/structcdr__object.html#a54251e2cf4677a9009fd91bb86f4d4d2">party_b_name</a>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;   }</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(<a class="code" href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a>);</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a></div><div class="ttdoc">Assume that the ao2_container is already locked. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01067">astobj2.h:1067</a></div></div>
<div class="ttc" id="astobj2_8h_html_a7ce8563daf84a18540a86504d165b444"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a7ce8563daf84a18540a86504d165b444">ao2_link_flags</a></div><div class="ttdeci">#define ao2_link_flags(container, obj, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01572">astobj2.h:1572</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structcdr__object_html_a54251e2cf4677a9009fd91bb86f4d4d2"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a54251e2cf4677a9009fd91bb86f4d4d2">cdr_object::party_b_name</a></div><div class="ttdeci">const ast_string_field party_b_name</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="cdr_8c_html_abb1aee82330e86d734034f092559cc69"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_all</div><div class="ttdoc">A container of all active CDRs with a Party B indexed by Party B channel name. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00368">cdr.c:368</a></div></div>
<div class="ttc" id="astobj2_8h_html_a77df7775a2a8b6cbef307e211dbf045c"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a77df7775a2a8b6cbef307e211dbf045c">ao2_unlink_flags</a></div><div class="ttdeci">#define ao2_unlink_flags(container, obj, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01622">astobj2.h:1622</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a20aa34dca45895c5ccd7a0b580987ab9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20aa34dca45895c5ccd7a0b580987ab9">&#9670;&nbsp;</a></span>cdr_all_unlink()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cdr_all_unlink </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00972">972</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01622">ao2_unlink_flags</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00737">cdr_object::is_root</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01067">OBJ_NOLOCK</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::party_b_name</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04260">cdr_object_dispatch_all_cb()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l02278">handle_channel_snapshot_update_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;{</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cur;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ab1698365bf93a298c99e61c9f99c1d34">is_root</a>);</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;   <span class="comment">/* Hold a ref to the root CDR to ensure the list members don&#39;t go away on us. */</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cdr, +1);</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(<a class="code" href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a>);</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;   <span class="keywordflow">for</span> (cur = cdr; cur; cur = <a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;      next = cur-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a77df7775a2a8b6cbef307e211dbf045c">ao2_unlink_flags</a>(<a class="code" href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a>, cur, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a>);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;<span class="comment">       * It is safe to still use cur after unlinking because the</span></div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<span class="comment">       * root CDR holds a ref to all the CDRs in the list and we</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="comment">       * have a ref to the root CDR.</span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cur, <a class="code" href="../../d4/db4/structcdr__object.html#a54251e2cf4677a9009fd91bb86f4d4d2">party_b_name</a>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;   }</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(<a class="code" href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a>);</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cdr, -1);</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;}</div><div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a></div><div class="ttdoc">Assume that the ao2_container is already locked. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01067">astobj2.h:1067</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structcdr__object_html_ab1698365bf93a298c99e61c9f99c1d34"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#ab1698365bf93a298c99e61c9f99c1d34">cdr_object::is_root</a></div><div class="ttdeci">int is_root</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00737">cdr.c:737</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="structcdr__object_html_a54251e2cf4677a9009fd91bb86f4d4d2"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a54251e2cf4677a9009fd91bb86f4d4d2">cdr_object::party_b_name</a></div><div class="ttdeci">const ast_string_field party_b_name</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="cdr_8c_html_abb1aee82330e86d734034f092559cc69"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_all</div><div class="ttdoc">A container of all active CDRs with a Party B indexed by Party B channel name. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00368">cdr.c:368</a></div></div>
<div class="ttc" id="astobj2_8h_html_a77df7775a2a8b6cbef307e211dbf045c"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a77df7775a2a8b6cbef307e211dbf045c">ao2_unlink_flags</a></div><div class="ttdeci">#define ao2_unlink_flags(container, obj, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01622">astobj2.h:1622</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c1412651d3d5121de1ef7c473dac3b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c1412651d3d5121de1ef7c473dac3b4">&#9670;&nbsp;</a></span>cdr_detach()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cdr_detach </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *&#160;</td>
          <td class="paramname"><em>cdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03841">3841</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03411">ast_cdr_free()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00337">cdr_batch_item::cdr</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00358">cdr_batch_lock</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00221">CDR_BATCHMODE</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00220">CDR_ENABLED</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00344">cdr_batch::head</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03738">init_batch()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00338">cdr_batch_item::next</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03508">post_cdr()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00343">cdr_batch::size</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03825">start_batch_mode()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00345">cdr_batch::tail</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l01386">cdr_object_dispatch()</a>.</p>
<div class="fragment"><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;{</div><div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d81/structcdr__batch__item.html">cdr_batch_item</a> *newtail;</div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;   <span class="keywordtype">int</span> curr;</div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d57/structmodule__config.html">module_config</a> *, mod_cfg, <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(module_configs), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;   <span class="keywordtype">int</span> submit_batch = 0;</div><div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;</div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;   }</div><div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;</div><div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;   <span class="comment">/* maybe they disabled CDR stuff completely, so just drop it */</span></div><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;   <span class="keywordflow">if</span> (!mod_cfg || !<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;general-&gt;settings, <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a>)) {</div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Dropping CDR !\n&quot;</span>);</div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a28b931d52c71271afd601186db95fec2">ast_cdr_free</a>(cdr);</div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;   }</div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;</div><div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;   <span class="comment">/* post stuff immediately if we are not in batch mode, this is legacy behaviour */</span></div><div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;general-&gt;settings, <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492">CDR_BATCHMODE</a>)) {</div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#ad01956d63583675f04baf543336b7c94">post_cdr</a>(cdr);</div><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a28b931d52c71271afd601186db95fec2">ast_cdr_free</a>(cdr);</div><div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;   }</div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;</div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;   <span class="comment">/* otherwise, each CDR gets put into a batch list (at the end) */</span></div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;CDR detaching from this thread\n&quot;</span>);</div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;</div><div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;   <span class="comment">/* we&#39;ll need a new tail for every CDR */</span></div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;   <span class="keywordflow">if</span> (!(newtail = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*newtail)))) {</div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#ad01956d63583675f04baf543336b7c94">post_cdr</a>(cdr);</div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a28b931d52c71271afd601186db95fec2">ast_cdr_free</a>(cdr);</div><div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;   }</div><div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;</div><div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;   <span class="comment">/* don&#39;t traverse a whole list (just keep track of the tail) */</span></div><div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../dc/df2/cdr_8c.html#a3a3969758c60f80011874aadde9d09ca">cdr_batch_lock</a>);</div><div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a>)</div><div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a8ba2f2526d5230859524407aad436361">init_batch</a>();</div><div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a>-&gt;<a class="code" href="../../d4/d3a/structcdr__batch.html#aa09bc3bf5bd05c3ae3ca9cdfd905cf67">head</a>) {</div><div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;      <span class="comment">/* new batch is empty, so point the head at the new tail */</span></div><div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a>-&gt;<a class="code" href="../../d4/d3a/structcdr__batch.html#aa09bc3bf5bd05c3ae3ca9cdfd905cf67">head</a> = newtail;</div><div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;      <span class="comment">/* already got a batch with something in it, so just append a new tail */</span></div><div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a>-&gt;<a class="code" href="../../d4/d3a/structcdr__batch.html#ae96b73adf45d9812f3a70da403324a5f">tail</a>-&gt;<a class="code" href="../../dc/d81/structcdr__batch__item.html#ae481e0b645c450212b5655180a678d42">next</a> = newtail;</div><div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;   }</div><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;   newtail-&gt;<a class="code" href="../../dc/d81/structcdr__batch__item.html#a0b6fbd632bcf2e09017a0b82c2ed41ff">cdr</a> = <a class="code" href="../../dc/d81/structcdr__batch__item.html#a0b6fbd632bcf2e09017a0b82c2ed41ff">cdr</a>;</div><div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a>-&gt;<a class="code" href="../../d4/d3a/structcdr__batch.html#ae96b73adf45d9812f3a70da403324a5f">tail</a> = newtail;</div><div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;   curr = <a class="code" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a>-&gt;<a class="code" href="../../d4/d3a/structcdr__batch.html#a439227feff9d7f55384e8780cfc2eb82">size</a>++;</div><div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;</div><div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;   <span class="comment">/* if we have enough stuff to post, then do it */</span></div><div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;   <span class="keywordflow">if</span> (curr &gt;= (mod_cfg-&gt;general-&gt;batch_settings.size - 1)) {</div><div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;      submit_batch = 1;</div><div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;   }</div><div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../dc/df2/cdr_8c.html#a3a3969758c60f80011874aadde9d09ca">cdr_batch_lock</a>);</div><div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;</div><div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;   <span class="comment">/* Don&#39;t submit a batch with cdr_batch_lock held */</span></div><div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;   <span class="keywordflow">if</span> (submit_batch) {</div><div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a8e55b20165112265d58bf812ccb57de0">start_batch_mode</a>();</div><div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;   }</div><div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;}</div><div class="ttc" id="structcdr__batch_html_ae96b73adf45d9812f3a70da403324a5f"><div class="ttname"><a href="../../d4/d3a/structcdr__batch.html#ae96b73adf45d9812f3a70da403324a5f">cdr_batch::tail</a></div><div class="ttdeci">struct cdr_batch_item * tail</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00345">cdr.c:345</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="cdr_8c_html_ad01956d63583675f04baf543336b7c94"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ad01956d63583675f04baf543336b7c94">post_cdr</a></div><div class="ttdeci">static void post_cdr(struct ast_cdr *cdr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03508">cdr.c:3508</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492">CDR_BATCHMODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00221">cdr.h:221</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structcdr__batch__item_html_a0b6fbd632bcf2e09017a0b82c2ed41ff"><div class="ttname"><a href="../../dc/d81/structcdr__batch__item.html#a0b6fbd632bcf2e09017a0b82c2ed41ff">cdr_batch_item::cdr</a></div><div class="ttdeci">struct ast_cdr * cdr</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00337">cdr.c:337</a></div></div>
<div class="ttc" id="cdr_8c_html_a28b931d52c71271afd601186db95fec2"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a28b931d52c71271afd601186db95fec2">ast_cdr_free</a></div><div class="ttdeci">void ast_cdr_free(struct ast_cdr *cdr)</div><div class="ttdoc">Free a CDR record. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03411">cdr.c:3411</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structcdr__batch__item_html_ae481e0b645c450212b5655180a678d42"><div class="ttname"><a href="../../dc/d81/structcdr__batch__item.html#ae481e0b645c450212b5655180a678d42">cdr_batch_item::next</a></div><div class="ttdeci">struct cdr_batch_item * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00338">cdr.c:338</a></div></div>
<div class="ttc" id="cdr_8c_html_a8ba2f2526d5230859524407aad436361"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8ba2f2526d5230859524407aad436361">init_batch</a></div><div class="ttdeci">static int init_batch(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03738">cdr.c:3738</a></div></div>
<div class="ttc" id="structmodule__config_html"><div class="ttname"><a href="../../db/d57/structmodule__config.html">module_config</a></div><div class="ttdoc">The configuration settings for this module. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00222">cdr.c:222</a></div></div>
<div class="ttc" id="cdr_8c_html_a3c9a24d791e528330adc76210fb42407"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a></div><div class="ttdeci">static struct cdr_batch * batch</div></div>
<div class="ttc" id="structcdr__batch__item_html"><div class="ttname"><a href="../../dc/d81/structcdr__batch__item.html">cdr_batch_item</a></div><div class="ttdoc">Queued CDR waiting to be batched. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00336">cdr.c:336</a></div></div>
<div class="ttc" id="cdr_8c_html_a3a3969758c60f80011874aadde9d09ca"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3a3969758c60f80011874aadde9d09ca">cdr_batch_lock</a></div><div class="ttdeci">static ast_mutex_t cdr_batch_lock</div><div class="ttdoc">Lock protecting modifications to the batch queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00358">cdr.c:358</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="cdr_8c_html_a8e55b20165112265d58bf812ccb57de0"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8e55b20165112265d58bf812ccb57de0">start_batch_mode</a></div><div class="ttdeci">static void start_batch_mode(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03825">cdr.c:3825</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00220">cdr.h:220</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structcdr__batch_html_aa09bc3bf5bd05c3ae3ca9cdfd905cf67"><div class="ttname"><a href="../../d4/d3a/structcdr__batch.html#aa09bc3bf5bd05c3ae3ca9cdfd905cf67">cdr_batch::head</a></div><div class="ttdeci">struct cdr_batch_item * head</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00344">cdr.c:344</a></div></div>
<div class="ttc" id="structcdr__batch_html_a439227feff9d7f55384e8780cfc2eb82"><div class="ttname"><a href="../../d4/d3a/structcdr__batch.html#a439227feff9d7f55384e8780cfc2eb82">cdr_batch::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00343">cdr.c:343</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa9235d826a774900dc1916fd6dc63082"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9235d826a774900dc1916fd6dc63082">&#9670;&nbsp;</a></span>cdr_enable_batch_mode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cdr_enable_batch_mode </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a> *&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04416">4416</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00199">ast_cond_init</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00567">ast_pthread_create_background</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../d4/d69/structast__cdr__config.html#ab3c4f8ad024814570a590d3d40752003">ast_cdr_config::batch_settings</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00362">cdr_pending_cond</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00355">cdr_thread</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03903">do_cdr()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00268">ast_cdr_config::batch_settings::size</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03825">start_batch_mode()</a>, and <a class="el" href="../../dc/d07/cdr_8h_source.html#l00267">ast_cdr_config::batch_settings::time</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04488">cdr_toggle_runtime_options()</a>.</p>
<div class="fragment"><div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;{</div><div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;   <span class="comment">/* Only create the thread level portions once */</span></div><div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#a1a28dc87e0a897d209ff16ca63bff690">cdr_thread</a> == <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) {</div><div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;<a class="code" href="../../dc/df2/cdr_8c.html#a3350735a1fc58db7a559b16073a83a3c">cdr_pending_cond</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a595e2f8aa398f4bd21e381c3211235fe">ast_pthread_create_background</a>(&amp;<a class="code" href="../../dc/df2/cdr_8c.html#a1a28dc87e0a897d209ff16ca63bff690">cdr_thread</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a871988199d244a254ad19be2ab41d6e8">do_cdr</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &lt; 0) {</div><div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to start CDR thread.\n&quot;</span>);</div><div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;      }</div><div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;   }</div><div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;</div><div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;   <span class="comment">/* Start the batching process */</span></div><div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a8e55b20165112265d58bf812ccb57de0">start_batch_mode</a>();</div><div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;</div><div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;CDR batch mode logging enabled, first of either size %u or time %u seconds.\n&quot;</span>,</div><div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;         config-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#ab3c4f8ad024814570a590d3d40752003">batch_settings</a>.<a class="code" href="../../d3/d11/structast__cdr__config_1_1batch__settings.html#aac913b3a1f6ef005d66bf7a84428773e">size</a>, config-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#ab3c4f8ad024814570a590d3d40752003">batch_settings</a>.<a class="code" href="../../d3/d11/structast__cdr__config_1_1batch__settings.html#a83e57ce9bd59cfa0995c2e2c8589c274">time</a>);</div><div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a871988199d244a254ad19be2ab41d6e8"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a871988199d244a254ad19be2ab41d6e8">do_cdr</a></div><div class="ttdeci">static void * do_cdr(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03903">cdr.c:3903</a></div></div>
<div class="ttc" id="structast__cdr__config_1_1batch__settings_html_a83e57ce9bd59cfa0995c2e2c8589c274"><div class="ttname"><a href="../../d3/d11/structast__cdr__config_1_1batch__settings.html#a83e57ce9bd59cfa0995c2e2c8589c274">ast_cdr_config::batch_settings::time</a></div><div class="ttdeci">unsigned int time</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00267">cdr.h:267</a></div></div>
<div class="ttc" id="lock_8h_html_a69e9591803d36f5683eb9b084442be9b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a></div><div class="ttdeci">#define ast_cond_init(cond, attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00199">lock.h:199</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_a595e2f8aa398f4bd21e381c3211235fe"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a595e2f8aa398f4bd21e381c3211235fe">ast_pthread_create_background</a></div><div class="ttdeci">#define ast_pthread_create_background(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00567">utils.h:567</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="structast__cdr__config_html_ab3c4f8ad024814570a590d3d40752003"><div class="ttname"><a href="../../d4/d69/structast__cdr__config.html#ab3c4f8ad024814570a590d3d40752003">ast_cdr_config::batch_settings</a></div><div class="ttdeci">struct ast_cdr_config::batch_settings batch_settings</div></div>
<div class="ttc" id="structast__cdr__config_1_1batch__settings_html_aac913b3a1f6ef005d66bf7a84428773e"><div class="ttname"><a href="../../d3/d11/structast__cdr__config_1_1batch__settings.html#aac913b3a1f6ef005d66bf7a84428773e">ast_cdr_config::batch_settings::size</a></div><div class="ttdeci">unsigned int size</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00268">cdr.h:268</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="cdr_8c_html_a3350735a1fc58db7a559b16073a83a3c"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3350735a1fc58db7a559b16073a83a3c">cdr_pending_cond</a></div><div class="ttdeci">static ast_cond_t cdr_pending_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00362">cdr.c:362</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="cdr_8c_html_a8e55b20165112265d58bf812ccb57de0"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8e55b20165112265d58bf812ccb57de0">start_batch_mode</a></div><div class="ttdeci">static void start_batch_mode(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03825">cdr.c:3825</a></div></div>
<div class="ttc" id="cdr_8c_html_a1a28dc87e0a897d209ff16ca63bff690"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a1a28dc87e0a897d209ff16ca63bff690">cdr_thread</a></div><div class="ttdeci">static pthread_t cdr_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00355">cdr.c:355</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acaee16cde4e4e220e1b20aad913c3ea7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acaee16cde4e4e220e1b20aad913c3ea7">&#9670;&nbsp;</a></span>cdr_engine_shutdown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cdr_engine_shutdown </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04385">4385</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00910">aco_info_destroy()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01716">ao2_callback</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00985">ao2_container_unregister()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00865">ao2_global_obj_release</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00030">ast_cli_unregister_multiple()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00269">ast_sched_context_destroy()</a>, <a class="el" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04260">cdr_object_dispatch_all_cb()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04277">finalize_batch_mode()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01053">OBJ_MULTIPLE</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01048">OBJ_NODATA</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01043">OBJ_UNLINK</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00269">stasis_message_router_unsubscribe_and_join()</a>, and <a class="el" href="../../dd/d79/stasis_8h_source.html#l01523">STASIS_MESSAGE_TYPE_CLEANUP</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04522">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;{</div><div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;   <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a641f77c471ff127e8586247ff6c0d64c">stasis_message_router_unsubscribe_and_join</a>(<a class="code" href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>);</div><div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;</div><div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../dc/df2/cdr_8c.html#abc796aa4d7644ba463deefc014cd6ea9">cdr_topic</a>);</div><div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#abc796aa4d7644ba463deefc014cd6ea9">cdr_topic</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;</div><div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(cdr_sync_message_type);</div><div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;</div><div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(<a class="code" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a>,</div><div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a0b4b598a8c5733e77b60de4440599b97">cdr_object_dispatch_all_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a7f4d8e5786e103b3762e0d9680773a2c">finalize_batch_mode</a>();</div><div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(<a class="code" href="../../dc/df2/cdr_8c.html#a1959d38582b0da24d4d42766cf13ade8">cli_commands</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dc/df2/cdr_8c.html#a1959d38582b0da24d4d42766cf13ade8">cli_commands</a>));</div><div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;   <a class="code" href="../../d7/d00/sched_8h.html#a862f869d056628b38e09042f21b54413">ast_sched_context_destroy</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>);</div><div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;   <a class="code" href="../../d0/da0/structsched.html">sched</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a>);</div><div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;</div><div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a21b11339ca4d0b1167c956a9f816bd19">aco_info_destroy</a>(&amp;cfg_info);</div><div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ac0e1cbc7cf050c8b7b8e3a8fee92c50e">ao2_global_obj_release</a>(module_configs);</div><div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;</div><div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a4b8c1cca9dace1cf1bbadc5039f3dedf">ao2_container_unregister</a>(<span class="stringliteral">&quot;cdrs_master&quot;</span>);</div><div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a>);</div><div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;</div><div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a4b8c1cca9dace1cf1bbadc5039f3dedf">ao2_container_unregister</a>(<span class="stringliteral">&quot;cdrs_all&quot;</span>);</div><div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a>);</div><div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a6d6d7bdd31cb1b6f84f2e447a7a2c6c2"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a></div><div class="ttdeci">static struct stasis_message_router * stasis_router</div><div class="ttdoc">Message router for stasis messages regarding channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00371">cdr.c:371</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01048">astobj2.h:1048</a></div></div>
<div class="ttc" id="astobj2_8h_html_a47857055118a703ae87ea5ebaf4842ed"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a></div><div class="ttdeci">#define ao2_callback(c, flags, cb_fn, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01716">astobj2.h:1716</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a641f77c471ff127e8586247ff6c0d64c"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a641f77c471ff127e8586247ff6c0d64c">stasis_message_router_unsubscribe_and_join</a></div><div class="ttdeci">void stasis_message_router_unsubscribe_and_join(struct stasis_message_router *router)</div><div class="ttdoc">Unsubscribe the router from the upstream topic, blocking until the final message has been processed...</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00269">stasis_message_router.c:269</a></div></div>
<div class="ttc" id="stasis_8h_html_a31197e193b1dfd6c122ff6d7c7f6b3fa"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a></div><div class="ttdeci">#define STASIS_MESSAGE_TYPE_CLEANUP(name)</div><div class="ttdoc">Boiler-plate messaging macro for cleaning up message types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01523">stasis.h:1523</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="cdr_8c_html_abc796aa4d7644ba463deefc014cd6ea9"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#abc796aa4d7644ba463deefc014cd6ea9">cdr_topic</a></div><div class="ttdeci">static struct stasis_topic * cdr_topic</div><div class="ttdoc">The parent topic for all topics we want to aggregate for CDRs. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00383">cdr.c:383</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01043">astobj2.h:1043</a></div></div>
<div class="ttc" id="cdr_8c_html_a0b4b598a8c5733e77b60de4440599b97"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a0b4b598a8c5733e77b60de4440599b97">cdr_object_dispatch_all_cb</a></div><div class="ttdeci">static int cdr_object_dispatch_all_cb(void *obj, void *arg, int flags)</div><div class="ttdoc">This dispatches all cdr_objects. It should only be used during shutdown, so that we get billing recor...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l04260">cdr.c:4260</a></div></div>
<div class="ttc" id="astobj2_8h_html_a4b8c1cca9dace1cf1bbadc5039f3dedf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a4b8c1cca9dace1cf1bbadc5039f3dedf">ao2_container_unregister</a></div><div class="ttdeci">void ao2_container_unregister(const char *name)</div><div class="ttdoc">Unregister a container for CLI stats and integrity check. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00985">astobj2_container.c:985</a></div></div>
<div class="ttc" id="cdr_8c_html_a1959d38582b0da24d4d42766cf13ade8"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a1959d38582b0da24d4d42766cf13ade8">cli_commands</a></div><div class="ttdeci">static struct ast_cli_entry cli_commands[]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l04249">cdr.c:4249</a></div></div>
<div class="ttc" id="cdr_8c_html_a3c9a24d791e528330adc76210fb42407"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a></div><div class="ttdeci">static struct cdr_batch * batch</div></div>
<div class="ttc" id="config__options_8h_html_a21b11339ca4d0b1167c956a9f816bd19"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a21b11339ca4d0b1167c956a9f816bd19">aco_info_destroy</a></div><div class="ttdeci">void aco_info_destroy(struct aco_info *info)</div><div class="ttdoc">Destroy an initialized aco_info struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00910">config_options.c:910</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac0e1cbc7cf050c8b7b8e3a8fee92c50e"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac0e1cbc7cf050c8b7b8e3a8fee92c50e">ao2_global_obj_release</a></div><div class="ttdeci">#define ao2_global_obj_release(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00865">astobj2.h:865</a></div></div>
<div class="ttc" id="cdr_8c_html_aabd874b0958bde3e08b5a876c2d1a395"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_master</div><div class="ttdoc">A container of the active master CDRs indexed by Party A channel uniqueid. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00365">cdr.c:365</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="cdr_8c_html_abb1aee82330e86d734034f092559cc69"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_all</div><div class="ttdoc">A container of all active CDRs with a Party B indexed by Party B channel name. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00368">cdr.c:368</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01053">astobj2.h:1053</a></div></div>
<div class="ttc" id="sched_8h_html_a862f869d056628b38e09042f21b54413"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a862f869d056628b38e09042f21b54413">ast_sched_context_destroy</a></div><div class="ttdeci">void ast_sched_context_destroy(struct ast_sched_context *c)</div><div class="ttdoc">destroys a schedule context </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00269">sched.c:269</a></div></div>
<div class="ttc" id="cdr_8c_html_a7f4d8e5786e103b3762e0d9680773a2c"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a7f4d8e5786e103b3762e0d9680773a2c">finalize_batch_mode</a></div><div class="ttdeci">static void finalize_batch_mode(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l04277">cdr.c:4277</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4705b2dc3ab2f2294119c7fc9ceeb003"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4705b2dc3ab2f2294119c7fc9ceeb003">&#9670;&nbsp;</a></span>cdr_format_var_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* cdr_format_var_internal </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03018">3018</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d9/df9/chanvars_8c_source.html#l00060">ast_var_name()</a>, <a class="el" href="../../d9/df9/chanvars_8c_source.html#l00080">ast_var_value()</a>, <a class="el" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">ast_var_t::entries</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/d07/cdr_8h_source.html#l00323">ast_cdr::varshead</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03050">ast_cdr_format_var()</a>.</p>
<div class="fragment"><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;{</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *variables;</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>)) {</div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;   }</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;</div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a9ffb22045a8f14bef8f2137cd779ab25">varshead</a>, variables, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>) {</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d9/de7/chanvars_8h.html#a356a31cd608ec07d3668dcd589be49d8">ast_var_name</a>(variables))) {</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d9/de7/chanvars_8h.html#a8e0081172db71c5021d20706c50d959c">ast_var_value</a>(variables);</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;      }</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;   }</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;}</div><div class="ttc" id="chanvars_8h_html_a8e0081172db71c5021d20706c50d959c"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#a8e0081172db71c5021d20706c50d959c">ast_var_value</a></div><div class="ttdeci">const char * ast_var_value(const struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df9/chanvars_8c_source.html#l00080">chanvars.c:80</a></div></div>
<div class="ttc" id="chanvars_8h_html_a356a31cd608ec07d3668dcd589be49d8"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#a356a31cd608ec07d3668dcd589be49d8">ast_var_name</a></div><div class="ttdeci">const char * ast_var_name(const struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df9/chanvars_8c_source.html#l00060">chanvars.c:60</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__cdr_html_a9ffb22045a8f14bef8f2137cd779ab25"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a9ffb22045a8f14bef8f2137cd779ab25">ast_cdr::varshead</a></div><div class="ttdeci">struct varshead varshead</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00323">cdr.h:323</a></div></div>
<div class="ttc" id="structast__var__t_html"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html">ast_var_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00028">chanvars.h:28</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structast__var__t_html_a55d5c7988e3164d7310d88c67d97a1db"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">ast_var_t::entries</a></div><div class="ttdeci">struct ast_var_t::@249 entries</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c028476f292cc1ae19c7bc9f89ab4e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c028476f292cc1ae19c7bc9f89ab4e3">&#9670;&nbsp;</a></span>cdr_generic_register()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cdr_generic_register </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d08/structbe__list.html">be_list</a> *&#160;</td>
          <td class="paramname"><em>generic_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d07/cdr_8h.html#a5f51cd53e2482c562f7f348d68f4243c">ast_cdrbe</a>&#160;</td>
          <td class="paramname"><em>be</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02902">2902</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00717">AST_RWLIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">be</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00324">cdr_beitem::be</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00323">cdr_beitem::desc</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00322">cdr_beitem::name</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02948">ast_cdr_modifier_register()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l02943">ast_cdr_register()</a>.</p>
<div class="fragment"><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;{</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dc6/structcdr__beitem.html">cdr_beitem</a> *i;</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dc6/structcdr__beitem.html">cdr_beitem</a> *cur;</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;</div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>) {</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;   }</div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a>) {</div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;CDR engine &#39;%s&#39; lacks backend\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;</div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;   }</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;   i = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*i));</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;   <span class="keywordflow">if</span> (!i) {</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;   }</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;   i-&gt;<a class="code" href="../../dc/dc6/structcdr__beitem.html#ac91a6afe8445130d877f8c6a175138de">be</a> = <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a>;</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(i-&gt;<a class="code" href="../../dc/dc6/structcdr__beitem.html#a9997d8ee2df51d18efed254a5aa016fd">name</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="keyword">sizeof</span>(i-&gt;<a class="code" href="../../dc/dc6/structcdr__beitem.html#a9997d8ee2df51d18efed254a5aa016fd">name</a>));</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(i-&gt;<a class="code" href="../../dc/dc6/structcdr__beitem.html#acedc9527b6888739004d0f25096af635">desc</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>, <span class="keyword">sizeof</span>(i-&gt;<a class="code" href="../../dc/dc6/structcdr__beitem.html#acedc9527b6888739004d0f25096af635">desc</a>));</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(generic_list);</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(generic_list, cur, list) {</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, cur-&gt;<a class="code" href="../../dc/dc6/structcdr__beitem.html#a9997d8ee2df51d18efed254a5aa016fd">name</a>)) {</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Already have a CDR backend called &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(generic_list);</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(i);</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;      }</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;   }</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a>(generic_list, i, list);</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(generic_list);</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;}</div><div class="ttc" id="structcdr__beitem_html_acedc9527b6888739004d0f25096af635"><div class="ttname"><a href="../../dc/dc6/structcdr__beitem.html#acedc9527b6888739004d0f25096af635">cdr_beitem::desc</a></div><div class="ttdeci">char desc[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00323">cdr.c:323</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a787f82faccb7c1f40a2539a14855601b"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a></div><div class="ttdeci">static const char desc[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00073">cdr_mysql.c:73</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a39730e90126aad69cfc9ca4d6fcdb3a6"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a></div><div class="ttdeci">char * be</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="structcdr__beitem_html"><div class="ttname"><a href="../../dc/dc6/structcdr__beitem.html">cdr_beitem</a></div><div class="ttdoc">Registration object for CDR backends. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00321">cdr.c:321</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aacc5f6b7c25e361d11d40137fd55a8e8"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00717">linkedlists.h:717</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structcdr__beitem_html_a9997d8ee2df51d18efed254a5aa016fd"><div class="ttname"><a href="../../dc/dc6/structcdr__beitem.html#a9997d8ee2df51d18efed254a5aa016fd">cdr_beitem::name</a></div><div class="ttdeci">char name[20]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00322">cdr.c:322</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structcdr__beitem_html_ac91a6afe8445130d877f8c6a175138de"><div class="ttname"><a href="../../dc/dc6/structcdr__beitem.html#ac91a6afe8445130d877f8c6a175138de">cdr_beitem::be</a></div><div class="ttdeci">ast_cdrbe be</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00324">cdr.c:324</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a26ef22f050d742f08715473a63720bb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26ef22f050d742f08715473a63720bb5">&#9670;&nbsp;</a></span>cdr_get_tv()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cdr_get_tv </td>
          <td>(</td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname"><em>when</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bufsize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03035">3035</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/df8/localtime_8c_source.html#l01739">ast_localtime()</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l02524">ast_strftime()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03050">ast_cdr_format_var()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03243">cdr_object_format_property()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04055">cli_show_channel()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03991">cli_show_channels()</a>.</p>
<div class="fragment"><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;{</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;   <span class="keywordflow">if</span> (fmt == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {   <span class="comment">/* raw mode */</span></div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;      snprintf(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, bufsize, <span class="stringliteral">&quot;%ld.%06ld&quot;</span>, (<span class="keywordtype">long</span>)when.tv_sec, (<span class="keywordtype">long</span>)when.tv_usec);</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;      <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;<span class="comment">/* Ensure the buffer is initialized. */</span></div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;      <span class="keywordflow">if</span> (when.tv_sec) {</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d5/d84/structast__tm.html">ast_tm</a> tm;</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;         <a class="code" href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a>(&amp;when, &amp;tm, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;         <a class="code" href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, bufsize, fmt, &amp;tm);</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;      }</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;   }</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="localtime_8h_html_ae9fbda728350a9a5b9c09b29214d718e"><div class="ttname"><a href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a></div><div class="ttdeci">struct ast_tm * ast_localtime(const struct timeval *timep, struct ast_tm *p_tm, const char *zone)</div><div class="ttdoc">Timezone-independent version of localtime_r(3). </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l01739">localtime.c:1739</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="localtime_8h_html_aa8e63928b14a347bd3973d680b885f93"><div class="ttname"><a href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a></div><div class="ttdeci">int ast_strftime(char *buf, size_t len, const char *format, const struct ast_tm *tm)</div><div class="ttdoc">Special version of strftime(3) that handles fractions of a second. Takes the same arguments as strfti...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l02524">localtime.c:2524</a></div></div>
<div class="ttc" id="structast__tm_html"><div class="ttname"><a href="../../d5/d84/structast__tm.html">ast_tm</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/deb/localtime_8h_source.html#l00035">localtime.h:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5c041a2fdf7380bf2767067dae488f60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c041a2fdf7380bf2767067dae488f60">&#9670;&nbsp;</a></span>cdr_master_cmp_fn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cdr_master_cmp_fn </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00854">854</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01076">OBJ_SEARCH_MASK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01120">OBJ_SEARCH_PARTIAL_KEY</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04522">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;{</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *left = obj;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *right = arg;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *right_key = arg;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="keywordtype">int</span> cmp;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">flags</a> &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a>) {</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>:</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        right_key = right-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        <span class="comment">/* Fall through */</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>:</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        cmp = strcmp(left-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>, right_key);</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a>:</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="comment">         * We could also use a partial key struct containing a length</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment">         * so strlen() does not get called for every comparison instead.</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        cmp = strncmp(left-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>, right_key, strlen(right_key));</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        <span class="comment">/* Sort can only work on something with a full or partial key. */</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        cmp = 0;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    }</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="keywordflow">return</span> cmp ? 0 : <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a>;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a></div><div class="ttdoc">The arg parameter is a partial search key similar to OBJ_SEARCH_KEY. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01120">astobj2.h:1120</a></div></div>
<div class="ttc" id="structcdr__object_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">cdr_object::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00723">cdr.c:723</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a></div><div class="ttdoc">Search option field mask. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01076">astobj2.h:1076</a></div></div>
<div class="ttc" id="structcdr__object_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a753c7b39e3284d771f13f513b003d033">cdr_object::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae4d1a552b91a5b7ab7b4ea4fea301169"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4d1a552b91a5b7ab7b4ea4fea301169">&#9670;&nbsp;</a></span>cdr_master_hash_fn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cdr_master_hash_fn </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00830">830</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01250">ast_str_case_hash()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01076">OBJ_SEARCH_MASK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04522">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;{</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *key;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">flags</a> &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a>) {</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>:</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      key = obj;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>:</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      cdr = obj;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      key = cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;   }</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#ab08f8db2a7258e538a0da7417f58db58">ast_str_case_hash</a>(key);</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structcdr__object_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">cdr_object::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00723">cdr.c:723</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a></div><div class="ttdoc">Search option field mask. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01076">astobj2.h:1076</a></div></div>
<div class="ttc" id="structcdr__object_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a753c7b39e3284d771f13f513b003d033">cdr_object::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="strings_8h_html_ab08f8db2a7258e538a0da7417f58db58"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ab08f8db2a7258e538a0da7417f58db58">ast_str_case_hash</a></div><div class="ttdeci">static force_inline int attribute_pure ast_str_case_hash(const char *str)</div><div class="ttdoc">Compute a hash value on a case-insensitive string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01250">strings.h:1250</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa06976cdf68174771e4bd9c77b0360eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa06976cdf68174771e4bd9c77b0360eb">&#9670;&nbsp;</a></span>cdr_master_print_fn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cdr_master_print_fn </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>v_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>where</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/da5/astobj2_8h.html#af236ed10cd1eddcbad0579ed0cf9f4c5">ao2_prnt_fn</a> *&#160;</td>
          <td class="paramname"><em>prnt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04445">4445</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::bridge</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04522">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;{</div><div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr = v_obj;</div><div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;</div><div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;   }</div><div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;   <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;      prnt(where, <span class="stringliteral">&quot;Party A: %s; Party B: %s; Bridge %s\n&quot;</span>,</div><div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;         it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>,</div><div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;         it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a> ? it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a> : <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>,</div><div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;         it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">bridge</a>);</div><div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;   }</div><div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="structcdr__object_html_af089037b58d169050b5b9242ab0b033f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">cdr_object::bridge</a></div><div class="ttdeci">const ast_string_field bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a737259f181b5de3c4ee0538dde7ca44f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a737259f181b5de3c4ee0538dde7ca44f">&#9670;&nbsp;</a></span>cdr_object_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a>* cdr_object_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct timeval *&#160;</td>
          <td class="paramname"><em>event_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> constructor </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>The <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> that is the CDR's Party A</td></tr>
  </table>
  </dd>
</dl>
<p>This implicitly sets the state of the newly created CDR to the Single state (<a class="el" href="../../dc/df2/cdr_8c.html#a03d77113f205fd4450fe8866dc0f48dd">single_state_fn_table</a>) </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01039">1039</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00463">ao2_t_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00755">ast_atomic_fetchadd_int()</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00255">AST_CDR_NULL</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00353">ast_string_field_init</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00210">CDR_DEBUG</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00999">cdr_object_dtor()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00821">cdr_object_transition_state()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00717">cdr_object::disposition</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00349">global_cdr_sequence</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00736">cdr_object::last</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00721">cdr_object::lastevent</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00122">ast_channel_snapshot_peer::linkedid</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::linkedid</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00147">ast_channel_snapshot::peer</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00722">cdr_object::sequence</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::uniqueid</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l01075">cdr_object_create_and_append()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l02278">handle_channel_snapshot_update_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;{</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(chan != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;   cdr = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*cdr), <a class="code" href="../../dc/df2/cdr_8c.html#ae7d529dbc732a4c6773bdf43fe41135c">cdr_object_dtor</a>);</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;   }</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;   cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a761f66169af05fad3479b4e80ddd6315">last</a> = cdr;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a>(cdr, 64)) {</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr);</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;   }</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cdr, <a class="code" href="../../d4/db4/structcdr__object.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>, chan-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>);</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cdr, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, chan-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cdr, <a class="code" href="../../d4/db4/structcdr__object.html#a4b8afba70b197df95b91f884a12c3480">linkedid</a>, chan-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a91ff51905af3f89b6aab38f42d08adea">peer</a>-&gt;<a class="code" href="../../d5/d88/structast__channel__snapshot__peer.html#afb48324a18171a46c6f11b529cddcd40">linkedid</a>);</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;   cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">disposition</a> = <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2677fdaf6d385ca80373f0666b36b613">AST_CDR_NULL</a>;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;   cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a18ec6560d3738f9c1bc8ed50f2e570c1">sequence</a> = <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;<a class="code" href="../../dc/df2/cdr_8c.html#aaca91b8743296407c372a0c935fd5089">global_cdr_sequence</a>, +1);</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;   cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">lastevent</a> = *event_time;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;   cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a> = chan;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>, +1, <span class="stringliteral">&quot;bump snapshot during CDR creation&quot;</span>);</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>(<span class="stringliteral">&quot;%p - Created CDR for channel %s\n&quot;</span>, cdr, chan-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a>(cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a03d77113f205fd4450fe8866dc0f48dd">single_state_fn_table</a>);</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;   <span class="keywordflow">return</span> cdr;</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a14c61bcab109a520a96d30c56ba5fcde"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a></div><div class="ttdeci">#define ao2_t_ref(o, delta, tag)</div><div class="ttdoc">Reference/unreference an object and return the old refcount. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00463">astobj2.h:463</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="cdr_8c_html_ae7d529dbc732a4c6773bdf43fe41135c"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ae7d529dbc732a4c6773bdf43fe41135c">cdr_object_dtor</a></div><div class="ttdeci">static void cdr_object_dtor(void *obj)</div><div class="ttdoc">cdr_object Destructor </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00999">cdr.c:999</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">ast_channel_snapshot_base::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="structcdr__object_html_a18ec6560d3738f9c1bc8ed50f2e570c1"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a18ec6560d3738f9c1bc8ed50f2e570c1">cdr_object::sequence</a></div><div class="ttdeci">unsigned int sequence</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00722">cdr.c:722</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
<div class="ttc" id="cdr_8c_html_aaca91b8743296407c372a0c935fd5089"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aaca91b8743296407c372a0c935fd5089">global_cdr_sequence</a></div><div class="ttdeci">static int global_cdr_sequence</div><div class="ttdoc">The global sequence counter used for CDRs. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00349">cdr.c:349</a></div></div>
<div class="ttc" id="cdr_8c_html_a8052195443a9cb5835d7d2b3ab7279aa"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a></div><div class="ttdeci">#define CDR_DEBUG(fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00210">cdr.c:210</a></div></div>
<div class="ttc" id="stringfields_8h_html_a871274fa4fd2687c7a44849a84df3665"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a></div><div class="ttdeci">#define ast_string_field_init(x, size)</div><div class="ttdoc">Initialize a field pool and fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00353">stringfields.h:353</a></div></div>
<div class="ttc" id="structcdr__object_html_a4b8afba70b197df95b91f884a12c3480"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4b8afba70b197df95b91f884a12c3480">cdr_object::linkedid</a></div><div class="ttdeci">const ast_string_field linkedid</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structcdr__object_html_a462f09f05430fd152a129a88f52cfce7"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">cdr_object::disposition</a></div><div class="ttdeci">enum ast_cdr_disposition disposition</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00717">cdr.c:717</a></div></div>
<div class="ttc" id="structast__channel__snapshot__peer_html_afb48324a18171a46c6f11b529cddcd40"><div class="ttname"><a href="../../d5/d88/structast__channel__snapshot__peer.html#afb48324a18171a46c6f11b529cddcd40">ast_channel_snapshot_peer::linkedid</a></div><div class="ttdeci">char * linkedid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00122">stasis_channels.h:122</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="structcdr__object_html_a761f66169af05fad3479b4e80ddd6315"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a761f66169af05fad3479b4e80ddd6315">cdr_object::last</a></div><div class="ttdeci">struct cdr_object * last</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00736">cdr.c:736</a></div></div>
<div class="ttc" id="cdr_8c_html_a03d77113f205fd4450fe8866dc0f48dd"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a03d77113f205fd4450fe8866dc0f48dd">single_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table single_state_fn_table</div><div class="ttdoc">The virtual table for the Single state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00573">cdr.c:573</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0a2677fdaf6d385ca80373f0666b36b613"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2677fdaf6d385ca80373f0666b36b613">AST_CDR_NULL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00255">cdr.h:255</a></div></div>
<div class="ttc" id="structcdr__object_html_a7543dbd0c668cd22684e8d5aea0b5b93"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">cdr_object::lastevent</a></div><div class="ttdeci">struct timeval lastevent</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00721">cdr.c:721</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structcdr__object_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a753c7b39e3284d771f13f513b003d033">cdr_object::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_a91ff51905af3f89b6aab38f42d08adea"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#a91ff51905af3f89b6aab38f42d08adea">ast_channel_snapshot::peer</a></div><div class="ttdeci">struct ast_channel_snapshot_peer * peer</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00147">stasis_channels.h:147</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="cdr_8c_html_aec9ada03f8f99aa4c972b141bcbd2ee3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a></div><div class="ttdeci">static void cdr_object_transition_state(struct cdr_object *cdr, struct cdr_object_fn_table *fn_table)</div><div class="ttdoc">Transition a cdr_object to a new state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00821">cdr.c:821</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a89033e69df1c30043f7f2dbdcfd3ec12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89033e69df1c30043f7f2dbdcfd3ec12">&#9670;&nbsp;</a></span>cdr_object_check_party_a_answer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cdr_object_check_party_a_answer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check to see if a CDR needs to be answered based on its Party A. Note that this is safe to call as much as you want - we won't answer twice. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01494">1494</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l00719">cdr_object::answer</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00042">AST_STATE_UP</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00108">ast_tvzero()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00210">CDR_DEBUG</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00721">cdr_object::lastevent</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, and <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00153">ast_channel_snapshot::state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03598">ast_cdr_reset()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01540">base_process_party_a()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02472">bridge_candidate_add_to_cdr()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l01639">single_state_init_function()</a>.</p>
<div class="fragment"><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;{</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;   <span class="keywordflow">if</span> (cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab772a54f7effa7ab06616e36ae30988a">state</a> == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a> &amp;&amp; <a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>)) {</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;      cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a> = cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">lastevent</a>;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;      <span class="comment">/* tv_usec is suseconds_t, which could be int or long */</span></div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>(<span class="stringliteral">&quot;%p - Set answered time to %ld.%06ld\n&quot;</span>, cdr,</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;         (<span class="keywordtype">long</span>)cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>.tv_sec,</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;         (<span class="keywordtype">long</span>)cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>.tv_usec);</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;   }</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;}</div><div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="time_8h_html_a4e7b3508884147c7991a68361ac781a2"><div class="ttname"><a href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a></div><div class="ttdeci">int ast_tvzero(const struct timeval t)</div><div class="ttdoc">Returns true if the argument is 0,0. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00108">time.h:108</a></div></div>
<div class="ttc" id="structcdr__object_html_a621c14aed7c59835c5bc93bc88e8f3d9"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">cdr_object::answer</a></div><div class="ttdeci">struct timeval answer</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00719">cdr.c:719</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00042">channelstate.h:42</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="cdr_8c_html_a8052195443a9cb5835d7d2b3ab7279aa"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a></div><div class="ttdeci">#define CDR_DEBUG(fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00210">cdr.c:210</a></div></div>
<div class="ttc" id="structcdr__object_html_a7543dbd0c668cd22684e8d5aea0b5b93"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">cdr_object::lastevent</a></div><div class="ttdeci">struct timeval lastevent</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00721">cdr.c:721</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ab772a54f7effa7ab06616e36ae30988a"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab772a54f7effa7ab06616e36ae30988a">ast_channel_snapshot::state</a></div><div class="ttdeci">enum ast_channel_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00153">stasis_channels.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6c51536e3755c5538d1c6e9f804f8457"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c51536e3755c5538d1c6e9f804f8457">&#9670;&nbsp;</a></span>cdr_object_check_party_a_hangup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cdr_object_check_party_a_hangup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check to see if a CDR needs to move to the finalized state because its Party A hungup. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01477">1477</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h_source.html#l01046">AST_FLAG_DEAD</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01155">AST_SOFTHANGUP_HANGUP_EXEC</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00224">CDR_END_BEFORE_H_EXTEN</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01440">cdr_object_finalize()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00821">cdr_object_transition_state()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00155">ast_channel_snapshot::flags</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01127">is_cdr_flag_set()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, and <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00156">ast_channel_snapshot::softhangup_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l01540">base_process_party_a()</a>.</p>
<div class="fragment"><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;{</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#acd7e028035da37eabb4e2dd1ca495f0c">softhangup_flags</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a33d9271d8d892501de8c9536382d71ea">AST_SOFTHANGUP_HANGUP_EXEC</a>)</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;      &amp;&amp; <a class="code" href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a>(<a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba951b6a2ed4e5418e5e7bdab6f37061a1">CDR_END_BEFORE_H_EXTEN</a>)) {</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a34a146403fab13026f6e302c753be741">cdr_object_finalize</a>(cdr);</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;   }</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a67415c9cab64152013f660deee6acef6">AST_FLAG_DEAD</a>)</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;      &amp;&amp; cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a> != &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a>) {</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a>(cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a>);</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;   }</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;}</div><div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba951b6a2ed4e5418e5e7bdab6f37061a1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba951b6a2ed4e5418e5e7bdab6f37061a1">CDR_END_BEFORE_H_EXTEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00224">cdr.h:224</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="cdr_8c_html_ab3ba06a4d885b31e4073c047d0dad02d"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a></div><div class="ttdeci">static int is_cdr_flag_set(unsigned int cdr_flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01127">cdr.c:1127</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a67415c9cab64152013f660deee6acef6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a67415c9cab64152013f660deee6acef6">AST_FLAG_DEAD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01046">channel.h:1046</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_acd7e028035da37eabb4e2dd1ca495f0c"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#acd7e028035da37eabb4e2dd1ca495f0c">ast_channel_snapshot::softhangup_flags</a></div><div class="ttdeci">struct ast_flags softhangup_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00156">stasis_channels.h:156</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f50dd95a426c8a70710afc315164f04"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table finalized_state_fn_table</div><div class="ttdoc">The virtual table for the finalized state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00694">cdr.c:694</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#aec78000b2897c094f68ed72559e18acd">ast_channel_snapshot::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00155">stasis_channels.h:155</a></div></div>
<div class="ttc" id="cdr_8c_html_a34a146403fab13026f6e302c753be741"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a34a146403fab13026f6e302c753be741">cdr_object_finalize</a></div><div class="ttdeci">static void cdr_object_finalize(struct cdr_object *cdr)</div><div class="ttdoc">Finalize a CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01440">cdr.c:1440</a></div></div>
<div class="ttc" id="cdr_8c_html_aec9ada03f8f99aa4c972b141bcbd2ee3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a></div><div class="ttdeci">static void cdr_object_transition_state(struct cdr_object *cdr, struct cdr_object_fn_table *fn_table)</div><div class="ttdoc">Transition a cdr_object to a new state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00821">cdr.c:821</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a33d9271d8d892501de8c9536382d71ea"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a33d9271d8d892501de8c9536382d71ea">AST_SOFTHANGUP_HANGUP_EXEC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01155">channel.h:1155</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af90187a3766c8b50aa4b984a62e30219"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af90187a3766c8b50aa4b984a62e30219">&#9670;&nbsp;</a></span>cdr_object_create_and_append()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a>* cdr_object_create_and_append </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct timeval *&#160;</td>
          <td class="paramname"><em>event_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> and append it to an existing chain. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cdr</td><td>The <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> to append to </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01075">1075</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::appl</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00242">AST_CDR_FLAG_DISABLE_ALL</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00255">AST_CDR_NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01039">cdr_object_alloc()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00791">cdr_object_snapshot_copy()</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::context</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::data</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00717">cdr_object::disposition</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00118">exten</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::exten</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00723">cdr_object::flags</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00736">cdr_object::last</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::linkedid</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03637">ast_cdr_fork()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02472">bridge_candidate_add_to_cdr()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02278">handle_channel_snapshot_update_message()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02105">handle_dial_message()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02751">handle_parked_call_message()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02586">handle_parking_bridge_enter_message()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l02627">handle_standard_bridge_enter_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;{</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *new_cdr;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr_last;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;   cdr_last = cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a761f66169af05fad3479b4e80ddd6315">last</a>;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;   new_cdr = <a class="code" href="../../dc/df2/cdr_8c.html#a737259f181b5de3c4ee0538dde7ca44f">cdr_object_alloc</a>(cdr_last-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>, event_time);</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;   <span class="keywordflow">if</span> (!new_cdr) {</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;   }</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;   new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">disposition</a> = <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2677fdaf6d385ca80373f0666b36b613">AST_CDR_NULL</a>;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;   <span class="comment">/* Copy over the linkedid, as it may have changed */</span></div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(new_cdr, <a class="code" href="../../d4/db4/structcdr__object.html#a4b8afba70b197df95b91f884a12c3480">linkedid</a>, cdr_last-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4b8afba70b197df95b91f884a12c3480">linkedid</a>);</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(new_cdr, <a class="code" href="../../d4/db4/structcdr__object.html#af535fe520577fb6b8795dea539bd0230">appl</a>, cdr_last-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af535fe520577fb6b8795dea539bd0230">appl</a>);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(new_cdr, <a class="code" href="../../d4/db4/structcdr__object.html#a7870f447ef3c43ebf148da15363b25dd">data</a>, cdr_last-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7870f447ef3c43ebf148da15363b25dd">data</a>);</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(new_cdr, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, cdr_last-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7faec841658b88ad0cfbc684853acad3">context</a>);</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(new_cdr, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, cdr_last-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#aaee31f4cc48985167efcd38ab252dac8">exten</a>);</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="comment">    * If the current CDR says to disable all future ones,</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="comment">    * keep the disable chain going</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;cdr_last-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a09bf3b22840e16b6d70383a4d46eaaa8">AST_CDR_FLAG_DISABLE_ALL</a>)) {</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a09bf3b22840e16b6d70383a4d46eaaa8">AST_CDR_FLAG_DISABLE_ALL</a>);</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;   }</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;   <span class="comment">/* Copy over other Party A information */</span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a9409d6642fce1018ef347f2fcece7eea">cdr_object_snapshot_copy</a>(&amp;new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>, &amp;cdr_last-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>);</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;   <span class="comment">/* Append the CDR to the end of the list */</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;   <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;      it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a761f66169af05fad3479b4e80ddd6315">last</a> = new_cdr;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;   }</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;   it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a761f66169af05fad3479b4e80ddd6315">last</a> = new_cdr;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;   it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a> = new_cdr;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;   <span class="keywordflow">return</span> new_cdr;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;}</div><div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37a09bf3b22840e16b6d70383a4d46eaaa8"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a09bf3b22840e16b6d70383a4d46eaaa8">AST_CDR_FLAG_DISABLE_ALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00242">cdr.h:242</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="structcdr__object_html_aaee31f4cc48985167efcd38ab252dac8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#aaee31f4cc48985167efcd38ab252dac8">cdr_object::exten</a></div><div class="ttdeci">const ast_string_field exten</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="cdr_8c_html_a737259f181b5de3c4ee0538dde7ca44f"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a737259f181b5de3c4ee0538dde7ca44f">cdr_object_alloc</a></div><div class="ttdeci">static struct cdr_object * cdr_object_alloc(struct ast_channel_snapshot *chan, const struct timeval *event_time)</div><div class="ttdoc">cdr_object constructor </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01039">cdr.c:1039</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="structcdr__object_html_af535fe520577fb6b8795dea539bd0230"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af535fe520577fb6b8795dea539bd0230">cdr_object::appl</a></div><div class="ttdeci">const ast_string_field appl</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structcdr__object_html_a7faec841658b88ad0cfbc684853acad3"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7faec841658b88ad0cfbc684853acad3">cdr_object::context</a></div><div class="ttdeci">const ast_string_field context</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structcdr__object_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">cdr_object::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00723">cdr.c:723</a></div></div>
<div class="ttc" id="structcdr__object_html_a4b8afba70b197df95b91f884a12c3480"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4b8afba70b197df95b91f884a12c3480">cdr_object::linkedid</a></div><div class="ttdeci">const ast_string_field linkedid</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structcdr__object_html_a462f09f05430fd152a129a88f52cfce7"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">cdr_object::disposition</a></div><div class="ttdeci">enum ast_cdr_disposition disposition</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00717">cdr.c:717</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="structcdr__object_html_a761f66169af05fad3479b4e80ddd6315"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a761f66169af05fad3479b4e80ddd6315">cdr_object::last</a></div><div class="ttdeci">struct cdr_object * last</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00736">cdr.c:736</a></div></div>
<div class="ttc" id="structcdr__object_html_a7870f447ef3c43ebf148da15363b25dd"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7870f447ef3c43ebf148da15363b25dd">cdr_object::data</a></div><div class="ttdeci">const ast_string_field data</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0a2677fdaf6d385ca80373f0666b36b613"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2677fdaf6d385ca80373f0666b36b613">AST_CDR_NULL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00255">cdr.h:255</a></div></div>
<div class="ttc" id="cdr_8c_html_a9409d6642fce1018ef347f2fcece7eea"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a9409d6642fce1018ef347f2fcece7eea">cdr_object_snapshot_copy</a></div><div class="ttdeci">static void cdr_object_snapshot_copy(struct cdr_object_snapshot *dst, struct cdr_object_snapshot *src)</div><div class="ttdoc">Copy a snapshot and its details. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00791">cdr.c:791</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7ef86baa7657cc22cd8ca9188ec2a1f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ef86baa7657cc22cd8ca9188ec2a1f6">&#9670;&nbsp;</a></span>cdr_object_create_public_records()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a>* cdr_object_create_public_records </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a chain of <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> objects from a chain of <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> suitable for consumption by the registered CDR backends. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cdr</td><td>The <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> to convert to a public record </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">A</td><td>chain of <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> objects on success </td></tr>
    <tr><td class="paramname">NULL</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01287">1287</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::accountcode</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00308">ast_cdr::accountcode</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00154">ast_channel_snapshot::amaflags</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00306">ast_cdr::amaflags</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00296">ast_cdr::answer</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00719">cdr_object::answer</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::appl</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01073">ast_callerid_merge()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00084">ast_copy_flags</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00196">AST_FLAGS_ALL</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d9/de7/chanvars_8h_source.html#l00040">ast_var_assign</a>, <a class="el" href="../../d9/df9/chanvars_8c_source.html#l00060">ast_var_name()</a>, <a class="el" href="../../d9/df9/chanvars_8c_source.html#l00080">ast_var_value()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00302">ast_cdr::billsec</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00148">ast_channel_snapshot::caller</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01235">cdr_object_get_billsec()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01227">cdr_object_get_duration()</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00286">ast_cdr::channel</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00278">ast_cdr::clid</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::context</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00746">copy_variables()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::data</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00284">ast_cdr::dcontext</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00304">ast_cdr::disposition</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00717">cdr_object::disposition</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00282">ast_cdr::dst</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00288">ast_cdr::dstchannel</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00300">ast_cdr::duration</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00298">ast_cdr::end</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00720">cdr_object::end</a>, <a class="el" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">ast_var_t::entries</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::exten</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00723">cdr_object::flags</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00290">ast_cdr::lastapp</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00292">ast_cdr::lastdata</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00316">ast_cdr::linkedid</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::linkedid</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00087">ast_channel_snapshot_caller::name</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00325">ast_cdr::next</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00087">ast_channel_snapshot_caller::number</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00310">ast_cdr::peeraccount</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00320">ast_cdr::sequence</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00722">cdr_object::sequence</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01179">snapshot_is_dialed()</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00280">ast_cdr::src</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00294">ast_cdr::start</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00718">cdr_object::start</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::uniqueid</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00314">ast_cdr::uniqueid</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00318">ast_cdr::userfield</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00706">cdr_object_snapshot::userfield</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00708">cdr_object_snapshot::variables</a>, and <a class="el" href="../../dc/d07/cdr_8h_source.html#l00323">ast_cdr::varshead</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l01386">cdr_object_dispatch()</a>.</p>
<div class="fragment"><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;{</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *pub_cdr = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *cdr_prev = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *it_var, *it_copy_var;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *party_a;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *party_b;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;   <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *cdr_copy;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;      <span class="comment">/* Don&#39;t create records for CDRs where the party A was a dialed channel */</span></div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#ab5904b00a02181783ce25d816a2e6d68">snapshot_is_dialed</a>(it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>) &amp;&amp; !it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>) {</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;CDR for %s is dialed and has no Party B; discarding\n&quot;</span>,</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;            it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;      }</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      cdr_copy = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*cdr_copy));</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      <span class="keywordflow">if</span> (!cdr_copy) {</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(pub_cdr);</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      }</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      party_a = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      party_b = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      <span class="comment">/* Party A */</span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(party_a != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#adfee50d07a98645d4d20b896ce03785a">accountcode</a>, party_a-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a51b1019903e9032d46119168a3938a16">accountcode</a>, <span class="keyword">sizeof</span>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#adfee50d07a98645d4d20b896ce03785a">accountcode</a>));</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;      cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#aa2112d5526f7d98a80d5da0abea1cc7d">amaflags</a> = party_a-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ad2cfb0f821c065261382a9298bb5a16b">amaflags</a>;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a6396dbd53fd6fedc1fc3ba2743f00eca">channel</a>, party_a-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, <span class="keyword">sizeof</span>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a6396dbd53fd6fedc1fc3ba2743f00eca">channel</a>));</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      <a class="code" href="../../de/d47/callerid_8h.html#a1c25633b1ed63682c95ec613d7cbe559">ast_callerid_merge</a>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#ab7fd8bddf0ce6987ae5e58fb64cfc9e2">clid</a>, <span class="keyword">sizeof</span>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#ab7fd8bddf0ce6987ae5e58fb64cfc9e2">clid</a>), party_a-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">caller</a>-&gt;<a class="code" href="../../d6/d08/structast__channel__snapshot__caller.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, party_a-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">caller</a>-&gt;<a class="code" href="../../d6/d08/structast__channel__snapshot__caller.html#a5a2e9241cdf866a4a02fb075765c87a6">number</a>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#aa8e4f370559b3fe698f36b3132467f94">src</a>, party_a-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">caller</a>-&gt;<a class="code" href="../../d6/d08/structast__channel__snapshot__caller.html#a5a2e9241cdf866a4a02fb075765c87a6">number</a>, <span class="keyword">sizeof</span>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#aa8e4f370559b3fe698f36b3132467f94">src</a>));</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#ac733390e45613f1287d0b1b95e8d18ea">uniqueid</a>, party_a-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>, <span class="keyword">sizeof</span>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#ac733390e45613f1287d0b1b95e8d18ea">uniqueid</a>));</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#ae7697234189954ec7c6a81b4ab691b85">lastapp</a>, it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af535fe520577fb6b8795dea539bd0230">appl</a>, <span class="keyword">sizeof</span>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#ae7697234189954ec7c6a81b4ab691b85">lastapp</a>));</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a2176704f41b4368f2dfa94b64bfcfb6a">lastdata</a>, it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7870f447ef3c43ebf148da15363b25dd">data</a>, <span class="keyword">sizeof</span>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a2176704f41b4368f2dfa94b64bfcfb6a">lastdata</a>));</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#ab30db746a1bf5c869a5dc9dbfaa864d4">dst</a>, it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#aaee31f4cc48985167efcd38ab252dac8">exten</a>, <span class="keyword">sizeof</span>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#ab30db746a1bf5c869a5dc9dbfaa864d4">dst</a>));</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7faec841658b88ad0cfbc684853acad3">context</a>, <span class="keyword">sizeof</span>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>));</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      <span class="comment">/* Party B */</span></div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;      <span class="keywordflow">if</span> (party_b) {</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a0d43f7cac6179c7c4f9521f3138195b4">dstchannel</a>, party_b-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, <span class="keyword">sizeof</span>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a0d43f7cac6179c7c4f9521f3138195b4">dstchannel</a>));</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a68f8603d8857718ec5ac0a42d4a507fa">peeraccount</a>, party_b-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a51b1019903e9032d46119168a3938a16">accountcode</a>, <span class="keyword">sizeof</span>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a68f8603d8857718ec5ac0a42d4a507fa">peeraccount</a>));</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>)) {</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;            snprintf(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>, <span class="keyword">sizeof</span>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>), <span class="stringliteral">&quot;%s;%s&quot;</span>, it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>, it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>);</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;         }</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;      }</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>) &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>)) {</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>, it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>, <span class="keyword">sizeof</span>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>));</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      }</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;      <span class="comment">/* Timestamps/durations */</span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;      cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#ad80305b5e16da9c2675d5f057bd69386">start</a> = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a>;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;      cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a> = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a> = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>;</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a4a98731fed2979292cd6042898671e8d">billsec</a> = <a class="code" href="../../dc/df2/cdr_8c.html#aaa7b9b4b0bda02dc2c931c52879f3640">cdr_object_get_billsec</a>(it_cdr);</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a993dee0d19091c6d48fdeda230fd6be0">duration</a> = <a class="code" href="../../dc/df2/cdr_8c.html#a2852e80c63e181da49149e0a30522140">cdr_object_get_duration</a>(it_cdr);</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;      <span class="comment">/* Flags and IDs */</span></div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab9da1c7265610eff83ed6146f104dc6f">ast_copy_flags</a>(cdr_copy, &amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../d5/d60/utils_8h.html#afb8683b4d96960d7a82a86a974a57599">AST_FLAGS_ALL</a>);</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a2979e8d95424c018bf2c830b28a199d0">linkedid</a>, it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4b8afba70b197df95b91f884a12c3480">linkedid</a>, <span class="keyword">sizeof</span>(cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a2979e8d95424c018bf2c830b28a199d0">linkedid</a>));</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;      cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a1f9669e5d9d64aa831cd9db2dd71534f">disposition</a> = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">disposition</a>;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;      cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#acc80722d9dd9349cbba06c72d6fb5972">sequence</a> = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a18ec6560d3738f9c1bc8ed50f2e570c1">sequence</a>;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;      <span class="comment">/* Variables */</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a7b10f449baa91a185f72f31509abb95f">copy_variables</a>(&amp;cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a9ffb22045a8f14bef8f2137cd779ab25">varshead</a>, &amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>);</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>, it_var, entries) {</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;         <span class="keywordtype">int</span> found = 0;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *newvariable;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a9ffb22045a8f14bef8f2137cd779ab25">varshead</a>, it_copy_var, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>) {</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;            <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d9/de7/chanvars_8h.html#a356a31cd608ec07d3668dcd589be49d8">ast_var_name</a>(it_var), <a class="code" href="../../d9/de7/chanvars_8h.html#a356a31cd608ec07d3668dcd589be49d8">ast_var_name</a>(it_copy_var))) {</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;               found = 1;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;            }</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;         }</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;         <span class="keywordflow">if</span> (!found &amp;&amp; (newvariable = <a class="code" href="../../d9/de7/chanvars_8h.html#a78deeb18e93b145e9895346cef766577">ast_var_assign</a>(<a class="code" href="../../d9/de7/chanvars_8h.html#a356a31cd608ec07d3668dcd589be49d8">ast_var_name</a>(it_var), <a class="code" href="../../d9/de7/chanvars_8h.html#a8e0081172db71c5021d20706c50d959c">ast_var_value</a>(it_var)))) {</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;cdr_copy-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a9ffb22045a8f14bef8f2137cd779ab25">varshead</a>, newvariable, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>);</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;         }</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;      }</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;      <span class="keywordflow">if</span> (!pub_cdr) {</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;         pub_cdr = cdr_copy;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;         cdr_prev = pub_cdr;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;         cdr_prev-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a8098d02138e27b57d184b260b6669eed">next</a> = cdr_copy;</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;         cdr_prev = cdr_copy;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;      }</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;   }</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;   <span class="keywordflow">return</span> pub_cdr;</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;}</div><div class="ttc" id="cdr_8c_html_aaa7b9b4b0bda02dc2c931c52879f3640"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aaa7b9b4b0bda02dc2c931c52879f3640">cdr_object_get_billsec</a></div><div class="ttdeci">static long cdr_object_get_billsec(struct cdr_object *cdr)</div><div class="ttdoc">Compute the billsec for a cdr_object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01235">cdr.c:1235</a></div></div>
<div class="ttc" id="structast__cdr_html_adfee50d07a98645d4d20b896ce03785a"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#adfee50d07a98645d4d20b896ce03785a">ast_cdr::accountcode</a></div><div class="ttdeci">char accountcode[AST_MAX_ACCOUNT_CODE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00308">cdr.h:308</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a2e42d02e62d0d56d645c901011bb767b"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">cdr_object_snapshot::variables</a></div><div class="ttdeci">struct varshead variables</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00708">cdr.c:708</a></div></div>
<div class="ttc" id="structast__cdr_html_a0d43f7cac6179c7c4f9521f3138195b4"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a0d43f7cac6179c7c4f9521f3138195b4">ast_cdr::dstchannel</a></div><div class="ttdeci">char dstchannel[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00288">cdr.h:288</a></div></div>
<div class="ttc" id="structast__channel__snapshot__caller_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d08/structast__channel__snapshot__caller.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_caller::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00087">stasis_channels.h:87</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="chanvars_8h_html_a8e0081172db71c5021d20706c50d959c"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#a8e0081172db71c5021d20706c50d959c">ast_var_value</a></div><div class="ttdeci">const char * ast_var_value(const struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df9/chanvars_8c_source.html#l00080">chanvars.c:80</a></div></div>
<div class="ttc" id="chanvars_8h_html_a356a31cd608ec07d3668dcd589be49d8"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#a356a31cd608ec07d3668dcd589be49d8">ast_var_name</a></div><div class="ttdeci">const char * ast_var_name(const struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df9/chanvars_8c_source.html#l00060">chanvars.c:60</a></div></div>
<div class="ttc" id="structast__cdr_html_a4a98731fed2979292cd6042898671e8d"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a4a98731fed2979292cd6042898671e8d">ast_cdr::billsec</a></div><div class="ttdeci">long int billsec</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00302">cdr.h:302</a></div></div>
<div class="ttc" id="structast__cdr_html_a8098d02138e27b57d184b260b6669eed"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a8098d02138e27b57d184b260b6669eed">ast_cdr::next</a></div><div class="ttdeci">struct ast_cdr * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00325">cdr.h:325</a></div></div>
<div class="ttc" id="structast__cdr_html_af27d556683a4a28e6564618bcf00bec1"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#af27d556683a4a28e6564618bcf00bec1">ast_cdr::dcontext</a></div><div class="ttdeci">char dcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00284">cdr.h:284</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="structast__cdr_html_acc80722d9dd9349cbba06c72d6fb5972"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#acc80722d9dd9349cbba06c72d6fb5972">ast_cdr::sequence</a></div><div class="ttdeci">int sequence</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00320">cdr.h:320</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_a51b1019903e9032d46119168a3938a16"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#a51b1019903e9032d46119168a3938a16">ast_channel_snapshot_base::accountcode</a></div><div class="ttdeci">const ast_string_field accountcode</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="structcdr__object_html_aaee31f4cc48985167efcd38ab252dac8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#aaee31f4cc48985167efcd38ab252dac8">cdr_object::exten</a></div><div class="ttdeci">const ast_string_field exten</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structcdr__object_html_a621c14aed7c59835c5bc93bc88e8f3d9"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">cdr_object::answer</a></div><div class="ttdeci">struct timeval answer</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00719">cdr.c:719</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">ast_channel_snapshot_base::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="structcdr__object_html_a18ec6560d3738f9c1bc8ed50f2e570c1"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a18ec6560d3738f9c1bc8ed50f2e570c1">cdr_object::sequence</a></div><div class="ttdeci">unsigned int sequence</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00722">cdr.c:722</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="utils_8h_html_ab9da1c7265610eff83ed6146f104dc6f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab9da1c7265610eff83ed6146f104dc6f">ast_copy_flags</a></div><div class="ttdeci">#define ast_copy_flags(dest, src, flagz)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00084">utils.h:84</a></div></div>
<div class="ttc" id="structcdr__object_html_ad80305b5e16da9c2675d5f057bd69386"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">cdr_object::start</a></div><div class="ttdeci">struct timeval start</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00718">cdr.c:718</a></div></div>
<div class="ttc" id="cdr_8c_html_a7b10f449baa91a185f72f31509abb95f"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a7b10f449baa91a185f72f31509abb95f">copy_variables</a></div><div class="ttdeci">static int copy_variables(struct varshead *to_list, struct varshead *from_list)</div><div class="ttdoc">Copy variables from one list to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00746">cdr.c:746</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr_8c_html_a2852e80c63e181da49149e0a30522140"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a2852e80c63e181da49149e0a30522140">cdr_object_get_duration</a></div><div class="ttdeci">static long cdr_object_get_duration(struct cdr_object *cdr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01227">cdr.c:1227</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structcdr__object_html_af535fe520577fb6b8795dea539bd0230"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af535fe520577fb6b8795dea539bd0230">cdr_object::appl</a></div><div class="ttdeci">const ast_string_field appl</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structast__cdr_html_a9ffb22045a8f14bef8f2137cd779ab25"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a9ffb22045a8f14bef8f2137cd779ab25">ast_cdr::varshead</a></div><div class="ttdeci">struct varshead varshead</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00323">cdr.h:323</a></div></div>
<div class="ttc" id="structcdr__object_html_a7faec841658b88ad0cfbc684853acad3"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7faec841658b88ad0cfbc684853acad3">cdr_object::context</a></div><div class="ttdeci">const ast_string_field context</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structast__cdr_html_a2176704f41b4368f2dfa94b64bfcfb6a"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a2176704f41b4368f2dfa94b64bfcfb6a">ast_cdr::lastdata</a></div><div class="ttdeci">char lastdata[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00292">cdr.h:292</a></div></div>
<div class="ttc" id="structast__cdr_html_aa2112d5526f7d98a80d5da0abea1cc7d"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#aa2112d5526f7d98a80d5da0abea1cc7d">ast_cdr::amaflags</a></div><div class="ttdeci">long int amaflags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00306">cdr.h:306</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a2d480b13820a3a97582a1a138036aa25"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">cdr_object_snapshot::userfield</a></div><div class="ttdeci">char userfield[AST_MAX_USER_FIELD]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00706">cdr.c:706</a></div></div>
<div class="ttc" id="structcdr__object_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">cdr_object::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00723">cdr.c:723</a></div></div>
<div class="ttc" id="callerid_8h_html_a1c25633b1ed63682c95ec613d7cbe559"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a1c25633b1ed63682c95ec613d7cbe559">ast_callerid_merge</a></div><div class="ttdeci">char * ast_callerid_merge(char *buf, int bufsiz, const char *name, const char *num, const char *unknown)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01073">callerid.c:1073</a></div></div>
<div class="ttc" id="structast__cdr_html_a2979e8d95424c018bf2c830b28a199d0"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a2979e8d95424c018bf2c830b28a199d0">ast_cdr::linkedid</a></div><div class="ttdeci">char linkedid[AST_MAX_UNIQUEID]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00316">cdr.h:316</a></div></div>
<div class="ttc" id="structcdr__object_html_a4b8afba70b197df95b91f884a12c3480"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4b8afba70b197df95b91f884a12c3480">cdr_object::linkedid</a></div><div class="ttdeci">const ast_string_field linkedid</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structast__cdr_html_ac733390e45613f1287d0b1b95e8d18ea"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#ac733390e45613f1287d0b1b95e8d18ea">ast_cdr::uniqueid</a></div><div class="ttdeci">char uniqueid[AST_MAX_UNIQUEID]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00314">cdr.h:314</a></div></div>
<div class="ttc" id="structast__cdr_html_ab30db746a1bf5c869a5dc9dbfaa864d4"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#ab30db746a1bf5c869a5dc9dbfaa864d4">ast_cdr::dst</a></div><div class="ttdeci">char dst[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00282">cdr.h:282</a></div></div>
<div class="ttc" id="structast__cdr_html_a6396dbd53fd6fedc1fc3ba2743f00eca"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a6396dbd53fd6fedc1fc3ba2743f00eca">ast_cdr::channel</a></div><div class="ttdeci">char channel[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00286">cdr.h:286</a></div></div>
<div class="ttc" id="structcdr__object_html_a462f09f05430fd152a129a88f52cfce7"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">cdr_object::disposition</a></div><div class="ttdeci">enum ast_cdr_disposition disposition</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00717">cdr.c:717</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ae7248b764758e655df26036dd6b8f4d7"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">ast_channel_snapshot::caller</a></div><div class="ttdeci">struct ast_channel_snapshot_caller * caller</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00148">stasis_channels.h:148</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="structast__cdr_html_a621c14aed7c59835c5bc93bc88e8f3d9"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a621c14aed7c59835c5bc93bc88e8f3d9">ast_cdr::answer</a></div><div class="ttdeci">struct timeval answer</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00296">cdr.h:296</a></div></div>
<div class="ttc" id="structast__cdr_html"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html">ast_cdr</a></div><div class="ttdoc">Responsible for call detail data. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00276">cdr.h:276</a></div></div>
<div class="ttc" id="structast__cdr_html_ae7697234189954ec7c6a81b4ab691b85"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#ae7697234189954ec7c6a81b4ab691b85">ast_cdr::lastapp</a></div><div class="ttdeci">char lastapp[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00290">cdr.h:290</a></div></div>
<div class="ttc" id="structcdr__object_html_a7870f447ef3c43ebf148da15363b25dd"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7870f447ef3c43ebf148da15363b25dd">cdr_object::data</a></div><div class="ttdeci">const ast_string_field data</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="structast__var__t_html"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html">ast_var_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00028">chanvars.h:28</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ad2cfb0f821c065261382a9298bb5a16b"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ad2cfb0f821c065261382a9298bb5a16b">ast_channel_snapshot::amaflags</a></div><div class="ttdeci">int amaflags</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00154">stasis_channels.h:154</a></div></div>
<div class="ttc" id="cdr_8c_html_ab5904b00a02181783ce25d816a2e6d68"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ab5904b00a02181783ce25d816a2e6d68">snapshot_is_dialed</a></div><div class="ttdeci">static int snapshot_is_dialed(struct ast_channel_snapshot *snapshot)</div><div class="ttdoc">Return whether or not a ast_channel_snapshot is for a channel that was created as the result of a dia...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01179">cdr.c:1179</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structcdr__object_html_af5249cf68dff13dd1dcca5929f4f3a5b"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">cdr_object::end</a></div><div class="ttdeci">struct timeval end</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00720">cdr.c:720</a></div></div>
<div class="ttc" id="structast__cdr_html_ad80305b5e16da9c2675d5f057bd69386"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#ad80305b5e16da9c2675d5f057bd69386">ast_cdr::start</a></div><div class="ttdeci">struct timeval start</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00294">cdr.h:294</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structast__var__t_html_a55d5c7988e3164d7310d88c67d97a1db"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">ast_var_t::entries</a></div><div class="ttdeci">struct ast_var_t::@249 entries</div></div>
<div class="ttc" id="utils_8h_html_afb8683b4d96960d7a82a86a974a57599"><div class="ttname"><a href="../../d5/d60/utils_8h.html#afb8683b4d96960d7a82a86a974a57599">AST_FLAGS_ALL</a></div><div class="ttdeci">#define AST_FLAGS_ALL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00196">utils.h:196</a></div></div>
<div class="ttc" id="chanvars_8h_html_a78deeb18e93b145e9895346cef766577"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#a78deeb18e93b145e9895346cef766577">ast_var_assign</a></div><div class="ttdeci">#define ast_var_assign(name, value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00040">chanvars.h:40</a></div></div>
<div class="ttc" id="structast__cdr_html_a993dee0d19091c6d48fdeda230fd6be0"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a993dee0d19091c6d48fdeda230fd6be0">ast_cdr::duration</a></div><div class="ttdeci">long int duration</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00300">cdr.h:300</a></div></div>
<div class="ttc" id="structast__cdr_html_aa8e4f370559b3fe698f36b3132467f94"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#aa8e4f370559b3fe698f36b3132467f94">ast_cdr::src</a></div><div class="ttdeci">char src[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00280">cdr.h:280</a></div></div>
<div class="ttc" id="structast__cdr_html_a68f8603d8857718ec5ac0a42d4a507fa"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a68f8603d8857718ec5ac0a42d4a507fa">ast_cdr::peeraccount</a></div><div class="ttdeci">char peeraccount[AST_MAX_ACCOUNT_CODE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00310">cdr.h:310</a></div></div>
<div class="ttc" id="structast__cdr_html_af5249cf68dff13dd1dcca5929f4f3a5b"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#af5249cf68dff13dd1dcca5929f4f3a5b">ast_cdr::end</a></div><div class="ttdeci">struct timeval end</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00298">cdr.h:298</a></div></div>
<div class="ttc" id="structast__channel__snapshot__caller_html_a5a2e9241cdf866a4a02fb075765c87a6"><div class="ttname"><a href="../../d6/d08/structast__channel__snapshot__caller.html#a5a2e9241cdf866a4a02fb075765c87a6">ast_channel_snapshot_caller::number</a></div><div class="ttdeci">const ast_string_field number</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00087">stasis_channels.h:87</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structast__cdr_html_a1f9669e5d9d64aa831cd9db2dd71534f"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a1f9669e5d9d64aa831cd9db2dd71534f">ast_cdr::disposition</a></div><div class="ttdeci">long int disposition</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00304">cdr.h:304</a></div></div>
<div class="ttc" id="structast__cdr_html_ab7fd8bddf0ce6987ae5e58fb64cfc9e2"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#ab7fd8bddf0ce6987ae5e58fb64cfc9e2">ast_cdr::clid</a></div><div class="ttdeci">char clid[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00278">cdr.h:278</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="structast__cdr_html_a2d480b13820a3a97582a1a138036aa25"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a2d480b13820a3a97582a1a138036aa25">ast_cdr::userfield</a></div><div class="ttdeci">char userfield[AST_MAX_USER_FIELD]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00318">cdr.h:318</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5444a54e2ceea8a25176f88a839f1786"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5444a54e2ceea8a25176f88a839f1786">&#9670;&nbsp;</a></span>cdr_object_dispatch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cdr_object_dispatch </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Dispatch a CDR. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cdr</td><td>The <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> to dispatch</td></tr>
  </table>
  </dd>
</dl>
<p>This will create a <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> object and publish it to the various backends </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01386">1386</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00210">CDR_DEBUG</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03841">cdr_detach()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01287">cdr_object_create_public_records()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04260">cdr_object_dispatch_all_cb()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l02278">handle_channel_snapshot_update_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;{</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *pub_cdr;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>(<span class="stringliteral">&quot;%p - Dispatching CDR for Party A %s, Party B %s\n&quot;</span>, cdr,</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;      cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>,</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;      cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a> ? cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a> : <span class="stringliteral">&quot;&lt;none&gt;&quot;</span>);</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;   pub_cdr = <a class="code" href="../../dc/df2/cdr_8c.html#a7ef86baa7657cc22cd8ca9188ec2a1f6">cdr_object_create_public_records</a>(cdr);</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a3c1412651d3d5121de1ef7c473dac3b4">cdr_detach</a>(pub_cdr);</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="cdr_8c_html_a8052195443a9cb5835d7d2b3ab7279aa"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a></div><div class="ttdeci">#define CDR_DEBUG(fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00210">cdr.c:210</a></div></div>
<div class="ttc" id="cdr_8c_html_a3c1412651d3d5121de1ef7c473dac3b4"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3c1412651d3d5121de1ef7c473dac3b4">cdr_detach</a></div><div class="ttdeci">static void cdr_detach(struct ast_cdr *cdr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03841">cdr.c:3841</a></div></div>
<div class="ttc" id="structast__cdr_html"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html">ast_cdr</a></div><div class="ttdoc">Responsible for call detail data. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00276">cdr.h:276</a></div></div>
<div class="ttc" id="cdr_8c_html_a7ef86baa7657cc22cd8ca9188ec2a1f6"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a7ef86baa7657cc22cd8ca9188ec2a1f6">cdr_object_create_public_records</a></div><div class="ttdeci">static struct ast_cdr * cdr_object_create_public_records(struct cdr_object *cdr)</div><div class="ttdoc">Create a chain of ast_cdr objects from a chain of cdr_object suitable for consumption by the register...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01287">cdr.c:1287</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0b4b598a8c5733e77b60de4440599b97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b4b598a8c5733e77b60de4440599b97">&#9670;&nbsp;</a></span>cdr_object_dispatch_all_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cdr_object_dispatch_all_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This dispatches <em>all</em> cdr_objects. It should only be used during shutdown, so that we get billing records for everything that we can. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04260">4260</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00972">cdr_all_unlink()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01386">cdr_object_dispatch()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00821">cdr_object_transition_state()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04385">cdr_engine_shutdown()</a>.</p>
<div class="fragment"><div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;{</div><div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr = obj;</div><div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;</div><div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cdr);</div><div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;   <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a>(it_cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a>);</div><div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;   }</div><div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a5444a54e2ceea8a25176f88a839f1786">cdr_object_dispatch</a>(cdr);</div><div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cdr);</div><div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;</div><div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a20aa34dca45895c5ccd7a0b580987ab9">cdr_all_unlink</a>(cdr);</div><div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;</div><div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a>;</div><div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a20aa34dca45895c5ccd7a0b580987ab9"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a20aa34dca45895c5ccd7a0b580987ab9">cdr_all_unlink</a></div><div class="ttdeci">static void cdr_all_unlink(struct cdr_object *cdr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00972">cdr.c:972</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="cdr_8c_html_a5444a54e2ceea8a25176f88a839f1786"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5444a54e2ceea8a25176f88a839f1786">cdr_object_dispatch</a></div><div class="ttdeci">static void cdr_object_dispatch(struct cdr_object *cdr)</div><div class="ttdoc">Dispatch a CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01386">cdr.c:1386</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f50dd95a426c8a70710afc315164f04"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table finalized_state_fn_table</div><div class="ttdoc">The virtual table for the finalized state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00694">cdr.c:694</a></div></div>
<div class="ttc" id="cdr_8c_html_aec9ada03f8f99aa4c972b141bcbd2ee3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a></div><div class="ttdeci">static void cdr_object_transition_state(struct cdr_object *cdr, struct cdr_object_fn_table *fn_table)</div><div class="ttdoc">Transition a cdr_object to a new state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00821">cdr.c:821</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae7d529dbc732a4c6773bdf43fe41135c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7d529dbc732a4c6773bdf43fe41135c">&#9670;&nbsp;</a></span>cdr_object_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cdr_object_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> Destructor </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00999">999</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00368">ast_string_field_free_memory</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02473">ast_var_delete()</a>, <a class="el" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">ast_var_t::entries</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00737">cdr_object::is_root</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00708">cdr_object_snapshot::variables</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l01039">cdr_object_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;{</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr = obj;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *it_var;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>);</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>);</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;   <span class="keywordflow">while</span> ((it_var = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>))) {</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      <a class="code" href="../../d9/de7/chanvars_8h.html#ae19fa022349aa0481f982ccced85d7ba">ast_var_delete</a>(it_var);</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;   }</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;   <span class="keywordflow">while</span> ((it_var = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>))) {</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      <a class="code" href="../../d9/de7/chanvars_8h.html#ae19fa022349aa0481f982ccced85d7ba">ast_var_delete</a>(it_var);</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;   }</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a>(cdr);</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;   <span class="comment">/* CDR destruction used to work by calling ao2_cleanup(next) and</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;<span class="comment">    * allowing the chain to destroy itself neatly. Unfortunately, for</span></div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="comment">    * really long chains, this can result in a stack overflow. So now</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;<span class="comment">    * when the root CDR is destroyed, it is responsible for unreffing</span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="comment">    * all CDRs in the chain</span></div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;   <span class="keywordflow">if</span> (cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ab1698365bf93a298c99e61c9f99c1d34">is_root</a>) {</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *curr = cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;      <span class="keywordflow">while</span> (curr) {</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;         next = curr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(curr);</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;         curr = <a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;      }</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;   }</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;}</div><div class="ttc" id="structcdr__object__snapshot_html_a2e42d02e62d0d56d645c901011bb767b"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">cdr_object_snapshot::variables</a></div><div class="ttdeci">struct varshead variables</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00708">cdr.c:708</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="structcdr__object_html_ab1698365bf93a298c99e61c9f99c1d34"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#ab1698365bf93a298c99e61c9f99c1d34">cdr_object::is_root</a></div><div class="ttdeci">int is_root</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00737">cdr.c:737</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="structast__var__t_html"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html">ast_var_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00028">chanvars.h:28</a></div></div>
<div class="ttc" id="chanvars_8h_html_ae19fa022349aa0481f982ccced85d7ba"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#ae19fa022349aa0481f982ccced85d7ba">ast_var_delete</a></div><div class="ttdeci">void ast_var_delete(struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02473">extconf.c:2473</a></div></div>
<div class="ttc" id="structast__var__t_html_a55d5c7988e3164d7310d88c67d97a1db"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">ast_var_t::entries</a></div><div class="ttdeci">struct ast_var_t::@249 entries</div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stringfields_8h_html_abf60f862ae6a141d2f86a0f5e82792de"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a></div><div class="ttdeci">#define ast_string_field_free_memory(x)</div><div class="ttdoc">free all memory - to be called before destroying the object </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00368">stringfields.h:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a34a146403fab13026f6e302c753be741"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34a146403fab13026f6e302c753be741">&#9670;&nbsp;</a></span>cdr_object_finalize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cdr_object_finalize </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finalize a CDR. </p>
<p>This function is safe to call multiple times. Note that you can call this explicitly before going to the finalized state if there's a chance the CDR will be re-activated, in which case the <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a>'s end time should be cleared. This function is implicitly called when a CDR transitions to the finalized state and right before it is dispatched</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"><a class="el" href="../../d4/db4/structcdr__object.html" title="An in-memory representation of an active CDR. ">cdr_object</a></td><td>The CDR to finalize </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01440">1440</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l00719">cdr_object::answer</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00258">AST_CDR_ANSWERED</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03430">ast_cdr_disp2str()</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00256">AST_CDR_FAILED</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00255">AST_CDR_NULL</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00108">ast_tvzero()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00131">ast_channel_snapshot_hangup::cause</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01402">cdr_object_set_disposition()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00717">cdr_object::disposition</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00720">cdr_object::end</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00152">ast_channel_snapshot::hangup</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00721">cdr_object::lastevent</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00718">cdr_object::start</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03637">ast_cdr_fork()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01540">base_process_party_a()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01477">cdr_object_check_party_a_hangup()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02196">cdr_object_finalize_party_b()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02361">cdr_object_party_b_left_bridge_cb()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01880">dial_state_process_bridge_enter()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02044">finalized_state_init_function()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02278">handle_channel_snapshot_update_message()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02627">handle_standard_bridge_enter_message()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l01692">single_state_bridge_enter_comparison()</a>.</p>
<div class="fragment"><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;{</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>)) {</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;   }</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;   cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a> = cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">lastevent</a>;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;   <span class="keywordflow">if</span> (cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">disposition</a> == <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2677fdaf6d385ca80373f0666b36b613">AST_CDR_NULL</a>) {</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>)) {</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;         cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">disposition</a> = <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ac3e47d059a0e67a03f822f10bb7ec5b1">AST_CDR_ANSWERED</a>;</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#af8a29cb15ed6c5226ac2064afbf9ae55">hangup</a>-&gt;<a class="code" href="../../d4/d7a/structast__channel__snapshot__hangup.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a>) {</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#ab6f0c67eb7eb3db1986267c0f64eacd1">cdr_object_set_disposition</a>(cdr, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#af8a29cb15ed6c5226ac2064afbf9ae55">hangup</a>-&gt;<a class="code" href="../../d4/d7a/structast__channel__snapshot__hangup.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a>);</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a> &amp;&amp; cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#af8a29cb15ed6c5226ac2064afbf9ae55">hangup</a>-&gt;<a class="code" href="../../d4/d7a/structast__channel__snapshot__hangup.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a>) {</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#ab6f0c67eb7eb3db1986267c0f64eacd1">cdr_object_set_disposition</a>(cdr, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#af8a29cb15ed6c5226ac2064afbf9ae55">hangup</a>-&gt;<a class="code" href="../../d4/d7a/structast__channel__snapshot__hangup.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a>);</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;         cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">disposition</a> = <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0af31f029a69fc67c7fca424569f708143">AST_CDR_FAILED</a>;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;      }</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;   }</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;   <span class="comment">/* tv_usec is suseconds_t, which could be int or long */</span></div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Finalized CDR for %s - start %ld.%06ld answer %ld.%06ld end %ld.%06ld dur %.3f bill %.3f dispo %s\n&quot;</span>,</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;         cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>,</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;         (<span class="keywordtype">long</span>)cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a>.tv_sec,</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;         (<span class="keywordtype">long</span>)cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a>.tv_usec,</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;         (<span class="keywordtype">long</span>)cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>.tv_sec,</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;         (<span class="keywordtype">long</span>)cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>.tv_usec,</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;         (<span class="keywordtype">long</span>)cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>.tv_sec,</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;         (<span class="keywordtype">long</span>)cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>.tv_usec,</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;         (<span class="keywordtype">double</span>)<a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a>) / 1000.0,</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;         (<span class="keywordtype">double</span>)<a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>) / 1000.0,</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#a0e23f3be8d570dbc8e6c872c566c09d9">ast_cdr_disp2str</a>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">disposition</a>));</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="time_8h_html_a4e7b3508884147c7991a68361ac781a2"><div class="ttname"><a href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a></div><div class="ttdeci">int ast_tvzero(const struct timeval t)</div><div class="ttdoc">Returns true if the argument is 0,0. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00108">time.h:108</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0af31f029a69fc67c7fca424569f708143"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0af31f029a69fc67c7fca424569f708143">AST_CDR_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00256">cdr.h:256</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0ac3e47d059a0e67a03f822f10bb7ec5b1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ac3e47d059a0e67a03f822f10bb7ec5b1">AST_CDR_ANSWERED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00258">cdr.h:258</a></div></div>
<div class="ttc" id="structcdr__object_html_a621c14aed7c59835c5bc93bc88e8f3d9"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">cdr_object::answer</a></div><div class="ttdeci">struct timeval answer</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00719">cdr.c:719</a></div></div>
<div class="ttc" id="cdr_8c_html_ab6f0c67eb7eb3db1986267c0f64eacd1"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ab6f0c67eb7eb3db1986267c0f64eacd1">cdr_object_set_disposition</a></div><div class="ttdeci">static void cdr_object_set_disposition(struct cdr_object *cdr, int hangupcause)</div><div class="ttdoc">Set the disposition on a cdr_object based on a hangupcause code. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01402">cdr.c:1402</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="structcdr__object_html_ad80305b5e16da9c2675d5f057bd69386"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">cdr_object::start</a></div><div class="ttdeci">struct timeval start</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00718">cdr.c:718</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structast__channel__snapshot__hangup_html_aa4d0ccb9d0904892652f2f258c5ad225"><div class="ttname"><a href="../../d4/d7a/structast__channel__snapshot__hangup.html#aa4d0ccb9d0904892652f2f258c5ad225">ast_channel_snapshot_hangup::cause</a></div><div class="ttdeci">int cause</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00131">stasis_channels.h:131</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_af8a29cb15ed6c5226ac2064afbf9ae55"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#af8a29cb15ed6c5226ac2064afbf9ae55">ast_channel_snapshot::hangup</a></div><div class="ttdeci">struct ast_channel_snapshot_hangup * hangup</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00152">stasis_channels.h:152</a></div></div>
<div class="ttc" id="structcdr__object_html_a462f09f05430fd152a129a88f52cfce7"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">cdr_object::disposition</a></div><div class="ttdeci">enum ast_cdr_disposition disposition</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00717">cdr.c:717</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0a2677fdaf6d385ca80373f0666b36b613"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2677fdaf6d385ca80373f0666b36b613">AST_CDR_NULL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00255">cdr.h:255</a></div></div>
<div class="ttc" id="structcdr__object_html_a7543dbd0c668cd22684e8d5aea0b5b93"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">cdr_object::lastevent</a></div><div class="ttdeci">struct timeval lastevent</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00721">cdr.c:721</a></div></div>
<div class="ttc" id="structcdr__object_html_af5249cf68dff13dd1dcca5929f4f3a5b"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">cdr_object::end</a></div><div class="ttdeci">struct timeval end</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00720">cdr.c:720</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="cdr_8c_html_a0e23f3be8d570dbc8e6c872c566c09d9"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a0e23f3be8d570dbc8e6c872c566c09d9">ast_cdr_disp2str</a></div><div class="ttdeci">const char * ast_cdr_disp2str(int disposition)</div><div class="ttdoc">Disposition to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03430">cdr.c:3430</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c2c48505a390f6206a8344cae18ed91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c2c48505a390f6206a8344cae18ed91">&#9670;&nbsp;</a></span>cdr_object_finalize_party_b()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cdr_object_finalize_party_b </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02196">2196</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01440">cdr_object_finalize()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::party_b_name</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02278">handle_channel_snapshot_update_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;{</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr = obj;</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a54251e2cf4677a9009fd91bb86f4d4d2">party_b_name</a>, arg)) {</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *party_b = data;</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;<span class="comment">       * For sanity&#39;s sake we also assert the party_b snapshot</span></div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;<span class="comment">       * is consistent with the key.</span></div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a></div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;         &amp;&amp; !strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, party_b-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>));</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;      <span class="comment">/* Don&#39;t transition to the finalized state - let the Party A do</span></div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;<span class="comment">       * that when its ready</span></div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a34a146403fab13026f6e302c753be741">cdr_object_finalize</a>(cdr);</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;   }</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="structcdr__object_html_a54251e2cf4677a9009fd91bb86f4d4d2"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a54251e2cf4677a9009fd91bb86f4d4d2">cdr_object::party_b_name</a></div><div class="ttdeci">const ast_string_field party_b_name</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="cdr_8c_html_a34a146403fab13026f6e302c753be741"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a34a146403fab13026f6e302c753be741">cdr_object_finalize</a></div><div class="ttdeci">static void cdr_object_finalize(struct cdr_object *cdr)</div><div class="ttdoc">Finalize a CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01440">cdr.c:1440</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0cdc281513509f0204d371e2c51fd18e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cdc281513509f0204d371e2c51fd18e">&#9670;&nbsp;</a></span>cdr_object_format_property()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cdr_object_format_property </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Format one of the standard properties on a <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03243">3243</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::accountcode</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00154">ast_channel_snapshot::amaflags</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00719">cdr_object::answer</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00070">ast_channel_snapshot_dialplan::appl</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01073">ast_callerid_merge()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00148">ast_channel_snapshot::caller</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03035">cdr_get_tv()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01235">cdr_object_get_billsec()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01227">cdr_object_get_duration()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00070">ast_channel_snapshot_dialplan::context</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00070">ast_channel_snapshot_dialplan::data</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00151">ast_channel_snapshot::dialplan</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00717">cdr_object::disposition</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00720">cdr_object::end</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00070">ast_channel_snapshot_dialplan::exten</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::linkedid</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00087">ast_channel_snapshot_caller::name</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00087">ast_channel_snapshot_caller::number</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00722">cdr_object::sequence</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00718">cdr_object::start</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::uniqueid</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00706">cdr_object_snapshot::userfield</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03324">ast_cdr_getvar()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03353">ast_cdr_serialize_variables()</a>.</p>
<div class="fragment"><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;{</div><div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *party_a = cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>;</div><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *party_b = cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>;</div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;</div><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;clid&quot;</span>)) {</div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;      <a class="code" href="../../de/d47/callerid_8h.html#a1c25633b1ed63682c95ec613d7cbe559">ast_callerid_merge</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, length, party_a-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">caller</a>-&gt;<a class="code" href="../../d6/d08/structast__channel__snapshot__caller.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, party_a-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">caller</a>-&gt;<a class="code" href="../../d6/d08/structast__channel__snapshot__caller.html#a5a2e9241cdf866a4a02fb075765c87a6">number</a>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;src&quot;</span>)) {</div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, party_a-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">caller</a>-&gt;<a class="code" href="../../d6/d08/structast__channel__snapshot__caller.html#a5a2e9241cdf866a4a02fb075765c87a6">number</a>, length);</div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;dst&quot;</span>)) {</div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, party_a-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#aaee31f4cc48985167efcd38ab252dac8">exten</a>, length);</div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;dcontext&quot;</span>)) {</div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, party_a-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#a7faec841658b88ad0cfbc684853acad3">context</a>, length);</div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;channel&quot;</span>)) {</div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, party_a-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, length);</div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;dstchannel&quot;</span>)) {</div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;      <span class="keywordflow">if</span> (party_b) {</div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, party_b-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, length);</div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, <span class="stringliteral">&quot;&quot;</span>, length);</div><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;      }</div><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;lastapp&quot;</span>)) {</div><div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, party_a-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#af535fe520577fb6b8795dea539bd0230">appl</a>, length);</div><div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;lastdata&quot;</span>)) {</div><div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, party_a-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#a7870f447ef3c43ebf148da15363b25dd">data</a>, length);</div><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;start&quot;</span>)) {</div><div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a26ef22f050d742f08715473a63720bb5">cdr_get_tv</a>(cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, length);</div><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;answer&quot;</span>)) {</div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a26ef22f050d742f08715473a63720bb5">cdr_get_tv</a>(cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, length);</div><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;end&quot;</span>)) {</div><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a26ef22f050d742f08715473a63720bb5">cdr_get_tv</a>(cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, length);</div><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;duration&quot;</span>)) {</div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;      snprintf(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, length, <span class="stringliteral">&quot;%ld&quot;</span>, <a class="code" href="../../dc/df2/cdr_8c.html#a2852e80c63e181da49149e0a30522140">cdr_object_get_duration</a>(cdr_obj));</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;billsec&quot;</span>)) {</div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;      snprintf(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, length, <span class="stringliteral">&quot;%ld&quot;</span>, <a class="code" href="../../dc/df2/cdr_8c.html#aaa7b9b4b0bda02dc2c931c52879f3640">cdr_object_get_billsec</a>(cdr_obj));</div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;disposition&quot;</span>)) {</div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;      snprintf(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, length, <span class="stringliteral">&quot;%u&quot;</span>, cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">disposition</a>);</div><div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;amaflags&quot;</span>)) {</div><div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;      snprintf(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, length, <span class="stringliteral">&quot;%d&quot;</span>, party_a-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ad2cfb0f821c065261382a9298bb5a16b">amaflags</a>);</div><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;accountcode&quot;</span>)) {</div><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, party_a-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a51b1019903e9032d46119168a3938a16">accountcode</a>, length);</div><div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;peeraccount&quot;</span>)) {</div><div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;      <span class="keywordflow">if</span> (party_b) {</div><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, party_b-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a51b1019903e9032d46119168a3938a16">accountcode</a>, length);</div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, <span class="stringliteral">&quot;&quot;</span>, length);</div><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;      }</div><div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;uniqueid&quot;</span>)) {</div><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, party_a-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>, length);</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;linkedid&quot;</span>)) {</div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4b8afba70b197df95b91f884a12c3480">linkedid</a>, length);</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;userfield&quot;</span>)) {</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>, length);</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;sequence&quot;</span>)) {</div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;      snprintf(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, length, <span class="stringliteral">&quot;%u&quot;</span>, cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a18ec6560d3738f9c1bc8ed50f2e570c1">sequence</a>);</div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;   }</div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;</div><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot__dialplan_html_a7870f447ef3c43ebf148da15363b25dd"><div class="ttname"><a href="../../dc/d3d/structast__channel__snapshot__dialplan.html#a7870f447ef3c43ebf148da15363b25dd">ast_channel_snapshot_dialplan::data</a></div><div class="ttdeci">const ast_string_field data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00070">stasis_channels.h:70</a></div></div>
<div class="ttc" id="cdr_8c_html_aaa7b9b4b0bda02dc2c931c52879f3640"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aaa7b9b4b0bda02dc2c931c52879f3640">cdr_object_get_billsec</a></div><div class="ttdeci">static long cdr_object_get_billsec(struct cdr_object *cdr)</div><div class="ttdoc">Compute the billsec for a cdr_object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01235">cdr.c:1235</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structast__channel__snapshot__caller_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d08/structast__channel__snapshot__caller.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_caller::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00087">stasis_channels.h:87</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_a51b1019903e9032d46119168a3938a16"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#a51b1019903e9032d46119168a3938a16">ast_channel_snapshot_base::accountcode</a></div><div class="ttdeci">const ast_string_field accountcode</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="structcdr__object_html_a621c14aed7c59835c5bc93bc88e8f3d9"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">cdr_object::answer</a></div><div class="ttdeci">struct timeval answer</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00719">cdr.c:719</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">ast_channel_snapshot_base::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="structcdr__object_html_a18ec6560d3738f9c1bc8ed50f2e570c1"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a18ec6560d3738f9c1bc8ed50f2e570c1">cdr_object::sequence</a></div><div class="ttdeci">unsigned int sequence</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00722">cdr.c:722</a></div></div>
<div class="ttc" id="structcdr__object_html_ad80305b5e16da9c2675d5f057bd69386"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">cdr_object::start</a></div><div class="ttdeci">struct timeval start</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00718">cdr.c:718</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr_8c_html_a2852e80c63e181da49149e0a30522140"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a2852e80c63e181da49149e0a30522140">cdr_object_get_duration</a></div><div class="ttdeci">static long cdr_object_get_duration(struct cdr_object *cdr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01227">cdr.c:1227</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_a5be1fb9b43b051b087f6952b6346909a"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">ast_channel_snapshot::dialplan</a></div><div class="ttdeci">struct ast_channel_snapshot_dialplan * dialplan</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00151">stasis_channels.h:151</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="structast__channel__snapshot__dialplan_html_a7faec841658b88ad0cfbc684853acad3"><div class="ttname"><a href="../../dc/d3d/structast__channel__snapshot__dialplan.html#a7faec841658b88ad0cfbc684853acad3">ast_channel_snapshot_dialplan::context</a></div><div class="ttdeci">const ast_string_field context</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00070">stasis_channels.h:70</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a2d480b13820a3a97582a1a138036aa25"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">cdr_object_snapshot::userfield</a></div><div class="ttdeci">char userfield[AST_MAX_USER_FIELD]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00706">cdr.c:706</a></div></div>
<div class="ttc" id="callerid_8h_html_a1c25633b1ed63682c95ec613d7cbe559"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a1c25633b1ed63682c95ec613d7cbe559">ast_callerid_merge</a></div><div class="ttdeci">char * ast_callerid_merge(char *buf, int bufsiz, const char *name, const char *num, const char *unknown)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01073">callerid.c:1073</a></div></div>
<div class="ttc" id="structast__channel__snapshot__dialplan_html_af535fe520577fb6b8795dea539bd0230"><div class="ttname"><a href="../../dc/d3d/structast__channel__snapshot__dialplan.html#af535fe520577fb6b8795dea539bd0230">ast_channel_snapshot_dialplan::appl</a></div><div class="ttdeci">const ast_string_field appl</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00070">stasis_channels.h:70</a></div></div>
<div class="ttc" id="structcdr__object_html_a4b8afba70b197df95b91f884a12c3480"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4b8afba70b197df95b91f884a12c3480">cdr_object::linkedid</a></div><div class="ttdeci">const ast_string_field linkedid</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structast__channel__snapshot__dialplan_html_aaee31f4cc48985167efcd38ab252dac8"><div class="ttname"><a href="../../dc/d3d/structast__channel__snapshot__dialplan.html#aaee31f4cc48985167efcd38ab252dac8">ast_channel_snapshot_dialplan::exten</a></div><div class="ttdeci">const ast_string_field exten</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00070">stasis_channels.h:70</a></div></div>
<div class="ttc" id="cdr_8c_html_a26ef22f050d742f08715473a63720bb5"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a26ef22f050d742f08715473a63720bb5">cdr_get_tv</a></div><div class="ttdeci">static void cdr_get_tv(struct timeval when, const char *fmt, char *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03035">cdr.c:3035</a></div></div>
<div class="ttc" id="structcdr__object_html_a462f09f05430fd152a129a88f52cfce7"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">cdr_object::disposition</a></div><div class="ttdeci">enum ast_cdr_disposition disposition</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00717">cdr.c:717</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ae7248b764758e655df26036dd6b8f4d7"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">ast_channel_snapshot::caller</a></div><div class="ttdeci">struct ast_channel_snapshot_caller * caller</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00148">stasis_channels.h:148</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ad2cfb0f821c065261382a9298bb5a16b"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ad2cfb0f821c065261382a9298bb5a16b">ast_channel_snapshot::amaflags</a></div><div class="ttdeci">int amaflags</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00154">stasis_channels.h:154</a></div></div>
<div class="ttc" id="structcdr__object_html_af5249cf68dff13dd1dcca5929f4f3a5b"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">cdr_object::end</a></div><div class="ttdeci">struct timeval end</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00720">cdr.c:720</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structast__channel__snapshot__caller_html_a5a2e9241cdf866a4a02fb075765c87a6"><div class="ttname"><a href="../../d6/d08/structast__channel__snapshot__caller.html#a5a2e9241cdf866a4a02fb075765c87a6">ast_channel_snapshot_caller::number</a></div><div class="ttdeci">const ast_string_field number</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00087">stasis_channels.h:87</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a950160d2c2449f652f0342b416909030"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a950160d2c2449f652f0342b416909030">&#9670;&nbsp;</a></span>cdr_object_format_var_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cdr_object_format_var_internal </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Format a variable on a <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03226">3226</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../d9/df9/chanvars_8c_source.html#l00060">ast_var_name()</a>, <a class="el" href="../../d9/df9/chanvars_8c_source.html#l00080">ast_var_value()</a>, <a class="el" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">ast_var_t::entries</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00708">cdr_object_snapshot::variables</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03324">ast_cdr_getvar()</a>.</p>
<div class="fragment"><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;{</div><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *variable;</div><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;</div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>, variable, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>) {</div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d9/de7/chanvars_8h.html#a356a31cd608ec07d3668dcd589be49d8">ast_var_name</a>(variable))) {</div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, <a class="code" href="../../d9/de7/chanvars_8h.html#a8e0081172db71c5021d20706c50d959c">ast_var_value</a>(variable), length);</div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;      }</div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;   }</div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;</div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;   *<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;}</div><div class="ttc" id="structcdr__object__snapshot_html_a2e42d02e62d0d56d645c901011bb767b"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">cdr_object_snapshot::variables</a></div><div class="ttdeci">struct varshead variables</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00708">cdr.c:708</a></div></div>
<div class="ttc" id="chanvars_8h_html_a8e0081172db71c5021d20706c50d959c"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#a8e0081172db71c5021d20706c50d959c">ast_var_value</a></div><div class="ttdeci">const char * ast_var_value(const struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df9/chanvars_8c_source.html#l00080">chanvars.c:80</a></div></div>
<div class="ttc" id="chanvars_8h_html_a356a31cd608ec07d3668dcd589be49d8"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#a356a31cd608ec07d3668dcd589be49d8">ast_var_name</a></div><div class="ttdeci">const char * ast_var_name(const struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df9/chanvars_8c_source.html#l00060">chanvars.c:60</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="structast__var__t_html"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html">ast_var_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00028">chanvars.h:28</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structast__var__t_html_a55d5c7988e3164d7310d88c67d97a1db"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">ast_var_t::entries</a></div><div class="ttdeci">struct ast_var_t::@249 entries</div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa7b9b4b0bda02dc2c931c52879f3640"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa7b9b4b0bda02dc2c931c52879f3640">&#9670;&nbsp;</a></span>cdr_object_get_billsec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static long cdr_object_get_billsec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute the billsec for a <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01235">1235</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l00719">cdr_object::answer</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00108">ast_tvzero()</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00225">CDR_INITIATED_SECONDS</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00720">cdr_object::end</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l01127">is_cdr_flag_set()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l01287">cdr_object_create_public_records()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03243">cdr_object_format_property()</a>.</p>
<div class="fragment"><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;{</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;   <span class="keywordtype">long</span> <span class="keywordtype">int</span> ms;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>)) {</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;   }</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;   ms = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>) ? <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>() : cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>);</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;   <span class="keywordflow">if</span> (ms % 1000 &gt;= 500</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      &amp;&amp; <a class="code" href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a>(<a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba33f9a78176524d40c46cb4fd28440ffd">CDR_INITIATED_SECONDS</a>)) {</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      ms = (ms / 1000) + 1;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      ms = ms / 1000;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;   }</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;   <span class="keywordflow">return</span> ms;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;}</div><div class="ttc" id="cdr_8c_html_ab3ba06a4d885b31e4073c047d0dad02d"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a></div><div class="ttdeci">static int is_cdr_flag_set(unsigned int cdr_flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01127">cdr.c:1127</a></div></div>
<div class="ttc" id="time_8h_html_a4e7b3508884147c7991a68361ac781a2"><div class="ttname"><a href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a></div><div class="ttdeci">int ast_tvzero(const struct timeval t)</div><div class="ttdoc">Returns true if the argument is 0,0. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00108">time.h:108</a></div></div>
<div class="ttc" id="structcdr__object_html_a621c14aed7c59835c5bc93bc88e8f3d9"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">cdr_object::answer</a></div><div class="ttdeci">struct timeval answer</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00719">cdr.c:719</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba33f9a78176524d40c46cb4fd28440ffd"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba33f9a78176524d40c46cb4fd28440ffd">CDR_INITIATED_SECONDS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00225">cdr.h:225</a></div></div>
<div class="ttc" id="structcdr__object_html_af5249cf68dff13dd1dcca5929f4f3a5b"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">cdr_object::end</a></div><div class="ttdeci">struct timeval end</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00720">cdr.c:720</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a89dc924870cf4d81f8841a3b4f33d722"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89dc924870cf4d81f8841a3b4f33d722">&#9670;&nbsp;</a></span>cdr_object_get_by_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a>* cdr_object_get_by_name </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03312">3312</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01716">ao2_callback</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03142">cdr_object_get_by_name_cb()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03575">ast_cdr_clear_property()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03637">ast_cdr_fork()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03324">ast_cdr_getvar()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03598">ast_cdr_reset()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03353">ast_cdr_serialize_variables()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03548">ast_cdr_set_property()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03477">ast_cdr_setuserfield()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l04055">cli_show_channel()</a>.</p>
<div class="fragment"><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;{</div><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;   <span class="keywordtype">char</span> *param;</div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;</div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>)) {</div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;   }</div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;</div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;   param = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(<a class="code" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a>, 0, <a class="code" href="../../dc/df2/cdr_8c.html#ac3bae5915bf7ced464da5700ba9257cd">cdr_object_get_by_name_cb</a>, param);</div><div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;}</div><div class="ttc" id="cdr_8c_html_ac3bae5915bf7ced464da5700ba9257cd"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ac3bae5915bf7ced464da5700ba9257cd">cdr_object_get_by_name_cb</a></div><div class="ttdeci">static int cdr_object_get_by_name_cb(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03142">cdr.c:3142</a></div></div>
<div class="ttc" id="astobj2_8h_html_a47857055118a703ae87ea5ebaf4842ed"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a></div><div class="ttdeci">#define ao2_callback(c, flags, cb_fn, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01716">astobj2.h:1716</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="cdr_8c_html_aabd874b0958bde3e08b5a876c2d1a395"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_master</div><div class="ttdoc">A container of the active master CDRs indexed by Party A channel uniqueid. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00365">cdr.c:365</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3bae5915bf7ced464da5700ba9257cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3bae5915bf7ced464da5700ba9257cd">&#9670;&nbsp;</a></span>cdr_object_get_by_name_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cdr_object_get_by_name_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03142">3142</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03312">cdr_object_get_by_name()</a>.</p>
<div class="fragment"><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;{</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr = obj;</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = arg;</div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, name)) {</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a>;</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;   }</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2852e80c63e181da49149e0a30522140"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2852e80c63e181da49149e0a30522140">&#9670;&nbsp;</a></span>cdr_object_get_duration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static long cdr_object_get_duration </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Compute the duration for a <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01227">1227</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00108">ast_tvzero()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00720">cdr_object::end</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00718">cdr_object::start</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l01287">cdr_object_create_public_records()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03243">cdr_object_format_property()</a>.</p>
<div class="fragment"><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;{</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;   <span class="keywordflow">return</span> (<span class="keywordtype">long</span>)(<a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>) ? <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>() : cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a>) / 1000);</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;}</div><div class="ttc" id="time_8h_html_a4e7b3508884147c7991a68361ac781a2"><div class="ttname"><a href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a></div><div class="ttdeci">int ast_tvzero(const struct timeval t)</div><div class="ttdoc">Returns true if the argument is 0,0. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00108">time.h:108</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="structcdr__object_html_ad80305b5e16da9c2675d5f057bd69386"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">cdr_object::start</a></div><div class="ttdeci">struct timeval start</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00718">cdr.c:718</a></div></div>
<div class="ttc" id="structcdr__object_html_af5249cf68dff13dd1dcca5929f4f3a5b"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">cdr_object::end</a></div><div class="ttdeci">struct timeval end</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00720">cdr.c:720</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae391d5e66065256893c2ef6c784e6d9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae391d5e66065256893c2ef6c784e6d9f">&#9670;&nbsp;</a></span>cdr_object_party_b_left_bridge_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cdr_object_party_b_left_bridge_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback used to notify CDRs of a Party B leaving the bridge. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02361">2361</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::bridge</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02355">bridge_leave_data::bridge</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01440">cdr_object_finalize()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02356">bridge_leave_data::channel</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00721">cdr_object::lastevent</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02357">bridge_leave_data::lastevent</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::party_b_name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02404">handle_bridge_leave_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;{</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr = obj;</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d82/structbridge__leave__data.html">bridge_leave_data</a> *leave_data = data;</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;   <span class="keywordflow">if</span> (cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a> == &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a4213ec53168931f1d566f40e32870c4c">bridge_state_fn_table</a></div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;      &amp;&amp; !strcmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">bridge</a>, leave_data-&gt;<a class="code" href="../../d7/d82/structbridge__leave__data.html#a820b583b07f0cf97618ca22d73cd8f09">bridge</a>-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>)</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;      &amp;&amp; !strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a54251e2cf4677a9009fd91bb86f4d4d2">party_b_name</a>, arg)) {</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;<span class="comment">       * For sanity&#39;s sake we also assert the party_b snapshot</span></div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;<span class="comment">       * is consistent with the key.</span></div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a></div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;         &amp;&amp; !strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, leave_data-&gt;<a class="code" href="../../d7/d82/structbridge__leave__data.html#a8ee8cdf03a2b9d3424011cb6875751fa">channel</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>));</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;      <span class="comment">/* It is our Party B, in our bridge. Set the last event and let the handler</span></div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;<span class="comment">       * transition our CDR appropriately when we leave the bridge.</span></div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;      cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">lastevent</a> = *leave_data-&gt;<a class="code" href="../../d7/d82/structbridge__leave__data.html#a054f38f65fc1ce8357f5b431a19e7e05">lastevent</a>;</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a34a146403fab13026f6e302c753be741">cdr_object_finalize</a>(cdr);</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;   }</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;}</div><div class="ttc" id="structbridge__leave__data_html_a820b583b07f0cf97618ca22d73cd8f09"><div class="ttname"><a href="../../d7/d82/structbridge__leave__data.html#a820b583b07f0cf97618ca22d73cd8f09">bridge_leave_data::bridge</a></div><div class="ttdeci">struct ast_bridge_snapshot * bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02355">cdr.c:2355</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structbridge__leave__data_html_a8ee8cdf03a2b9d3424011cb6875751fa"><div class="ttname"><a href="../../d7/d82/structbridge__leave__data.html#a8ee8cdf03a2b9d3424011cb6875751fa">bridge_leave_data::channel</a></div><div class="ttdeci">struct ast_channel_snapshot * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02356">cdr.c:2356</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="structcdr__object_html_a54251e2cf4677a9009fd91bb86f4d4d2"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a54251e2cf4677a9009fd91bb86f4d4d2">cdr_object::party_b_name</a></div><div class="ttdeci">const ast_string_field party_b_name</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structcdr__object_html_a7543dbd0c668cd22684e8d5aea0b5b93"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">cdr_object::lastevent</a></div><div class="ttdeci">struct timeval lastevent</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00721">cdr.c:721</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">ast_bridge_snapshot::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="structbridge__leave__data_html_a054f38f65fc1ce8357f5b431a19e7e05"><div class="ttname"><a href="../../d7/d82/structbridge__leave__data.html#a054f38f65fc1ce8357f5b431a19e7e05">bridge_leave_data::lastevent</a></div><div class="ttdeci">const struct timeval * lastevent</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02357">cdr.c:2357</a></div></div>
<div class="ttc" id="cdr_8c_html_a4213ec53168931f1d566f40e32870c4c"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a4213ec53168931f1d566f40e32870c4c">bridge_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table bridge_state_fn_table</div><div class="ttdoc">The virtual table for the Bridged state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00659">cdr.c:659</a></div></div>
<div class="ttc" id="cdr_8c_html_a34a146403fab13026f6e302c753be741"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a34a146403fab13026f6e302c753be741">cdr_object_finalize</a></div><div class="ttdeci">static void cdr_object_finalize(struct cdr_object *cdr)</div><div class="ttdoc">Finalize a CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01440">cdr.c:1440</a></div></div>
<div class="ttc" id="structbridge__leave__data_html"><div class="ttname"><a href="../../d7/d82/structbridge__leave__data.html">bridge_leave_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02354">cdr.c:2354</a></div></div>
<div class="ttc" id="structcdr__object_html_af089037b58d169050b5b9242ab0b033f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">cdr_object::bridge</a></div><div class="ttdeci">const ast_string_field bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a46fb3c14485f999d7039c7b9fb3f33d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46fb3c14485f999d7039c7b9fb3f33d9">&#9670;&nbsp;</a></span>cdr_object_pick_party_a()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a>* cdr_object_pick_party_a </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a> *&#160;</td>
          <td class="paramname"><em>left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a> *&#160;</td>
          <td class="paramname"><em>right</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given two CDR snapshots, figure out who should be Party A for the resulting CDR. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">left</td><td>One of the snapshots </td></tr>
    <tr><td class="paramname">right</td><td>The other snapshot </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">The</td><td>snapshot that won </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01192">1192</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d07/cdr_8h_source.html#l00243">AST_CDR_FLAG_PARTY_A</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00113">ast_channel_snapshot_base::creationtime</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l01179">snapshot_is_dialed()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02503">bridge_candidate_process()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l01692">single_state_bridge_enter_comparison()</a>.</p>
<div class="fragment"><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;{</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;   <span class="comment">/* Check whether or not the party is dialed. A dialed party is never the</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="comment">    * Party A with a party that was not dialed.</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/df2/cdr_8c.html#ab5904b00a02181783ce25d816a2e6d68">snapshot_is_dialed</a>(left-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>) &amp;&amp; <a class="code" href="../../dc/df2/cdr_8c.html#ab5904b00a02181783ce25d816a2e6d68">snapshot_is_dialed</a>(right-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>)) {</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      <span class="keywordflow">return</span> left;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#ab5904b00a02181783ce25d816a2e6d68">snapshot_is_dialed</a>(left-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>) &amp;&amp; !<a class="code" href="../../dc/df2/cdr_8c.html#ab5904b00a02181783ce25d816a2e6d68">snapshot_is_dialed</a>(right-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>)) {</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      <span class="keywordflow">return</span> right;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;   }</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;   <span class="comment">/* Try the Party A flag */</span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(left, <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a9f4db679b58ed0fbc91017c7b0302ac6">AST_CDR_FLAG_PARTY_A</a>) &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(right, <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a9f4db679b58ed0fbc91017c7b0302ac6">AST_CDR_FLAG_PARTY_A</a>)) {</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;      <span class="keywordflow">return</span> left;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(right, <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a9f4db679b58ed0fbc91017c7b0302ac6">AST_CDR_FLAG_PARTY_A</a>) &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(right, <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a9f4db679b58ed0fbc91017c7b0302ac6">AST_CDR_FLAG_PARTY_A</a>)) {</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;      <span class="keywordflow">return</span> right;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;   }</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;   <span class="comment">/* Neither party is dialed and neither has the Party A flag - defer to</span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="comment">    * creation time */</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;   <span class="keywordflow">if</span> (left-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">creationtime</a>.tv_sec &lt; right-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">creationtime</a>.tv_sec) {</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;      <span class="keywordflow">return</span> left;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (left-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">creationtime</a>.tv_sec &gt; right-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">creationtime</a>.tv_sec) {</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      <span class="keywordflow">return</span> right;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (left-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">creationtime</a>.tv_usec &gt; right-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">creationtime</a>.tv_usec) {</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;      <span class="keywordflow">return</span> right;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;      <span class="comment">/* Okay, fine, take the left one */</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      <span class="keywordflow">return</span> left;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;   }</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_a298ce3dfc9b5b8a8351e8ed103aa7e5c"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">ast_channel_snapshot_base::creationtime</a></div><div class="ttdeci">struct timeval creationtime</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00113">stasis_channels.h:113</a></div></div>
<div class="ttc" id="cdr_8c_html_ab5904b00a02181783ce25d816a2e6d68"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ab5904b00a02181783ce25d816a2e6d68">snapshot_is_dialed</a></div><div class="ttdeci">static int snapshot_is_dialed(struct ast_channel_snapshot *snapshot)</div><div class="ttdoc">Return whether or not a ast_channel_snapshot is for a channel that was created as the result of a dia...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01179">cdr.c:1179</a></div></div>
<div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37a9f4db679b58ed0fbc91017c7b0302ac6"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a9f4db679b58ed0fbc91017c7b0302ac6">AST_CDR_FLAG_PARTY_A</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00243">cdr.h:243</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4b0de636092270f4f2b0ecff29eb6135"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b0de636092270f4f2b0ecff29eb6135">&#9670;&nbsp;</a></span>cdr_object_select_all_by_name_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cdr_object_select_all_by_name_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03126">3126</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03178">ast_cdr_setvar()</a>.</p>
<div class="fragment"><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;{</div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr = obj;</div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = arg;</div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;</div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, name) ||</div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;         (cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a> &amp;&amp; !strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, name))) {</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a>;</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;   }</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab6f0c67eb7eb3db1986267c0f64eacd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6f0c67eb7eb3db1986267c0f64eacd1">&#9670;&nbsp;</a></span>cdr_object_set_disposition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cdr_object_set_disposition </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>hangupcause</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the disposition on a <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> based on a hangupcause code. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cdr</td><td>The <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> </td></tr>
    <tr><td class="paramname">hangupcause</td><td>The Asterisk hangup cause code </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01402">1402</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/da3/causes_8h_source.html#l00148">AST_CAUSE_BUSY</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00152">AST_CAUSE_CONGESTION</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00108">AST_CAUSE_NO_ANSWER</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00099">AST_CAUSE_NO_ROUTE_DESTINATION</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00105">AST_CAUSE_NORMAL_CLEARING</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00153">AST_CAUSE_UNREGISTERED</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00257">AST_CDR_BUSY</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00259">AST_CDR_CONGESTION</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00256">AST_CDR_FAILED</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00254">AST_CDR_NOANSWER</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00223">CDR_CONGESTION</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00717">cdr_object::disposition</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l01127">is_cdr_flag_set()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l01440">cdr_object_finalize()</a>.</p>
<div class="fragment"><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;{</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;   <span class="comment">/* Change the disposition based on the hang up cause */</span></div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;   <span class="keywordflow">switch</span> (hangupcause) {</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#ae009c193522491f7de7ea28b23f20868">AST_CAUSE_BUSY</a>:</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;      cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">disposition</a> = <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ad5945e6977fe7c1d64bacadaad7aa9ea">AST_CDR_BUSY</a>;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#a0a35518d7b448a53da368cf57f354fba">AST_CAUSE_CONGESTION</a>:</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a>(<a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11bac7e09eacc1390ca5ae2adf3f8cb7f487">CDR_CONGESTION</a>)) {</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;         cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">disposition</a> = <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0af31f029a69fc67c7fca424569f708143">AST_CDR_FAILED</a>;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;         cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">disposition</a> = <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a115c062baa559bcadd55720d6e2383bd">AST_CDR_CONGESTION</a>;</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      }</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#ace4ceec464072bb9e269b6a52e7a6631">AST_CAUSE_NO_ROUTE_DESTINATION</a>:</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#acfea62de81ffbf78fd4856ad9ded150b">AST_CAUSE_UNREGISTERED</a>:</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;      cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">disposition</a> = <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0af31f029a69fc67c7fca424569f708143">AST_CDR_FAILED</a>;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>:</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#af03fc9fe2f0ecc69330e014aff8d0f73">AST_CAUSE_NO_ANSWER</a>:</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;      cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">disposition</a> = <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2ae5ddf52a9d2a20fc4af7b9e5dde283">AST_CDR_NOANSWER</a>;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;   }</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;}</div><div class="ttc" id="cdr_8c_html_ab3ba06a4d885b31e4073c047d0dad02d"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a></div><div class="ttdeci">static int is_cdr_flag_set(unsigned int cdr_flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01127">cdr.c:1127</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0a2ae5ddf52a9d2a20fc4af7b9e5dde283"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2ae5ddf52a9d2a20fc4af7b9e5dde283">AST_CDR_NOANSWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00254">cdr.h:254</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0af31f029a69fc67c7fca424569f708143"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0af31f029a69fc67c7fca424569f708143">AST_CDR_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00256">cdr.h:256</a></div></div>
<div class="ttc" id="causes_8h_html_af2235eb1c27925e4020ce286255d165f"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_CLEARING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00105">causes.h:105</a></div></div>
<div class="ttc" id="causes_8h_html_af03fc9fe2f0ecc69330e014aff8d0f73"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af03fc9fe2f0ecc69330e014aff8d0f73">AST_CAUSE_NO_ANSWER</a></div><div class="ttdeci">#define AST_CAUSE_NO_ANSWER</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00108">causes.h:108</a></div></div>
<div class="ttc" id="structcdr__object_html_a462f09f05430fd152a129a88f52cfce7"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">cdr_object::disposition</a></div><div class="ttdeci">enum ast_cdr_disposition disposition</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00717">cdr.c:717</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11bac7e09eacc1390ca5ae2adf3f8cb7f487"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11bac7e09eacc1390ca5ae2adf3f8cb7f487">CDR_CONGESTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00223">cdr.h:223</a></div></div>
<div class="ttc" id="causes_8h_html_acfea62de81ffbf78fd4856ad9ded150b"><div class="ttname"><a href="../../d4/da3/causes_8h.html#acfea62de81ffbf78fd4856ad9ded150b">AST_CAUSE_UNREGISTERED</a></div><div class="ttdeci">#define AST_CAUSE_UNREGISTERED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00153">causes.h:153</a></div></div>
<div class="ttc" id="causes_8h_html_ace4ceec464072bb9e269b6a52e7a6631"><div class="ttname"><a href="../../d4/da3/causes_8h.html#ace4ceec464072bb9e269b6a52e7a6631">AST_CAUSE_NO_ROUTE_DESTINATION</a></div><div class="ttdeci">#define AST_CAUSE_NO_ROUTE_DESTINATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00099">causes.h:99</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0ad5945e6977fe7c1d64bacadaad7aa9ea"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ad5945e6977fe7c1d64bacadaad7aa9ea">AST_CDR_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00257">cdr.h:257</a></div></div>
<div class="ttc" id="causes_8h_html_ae009c193522491f7de7ea28b23f20868"><div class="ttname"><a href="../../d4/da3/causes_8h.html#ae009c193522491f7de7ea28b23f20868">AST_CAUSE_BUSY</a></div><div class="ttdeci">#define AST_CAUSE_BUSY</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00148">causes.h:148</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0a115c062baa559bcadd55720d6e2383bd"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a115c062baa559bcadd55720d6e2383bd">AST_CDR_CONGESTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00259">cdr.h:259</a></div></div>
<div class="ttc" id="causes_8h_html_a0a35518d7b448a53da368cf57f354fba"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a0a35518d7b448a53da368cf57f354fba">AST_CAUSE_CONGESTION</a></div><div class="ttdeci">#define AST_CAUSE_CONGESTION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00152">causes.h:152</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9409d6642fce1018ef347f2fcece7eea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9409d6642fce1018ef347f2fcece7eea">&#9670;&nbsp;</a></span>cdr_object_snapshot_copy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cdr_object_snapshot_copy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a> *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a> *&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copy a snapshot and its details. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dst</td><td>The destination </td></tr>
    <tr><td class="paramname">src</td><td>The source </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00791">791</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00503">ao2_t_replace</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00746">copy_variables()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00707">cdr_object_snapshot::flags</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00706">cdr_object_snapshot::userfield</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00708">cdr_object_snapshot::variables</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02472">bridge_candidate_add_to_cdr()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02503">bridge_candidate_process()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01075">cdr_object_create_and_append()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01880">dial_state_process_bridge_enter()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l01692">single_state_bridge_enter_comparison()</a>.</p>
<div class="fragment"><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;{</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a4534db0cd85f31e51255441d6c18267b">ao2_t_replace</a>(dst-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>, src-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>, <span class="stringliteral">&quot;CDR snapshot copy&quot;</span>);</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;   strcpy(dst-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>, src-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;   dst-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#ac92588540e8c1d014a08cd8a45462b19">flags</a> = src-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#ac92588540e8c1d014a08cd8a45462b19">flags</a>;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a7b10f449baa91a185f72f31509abb95f">copy_variables</a>(&amp;dst-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>, &amp;src-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>);</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;}</div><div class="ttc" id="structcdr__object__snapshot_html_a2e42d02e62d0d56d645c901011bb767b"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">cdr_object_snapshot::variables</a></div><div class="ttdeci">struct varshead variables</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00708">cdr.c:708</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="astobj2_8h_html_a4534db0cd85f31e51255441d6c18267b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a4534db0cd85f31e51255441d6c18267b">ao2_t_replace</a></div><div class="ttdeci">#define ao2_t_replace(dst, src, tag)</div><div class="ttdoc">Replace one object reference with another cleaning up the original. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00503">astobj2.h:503</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_ac92588540e8c1d014a08cd8a45462b19"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#ac92588540e8c1d014a08cd8a45462b19">cdr_object_snapshot::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00707">cdr.c:707</a></div></div>
<div class="ttc" id="cdr_8c_html_a7b10f449baa91a185f72f31509abb95f"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a7b10f449baa91a185f72f31509abb95f">copy_variables</a></div><div class="ttdeci">static int copy_variables(struct varshead *to_list, struct varshead *from_list)</div><div class="ttdoc">Copy variables from one list to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00746">cdr.c:746</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a2d480b13820a3a97582a1a138036aa25"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">cdr_object_snapshot::userfield</a></div><div class="ttdeci">char userfield[AST_MAX_USER_FIELD]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00706">cdr.c:706</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5f169319f8865c4f86897f944ae0f00c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f169319f8865c4f86897f944ae0f00c">&#9670;&nbsp;</a></span>cdr_object_swap_snapshot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cdr_object_swap_snapshot </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a> *&#160;</td>
          <td class="paramname"><em>old_snapshot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>new_snapshot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Swap an old <a class="el" href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a>'s <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> for a new <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">old_snapshot</td><td>The old <a class="el" href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a> </td></tr>
    <tr><td class="paramname">new_snapshot</td><td>The new <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> for old_snapshot </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01531">1531</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00503">ao2_t_replace</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01506">cdr_object_update_cid()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l01540">base_process_party_a()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02002">bridge_state_process_party_b()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01848">dial_state_process_dial_end()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01802">dial_state_process_party_b()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l01653">single_state_process_dial_begin()</a>.</p>
<div class="fragment"><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;{</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#ae17c6fb1569bdee3442031db51476073">cdr_object_update_cid</a>(old_snapshot, new_snapshot);</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a4534db0cd85f31e51255441d6c18267b">ao2_t_replace</a>(old_snapshot-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>, new_snapshot, <span class="stringliteral">&quot;Swap CDR shapshot&quot;</span>);</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;}</div><div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="astobj2_8h_html_a4534db0cd85f31e51255441d6c18267b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a4534db0cd85f31e51255441d6c18267b">ao2_t_replace</a></div><div class="ttdeci">#define ao2_t_replace(dst, src, tag)</div><div class="ttdoc">Replace one object reference with another cleaning up the original. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00503">astobj2.h:503</a></div></div>
<div class="ttc" id="cdr_8c_html_ae17c6fb1569bdee3442031db51476073"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ae17c6fb1569bdee3442031db51476073">cdr_object_update_cid</a></div><div class="ttdeci">static void cdr_object_update_cid(struct cdr_object_snapshot *old_snapshot, struct ast_channel_snapshot *new_snapshot)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01506">cdr.c:1506</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aec9ada03f8f99aa4c972b141bcbd2ee3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec9ada03f8f99aa4c972b141bcbd2ee3">&#9670;&nbsp;</a></span>cdr_object_transition_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cdr_object_transition_state </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/d0f/structcdr__object__fn__table.html">cdr_object_fn_table</a> *&#160;</td>
          <td class="paramname"><em>fn_table</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transition a <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> to a new state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cdr</td><td>The <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> to transition </td></tr>
    <tr><td class="paramname">fn_table</td><td>The <a class="el" href="../../d1/d0f/structcdr__object__fn__table.html">cdr_object_fn_table</a> state to go to </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00821">821</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l00804">cdr_object_transition_state_init()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03637">ast_cdr_fork()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02472">bridge_candidate_add_to_cdr()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02015">bridge_state_process_bridge_leave()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02002">bridge_state_process_party_b()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01039">cdr_object_alloc()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01477">cdr_object_check_party_a_hangup()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04260">cdr_object_dispatch_all_cb()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01880">dial_state_process_bridge_enter()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01848">dial_state_process_dial_end()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01802">dial_state_process_party_b()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01976">dialed_pending_state_process_bridge_enter()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01992">dialed_pending_state_process_dial_begin()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01982">dialed_pending_state_process_parking_bridge_enter()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01951">dialed_pending_state_process_party_a()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02586">handle_parking_bridge_enter_message()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02032">parked_state_process_bridge_leave()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01736">single_state_process_bridge_enter()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01653">single_state_process_dial_begin()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l01793">single_state_process_parking_bridge_enter()</a>.</p>
<div class="fragment"><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;{</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a0da1ef8c056af9f1566664d6f6563f23">cdr_object_transition_state_init</a>(cdr, fn_table, 1);</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a0da1ef8c056af9f1566664d6f6563f23"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a0da1ef8c056af9f1566664d6f6563f23">cdr_object_transition_state_init</a></div><div class="ttdeci">static void cdr_object_transition_state_init(struct cdr_object *cdr, struct cdr_object_fn_table *fn_table, int do_init)</div><div class="ttdoc">Transition a cdr_object to a new state with initiation flag. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00804">cdr.c:804</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0da1ef8c056af9f1566664d6f6563f23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0da1ef8c056af9f1566664d6f6563f23">&#9670;&nbsp;</a></span>cdr_object_transition_state_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cdr_object_transition_state_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/d0f/structcdr__object__fn__table.html">cdr_object_fn_table</a> *&#160;</td>
          <td class="paramname"><em>fn_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>do_init</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transition a <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> to a new state with initiation flag. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cdr</td><td>The <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> to transition </td></tr>
    <tr><td class="paramname">fn_table</td><td>The <a class="el" href="../../d1/d0f/structcdr__object__fn__table.html">cdr_object_fn_table</a> state to go to </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00804">804</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00210">CDR_DEBUG</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00427">cdr_object_fn_table::init_function</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00418">cdr_object_fn_table::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l00821">cdr_object_transition_state()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l01951">dialed_pending_state_process_party_a()</a>.</p>
<div class="fragment"><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;{</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>(<span class="stringliteral">&quot;%p - Transitioning CDR for %s from state %s to %s\n&quot;</span>,</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      cdr, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>,</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a> ? cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> : <span class="stringliteral">&quot;NONE&quot;</span>, fn_table-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;   cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a> = <a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;   <span class="keywordflow">if</span> (cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#aa9dd35c04054599f66b6d6214f6a345e">init_function</a> &amp;&amp; do_init) {</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#aa9dd35c04054599f66b6d6214f6a345e">init_function</a>(cdr);</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;   }</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="structcdr__object__fn__table_html_aa9dd35c04054599f66b6d6214f6a345e"><div class="ttname"><a href="../../d1/d0f/structcdr__object__fn__table.html#aa9dd35c04054599f66b6d6214f6a345e">cdr_object_fn_table::init_function</a></div><div class="ttdeci">void(*const init_function)(struct cdr_object *cdr)</div><div class="ttdoc">An initialization function. This will be called automatically when a cdr_object is switched to this t...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00427">cdr.c:427</a></div></div>
<div class="ttc" id="cdr_8c_html_a8052195443a9cb5835d7d2b3ab7279aa"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a></div><div class="ttdeci">#define CDR_DEBUG(fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00210">cdr.c:210</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="structcdr__object__fn__table_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d1/d0f/structcdr__object__fn__table.html#a8f8f80d37794cde9472343e4487ba3eb">cdr_object_fn_table::name</a></div><div class="ttdeci">const char * name</div><div class="ttdoc">Name of the subclass. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00418">cdr.c:418</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae17c6fb1569bdee3442031db51476073"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae17c6fb1569bdee3442031db51476073">&#9670;&nbsp;</a></span>cdr_object_update_cid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cdr_object_update_cid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a> *&#160;</td>
          <td class="paramname"><em>old_snapshot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>new_snapshot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01506">1506</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00148">ast_channel_snapshot::caller</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00087">ast_channel_snapshot_caller::dialed_subaddr</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00087">ast_channel_snapshot_caller::dnid</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01262">set_variable()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00087">ast_channel_snapshot_caller::subaddr</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00708">cdr_object_snapshot::variables</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l01531">cdr_object_swap_snapshot()</a>.</p>
<div class="fragment"><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;{</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;   <span class="keywordflow">if</span> (!old_snapshot-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>) {</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a89071964424cbe2e7d79b8682cc452df">set_variable</a>(&amp;old_snapshot-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>, <span class="stringliteral">&quot;dnid&quot;</span>, new_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">caller</a>-&gt;<a class="code" href="../../d6/d08/structast__channel__snapshot__caller.html#ae8985d37896fcb8066c979a69eeac1d2">dnid</a>);</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a89071964424cbe2e7d79b8682cc452df">set_variable</a>(&amp;old_snapshot-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>, <span class="stringliteral">&quot;callingsubaddr&quot;</span>, new_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">caller</a>-&gt;<a class="code" href="../../d6/d08/structast__channel__snapshot__caller.html#ae4449049dcbcf8f4caab6b7861efcef4">subaddr</a>);</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a89071964424cbe2e7d79b8682cc452df">set_variable</a>(&amp;old_snapshot-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>, <span class="stringliteral">&quot;calledsubaddr&quot;</span>, new_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">caller</a>-&gt;<a class="code" href="../../d6/d08/structast__channel__snapshot__caller.html#a1aef57d3d9250f71c34a2cb607f48eb2">dialed_subaddr</a>);</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;   }</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;   <span class="keywordflow">if</span> (strcmp(old_snapshot-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">caller</a>-&gt;<a class="code" href="../../d6/d08/structast__channel__snapshot__caller.html#ae8985d37896fcb8066c979a69eeac1d2">dnid</a>, new_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">caller</a>-&gt;<a class="code" href="../../d6/d08/structast__channel__snapshot__caller.html#ae8985d37896fcb8066c979a69eeac1d2">dnid</a>)) {</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a89071964424cbe2e7d79b8682cc452df">set_variable</a>(&amp;old_snapshot-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>, <span class="stringliteral">&quot;dnid&quot;</span>, new_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">caller</a>-&gt;<a class="code" href="../../d6/d08/structast__channel__snapshot__caller.html#ae8985d37896fcb8066c979a69eeac1d2">dnid</a>);</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;   }</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;   <span class="keywordflow">if</span> (strcmp(old_snapshot-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">caller</a>-&gt;<a class="code" href="../../d6/d08/structast__channel__snapshot__caller.html#ae4449049dcbcf8f4caab6b7861efcef4">subaddr</a>, new_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">caller</a>-&gt;<a class="code" href="../../d6/d08/structast__channel__snapshot__caller.html#ae4449049dcbcf8f4caab6b7861efcef4">subaddr</a>)) {</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a89071964424cbe2e7d79b8682cc452df">set_variable</a>(&amp;old_snapshot-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>, <span class="stringliteral">&quot;callingsubaddr&quot;</span>, new_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">caller</a>-&gt;<a class="code" href="../../d6/d08/structast__channel__snapshot__caller.html#ae4449049dcbcf8f4caab6b7861efcef4">subaddr</a>);</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;   }</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;   <span class="keywordflow">if</span> (strcmp(old_snapshot-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">caller</a>-&gt;<a class="code" href="../../d6/d08/structast__channel__snapshot__caller.html#a1aef57d3d9250f71c34a2cb607f48eb2">dialed_subaddr</a>, new_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">caller</a>-&gt;<a class="code" href="../../d6/d08/structast__channel__snapshot__caller.html#a1aef57d3d9250f71c34a2cb607f48eb2">dialed_subaddr</a>)) {</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a89071964424cbe2e7d79b8682cc452df">set_variable</a>(&amp;old_snapshot-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>, <span class="stringliteral">&quot;calledsubaddr&quot;</span>, new_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">caller</a>-&gt;<a class="code" href="../../d6/d08/structast__channel__snapshot__caller.html#a1aef57d3d9250f71c34a2cb607f48eb2">dialed_subaddr</a>);</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;   }</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;}</div><div class="ttc" id="structcdr__object__snapshot_html_a2e42d02e62d0d56d645c901011bb767b"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">cdr_object_snapshot::variables</a></div><div class="ttdeci">struct varshead variables</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00708">cdr.c:708</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="cdr_8c_html_a89071964424cbe2e7d79b8682cc452df"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a89071964424cbe2e7d79b8682cc452df">set_variable</a></div><div class="ttdeci">static void set_variable(struct varshead *headp, const char *name, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01262">cdr.c:1262</a></div></div>
<div class="ttc" id="structast__channel__snapshot__caller_html_a1aef57d3d9250f71c34a2cb607f48eb2"><div class="ttname"><a href="../../d6/d08/structast__channel__snapshot__caller.html#a1aef57d3d9250f71c34a2cb607f48eb2">ast_channel_snapshot_caller::dialed_subaddr</a></div><div class="ttdeci">const ast_string_field dialed_subaddr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00087">stasis_channels.h:87</a></div></div>
<div class="ttc" id="structast__channel__snapshot__caller_html_ae4449049dcbcf8f4caab6b7861efcef4"><div class="ttname"><a href="../../d6/d08/structast__channel__snapshot__caller.html#ae4449049dcbcf8f4caab6b7861efcef4">ast_channel_snapshot_caller::subaddr</a></div><div class="ttdeci">const ast_string_field subaddr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00087">stasis_channels.h:87</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ae7248b764758e655df26036dd6b8f4d7"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">ast_channel_snapshot::caller</a></div><div class="ttdeci">struct ast_channel_snapshot_caller * caller</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00148">stasis_channels.h:148</a></div></div>
<div class="ttc" id="structast__channel__snapshot__caller_html_ae8985d37896fcb8066c979a69eeac1d2"><div class="ttname"><a href="../../d6/d08/structast__channel__snapshot__caller.html#ae8985d37896fcb8066c979a69eeac1d2">ast_channel_snapshot_caller::dnid</a></div><div class="ttdeci">const ast_string_field dnid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00087">stasis_channels.h:87</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a396def329f80f3d866244fe08abac54a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a396def329f80f3d866244fe08abac54a">&#9670;&nbsp;</a></span>cdr_object_update_party_b()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cdr_object_update_party_b </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02220">2220</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::linkedid</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::party_b_name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00446">cdr_object_fn_table::process_party_b</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02278">handle_channel_snapshot_update_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;{</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr = obj;</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;   <span class="keywordflow">if</span> (cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a017572b85aa73a2c4355c0ee2fa1623c">process_party_b</a></div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;      &amp;&amp; !strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a54251e2cf4677a9009fd91bb86f4d4d2">party_b_name</a>, arg)) {</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *party_b = data;</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;<span class="comment">       * For sanity&#39;s sake we also check the party_b snapshot</span></div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;<span class="comment">       * for consistency with the key.  The callback needs and</span></div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;<span class="comment">       * asserts the snapshot to be this way.</span></div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;      <span class="keywordflow">if</span> (!cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a></div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;         || strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, party_b-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>)) {</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>,</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;            <span class="stringliteral">&quot;CDR for Party A %s(%s) has inconsistent Party B %s name.  Message can be ignored but this shouldn&#39;t happen.\n&quot;</span>,</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;            cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4b8afba70b197df95b91f884a12c3480">linkedid</a>,</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;            cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>,</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;            cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a54251e2cf4677a9009fd91bb86f4d4d2">party_b_name</a>);</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;      }</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;      cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a017572b85aa73a2c4355c0ee2fa1623c">process_party_b</a>(cdr, party_b);</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;   }</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structcdr__object_html_a4b8afba70b197df95b91f884a12c3480"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4b8afba70b197df95b91f884a12c3480">cdr_object::linkedid</a></div><div class="ttdeci">const ast_string_field linkedid</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="structcdr__object__fn__table_html_a017572b85aa73a2c4355c0ee2fa1623c"><div class="ttname"><a href="../../d1/d0f/structcdr__object__fn__table.html#a017572b85aa73a2c4355c0ee2fa1623c">cdr_object_fn_table::process_party_b</a></div><div class="ttdeci">void(*const process_party_b)(struct cdr_object *cdr, struct ast_channel_snapshot *snapshot)</div><div class="ttdoc">Process a Party B update for the cdr_object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00446">cdr.c:446</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="structcdr__object_html_a54251e2cf4677a9009fd91bb86f4d4d2"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a54251e2cf4677a9009fd91bb86f4d4d2">cdr_object::party_b_name</a></div><div class="ttdeci">const ast_string_field party_b_name</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9996dd8c278c3be2f3a04bacb316f053"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9996dd8c278c3be2f3a04bacb316f053">&#9670;&nbsp;</a></span>cdr_object_update_party_b_userfield_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cdr_object_update_party_b_userfield_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback used to update the userfield on Party B on all CDRs. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03455">3455</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03450">party_b_userfield_update::channel_name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::party_b_name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00706">cdr_object_snapshot::userfield</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03451">party_b_userfield_update::userfield</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03477">ast_cdr_setuserfield()</a>.</p>
<div class="fragment"><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;{</div><div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr = obj;</div><div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;</div><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;   <span class="keywordflow">if</span> ((cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a> != &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a> || !cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>)</div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;      &amp;&amp; !strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a54251e2cf4677a9009fd91bb86f4d4d2">party_b_name</a>, arg)) {</div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dc/d6c/structparty__b__userfield__update.html">party_b_userfield_update</a> *<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a> = data;</div><div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;</div><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;<span class="comment">       * For sanity&#39;s sake we also assert the party_b snapshot</span></div><div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;<span class="comment">       * is consistent with the key.</span></div><div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a></div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;         &amp;&amp; !strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, info-&gt;<a class="code" href="../../dc/d6c/structparty__b__userfield__update.html#a52e3444b72c993e4da5424384673bab7">channel_name</a>));</div><div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;</div><div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>, info-&gt;<a class="code" href="../../dc/d6c/structparty__b__userfield__update.html#a3a9a77adeaf7170b7d2dec43d3344970">userfield</a>,</div><div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;         <span class="keyword">sizeof</span>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>));</div><div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;   }</div><div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;</div><div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structparty__b__userfield__update_html_a3a9a77adeaf7170b7d2dec43d3344970"><div class="ttname"><a href="../../dc/d6c/structparty__b__userfield__update.html#a3a9a77adeaf7170b7d2dec43d3344970">party_b_userfield_update::userfield</a></div><div class="ttdeci">const char * userfield</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03451">cdr.c:3451</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a2d480b13820a3a97582a1a138036aa25"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">cdr_object_snapshot::userfield</a></div><div class="ttdeci">char userfield[AST_MAX_USER_FIELD]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00706">cdr.c:706</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="structparty__b__userfield__update_html_a52e3444b72c993e4da5424384673bab7"><div class="ttname"><a href="../../dc/d6c/structparty__b__userfield__update.html#a52e3444b72c993e4da5424384673bab7">party_b_userfield_update::channel_name</a></div><div class="ttdeci">const char * channel_name</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03450">cdr.c:3450</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="structcdr__object_html_a54251e2cf4677a9009fd91bb86f4d4d2"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a54251e2cf4677a9009fd91bb86f4d4d2">cdr_object::party_b_name</a></div><div class="ttdeci">const ast_string_field party_b_name</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f50dd95a426c8a70710afc315164f04"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table finalized_state_fn_table</div><div class="ttdoc">The virtual table for the finalized state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00694">cdr.c:694</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structparty__b__userfield__update_html"><div class="ttname"><a href="../../dc/d6c/structparty__b__userfield__update.html">party_b_userfield_update</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03449">cdr.c:3449</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae78649474f95f4adb19a0791ed39f4fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae78649474f95f4adb19a0791ed39f4fc">&#9670;&nbsp;</a></span>cdr_submit_batch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cdr_submit_batch </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>shutdown</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03766">3766</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00572">ast_pthread_create_detached_background</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00231">BATCH_MODE_SCHEDULER_ONLY</a>, <a class="el" href="../../d4/d69/structast__cdr__config.html#ab3c4f8ad024814570a590d3d40752003">ast_cdr_config::batch_settings</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00358">cdr_batch_lock</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03749">do_batch_backend_process()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00223">module_config::general</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00344">cdr_batch::head</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03730">reset_batch()</a>, and <a class="el" href="../../dc/d07/cdr_8h_source.html#l00269">ast_cdr_config::batch_settings::settings</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04577">ast_cdr_engine_term()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03804">submit_scheduled_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;{</div><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d57/structmodule__config.html">module_config</a> *mod_cfg;</div><div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d81/structcdr__batch__item.html">cdr_batch_item</a> *oldbatchitems = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;   pthread_t batch_post_thread = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>;</div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;</div><div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;   <span class="comment">/* if there&#39;s no batch, or no CDRs in the batch, then there&#39;s nothing to do */</span></div><div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a> || !<a class="code" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a>-&gt;<a class="code" href="../../d4/d3a/structcdr__batch.html#aa09bc3bf5bd05c3ae3ca9cdfd905cf67">head</a>) {</div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;   }</div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;</div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;   <span class="comment">/* move the old CDRs aside, and prepare a new CDR batch */</span></div><div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../dc/df2/cdr_8c.html#a3a3969758c60f80011874aadde9d09ca">cdr_batch_lock</a>);</div><div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;   oldbatchitems = <a class="code" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a>-&gt;<a class="code" href="../../d4/d3a/structcdr__batch.html#aa09bc3bf5bd05c3ae3ca9cdfd905cf67">head</a>;</div><div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a0165bd3137a70f31dcbe5fb47b5aee2a">reset_batch</a>();</div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../dc/df2/cdr_8c.html#a3a3969758c60f80011874aadde9d09ca">cdr_batch_lock</a>);</div><div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;</div><div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;   mod_cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(module_configs);</div><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;</div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;   <span class="comment">/* if configured, spawn a new thread to post these CDRs,</span></div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;<span class="comment">      also try to save as much as possible if we are shutting down safely */</span></div><div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;   <span class="keywordflow">if</span> (!mod_cfg</div><div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;      || <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#ab3c4f8ad024814570a590d3d40752003">batch_settings</a>.<a class="code" href="../../d3/d11/structast__cdr__config_1_1batch__settings.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a3142c0762d64e330ffe9f2ebe8976652a7f4f25540ae06946d3941e275bed8472">BATCH_MODE_SCHEDULER_ONLY</a>)</div><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;      || do_shutdown) {</div><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;CDR single-threaded batch processing begins now\n&quot;</span>);</div><div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#ac661a0b8ae11d5cf5cae1e6aa238496b">do_batch_backend_process</a>(oldbatchitems);</div><div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#aa73be876e3a4024b91ce2e09d8b945d1">ast_pthread_create_detached_background</a>(&amp;batch_post_thread, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/df2/cdr_8c.html#ac661a0b8ae11d5cf5cae1e6aa238496b">do_batch_backend_process</a>, oldbatchitems)) {</div><div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;CDR processing thread could not detach, now trying in this thread\n&quot;</span>);</div><div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#ac661a0b8ae11d5cf5cae1e6aa238496b">do_batch_backend_process</a>(oldbatchitems);</div><div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;CDR multi-threaded batch processing begins now\n&quot;</span>);</div><div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;      }</div><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;   }</div><div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;</div><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(mod_cfg);</div><div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a0165bd3137a70f31dcbe5fb47b5aee2a"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a0165bd3137a70f31dcbe5fb47b5aee2a">reset_batch</a></div><div class="ttdeci">static void reset_batch(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03730">cdr.c:3730</a></div></div>
<div class="ttc" id="cdr_8c_html_ac661a0b8ae11d5cf5cae1e6aa238496b"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ac661a0b8ae11d5cf5cae1e6aa238496b">do_batch_backend_process</a></div><div class="ttdeci">static void * do_batch_backend_process(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03749">cdr.c:3749</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_aa73be876e3a4024b91ce2e09d8b945d1"><div class="ttname"><a href="../../d5/d60/utils_8h.html#aa73be876e3a4024b91ce2e09d8b945d1">ast_pthread_create_detached_background</a></div><div class="ttdeci">#define ast_pthread_create_detached_background(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00572">utils.h:572</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="cdr_8h_html_a3142c0762d64e330ffe9f2ebe8976652a7f4f25540ae06946d3941e275bed8472"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a3142c0762d64e330ffe9f2ebe8976652a7f4f25540ae06946d3941e275bed8472">BATCH_MODE_SCHEDULER_ONLY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00231">cdr.h:231</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="structast__cdr__config_html_ab3c4f8ad024814570a590d3d40752003"><div class="ttname"><a href="../../d4/d69/structast__cdr__config.html#ab3c4f8ad024814570a590d3d40752003">ast_cdr_config::batch_settings</a></div><div class="ttdeci">struct ast_cdr_config::batch_settings batch_settings</div></div>
<div class="ttc" id="structmodule__config_html"><div class="ttname"><a href="../../db/d57/structmodule__config.html">module_config</a></div><div class="ttdoc">The configuration settings for this module. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00222">cdr.c:222</a></div></div>
<div class="ttc" id="cdr_8c_html_a3c9a24d791e528330adc76210fb42407"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a></div><div class="ttdeci">static struct cdr_batch * batch</div></div>
<div class="ttc" id="structcdr__batch__item_html"><div class="ttname"><a href="../../dc/d81/structcdr__batch__item.html">cdr_batch_item</a></div><div class="ttdoc">Queued CDR waiting to be batched. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00336">cdr.c:336</a></div></div>
<div class="ttc" id="cdr_8c_html_a3a3969758c60f80011874aadde9d09ca"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3a3969758c60f80011874aadde9d09ca">cdr_batch_lock</a></div><div class="ttdeci">static ast_mutex_t cdr_batch_lock</div><div class="ttdoc">Lock protecting modifications to the batch queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00358">cdr.c:358</a></div></div>
<div class="ttc" id="structast__cdr__config_1_1batch__settings_html_a64ee0bd247c901e7af2f871b4ef7ad71"><div class="ttname"><a href="../../d3/d11/structast__cdr__config_1_1batch__settings.html#a64ee0bd247c901e7af2f871b4ef7ad71">ast_cdr_config::batch_settings::settings</a></div><div class="ttdeci">struct ast_flags settings</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00269">cdr.h:269</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structcdr__batch_html_aa09bc3bf5bd05c3ae3ca9cdfd905cf67"><div class="ttname"><a href="../../d4/d3a/structcdr__batch.html#aa09bc3bf5bd05c3ae3ca9cdfd905cf67">cdr_batch::head</a></div><div class="ttdeci">struct cdr_batch_item * head</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00344">cdr.c:344</a></div></div>
<div class="ttc" id="structmodule__config_html_a95699733ba47a55e25760adf5c51e59a"><div class="ttname"><a href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">module_config::general</a></div><div class="ttdeci">struct ast_cdr_config * general</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00223">cdr.c:223</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a77dc1728a978dd5a7d045800200be4cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77dc1728a978dd5a7d045800200be4cc">&#9670;&nbsp;</a></span>cdr_toggle_runtime_options()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cdr_toggle_runtime_options </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if CDRs are enabled and enables/disables the necessary options. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04488">4488</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00290">AST_LOG_ERROR</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00221">CDR_BATCHMODE</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04416">cdr_enable_batch_mode()</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00220">CDR_ENABLED</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04314">create_subscriptions()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04304">destroy_subscriptions()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00223">module_config::general</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, and <a class="el" href="../../dc/d07/cdr_8h_source.html#l00265">ast_cdr_config::settings</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02840">ast_cdr_set_config()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04522">load_module()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l04617">reload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;{</div><div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d57/structmodule__config.html">module_config</a> *mod_cfg;</div><div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;</div><div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;   mod_cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(module_configs);</div><div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;   <span class="keywordflow">if</span> (mod_cfg</div><div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;      &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a>)) {</div><div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#a34685f905c456c1a4eb347d066a8b5e6">create_subscriptions</a>()) {</div><div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#ae65f9813539412cd935004baea3e03f0">destroy_subscriptions</a>();</div><div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create Stasis subscriptions\n&quot;</span>);</div><div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(mod_cfg);</div><div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;      }</div><div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492">CDR_BATCHMODE</a>)) {</div><div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#aa9235d826a774900dc1916fd6dc63082">cdr_enable_batch_mode</a>(mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>);</div><div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;CDR simple logging enabled.\n&quot;</span>);</div><div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;      }</div><div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#ae65f9813539412cd935004baea3e03f0">destroy_subscriptions</a>();</div><div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;CDR logging disabled.\n&quot;</span>);</div><div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;   }</div><div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(mod_cfg);</div><div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;</div><div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;   <span class="keywordflow">return</span> mod_cfg ? 0 : -1;</div><div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;}</div><div class="ttc" id="structast__cdr__config_html_a64ee0bd247c901e7af2f871b4ef7ad71"><div class="ttname"><a href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">ast_cdr_config::settings</a></div><div class="ttdeci">struct ast_flags settings</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00265">cdr.h:265</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="cdr_8c_html_ae65f9813539412cd935004baea3e03f0"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ae65f9813539412cd935004baea3e03f0">destroy_subscriptions</a></div><div class="ttdeci">static void destroy_subscriptions(void)</div><div class="ttdoc">Destroy the active Stasis subscriptions. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l04304">cdr.c:4304</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492">CDR_BATCHMODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00221">cdr.h:221</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_a2fdd5bff193a29ec6c7278da2851ea56"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a></div><div class="ttdeci">#define AST_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00290">logger.h:290</a></div></div>
<div class="ttc" id="cdr_8c_html_a34685f905c456c1a4eb347d066a8b5e6"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a34685f905c456c1a4eb347d066a8b5e6">create_subscriptions</a></div><div class="ttdeci">static int create_subscriptions(void)</div><div class="ttdoc">Create the Stasis subcriptions for CDRs. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l04314">cdr.c:4314</a></div></div>
<div class="ttc" id="structmodule__config_html"><div class="ttname"><a href="../../db/d57/structmodule__config.html">module_config</a></div><div class="ttdoc">The configuration settings for this module. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00222">cdr.c:222</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00220">cdr.h:220</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="cdr_8c_html_aa9235d826a774900dc1916fd6dc63082"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aa9235d826a774900dc1916fd6dc63082">cdr_enable_batch_mode</a></div><div class="ttdeci">static void cdr_enable_batch_mode(struct ast_cdr_config *config)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l04416">cdr.c:4416</a></div></div>
<div class="ttc" id="structmodule__config_html_a95699733ba47a55e25760adf5c51e59a"><div class="ttname"><a href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">module_config::general</a></div><div class="ttdeci">struct ast_cdr_config * general</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00223">cdr.c:223</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7263fb983d894a47154469f5b2886e02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7263fb983d894a47154469f5b2886e02">&#9670;&nbsp;</a></span>check_new_cdr_needed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int check_new_cdr_needed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>old_snapshot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>new_snapshot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine if we need to add a new CDR based on snapshots. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02249">2249</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00070">ast_channel_snapshot_dialplan::appl</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01155">AST_SOFTHANGUP_HANGUP_EXEC</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00224">CDR_END_BEFORE_H_EXTEN</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00151">ast_channel_snapshot::dialplan</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01127">is_cdr_flag_set()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01148">snapshot_cep_changed()</a>, and <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00156">ast_channel_snapshot::softhangup_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02278">handle_channel_snapshot_update_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;{</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;   <span class="comment">/* If we&#39;re dead, we don&#39;t need a new CDR */</span></div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;   <span class="keywordflow">if</span> (!new_snapshot</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;      || (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;new_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#acd7e028035da37eabb4e2dd1ca495f0c">softhangup_flags</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a33d9271d8d892501de8c9536382d71ea">AST_SOFTHANGUP_HANGUP_EXEC</a>)</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;         &amp;&amp; <a class="code" href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a>(<a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba951b6a2ed4e5418e5e7bdab6f37061a1">CDR_END_BEFORE_H_EXTEN</a>))) {</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;   }</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;   <span class="comment">/* Auto-fall through will increment the priority but have no application */</span></div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(new_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#af535fe520577fb6b8795dea539bd0230">appl</a>)) {</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;   }</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;   <span class="keywordflow">if</span> (old_snapshot &amp;&amp; !<a class="code" href="../../dc/df2/cdr_8c.html#abdcb681e5fb3d509b769efa9d498f3f7">snapshot_cep_changed</a>(old_snapshot, new_snapshot)) {</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;   }</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;}</div><div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba951b6a2ed4e5418e5e7bdab6f37061a1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba951b6a2ed4e5418e5e7bdab6f37061a1">CDR_END_BEFORE_H_EXTEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00224">cdr.h:224</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="cdr_8c_html_ab3ba06a4d885b31e4073c047d0dad02d"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a></div><div class="ttdeci">static int is_cdr_flag_set(unsigned int cdr_flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01127">cdr.c:1127</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_a5be1fb9b43b051b087f6952b6346909a"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">ast_channel_snapshot::dialplan</a></div><div class="ttdeci">struct ast_channel_snapshot_dialplan * dialplan</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00151">stasis_channels.h:151</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__channel__snapshot__dialplan_html_af535fe520577fb6b8795dea539bd0230"><div class="ttname"><a href="../../dc/d3d/structast__channel__snapshot__dialplan.html#af535fe520577fb6b8795dea539bd0230">ast_channel_snapshot_dialplan::appl</a></div><div class="ttdeci">const ast_string_field appl</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00070">stasis_channels.h:70</a></div></div>
<div class="ttc" id="cdr_8c_html_abdcb681e5fb3d509b769efa9d498f3f7"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#abdcb681e5fb3d509b769efa9d498f3f7">snapshot_cep_changed</a></div><div class="ttdeci">static int snapshot_cep_changed(struct ast_channel_snapshot *old_snapshot, struct ast_channel_snapshot *new_snapshot)</div><div class="ttdoc">Return whether or not a channel has changed its state in the dialplan, subject to endbeforehexten log...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01148">cdr.c:1148</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_acd7e028035da37eabb4e2dd1ca495f0c"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#acd7e028035da37eabb4e2dd1ca495f0c">ast_channel_snapshot::softhangup_flags</a></div><div class="ttdeci">struct ast_flags softhangup_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00156">stasis_channels.h:156</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a33d9271d8d892501de8c9536382d71ea"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a33d9271d8d892501de8c9536382d71ea">AST_SOFTHANGUP_HANGUP_EXEC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01155">channel.h:1155</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0fa8c4c4ee405c2f3e1eee79cdbbbc38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fa8c4c4ee405c2f3e1eee79cdbbbc38">&#9670;&nbsp;</a></span>cli_complete_show()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* cli_complete_show </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Complete user input for 'cdr show'. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03970">3970</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l02726">ast_cli_completion_add()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00163">ast_cli_args::word</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04115">handle_cli_show()</a>.</p>
<div class="fragment"><div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;{</div><div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;   <span class="keywordtype">int</span> wordlen = strlen(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>);</div><div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> it_cdrs;</div><div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;</div><div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;   it_cdrs = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(<a class="code" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a>, 0);</div><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;   <span class="keywordflow">while</span> ((cdr = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;it_cdrs))) {</div><div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;      <span class="keywordflow">if</span> (!strncasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, wordlen)) {</div><div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dc/db0/cli_8h.html#a6f5f6c330757d980065d3f887c62237f">ast_cli_completion_add</a>(<a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>))) {</div><div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cdr, -1);</div><div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;         }</div><div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;      }</div><div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cdr, -1);</div><div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;   }</div><div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;it_cdrs);</div><div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;</div><div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="cdr_8c_html_aabd874b0958bde3e08b5a876c2d1a395"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_master</div><div class="ttdoc">A container of the active master CDRs indexed by Party A channel uniqueid. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00365">cdr.c:365</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="structast__cli__args_html_adc1f34651f7bbfa3ba5af27db5f53817"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">ast_cli_args::word</a></div><div class="ttdeci">const char * word</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00163">cli.h:163</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="cli_8h_html_a6f5f6c330757d980065d3f887c62237f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a6f5f6c330757d980065d3f887c62237f">ast_cli_completion_add</a></div><div class="ttdeci">int ast_cli_completion_add(char *value)</div><div class="ttdoc">Add a result to a request for completion options. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/main_2cli_8c_source.html#l02726">main/cli.c:2726</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac38aa7c2170730c4e820202c3838d182"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac38aa7c2170730c4e820202c3838d182">&#9670;&nbsp;</a></span>cli_show_channel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cli_show_channel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04055">4055</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::accountcode</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00719">cdr_object::answer</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::appl</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01073">ast_callerid_merge()</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00108">ast_tvzero()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00148">ast_channel_snapshot::caller</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03035">cdr_get_tv()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03312">cdr_object_get_by_name()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::data</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00720">cdr_object::end</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/df2/cdr_8c.html#a4610636f10e4604ba296cbf9287b0c7b">FORMAT_STRING</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00087">ast_channel_snapshot_caller::name</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00087">ast_channel_snapshot_caller::number</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01179">snapshot_is_dialed()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00718">cdr_object::start</a>, and <a class="el" href="../../dc/df2/cdr_8c.html#ae4991c2ca36e7b5e4817953aeff633d3">TITLE_STRING</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04115">handle_cli_show()</a>.</p>
<div class="fragment"><div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;{</div><div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;   <span class="keywordtype">char</span> clid[64];</div><div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;   <span class="keywordtype">char</span> start_time_buffer[64];</div><div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;   <span class="keywordtype">char</span> answer_time_buffer[64];</div><div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;   <span class="keywordtype">char</span> end_time_buffer[64];</div><div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *channel_name = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3];</div><div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;</div><div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;<span class="preprocessor">#define TITLE_STRING &quot;%-10.10s %-20.20s %-25.25s %-15.15s %-15.15s %-8.8s %-8.8s %-8.8s %-8.8s %-8.8s\n&quot;</span></div><div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;<span class="preprocessor">#define FORMAT_STRING &quot;%-10.10s %-20.20s %-25.25s %-15.15s %-15.15s %-8.8s %-8.8s %-8.8s %-8.8ld %-8.8ld\n&quot;</span></div><div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;</div><div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;   cdr = <a class="code" href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a>(channel_name);</div><div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Unknown channel: %s\n&quot;</span>, channel_name);</div><div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;   }</div><div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;</div><div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Call Detail Record (CDR) Information for %s\n&quot;</span>, channel_name);</div><div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;--------------------------------------------------\n&quot;</span>);</div><div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../dc/df2/cdr_8c.html#ae4991c2ca36e7b5e4817953aeff633d3">TITLE_STRING</a>, <span class="stringliteral">&quot;AccountCode&quot;</span>, <span class="stringliteral">&quot;CallerID&quot;</span>, <span class="stringliteral">&quot;Dst. Channel&quot;</span>, <span class="stringliteral">&quot;LastApp&quot;</span>, <span class="stringliteral">&quot;Data&quot;</span>, <span class="stringliteral">&quot;Start&quot;</span>, <span class="stringliteral">&quot;Answer&quot;</span>, <span class="stringliteral">&quot;End&quot;</span>, <span class="stringliteral">&quot;Billsec&quot;</span>, <span class="stringliteral">&quot;Duration&quot;</span>);</div><div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;</div><div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cdr);</div><div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;   <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;      <span class="keyword">struct </span>timeval <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;</div><div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#ab5904b00a02181783ce25d816a2e6d68">snapshot_is_dialed</a>(it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>)) {</div><div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;      }</div><div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;      <a class="code" href="../../de/d47/callerid_8h.html#a1c25633b1ed63682c95ec613d7cbe559">ast_callerid_merge</a>(clid, <span class="keyword">sizeof</span>(clid), it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">caller</a>-&gt;<a class="code" href="../../d6/d08/structast__channel__snapshot__caller.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">caller</a>-&gt;<a class="code" href="../../d6/d08/structast__channel__snapshot__caller.html#a5a2e9241cdf866a4a02fb075765c87a6">number</a>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>)) {</div><div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;         <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;         <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a> = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>;</div><div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;      }</div><div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a26ef22f050d742f08715473a63720bb5">cdr_get_tv</a>(it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a>, <span class="stringliteral">&quot;%T&quot;</span>, start_time_buffer, <span class="keyword">sizeof</span>(start_time_buffer));</div><div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a26ef22f050d742f08715473a63720bb5">cdr_get_tv</a>(it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>, <span class="stringliteral">&quot;%T&quot;</span>, answer_time_buffer, <span class="keyword">sizeof</span>(answer_time_buffer));</div><div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a26ef22f050d742f08715473a63720bb5">cdr_get_tv</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>, <span class="stringliteral">&quot;%T&quot;</span>, end_time_buffer, <span class="keyword">sizeof</span>(end_time_buffer));</div><div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a4610636f10e4604ba296cbf9287b0c7b">FORMAT_STRING</a>,</div><div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;            it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a51b1019903e9032d46119168a3938a16">accountcode</a>,</div><div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;            clid,</div><div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;            it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a> ? it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a> : <span class="stringliteral">&quot;&lt;none&gt;&quot;</span>,</div><div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;            it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af535fe520577fb6b8795dea539bd0230">appl</a>,</div><div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;            it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7870f447ef3c43ebf148da15363b25dd">data</a>,</div><div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;            start_time_buffer,</div><div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;            answer_time_buffer,</div><div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;            end_time_buffer,</div><div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;            (<span class="keywordtype">long</span>)<a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>, it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>) / 1000,</div><div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;            (<span class="keywordtype">long</span>)<a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>, it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a>) / 1000);</div><div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;   }</div><div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cdr);</div><div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;</div><div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr);</div><div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;</div><div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;<span class="preprocessor">#undef FORMAT_STRING</span></div><div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;<span class="preprocessor">#undef TITLE_STRING</span></div><div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structast__channel__snapshot__caller_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d08/structast__channel__snapshot__caller.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_caller::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00087">stasis_channels.h:87</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="cdr_8c_html_a4610636f10e4604ba296cbf9287b0c7b"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a4610636f10e4604ba296cbf9287b0c7b">FORMAT_STRING</a></div><div class="ttdeci">#define FORMAT_STRING</div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="time_8h_html_a4e7b3508884147c7991a68361ac781a2"><div class="ttname"><a href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a></div><div class="ttdeci">int ast_tvzero(const struct timeval t)</div><div class="ttdoc">Returns true if the argument is 0,0. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00108">time.h:108</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_a51b1019903e9032d46119168a3938a16"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#a51b1019903e9032d46119168a3938a16">ast_channel_snapshot_base::accountcode</a></div><div class="ttdeci">const ast_string_field accountcode</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="structcdr__object_html_a621c14aed7c59835c5bc93bc88e8f3d9"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">cdr_object::answer</a></div><div class="ttdeci">struct timeval answer</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00719">cdr.c:719</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="structcdr__object_html_ad80305b5e16da9c2675d5f057bd69386"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">cdr_object::start</a></div><div class="ttdeci">struct timeval start</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00718">cdr.c:718</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="structcdr__object_html_af535fe520577fb6b8795dea539bd0230"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af535fe520577fb6b8795dea539bd0230">cdr_object::appl</a></div><div class="ttdeci">const ast_string_field appl</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="callerid_8h_html_a1c25633b1ed63682c95ec613d7cbe559"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a1c25633b1ed63682c95ec613d7cbe559">ast_callerid_merge</a></div><div class="ttdeci">char * ast_callerid_merge(char *buf, int bufsiz, const char *name, const char *num, const char *unknown)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01073">callerid.c:1073</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="cdr_8c_html_a26ef22f050d742f08715473a63720bb5"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a26ef22f050d742f08715473a63720bb5">cdr_get_tv</a></div><div class="ttdeci">static void cdr_get_tv(struct timeval when, const char *fmt, char *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03035">cdr.c:3035</a></div></div>
<div class="ttc" id="cdr_8c_html_a89dc924870cf4d81f8841a3b4f33d722"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a></div><div class="ttdeci">static struct cdr_object * cdr_object_get_by_name(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03312">cdr.c:3312</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ae7248b764758e655df26036dd6b8f4d7"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">ast_channel_snapshot::caller</a></div><div class="ttdeci">struct ast_channel_snapshot_caller * caller</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00148">stasis_channels.h:148</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="structcdr__object_html_a7870f447ef3c43ebf148da15363b25dd"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7870f447ef3c43ebf148da15363b25dd">cdr_object::data</a></div><div class="ttdeci">const ast_string_field data</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="cdr_8c_html_ab5904b00a02181783ce25d816a2e6d68"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ab5904b00a02181783ce25d816a2e6d68">snapshot_is_dialed</a></div><div class="ttdeci">static int snapshot_is_dialed(struct ast_channel_snapshot *snapshot)</div><div class="ttdoc">Return whether or not a ast_channel_snapshot is for a channel that was created as the result of a dia...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01179">cdr.c:1179</a></div></div>
<div class="ttc" id="structcdr__object_html_af5249cf68dff13dd1dcca5929f4f3a5b"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">cdr_object::end</a></div><div class="ttdeci">struct timeval end</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00720">cdr.c:720</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__channel__snapshot__caller_html_a5a2e9241cdf866a4a02fb075765c87a6"><div class="ttname"><a href="../../d6/d08/structast__channel__snapshot__caller.html#a5a2e9241cdf866a4a02fb075765c87a6">ast_channel_snapshot_caller::number</a></div><div class="ttdeci">const ast_string_field number</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00087">stasis_channels.h:87</a></div></div>
<div class="ttc" id="cdr_8c_html_ae4991c2ca36e7b5e4817953aeff633d3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ae4991c2ca36e7b5e4817953aeff633d3">TITLE_STRING</a></div><div class="ttdeci">#define TITLE_STRING</div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a42aa90cd5dc2d0c7ddc58bc021634de5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42aa90cd5dc2d0c7ddc58bc021634de5">&#9670;&nbsp;</a></span>cli_show_channels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cli_show_channels </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03991">3991</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l00719">cdr_object::answer</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::appl</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00108">ast_tvzero()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03035">cdr_get_tv()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00720">cdr_object::end</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/df2/cdr_8c.html#a4610636f10e4604ba296cbf9287b0c7b">FORMAT_STRING</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00736">cdr_object::last</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00602">SCOPED_AO2LOCK</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01179">snapshot_is_dialed()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00718">cdr_object::start</a>, and <a class="el" href="../../dc/df2/cdr_8c.html#ae4991c2ca36e7b5e4817953aeff633d3">TITLE_STRING</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04115">handle_cli_show()</a>.</p>
<div class="fragment"><div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;{</div><div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> it_cdrs;</div><div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;   <span class="keywordtype">char</span> start_time_buffer[64];</div><div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;   <span class="keywordtype">char</span> answer_time_buffer[64];</div><div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;   <span class="keywordtype">char</span> end_time_buffer[64];</div><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;</div><div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;<span class="preprocessor">#define TITLE_STRING &quot;%-25.25s %-25.25s %-15.15s %-8.8s %-8.8s %-8.8s %-8.8s %-8.8s\n&quot;</span></div><div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;<span class="preprocessor">#define FORMAT_STRING &quot;%-25.25s %-25.25s %-15.15s %-8.8s %-8.8s %-8.8s %-8.8ld %-8.8ld\n&quot;</span></div><div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;</div><div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Channels with Call Detail Record (CDR) Information\n&quot;</span>);</div><div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;--------------------------------------------------\n&quot;</span>);</div><div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../dc/df2/cdr_8c.html#ae4991c2ca36e7b5e4817953aeff633d3">TITLE_STRING</a>, <span class="stringliteral">&quot;Channel&quot;</span>, <span class="stringliteral">&quot;Dst. Channel&quot;</span>, <span class="stringliteral">&quot;LastApp&quot;</span>, <span class="stringliteral">&quot;Start&quot;</span>, <span class="stringliteral">&quot;Answer&quot;</span>, <span class="stringliteral">&quot;End&quot;</span>, <span class="stringliteral">&quot;Billsec&quot;</span>, <span class="stringliteral">&quot;Duration&quot;</span>);</div><div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;</div><div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;   it_cdrs = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(<a class="code" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a>, 0);</div><div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;   <span class="keywordflow">for</span> (; (cdr = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;it_cdrs)); <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr)) {</div><div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;      <span class="keyword">struct </span>timeval start_time = { 0, };</div><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;      <span class="keyword">struct </span>timeval answer_time = { 0, };</div><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;      <span class="keyword">struct </span>timeval end_time = { 0, };</div><div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;</div><div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, cdr);</div><div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;</div><div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;      <span class="comment">/* Calculate the start, end, answer, billsec, and duration over the</span></div><div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;<span class="comment">       * life of all of the CDR entries</span></div><div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;      <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#ab5904b00a02181783ce25d816a2e6d68">snapshot_is_dialed</a>(it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>)) {</div><div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;         }</div><div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(start_time)) {</div><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;            start_time = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a>;</div><div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;         }</div><div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>) &amp;&amp; <a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(answer_time)) {</div><div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;            answer_time = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>;</div><div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;         }</div><div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;      }</div><div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;</div><div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;      <span class="comment">/* If there was no start time, then all CDRs were for a dialed channel; skip */</span></div><div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(start_time)) {</div><div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;      }</div><div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;      it_cdr = cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a761f66169af05fad3479b4e80ddd6315">last</a>;</div><div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;</div><div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;      end_time = <a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>) ? <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>() : it_cdr-&gt;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a26ef22f050d742f08715473a63720bb5">cdr_get_tv</a>(start_time, <span class="stringliteral">&quot;%T&quot;</span>, start_time_buffer, <span class="keyword">sizeof</span>(start_time_buffer));</div><div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a26ef22f050d742f08715473a63720bb5">cdr_get_tv</a>(answer_time, <span class="stringliteral">&quot;%T&quot;</span>, answer_time_buffer, <span class="keyword">sizeof</span>(answer_time_buffer));</div><div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a26ef22f050d742f08715473a63720bb5">cdr_get_tv</a>(end_time, <span class="stringliteral">&quot;%T&quot;</span>, end_time_buffer, <span class="keyword">sizeof</span>(end_time_buffer));</div><div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a4610636f10e4604ba296cbf9287b0c7b">FORMAT_STRING</a>, it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>,</div><div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;            it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a> ? it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a> : <span class="stringliteral">&quot;&lt;none&gt;&quot;</span>,</div><div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;            it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af535fe520577fb6b8795dea539bd0230">appl</a>,</div><div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;            start_time_buffer,</div><div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;            answer_time_buffer,</div><div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;            end_time_buffer,</div><div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;            <a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(answer_time) ? 0 : (<span class="keywordtype">long</span>)<a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(end_time, answer_time) / 1000,</div><div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;            (<span class="keywordtype">long</span>)<a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(end_time, start_time) / 1000);</div><div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;   }</div><div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;it_cdrs);</div><div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;<span class="preprocessor">#undef FORMAT_STRING</span></div><div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;<span class="preprocessor">#undef TITLE_STRING</span></div><div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="cdr_8c_html_a4610636f10e4604ba296cbf9287b0c7b"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a4610636f10e4604ba296cbf9287b0c7b">FORMAT_STRING</a></div><div class="ttdeci">#define FORMAT_STRING</div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="time_8h_html_a4e7b3508884147c7991a68361ac781a2"><div class="ttname"><a href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a></div><div class="ttdeci">int ast_tvzero(const struct timeval t)</div><div class="ttdoc">Returns true if the argument is 0,0. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00108">time.h:108</a></div></div>
<div class="ttc" id="structcdr__object_html_a621c14aed7c59835c5bc93bc88e8f3d9"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">cdr_object::answer</a></div><div class="ttdeci">struct timeval answer</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00719">cdr.c:719</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="structcdr__object_html_ad80305b5e16da9c2675d5f057bd69386"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">cdr_object::start</a></div><div class="ttdeci">struct timeval start</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00718">cdr.c:718</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="structcdr__object_html_af535fe520577fb6b8795dea539bd0230"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af535fe520577fb6b8795dea539bd0230">cdr_object::appl</a></div><div class="ttdeci">const ast_string_field appl</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="cdr_8c_html_a26ef22f050d742f08715473a63720bb5"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a26ef22f050d742f08715473a63720bb5">cdr_get_tv</a></div><div class="ttdeci">static void cdr_get_tv(struct timeval when, const char *fmt, char *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03035">cdr.c:3035</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="structcdr__object_html_a761f66169af05fad3479b4e80ddd6315"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a761f66169af05fad3479b4e80ddd6315">cdr_object::last</a></div><div class="ttdeci">struct cdr_object * last</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00736">cdr.c:736</a></div></div>
<div class="ttc" id="cdr_8c_html_aabd874b0958bde3e08b5a876c2d1a395"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_master</div><div class="ttdoc">A container of the active master CDRs indexed by Party A channel uniqueid. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00365">cdr.c:365</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="cdr_8c_html_ab5904b00a02181783ce25d816a2e6d68"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ab5904b00a02181783ce25d816a2e6d68">snapshot_is_dialed</a></div><div class="ttdeci">static int snapshot_is_dialed(struct ast_channel_snapshot *snapshot)</div><div class="ttdoc">Return whether or not a ast_channel_snapshot is for a channel that was created as the result of a dia...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01179">cdr.c:1179</a></div></div>
<div class="ttc" id="structcdr__object_html_af5249cf68dff13dd1dcca5929f4f3a5b"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">cdr_object::end</a></div><div class="ttdeci">struct timeval end</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00720">cdr.c:720</a></div></div>
<div class="ttc" id="lock_8h_html_a2cfb325ed371eb6e629446bac4676e9f"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a></div><div class="ttdeci">#define SCOPED_AO2LOCK(varname, obj)</div><div class="ttdoc">scoped lock specialization for ao2 mutexes. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00602">lock.h:602</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="cdr_8c_html_ae4991c2ca36e7b5e4817953aeff633d3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ae4991c2ca36e7b5e4817953aeff633d3">TITLE_STRING</a></div><div class="ttdeci">#define TITLE_STRING</div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af4db02bc1bd27f2f2dde30febbf37243"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4db02bc1bd27f2f2dde30febbf37243">&#9670;&nbsp;</a></span>CONFIG_INFO_CORE()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CONFIG_INFO_CORE </td>
          <td>(</td>
          <td class="paramtype">&quot;cdr&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cfg_info&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">module_configs&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d1b/res__prometheus_8c.html#ae006c692706bf9b5e8a21e8140382c75">module_config_alloc</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">.&#160;</td>
          <td class="paramname"><em>files</em> = <code><a class="el" href="../../db/dfe/config__options_8h.html#a60d2944aab4537720434ab9c90e12418">ACO_FILES</a>(&amp;<a class="el" href="../../dc/df2/cdr_8c.html#a5992da1d576df52445a82f5a49d6b54f">module_file_conf</a>)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">.&#160;</td>
          <td class="paramname"><em>post_apply_config</em> = <code><a class="el" href="../../dc/df2/cdr_8c.html#ae8a3bad648f2a5bdc92e536ecd7d9484">module_config_post_apply</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7b10f449baa91a185f72f31509abb95f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b10f449baa91a185f72f31509abb95f">&#9670;&nbsp;</a></span>copy_variables()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int copy_variables </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/de6/structvarshead.html">varshead</a> *&#160;</td>
          <td class="paramname"><em>to_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/de6/structvarshead.html">varshead</a> *&#160;</td>
          <td class="paramname"><em>from_list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copy variables from one list to another. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">to_list</td><td>destination </td></tr>
    <tr><td class="paramname">from_list</td><td>source </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">The</td><td>number of copied variables </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00746">746</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00710">AST_LIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d9/de7/chanvars_8h_source.html#l00040">ast_var_assign</a>, <a class="el" href="../../d9/df9/chanvars_8c_source.html#l00060">ast_var_name()</a>, <a class="el" href="../../d9/df9/chanvars_8c_source.html#l00080">ast_var_value()</a>, <a class="el" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">ast_var_t::entries</a>, and <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00614">var</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02998">ast_cdr_dup()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03637">ast_cdr_fork()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01287">cdr_object_create_public_records()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00791">cdr_object_snapshot_copy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;{</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *variables;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *newvariable;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d85/structval.html">val</a>;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;   <span class="keywordtype">int</span> x = 0;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(from_list, variables, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>) {</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      var = <a class="code" href="../../d9/de7/chanvars_8h.html#a356a31cd608ec07d3668dcd589be49d8">ast_var_name</a>(variables);</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(var)) {</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      }</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      val = <a class="code" href="../../d9/de7/chanvars_8h.html#a8e0081172db71c5021d20706c50d959c">ast_var_value</a>(variables);</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(val)) {</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      }</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      newvariable = <a class="code" href="../../d9/de7/chanvars_8h.html#a78deeb18e93b145e9895346cef766577">ast_var_assign</a>(var, val);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <span class="keywordflow">if</span> (newvariable) {</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(to_list, newvariable, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;         ++x;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      }</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;   }</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   <span class="keywordflow">return</span> x;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;}</div><div class="ttc" id="structval_html"><div class="ttname"><a href="../../d5/d85/structval.html">val</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd1/ast__expr2_8c_source.html#l00325">ast_expr2.c:325</a></div></div>
<div class="ttc" id="chanvars_8h_html_a8e0081172db71c5021d20706c50d959c"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#a8e0081172db71c5021d20706c50d959c">ast_var_value</a></div><div class="ttdeci">const char * ast_var_value(const struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df9/chanvars_8c_source.html#l00080">chanvars.c:80</a></div></div>
<div class="ttc" id="chanvars_8h_html_a356a31cd608ec07d3668dcd589be49d8"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#a356a31cd608ec07d3668dcd589be49d8">ast_var_name</a></div><div class="ttdeci">const char * ast_var_name(const struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df9/chanvars_8c_source.html#l00060">chanvars.c:60</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__var__t_html"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html">ast_var_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00028">chanvars.h:28</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa2ded2af046bb513f77056c27c083307"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_LIST_INSERT_HEAD(head, elm, field)</div><div class="ttdoc">Inserts a list entry at the head of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00710">linkedlists.h:710</a></div></div>
<div class="ttc" id="structast__var__t_html_a55d5c7988e3164d7310d88c67d97a1db"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">ast_var_t::entries</a></div><div class="ttdeci">struct ast_var_t::@249 entries</div></div>
<div class="ttc" id="chanvars_8h_html_a78deeb18e93b145e9895346cef766577"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#a78deeb18e93b145e9895346cef766577">ast_var_assign</a></div><div class="ttdeci">#define ast_var_assign(name, value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00040">chanvars.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a34685f905c456c1a4eb347d066a8b5e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34685f905c456c1a4eb347d066a8b5e6">&#9670;&nbsp;</a></span>create_subscriptions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int create_subscriptions </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create the Stasis subcriptions for CDRs. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04314">4314</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00179">ast_bridge_topic_all()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00128">ast_channel_topic_all()</a>, <a class="el" href="../../d3/d2a/parking_8c_source.html#l00067">ast_parking_topic()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01578">stasis_forward_all()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04488">cdr_toggle_runtime_options()</a>.</p>
<div class="fragment"><div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;{</div><div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/df2/cdr_8c.html#abc796aa4d7644ba463deefc014cd6ea9">cdr_topic</a>) {</div><div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;   }</div><div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;</div><div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#a5481f015567808a3331c677ee1922bf7">channel_subscription</a> || <a class="code" href="../../dc/df2/cdr_8c.html#a47209cbb2830370119a620706df43f19">bridge_subscription</a> || <a class="code" href="../../dc/df2/cdr_8c.html#aa421dba1330983098f1ca24a9ba128f6">parking_subscription</a>) {</div><div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;   }</div><div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;</div><div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a5481f015567808a3331c677ee1922bf7">channel_subscription</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a2513a93567ddc93510f7896b777da119">stasis_forward_all</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga34a3ac59fb8d0c49cbc2cb9b87261d31">ast_channel_topic_all</a>(), <a class="code" href="../../dc/df2/cdr_8c.html#abc796aa4d7644ba463deefc014cd6ea9">cdr_topic</a>);</div><div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/df2/cdr_8c.html#a5481f015567808a3331c677ee1922bf7">channel_subscription</a>) {</div><div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;   }</div><div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a47209cbb2830370119a620706df43f19">bridge_subscription</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a2513a93567ddc93510f7896b777da119">stasis_forward_all</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#abf64fa441014314244648caa6c8ab80b">ast_bridge_topic_all</a>(), <a class="code" href="../../dc/df2/cdr_8c.html#abc796aa4d7644ba463deefc014cd6ea9">cdr_topic</a>);</div><div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/df2/cdr_8c.html#a47209cbb2830370119a620706df43f19">bridge_subscription</a>) {</div><div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;   }</div><div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#aa421dba1330983098f1ca24a9ba128f6">parking_subscription</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a2513a93567ddc93510f7896b777da119">stasis_forward_all</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gab4e08da228493c3f9bfc6a2aed507cb4">ast_parking_topic</a>(), <a class="code" href="../../dc/df2/cdr_8c.html#abc796aa4d7644ba463deefc014cd6ea9">cdr_topic</a>);</div><div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/df2/cdr_8c.html#aa421dba1330983098f1ca24a9ba128f6">parking_subscription</a>) {</div><div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;   }</div><div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;</div><div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;}</div><div class="ttc" id="cdr_8c_html_abc796aa4d7644ba463deefc014cd6ea9"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#abc796aa4d7644ba463deefc014cd6ea9">cdr_topic</a></div><div class="ttdeci">static struct stasis_topic * cdr_topic</div><div class="ttdoc">The parent topic for all topics we want to aggregate for CDRs. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00383">cdr.c:383</a></div></div>
<div class="ttc" id="cdr_8c_html_a47209cbb2830370119a620706df43f19"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a47209cbb2830370119a620706df43f19">bridge_subscription</a></div><div class="ttdeci">static struct stasis_forward * bridge_subscription</div><div class="ttdoc">Our subscription for bridges. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00374">cdr.c:374</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga34a3ac59fb8d0c49cbc2cb9b87261d31"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga34a3ac59fb8d0c49cbc2cb9b87261d31">ast_channel_topic_all</a></div><div class="ttdeci">struct stasis_topic * ast_channel_topic_all(void)</div><div class="ttdoc">A topic which publishes the events for all channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00128">stasis_channels.c:128</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_abf64fa441014314244648caa6c8ab80b"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#abf64fa441014314244648caa6c8ab80b">ast_bridge_topic_all</a></div><div class="ttdeci">struct stasis_topic * ast_bridge_topic_all(void)</div><div class="ttdoc">A topic which publishes the events for all bridges. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00179">stasis_bridges.c:179</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gab4e08da228493c3f9bfc6a2aed507cb4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gab4e08da228493c3f9bfc6a2aed507cb4">ast_parking_topic</a></div><div class="ttdeci">struct stasis_topic * ast_parking_topic(void)</div><div class="ttdoc">accessor for the parking stasis topic </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2a/parking_8c_source.html#l00067">parking.c:67</a></div></div>
<div class="ttc" id="cdr_8c_html_a5481f015567808a3331c677ee1922bf7"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5481f015567808a3331c677ee1922bf7">channel_subscription</a></div><div class="ttdeci">static struct stasis_forward * channel_subscription</div><div class="ttdoc">Our subscription for channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00377">cdr.c:377</a></div></div>
<div class="ttc" id="stasis_8h_html_a2513a93567ddc93510f7896b777da119"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a2513a93567ddc93510f7896b777da119">stasis_forward_all</a></div><div class="ttdeci">struct stasis_forward * stasis_forward_all(struct stasis_topic *from_topic, struct stasis_topic *to_topic)</div><div class="ttdoc">Create a subscription which forwards all messages from one topic to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01578">stasis.c:1578</a></div></div>
<div class="ttc" id="cdr_8c_html_aa421dba1330983098f1ca24a9ba128f6"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aa421dba1330983098f1ca24a9ba128f6">parking_subscription</a></div><div class="ttdeci">static struct stasis_forward * parking_subscription</div><div class="ttdoc">Our subscription for parking. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00380">cdr.c:380</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae65f9813539412cd935004baea3e03f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae65f9813539412cd935004baea3e03f0">&#9670;&nbsp;</a></span>destroy_subscriptions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void destroy_subscriptions </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destroy the active Stasis subscriptions. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04304">4304</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/df4/stasis_8c_source.html#l01548">stasis_forward_cancel()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04488">cdr_toggle_runtime_options()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l04515">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;{</div><div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a5481f015567808a3331c677ee1922bf7">channel_subscription</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a>(<a class="code" href="../../dc/df2/cdr_8c.html#a5481f015567808a3331c677ee1922bf7">channel_subscription</a>);</div><div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a47209cbb2830370119a620706df43f19">bridge_subscription</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a>(<a class="code" href="../../dc/df2/cdr_8c.html#a47209cbb2830370119a620706df43f19">bridge_subscription</a>);</div><div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#aa421dba1330983098f1ca24a9ba128f6">parking_subscription</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a>(<a class="code" href="../../dc/df2/cdr_8c.html#aa421dba1330983098f1ca24a9ba128f6">parking_subscription</a>);</div><div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a47209cbb2830370119a620706df43f19"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a47209cbb2830370119a620706df43f19">bridge_subscription</a></div><div class="ttdeci">static struct stasis_forward * bridge_subscription</div><div class="ttdoc">Our subscription for bridges. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00374">cdr.c:374</a></div></div>
<div class="ttc" id="stasis_8h_html_a5713715b0f26f4943d0af05363b07027"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a></div><div class="ttdeci">struct stasis_forward * stasis_forward_cancel(struct stasis_forward *forward)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01548">stasis.c:1548</a></div></div>
<div class="ttc" id="cdr_8c_html_a5481f015567808a3331c677ee1922bf7"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5481f015567808a3331c677ee1922bf7">channel_subscription</a></div><div class="ttdeci">static struct stasis_forward * channel_subscription</div><div class="ttdoc">Our subscription for channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00377">cdr.c:377</a></div></div>
<div class="ttc" id="cdr_8c_html_aa421dba1330983098f1ca24a9ba128f6"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aa421dba1330983098f1ca24a9ba128f6">parking_subscription</a></div><div class="ttdeci">static struct stasis_forward * parking_subscription</div><div class="ttdoc">Our subscription for parking. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00380">cdr.c:380</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afd2af5f788049cdd54db340fe84f9775"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd2af5f788049cdd54db340fe84f9775">&#9670;&nbsp;</a></span>dial_state_process_bridge_enter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316">process_bridge_enter_results</a> dial_state_process_bridge_enter </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01880">1880</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00034">ao2_container_count()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::bridge</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00403">BRIDGE_ENTER_NO_PARTY_B</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00399">BRIDGE_ENTER_OBTAINED_PARTY_B</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00395">BRIDGE_ENTER_ONLY_PARTY</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01440">cdr_object_finalize()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00791">cdr_object_snapshot_copy()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00821">cdr_object_transition_state()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00339">ast_bridge_snapshot::channels</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::uniqueid</a>.</p>
<div class="fragment"><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;{</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;   <span class="keywordtype">int</span> success = 0;</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cdr, bridge, bridge-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>);</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;   <span class="comment">/* Get parties in the bridge */</span></div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(bridge-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#adbc20a2fd50bb1376a3c6094e96a31e3">channels</a>) == 1) {</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;      <span class="comment">/* No one in the bridge yet but us! */</span></div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a>(cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a4213ec53168931f1d566f40e32870c4c">bridge_state_fn_table</a>);</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316a62a0455d2eb58c31a04b25d2c7eed117">BRIDGE_ENTER_ONLY_PARTY</a>;</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;   }</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;   <span class="comment">/* If we don&#39;t have a Party B (originated channel), skip it */</span></div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;   <span class="keywordflow">if</span> (cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>) {</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> it_cdrs;</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      <span class="keywordtype">char</span> *channel_id;</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;      <span class="keywordflow">for</span> (it_cdrs = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(bridge-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#adbc20a2fd50bb1376a3c6094e96a31e3">channels</a>, 0);</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;         !success &amp;&amp; (channel_id = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;it_cdrs));</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(channel_id, -1)) {</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cand_cdr_master;</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cand_cdr;</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;         cand_cdr_master = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a>, channel_id, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>);</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;         <span class="keywordflow">if</span> (!cand_cdr_master) {</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;         }</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cand_cdr_master);</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;         <span class="keywordflow">for</span> (cand_cdr = cand_cdr_master; cand_cdr; cand_cdr = cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;            <span class="comment">/* Skip any records that are not in a bridge or in this bridge.</span></div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;<span class="comment">             * I&#39;m not sure how that would happen, but it pays to be careful. */</span></div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;            <span class="keywordflow">if</span> (cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a> != &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a4213ec53168931f1d566f40e32870c4c">bridge_state_fn_table</a></div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;               || strcmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">bridge</a>, cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">bridge</a>)) {</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;            }</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;            <span class="comment">/* Skip any records that aren&#39;t our Party B */</span></div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;            <span class="keywordflow">if</span> (strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>)) {</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;            }</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;            <a class="code" href="../../dc/df2/cdr_8c.html#a9409d6642fce1018ef347f2fcece7eea">cdr_object_snapshot_copy</a>(&amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>, &amp;cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>);</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;            <span class="comment">/* If they have a Party B, they joined up with someone else as their</span></div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;<span class="comment">             * Party A. Don&#39;t finalize them as they&#39;re active. Otherwise, we</span></div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;<span class="comment">             * have stolen them so they need to be finalized.</span></div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;            <span class="keywordflow">if</span> (!cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>) {</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;               <a class="code" href="../../dc/df2/cdr_8c.html#a34a146403fab13026f6e302c753be741">cdr_object_finalize</a>(cand_cdr);</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;            }</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;            success = 1;</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;         }</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cand_cdr_master);</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cand_cdr_master);</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;      }</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;it_cdrs);</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;   }</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;   <span class="comment">/* We always transition state, even if we didn&#39;t get a peer */</span></div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a>(cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a4213ec53168931f1d566f40e32870c4c">bridge_state_fn_table</a>);</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;   <span class="comment">/* Success implies that we have a Party B */</span></div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;   <span class="keywordflow">if</span> (success) {</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316ad10fe7b54c407ca92612577a074e58c7">BRIDGE_ENTER_OBTAINED_PARTY_B</a>;</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;   }</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316a7975da294ade48d4154d1f00ec059039">BRIDGE_ENTER_NO_PARTY_B</a>;</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;}</div><div class="ttc" id="structast__bridge__snapshot_html_adbc20a2fd50bb1376a3c6094e96a31e3"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#adbc20a2fd50bb1376a3c6094e96a31e3">ast_bridge_snapshot::channels</a></div><div class="ttdeci">struct ao2_container * channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00339">bridge.h:339</a></div></div>
<div class="ttc" id="cdr_8c_html_a3bdd3cd3f0f0a84448a50181c3cee316ad10fe7b54c407ca92612577a074e58c7"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316ad10fe7b54c407ca92612577a074e58c7">BRIDGE_ENTER_OBTAINED_PARTY_B</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00399">cdr.c:399</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="astobj2_8h_html_a512cc40ce96c63b3d5c78040baa4c9cd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a></div><div class="ttdeci">int ao2_container_count(struct ao2_container *c)</div><div class="ttdoc">Returns the number of elements in a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00034">astobj2_container.c:34</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="cdr_8c_html_a3bdd3cd3f0f0a84448a50181c3cee316a62a0455d2eb58c31a04b25d2c7eed117"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316a62a0455d2eb58c31a04b25d2c7eed117">BRIDGE_ENTER_ONLY_PARTY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00395">cdr.c:395</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="cdr_8c_html_aabd874b0958bde3e08b5a876c2d1a395"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_master</div><div class="ttdoc">A container of the active master CDRs indexed by Party A channel uniqueid. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00365">cdr.c:365</a></div></div>
<div class="ttc" id="cdr_8c_html_a3bdd3cd3f0f0a84448a50181c3cee316a7975da294ade48d4154d1f00ec059039"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316a7975da294ade48d4154d1f00ec059039">BRIDGE_ENTER_NO_PARTY_B</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00403">cdr.c:403</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="cdr_8c_html_a9409d6642fce1018ef347f2fcece7eea"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a9409d6642fce1018ef347f2fcece7eea">cdr_object_snapshot_copy</a></div><div class="ttdeci">static void cdr_object_snapshot_copy(struct cdr_object_snapshot *dst, struct cdr_object_snapshot *src)</div><div class="ttdoc">Copy a snapshot and its details. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00791">cdr.c:791</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">ast_bridge_snapshot::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="cdr_8c_html_a4213ec53168931f1d566f40e32870c4c"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a4213ec53168931f1d566f40e32870c4c">bridge_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table bridge_state_fn_table</div><div class="ttdoc">The virtual table for the Bridged state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00659">cdr.c:659</a></div></div>
<div class="ttc" id="cdr_8c_html_a34a146403fab13026f6e302c753be741"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a34a146403fab13026f6e302c753be741">cdr_object_finalize</a></div><div class="ttdeci">static void cdr_object_finalize(struct cdr_object *cdr)</div><div class="ttdoc">Finalize a CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01440">cdr.c:1440</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="structcdr__object_html_af089037b58d169050b5b9242ab0b033f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">cdr_object::bridge</a></div><div class="ttdeci">const ast_string_field bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="cdr_8c_html_aec9ada03f8f99aa4c972b141bcbd2ee3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a></div><div class="ttdeci">static void cdr_object_transition_state(struct cdr_object *cdr, struct cdr_object_fn_table *fn_table)</div><div class="ttdoc">Transition a cdr_object to a new state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00821">cdr.c:821</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9e72bf1ce974244771ee9d705ad29538"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e72bf1ce974244771ee9d705ad29538">&#9670;&nbsp;</a></span>dial_state_process_dial_begin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dial_state_process_dial_begin </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>caller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>peer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01816">1816</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;{</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;   <span class="comment">/* Don&#39;t process a begin dial here. A party A already in the dial state will</span></div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;<span class="comment">    * who receives a dial begin for something else will be handled by the</span></div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;<span class="comment">    * message router callback and will add a new CDR for the party A */</span></div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a8823a0495202bc84ec88bfa2e2deb510"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8823a0495202bc84ec88bfa2e2deb510">&#9670;&nbsp;</a></span>dial_state_process_dial_end()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dial_state_process_dial_end </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>caller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>peer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dial_status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01848">1848</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00258">AST_CDR_ANSWERED</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00148">ast_channel_snapshot::caller</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01531">cdr_object_swap_snapshot()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00821">cdr_object_transition_state()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01828">dial_status_to_disposition()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00717">cdr_object::disposition</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00147">ast_channel_snapshot::peer</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>.</p>
<div class="fragment"><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;{</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *party_a;</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;   <span class="keywordflow">if</span> (caller) {</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;      party_a = <a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">caller</a>;</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      party_a = <a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a91ff51905af3f89b6aab38f42d08adea">peer</a>;</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;   }</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(!strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, party_a-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>));</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a5f169319f8865c4f86897f944ae0f00c">cdr_object_swap_snapshot</a>(&amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>, party_a);</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;   <span class="keywordflow">if</span> (cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>) {</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;      <span class="keywordflow">if</span> (strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, peer-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>)) {</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;         <span class="comment">/* Not the status for this CDR - defer back to the message router */</span></div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;      }</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a5f169319f8865c4f86897f944ae0f00c">cdr_object_swap_snapshot</a>(&amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>, peer);</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;   }</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;   <span class="comment">/* Set the disposition based on the dial string. */</span></div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;   cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">disposition</a> = <a class="code" href="../../dc/df2/cdr_8c.html#a0a6754fd8cd7b0a3d9014a15ccb7b718">dial_status_to_disposition</a>(dial_status);</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;   <span class="keywordflow">if</span> (cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">disposition</a> == <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ac3e47d059a0e67a03f822f10bb7ec5b1">AST_CDR_ANSWERED</a>) {</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;      <span class="comment">/* Switch to dial pending to wait and see what the caller does */</span></div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a>(cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a2a48de7671f066dd9349192c100d62e8">dialed_pending_state_fn_table</a>);</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a>(cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a>);</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;   }</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0ac3e47d059a0e67a03f822f10bb7ec5b1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ac3e47d059a0e67a03f822f10bb7ec5b1">AST_CDR_ANSWERED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00258">cdr.h:258</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="cdr_8c_html_a2a48de7671f066dd9349192c100d62e8"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a2a48de7671f066dd9349192c100d62e8">dialed_pending_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table dialed_pending_state_fn_table</div><div class="ttdoc">The virtual table for the Dialed Pending state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00637">cdr.c:637</a></div></div>
<div class="ttc" id="structcdr__object_html_a462f09f05430fd152a129a88f52cfce7"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">cdr_object::disposition</a></div><div class="ttdeci">enum ast_cdr_disposition disposition</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00717">cdr.c:717</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ae7248b764758e655df26036dd6b8f4d7"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">ast_channel_snapshot::caller</a></div><div class="ttdeci">struct ast_channel_snapshot_caller * caller</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00148">stasis_channels.h:148</a></div></div>
<div class="ttc" id="cdr_8c_html_a0a6754fd8cd7b0a3d9014a15ccb7b718"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a0a6754fd8cd7b0a3d9014a15ccb7b718">dial_status_to_disposition</a></div><div class="ttdeci">static enum ast_cdr_disposition dial_status_to_disposition(const char *dial_status)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01828">cdr.c:1828</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f50dd95a426c8a70710afc315164f04"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table finalized_state_fn_table</div><div class="ttdoc">The virtual table for the finalized state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00694">cdr.c:694</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f169319f8865c4f86897f944ae0f00c"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f169319f8865c4f86897f944ae0f00c">cdr_object_swap_snapshot</a></div><div class="ttdeci">static void cdr_object_swap_snapshot(struct cdr_object_snapshot *old_snapshot, struct ast_channel_snapshot *new_snapshot)</div><div class="ttdoc">Swap an old cdr_object_snapshot&amp;#39;s ast_channel_snapshot for a new ast_channel_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01531">cdr.c:1531</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_a91ff51905af3f89b6aab38f42d08adea"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#a91ff51905af3f89b6aab38f42d08adea">ast_channel_snapshot::peer</a></div><div class="ttdeci">struct ast_channel_snapshot_peer * peer</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00147">stasis_channels.h:147</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="cdr_8c_html_aec9ada03f8f99aa4c972b141bcbd2ee3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a></div><div class="ttdeci">static void cdr_object_transition_state(struct cdr_object *cdr, struct cdr_object_fn_table *fn_table)</div><div class="ttdoc">Transition a cdr_object to a new state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00821">cdr.c:821</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a99f90e851983820ff988acc4eff68b9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99f90e851983820ff988acc4eff68b9c">&#9670;&nbsp;</a></span>dial_state_process_party_b()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dial_state_process_party_b </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>snapshot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01802">1802</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01046">AST_FLAG_DEAD</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01531">cdr_object_swap_snapshot()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00821">cdr_object_transition_state()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00155">ast_channel_snapshot::flags</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>.</p>
<div class="fragment"><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;{</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(snapshot != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a></div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;      &amp;&amp; !strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>));</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a5f169319f8865c4f86897f944ae0f00c">cdr_object_swap_snapshot</a>(&amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>, snapshot);</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;   <span class="comment">/* If party B hangs up, finalize this CDR */</span></div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a67415c9cab64152013f660deee6acef6">AST_FLAG_DEAD</a>)) {</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a>(cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a>);</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;   }</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a67415c9cab64152013f660deee6acef6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a67415c9cab64152013f660deee6acef6">AST_FLAG_DEAD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01046">channel.h:1046</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f50dd95a426c8a70710afc315164f04"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table finalized_state_fn_table</div><div class="ttdoc">The virtual table for the finalized state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00694">cdr.c:694</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#aec78000b2897c094f68ed72559e18acd">ast_channel_snapshot::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00155">stasis_channels.h:155</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f169319f8865c4f86897f944ae0f00c"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f169319f8865c4f86897f944ae0f00c">cdr_object_swap_snapshot</a></div><div class="ttdeci">static void cdr_object_swap_snapshot(struct cdr_object_snapshot *old_snapshot, struct ast_channel_snapshot *new_snapshot)</div><div class="ttdoc">Swap an old cdr_object_snapshot&amp;#39;s ast_channel_snapshot for a new ast_channel_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01531">cdr.c:1531</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="cdr_8c_html_aec9ada03f8f99aa4c972b141bcbd2ee3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a></div><div class="ttdeci">static void cdr_object_transition_state(struct cdr_object *cdr, struct cdr_object_fn_table *fn_table)</div><div class="ttdoc">Transition a cdr_object to a new state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00821">cdr.c:821</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7379eaa5658d0fa7eaacb189b8236255"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7379eaa5658d0fa7eaacb189b8236255">&#9670;&nbsp;</a></span>dial_status_end()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dial_status_end </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dialstatus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02089">2089</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02105">handle_dial_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;{</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;   <span class="keywordflow">return</span> (strcmp(dialstatus, <span class="stringliteral">&quot;RINGING&quot;</span>) &amp;&amp;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;         strcmp(dialstatus, <span class="stringliteral">&quot;PROCEEDING&quot;</span>) &amp;&amp;</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;         strcmp(dialstatus, <span class="stringliteral">&quot;PROGRESS&quot;</span>));</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a0a6754fd8cd7b0a3d9014a15ccb7b718"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a6754fd8cd7b0a3d9014a15ccb7b718">&#9670;&nbsp;</a></span>dial_status_to_disposition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0">ast_cdr_disposition</a> dial_status_to_disposition </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dial_status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01828">1828</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d07/cdr_8h_source.html#l00258">AST_CDR_ANSWERED</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00257">AST_CDR_BUSY</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00259">AST_CDR_CONGESTION</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00256">AST_CDR_FAILED</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00254">AST_CDR_NOANSWER</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00223">CDR_CONGESTION</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l01127">is_cdr_flag_set()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l01848">dial_state_process_dial_end()</a>.</p>
<div class="fragment"><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;{</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;   <span class="keywordflow">if</span> (!strcmp(dial_status, <span class="stringliteral">&quot;ANSWER&quot;</span>)) {</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ac3e47d059a0e67a03f822f10bb7ec5b1">AST_CDR_ANSWERED</a>;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(dial_status, <span class="stringliteral">&quot;BUSY&quot;</span>)) {</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ad5945e6977fe7c1d64bacadaad7aa9ea">AST_CDR_BUSY</a>;</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(dial_status, <span class="stringliteral">&quot;CANCEL&quot;</span>) || !strcmp(dial_status, <span class="stringliteral">&quot;NOANSWER&quot;</span>)) {</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2ae5ddf52a9d2a20fc4af7b9e5dde283">AST_CDR_NOANSWER</a>;</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(dial_status, <span class="stringliteral">&quot;CONGESTION&quot;</span>)) {</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a>(<a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11bac7e09eacc1390ca5ae2adf3f8cb7f487">CDR_CONGESTION</a>)) {</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0af31f029a69fc67c7fca424569f708143">AST_CDR_FAILED</a>;</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a115c062baa559bcadd55720d6e2383bd">AST_CDR_CONGESTION</a>;</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;      }</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(dial_status, <span class="stringliteral">&quot;FAILED&quot;</span>)) {</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0af31f029a69fc67c7fca424569f708143">AST_CDR_FAILED</a>;</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;   }</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0af31f029a69fc67c7fca424569f708143">AST_CDR_FAILED</a>;</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;}</div><div class="ttc" id="cdr_8c_html_ab3ba06a4d885b31e4073c047d0dad02d"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a></div><div class="ttdeci">static int is_cdr_flag_set(unsigned int cdr_flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01127">cdr.c:1127</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0a2ae5ddf52a9d2a20fc4af7b9e5dde283"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2ae5ddf52a9d2a20fc4af7b9e5dde283">AST_CDR_NOANSWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00254">cdr.h:254</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0af31f029a69fc67c7fca424569f708143"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0af31f029a69fc67c7fca424569f708143">AST_CDR_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00256">cdr.h:256</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0ac3e47d059a0e67a03f822f10bb7ec5b1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ac3e47d059a0e67a03f822f10bb7ec5b1">AST_CDR_ANSWERED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00258">cdr.h:258</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11bac7e09eacc1390ca5ae2adf3f8cb7f487"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11bac7e09eacc1390ca5ae2adf3f8cb7f487">CDR_CONGESTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00223">cdr.h:223</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0ad5945e6977fe7c1d64bacadaad7aa9ea"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ad5945e6977fe7c1d64bacadaad7aa9ea">AST_CDR_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00257">cdr.h:257</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0a115c062baa559bcadd55720d6e2383bd"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a115c062baa559bcadd55720d6e2383bd">AST_CDR_CONGESTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00259">cdr.h:259</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad8c94889c52e8fd9c9f77d4b71c89cdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8c94889c52e8fd9c9f77d4b71c89cdd">&#9670;&nbsp;</a></span>dialed_pending_state_process_bridge_enter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316">process_bridge_enter_results</a> dialed_pending_state_process_bridge_enter </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01976">1976</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l00821">cdr_object_transition_state()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00503">cdr_object_fn_table::process_bridge_enter</a>.</p>
<div class="fragment"><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;{</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a>(cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a018b74f4d21e19c8830f1b1a802acd95">dial_state_fn_table</a>);</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;   <span class="keywordflow">return</span> cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#acd44c041c33dc7512a40fb8f1c6ecb68">process_bridge_enter</a>(cdr, bridge, channel);</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;}</div><div class="ttc" id="structcdr__object__fn__table_html_acd44c041c33dc7512a40fb8f1c6ecb68"><div class="ttname"><a href="../../d1/d0f/structcdr__object__fn__table.html#acd44c041c33dc7512a40fb8f1c6ecb68">cdr_object_fn_table::process_bridge_enter</a></div><div class="ttdeci">enum process_bridge_enter_results(*const process_bridge_enter)(struct cdr_object *cdr, struct ast_bridge_snapshot *bridge, struct ast_channel_snapshot *channel)</div><div class="ttdoc">Process the entering of a bridge by this CDR. The purpose of this callback is to have the CDR prepare...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00503">cdr.c:503</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="cdr_8c_html_a018b74f4d21e19c8830f1b1a802acd95"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a018b74f4d21e19c8830f1b1a802acd95">dial_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table dial_state_fn_table</div><div class="ttdoc">The virtual table for the Dial state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00604">cdr.c:604</a></div></div>
<div class="ttc" id="cdr_8c_html_aec9ada03f8f99aa4c972b141bcbd2ee3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a></div><div class="ttdeci">static void cdr_object_transition_state(struct cdr_object *cdr, struct cdr_object_fn_table *fn_table)</div><div class="ttdoc">Transition a cdr_object to a new state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00821">cdr.c:821</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0e015edf0c70e2261d82a38fea83457f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e015edf0c70e2261d82a38fea83457f">&#9670;&nbsp;</a></span>dialed_pending_state_process_dial_begin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dialed_pending_state_process_dial_begin </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>caller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>peer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01992">1992</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l00821">cdr_object_transition_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;{</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a>(cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a>);</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;   <span class="comment">/* Ask for a new CDR */</span></div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a5f50dd95a426c8a70710afc315164f04"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table finalized_state_fn_table</div><div class="ttdoc">The virtual table for the finalized state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00694">cdr.c:694</a></div></div>
<div class="ttc" id="cdr_8c_html_aec9ada03f8f99aa4c972b141bcbd2ee3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a></div><div class="ttdeci">static void cdr_object_transition_state(struct cdr_object *cdr, struct cdr_object_fn_table *fn_table)</div><div class="ttdoc">Transition a cdr_object to a new state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00821">cdr.c:821</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a24cc031156cc9f757aac40a4b4301ac2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24cc031156cc9f757aac40a4b4301ac2">&#9670;&nbsp;</a></span>dialed_pending_state_process_parking_bridge_enter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dialed_pending_state_process_parking_bridge_enter </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01982">1982</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l00821">cdr_object_transition_state()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>.</p>
<div class="fragment"><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;{</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;   <span class="keywordflow">if</span> (cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>) {</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;      <span class="comment">/* We can&#39;t handle this as we have a Party B - ask for a new one */</span></div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;   }</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a>(cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a7452de272169d0534a08287fde1dc636">parked_state_fn_table</a>);</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;}</div><div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="cdr_8c_html_a7452de272169d0534a08287fde1dc636"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a7452de272169d0534a08287fde1dc636">parked_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table parked_state_fn_table</div><div class="ttdoc">The virtual table for the Parked state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00678">cdr.c:678</a></div></div>
<div class="ttc" id="cdr_8c_html_aec9ada03f8f99aa4c972b141bcbd2ee3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a></div><div class="ttdeci">static void cdr_object_transition_state(struct cdr_object *cdr, struct cdr_object_fn_table *fn_table)</div><div class="ttdoc">Transition a cdr_object to a new state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00821">cdr.c:821</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aea1036434bb1f136e2b46bd98739d99a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea1036434bb1f136e2b46bd98739d99a">&#9670;&nbsp;</a></span>dialed_pending_state_process_party_a()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dialed_pending_state_process_party_a </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>snapshot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01951">1951</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l01540">base_process_party_a()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00821">cdr_object_transition_state()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00804">cdr_object_transition_state_init()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00437">cdr_object_fn_table::process_party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l01148">snapshot_cep_changed()</a>.</p>
<div class="fragment"><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;{</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;   <span class="comment">/* If we get a CEP change, we&#39;re executing dialplan. If we have a Party B</span></div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;<span class="comment">    * that means we need a new CDR; otherwise, switch us over to single.</span></div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#abdcb681e5fb3d509b769efa9d498f3f7">snapshot_cep_changed</a>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>, snapshot)) {</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;      <span class="keywordflow">if</span> (cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>) {</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a>(cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a>);</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;         cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a20c04201646afd8fbeb4a3b001e54311">process_party_a</a>(cdr, snapshot);</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;         <span class="comment">/* The CDR does not need to be reinitialized when transitioning</span></div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;<span class="comment">          * to its single state as this would overwrite the start time,</span></div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;<span class="comment">          * causing potentially both the answer and the start time to be</span></div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;<span class="comment">          * the same which is incorrect.</span></div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#a0da1ef8c056af9f1566664d6f6563f23">cdr_object_transition_state_init</a>(cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a03d77113f205fd4450fe8866dc0f48dd">single_state_fn_table</a>, 0);</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;         cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a20c04201646afd8fbeb4a3b001e54311">process_party_a</a>(cdr, snapshot);</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;      }</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;   }</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a8eaa5eabaf72c8c63f40f6b03f196573">base_process_party_a</a>(cdr, snapshot);</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a8eaa5eabaf72c8c63f40f6b03f196573"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8eaa5eabaf72c8c63f40f6b03f196573">base_process_party_a</a></div><div class="ttdeci">static int base_process_party_a(struct cdr_object *cdr, struct ast_channel_snapshot *snapshot)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01540">cdr.c:1540</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="structcdr__object__fn__table_html_a20c04201646afd8fbeb4a3b001e54311"><div class="ttname"><a href="../../d1/d0f/structcdr__object__fn__table.html#a20c04201646afd8fbeb4a3b001e54311">cdr_object_fn_table::process_party_a</a></div><div class="ttdeci">int(*const process_party_a)(struct cdr_object *cdr, struct ast_channel_snapshot *snapshot)</div><div class="ttdoc">Process a Party A update for the cdr_object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00437">cdr.c:437</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="cdr_8c_html_abdcb681e5fb3d509b769efa9d498f3f7"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#abdcb681e5fb3d509b769efa9d498f3f7">snapshot_cep_changed</a></div><div class="ttdeci">static int snapshot_cep_changed(struct ast_channel_snapshot *old_snapshot, struct ast_channel_snapshot *new_snapshot)</div><div class="ttdoc">Return whether or not a channel has changed its state in the dialplan, subject to endbeforehexten log...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01148">cdr.c:1148</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="cdr_8c_html_a0da1ef8c056af9f1566664d6f6563f23"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a0da1ef8c056af9f1566664d6f6563f23">cdr_object_transition_state_init</a></div><div class="ttdeci">static void cdr_object_transition_state_init(struct cdr_object *cdr, struct cdr_object_fn_table *fn_table, int do_init)</div><div class="ttdoc">Transition a cdr_object to a new state with initiation flag. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00804">cdr.c:804</a></div></div>
<div class="ttc" id="cdr_8c_html_a03d77113f205fd4450fe8866dc0f48dd"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a03d77113f205fd4450fe8866dc0f48dd">single_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table single_state_fn_table</div><div class="ttdoc">The virtual table for the Single state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00573">cdr.c:573</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f50dd95a426c8a70710afc315164f04"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table finalized_state_fn_table</div><div class="ttdoc">The virtual table for the finalized state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00694">cdr.c:694</a></div></div>
<div class="ttc" id="cdr_8c_html_aec9ada03f8f99aa4c972b141bcbd2ee3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a></div><div class="ttdeci">static void cdr_object_transition_state(struct cdr_object *cdr, struct cdr_object_fn_table *fn_table)</div><div class="ttdoc">Transition a cdr_object to a new state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00821">cdr.c:821</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac661a0b8ae11d5cf5cae1e6aa238496b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac661a0b8ae11d5cf5cae1e6aa238496b">&#9670;&nbsp;</a></span>do_batch_backend_process()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* do_batch_backend_process </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03749">3749</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l03411">ast_cdr_free()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00337">cdr_batch_item::cdr</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00338">cdr_batch_item::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03508">post_cdr()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03766">cdr_submit_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;{</div><div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d81/structcdr__batch__item.html">cdr_batch_item</a> *processeditem;</div><div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d81/structcdr__batch__item.html">cdr_batch_item</a> *batchitem = data;</div><div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;</div><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;   <span class="comment">/* Push each CDR into storage mechanism(s) and free all the memory */</span></div><div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;   <span class="keywordflow">while</span> (batchitem) {</div><div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#ad01956d63583675f04baf543336b7c94">post_cdr</a>(batchitem-&gt;<a class="code" href="../../dc/d81/structcdr__batch__item.html#a0b6fbd632bcf2e09017a0b82c2ed41ff">cdr</a>);</div><div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a28b931d52c71271afd601186db95fec2">ast_cdr_free</a>(batchitem-&gt;<a class="code" href="../../dc/d81/structcdr__batch__item.html#a0b6fbd632bcf2e09017a0b82c2ed41ff">cdr</a>);</div><div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;      processeditem = batchitem;</div><div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;      batchitem = batchitem-&gt;<a class="code" href="../../dc/d81/structcdr__batch__item.html#ae481e0b645c450212b5655180a678d42">next</a>;</div><div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(processeditem);</div><div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;   }</div><div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;</div><div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;}</div><div class="ttc" id="cdr_8c_html_ad01956d63583675f04baf543336b7c94"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ad01956d63583675f04baf543336b7c94">post_cdr</a></div><div class="ttdeci">static void post_cdr(struct ast_cdr *cdr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03508">cdr.c:3508</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structcdr__batch__item_html_a0b6fbd632bcf2e09017a0b82c2ed41ff"><div class="ttname"><a href="../../dc/d81/structcdr__batch__item.html#a0b6fbd632bcf2e09017a0b82c2ed41ff">cdr_batch_item::cdr</a></div><div class="ttdeci">struct ast_cdr * cdr</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00337">cdr.c:337</a></div></div>
<div class="ttc" id="cdr_8c_html_a28b931d52c71271afd601186db95fec2"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a28b931d52c71271afd601186db95fec2">ast_cdr_free</a></div><div class="ttdeci">void ast_cdr_free(struct ast_cdr *cdr)</div><div class="ttdoc">Free a CDR record. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03411">cdr.c:3411</a></div></div>
<div class="ttc" id="structcdr__batch__item_html_ae481e0b645c450212b5655180a678d42"><div class="ttname"><a href="../../dc/d81/structcdr__batch__item.html#ae481e0b645c450212b5655180a678d42">cdr_batch_item::next</a></div><div class="ttdeci">struct cdr_batch_item * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00338">cdr.c:338</a></div></div>
<div class="ttc" id="structcdr__batch__item_html"><div class="ttname"><a href="../../dc/d81/structcdr__batch__item.html">cdr_batch_item</a></div><div class="ttdoc">Queued CDR waiting to be batched. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00336">cdr.c:336</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a871988199d244a254ad19be2ab41d6e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a871988199d244a254ad19be2ab41d6e8">&#9670;&nbsp;</a></span>do_cdr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* do_cdr </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03903">3903</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00238">ast_samp2tv()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00755">ast_sched_runq()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00431">ast_sched_wait()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02283">ast_tvadd()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00362">cdr_pending_cond</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00361">cdr_pending_lock</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04416">cdr_enable_batch_mode()</a>.</p>
<div class="fragment"><div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;{</div><div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;   <span class="keyword">struct </span>timespec <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div><div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;   <span class="keywordtype">int</span> schedms;</div><div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;   <span class="keywordtype">int</span> numevents = 0;</div><div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;</div><div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;      <span class="keyword">struct </span>timeval now;</div><div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;      schedms = <a class="code" href="../../d7/d00/sched_8h.html#af13fcd6652b8dcafae35c2fa35e80a8d">ast_sched_wait</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>);</div><div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;      <span class="comment">/* this shouldn&#39;t happen, but provide a 1 second default just in case */</span></div><div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;      <span class="keywordflow">if</span> (schedms &lt; 0)</div><div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;         schedms = 1000;</div><div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;      now = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), <a class="code" href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a>(schedms, 1000));</div><div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;      <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>.tv_sec = now.tv_sec;</div><div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;      <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>.tv_nsec = now.tv_usec * 1000;</div><div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;      <span class="comment">/* prevent stuff from clobbering cdr_pending_cond, then wait on signals sent to it until the timeout expires */</span></div><div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../dc/df2/cdr_8c.html#acde84d468388579851a2de600c75a6e4">cdr_pending_lock</a>);</div><div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;<a class="code" href="../../dc/df2/cdr_8c.html#a3350735a1fc58db7a559b16073a83a3c">cdr_pending_cond</a>, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#acde84d468388579851a2de600c75a6e4">cdr_pending_lock</a>, &amp;<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>);</div><div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;      numevents = <a class="code" href="../../d7/d00/sched_8h.html#aa9c3d54f142eee0bad110fbb825c0787">ast_sched_runq</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>);</div><div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../dc/df2/cdr_8c.html#acde84d468388579851a2de600c75a6e4">cdr_pending_lock</a>);</div><div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Processed %d CDR batches from the run queue\n&quot;</span>, numevents);</div><div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;   }</div><div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;</div><div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;}</div><div class="ttc" id="sched_8h_html_aa9c3d54f142eee0bad110fbb825c0787"><div class="ttname"><a href="../../d7/d00/sched_8h.html#aa9c3d54f142eee0bad110fbb825c0787">ast_sched_runq</a></div><div class="ttdeci">int ast_sched_runq(struct ast_sched_context *con)</div><div class="ttdoc">Runs the queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00755">sched.c:755</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="cdr_8c_html_acde84d468388579851a2de600c75a6e4"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#acde84d468388579851a2de600c75a6e4">cdr_pending_lock</a></div><div class="ttdeci">static ast_mutex_t cdr_pending_lock</div><div class="ttdoc">These are used to wake up the CDR thread when there&amp;#39;s work to do. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00361">cdr.c:361</a></div></div>
<div class="ttc" id="time_8h_html_a1d774df72e3dbb623475783e06ce4f61"><div class="ttname"><a href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a></div><div class="ttdeci">struct timeval ast_samp2tv(unsigned int _nsamp, unsigned int _rate)</div><div class="ttdoc">Returns a timeval corresponding to the duration of n samples at rate r. Useful to convert samples to ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00238">time.h:238</a></div></div>
<div class="ttc" id="cdr_8c_html_a3350735a1fc58db7a559b16073a83a3c"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3350735a1fc58db7a559b16073a83a3c">cdr_pending_cond</a></div><div class="ttdeci">static ast_cond_t cdr_pending_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00362">cdr.c:362</a></div></div>
<div class="ttc" id="time_8h_html_a97e1bb8fbd7a103212789e87e7ed6073"><div class="ttname"><a href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a></div><div class="ttdeci">struct timeval ast_tvadd(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the sum of two timevals a + b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02283">extconf.c:2283</a></div></div>
<div class="ttc" id="sched_8h_html_af13fcd6652b8dcafae35c2fa35e80a8d"><div class="ttname"><a href="../../d7/d00/sched_8h.html#af13fcd6652b8dcafae35c2fa35e80a8d">ast_sched_wait</a></div><div class="ttdeci">int ast_sched_wait(struct ast_sched_context *con) attribute_warn_unused_result</div><div class="ttdoc">Determines number of seconds until the next outstanding event to take place. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00431">sched.c:431</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a897c4684f64f60932cf77a2cb8402cdc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a897c4684f64f60932cf77a2cb8402cdc">&#9670;&nbsp;</a></span>filter_bridge_messages()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int filter_bridge_messages </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td>
          <td class="paramname"><em>bridge</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Filter bridge messages based on bridge technology. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02386">2386</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::subclass</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::technology</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02708">handle_bridge_enter_message()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l02404">handle_bridge_leave_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;{</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;   <span class="comment">/* Ignore holding bridge technology messages. We treat this simply as an application</span></div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;<span class="comment">    * that a channel enters into.</span></div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;   <span class="keywordflow">if</span> (!strcmp(bridge-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#ace6976ffaf8aa0738aa7e01b0e98c04f">technology</a>, <span class="stringliteral">&quot;holding_bridge&quot;</span>) &amp;&amp; strcmp(bridge-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#aed90bb628ee273a4b27b778b5b0d8ec2">subclass</a>, <span class="stringliteral">&quot;parking&quot;</span>)) {</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;   }</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;}</div><div class="ttc" id="structast__bridge__snapshot_html_ace6976ffaf8aa0738aa7e01b0e98c04f"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#ace6976ffaf8aa0738aa7e01b0e98c04f">ast_bridge_snapshot::technology</a></div><div class="ttdeci">const ast_string_field technology</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_aed90bb628ee273a4b27b778b5b0d8ec2"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#aed90bb628ee273a4b27b778b5b0d8ec2">ast_bridge_snapshot::subclass</a></div><div class="ttdeci">const ast_string_field subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a527db94b4432c2cd6fc58c32b285153e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a527db94b4432c2cd6fc58c32b285153e">&#9670;&nbsp;</a></span>filter_channel_snapshot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int filter_channel_snapshot </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>snapshot</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02064">2064</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h_source.html#l00972">AST_CHAN_TP_INTERNAL</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, and <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00114">ast_channel_snapshot_base::tech_properties</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02073">filter_channel_snapshot_message()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02708">handle_bridge_enter_message()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02404">handle_bridge_leave_message()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02105">handle_dial_message()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l02751">handle_parked_call_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;{</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;   <span class="keywordflow">return</span> snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a6dbde3b298b8f8784f03ef05ac9ee035">tech_properties</a> &amp; <a class="code" href="../../d5/d7b/channel_8h.html#aa62371d642974c67a0c0efa77d54fcbda1cec91607109bb73e86c4fa1c2ae9344">AST_CHAN_TP_INTERNAL</a>;</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="channel_8h_html_aa62371d642974c67a0c0efa77d54fcbda1cec91607109bb73e86c4fa1c2ae9344"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa62371d642974c67a0c0efa77d54fcbda1cec91607109bb73e86c4fa1c2ae9344">AST_CHAN_TP_INTERNAL</a></div><div class="ttdoc">Channels with this particular technology are an implementation detail of Asterisk and should generall...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00972">channel.h:972</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_a6dbde3b298b8f8784f03ef05ac9ee035"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#a6dbde3b298b8f8784f03ef05ac9ee035">ast_channel_snapshot_base::tech_properties</a></div><div class="ttdeci">int tech_properties</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00114">stasis_channels.h:114</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac2d6cdf68e61e1cece8c33f15f71b51b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2d6cdf68e61e1cece8c33f15f71b51b">&#9670;&nbsp;</a></span>filter_channel_snapshot_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int filter_channel_snapshot_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>old_snapshot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>new_snapshot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02073">2073</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l02064">filter_channel_snapshot()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02278">handle_channel_snapshot_update_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;{</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;   <span class="keywordtype">int</span> ret = 0;</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;   <span class="comment">/* Drop cache updates from certain channel technologies */</span></div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;   <span class="keywordflow">if</span> (old_snapshot) {</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;      ret |= <a class="code" href="../../dc/df2/cdr_8c.html#a527db94b4432c2cd6fc58c32b285153e">filter_channel_snapshot</a>(old_snapshot);</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;   }</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;   <span class="keywordflow">if</span> (new_snapshot) {</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;      ret |= <a class="code" href="../../dc/df2/cdr_8c.html#a527db94b4432c2cd6fc58c32b285153e">filter_channel_snapshot</a>(new_snapshot);</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;   }</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a527db94b4432c2cd6fc58c32b285153e"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a527db94b4432c2cd6fc58c32b285153e">filter_channel_snapshot</a></div><div class="ttdeci">static int filter_channel_snapshot(struct ast_channel_snapshot *snapshot)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02064">cdr.c:2064</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f4d8e5786e103b3762e0d9680773a2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f4d8e5786e103b3762e0d9680773a2c">&#9670;&nbsp;</a></span>finalize_batch_mode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void finalize_batch_mode </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04277">4277</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l04577">ast_cdr_engine_term()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00200">ast_cond_destroy</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00362">cdr_pending_cond</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00355">cdr_thread</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04385">cdr_engine_shutdown()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l04617">reload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;{</div><div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#a1a28dc87e0a897d209ff16ca63bff690">cdr_thread</a> == <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) {</div><div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;   }</div><div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;   <span class="comment">/* wake up the thread so it will exit */</span></div><div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;   pthread_cancel(<a class="code" href="../../dc/df2/cdr_8c.html#a1a28dc87e0a897d209ff16ca63bff690">cdr_thread</a>);</div><div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;   pthread_kill(<a class="code" href="../../dc/df2/cdr_8c.html#a1a28dc87e0a897d209ff16ca63bff690">cdr_thread</a>, SIGURG);</div><div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;   pthread_join(<a class="code" href="../../dc/df2/cdr_8c.html#a1a28dc87e0a897d209ff16ca63bff690">cdr_thread</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a1a28dc87e0a897d209ff16ca63bff690">cdr_thread</a> = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>;</div><div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;<a class="code" href="../../dc/df2/cdr_8c.html#a3350735a1fc58db7a559b16073a83a3c">cdr_pending_cond</a>);</div><div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a5634f8ea707fb2fdf87abdd55a539764">ast_cdr_engine_term</a>();</div><div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr_8c_html_a5634f8ea707fb2fdf87abdd55a539764"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5634f8ea707fb2fdf87abdd55a539764">ast_cdr_engine_term</a></div><div class="ttdeci">void ast_cdr_engine_term(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l04577">cdr.c:4577</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="cdr_8c_html_a3350735a1fc58db7a559b16073a83a3c"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3350735a1fc58db7a559b16073a83a3c">cdr_pending_cond</a></div><div class="ttdeci">static ast_cond_t cdr_pending_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00362">cdr.c:362</a></div></div>
<div class="ttc" id="lock_8h_html_a1ea2f4040a736cddbecea48b30ffedfd"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a></div><div class="ttdeci">#define ast_cond_destroy(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00200">lock.h:200</a></div></div>
<div class="ttc" id="cdr_8c_html_a1a28dc87e0a897d209ff16ca63bff690"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a1a28dc87e0a897d209ff16ca63bff690">cdr_thread</a></div><div class="ttdeci">static pthread_t cdr_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00355">cdr.c:355</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a02c606cb4ff770e19ecd168b3129572d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02c606cb4ff770e19ecd168b3129572d">&#9670;&nbsp;</a></span>finalized_state_init_function()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void finalized_state_init_function </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02044">2044</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l01440">cdr_object_finalize()</a>.</p>
<div class="fragment"><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;{</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a34a146403fab13026f6e302c753be741">cdr_object_finalize</a>(cdr);</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a34a146403fab13026f6e302c753be741"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a34a146403fab13026f6e302c753be741">cdr_object_finalize</a></div><div class="ttdeci">static void cdr_object_finalize(struct cdr_object *cdr)</div><div class="ttdoc">Finalize a CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01440">cdr.c:1440</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0a6d8332b52d0cf771b65a396872d16f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a6d8332b52d0cf771b65a396872d16f">&#9670;&nbsp;</a></span>finalized_state_process_party_a()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int finalized_state_process_party_a </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>snapshot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02049">2049</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h_source.html#l01155">AST_SOFTHANGUP_HANGUP_EXEC</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00224">CDR_END_BEFORE_H_EXTEN</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01127">is_cdr_flag_set()</a>, and <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00156">ast_channel_snapshot::softhangup_flags</a>.</p>
<div class="fragment"><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;{</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#acd7e028035da37eabb4e2dd1ca495f0c">softhangup_flags</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a33d9271d8d892501de8c9536382d71ea">AST_SOFTHANGUP_HANGUP_EXEC</a>)</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;      &amp;&amp; <a class="code" href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a>(<a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba951b6a2ed4e5418e5e7bdab6f37061a1">CDR_END_BEFORE_H_EXTEN</a>)) {</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;   }</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;   <span class="comment">/* Indicate that, if possible, we should get a new CDR */</span></div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;}</div><div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba951b6a2ed4e5418e5e7bdab6f37061a1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba951b6a2ed4e5418e5e7bdab6f37061a1">CDR_END_BEFORE_H_EXTEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00224">cdr.h:224</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="cdr_8c_html_ab3ba06a4d885b31e4073c047d0dad02d"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a></div><div class="ttdeci">static int is_cdr_flag_set(unsigned int cdr_flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01127">cdr.c:1127</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_acd7e028035da37eabb4e2dd1ca495f0c"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#acd7e028035da37eabb4e2dd1ca495f0c">ast_channel_snapshot::softhangup_flags</a></div><div class="ttdeci">struct ast_flags softhangup_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00156">stasis_channels.h:156</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a33d9271d8d892501de8c9536382d71ea"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a33d9271d8d892501de8c9536382d71ea">AST_SOFTHANGUP_HANGUP_EXEC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01155">channel.h:1155</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae23ebf460a645c91c4f3c471c3ecd925"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae23ebf460a645c91c4f3c471c3ecd925">&#9670;&nbsp;</a></span>free_variables()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void free_variables </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/de6/structvarshead.html">varshead</a> *&#160;</td>
          <td class="paramname"><em>headp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delete all variables from a variable list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">headp</td><td>The head pointer to the variable list to delete </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00777">777</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02473">ast_var_delete()</a>, and <a class="el" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">ast_var_t::entries</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03637">ast_cdr_fork()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03411">ast_cdr_free()</a>.</p>
<div class="fragment"><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;{</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *vardata;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   <span class="keywordflow">while</span> ((vardata = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(headp, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>))) {</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <a class="code" href="../../d9/de7/chanvars_8h.html#ae19fa022349aa0481f982ccced85d7ba">ast_var_delete</a>(vardata);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;   }</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="structast__var__t_html"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html">ast_var_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00028">chanvars.h:28</a></div></div>
<div class="ttc" id="chanvars_8h_html_ae19fa022349aa0481f982ccced85d7ba"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#ae19fa022349aa0481f982ccced85d7ba">ast_var_delete</a></div><div class="ttdeci">void ast_var_delete(struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02473">extconf.c:2473</a></div></div>
<div class="ttc" id="structast__var__t_html_a55d5c7988e3164d7310d88c67d97a1db"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">ast_var_t::entries</a></div><div class="ttdeci">struct ast_var_t::@249 entries</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a78459003df6cfe438b4b820100606448"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78459003df6cfe438b4b820100606448">&#9670;&nbsp;</a></span>handle_bridge_enter_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void handle_bridge_enter_message </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02708">2708</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00279">AST_LOG_WARNING</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00125">ast_bridge_blob::bridge</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00210">CDR_DEBUG</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00127">ast_bridge_blob::channel</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02386">filter_bridge_messages()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02064">filter_channel_snapshot()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02586">handle_parking_bridge_enter_message()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02627">handle_standard_bridge_enter_message()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message_timestamp()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::subclass</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::uniqueid</a>, and <a class="el" href="../../d0/d89/codec__g726_8c_source.html#l00367">update()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04522">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;{</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a> = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(message);</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *bridge = update-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#a820b583b07f0cf97618ca22d73cd8f09">bridge</a>;</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = update-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#a8ee8cdf03a2b9d3424011cb6875751fa">channel</a>;</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#a897c4684f64f60932cf77a2cb8402cdc">filter_bridge_messages</a>(bridge)) {</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;   }</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#a527db94b4432c2cd6fc58c32b285153e">filter_channel_snapshot</a>(channel)) {</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;   }</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>(<span class="stringliteral">&quot;Bridge Enter message for channel %s: %u.%08u\n&quot;</span>,</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;      channel-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>,</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;      (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(message)-&gt;tv_sec,</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;      (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(message)-&gt;tv_usec);</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;   cdr = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a>, channel-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>);</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2878d83e36d91850732bad997524e45e">AST_LOG_WARNING</a>, <span class="stringliteral">&quot;No CDR for channel %s\n&quot;</span>, channel-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;   }</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;   <span class="keywordflow">if</span> (!strcmp(bridge-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#aed90bb628ee273a4b27b778b5b0d8ec2">subclass</a>, <span class="stringliteral">&quot;parking&quot;</span>)) {</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a9eac9bdac4d87d2284e68d62627724d9">handle_parking_bridge_enter_message</a>(cdr, bridge, channel, <a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(message));</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a235c58e8a0fcc421a4e1106e0df348d1">handle_standard_bridge_enter_message</a>(cdr, bridge, channel, <a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(message));</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;   }</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr);</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structast__bridge__blob_html_a8ee8cdf03a2b9d3424011cb6875751fa"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html#a8ee8cdf03a2b9d3424011cb6875751fa">ast_bridge_blob::channel</a></div><div class="ttdeci">struct ast_channel_snapshot * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00127">stasis_bridges.h:127</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="codec__g726_8c_html_a8c58a1d1fd9436ff5145385d3ef7a430"><div class="ttname"><a href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a></div><div class="ttdeci">static void update(int code_size, int y, int wi, int fi, int dq, int sr, int dqsez, struct g726_state *state_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/codec__g726_8c_source.html#l00367">codec_g726.c:367</a></div></div>
<div class="ttc" id="cdr_8c_html_a9eac9bdac4d87d2284e68d62627724d9"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a9eac9bdac4d87d2284e68d62627724d9">handle_parking_bridge_enter_message</a></div><div class="ttdeci">static void handle_parking_bridge_enter_message(struct cdr_object *cdr, struct ast_bridge_snapshot *bridge, struct ast_channel_snapshot *channel, const struct timeval *event_time)</div><div class="ttdoc">Handle entering into a parking bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02586">cdr.c:2586</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a></div><div class="ttdoc">Structure that contains a snapshot of information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00322">bridge.h:322</a></div></div>
<div class="ttc" id="logger_8h_html_a2878d83e36d91850732bad997524e45e"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a2878d83e36d91850732bad997524e45e">AST_LOG_WARNING</a></div><div class="ttdeci">#define AST_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00279">logger.h:279</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">ast_channel_snapshot_base::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="cdr_8c_html_a527db94b4432c2cd6fc58c32b285153e"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a527db94b4432c2cd6fc58c32b285153e">filter_channel_snapshot</a></div><div class="ttdeci">static int filter_channel_snapshot(struct ast_channel_snapshot *snapshot)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02064">cdr.c:2064</a></div></div>
<div class="ttc" id="structast__bridge__blob_html_a820b583b07f0cf97618ca22d73cd8f09"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html#a820b583b07f0cf97618ca22d73cd8f09">ast_bridge_blob::bridge</a></div><div class="ttdeci">struct ast_bridge_snapshot * bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00125">stasis_bridges.h:125</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="cdr_8c_html_a8052195443a9cb5835d7d2b3ab7279aa"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a></div><div class="ttdeci">#define CDR_DEBUG(fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00210">cdr.c:210</a></div></div>
<div class="ttc" id="stasis_8h_html_a0a9c10eadd9db34f8c0b19619752ea93"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a></div><div class="ttdeci">const struct timeval * stasis_message_timestamp(const struct stasis_message *msg)</div><div class="ttdoc">Get the time when a message was created. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message.c:203</a></div></div>
<div class="ttc" id="cdr_8c_html_a897c4684f64f60932cf77a2cb8402cdc"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a897c4684f64f60932cf77a2cb8402cdc">filter_bridge_messages</a></div><div class="ttdeci">static int filter_bridge_messages(struct ast_bridge_snapshot *bridge)</div><div class="ttdoc">Filter bridge messages based on bridge technology. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02386">cdr.c:2386</a></div></div>
<div class="ttc" id="structast__bridge__blob_html"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a></div><div class="ttdoc">Blob of data associated with a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00123">stasis_bridges.h:123</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="cdr_8c_html_aabd874b0958bde3e08b5a876c2d1a395"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_master</div><div class="ttdoc">A container of the active master CDRs indexed by Party A channel uniqueid. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00365">cdr.c:365</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="cdr_8c_html_a235c58e8a0fcc421a4e1106e0df348d1"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a235c58e8a0fcc421a4e1106e0df348d1">handle_standard_bridge_enter_message</a></div><div class="ttdeci">static void handle_standard_bridge_enter_message(struct cdr_object *cdr, struct ast_bridge_snapshot *bridge, struct ast_channel_snapshot *channel, const struct timeval *event_time)</div><div class="ttdoc">Handle a bridge enter message for a &amp;#39;normal&amp;#39; bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02627">cdr.c:2627</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_aed90bb628ee273a4b27b778b5b0d8ec2"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#aed90bb628ee273a4b27b778b5b0d8ec2">ast_bridge_snapshot::subclass</a></div><div class="ttdeci">const ast_string_field subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6008444aa49a2254f2cce57390cdf53d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6008444aa49a2254f2cce57390cdf53d">&#9670;&nbsp;</a></span>handle_bridge_leave_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void handle_bridge_leave_message </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handler for when a channel leaves a bridge. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Passed on </td></tr>
    <tr><td class="paramname">sub</td><td>The stasis subscription for this message callback </td></tr>
    <tr><td class="paramname">topic</td><td>The topic this message was published for </td></tr>
    <tr><td class="paramname">message</td><td>The message - hopefully a bridge one! </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02404">2404</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01743">ao2_callback_data</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00279">AST_LOG_WARNING</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00125">ast_bridge_blob::bridge</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02355">bridge_leave_data::bridge</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00210">CDR_DEBUG</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02361">cdr_object_party_b_left_bridge_cb()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00127">ast_bridge_blob::channel</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02356">bridge_leave_data::channel</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02386">filter_bridge_messages()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02064">filter_channel_snapshot()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00721">cdr_object::lastevent</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02357">bridge_leave_data::lastevent</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01053">OBJ_MULTIPLE</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01048">OBJ_NODATA</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00533">cdr_object_fn_table::process_bridge_leave</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message_timestamp()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::subclass</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::uniqueid</a>, and <a class="el" href="../../d0/d89/codec__g726_8c_source.html#l00367">update()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04522">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;{</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a> = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(message);</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *bridge = update-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#a820b583b07f0cf97618ca22d73cd8f09">bridge</a>;</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = update-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#a8ee8cdf03a2b9d3424011cb6875751fa">channel</a>;</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d82/structbridge__leave__data.html">bridge_leave_data</a> leave_data = {</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;      .<a class="code" href="../../d7/d82/structbridge__leave__data.html#a820b583b07f0cf97618ca22d73cd8f09">bridge</a> = <a class="code" href="../../d7/d82/structbridge__leave__data.html#a820b583b07f0cf97618ca22d73cd8f09">bridge</a>,</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;      .channel = <a class="code" href="../../d7/d82/structbridge__leave__data.html#a8ee8cdf03a2b9d3424011cb6875751fa">channel</a>,</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;      .lastevent = <a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(message)</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;   };</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;   <span class="keywordtype">int</span> left_bridge = 0;</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#a897c4684f64f60932cf77a2cb8402cdc">filter_bridge_messages</a>(bridge)) {</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;   }</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#a527db94b4432c2cd6fc58c32b285153e">filter_channel_snapshot</a>(channel)) {</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;   }</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>(<span class="stringliteral">&quot;Bridge Leave message for %s: %u.%08u\n&quot;</span>,</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;      channel-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>,</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;      (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)leave_data.<a class="code" href="../../d7/d82/structbridge__leave__data.html#a054f38f65fc1ce8357f5b431a19e7e05">lastevent</a>-&gt;tv_sec,</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;      (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)leave_data.<a class="code" href="../../d7/d82/structbridge__leave__data.html#a054f38f65fc1ce8357f5b431a19e7e05">lastevent</a>-&gt;tv_usec);</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;   cdr = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a>, channel-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>);</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2878d83e36d91850732bad997524e45e">AST_LOG_WARNING</a>, <span class="stringliteral">&quot;No CDR for channel %s\n&quot;</span>, channel-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;   }</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;   <span class="comment">/* Party A */</span></div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cdr);</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;   <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;      it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">lastevent</a> = *leave_data.<a class="code" href="../../d7/d82/structbridge__leave__data.html#a054f38f65fc1ce8357f5b431a19e7e05">lastevent</a>;</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;      <span class="keywordflow">if</span> (!it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a6cdd7fd312a1eed5a7f0a9dde43c653f">process_bridge_leave</a>) {</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;      }</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>(<span class="stringliteral">&quot;%p - Processing Bridge Leave for %s\n&quot;</span>,</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;         it_cdr, channel-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;      <span class="keywordflow">if</span> (!it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a6cdd7fd312a1eed5a7f0a9dde43c653f">process_bridge_leave</a>(it_cdr, bridge, channel)) {</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;         <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(it_cdr, bridge, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;         left_bridge = 1;</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;      }</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;   }</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cdr);</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;   <span class="comment">/* Party B */</span></div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;   <span class="keywordflow">if</span> (left_bridge</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;      &amp;&amp; strcmp(bridge-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#aed90bb628ee273a4b27b778b5b0d8ec2">subclass</a>, <span class="stringliteral">&quot;parking&quot;</span>)) {</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a63fd831fe48aed32d3ef992ad8e45293">ao2_callback_data</a>(<a class="code" href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>,</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#ae391d5e66065256893c2ef6c784e6d9f">cdr_object_party_b_left_bridge_cb</a>, (<span class="keywordtype">char</span> *) leave_data.<a class="code" href="../../d7/d82/structbridge__leave__data.html#a8ee8cdf03a2b9d3424011cb6875751fa">channel</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>,</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;         &amp;leave_data);</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;   }</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr);</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;}</div><div class="ttc" id="structbridge__leave__data_html_a820b583b07f0cf97618ca22d73cd8f09"><div class="ttname"><a href="../../d7/d82/structbridge__leave__data.html#a820b583b07f0cf97618ca22d73cd8f09">bridge_leave_data::bridge</a></div><div class="ttdeci">struct ast_bridge_snapshot * bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02355">cdr.c:2355</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structast__bridge__blob_html_a8ee8cdf03a2b9d3424011cb6875751fa"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html#a8ee8cdf03a2b9d3424011cb6875751fa">ast_bridge_blob::channel</a></div><div class="ttdeci">struct ast_channel_snapshot * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00127">stasis_bridges.h:127</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="codec__g726_8c_html_a8c58a1d1fd9436ff5145385d3ef7a430"><div class="ttname"><a href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a></div><div class="ttdeci">static void update(int code_size, int y, int wi, int fi, int dq, int sr, int dqsez, struct g726_state *state_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/codec__g726_8c_source.html#l00367">codec_g726.c:367</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01048">astobj2.h:1048</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a></div><div class="ttdoc">Structure that contains a snapshot of information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00322">bridge.h:322</a></div></div>
<div class="ttc" id="logger_8h_html_a2878d83e36d91850732bad997524e45e"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a2878d83e36d91850732bad997524e45e">AST_LOG_WARNING</a></div><div class="ttdeci">#define AST_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00279">logger.h:279</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">ast_channel_snapshot_base::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="cdr_8c_html_a527db94b4432c2cd6fc58c32b285153e"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a527db94b4432c2cd6fc58c32b285153e">filter_channel_snapshot</a></div><div class="ttdeci">static int filter_channel_snapshot(struct ast_channel_snapshot *snapshot)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02064">cdr.c:2064</a></div></div>
<div class="ttc" id="structbridge__leave__data_html_a8ee8cdf03a2b9d3424011cb6875751fa"><div class="ttname"><a href="../../d7/d82/structbridge__leave__data.html#a8ee8cdf03a2b9d3424011cb6875751fa">bridge_leave_data::channel</a></div><div class="ttdeci">struct ast_channel_snapshot * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02356">cdr.c:2356</a></div></div>
<div class="ttc" id="structast__bridge__blob_html_a820b583b07f0cf97618ca22d73cd8f09"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html#a820b583b07f0cf97618ca22d73cd8f09">ast_bridge_blob::bridge</a></div><div class="ttdeci">struct ast_bridge_snapshot * bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00125">stasis_bridges.h:125</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="cdr_8c_html_a8052195443a9cb5835d7d2b3ab7279aa"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a></div><div class="ttdeci">#define CDR_DEBUG(fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00210">cdr.c:210</a></div></div>
<div class="ttc" id="stasis_8h_html_a0a9c10eadd9db34f8c0b19619752ea93"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a></div><div class="ttdeci">const struct timeval * stasis_message_timestamp(const struct stasis_message *msg)</div><div class="ttdoc">Get the time when a message was created. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message.c:203</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="cdr_8c_html_a897c4684f64f60932cf77a2cb8402cdc"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a897c4684f64f60932cf77a2cb8402cdc">filter_bridge_messages</a></div><div class="ttdeci">static int filter_bridge_messages(struct ast_bridge_snapshot *bridge)</div><div class="ttdoc">Filter bridge messages based on bridge technology. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02386">cdr.c:2386</a></div></div>
<div class="ttc" id="structast__bridge__blob_html"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a></div><div class="ttdoc">Blob of data associated with a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00123">stasis_bridges.h:123</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="cdr_8c_html_aabd874b0958bde3e08b5a876c2d1a395"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_master</div><div class="ttdoc">A container of the active master CDRs indexed by Party A channel uniqueid. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00365">cdr.c:365</a></div></div>
<div class="ttc" id="astobj2_8h_html_a63fd831fe48aed32d3ef992ad8e45293"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a63fd831fe48aed32d3ef992ad8e45293">ao2_callback_data</a></div><div class="ttdeci">#define ao2_callback_data(container, flags, cb_fn, arg, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01743">astobj2.h:1743</a></div></div>
<div class="ttc" id="structcdr__object_html_a7543dbd0c668cd22684e8d5aea0b5b93"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">cdr_object::lastevent</a></div><div class="ttdeci">struct timeval lastevent</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00721">cdr.c:721</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="cdr_8c_html_ae391d5e66065256893c2ef6c784e6d9f"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ae391d5e66065256893c2ef6c784e6d9f">cdr_object_party_b_left_bridge_cb</a></div><div class="ttdeci">static int cdr_object_party_b_left_bridge_cb(void *obj, void *arg, void *data, int flags)</div><div class="ttdoc">Callback used to notify CDRs of a Party B leaving the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02361">cdr.c:2361</a></div></div>
<div class="ttc" id="structbridge__leave__data_html_a054f38f65fc1ce8357f5b431a19e7e05"><div class="ttname"><a href="../../d7/d82/structbridge__leave__data.html#a054f38f65fc1ce8357f5b431a19e7e05">bridge_leave_data::lastevent</a></div><div class="ttdeci">const struct timeval * lastevent</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02357">cdr.c:2357</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="cdr_8c_html_abb1aee82330e86d734034f092559cc69"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_all</div><div class="ttdoc">A container of all active CDRs with a Party B indexed by Party B channel name. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00368">cdr.c:368</a></div></div>
<div class="ttc" id="structcdr__object__fn__table_html_a6cdd7fd312a1eed5a7f0a9dde43c653f"><div class="ttname"><a href="../../d1/d0f/structcdr__object__fn__table.html#a6cdd7fd312a1eed5a7f0a9dde43c653f">cdr_object_fn_table::process_bridge_leave</a></div><div class="ttdeci">int(*const process_bridge_leave)(struct cdr_object *cdr, struct ast_bridge_snapshot *bridge, struct ast_channel_snapshot *channel)</div><div class="ttdoc">Process the leaving of a bridge by this CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00533">cdr.c:533</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_aed90bb628ee273a4b27b778b5b0d8ec2"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#aed90bb628ee273a4b27b778b5b0d8ec2">ast_bridge_snapshot::subclass</a></div><div class="ttdeci">const ast_string_field subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01053">astobj2.h:1053</a></div></div>
<div class="ttc" id="structbridge__leave__data_html"><div class="ttname"><a href="../../d7/d82/structbridge__leave__data.html">bridge_leave_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02354">cdr.c:2354</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af10a28107aa2ea71e1a44a48bf1819e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af10a28107aa2ea71e1a44a48bf1819e6">&#9670;&nbsp;</a></span>handle_bridge_pairings()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void handle_bridge_pairings </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle creating bridge pairings for the <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> that just entered a bridge. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cdr</td><td>The <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> that just entered the bridge </td></tr>
    <tr><td class="paramname">bridge</td><td>The <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> representing the bridge it just entered </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02561">2561</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02503">bridge_candidate_process()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00339">ast_bridge_snapshot::channels</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02627">handle_standard_bridge_enter_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;{</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> it_channels;</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;   <span class="keywordtype">char</span> *channel_id;</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;   it_channels = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(bridge-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#adbc20a2fd50bb1376a3c6094e96a31e3">channels</a>, 0);</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;   <span class="keywordflow">while</span> ((channel_id = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;it_channels))) {</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cand_cdr;</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;      cand_cdr = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a>, channel_id, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>);</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;      <span class="keywordflow">if</span> (cand_cdr) {</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#a3d37a638dca298b75ff958c962471698">bridge_candidate_process</a>(cdr, cand_cdr);</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cand_cdr, -1);</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;      }</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(channel_id, -1);</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;   }</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;it_channels);</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;}</div><div class="ttc" id="structast__bridge__snapshot_html_adbc20a2fd50bb1376a3c6094e96a31e3"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#adbc20a2fd50bb1376a3c6094e96a31e3">ast_bridge_snapshot::channels</a></div><div class="ttdeci">struct ao2_container * channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00339">bridge.h:339</a></div></div>
<div class="ttc" id="cdr_8c_html_a3d37a638dca298b75ff958c962471698"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3d37a638dca298b75ff958c962471698">bridge_candidate_process</a></div><div class="ttdeci">static void bridge_candidate_process(struct cdr_object *cdr, struct cdr_object *base_cand_cdr)</div><div class="ttdoc">Process a single bridge_candidate. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02503">cdr.c:2503</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="cdr_8c_html_aabd874b0958bde3e08b5a876c2d1a395"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_master</div><div class="ttdoc">A container of the active master CDRs indexed by Party A channel uniqueid. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00365">cdr.c:365</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a78b801aab49f4431cf358176c793eae7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78b801aab49f4431cf358176c793eae7">&#9670;&nbsp;</a></span>handle_cdr_sync_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void handle_cdr_sync_message </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handler for a synchronization message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Passed on </td></tr>
    <tr><td class="paramname">sub</td><td>The stasis subscription for this message callback </td></tr>
    <tr><td class="paramname">topic</td><td>The topic this message was published for </td></tr>
    <tr><td class="paramname">message</td><td>A blank ao2 object </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02820">2820</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04522">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;{</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;   <span class="keywordflow">return</span>;</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a73171d6c53e2ddd5c0df030be05d83fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73171d6c53e2ddd5c0df030be05d83fe">&#9670;&nbsp;</a></span>handle_channel_snapshot_update_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void handle_channel_snapshot_update_message </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handler for channel snapshot update messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Passed on </td></tr>
    <tr><td class="paramname">sub</td><td>The stasis subscription for this message callback </td></tr>
    <tr><td class="paramname">topic</td><td>The topic this message was published for </td></tr>
    <tr><td class="paramname">message</td><td>The message </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02278">2278</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01743">ao2_callback_data</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01549">ao2_link</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01598">ao2_unlink</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01046">AST_FLAG_DEAD</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00279">AST_LOG_WARNING</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00972">cdr_all_unlink()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00210">CDR_DEBUG</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01039">cdr_object_alloc()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01075">cdr_object_create_and_append()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01386">cdr_object_dispatch()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01440">cdr_object_finalize()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02196">cdr_object_finalize_party_b()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02220">cdr_object_update_party_b()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02249">check_new_cdr_needed()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02073">filter_channel_snapshot_message()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00155">ast_channel_snapshot::flags</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00737">cdr_object::is_root</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00721">cdr_object::lastevent</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00175">ast_channel_snapshot_update::new_snapshot</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01053">OBJ_MULTIPLE</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01048">OBJ_NODATA</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00174">ast_channel_snapshot_update::old_snapshot</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00437">cdr_object_fn_table::process_party_a</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message_timestamp()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::uniqueid</a>, and <a class="el" href="../../d0/d89/codec__g726_8c_source.html#l00367">update()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04522">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;{</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d33/structast__channel__snapshot__update.html">ast_channel_snapshot_update</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a> = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(message);</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#ac2d6cdf68e61e1cece8c33f15f71b51b">filter_channel_snapshot_message</a>(update-&gt;<a class="code" href="../../da/d33/structast__channel__snapshot__update.html#a894e311c723d5b9288ec025689ae373f">old_snapshot</a>, update-&gt;<a class="code" href="../../da/d33/structast__channel__snapshot__update.html#aab7bdfa0efe2821d545c39d3a67fec38">new_snapshot</a>)) {</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;   }</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;   <span class="keywordflow">if</span> (update-&gt;<a class="code" href="../../da/d33/structast__channel__snapshot__update.html#aab7bdfa0efe2821d545c39d3a67fec38">new_snapshot</a> &amp;&amp; !update-&gt;<a class="code" href="../../da/d33/structast__channel__snapshot__update.html#a894e311c723d5b9288ec025689ae373f">old_snapshot</a>) {</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;      cdr = <a class="code" href="../../dc/df2/cdr_8c.html#a737259f181b5de3c4ee0538dde7ca44f">cdr_object_alloc</a>(update-&gt;<a class="code" href="../../da/d33/structast__channel__snapshot__update.html#aab7bdfa0efe2821d545c39d3a67fec38">new_snapshot</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(message));</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;      <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;      }</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;      cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ab1698365bf93a298c99e61c9f99c1d34">is_root</a> = 1;</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a>(<a class="code" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a>, cdr);</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;      cdr = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a>, update-&gt;<a class="code" href="../../da/d33/structast__channel__snapshot__update.html#aab7bdfa0efe2821d545c39d3a67fec38">new_snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>);</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;   }</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;   <span class="comment">/* Handle Party A */</span></div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2878d83e36d91850732bad997524e45e">AST_LOG_WARNING</a>, <span class="stringliteral">&quot;No CDR for channel %s\n&quot;</span>, update-&gt;<a class="code" href="../../da/d33/structast__channel__snapshot__update.html#aab7bdfa0efe2821d545c39d3a67fec38">new_snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;      <span class="keywordtype">int</span> all_reject = 1;</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cdr);</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;      <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;         it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">lastevent</a> = *<a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(message);</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;         <span class="keywordflow">if</span> (!it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a20c04201646afd8fbeb4a3b001e54311">process_party_a</a>) {</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;         }</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;         all_reject &amp;= it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a20c04201646afd8fbeb4a3b001e54311">process_party_a</a>(it_cdr, update-&gt;<a class="code" href="../../da/d33/structast__channel__snapshot__update.html#aab7bdfa0efe2821d545c39d3a67fec38">new_snapshot</a>);</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;      }</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;      <span class="keywordflow">if</span> (all_reject &amp;&amp; <a class="code" href="../../dc/df2/cdr_8c.html#a7263fb983d894a47154469f5b2886e02">check_new_cdr_needed</a>(update-&gt;<a class="code" href="../../da/d33/structast__channel__snapshot__update.html#a894e311c723d5b9288ec025689ae373f">old_snapshot</a>, update-&gt;<a class="code" href="../../da/d33/structast__channel__snapshot__update.html#aab7bdfa0efe2821d545c39d3a67fec38">new_snapshot</a>)) {</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;         <span class="comment">/* We&#39;re not hung up and we have a new snapshot - we need a new CDR */</span></div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *new_cdr;</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;         new_cdr = <a class="code" href="../../dc/df2/cdr_8c.html#af90187a3766c8b50aa4b984a62e30219">cdr_object_create_and_append</a>(cdr, <a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(message));</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;         <span class="keywordflow">if</span> (new_cdr) {</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;            new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a20c04201646afd8fbeb4a3b001e54311">process_party_a</a>(new_cdr, update-&gt;<a class="code" href="../../da/d33/structast__channel__snapshot__update.html#aab7bdfa0efe2821d545c39d3a67fec38">new_snapshot</a>);</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;         }</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;      }</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cdr);</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;   }</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;update-&gt;<a class="code" href="../../da/d33/structast__channel__snapshot__update.html#aab7bdfa0efe2821d545c39d3a67fec38">new_snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a67415c9cab64152013f660deee6acef6">AST_FLAG_DEAD</a>)) {</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cdr);</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>(<span class="stringliteral">&quot;%p - Beginning finalize/dispatch for %s\n&quot;</span>, cdr, update-&gt;<a class="code" href="../../da/d33/structast__channel__snapshot__update.html#a894e311c723d5b9288ec025689ae373f">old_snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;      <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;         it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">lastevent</a> = *<a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(message);</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#a34a146403fab13026f6e302c753be741">cdr_object_finalize</a>(it_cdr);</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;      }</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a5444a54e2ceea8a25176f88a839f1786">cdr_object_dispatch</a>(cdr);</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cdr);</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a20aa34dca45895c5ccd7a0b580987ab9">cdr_all_unlink</a>(cdr);</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(<a class="code" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a>, cdr);</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;   }</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;   <span class="comment">/* Handle Party B */</span></div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;   <span class="keywordflow">if</span> (update-&gt;<a class="code" href="../../da/d33/structast__channel__snapshot__update.html#aab7bdfa0efe2821d545c39d3a67fec38">new_snapshot</a>) {</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a63fd831fe48aed32d3ef992ad8e45293">ao2_callback_data</a>(<a class="code" href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>,</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#a396def329f80f3d866244fe08abac54a">cdr_object_update_party_b</a>, (<span class="keywordtype">char</span> *) update-&gt;<a class="code" href="../../da/d33/structast__channel__snapshot__update.html#aab7bdfa0efe2821d545c39d3a67fec38">new_snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, update-&gt;<a class="code" href="../../da/d33/structast__channel__snapshot__update.html#aab7bdfa0efe2821d545c39d3a67fec38">new_snapshot</a>);</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;   }</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;update-&gt;<a class="code" href="../../da/d33/structast__channel__snapshot__update.html#aab7bdfa0efe2821d545c39d3a67fec38">new_snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a67415c9cab64152013f660deee6acef6">AST_FLAG_DEAD</a>)) {</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a63fd831fe48aed32d3ef992ad8e45293">ao2_callback_data</a>(<a class="code" href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>,</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#a3c2c48505a390f6206a8344cae18ed91">cdr_object_finalize_party_b</a>, (<span class="keywordtype">char</span> *) update-&gt;<a class="code" href="../../da/d33/structast__channel__snapshot__update.html#aab7bdfa0efe2821d545c39d3a67fec38">new_snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, update-&gt;<a class="code" href="../../da/d33/structast__channel__snapshot__update.html#aab7bdfa0efe2821d545c39d3a67fec38">new_snapshot</a>);</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;   }</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr);</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="cdr_8c_html_a20aa34dca45895c5ccd7a0b580987ab9"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a20aa34dca45895c5ccd7a0b580987ab9">cdr_all_unlink</a></div><div class="ttdeci">static void cdr_all_unlink(struct cdr_object *cdr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00972">cdr.c:972</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="codec__g726_8c_html_a8c58a1d1fd9436ff5145385d3ef7a430"><div class="ttname"><a href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a></div><div class="ttdeci">static void update(int code_size, int y, int wi, int fi, int dq, int sr, int dqsez, struct g726_state *state_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/codec__g726_8c_source.html#l00367">codec_g726.c:367</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01048">astobj2.h:1048</a></div></div>
<div class="ttc" id="logger_8h_html_a2878d83e36d91850732bad997524e45e"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a2878d83e36d91850732bad997524e45e">AST_LOG_WARNING</a></div><div class="ttdeci">#define AST_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00279">logger.h:279</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="structcdr__object__fn__table_html_a20c04201646afd8fbeb4a3b001e54311"><div class="ttname"><a href="../../d1/d0f/structcdr__object__fn__table.html#a20c04201646afd8fbeb4a3b001e54311">cdr_object_fn_table::process_party_a</a></div><div class="ttdeci">int(*const process_party_a)(struct cdr_object *cdr, struct ast_channel_snapshot *snapshot)</div><div class="ttdoc">Process a Party A update for the cdr_object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00437">cdr.c:437</a></div></div>
<div class="ttc" id="cdr_8c_html_a737259f181b5de3c4ee0538dde7ca44f"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a737259f181b5de3c4ee0538dde7ca44f">cdr_object_alloc</a></div><div class="ttdeci">static struct cdr_object * cdr_object_alloc(struct ast_channel_snapshot *chan, const struct timeval *event_time)</div><div class="ttdoc">cdr_object constructor </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01039">cdr.c:1039</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">ast_channel_snapshot_base::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structast__channel__snapshot__update_html"><div class="ttname"><a href="../../da/d33/structast__channel__snapshot__update.html">ast_channel_snapshot_update</a></div><div class="ttdoc">Structure representing a change of snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00173">stasis_channels.h:173</a></div></div>
<div class="ttc" id="structcdr__object_html_ab1698365bf93a298c99e61c9f99c1d34"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#ab1698365bf93a298c99e61c9f99c1d34">cdr_object::is_root</a></div><div class="ttdeci">int is_root</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00737">cdr.c:737</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="cdr_8c_html_a8052195443a9cb5835d7d2b3ab7279aa"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a></div><div class="ttdeci">#define CDR_DEBUG(fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00210">cdr.c:210</a></div></div>
<div class="ttc" id="cdr_8c_html_a5444a54e2ceea8a25176f88a839f1786"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5444a54e2ceea8a25176f88a839f1786">cdr_object_dispatch</a></div><div class="ttdeci">static void cdr_object_dispatch(struct cdr_object *cdr)</div><div class="ttdoc">Dispatch a CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01386">cdr.c:1386</a></div></div>
<div class="ttc" id="stasis_8h_html_a0a9c10eadd9db34f8c0b19619752ea93"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a></div><div class="ttdeci">const struct timeval * stasis_message_timestamp(const struct stasis_message *msg)</div><div class="ttdoc">Get the time when a message was created. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message.c:203</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a67415c9cab64152013f660deee6acef6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a67415c9cab64152013f660deee6acef6">AST_FLAG_DEAD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01046">channel.h:1046</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="astobj2_8h_html_a64f51be4bee35c38dbe59b0a788b5ce8"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a></div><div class="ttdeci">#define ao2_unlink(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01598">astobj2.h:1598</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="cdr_8c_html_aabd874b0958bde3e08b5a876c2d1a395"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_master</div><div class="ttdoc">A container of the active master CDRs indexed by Party A channel uniqueid. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00365">cdr.c:365</a></div></div>
<div class="ttc" id="astobj2_8h_html_a63fd831fe48aed32d3ef992ad8e45293"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a63fd831fe48aed32d3ef992ad8e45293">ao2_callback_data</a></div><div class="ttdeci">#define ao2_callback_data(container, flags, cb_fn, arg, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01743">astobj2.h:1743</a></div></div>
<div class="ttc" id="structcdr__object_html_a7543dbd0c668cd22684e8d5aea0b5b93"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">cdr_object::lastevent</a></div><div class="ttdeci">struct timeval lastevent</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00721">cdr.c:721</a></div></div>
<div class="ttc" id="cdr_8c_html_a396def329f80f3d866244fe08abac54a"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a396def329f80f3d866244fe08abac54a">cdr_object_update_party_b</a></div><div class="ttdeci">static int cdr_object_update_party_b(void *obj, void *arg, void *data, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02220">cdr.c:2220</a></div></div>
<div class="ttc" id="structast__channel__snapshot__update_html_aab7bdfa0efe2821d545c39d3a67fec38"><div class="ttname"><a href="../../da/d33/structast__channel__snapshot__update.html#aab7bdfa0efe2821d545c39d3a67fec38">ast_channel_snapshot_update::new_snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * new_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00175">stasis_channels.h:175</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="structast__channel__snapshot__update_html_a894e311c723d5b9288ec025689ae373f"><div class="ttname"><a href="../../da/d33/structast__channel__snapshot__update.html#a894e311c723d5b9288ec025689ae373f">ast_channel_snapshot_update::old_snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * old_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00174">stasis_channels.h:174</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#aec78000b2897c094f68ed72559e18acd">ast_channel_snapshot::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00155">stasis_channels.h:155</a></div></div>
<div class="ttc" id="cdr_8c_html_abb1aee82330e86d734034f092559cc69"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_all</div><div class="ttdoc">A container of all active CDRs with a Party B indexed by Party B channel name. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00368">cdr.c:368</a></div></div>
<div class="ttc" id="cdr_8c_html_af90187a3766c8b50aa4b984a62e30219"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#af90187a3766c8b50aa4b984a62e30219">cdr_object_create_and_append</a></div><div class="ttdeci">static struct cdr_object * cdr_object_create_and_append(struct cdr_object *cdr, const struct timeval *event_time)</div><div class="ttdoc">Create a new cdr_object and append it to an existing chain. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01075">cdr.c:1075</a></div></div>
<div class="ttc" id="cdr_8c_html_a7263fb983d894a47154469f5b2886e02"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a7263fb983d894a47154469f5b2886e02">check_new_cdr_needed</a></div><div class="ttdeci">static int check_new_cdr_needed(struct ast_channel_snapshot *old_snapshot, struct ast_channel_snapshot *new_snapshot)</div><div class="ttdoc">Determine if we need to add a new CDR based on snapshots. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02249">cdr.c:2249</a></div></div>
<div class="ttc" id="cdr_8c_html_a34a146403fab13026f6e302c753be741"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a34a146403fab13026f6e302c753be741">cdr_object_finalize</a></div><div class="ttdeci">static void cdr_object_finalize(struct cdr_object *cdr)</div><div class="ttdoc">Finalize a CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01440">cdr.c:1440</a></div></div>
<div class="ttc" id="cdr_8c_html_a3c2c48505a390f6206a8344cae18ed91"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3c2c48505a390f6206a8344cae18ed91">cdr_object_finalize_party_b</a></div><div class="ttdeci">static int cdr_object_finalize_party_b(void *obj, void *arg, void *data, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02196">cdr.c:2196</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01053">astobj2.h:1053</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="cdr_8c_html_ac2d6cdf68e61e1cece8c33f15f71b51b"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ac2d6cdf68e61e1cece8c33f15f71b51b">filter_channel_snapshot_message</a></div><div class="ttdeci">static int filter_channel_snapshot_message(struct ast_channel_snapshot *old_snapshot, struct ast_channel_snapshot *new_snapshot)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02073">cdr.c:2073</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1ad9f122bcae95a470639402faa3d2ee"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a></div><div class="ttdeci">#define ao2_link(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01549">astobj2.h:1549</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae78a1cb56fae7c66d2a27dae30140c55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae78a1cb56fae7c66d2a27dae30140c55">&#9670;&nbsp;</a></span>handle_cli_debug()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_debug </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03929">3929</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00077">ast_clear_flag</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00210">CDR_DEBUG</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00203">cdr_set_debug_mode</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00223">module_config::general</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00265">ast_cdr_config::settings</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;{</div><div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d57/structmodule__config.html">module_config</a> *mod_cfg;</div><div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;</div><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;cdr set debug [on|off]&quot;</span>;</div><div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> = <span class="stringliteral">&quot;Enable or disable extra debugging in the CDR Engine. Note\n&quot;</span></div><div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;            <span class="stringliteral">&quot;that this will dump debug information to the VERBOSE setting\n&quot;</span></div><div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;            <span class="stringliteral">&quot;and should only be used when debugging information from the\n&quot;</span></div><div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;            <span class="stringliteral">&quot;CDR engine is needed.\n&quot;</span>;</div><div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;   }</div><div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;</div><div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4) {</div><div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;   }</div><div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;</div><div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;   mod_cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(module_configs);</div><div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;   <span class="keywordflow">if</span> (!mod_cfg) {</div><div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Could not set CDR debugging mode\n&quot;</span>);</div><div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;   }</div><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;on&quot;</span>)</div><div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;      &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>)) {</div><div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>);</div><div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;CDR debugging enabled\n&quot;</span>);</div><div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;off&quot;</span>)</div><div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;      &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>)) {</div><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(&amp;mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>);</div><div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;CDR debugging disabled\n&quot;</span>);</div><div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;   }</div><div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a64c2a67abebb54e4d8defda57e4e9206">cdr_set_debug_mode</a>(mod_cfg);</div><div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(mod_cfg);</div><div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;</div><div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a64c2a67abebb54e4d8defda57e4e9206"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a64c2a67abebb54e4d8defda57e4e9206">cdr_set_debug_mode</a></div><div class="ttdeci">#define cdr_set_debug_mode(mod_cfg)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00203">cdr.c:203</a></div></div>
<div class="ttc" id="structast__cdr__config_html_a64ee0bd247c901e7af2f871b4ef7ad71"><div class="ttname"><a href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">ast_cdr_config::settings</a></div><div class="ttdeci">struct ast_flags settings</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00265">cdr.h:265</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="cdr_8c_html_a8052195443a9cb5835d7d2b3ab7279aa"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a></div><div class="ttdeci">#define CDR_DEBUG(fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00210">cdr.c:210</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structmodule__config_html"><div class="ttname"><a href="../../db/d57/structmodule__config.html">module_config</a></div><div class="ttdoc">The configuration settings for this module. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00222">cdr.c:222</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="utils_8h_html_a7b260320610a09017a9416398acd0a70"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a></div><div class="ttdeci">#define ast_clear_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00077">utils.h:77</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structmodule__config_html_a95699733ba47a55e25760adf5c51e59a"><div class="ttname"><a href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">module_config::general</a></div><div class="ttdeci">struct ast_cdr_config * general</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00223">cdr.c:223</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a78e33070708ecfa6a26fdd84a6d29be9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78e33070708ecfa6a26fdd84a6d29be9">&#9670;&nbsp;</a></span>handle_cli_show()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_show </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04115">4115</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03970">cli_complete_show()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04055">cli_show_channel()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03991">cli_show_channels()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;{</div><div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;         e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;cdr show active&quot;</span>;</div><div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;         e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;            <span class="stringliteral">&quot;Usage: cdr show active [channel]\n&quot;</span></div><div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;            <span class="stringliteral">&quot;  Displays a summary of all Call Detail Records when [channel]\n&quot;</span></div><div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;            <span class="stringliteral">&quot;  is omitted; displays all of the Call Detail Records\n&quot;</span></div><div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;            <span class="stringliteral">&quot;  currently in flight for a given [channel] when [channel] is\n&quot;</span></div><div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;            <span class="stringliteral">&quot;  specified.\n\n&quot;</span></div><div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;            <span class="stringliteral">&quot;  Note that this will not display Call Detail Records that\n&quot;</span></div><div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;            <span class="stringliteral">&quot;  have already been dispatched to a backend storage, nor for\n&quot;</span></div><div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;            <span class="stringliteral">&quot;  channels that are no longer active.\n&quot;</span>;</div><div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/cdr_8c.html#a0fa8c4c4ee405c2f3e1eee79cdbbbc38">cli_complete_show</a>(a);</div><div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;   }</div><div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;</div><div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt; 4) {</div><div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; 4) {</div><div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a42aa90cd5dc2d0c7ddc58bc021634de5">cli_show_channels</a>(a);</div><div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#ac38aa7c2170730c4e820202c3838d182">cli_show_channel</a>(a);</div><div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;   }</div><div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;</div><div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="cdr_8c_html_ac38aa7c2170730c4e820202c3838d182"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ac38aa7c2170730c4e820202c3838d182">cli_show_channel</a></div><div class="ttdeci">static void cli_show_channel(struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l04055">cdr.c:4055</a></div></div>
<div class="ttc" id="cdr_8c_html_a0fa8c4c4ee405c2f3e1eee79cdbbbc38"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a0fa8c4c4ee405c2f3e1eee79cdbbbc38">cli_complete_show</a></div><div class="ttdeci">static char * cli_complete_show(struct ast_cli_args *a)</div><div class="ttdoc">Complete user input for &amp;#39;cdr show&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03970">cdr.c:3970</a></div></div>
<div class="ttc" id="cdr_8c_html_a42aa90cd5dc2d0c7ddc58bc021634de5"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a42aa90cd5dc2d0c7ddc58bc021634de5">cli_show_channels</a></div><div class="ttdeci">static void cli_show_channels(struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03991">cdr.c:3991</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a42f51bfd026479da84c974d890c5c673"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42f51bfd026479da84c974d890c5c673">&#9670;&nbsp;</a></span>handle_cli_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_status </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04145">4145</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00451">AST_RWLIST_EMPTY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00814">ast_sched_when()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00232">BATCH_MODE_SAFE_SHUTDOWN</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00231">BATCH_MODE_SCHEDULER_ONLY</a>, <a class="el" href="../../d4/d69/structast__cdr__config.html#ab3c4f8ad024814570a590d3d40752003">ast_cdr_config::batch_settings</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00221">CDR_BATCHMODE</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00223">CDR_CONGESTION</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00220">CDR_ENABLED</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00353">cdr_sched</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00222">CDR_UNANSWERED</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00059">ESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00223">module_config::general</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00322">cdr_beitem::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00269">ast_cdr_config::batch_settings::settings</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00265">ast_cdr_config::settings</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00268">ast_cdr_config::batch_settings::size</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00343">cdr_batch::size</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00267">ast_cdr_config::batch_settings::time</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;{</div><div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dc6/structcdr__beitem.html">cdr_beitem</a> *beitem = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d57/structmodule__config.html">module_config</a> *mod_cfg;</div><div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;   <span class="keywordtype">int</span> cnt = 0;</div><div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;   <span class="keywordtype">long</span> nextbatchtime = 0;</div><div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;</div><div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;cdr show status&quot;</span>;</div><div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;         <span class="stringliteral">&quot;Usage: cdr show status\n&quot;</span></div><div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;         <span class="stringliteral">&quot;  Displays the Call Detail Record engine system status.\n&quot;</span>;</div><div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;   }</div><div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;</div><div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt; 3) {</div><div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;   }</div><div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;</div><div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;   mod_cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(module_configs);</div><div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;   <span class="keywordflow">if</span> (!mod_cfg) {</div><div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;   }</div><div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;</div><div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Call Detail Record (CDR) settings\n&quot;</span>);</div><div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;----------------------------------\n&quot;</span>);</div><div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Logging:                    %s\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a>) ? <span class="stringliteral">&quot;Enabled&quot;</span> : <span class="stringliteral">&quot;Disabled&quot;</span>);</div><div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Mode:                       %s\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492">CDR_BATCHMODE</a>) ? <span class="stringliteral">&quot;Batch&quot;</span> : <span class="stringliteral">&quot;Simple&quot;</span>);</div><div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a>)) {</div><div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Log unanswered calls:       %s\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba06d830667dc08cfba477152a01a6a6f1">CDR_UNANSWERED</a>) ? <span class="stringliteral">&quot;Yes&quot;</span> : <span class="stringliteral">&quot;No&quot;</span>);</div><div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Log congestion:             %s\n\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11bac7e09eacc1390ca5ae2adf3f8cb7f487">CDR_CONGESTION</a>) ? <span class="stringliteral">&quot;Yes&quot;</span> : <span class="stringliteral">&quot;No&quot;</span>);</div><div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492">CDR_BATCHMODE</a>)) {</div><div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;* Batch Mode Settings\n&quot;</span>);</div><div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  -------------------\n&quot;</span>);</div><div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a>)</div><div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;            cnt = <a class="code" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a>-&gt;<a class="code" href="../../d4/d3a/structcdr__batch.html#a439227feff9d7f55384e8780cfc2eb82">size</a>;</div><div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#a4b8b0834379a5c8dd0deaa5161785419">cdr_sched</a> &gt; -1)</div><div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;            nextbatchtime = <a class="code" href="../../d7/d00/sched_8h.html#a4abeb1df2ba7501f933a23dddad0f9cb">ast_sched_when</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a4b8b0834379a5c8dd0deaa5161785419">cdr_sched</a>);</div><div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Safe shutdown:              %s\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#ab3c4f8ad024814570a590d3d40752003">batch_settings</a>.<a class="code" href="../../d3/d11/structast__cdr__config_1_1batch__settings.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a3142c0762d64e330ffe9f2ebe8976652a2d351981e14dab32c9749dbdd87de33c">BATCH_MODE_SAFE_SHUTDOWN</a>) ? <span class="stringliteral">&quot;Enabled&quot;</span> : <span class="stringliteral">&quot;Disabled&quot;</span>);</div><div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Threading model:            %s\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#ab3c4f8ad024814570a590d3d40752003">batch_settings</a>.<a class="code" href="../../d3/d11/structast__cdr__config_1_1batch__settings.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a3142c0762d64e330ffe9f2ebe8976652a7f4f25540ae06946d3941e275bed8472">BATCH_MODE_SCHEDULER_ONLY</a>) ? <span class="stringliteral">&quot;Scheduler only&quot;</span> : <span class="stringliteral">&quot;Scheduler plus separate threads&quot;</span>);</div><div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Current batch size:         %d record%s\n&quot;</span>, cnt, <a class="code" href="../../dc/db0/cli_8h.html#aa09c07179fe1c89f52bb28bc126d26f2">ESS</a>(cnt));</div><div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Maximum batch size:         %u record%s\n&quot;</span>, mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#ab3c4f8ad024814570a590d3d40752003">batch_settings</a>.<a class="code" href="../../d3/d11/structast__cdr__config_1_1batch__settings.html#aac913b3a1f6ef005d66bf7a84428773e">size</a>, <a class="code" href="../../dc/db0/cli_8h.html#aa09c07179fe1c89f52bb28bc126d26f2">ESS</a>(mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#ab3c4f8ad024814570a590d3d40752003">batch_settings</a>.<a class="code" href="../../d3/d11/structast__cdr__config_1_1batch__settings.html#aac913b3a1f6ef005d66bf7a84428773e">size</a>));</div><div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Maximum batch time:         %u second%s\n&quot;</span>, mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#ab3c4f8ad024814570a590d3d40752003">batch_settings</a>.<a class="code" href="../../d3/d11/structast__cdr__config_1_1batch__settings.html#a83e57ce9bd59cfa0995c2e2c8589c274">time</a>, <a class="code" href="../../dc/db0/cli_8h.html#aa09c07179fe1c89f52bb28bc126d26f2">ESS</a>(mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#ab3c4f8ad024814570a590d3d40752003">batch_settings</a>.<a class="code" href="../../d3/d11/structast__cdr__config_1_1batch__settings.html#a83e57ce9bd59cfa0995c2e2c8589c274">time</a>));</div><div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Next batch processing time: %ld second%s\n\n&quot;</span>, nextbatchtime, <a class="code" href="../../dc/db0/cli_8h.html#aa09c07179fe1c89f52bb28bc126d26f2">ESS</a>(nextbatchtime));</div><div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;      }</div><div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;* Registered Backends\n&quot;</span>);</div><div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  -------------------\n&quot;</span>);</div><div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d5/d08/structbe__list.html">be_list</a>);</div><div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a0044f6572f50a89049b3b5272e51b0e7">AST_RWLIST_EMPTY</a>(&amp;<a class="code" href="../../d5/d08/structbe__list.html">be_list</a>)) {</div><div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;    (none)\n&quot;</span>);</div><div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d08/structbe__list.html">be_list</a>, beitem, list) {</div><div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;    %s%s\n&quot;</span>, beitem-&gt;<a class="code" href="../../dc/dc6/structcdr__beitem.html#a9997d8ee2df51d18efed254a5aa016fd">name</a>, beitem-&gt;suspended ? <span class="stringliteral">&quot; (suspended) &quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;         }</div><div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;      }</div><div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d08/structbe__list.html">be_list</a>);</div><div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;   }</div><div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;</div><div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(mod_cfg);</div><div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;}</div><div class="ttc" id="cdr_8h_html_a3142c0762d64e330ffe9f2ebe8976652a2d351981e14dab32c9749dbdd87de33c"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a3142c0762d64e330ffe9f2ebe8976652a2d351981e14dab32c9749dbdd87de33c">BATCH_MODE_SAFE_SHUTDOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00232">cdr.h:232</a></div></div>
<div class="ttc" id="structast__cdr__config_html_a64ee0bd247c901e7af2f871b4ef7ad71"><div class="ttname"><a href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">ast_cdr_config::settings</a></div><div class="ttdeci">struct ast_flags settings</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00265">cdr.h:265</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structast__cdr__config_1_1batch__settings_html_a83e57ce9bd59cfa0995c2e2c8589c274"><div class="ttname"><a href="../../d3/d11/structast__cdr__config_1_1batch__settings.html#a83e57ce9bd59cfa0995c2e2c8589c274">ast_cdr_config::batch_settings::time</a></div><div class="ttdeci">unsigned int time</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00267">cdr.h:267</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structcdr__beitem_html"><div class="ttname"><a href="../../dc/dc6/structcdr__beitem.html">cdr_beitem</a></div><div class="ttdoc">Registration object for CDR backends. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00321">cdr.c:321</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492">CDR_BATCHMODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00221">cdr.h:221</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="cdr_8h_html_a3142c0762d64e330ffe9f2ebe8976652a7f4f25540ae06946d3941e275bed8472"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a3142c0762d64e330ffe9f2ebe8976652a7f4f25540ae06946d3941e275bed8472">BATCH_MODE_SCHEDULER_ONLY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00231">cdr.h:231</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cdr__config_html_ab3c4f8ad024814570a590d3d40752003"><div class="ttname"><a href="../../d4/d69/structast__cdr__config.html#ab3c4f8ad024814570a590d3d40752003">ast_cdr_config::batch_settings</a></div><div class="ttdeci">struct ast_cdr_config::batch_settings batch_settings</div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structmodule__config_html"><div class="ttname"><a href="../../db/d57/structmodule__config.html">module_config</a></div><div class="ttdoc">The configuration settings for this module. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00222">cdr.c:222</a></div></div>
<div class="ttc" id="cdr_8c_html_a3c9a24d791e528330adc76210fb42407"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a></div><div class="ttdeci">static struct cdr_batch * batch</div></div>
<div class="ttc" id="linkedlists_8h_html_a0044f6572f50a89049b3b5272e51b0e7"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0044f6572f50a89049b3b5272e51b0e7">AST_RWLIST_EMPTY</a></div><div class="ttdeci">#define AST_RWLIST_EMPTY</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00451">linkedlists.h:451</a></div></div>
<div class="ttc" id="structast__cdr__config_1_1batch__settings_html_aac913b3a1f6ef005d66bf7a84428773e"><div class="ttname"><a href="../../d3/d11/structast__cdr__config_1_1batch__settings.html#aac913b3a1f6ef005d66bf7a84428773e">ast_cdr_config::batch_settings::size</a></div><div class="ttdeci">unsigned int size</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00268">cdr.h:268</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structcdr__beitem_html_a9997d8ee2df51d18efed254a5aa016fd"><div class="ttname"><a href="../../dc/dc6/structcdr__beitem.html#a9997d8ee2df51d18efed254a5aa016fd">cdr_beitem::name</a></div><div class="ttdeci">char name[20]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00322">cdr.c:322</a></div></div>
<div class="ttc" id="cdr_8c_html_a4b8b0834379a5c8dd0deaa5161785419"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a4b8b0834379a5c8dd0deaa5161785419">cdr_sched</a></div><div class="ttdeci">static int cdr_sched</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00353">cdr.c:353</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11bac7e09eacc1390ca5ae2adf3f8cb7f487"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11bac7e09eacc1390ca5ae2adf3f8cb7f487">CDR_CONGESTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00223">cdr.h:223</a></div></div>
<div class="ttc" id="sched_8h_html_a4abeb1df2ba7501f933a23dddad0f9cb"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a4abeb1df2ba7501f933a23dddad0f9cb">ast_sched_when</a></div><div class="ttdeci">long ast_sched_when(struct ast_sched_context *con, int id)</div><div class="ttdoc">Returns the number of seconds before an event takes place. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00814">sched.c:814</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="cli_8h_html_aa09c07179fe1c89f52bb28bc126d26f2"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aa09c07179fe1c89f52bb28bc126d26f2">ESS</a></div><div class="ttdeci">#define ESS(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00059">cli.h:59</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00220">cdr.h:220</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba06d830667dc08cfba477152a01a6a6f1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba06d830667dc08cfba477152a01a6a6f1">CDR_UNANSWERED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00222">cdr.h:222</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structast__cdr__config_1_1batch__settings_html_a64ee0bd247c901e7af2f871b4ef7ad71"><div class="ttname"><a href="../../d3/d11/structast__cdr__config_1_1batch__settings.html#a64ee0bd247c901e7af2f871b4ef7ad71">ast_cdr_config::batch_settings::settings</a></div><div class="ttdeci">struct ast_flags settings</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00269">cdr.h:269</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structmodule__config_html_a95699733ba47a55e25760adf5c51e59a"><div class="ttname"><a href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">module_config::general</a></div><div class="ttdeci">struct ast_cdr_config * general</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00223">cdr.c:223</a></div></div>
<div class="ttc" id="structcdr__batch_html_a439227feff9d7f55384e8780cfc2eb82"><div class="ttname"><a href="../../d4/d3a/structcdr__batch.html#a439227feff9d7f55384e8780cfc2eb82">cdr_batch::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00343">cdr.c:343</a></div></div>
<div class="ttc" id="structbe__list_html"><div class="ttname"><a href="../../d5/d08/structbe__list.html">be_list</a></div><div class="ttdoc">List of registered backends. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00330">cdr.c:330</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad4698622c0463583016f314fc86a108f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4698622c0463583016f314fc86a108f">&#9670;&nbsp;</a></span>handle_cli_submit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_submit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04212">4212</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00221">CDR_BATCHMODE</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00220">CDR_ENABLED</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00223">module_config::general</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00265">ast_cdr_config::settings</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03825">start_batch_mode()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;{</div><div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d57/structmodule__config.html">module_config</a> *mod_cfg;</div><div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;</div><div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;cdr submit&quot;</span>;</div><div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;         <span class="stringliteral">&quot;Usage: cdr submit\n&quot;</span></div><div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;         <span class="stringliteral">&quot;Posts all pending batched CDR data to the configured CDR\n&quot;</span></div><div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;         <span class="stringliteral">&quot;backend engine modules.\n&quot;</span>;</div><div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;   }</div><div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt; 2) {</div><div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;   }</div><div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;</div><div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;   mod_cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(module_configs);</div><div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;   <span class="keywordflow">if</span> (!mod_cfg) {</div><div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;   }</div><div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;</div><div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a>)) {</div><div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Cannot submit CDR batch: CDR engine disabled.\n&quot;</span>);</div><div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492">CDR_BATCHMODE</a>)) {</div><div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Cannot submit CDR batch: batch mode not enabled.\n&quot;</span>);</div><div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a8e55b20165112265d58bf812ccb57de0">start_batch_mode</a>();</div><div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Submitted CDRs to backend engines for processing.  This may take a while.\n&quot;</span>);</div><div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;   }</div><div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(mod_cfg);</div><div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;</div><div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;}</div><div class="ttc" id="structast__cdr__config_html_a64ee0bd247c901e7af2f871b4ef7ad71"><div class="ttname"><a href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">ast_cdr_config::settings</a></div><div class="ttdeci">struct ast_flags settings</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00265">cdr.h:265</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492">CDR_BATCHMODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00221">cdr.h:221</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structmodule__config_html"><div class="ttname"><a href="../../db/d57/structmodule__config.html">module_config</a></div><div class="ttdoc">The configuration settings for this module. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00222">cdr.c:222</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="cdr_8c_html_a8e55b20165112265d58bf812ccb57de0"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8e55b20165112265d58bf812ccb57de0">start_batch_mode</a></div><div class="ttdeci">static void start_batch_mode(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03825">cdr.c:3825</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00220">cdr.h:220</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structmodule__config_html_a95699733ba47a55e25760adf5c51e59a"><div class="ttname"><a href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">module_config::general</a></div><div class="ttdeci">struct ast_cdr_config * general</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00223">cdr.c:223</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac1a281ba026eec2a08607404d2a186e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1a281ba026eec2a08607404d2a186e4">&#9670;&nbsp;</a></span>handle_dial_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void handle_dial_message </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handler for Stasis-Core dial messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Passed on </td></tr>
    <tr><td class="paramname">sub</td><td>The stasis subscription for this message callback </td></tr>
    <tr><td class="paramname">topic</td><td>The topic this message was published for </td></tr>
    <tr><td class="paramname">message</td><td>The message </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02105">2105</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00397">ast_json_object_get()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00273">ast_json_string_get()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00279">AST_LOG_WARNING</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00977">ast_multi_channel_blob_get_channel()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01030">ast_multi_channel_blob_get_json()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00148">ast_channel_snapshot::caller</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00210">CDR_DEBUG</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01075">cdr_object_create_and_append()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02089">dial_status_end()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02064">filter_channel_snapshot()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00721">cdr_object::lastevent</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00147">ast_channel_snapshot::peer</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00462">cdr_object_fn_table::process_dial_begin</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00480">cdr_object_fn_table::process_dial_end</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message_timestamp()</a>, and <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04522">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;{</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/dcb/structast__multi__channel__blob.html">ast_multi_channel_blob</a> *payload = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(message);</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">caller</a>;</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a91ff51905af3f89b6aab38f42d08adea">peer</a>;</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *dial_status_blob;</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *dial_status = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;   <span class="keywordtype">int</span> res = 1;</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;   caller = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gac6cf4ef94e11b14625a81ba56f89a183">ast_multi_channel_blob_get_channel</a>(payload, <span class="stringliteral">&quot;caller&quot;</span>);</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;   peer = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gac6cf4ef94e11b14625a81ba56f89a183">ast_multi_channel_blob_get_channel</a>(payload, <span class="stringliteral">&quot;peer&quot;</span>);</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;   <span class="keywordflow">if</span> (!peer &amp;&amp; !caller) {</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;   }</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;   <span class="keywordflow">if</span> (peer &amp;&amp; <a class="code" href="../../dc/df2/cdr_8c.html#a527db94b4432c2cd6fc58c32b285153e">filter_channel_snapshot</a>(peer)) {</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;   }</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;   <span class="keywordflow">if</span> (caller &amp;&amp; <a class="code" href="../../dc/df2/cdr_8c.html#a527db94b4432c2cd6fc58c32b285153e">filter_channel_snapshot</a>(caller)) {</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;   }</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;   dial_status_blob = <a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga54c9b2b1131c872d25a1395882333ae3">ast_multi_channel_blob_get_json</a>(payload), <span class="stringliteral">&quot;dialstatus&quot;</span>);</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;   <span class="keywordflow">if</span> (dial_status_blob) {</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;      dial_status = <a class="code" href="../../d4/d05/json_8h.html#a6772fcee88746a9d4f6ec6f240b76dd0">ast_json_string_get</a>(dial_status_blob);</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;   }</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>(<span class="stringliteral">&quot;Dial %s message for %s, %s: %u.%08u\n&quot;</span>,</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(dial_status) ? <span class="stringliteral">&quot;Begin&quot;</span> : <span class="stringliteral">&quot;End&quot;</span>,</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;      caller ? caller-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a> : <span class="stringliteral">&quot;(none)&quot;</span>,</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;      peer ? peer-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a> : <span class="stringliteral">&quot;(none)&quot;</span>,</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;      (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(message)-&gt;tv_sec,</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;      (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(message)-&gt;tv_usec);</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;   <span class="comment">/* Figure out who is running this show */</span></div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;   <span class="keywordflow">if</span> (caller) {</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;      cdr = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a>, caller-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>);</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;      cdr = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a>, peer-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>);</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;   }</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2878d83e36d91850732bad997524e45e">AST_LOG_WARNING</a>, <span class="stringliteral">&quot;No CDR for channel %s\n&quot;</span>, caller ? caller-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a> : peer-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;   }</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cdr);</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;   <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;      it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">lastevent</a> = *<a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(message);</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(dial_status)) {</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;         <span class="keywordflow">if</span> (!it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a95fa3986310cdf3d4b96372d71680734">process_dial_begin</a>) {</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;         }</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>(<span class="stringliteral">&quot;%p - Processing Dial Begin message for channel %s, peer %s\n&quot;</span>,</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;            it_cdr,</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;            caller ? caller-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a> : <span class="stringliteral">&quot;(none)&quot;</span>,</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;            peer ? peer-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a> : <span class="stringliteral">&quot;(none)&quot;</span>);</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;         res &amp;= it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a95fa3986310cdf3d4b96372d71680734">process_dial_begin</a>(it_cdr,</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;               caller,</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;               peer);</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#a7379eaa5658d0fa7eaacb189b8236255">dial_status_end</a>(dial_status)) {</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;         <span class="keywordflow">if</span> (!it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a038165a037ca7481d1e1bd49799579fd">process_dial_end</a>) {</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;         }</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>(<span class="stringliteral">&quot;%p - Processing Dial End message for channel %s, peer %s\n&quot;</span>,</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;            it_cdr,</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;            caller ? caller-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a> : <span class="stringliteral">&quot;(none)&quot;</span>,</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;            peer ? peer-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a> : <span class="stringliteral">&quot;(none)&quot;</span>);</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;         it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a038165a037ca7481d1e1bd49799579fd">process_dial_end</a>(it_cdr,</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;               caller,</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;               peer,</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;               dial_status);</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;      }</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;   }</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;   <span class="comment">/* If no CDR handled a dial begin message, make a new one */</span></div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;   <span class="keywordflow">if</span> (res &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(dial_status)) {</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *new_cdr;</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;      new_cdr = <a class="code" href="../../dc/df2/cdr_8c.html#af90187a3766c8b50aa4b984a62e30219">cdr_object_create_and_append</a>(cdr, <a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(message));</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;      <span class="keywordflow">if</span> (new_cdr) {</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;         new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a95fa3986310cdf3d4b96372d71680734">process_dial_begin</a>(new_cdr, caller, peer);</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;      }</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;   }</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cdr);</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr);</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="logger_8h_html_a2878d83e36d91850732bad997524e45e"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a2878d83e36d91850732bad997524e45e">AST_LOG_WARNING</a></div><div class="ttdeci">#define AST_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00279">logger.h:279</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">ast_channel_snapshot_base::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="cdr_8c_html_a527db94b4432c2cd6fc58c32b285153e"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a527db94b4432c2cd6fc58c32b285153e">filter_channel_snapshot</a></div><div class="ttdeci">static int filter_channel_snapshot(struct ast_channel_snapshot *snapshot)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02064">cdr.c:2064</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga54c9b2b1131c872d25a1395882333ae3"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga54c9b2b1131c872d25a1395882333ae3">ast_multi_channel_blob_get_json</a></div><div class="ttdeci">struct ast_json * ast_multi_channel_blob_get_json(struct ast_multi_channel_blob *obj)</div><div class="ttdoc">Retrieve the JSON blob from a ast_multi_channel_blob. Returned ast_json is still owned by obj...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01030">stasis_channels.c:1030</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="cdr_8c_html_a8052195443a9cb5835d7d2b3ab7279aa"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a></div><div class="ttdeci">#define CDR_DEBUG(fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00210">cdr.c:210</a></div></div>
<div class="ttc" id="structcdr__object__fn__table_html_a95fa3986310cdf3d4b96372d71680734"><div class="ttname"><a href="../../d1/d0f/structcdr__object__fn__table.html#a95fa3986310cdf3d4b96372d71680734">cdr_object_fn_table::process_dial_begin</a></div><div class="ttdeci">int(*const process_dial_begin)(struct cdr_object *cdr, struct ast_channel_snapshot *caller, struct ast_channel_snapshot *peer)</div><div class="ttdoc">Process the beginning of a dial. A dial message implies one of two things: The cdr_object&amp;#39;s Party A h...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00462">cdr.c:462</a></div></div>
<div class="ttc" id="stasis_8h_html_a0a9c10eadd9db34f8c0b19619752ea93"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a></div><div class="ttdeci">const struct timeval * stasis_message_timestamp(const struct stasis_message *msg)</div><div class="ttdoc">Get the time when a message was created. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message.c:203</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="json_8h_html_a6772fcee88746a9d4f6ec6f240b76dd0"><div class="ttname"><a href="../../d4/d05/json_8h.html#a6772fcee88746a9d4f6ec6f240b76dd0">ast_json_string_get</a></div><div class="ttdeci">const char * ast_json_string_get(const struct ast_json *string)</div><div class="ttdoc">Get the value of a JSON string. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00273">json.c:273</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ae7248b764758e655df26036dd6b8f4d7"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ae7248b764758e655df26036dd6b8f4d7">ast_channel_snapshot::caller</a></div><div class="ttdeci">struct ast_channel_snapshot_caller * caller</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00148">stasis_channels.h:148</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="cdr_8c_html_aabd874b0958bde3e08b5a876c2d1a395"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_master</div><div class="ttdoc">A container of the active master CDRs indexed by Party A channel uniqueid. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00365">cdr.c:365</a></div></div>
<div class="ttc" id="structcdr__object_html_a7543dbd0c668cd22684e8d5aea0b5b93"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">cdr_object::lastevent</a></div><div class="ttdeci">struct timeval lastevent</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00721">cdr.c:721</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="cdr_8c_html_a7379eaa5658d0fa7eaacb189b8236255"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a7379eaa5658d0fa7eaacb189b8236255">dial_status_end</a></div><div class="ttdeci">static int dial_status_end(const char *dialstatus)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02089">cdr.c:2089</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="json_8h_html_a53707225c3bf831e263245c6e3800676"><div class="ttname"><a href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a></div><div class="ttdeci">struct ast_json * ast_json_object_get(struct ast_json *object, const char *key)</div><div class="ttdoc">Get a field from a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00397">json.c:397</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gac6cf4ef94e11b14625a81ba56f89a183"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gac6cf4ef94e11b14625a81ba56f89a183">ast_multi_channel_blob_get_channel</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_multi_channel_blob_get_channel(struct ast_multi_channel_blob *obj, const char *role)</div><div class="ttdoc">Retrieve a channel snapshot associated with a specific role from a ast_multi_channel_blob. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00977">stasis_channels.c:977</a></div></div>
<div class="ttc" id="structast__multi__channel__blob_html"><div class="ttname"><a href="../../df/dcb/structast__multi__channel__blob.html">ast_multi_channel_blob</a></div><div class="ttdoc">A multi channel blob data structure for multi_channel_blob stasis messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00811">stasis_channels.c:811</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="structast__channel__snapshot_html_a91ff51905af3f89b6aab38f42d08adea"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#a91ff51905af3f89b6aab38f42d08adea">ast_channel_snapshot::peer</a></div><div class="ttdeci">struct ast_channel_snapshot_peer * peer</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00147">stasis_channels.h:147</a></div></div>
<div class="ttc" id="cdr_8c_html_af90187a3766c8b50aa4b984a62e30219"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#af90187a3766c8b50aa4b984a62e30219">cdr_object_create_and_append</a></div><div class="ttdeci">static struct cdr_object * cdr_object_create_and_append(struct cdr_object *cdr, const struct timeval *event_time)</div><div class="ttdoc">Create a new cdr_object and append it to an existing chain. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01075">cdr.c:1075</a></div></div>
<div class="ttc" id="structcdr__object__fn__table_html_a038165a037ca7481d1e1bd49799579fd"><div class="ttname"><a href="../../d1/d0f/structcdr__object__fn__table.html#a038165a037ca7481d1e1bd49799579fd">cdr_object_fn_table::process_dial_end</a></div><div class="ttdeci">int(*const process_dial_end)(struct cdr_object *cdr, struct ast_channel_snapshot *caller, struct ast_channel_snapshot *peer, const char *dial_status)</div><div class="ttdoc">Process the end of a dial. At the end of a dial, a CDR can be transitioned into one of two states - D...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00480">cdr.c:480</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a157ceac21c95d305d1c3d739da9b15f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a157ceac21c95d305d1c3d739da9b15f9">&#9670;&nbsp;</a></span>handle_parked_call_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void handle_parked_call_message </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handler for when a channel is parked. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Passed on </td></tr>
    <tr><td class="paramname">sub</td><td>The stasis subscription for this message callback </td></tr>
    <tr><td class="paramname">topic</td><td>The topic this message was published for </td></tr>
    <tr><td class="paramname">message</td><td>The message about who got parked </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02751">2751</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00279">AST_LOG_WARNING</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00210">CDR_DEBUG</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01075">cdr_object_create_and_append()</a>, <a class="el" href="../../d2/d33/parking_8h_source.html#l00062">ast_parked_call_payload::event_type</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02064">filter_channel_snapshot()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00721">cdr_object::lastevent</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d2/d33/parking_8h_source.html#l00047">PARKED_CALL</a>, <a class="el" href="../../d2/d33/parking_8h_source.html#l00060">ast_parked_call_payload::parkee</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00546">cdr_object_fn_table::process_parked_channel</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message_timestamp()</a>, and <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04522">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;{</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d47/structast__parked__call__payload.html">ast_parked_call_payload</a> *payload = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(message);</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = payload-&gt;<a class="code" href="../../d0/d47/structast__parked__call__payload.html#abf322ebc13d3689cf5a5e81e4569c602">parkee</a>;</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;   <span class="keywordtype">int</span> unhandled = 1;</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;   <span class="comment">/* Anything other than getting parked will be handled by other updates */</span></div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;   <span class="keywordflow">if</span> (payload-&gt;<a class="code" href="../../d0/d47/structast__parked__call__payload.html#ac9e5e351c10879edca8ea8210075f082">event_type</a> != <a class="code" href="../../d2/d33/parking_8h.html#ad7f2cff41c0b5c4e0aa1e2de3ee71485a56203dcf9e281e78d8fde96105f83ea7">PARKED_CALL</a>) {</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;   }</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;   <span class="comment">/* No one got parked? */</span></div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;   <span class="keywordflow">if</span> (!channel) {</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;   }</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#a527db94b4432c2cd6fc58c32b285153e">filter_channel_snapshot</a>(channel)) {</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;   }</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>(<span class="stringliteral">&quot;Parked Call message for channel %s: %u.%08u\n&quot;</span>,</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;      channel-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>,</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;      (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(message)-&gt;tv_sec,</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;      (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(message)-&gt;tv_usec);</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;   cdr = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a>, channel-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>);</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2878d83e36d91850732bad997524e45e">AST_LOG_WARNING</a>, <span class="stringliteral">&quot;No CDR for channel %s\n&quot;</span>, channel-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;   }</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cdr);</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;   <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;      it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">lastevent</a> = *<a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(message);</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;      <span class="keywordflow">if</span> (it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#ac89fc506d692f201009bb508d769e538">process_parked_channel</a>) {</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;         unhandled &amp;= it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#ac89fc506d692f201009bb508d769e538">process_parked_channel</a>(it_cdr, payload);</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;      }</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;   }</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;   <span class="keywordflow">if</span> (unhandled) {</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;      <span class="comment">/* Nothing handled the messgae - we need a new one! */</span></div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *new_cdr;</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;      new_cdr = <a class="code" href="../../dc/df2/cdr_8c.html#af90187a3766c8b50aa4b984a62e30219">cdr_object_create_and_append</a>(cdr, <a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(message));</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;      <span class="keywordflow">if</span> (new_cdr) {</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;         <span class="comment">/* As the new CDR is created in the single state, it is guaranteed</span></div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;<span class="comment">          * to have a function for the parked call message and will handle</span></div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;<span class="comment">          * the message */</span></div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;         new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#ac89fc506d692f201009bb508d769e538">process_parked_channel</a>(new_cdr, payload);</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;      }</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;   }</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cdr);</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr);</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__fn__table_html_ac89fc506d692f201009bb508d769e538"><div class="ttname"><a href="../../d1/d0f/structcdr__object__fn__table.html#ac89fc506d692f201009bb508d769e538">cdr_object_fn_table::process_parked_channel</a></div><div class="ttdeci">int(*const process_parked_channel)(struct cdr_object *cdr, struct ast_parked_call_payload *parking_info)</div><div class="ttdoc">Process an update informing us that the channel got itself parked. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00546">cdr.c:546</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="logger_8h_html_a2878d83e36d91850732bad997524e45e"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a2878d83e36d91850732bad997524e45e">AST_LOG_WARNING</a></div><div class="ttdeci">#define AST_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00279">logger.h:279</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">ast_channel_snapshot_base::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="structast__parked__call__payload_html"><div class="ttname"><a href="../../d0/d47/structast__parked__call__payload.html">ast_parked_call_payload</a></div><div class="ttdoc">A parked call message payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d33/parking_8h_source.html#l00059">parking.h:59</a></div></div>
<div class="ttc" id="cdr_8c_html_a527db94b4432c2cd6fc58c32b285153e"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a527db94b4432c2cd6fc58c32b285153e">filter_channel_snapshot</a></div><div class="ttdeci">static int filter_channel_snapshot(struct ast_channel_snapshot *snapshot)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02064">cdr.c:2064</a></div></div>
<div class="ttc" id="structast__parked__call__payload_html_ac9e5e351c10879edca8ea8210075f082"><div class="ttname"><a href="../../d0/d47/structast__parked__call__payload.html#ac9e5e351c10879edca8ea8210075f082">ast_parked_call_payload::event_type</a></div><div class="ttdeci">enum ast_parked_call_event_type event_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d33/parking_8h_source.html#l00062">parking.h:62</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="cdr_8c_html_a8052195443a9cb5835d7d2b3ab7279aa"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a></div><div class="ttdeci">#define CDR_DEBUG(fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00210">cdr.c:210</a></div></div>
<div class="ttc" id="structast__parked__call__payload_html_abf322ebc13d3689cf5a5e81e4569c602"><div class="ttname"><a href="../../d0/d47/structast__parked__call__payload.html#abf322ebc13d3689cf5a5e81e4569c602">ast_parked_call_payload::parkee</a></div><div class="ttdeci">struct ast_channel_snapshot * parkee</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d33/parking_8h_source.html#l00060">parking.h:60</a></div></div>
<div class="ttc" id="stasis_8h_html_a0a9c10eadd9db34f8c0b19619752ea93"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a></div><div class="ttdeci">const struct timeval * stasis_message_timestamp(const struct stasis_message *msg)</div><div class="ttdoc">Get the time when a message was created. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message.c:203</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="cdr_8c_html_aabd874b0958bde3e08b5a876c2d1a395"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_master</div><div class="ttdoc">A container of the active master CDRs indexed by Party A channel uniqueid. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00365">cdr.c:365</a></div></div>
<div class="ttc" id="structcdr__object_html_a7543dbd0c668cd22684e8d5aea0b5b93"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">cdr_object::lastevent</a></div><div class="ttdeci">struct timeval lastevent</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00721">cdr.c:721</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="parking_8h_html_ad7f2cff41c0b5c4e0aa1e2de3ee71485a56203dcf9e281e78d8fde96105f83ea7"><div class="ttname"><a href="../../d2/d33/parking_8h.html#ad7f2cff41c0b5c4e0aa1e2de3ee71485a56203dcf9e281e78d8fde96105f83ea7">PARKED_CALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d33/parking_8h_source.html#l00047">parking.h:47</a></div></div>
<div class="ttc" id="cdr_8c_html_af90187a3766c8b50aa4b984a62e30219"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#af90187a3766c8b50aa4b984a62e30219">cdr_object_create_and_append</a></div><div class="ttdeci">static struct cdr_object * cdr_object_create_and_append(struct cdr_object *cdr, const struct timeval *event_time)</div><div class="ttdoc">Create a new cdr_object and append it to an existing chain. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01075">cdr.c:1075</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9eac9bdac4d87d2284e68d62627724d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9eac9bdac4d87d2284e68d62627724d9">&#9670;&nbsp;</a></span>handle_parking_bridge_enter_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void handle_parking_bridge_enter_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct timeval *&#160;</td>
          <td class="paramname"><em>event_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle entering into a parking bridge. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cdr</td><td>The CDR to operate on </td></tr>
    <tr><td class="paramname">bridge</td><td>The bridge the channel just entered </td></tr>
    <tr><td class="paramname">channel</td><td>The channel snapshot </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02586">2586</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00210">CDR_DEBUG</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01075">cdr_object_create_and_append()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00821">cdr_object_transition_state()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00721">cdr_object::lastevent</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00519">cdr_object_fn_table::process_parking_bridge_enter</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00437">cdr_object_fn_table::process_party_a</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02708">handle_bridge_enter_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;{</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;   <span class="keywordtype">int</span> res = 1;</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *new_cdr;</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cdr);</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;   <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;      it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">lastevent</a> = *event_time;</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;      <span class="keywordflow">if</span> (it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a589a831691be1a360afc437ddb90a249">process_parking_bridge_enter</a>) {</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;         res &amp;= it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a589a831691be1a360afc437ddb90a249">process_parking_bridge_enter</a>(it_cdr, bridge, channel);</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;      }</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;      <span class="keywordflow">if</span> (it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a20c04201646afd8fbeb4a3b001e54311">process_party_a</a>) {</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>(<span class="stringliteral">&quot;%p - Updating Party A %s snapshot\n&quot;</span>, it_cdr,</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;            channel-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;         it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a20c04201646afd8fbeb4a3b001e54311">process_party_a</a>(it_cdr, channel);</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;      }</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;   }</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;      <span class="comment">/* No one handled it - we need a new one! */</span></div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;      new_cdr = <a class="code" href="../../dc/df2/cdr_8c.html#af90187a3766c8b50aa4b984a62e30219">cdr_object_create_and_append</a>(cdr, event_time);</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;      <span class="keywordflow">if</span> (new_cdr) {</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;         <span class="comment">/* Let the single state transition us to Parked */</span></div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a>(new_cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a03d77113f205fd4450fe8866dc0f48dd">single_state_fn_table</a>);</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;         new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a589a831691be1a360afc437ddb90a249">process_parking_bridge_enter</a>(new_cdr, bridge, channel);</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;      }</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;   }</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cdr);</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="structcdr__object__fn__table_html_a20c04201646afd8fbeb4a3b001e54311"><div class="ttname"><a href="../../d1/d0f/structcdr__object__fn__table.html#a20c04201646afd8fbeb4a3b001e54311">cdr_object_fn_table::process_party_a</a></div><div class="ttdeci">int(*const process_party_a)(struct cdr_object *cdr, struct ast_channel_snapshot *snapshot)</div><div class="ttdoc">Process a Party A update for the cdr_object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00437">cdr.c:437</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="cdr_8c_html_a8052195443a9cb5835d7d2b3ab7279aa"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a></div><div class="ttdeci">#define CDR_DEBUG(fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00210">cdr.c:210</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="cdr_8c_html_a03d77113f205fd4450fe8866dc0f48dd"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a03d77113f205fd4450fe8866dc0f48dd">single_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table single_state_fn_table</div><div class="ttdoc">The virtual table for the Single state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00573">cdr.c:573</a></div></div>
<div class="ttc" id="structcdr__object_html_a7543dbd0c668cd22684e8d5aea0b5b93"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">cdr_object::lastevent</a></div><div class="ttdeci">struct timeval lastevent</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00721">cdr.c:721</a></div></div>
<div class="ttc" id="structcdr__object__fn__table_html_a589a831691be1a360afc437ddb90a249"><div class="ttname"><a href="../../d1/d0f/structcdr__object__fn__table.html#a589a831691be1a360afc437ddb90a249">cdr_object_fn_table::process_parking_bridge_enter</a></div><div class="ttdeci">int(*const process_parking_bridge_enter)(struct cdr_object *cdr, struct ast_bridge_snapshot *bridge, struct ast_channel_snapshot *channel)</div><div class="ttdoc">Process entering into a parking bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00519">cdr.c:519</a></div></div>
<div class="ttc" id="cdr_8c_html_af90187a3766c8b50aa4b984a62e30219"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#af90187a3766c8b50aa4b984a62e30219">cdr_object_create_and_append</a></div><div class="ttdeci">static struct cdr_object * cdr_object_create_and_append(struct cdr_object *cdr, const struct timeval *event_time)</div><div class="ttdoc">Create a new cdr_object and append it to an existing chain. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01075">cdr.c:1075</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="cdr_8c_html_aec9ada03f8f99aa4c972b141bcbd2ee3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a></div><div class="ttdeci">static void cdr_object_transition_state(struct cdr_object *cdr, struct cdr_object_fn_table *fn_table)</div><div class="ttdoc">Transition a cdr_object to a new state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00821">cdr.c:821</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a235c58e8a0fcc421a4e1106e0df348d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a235c58e8a0fcc421a4e1106e0df348d1">&#9670;&nbsp;</a></span>handle_standard_bridge_enter_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void handle_standard_bridge_enter_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct timeval *&#160;</td>
          <td class="paramname"><em>event_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle a bridge enter message for a 'normal' bridge. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cdr</td><td>The CDR to operate on </td></tr>
    <tr><td class="paramname">bridge</td><td>The bridge the channel just entered </td></tr>
    <tr><td class="paramname">channel</td><td>The channel snapshot </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02627">2627</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00407">BRIDGE_ENTER_NEED_CDR</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00403">BRIDGE_ENTER_NO_PARTY_B</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00399">BRIDGE_ENTER_OBTAINED_PARTY_B</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00395">BRIDGE_ENTER_ONLY_PARTY</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00210">CDR_DEBUG</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01075">cdr_object_create_and_append()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01440">cdr_object_finalize()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02561">handle_bridge_pairings()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00721">cdr_object::lastevent</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00503">cdr_object_fn_table::process_bridge_enter</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00437">cdr_object_fn_table::process_party_a</a>, and <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02708">handle_bridge_enter_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;{</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316">process_bridge_enter_results</a> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *new_cdr;</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *handled_cdr = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cdr);</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;try_again:</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;   <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;      it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">lastevent</a> = *event_time;</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;      <span class="keywordflow">if</span> (it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a20c04201646afd8fbeb4a3b001e54311">process_party_a</a>) {</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>(<span class="stringliteral">&quot;%p - Updating Party A %s snapshot\n&quot;</span>, it_cdr,</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;            channel-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;         it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#a20c04201646afd8fbeb4a3b001e54311">process_party_a</a>(it_cdr, channel);</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;      }</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;      <span class="comment">/* Notify all states that they have entered a bridge */</span></div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;      <span class="keywordflow">if</span> (it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#acd44c041c33dc7512a40fb8f1c6ecb68">process_bridge_enter</a>) {</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>(<span class="stringliteral">&quot;%p - Processing bridge enter for %s\n&quot;</span>, it_cdr,</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;            channel-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;         result = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>-&gt;<a class="code" href="../../d1/d0f/structcdr__object__fn__table.html#acd44c041c33dc7512a40fb8f1c6ecb68">process_bridge_enter</a>(it_cdr, bridge, channel);</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;         <span class="keywordflow">switch</span> (result) {</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316a62a0455d2eb58c31a04b25d2c7eed117">BRIDGE_ENTER_ONLY_PARTY</a>:</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;            <span class="comment">/* Fall through */</span></div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316ad10fe7b54c407ca92612577a074e58c7">BRIDGE_ENTER_OBTAINED_PARTY_B</a>:</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;            <span class="keywordflow">if</span> (!handled_cdr) {</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;               handled_cdr = it_cdr;</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;            }</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316ab55afa346f826bd34c53c5d08acdbfae">BRIDGE_ENTER_NEED_CDR</a>:</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;            <span class="comment">/* Pass */</span></div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316a7975da294ade48d4154d1f00ec059039">BRIDGE_ENTER_NO_PARTY_B</a>:</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;            <span class="comment">/* We didn&#39;t win on any - end this CDR. If someone else comes in later</span></div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;<span class="comment">             * that is Party B to this CDR, it can re-activate this CDR.</span></div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;            <span class="keywordflow">if</span> (!handled_cdr) {</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;               handled_cdr = it_cdr;</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;            }</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;            <a class="code" href="../../dc/df2/cdr_8c.html#a34a146403fab13026f6e302c753be741">cdr_object_finalize</a>(cdr);</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;         }</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;      }</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;   }</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;   <span class="comment">/* Create the new matchings, but only for either:</span></div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;<span class="comment">    *  * The first CDR in the chain that handled it. This avoids issues with</span></div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;<span class="comment">    *    forked CDRs.</span></div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;<span class="comment">    *  * If no one handled it, the last CDR in the chain. This would occur if</span></div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;<span class="comment">    *    a CDR joined a bridge and it wasn&#39;t Party A for anyone. We still need</span></div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;<span class="comment">    *    to make pairings with everyone in the bridge.</span></div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;   <span class="keywordflow">if</span> (handled_cdr) {</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#af10a28107aa2ea71e1a44a48bf1819e6">handle_bridge_pairings</a>(handled_cdr, bridge);</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;      <span class="comment">/* Nothing handled it - we need a new one! */</span></div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;      new_cdr = <a class="code" href="../../dc/df2/cdr_8c.html#af90187a3766c8b50aa4b984a62e30219">cdr_object_create_and_append</a>(cdr, event_time);</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;      <span class="keywordflow">if</span> (new_cdr) {</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;         <span class="comment">/* This is guaranteed to succeed: the new CDR is created in the single state</span></div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;<span class="comment">          * and will be able to handle the bridge enter message</span></div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;         <span class="keywordflow">goto</span> try_again;</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;      }</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;   }</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cdr);</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a3bdd3cd3f0f0a84448a50181c3cee316ad10fe7b54c407ca92612577a074e58c7"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316ad10fe7b54c407ca92612577a074e58c7">BRIDGE_ENTER_OBTAINED_PARTY_B</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00399">cdr.c:399</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="structcdr__object__fn__table_html_a20c04201646afd8fbeb4a3b001e54311"><div class="ttname"><a href="../../d1/d0f/structcdr__object__fn__table.html#a20c04201646afd8fbeb4a3b001e54311">cdr_object_fn_table::process_party_a</a></div><div class="ttdeci">int(*const process_party_a)(struct cdr_object *cdr, struct ast_channel_snapshot *snapshot)</div><div class="ttdoc">Process a Party A update for the cdr_object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00437">cdr.c:437</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structcdr__object__fn__table_html_acd44c041c33dc7512a40fb8f1c6ecb68"><div class="ttname"><a href="../../d1/d0f/structcdr__object__fn__table.html#acd44c041c33dc7512a40fb8f1c6ecb68">cdr_object_fn_table::process_bridge_enter</a></div><div class="ttdeci">enum process_bridge_enter_results(*const process_bridge_enter)(struct cdr_object *cdr, struct ast_bridge_snapshot *bridge, struct ast_channel_snapshot *channel)</div><div class="ttdoc">Process the entering of a bridge by this CDR. The purpose of this callback is to have the CDR prepare...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00503">cdr.c:503</a></div></div>
<div class="ttc" id="cdr_8c_html_a3bdd3cd3f0f0a84448a50181c3cee316ab55afa346f826bd34c53c5d08acdbfae"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316ab55afa346f826bd34c53c5d08acdbfae">BRIDGE_ENTER_NEED_CDR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00407">cdr.c:407</a></div></div>
<div class="ttc" id="cdr_8c_html_a8052195443a9cb5835d7d2b3ab7279aa"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a></div><div class="ttdeci">#define CDR_DEBUG(fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00210">cdr.c:210</a></div></div>
<div class="ttc" id="cdr_8c_html_a3bdd3cd3f0f0a84448a50181c3cee316a62a0455d2eb58c31a04b25d2c7eed117"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316a62a0455d2eb58c31a04b25d2c7eed117">BRIDGE_ENTER_ONLY_PARTY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00395">cdr.c:395</a></div></div>
<div class="ttc" id="cdr_8c_html_a3bdd3cd3f0f0a84448a50181c3cee316"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316">process_bridge_enter_results</a></div><div class="ttdeci">process_bridge_enter_results</div><div class="ttdoc">Return types for process_bridge_enter functions. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00391">cdr.c:391</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="cdr_8c_html_af10a28107aa2ea71e1a44a48bf1819e6"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#af10a28107aa2ea71e1a44a48bf1819e6">handle_bridge_pairings</a></div><div class="ttdeci">static void handle_bridge_pairings(struct cdr_object *cdr, struct ast_bridge_snapshot *bridge)</div><div class="ttdoc">Handle creating bridge pairings for the cdr_object that just entered a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02561">cdr.c:2561</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="cdr_8c_html_a3bdd3cd3f0f0a84448a50181c3cee316a7975da294ade48d4154d1f00ec059039"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316a7975da294ade48d4154d1f00ec059039">BRIDGE_ENTER_NO_PARTY_B</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00403">cdr.c:403</a></div></div>
<div class="ttc" id="structcdr__object_html_a7543dbd0c668cd22684e8d5aea0b5b93"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">cdr_object::lastevent</a></div><div class="ttdeci">struct timeval lastevent</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00721">cdr.c:721</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="cdr_8c_html_af90187a3766c8b50aa4b984a62e30219"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#af90187a3766c8b50aa4b984a62e30219">cdr_object_create_and_append</a></div><div class="ttdeci">static struct cdr_object * cdr_object_create_and_append(struct cdr_object *cdr, const struct timeval *event_time)</div><div class="ttdoc">Create a new cdr_object and append it to an existing chain. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01075">cdr.c:1075</a></div></div>
<div class="ttc" id="cdr_8c_html_a34a146403fab13026f6e302c753be741"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a34a146403fab13026f6e302c753be741">cdr_object_finalize</a></div><div class="ttdeci">static void cdr_object_finalize(struct cdr_object *cdr)</div><div class="ttdoc">Finalize a CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01440">cdr.c:1440</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8ba2f2526d5230859524407aad436361"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ba2f2526d5230859524407aad436361">&#9670;&nbsp;</a></span>init_batch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int init_batch </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section note"><dt>Note</dt><dd>Don't call without cdr_batch_lock </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03738">3738</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03730">reset_batch()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03841">cdr_detach()</a>.</p>
<div class="fragment"><div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;{</div><div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;   <span class="comment">/* This is the single meta-batch used to keep track of all CDRs during the entire life of the program */</span></div><div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;   <span class="keywordflow">if</span> (!(<a class="code" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(*<a class="code" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a>))))</div><div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;</div><div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a0165bd3137a70f31dcbe5fb47b5aee2a">reset_batch</a>();</div><div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;</div><div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a0165bd3137a70f31dcbe5fb47b5aee2a"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a0165bd3137a70f31dcbe5fb47b5aee2a">reset_batch</a></div><div class="ttdeci">static void reset_batch(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03730">cdr.c:3730</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="cdr_8c_html_a3c9a24d791e528330adc76210fb42407"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a></div><div class="ttdeci">static struct cdr_batch * batch</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab3ba06a4d885b31e4073c047d0dad02d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3ba06a4d885b31e4073c047d0dad02d">&#9670;&nbsp;</a></span>is_cdr_flag_set()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int is_cdr_flag_set </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>cdr_flag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01127">1127</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00223">module_config::general</a>, and <a class="el" href="../../dc/d07/cdr_8h_source.html#l00265">ast_cdr_config::settings</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02861">ast_cdr_is_enabled()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03353">ast_cdr_serialize_variables()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01540">base_process_party_a()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01477">cdr_object_check_party_a_hangup()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01235">cdr_object_get_billsec()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01402">cdr_object_set_disposition()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02249">check_new_cdr_needed()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01828">dial_status_to_disposition()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02049">finalized_state_process_party_a()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l01148">snapshot_cep_changed()</a>.</p>
<div class="fragment"><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;{</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d57/structmodule__config.html">module_config</a> *mod_cfg;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;   <span class="keywordtype">int</span> flag_set;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;   mod_cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(module_configs);</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;   flag_set = mod_cfg &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>, cdr_flag);</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(mod_cfg);</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;   <span class="keywordflow">return</span> flag_set;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;}</div><div class="ttc" id="structast__cdr__config_html_a64ee0bd247c901e7af2f871b4ef7ad71"><div class="ttname"><a href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">ast_cdr_config::settings</a></div><div class="ttdeci">struct ast_flags settings</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00265">cdr.h:265</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="structmodule__config_html"><div class="ttname"><a href="../../db/d57/structmodule__config.html">module_config</a></div><div class="ttdoc">The configuration settings for this module. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00222">cdr.c:222</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structmodule__config_html_a95699733ba47a55e25760adf5c51e59a"><div class="ttname"><a href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">module_config::general</a></div><div class="ttdeci">struct ast_cdr_config * general</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00223">cdr.c:223</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04522">4522</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00365">AO2_ALLOC_OPT_LOCK_MUTEX</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01310">ao2_container_alloc_hash</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00958">ao2_container_register()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf2f12b95a707aaa2e0b9a5840686b081">ast_channel_dial_type()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a8bd3a6c07bd2064a82a7c27091ba0fce">ast_channel_entered_bridge_type()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a4cf969b75b455dc9301ede7c7830d4b6">ast_channel_left_bridge_type()</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#ga8fb4dbec86956e211c0489112a6de975">ast_channel_snapshot_type()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00265">ast_cli_register_multiple</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00102">AST_MODULE_LOAD_FAILURE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00156">AST_NUM_CHANNEL_BUCKETS</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#ga00e84a145ef736ce4134fee75e530113">ast_parked_call_type()</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00013">ast_register_atexit()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00236">ast_sched_context_create()</a>, <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00063">AST_TASKPROCESSOR_HIGH_WATER_LEVEL</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00912">cdr_all_cmp_fn()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00888">cdr_all_hash_fn()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04472">cdr_all_print_fn()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04385">cdr_engine_shutdown()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00854">cdr_master_cmp_fn()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00830">cdr_master_hash_fn()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04445">cdr_master_print_fn()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04488">cdr_toggle_runtime_options()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02708">handle_bridge_enter_message()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02404">handle_bridge_leave_message()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02820">handle_cdr_sync_message()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02278">handle_channel_snapshot_update_message()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02105">handle_dial_message()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02751">handle_parked_call_message()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04340">process_config()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00310">stasis_message_router_add()</a>, <a class="el" href="../../d4/d25/stasis__message__router_8h_source.html#l00060">stasis_message_router_create</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00298">stasis_message_router_set_congestion_limits()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l01501">STASIS_MESSAGE_TYPE_INIT</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04617">reload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;{</div><div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#a23c29a0c6da3b09b04d3f801bd44673e">process_config</a>(0)) {</div><div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388">AST_MODULE_LOAD_FAILURE</a>;</div><div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;   }</div><div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;</div><div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#abc796aa4d7644ba463deefc014cd6ea9">cdr_topic</a> = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;cdr:aggregator&quot;</span>);</div><div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/df2/cdr_8c.html#abc796aa4d7644ba463deefc014cd6ea9">cdr_topic</a>) {</div><div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388">AST_MODULE_LOAD_FAILURE</a>;</div><div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;   }</div><div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;</div><div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a> = <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a1a1761c57f73009d305f95d8ad99e2a7">stasis_message_router_create</a>(<a class="code" href="../../dc/df2/cdr_8c.html#abc796aa4d7644ba463deefc014cd6ea9">cdr_topic</a>);</div><div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>) {</div><div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388">AST_MODULE_LOAD_FAILURE</a>;</div><div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;   }</div><div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;   <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a1570c21a07d1309809ae61c723f28a1d">stasis_message_router_set_congestion_limits</a>(<a class="code" href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>, -1,</div><div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;      10 * <a class="code" href="../../d0/d1e/taskprocessor_8h.html#ad4a3db2b08877779bd481a649318be7d">AST_TASKPROCESSOR_HIGH_WATER_LEVEL</a>);</div><div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;</div><div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(cdr_sync_message_type)) {</div><div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388">AST_MODULE_LOAD_FAILURE</a>;</div><div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;   }</div><div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;</div><div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;   <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a>(<a class="code" href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga8fb4dbec86956e211c0489112a6de975">ast_channel_snapshot_type</a>(), <a class="code" href="../../dc/df2/cdr_8c.html#a73171d6c53e2ddd5c0df030be05d83fe">handle_channel_snapshot_update_message</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;   <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a>(<a class="code" href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf2f12b95a707aaa2e0b9a5840686b081">ast_channel_dial_type</a>(), <a class="code" href="../../dc/df2/cdr_8c.html#ac1a281ba026eec2a08607404d2a186e4">handle_dial_message</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;   <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a>(<a class="code" href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>, <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a8bd3a6c07bd2064a82a7c27091ba0fce">ast_channel_entered_bridge_type</a>(), <a class="code" href="../../dc/df2/cdr_8c.html#a78459003df6cfe438b4b820100606448">handle_bridge_enter_message</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;   <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a>(<a class="code" href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>, <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a4cf969b75b455dc9301ede7c7830d4b6">ast_channel_left_bridge_type</a>(), <a class="code" href="../../dc/df2/cdr_8c.html#a6008444aa49a2254f2cce57390cdf53d">handle_bridge_leave_message</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;   <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a>(<a class="code" href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga00e84a145ef736ce4134fee75e530113">ast_parked_call_type</a>(), <a class="code" href="../../dc/df2/cdr_8c.html#a157ceac21c95d305d1c3d739da9b15f9">handle_parked_call_message</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;   <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a>(<a class="code" href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>, cdr_sync_message_type(), <a class="code" href="../../dc/df2/cdr_8c.html#a78b801aab49f4431cf358176c793eae7">handle_cdr_sync_message</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;</div><div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0,</div><div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aa0358ea3ad40c705e5bd7c391374238a">AST_NUM_CHANNEL_BUCKETS</a>, <a class="code" href="../../dc/df2/cdr_8c.html#ae4d1a552b91a5b7ab7b4ea4fea301169">cdr_master_hash_fn</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a5c041a2fdf7380bf2767067dae488f60">cdr_master_cmp_fn</a>);</div><div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a>) {</div><div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388">AST_MODULE_LOAD_FAILURE</a>;</div><div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;   }</div><div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#abdb952d2373503555d96f02f130c5770">ao2_container_register</a>(<span class="stringliteral">&quot;cdrs_master&quot;</span>, <a class="code" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a>, <a class="code" href="../../dc/df2/cdr_8c.html#aa06976cdf68174771e4bd9c77b0360eb">cdr_master_print_fn</a>);</div><div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;</div><div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0,</div><div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aa0358ea3ad40c705e5bd7c391374238a">AST_NUM_CHANNEL_BUCKETS</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a4fc4102c3217d702e3465ee8859c44bf">cdr_all_hash_fn</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/df2/cdr_8c.html#aae8c02f876344b3e49f91b1755ac078f">cdr_all_cmp_fn</a>);</div><div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a>) {</div><div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388">AST_MODULE_LOAD_FAILURE</a>;</div><div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;   }</div><div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#abdb952d2373503555d96f02f130c5770">ao2_container_register</a>(<span class="stringliteral">&quot;cdrs_all&quot;</span>, <a class="code" href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a2812e34e2a42693cf02793d873f9c577">cdr_all_print_fn</a>);</div><div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;</div><div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;   <a class="code" href="../../d0/da0/structsched.html">sched</a> = <a class="code" href="../../d7/d00/sched_8h.html#a5baecc149aeabdbef9b3ed6780c1c4a6">ast_sched_context_create</a>();</div><div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/da0/structsched.html">sched</a>) {</div><div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create schedule context.\n&quot;</span>);</div><div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388">AST_MODULE_LOAD_FAILURE</a>;</div><div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;   }</div><div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;</div><div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(<a class="code" href="../../dc/df2/cdr_8c.html#a1959d38582b0da24d4d42766cf13ade8">cli_commands</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dc/df2/cdr_8c.html#a1959d38582b0da24d4d42766cf13ade8">cli_commands</a>));</div><div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;   <a class="code" href="../../db/db2/asterisk_8h.html#a9b09e95876dfecb9a8573819da0b255e">ast_register_atexit</a>(<a class="code" href="../../dc/df2/cdr_8c.html#acaee16cde4e4e220e1b20aad913c3ea7">cdr_engine_shutdown</a>);</div><div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;</div><div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/cdr_8c.html#a77dc1728a978dd5a7d045800200be4cc">cdr_toggle_runtime_options</a>() ? <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388">AST_MODULE_LOAD_FAILURE</a> : <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a6d6d7bdd31cb1b6f84f2e447a7a2c6c2"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a></div><div class="ttdeci">static struct stasis_message_router * stasis_router</div><div class="ttdoc">Message router for stasis messages regarding channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00371">cdr.c:371</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="cdr_8c_html_a5c041a2fdf7380bf2767067dae488f60"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5c041a2fdf7380bf2767067dae488f60">cdr_master_cmp_fn</a></div><div class="ttdeci">static int cdr_master_cmp_fn(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00854">cdr.c:854</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a8bd3a6c07bd2064a82a7c27091ba0fce"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a8bd3a6c07bd2064a82a7c27091ba0fce">ast_channel_entered_bridge_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_entered_bridge_type(void)</div><div class="ttdoc">Message type for channel enter bridge blob messages. </div></div>
<div class="ttc" id="cdr_8c_html_a6008444aa49a2254f2cce57390cdf53d"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a6008444aa49a2254f2cce57390cdf53d">handle_bridge_leave_message</a></div><div class="ttdeci">static void handle_bridge_leave_message(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdoc">Handler for when a channel leaves a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02404">cdr.c:2404</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a5adc304e693097ec75b474e6a5309958"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a></div><div class="ttdeci">int stasis_message_router_add(struct stasis_message_router *router, struct stasis_message_type *message_type, stasis_subscription_cb callback, void *data)</div><div class="ttdoc">Add a route to a message router. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00310">stasis_message_router.c:310</a></div></div>
<div class="ttc" id="stasis_8h_html_a70cd046d8e3fd50de5c51aecb2830d2a"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a></div><div class="ttdeci">#define STASIS_MESSAGE_TYPE_INIT(name)</div><div class="ttdoc">Boiler-plate messaging macro for initializing message types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01501">stasis.h:1501</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a4cf969b75b455dc9301ede7c7830d4b6"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a4cf969b75b455dc9301ede7c7830d4b6">ast_channel_left_bridge_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_left_bridge_type(void)</div><div class="ttdoc">Message type for channel leave bridge blob messages. </div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga00e84a145ef736ce4134fee75e530113"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga00e84a145ef736ce4134fee75e530113">ast_parked_call_type</a></div><div class="ttdeci">struct stasis_message_type * ast_parked_call_type(void)</div><div class="ttdoc">accessor for the parked call stasis message type </div></div>
<div class="ttc" id="taskprocessor_8h_html_ad4a3db2b08877779bd481a649318be7d"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#ad4a3db2b08877779bd481a649318be7d">AST_TASKPROCESSOR_HIGH_WATER_LEVEL</a></div><div class="ttdeci">#define AST_TASKPROCESSOR_HIGH_WATER_LEVEL</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00063">taskprocessor.h:63</a></div></div>
<div class="ttc" id="cdr_8c_html_ae4d1a552b91a5b7ab7b4ea4fea301169"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ae4d1a552b91a5b7ab7b4ea4fea301169">cdr_master_hash_fn</a></div><div class="ttdeci">static int cdr_master_hash_fn(const void *obj, const int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00830">cdr.c:830</a></div></div>
<div class="ttc" id="cdr_8c_html_acaee16cde4e4e220e1b20aad913c3ea7"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#acaee16cde4e4e220e1b20aad913c3ea7">cdr_engine_shutdown</a></div><div class="ttdeci">static void cdr_engine_shutdown(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l04385">cdr.c:4385</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="cdr_8c_html_abc796aa4d7644ba463deefc014cd6ea9"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#abc796aa4d7644ba463deefc014cd6ea9">cdr_topic</a></div><div class="ttdeci">static struct stasis_topic * cdr_topic</div><div class="ttdoc">The parent topic for all topics we want to aggregate for CDRs. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00383">cdr.c:383</a></div></div>
<div class="ttc" id="channel_8h_html_aa0358ea3ad40c705e5bd7c391374238a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa0358ea3ad40c705e5bd7c391374238a">AST_NUM_CHANNEL_BUCKETS</a></div><div class="ttdeci">#define AST_NUM_CHANNEL_BUCKETS</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00156">channel.h:156</a></div></div>
<div class="ttc" id="cdr_8c_html_a78459003df6cfe438b4b820100606448"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a78459003df6cfe438b4b820100606448">handle_bridge_enter_message</a></div><div class="ttdeci">static void handle_bridge_enter_message(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02708">cdr.c:2708</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="cdr_8c_html_ac1a281ba026eec2a08607404d2a186e4"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ac1a281ba026eec2a08607404d2a186e4">handle_dial_message</a></div><div class="ttdeci">static void handle_dial_message(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdoc">Handler for Stasis-Core dial messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02105">cdr.c:2105</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr_8c_html_a73171d6c53e2ddd5c0df030be05d83fe"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a73171d6c53e2ddd5c0df030be05d83fe">handle_channel_snapshot_update_message</a></div><div class="ttdeci">static void handle_channel_snapshot_update_message(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdoc">Handler for channel snapshot update messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02278">cdr.c:2278</a></div></div>
<div class="ttc" id="astobj2_8h_html_abdb952d2373503555d96f02f130c5770"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#abdb952d2373503555d96f02f130c5770">ao2_container_register</a></div><div class="ttdeci">int ao2_container_register(const char *name, struct ao2_container *self, ao2_prnt_obj_fn *prnt_obj)</div><div class="ttdoc">Register a container for CLI stats and integrity check. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00958">astobj2_container.c:958</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="cdr_8c_html_a4fc4102c3217d702e3465ee8859c44bf"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a4fc4102c3217d702e3465ee8859c44bf">cdr_all_hash_fn</a></div><div class="ttdeci">static int cdr_all_hash_fn(const void *obj, const int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00888">cdr.c:888</a></div></div>
<div class="ttc" id="cdr_8c_html_a23c29a0c6da3b09b04d3f801bd44673e"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a23c29a0c6da3b09b04d3f801bd44673e">process_config</a></div><div class="ttdeci">static int process_config(int reload)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l04340">cdr.c:4340</a></div></div>
<div class="ttc" id="cdr_8c_html_a1959d38582b0da24d4d42766cf13ade8"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a1959d38582b0da24d4d42766cf13ade8">cli_commands</a></div><div class="ttdeci">static struct ast_cli_entry cli_commands[]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l04249">cdr.c:4249</a></div></div>
<div class="ttc" id="asterisk_8h_html_a9b09e95876dfecb9a8573819da0b255e"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#a9b09e95876dfecb9a8573819da0b255e">ast_register_atexit</a></div><div class="ttdeci">int ast_register_atexit(void(*func)(void))</div><div class="ttdoc">Register a function to be executed before Asterisk exits. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00013">clicompat.c:13</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00365">astobj2.h:365</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a1a1761c57f73009d305f95d8ad99e2a7"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a1a1761c57f73009d305f95d8ad99e2a7">stasis_message_router_create</a></div><div class="ttdeci">#define stasis_message_router_create(topic)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d25/stasis__message__router_8h_source.html#l00060">stasis_message_router.h:60</a></div></div>
<div class="ttc" id="sched_8h_html_a5baecc149aeabdbef9b3ed6780c1c4a6"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a5baecc149aeabdbef9b3ed6780c1c4a6">ast_sched_context_create</a></div><div class="ttdeci">struct ast_sched_context * ast_sched_context_create(void)</div><div class="ttdoc">Create a scheduler context. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00236">sched.c:236</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astobj2_8h_html_aefc16f8aa9087cbc5c55c70cf1dd41b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a></div><div class="ttdeci">#define ao2_container_alloc_hash(ao2_options, container_options, n_buckets, hash_fn, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01310">astobj2.h:1310</a></div></div>
<div class="ttc" id="cdr_8c_html_aabd874b0958bde3e08b5a876c2d1a395"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_master</div><div class="ttdoc">A container of the active master CDRs indexed by Party A channel uniqueid. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00365">cdr.c:365</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388">AST_MODULE_LOAD_FAILURE</a></div><div class="ttdoc">Module could not be loaded properly. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00102">module.h:102</a></div></div>
<div class="ttc" id="cdr_8c_html_aae8c02f876344b3e49f91b1755ac078f"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aae8c02f876344b3e49f91b1755ac078f">cdr_all_cmp_fn</a></div><div class="ttdeci">static int cdr_all_cmp_fn(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00912">cdr.c:912</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga8fb4dbec86956e211c0489112a6de975"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga8fb4dbec86956e211c0489112a6de975">ast_channel_snapshot_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_snapshot_type(void)</div><div class="ttdoc">Message type for ast_channel_snapshot_update. </div></div>
<div class="ttc" id="cdr_8c_html_a157ceac21c95d305d1c3d739da9b15f9"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a157ceac21c95d305d1c3d739da9b15f9">handle_parked_call_message</a></div><div class="ttdeci">static void handle_parked_call_message(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdoc">Handler for when a channel is parked. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02751">cdr.c:2751</a></div></div>
<div class="ttc" id="cdr_8c_html_a2812e34e2a42693cf02793d873f9c577"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a2812e34e2a42693cf02793d873f9c577">cdr_all_print_fn</a></div><div class="ttdeci">static void cdr_all_print_fn(void *v_obj, void *where, ao2_prnt_fn *prnt)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l04472">cdr.c:4472</a></div></div>
<div class="ttc" id="cdr_8c_html_abb1aee82330e86d734034f092559cc69"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_all</div><div class="ttdoc">A container of all active CDRs with a Party B indexed by Party B channel name. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00368">cdr.c:368</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaf2f12b95a707aaa2e0b9a5840686b081"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaf2f12b95a707aaa2e0b9a5840686b081">ast_channel_dial_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_dial_type(void)</div><div class="ttdoc">Message type for when a channel dials another channel. </div></div>
<div class="ttc" id="stasis__message__router_8h_html_a1570c21a07d1309809ae61c723f28a1d"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a1570c21a07d1309809ae61c723f28a1d">stasis_message_router_set_congestion_limits</a></div><div class="ttdeci">int stasis_message_router_set_congestion_limits(struct stasis_message_router *router, long low_water, long high_water)</div><div class="ttdoc">Set the high and low alert water marks of the stasis message router. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00298">stasis_message_router.c:298</a></div></div>
<div class="ttc" id="cdr_8c_html_aa06976cdf68174771e4bd9c77b0360eb"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aa06976cdf68174771e4bd9c77b0360eb">cdr_master_print_fn</a></div><div class="ttdeci">static void cdr_master_print_fn(void *v_obj, void *where, ao2_prnt_fn *prnt)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l04445">cdr.c:4445</a></div></div>
<div class="ttc" id="cdr_8c_html_a78b801aab49f4431cf358176c793eae7"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a78b801aab49f4431cf358176c793eae7">handle_cdr_sync_message</a></div><div class="ttdeci">static void handle_cdr_sync_message(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdoc">Handler for a synchronization message. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02820">cdr.c:2820</a></div></div>
<div class="ttc" id="cdr_8c_html_a77dc1728a978dd5a7d045800200be4cc"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a77dc1728a978dd5a7d045800200be4cc">cdr_toggle_runtime_options</a></div><div class="ttdeci">static int cdr_toggle_runtime_options(void)</div><div class="ttdoc">Checks if CDRs are enabled and enables/disables the necessary options. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l04488">cdr.c:4488</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae006c692706bf9b5e8a21e8140382c75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae006c692706bf9b5e8a21e8140382c75">&#9670;&nbsp;</a></span>module_config_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void * module_config_alloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new module config object. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00300">300</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d7/d83/cdr__radius_8c_source.html#l00086">cdr_config</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00223">module_config::general</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00289">module_config_destructor()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04340">process_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;{</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d57/structmodule__config.html">module_config</a> *mod_cfg;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a> *<a class="code" href="../../d7/d83/cdr__radius_8c.html#a067c7b5b9f5fc89b0c9721948c97b0fe">cdr_config</a>;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   mod_cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*mod_cfg), <a class="code" href="../../dc/df2/cdr_8c.html#a6d56b64dd166535b3583ce24f3943e8c">module_config_destructor</a>);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   <span class="keywordflow">if</span> (!mod_cfg) {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   cdr_config = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*cdr_config), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   <span class="keywordflow">if</span> (!cdr_config) {</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cdr_config, -1);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a> = <a class="code" href="../../d7/d83/cdr__radius_8c.html#a067c7b5b9f5fc89b0c9721948c97b0fe">cdr_config</a>;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <span class="keywordflow">return</span> mod_cfg;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr__radius_8c_html_a067c7b5b9f5fc89b0c9721948c97b0fe"><div class="ttname"><a href="../../d7/d83/cdr__radius_8c.html#a067c7b5b9f5fc89b0c9721948c97b0fe">cdr_config</a></div><div class="ttdeci">static const char cdr_config[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d83/cdr__radius_8c_source.html#l00086">cdr_radius.c:86</a></div></div>
<div class="ttc" id="cdr_8c_html_a6d56b64dd166535b3583ce24f3943e8c"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a6d56b64dd166535b3583ce24f3943e8c">module_config_destructor</a></div><div class="ttdeci">static void module_config_destructor(void *obj)</div><div class="ttdoc">Dispose of a module config object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00289">cdr.c:289</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structmodule__config_html"><div class="ttname"><a href="../../db/d57/structmodule__config.html">module_config</a></div><div class="ttdoc">The configuration settings for this module. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00222">cdr.c:222</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="structast__cdr__config_html"><div class="ttname"><a href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a></div><div class="ttdoc">The global options available for CDRs. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00264">cdr.h:264</a></div></div>
<div class="ttc" id="structmodule__config_html_a95699733ba47a55e25760adf5c51e59a"><div class="ttname"><a href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">module_config::general</a></div><div class="ttdeci">struct ast_cdr_config * general</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00223">cdr.c:223</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6d56b64dd166535b3583ce24f3943e8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d56b64dd166535b3583ce24f3943e8c">&#9670;&nbsp;</a></span>module_config_destructor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void module_config_destructor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Dispose of a module config object. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00289">289</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00223">module_config::general</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l00300">module_config_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;{</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d57/structmodule__config.html">module_config</a> *cfg = obj;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   <span class="keywordflow">if</span> (!cfg) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   }</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>, -1);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structmodule__config_html"><div class="ttname"><a href="../../db/d57/structmodule__config.html">module_config</a></div><div class="ttdoc">The configuration settings for this module. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00222">cdr.c:222</a></div></div>
<div class="ttc" id="structmodule__config_html_a95699733ba47a55e25760adf5c51e59a"><div class="ttname"><a href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">module_config::general</a></div><div class="ttdeci">struct ast_cdr_config * general</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00223">cdr.c:223</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae8a3bad648f2a5bdc92e536ecd7d9484"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8a3bad648f2a5bdc92e536ecd7d9484">&#9670;&nbsp;</a></span>module_config_post_apply()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void module_config_post_apply </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00276">276</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00203">cdr_set_debug_mode</a>.</p>
<div class="fragment"><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;{</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d57/structmodule__config.html">module_config</a> *mod_cfg;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;   mod_cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(module_configs);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;   <span class="keywordflow">if</span> (!mod_cfg) {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a64c2a67abebb54e4d8defda57e4e9206">cdr_set_debug_mode</a>(mod_cfg);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(mod_cfg);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a64c2a67abebb54e4d8defda57e4e9206"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a64c2a67abebb54e4d8defda57e4e9206">cdr_set_debug_mode</a></div><div class="ttdeci">#define cdr_set_debug_mode(mod_cfg)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00203">cdr.c:203</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="structmodule__config_html"><div class="ttname"><a href="../../db/d57/structmodule__config.html">module_config</a></div><div class="ttdoc">The configuration settings for this module. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00222">cdr.c:222</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae54741fa2db63f0cdfa96d25e40ec20a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae54741fa2db63f0cdfa96d25e40ec20a">&#9670;&nbsp;</a></span>parked_state_process_bridge_leave()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int parked_state_process_bridge_leave </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02032">2032</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00821">cdr_object_transition_state()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>.</p>
<div class="fragment"><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;{</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;   <span class="keywordflow">if</span> (strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, channel-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>)) {</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;   }</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a>(cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a>);</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f50dd95a426c8a70710afc315164f04"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table finalized_state_fn_table</div><div class="ttdoc">The virtual table for the finalized state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00694">cdr.c:694</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="cdr_8c_html_aec9ada03f8f99aa4c972b141bcbd2ee3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a></div><div class="ttdeci">static void cdr_object_transition_state(struct cdr_object *cdr, struct cdr_object_fn_table *fn_table)</div><div class="ttdoc">Transition a cdr_object to a new state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00821">cdr.c:821</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad01956d63583675f04baf543336b7c94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad01956d63583675f04baf543336b7c94">&#9670;&nbsp;</a></span>post_cdr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void post_cdr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *&#160;</td>
          <td class="paramname"><em>cdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03508">3508</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00258">AST_CDR_ANSWERED</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00241">AST_CDR_FLAG_DISABLE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00324">cdr_beitem::be</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00222">CDR_UNANSWERED</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00286">ast_cdr::channel</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00304">ast_cdr::disposition</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00288">ast_cdr::dstchannel</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00223">module_config::general</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00325">ast_cdr::next</a>, and <a class="el" href="../../dc/d07/cdr_8h_source.html#l00265">ast_cdr_config::settings</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03841">cdr_detach()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03749">do_batch_backend_process()</a>.</p>
<div class="fragment"><div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;{</div><div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d57/structmodule__config.html">module_config</a> *mod_cfg;</div><div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dc6/structcdr__beitem.html">cdr_beitem</a> *i;</div><div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;</div><div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;   mod_cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(module_configs);</div><div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;   <span class="keywordflow">if</span> (!mod_cfg) {</div><div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;   }</div><div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;</div><div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;   <span class="keywordflow">for</span> (; cdr ; cdr = cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a8098d02138e27b57d184b260b6669eed">next</a>) {</div><div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;      <span class="comment">/* For people, who don&#39;t want to see unanswered single-channel events */</span></div><div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba06d830667dc08cfba477152a01a6a6f1">CDR_UNANSWERED</a>) &amp;&amp;</div><div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;            cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a1f9669e5d9d64aa831cd9db2dd71534f">disposition</a> &lt; <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ac3e47d059a0e67a03f822f10bb7ec5b1">AST_CDR_ANSWERED</a> &amp;&amp;</div><div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;            (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a6396dbd53fd6fedc1fc3ba2743f00eca">channel</a>) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a0d43f7cac6179c7c4f9521f3138195b4">dstchannel</a>))) {</div><div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Skipping CDR for %s since we weren&#39;t answered\n&quot;</span>, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a6396dbd53fd6fedc1fc3ba2743f00eca">channel</a>);</div><div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;      }</div><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;</div><div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;      <span class="comment">/* Modify CDR&#39;s */</span></div><div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d6/d3d/structmo__list.html">mo_list</a>);</div><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d6/d3d/structmo__list.html">mo_list</a>, i, list) {</div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;         i-&gt;<a class="code" href="../../dc/dc6/structcdr__beitem.html#ac91a6afe8445130d877f8c6a175138de">be</a>(cdr);</div><div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;      }</div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d6/d3d/structmo__list.html">mo_list</a>);</div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;</div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(cdr, <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a78488053ee0f7af6d41ab8a65ecddce2">AST_CDR_FLAG_DISABLE</a>)) {</div><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;      }</div><div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d5/d08/structbe__list.html">be_list</a>);</div><div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d08/structbe__list.html">be_list</a>, i, list) {</div><div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;         <span class="keywordflow">if</span> (!i-&gt;suspended) {</div><div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;            i-&gt;<a class="code" href="../../dc/dc6/structcdr__beitem.html#ac91a6afe8445130d877f8c6a175138de">be</a>(cdr);</div><div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;         }</div><div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;      }</div><div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d08/structbe__list.html">be_list</a>);</div><div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;   }</div><div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(mod_cfg);</div><div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;}</div><div class="ttc" id="structast__cdr_html_a0d43f7cac6179c7c4f9521f3138195b4"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a0d43f7cac6179c7c4f9521f3138195b4">ast_cdr::dstchannel</a></div><div class="ttdeci">char dstchannel[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00288">cdr.h:288</a></div></div>
<div class="ttc" id="structast__cdr__config_html_a64ee0bd247c901e7af2f871b4ef7ad71"><div class="ttname"><a href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">ast_cdr_config::settings</a></div><div class="ttdeci">struct ast_flags settings</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00265">cdr.h:265</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="structast__cdr_html_a8098d02138e27b57d184b260b6669eed"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a8098d02138e27b57d184b260b6669eed">ast_cdr::next</a></div><div class="ttdeci">struct ast_cdr * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00325">cdr.h:325</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0ac3e47d059a0e67a03f822f10bb7ec5b1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ac3e47d059a0e67a03f822f10bb7ec5b1">AST_CDR_ANSWERED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00258">cdr.h:258</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37a78488053ee0f7af6d41ab8a65ecddce2"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a78488053ee0f7af6d41ab8a65ecddce2">AST_CDR_FLAG_DISABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00241">cdr.h:241</a></div></div>
<div class="ttc" id="structcdr__beitem_html"><div class="ttname"><a href="../../dc/dc6/structcdr__beitem.html">cdr_beitem</a></div><div class="ttdoc">Registration object for CDR backends. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00321">cdr.c:321</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structmodule__config_html"><div class="ttname"><a href="../../db/d57/structmodule__config.html">module_config</a></div><div class="ttdoc">The configuration settings for this module. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00222">cdr.c:222</a></div></div>
<div class="ttc" id="structast__cdr_html_a6396dbd53fd6fedc1fc3ba2743f00eca"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a6396dbd53fd6fedc1fc3ba2743f00eca">ast_cdr::channel</a></div><div class="ttdeci">char channel[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00286">cdr.h:286</a></div></div>
<div class="ttc" id="structmo__list_html"><div class="ttname"><a href="../../d6/d3d/structmo__list.html">mo_list</a></div><div class="ttdoc">List of registered modifiers. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00333">cdr.c:333</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba06d830667dc08cfba477152a01a6a6f1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba06d830667dc08cfba477152a01a6a6f1">CDR_UNANSWERED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00222">cdr.h:222</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structcdr__beitem_html_ac91a6afe8445130d877f8c6a175138de"><div class="ttname"><a href="../../dc/dc6/structcdr__beitem.html#ac91a6afe8445130d877f8c6a175138de">cdr_beitem::be</a></div><div class="ttdeci">ast_cdrbe be</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00324">cdr.c:324</a></div></div>
<div class="ttc" id="structast__cdr_html_a1f9669e5d9d64aa831cd9db2dd71534f"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a1f9669e5d9d64aa831cd9db2dd71534f">ast_cdr::disposition</a></div><div class="ttdeci">long int disposition</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00304">cdr.h:304</a></div></div>
<div class="ttc" id="structmodule__config_html_a95699733ba47a55e25760adf5c51e59a"><div class="ttname"><a href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">module_config::general</a></div><div class="ttdeci">struct ast_cdr_config * general</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00223">cdr.c:223</a></div></div>
<div class="ttc" id="structbe__list_html"><div class="ttname"><a href="../../d5/d08/structbe__list.html">be_list</a></div><div class="ttdoc">List of registered backends. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00330">cdr.c:330</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a23c29a0c6da3b09b04d3f801bd44673e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23c29a0c6da3b09b04d3f801bd44673e">&#9670;&nbsp;</a></span>process_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int process_config </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reload</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04340">4340</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/dfe/config__options_8h_source.html#l00064">ACO_EXACT</a>, <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00877">aco_info_init()</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00623">aco_option_register</a>, <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00652">aco_process_config()</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00527">ACO_PROCESS_ERROR</a>, <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00924">aco_set_defaults()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00908">ao2_global_obj_replace_unref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00232">BATCH_MODE_SAFE_SHUTDOWN</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00231">BATCH_MODE_SCHEDULER_ONLY</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00221">CDR_BATCHMODE</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00223">CDR_CONGESTION</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00210">CDR_DEBUG</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00220">CDR_ENABLED</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00224">CDR_END_BEFORE_H_EXTEN</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00225">CDR_INITIATED_SECONDS</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00203">cdr_set_debug_mode</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00222">CDR_UNANSWERED</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00201">DEFAULT_BATCH_SAFE_SHUTDOWN</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00200">DEFAULT_BATCH_SCHEDULER_ONLY</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00196">DEFAULT_BATCH_SIZE</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00198">DEFAULT_BATCH_TIME</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00190">DEFAULT_BATCHMODE</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00189">DEFAULT_ENABLED</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00193">DEFAULT_END_BEFORE_H_EXTEN</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00194">DEFAULT_INITIATED_SECONDS</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00191">DEFAULT_UNANSWERED</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00816">FLDSET</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00223">module_config::general</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00197">MAX_BATCH_SIZE</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00199">MAX_BATCH_TIME</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00300">module_config_alloc()</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00313">OPT_BOOLFLAG_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00459">OPT_UINT_T</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01125">PARSE_IN_RANGE</a>, <a class="el" href="../../d0/d2a/cdr__tds_8c_source.html#l00098">settings</a>, and <a class="el" href="../../dc/d07/cdr_8h_source.html#l00265">ast_cdr_config::settings</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04522">load_module()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l04617">reload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;{</div><div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d29/cdr__mysql_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a>) {</div><div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/dfe/config__options_8h.html#a3f40a7cffea07c21a21faaee64d24398">aco_info_init</a>(&amp;cfg_info)) {</div><div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;      }</div><div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;</div><div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;      <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;enable&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a8e03f6233c516c1beb21b5b9285ed69f">general_options</a>, <a class="code" href="../../dc/df2/cdr_8c.html#adf8ded95b0a2e24134fa5eed072bd8db">DEFAULT_ENABLED</a>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765">OPT_BOOLFLAG_T</a>, 1, <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a>, <a class="code" href="../../d0/d2a/cdr__tds_8c.html#a91b05f64c331db1c35c98a7810b86876">settings</a>), <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a>);</div><div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;      <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;debug&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a8e03f6233c516c1beb21b5b9285ed69f">general_options</a>, 0, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765">OPT_BOOLFLAG_T</a>, 1, <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a>, <a class="code" href="../../d0/d2a/cdr__tds_8c.html#a91b05f64c331db1c35c98a7810b86876">settings</a>), <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>);</div><div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;      <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;unanswered&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a8e03f6233c516c1beb21b5b9285ed69f">general_options</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a55dd918534b04e187255e12bf5e5f777">DEFAULT_UNANSWERED</a>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765">OPT_BOOLFLAG_T</a>, 1, <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a>, <a class="code" href="../../d0/d2a/cdr__tds_8c.html#a91b05f64c331db1c35c98a7810b86876">settings</a>), <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba06d830667dc08cfba477152a01a6a6f1">CDR_UNANSWERED</a>);</div><div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;      <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;congestion&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a8e03f6233c516c1beb21b5b9285ed69f">general_options</a>, 0, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765">OPT_BOOLFLAG_T</a>, 1, <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a>, <a class="code" href="../../d0/d2a/cdr__tds_8c.html#a91b05f64c331db1c35c98a7810b86876">settings</a>), <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11bac7e09eacc1390ca5ae2adf3f8cb7f487">CDR_CONGESTION</a>);</div><div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;      <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;batch&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a8e03f6233c516c1beb21b5b9285ed69f">general_options</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a309d01905cce8329cb8b36e6dbe32c8f">DEFAULT_BATCHMODE</a>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765">OPT_BOOLFLAG_T</a>, 1, <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a>, <a class="code" href="../../d0/d2a/cdr__tds_8c.html#a91b05f64c331db1c35c98a7810b86876">settings</a>), <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492">CDR_BATCHMODE</a>);</div><div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;      <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;endbeforehexten&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a8e03f6233c516c1beb21b5b9285ed69f">general_options</a>, <a class="code" href="../../dc/df2/cdr_8c.html#aea4f7938cad0fcc78ffa4870723afdb7">DEFAULT_END_BEFORE_H_EXTEN</a>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765">OPT_BOOLFLAG_T</a>, 1, <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a>, <a class="code" href="../../d0/d2a/cdr__tds_8c.html#a91b05f64c331db1c35c98a7810b86876">settings</a>), <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba951b6a2ed4e5418e5e7bdab6f37061a1">CDR_END_BEFORE_H_EXTEN</a>);</div><div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;      <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;initiatedseconds&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a8e03f6233c516c1beb21b5b9285ed69f">general_options</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a9f8c393359ffd1043afb3462ceee07b7">DEFAULT_INITIATED_SECONDS</a>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765">OPT_BOOLFLAG_T</a>, 1, <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a>, <a class="code" href="../../d0/d2a/cdr__tds_8c.html#a91b05f64c331db1c35c98a7810b86876">settings</a>), <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba33f9a78176524d40c46cb4fd28440ffd">CDR_INITIATED_SECONDS</a>);</div><div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;      <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;scheduleronly&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a8e03f6233c516c1beb21b5b9285ed69f">general_options</a>, <a class="code" href="../../dc/df2/cdr_8c.html#ad6686f1af7beb39a27b62183cc28ffca">DEFAULT_BATCH_SCHEDULER_ONLY</a>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765">OPT_BOOLFLAG_T</a>, 1, <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a>, batch_settings.<a class="code" href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>), <a class="code" href="../../dc/d07/cdr_8h.html#a3142c0762d64e330ffe9f2ebe8976652a7f4f25540ae06946d3941e275bed8472">BATCH_MODE_SCHEDULER_ONLY</a>);</div><div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;      <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;safeshutdown&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a8e03f6233c516c1beb21b5b9285ed69f">general_options</a>, <a class="code" href="../../dc/df2/cdr_8c.html#ac08eabc66e6d2ae4fe32d1393d745acf">DEFAULT_BATCH_SAFE_SHUTDOWN</a>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765">OPT_BOOLFLAG_T</a>, 1, <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a>, batch_settings.<a class="code" href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>), <a class="code" href="../../dc/d07/cdr_8h.html#a3142c0762d64e330ffe9f2ebe8976652a2d351981e14dab32c9749dbdd87de33c">BATCH_MODE_SAFE_SHUTDOWN</a>);</div><div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;      <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;size&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a8e03f6233c516c1beb21b5b9285ed69f">general_options</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a123fa013ecd2c91686ad58c0b8d985b3">DEFAULT_BATCH_SIZE</a>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f">OPT_UINT_T</a>, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa37848843c0c65e9ce998148c2f16d585">PARSE_IN_RANGE</a>, <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a>, batch_settings.size), 0, <a class="code" href="../../dc/df2/cdr_8c.html#a18373cd65e0761a3bd4e760a8e015baa">MAX_BATCH_SIZE</a>);</div><div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;      <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;time&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a8e03f6233c516c1beb21b5b9285ed69f">general_options</a>, <a class="code" href="../../dc/df2/cdr_8c.html#ac1e44ecfc38cdda9d76e6976c11b0f6b">DEFAULT_BATCH_TIME</a>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f">OPT_UINT_T</a>, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa37848843c0c65e9ce998148c2f16d585">PARSE_IN_RANGE</a>, <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a>, batch_settings.time), 1, <a class="code" href="../../dc/df2/cdr_8c.html#a5d10e69bcfc7ad99f2b0d4256715aae2">MAX_BATCH_TIME</a>);</div><div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;   }</div><div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;</div><div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/dfe/config__options_8h.html#af28935f8c2547723d5922ebed1c71898">aco_process_config</a>(&amp;cfg_info, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a>) == <a class="code" href="../../db/dfe/config__options_8h.html#a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792">ACO_PROCESS_ERROR</a>) {</div><div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../db/d57/structmodule__config.html">module_config</a> *mod_cfg;</div><div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;</div><div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d29/cdr__mysql_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a>) {</div><div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;      }</div><div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;</div><div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;      <span class="comment">/* If we couldn&#39;t process the configuration and this wasn&#39;t a reload,</span></div><div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;<span class="comment">       * create a default config</span></div><div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;      mod_cfg = <a class="code" href="../../dc/df2/cdr_8c.html#ae006c692706bf9b5e8a21e8140382c75">module_config_alloc</a>();</div><div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;      <span class="keywordflow">if</span> (!mod_cfg</div><div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;         || <a class="code" href="../../db/dfe/config__options_8h.html#a206bf60e38d1114efdeeabc35b7eaa69">aco_set_defaults</a>(&amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5be5fa967836c0f0c98763deaff227b7">general_option</a>, <span class="stringliteral">&quot;general&quot;</span>, mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>)) {</div><div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(mod_cfg);</div><div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;      }</div><div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Failed to process CDR configuration; using defaults\n&quot;</span>);</div><div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a3a11e1a1d3e99bed3ea0a7c57a3880d7">ao2_global_obj_replace_unref</a>(module_configs, mod_cfg);</div><div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a64c2a67abebb54e4d8defda57e4e9206">cdr_set_debug_mode</a>(mod_cfg);</div><div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(mod_cfg);</div><div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;   }</div><div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;</div><div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a18373cd65e0761a3bd4e760a8e015baa"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a18373cd65e0761a3bd4e760a8e015baa">MAX_BATCH_SIZE</a></div><div class="ttdeci">#define MAX_BATCH_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00197">cdr.c:197</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba951b6a2ed4e5418e5e7bdab6f37061a1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba951b6a2ed4e5418e5e7bdab6f37061a1">CDR_END_BEFORE_H_EXTEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00224">cdr.h:224</a></div></div>
<div class="ttc" id="cdr_8c_html_ae006c692706bf9b5e8a21e8140382c75"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ae006c692706bf9b5e8a21e8140382c75">module_config_alloc</a></div><div class="ttdeci">static void * module_config_alloc(void)</div><div class="ttdoc">Create a new module config object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00300">cdr.c:300</a></div></div>
<div class="ttc" id="config__options_8h_html_a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00064">config_options.h:64</a></div></div>
<div class="ttc" id="cdr_8h_html_a3142c0762d64e330ffe9f2ebe8976652a2d351981e14dab32c9749dbdd87de33c"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a3142c0762d64e330ffe9f2ebe8976652a2d351981e14dab32c9749dbdd87de33c">BATCH_MODE_SAFE_SHUTDOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00232">cdr.h:232</a></div></div>
<div class="ttc" id="cdr_8c_html_a64c2a67abebb54e4d8defda57e4e9206"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a64c2a67abebb54e4d8defda57e4e9206">cdr_set_debug_mode</a></div><div class="ttdeci">#define cdr_set_debug_mode(mod_cfg)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00203">cdr.c:203</a></div></div>
<div class="ttc" id="structast__cdr__config_html_a64ee0bd247c901e7af2f871b4ef7ad71"><div class="ttname"><a href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">ast_cdr_config::settings</a></div><div class="ttdeci">struct ast_flags settings</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00265">cdr.h:265</a></div></div>
<div class="ttc" id="config__options_8h_html_a60d17d3e9451ddcb5aa861339c757bed"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a></div><div class="ttdeci">#define aco_option_register(info, name, matchtype, types, default_val, opt_type, flags,...)</div><div class="ttdoc">Register a config option. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00623">config_options.h:623</a></div></div>
<div class="ttc" id="cdr_8c_html_a123fa013ecd2c91686ad58c0b8d985b3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a123fa013ecd2c91686ad58c0b8d985b3">DEFAULT_BATCH_SIZE</a></div><div class="ttdeci">#define DEFAULT_BATCH_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00196">cdr.c:196</a></div></div>
<div class="ttc" id="cdr_8c_html_ac1e44ecfc38cdda9d76e6976c11b0f6b"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ac1e44ecfc38cdda9d76e6976c11b0f6b">DEFAULT_BATCH_TIME</a></div><div class="ttdeci">#define DEFAULT_BATCH_TIME</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00198">cdr.c:198</a></div></div>
<div class="ttc" id="config__options_8h_html_af28935f8c2547723d5922ebed1c71898"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#af28935f8c2547723d5922ebed1c71898">aco_process_config</a></div><div class="ttdeci">enum aco_process_status aco_process_config(struct aco_info *info, int reload)</div><div class="ttdoc">Process a config info via the options registered with an aco_info. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00652">config_options.c:652</a></div></div>
<div class="ttc" id="cdr_8c_html_adf8ded95b0a2e24134fa5eed072bd8db"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#adf8ded95b0a2e24134fa5eed072bd8db">DEFAULT_ENABLED</a></div><div class="ttdeci">#define DEFAULT_ENABLED</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00189">cdr.c:189</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765">OPT_BOOLFLAG_T</a></div><div class="ttdoc">Type for default option handler for bools (ast_true/ast_false) that are stored in a flag...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00313">config_options.h:313</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492">CDR_BATCHMODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00221">cdr.h:221</a></div></div>
<div class="ttc" id="cdr_8c_html_ac08eabc66e6d2ae4fe32d1393d745acf"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ac08eabc66e6d2ae4fe32d1393d745acf">DEFAULT_BATCH_SAFE_SHUTDOWN</a></div><div class="ttdeci">#define DEFAULT_BATCH_SAFE_SHUTDOWN</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00201">cdr.c:201</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba33f9a78176524d40c46cb4fd28440ffd"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba33f9a78176524d40c46cb4fd28440ffd">CDR_INITIATED_SECONDS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00225">cdr.h:225</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="cdr_8h_html_a3142c0762d64e330ffe9f2ebe8976652a7f4f25540ae06946d3941e275bed8472"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a3142c0762d64e330ffe9f2ebe8976652a7f4f25540ae06946d3941e275bed8472">BATCH_MODE_SCHEDULER_ONLY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00231">cdr.h:231</a></div></div>
<div class="ttc" id="config__options_8h_html_a5793d5d6ccf2df0b2423eb3274af7802"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a></div><div class="ttdeci">#define FLDSET(type,...)</div><div class="ttdoc">Convert a struct and list of fields to an argument list of field offsets. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00816">config_options.h:816</a></div></div>
<div class="ttc" id="cdr_8c_html_a8052195443a9cb5835d7d2b3ab7279aa"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a></div><div class="ttdeci">#define CDR_DEBUG(fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00210">cdr.c:210</a></div></div>
<div class="ttc" id="config__options_8h_html_a3f40a7cffea07c21a21faaee64d24398"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a3f40a7cffea07c21a21faaee64d24398">aco_info_init</a></div><div class="ttdeci">int aco_info_init(struct aco_info *info)</div><div class="ttdoc">Initialize an aco_info structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00877">config_options.c:877</a></div></div>
<div class="ttc" id="cdr_8c_html_a55dd918534b04e187255e12bf5e5f777"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a55dd918534b04e187255e12bf5e5f777">DEFAULT_UNANSWERED</a></div><div class="ttdeci">#define DEFAULT_UNANSWERED</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00191">cdr.c:191</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f">OPT_UINT_T</a></div><div class="ttdoc">Type for default option handler for unsigned integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00459">config_options.h:459</a></div></div>
<div class="ttc" id="cdr_8c_html_aea4f7938cad0fcc78ffa4870723afdb7"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aea4f7938cad0fcc78ffa4870723afdb7">DEFAULT_END_BEFORE_H_EXTEN</a></div><div class="ttdeci">#define DEFAULT_END_BEFORE_H_EXTEN</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00193">cdr.c:193</a></div></div>
<div class="ttc" id="structmodule__config_html"><div class="ttname"><a href="../../db/d57/structmodule__config.html">module_config</a></div><div class="ttdoc">The configuration settings for this module. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00222">cdr.c:222</a></div></div>
<div class="ttc" id="config__options_8h_html_a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792">ACO_PROCESS_ERROR</a></div><div class="ttdoc">Their was an error and no changes were applied. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00527">config_options.h:527</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569fa37848843c0c65e9ce998148c2f16d585"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa37848843c0c65e9ce998148c2f16d585">PARSE_IN_RANGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01125">include/asterisk/config.h:1125</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11bac7e09eacc1390ca5ae2adf3f8cb7f487"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11bac7e09eacc1390ca5ae2adf3f8cb7f487">CDR_CONGESTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00223">cdr.h:223</a></div></div>
<div class="ttc" id="cdr_8c_html_a8e03f6233c516c1beb21b5b9285ed69f"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8e03f6233c516c1beb21b5b9285ed69f">general_options</a></div><div class="ttdeci">static struct aco_type * general_options[]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00274">cdr.c:274</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_ad1982509765f4870f1f63412a53ea668"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a></div><div class="ttdeci">static int reload(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00741">cdr_mysql.c:741</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00220">cdr.h:220</a></div></div>
<div class="ttc" id="config__options_8h_html_a206bf60e38d1114efdeeabc35b7eaa69"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a206bf60e38d1114efdeeabc35b7eaa69">aco_set_defaults</a></div><div class="ttdeci">int aco_set_defaults(struct aco_type *type, const char *category, void *obj)</div><div class="ttdoc">Set all default options of obj. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00924">config_options.c:924</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba06d830667dc08cfba477152a01a6a6f1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba06d830667dc08cfba477152a01a6a6f1">CDR_UNANSWERED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00222">cdr.h:222</a></div></div>
<div class="ttc" id="astobj2_8h_html_a3a11e1a1d3e99bed3ea0a7c57a3880d7"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a3a11e1a1d3e99bed3ea0a7c57a3880d7">ao2_global_obj_replace_unref</a></div><div class="ttdeci">#define ao2_global_obj_replace_unref(holder, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00908">astobj2.h:908</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="cdr_8c_html_a5be5fa967836c0f0c98763deaff227b7"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5be5fa967836c0f0c98763deaff227b7">general_option</a></div><div class="ttdeci">static struct aco_type general_option</div><div class="ttdoc">The type definition for general options. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00230">cdr.c:230</a></div></div>
<div class="ttc" id="cdr_8c_html_a309d01905cce8329cb8b36e6dbe32c8f"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a309d01905cce8329cb8b36e6dbe32c8f">DEFAULT_BATCHMODE</a></div><div class="ttdeci">#define DEFAULT_BATCHMODE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00190">cdr.c:190</a></div></div>
<div class="ttc" id="structast__cdr__config_html"><div class="ttname"><a href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a></div><div class="ttdoc">The global options available for CDRs. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00264">cdr.h:264</a></div></div>
<div class="ttc" id="structmodule__config_html_a95699733ba47a55e25760adf5c51e59a"><div class="ttname"><a href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">module_config::general</a></div><div class="ttdeci">struct ast_cdr_config * general</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00223">cdr.c:223</a></div></div>
<div class="ttc" id="cdr__tds_8c_html_a91b05f64c331db1c35c98a7810b86876"><div class="ttname"><a href="../../d0/d2a/cdr__tds_8c.html#a91b05f64c331db1c35c98a7810b86876">settings</a></div><div class="ttdeci">static struct cdr_tds_config * settings</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2a/cdr__tds_8c_source.html#l00098">cdr_tds.c:98</a></div></div>
<div class="ttc" id="cdr_8c_html_ad6686f1af7beb39a27b62183cc28ffca"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ad6686f1af7beb39a27b62183cc28ffca">DEFAULT_BATCH_SCHEDULER_ONLY</a></div><div class="ttdeci">#define DEFAULT_BATCH_SCHEDULER_ONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00200">cdr.c:200</a></div></div>
<div class="ttc" id="cdr_8c_html_a9f8c393359ffd1043afb3462ceee07b7"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a9f8c393359ffd1043afb3462ceee07b7">DEFAULT_INITIATED_SECONDS</a></div><div class="ttdeci">#define DEFAULT_INITIATED_SECONDS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00194">cdr.c:194</a></div></div>
<div class="ttc" id="cdr_8c_html_a5d10e69bcfc7ad99f2b0d4256715aae2"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5d10e69bcfc7ad99f2b0d4256715aae2">MAX_BATCH_TIME</a></div><div class="ttdeci">#define MAX_BATCH_TIME</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00199">cdr.c:199</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7c6ac25ea7536c0bc9ed18cbcf917527"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c6ac25ea7536c0bc9ed18cbcf917527">&#9670;&nbsp;</a></span>reload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int reload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04617">4617</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00316">AST_MODFLAG_GLOBAL_SYMBOLS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00317">AST_MODFLAG_LOAD_ORDER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00324">AST_MODPRI_CORE</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00121">AST_MODULE_SUPPORT_CORE</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00221">CDR_BATCHMODE</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00220">CDR_ENABLED</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04488">cdr_toggle_runtime_options()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04277">finalize_batch_mode()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00223">module_config::general</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04522">load_module()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04340">process_config()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00741">reload()</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00265">ast_cdr_config::settings</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l04515">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;{</div><div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d57/structmodule__config.html">module_config</a> *old_mod_cfg;</div><div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d57/structmodule__config.html">module_config</a> *mod_cfg;</div><div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;</div><div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;   old_mod_cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(module_configs);</div><div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;</div><div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;   <span class="keywordflow">if</span> (!old_mod_cfg || <a class="code" href="../../dc/df2/cdr_8c.html#a23c29a0c6da3b09b04d3f801bd44673e">process_config</a>(1)) {</div><div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(old_mod_cfg);</div><div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;   }</div><div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;</div><div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;   mod_cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(module_configs);</div><div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;   <span class="keywordflow">if</span> (!mod_cfg</div><div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;      || !<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a>)</div><div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;      || !<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492">CDR_BATCHMODE</a>)) {</div><div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;      <span class="comment">/* If batch mode used to be enabled, finalize the batch */</span></div><div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;old_mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">settings</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492">CDR_BATCHMODE</a>)) {</div><div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#a7f4d8e5786e103b3762e0d9680773a2c">finalize_batch_mode</a>();</div><div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;      }</div><div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;   }</div><div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(mod_cfg);</div><div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;</div><div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(old_mod_cfg);</div><div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/cdr_8c.html#a77dc1728a978dd5a7d045800200be4cc">cdr_toggle_runtime_options</a>();</div><div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;}</div><div class="ttc" id="structast__cdr__config_html_a64ee0bd247c901e7af2f871b4ef7ad71"><div class="ttname"><a href="../../d4/d69/structast__cdr__config.html#a64ee0bd247c901e7af2f871b4ef7ad71">ast_cdr_config::settings</a></div><div class="ttdeci">struct ast_flags settings</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00265">cdr.h:265</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492">CDR_BATCHMODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00221">cdr.h:221</a></div></div>
<div class="ttc" id="cdr_8c_html_a23c29a0c6da3b09b04d3f801bd44673e"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a23c29a0c6da3b09b04d3f801bd44673e">process_config</a></div><div class="ttdeci">static int process_config(int reload)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l04340">cdr.c:4340</a></div></div>
<div class="ttc" id="structmodule__config_html"><div class="ttname"><a href="../../db/d57/structmodule__config.html">module_config</a></div><div class="ttdoc">The configuration settings for this module. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00222">cdr.c:222</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00220">cdr.h:220</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structmodule__config_html_a95699733ba47a55e25760adf5c51e59a"><div class="ttname"><a href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">module_config::general</a></div><div class="ttdeci">struct ast_cdr_config * general</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00223">cdr.c:223</a></div></div>
<div class="ttc" id="cdr_8c_html_a77dc1728a978dd5a7d045800200be4cc"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a77dc1728a978dd5a7d045800200be4cc">cdr_toggle_runtime_options</a></div><div class="ttdeci">static int cdr_toggle_runtime_options(void)</div><div class="ttdoc">Checks if CDRs are enabled and enables/disables the necessary options. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l04488">cdr.c:4488</a></div></div>
<div class="ttc" id="cdr_8c_html_a7f4d8e5786e103b3762e0d9680773a2c"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a7f4d8e5786e103b3762e0d9680773a2c">finalize_batch_mode</a></div><div class="ttdeci">static void finalize_batch_mode(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l04277">cdr.c:4277</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0165bd3137a70f31dcbe5fb47b5aee2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0165bd3137a70f31dcbe5fb47b5aee2a">&#9670;&nbsp;</a></span>reset_batch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void reset_batch </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section note"><dt>Note</dt><dd>Don't call without cdr_batch_lock </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03730">3730</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00344">cdr_batch::head</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00343">cdr_batch::size</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00345">cdr_batch::tail</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03766">cdr_submit_batch()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03738">init_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;{</div><div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a>-&gt;<a class="code" href="../../d4/d3a/structcdr__batch.html#a439227feff9d7f55384e8780cfc2eb82">size</a> = 0;</div><div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a>-&gt;<a class="code" href="../../d4/d3a/structcdr__batch.html#aa09bc3bf5bd05c3ae3ca9cdfd905cf67">head</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a>-&gt;<a class="code" href="../../d4/d3a/structcdr__batch.html#ae96b73adf45d9812f3a70da403324a5f">tail</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;}</div><div class="ttc" id="structcdr__batch_html_ae96b73adf45d9812f3a70da403324a5f"><div class="ttname"><a href="../../d4/d3a/structcdr__batch.html#ae96b73adf45d9812f3a70da403324a5f">cdr_batch::tail</a></div><div class="ttdeci">struct cdr_batch_item * tail</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00345">cdr.c:345</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr_8c_html_a3c9a24d791e528330adc76210fb42407"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3c9a24d791e528330adc76210fb42407">batch</a></div><div class="ttdeci">static struct cdr_batch * batch</div></div>
<div class="ttc" id="structcdr__batch_html_aa09bc3bf5bd05c3ae3ca9cdfd905cf67"><div class="ttname"><a href="../../d4/d3a/structcdr__batch.html#aa09bc3bf5bd05c3ae3ca9cdfd905cf67">cdr_batch::head</a></div><div class="ttdeci">struct cdr_batch_item * head</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00344">cdr.c:344</a></div></div>
<div class="ttc" id="structcdr__batch_html_a439227feff9d7f55384e8780cfc2eb82"><div class="ttname"><a href="../../d4/d3a/structcdr__batch.html#a439227feff9d7f55384e8780cfc2eb82">cdr_batch::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00343">cdr.c:343</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a89071964424cbe2e7d79b8682cc452df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89071964424cbe2e7d79b8682cc452df">&#9670;&nbsp;</a></span>set_variable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_variable </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/de6/structvarshead.html">varshead</a> *&#160;</td>
          <td class="paramname"><em>headp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01262">1262</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00710">AST_LIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00556">AST_LIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00528">AST_LIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00614">AST_LIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../d9/de7/chanvars_8h_source.html#l00040">ast_var_assign</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02473">ast_var_delete()</a>, <a class="el" href="../../d9/df9/chanvars_8c_source.html#l00060">ast_var_name()</a>, and <a class="el" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">ast_var_t::entries</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03178">ast_cdr_setvar()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l01506">cdr_object_update_cid()</a>.</p>
<div class="fragment"><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;{</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *newvariable;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(headp, newvariable, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>) {</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d9/de7/chanvars_8h.html#a356a31cd608ec07d3668dcd589be49d8">ast_var_name</a>(newvariable), <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>)) {</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>);</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;         <a class="code" href="../../d9/de7/chanvars_8h.html#ae19fa022349aa0481f982ccced85d7ba">ast_var_delete</a>(newvariable);</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;      }</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;   }</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> &amp;&amp; (newvariable = <a class="code" href="../../d9/de7/chanvars_8h.html#a78deeb18e93b145e9895346cef766577">ast_var_assign</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>))) {</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(headp, newvariable, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>);</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;   }</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;}</div><div class="ttc" id="chanvars_8h_html_a356a31cd608ec07d3668dcd589be49d8"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#a356a31cd608ec07d3668dcd589be49d8">ast_var_name</a></div><div class="ttdeci">const char * ast_var_name(const struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df9/chanvars_8c_source.html#l00060">chanvars.c:60</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a712c04b4493919a7052399cd30ee8fb9"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_END</div><div class="ttdoc">Closes a safe loop traversal block. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00614">linkedlists.h:614</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa8ac496fa9c717d5afb99a02e1e2760c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_LIST_REMOVE_CURRENT(field)</div><div class="ttdoc">Removes the current entry from a list during a traversal. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00556">linkedlists.h:556</a></div></div>
<div class="ttc" id="structast__var__t_html"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html">ast_var_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00028">chanvars.h:28</a></div></div>
<div class="ttc" id="chanvars_8h_html_ae19fa022349aa0481f982ccced85d7ba"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#ae19fa022349aa0481f982ccced85d7ba">ast_var_delete</a></div><div class="ttdeci">void ast_var_delete(struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02473">extconf.c:2473</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa2ded2af046bb513f77056c27c083307"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_LIST_INSERT_HEAD(head, elm, field)</div><div class="ttdoc">Inserts a list entry at the head of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00710">linkedlists.h:710</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structast__var__t_html_a55d5c7988e3164d7310d88c67d97a1db"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">ast_var_t::entries</a></div><div class="ttdeci">struct ast_var_t::@249 entries</div></div>
<div class="ttc" id="chanvars_8h_html_a78deeb18e93b145e9895346cef766577"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#a78deeb18e93b145e9895346cef766577">ast_var_assign</a></div><div class="ttdeci">#define ast_var_assign(name, value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00040">chanvars.h:40</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa5be52067bf16bdc7e56ca19b5ba858d"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_BEGIN(head, var, field)</div><div class="ttdoc">Loops safely over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00528">linkedlists.h:528</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2757a0953447c692fbfff2e4d7f2edd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2757a0953447c692fbfff2e4d7f2edd2">&#9670;&nbsp;</a></span>single_state_bridge_enter_comparison()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int single_state_bridge_enter_comparison </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cand_cdr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle a comparison between our <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> and a <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> already in the bridge while in the Single state. The goal of this is to find a Party B for our CDR. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cdr</td><td>Our <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> in the Single state </td></tr>
    <tr><td class="paramname">cand_cdr</td><td>The <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> already in the Bridge state</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>The cand_cdr had a Party A or Party B that we could use as our Party B </td></tr>
    <tr><td class="paramname">1</td><td>No party in the cand_cdr could be used as our Party B </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01692">1692</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00949">cdr_all_relink()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00210">CDR_DEBUG</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01440">cdr_object_finalize()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01192">cdr_object_pick_party_a()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00791">cdr_object_snapshot_copy()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l01736">single_state_process_bridge_enter()</a>.</p>
<div class="fragment"><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;{</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a> *party_a;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;   <span class="comment">/* Don&#39;t match on ourselves */</span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>)) {</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;   }</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;   <span class="comment">/* Try the candidate CDR&#39;s Party A first */</span></div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;   party_a = <a class="code" href="../../dc/df2/cdr_8c.html#a46fb3c14485f999d7039c7b9fb3f33d9">cdr_object_pick_party_a</a>(&amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>, &amp;cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>);</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(party_a-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>)) {</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>(<span class="stringliteral">&quot;%p - Party A %s has new Party B %s\n&quot;</span>,</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;         cdr, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a9409d6642fce1018ef347f2fcece7eea">cdr_object_snapshot_copy</a>(&amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>, &amp;cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>);</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a9b92f90cd704735201d9c840842bd0bc">cdr_all_relink</a>(cdr);</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;      <span class="keywordflow">if</span> (!cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>) {</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;         <span class="comment">/* We just stole them - finalize their CDR. Note that this won&#39;t</span></div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;<span class="comment">          * transition their state, it just sets the end time and the</span></div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;<span class="comment">          * disposition - if we need to re-activate them later, we can.</span></div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#a34a146403fab13026f6e302c753be741">cdr_object_finalize</a>(cand_cdr);</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;      }</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;   }</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;   <span class="comment">/* Try their Party B, unless it&#39;s us */</span></div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;   <span class="keywordflow">if</span> (!cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a></div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;      || !strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>)) {</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;   }</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;   party_a = <a class="code" href="../../dc/df2/cdr_8c.html#a46fb3c14485f999d7039c7b9fb3f33d9">cdr_object_pick_party_a</a>(&amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>, &amp;cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>);</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(party_a-&gt;<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>)) {</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>(<span class="stringliteral">&quot;%p - Party A %s has new Party B %s\n&quot;</span>,</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;         cdr, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a9409d6642fce1018ef347f2fcece7eea">cdr_object_snapshot_copy</a>(&amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>, &amp;cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>);</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a9b92f90cd704735201d9c840842bd0bc">cdr_all_relink</a>(cdr);</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;   }</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html">cdr_object_snapshot</a></div><div class="ttdoc">A wrapper object around a snapshot. Fields that are mutable by the CDR engine are replicated here...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00704">cdr.c:704</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="cdr_8c_html_a8052195443a9cb5835d7d2b3ab7279aa"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a></div><div class="ttdeci">#define CDR_DEBUG(fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00210">cdr.c:210</a></div></div>
<div class="ttc" id="cdr_8c_html_a46fb3c14485f999d7039c7b9fb3f33d9"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a46fb3c14485f999d7039c7b9fb3f33d9">cdr_object_pick_party_a</a></div><div class="ttdeci">static struct cdr_object_snapshot * cdr_object_pick_party_a(struct cdr_object_snapshot *left, struct cdr_object_snapshot *right)</div><div class="ttdoc">Given two CDR snapshots, figure out who should be Party A for the resulting CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01192">cdr.c:1192</a></div></div>
<div class="ttc" id="cdr_8c_html_a9409d6642fce1018ef347f2fcece7eea"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a9409d6642fce1018ef347f2fcece7eea">cdr_object_snapshot_copy</a></div><div class="ttdeci">static void cdr_object_snapshot_copy(struct cdr_object_snapshot *dst, struct cdr_object_snapshot *src)</div><div class="ttdoc">Copy a snapshot and its details. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00791">cdr.c:791</a></div></div>
<div class="ttc" id="cdr_8c_html_a34a146403fab13026f6e302c753be741"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a34a146403fab13026f6e302c753be741">cdr_object_finalize</a></div><div class="ttdeci">static void cdr_object_finalize(struct cdr_object *cdr)</div><div class="ttdoc">Finalize a CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01440">cdr.c:1440</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="cdr_8c_html_a9b92f90cd704735201d9c840842bd0bc"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a9b92f90cd704735201d9c840842bd0bc">cdr_all_relink</a></div><div class="ttdeci">static void cdr_all_relink(struct cdr_object *cdr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00949">cdr.c:949</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a345860eafc9c3b90b39a4947ae4b81a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a345860eafc9c3b90b39a4947ae4b81a4">&#9670;&nbsp;</a></span>single_state_init_function()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void single_state_init_function </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01639">1639</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l01494">cdr_object_check_party_a_answer()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00721">cdr_object::lastevent</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00718">cdr_object::start</a>.</p>
<div class="fragment"><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;{</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;   cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a> = cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">lastevent</a>;</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a89033e69df1c30043f7f2dbdcfd3ec12">cdr_object_check_party_a_answer</a>(cdr);</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;}</div><div class="ttc" id="structcdr__object_html_ad80305b5e16da9c2675d5f057bd69386"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">cdr_object::start</a></div><div class="ttdeci">struct timeval start</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00718">cdr.c:718</a></div></div>
<div class="ttc" id="structcdr__object_html_a7543dbd0c668cd22684e8d5aea0b5b93"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">cdr_object::lastevent</a></div><div class="ttdeci">struct timeval lastevent</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00721">cdr.c:721</a></div></div>
<div class="ttc" id="cdr_8c_html_a89033e69df1c30043f7f2dbdcfd3ec12"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a89033e69df1c30043f7f2dbdcfd3ec12">cdr_object_check_party_a_answer</a></div><div class="ttdeci">static void cdr_object_check_party_a_answer(struct cdr_object *cdr)</div><div class="ttdoc">Check to see if a CDR needs to be answered based on its Party A. Note that this is safe to call as mu...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01494">cdr.c:1494</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afe5335db4bd0df691a3fb45eb744644a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe5335db4bd0df691a3fb45eb744644a">&#9670;&nbsp;</a></span>single_state_process_bridge_enter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316">process_bridge_enter_results</a> single_state_process_bridge_enter </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01736">1736</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00034">ao2_container_count()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::bridge</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00403">BRIDGE_ENTER_NO_PARTY_B</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00399">BRIDGE_ENTER_OBTAINED_PARTY_B</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00395">BRIDGE_ENTER_ONLY_PARTY</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00821">cdr_object_transition_state()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00339">ast_bridge_snapshot::channels</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01692">single_state_bridge_enter_comparison()</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::uniqueid</a>.</p>
<div class="fragment"><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;{</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> it_cdrs;</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;   <span class="keywordtype">char</span> *channel_id;</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;   <span class="keywordtype">int</span> success = 0;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cdr, bridge, bridge-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>);</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(bridge-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#adbc20a2fd50bb1376a3c6094e96a31e3">channels</a>) == 1) {</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;      <span class="comment">/* No one in the bridge yet but us! */</span></div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a>(cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a4213ec53168931f1d566f40e32870c4c">bridge_state_fn_table</a>);</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316a62a0455d2eb58c31a04b25d2c7eed117">BRIDGE_ENTER_ONLY_PARTY</a>;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;   }</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;   <span class="keywordflow">for</span> (it_cdrs = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(bridge-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#adbc20a2fd50bb1376a3c6094e96a31e3">channels</a>, 0);</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;      !success &amp;&amp; (channel_id = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;it_cdrs));</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(channel_id, -1)) {</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cand_cdr_master;</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cand_cdr;</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;      cand_cdr_master = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a>, channel_id, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>);</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;      <span class="keywordflow">if</span> (!cand_cdr_master) {</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;      }</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cand_cdr_master);</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;      <span class="keywordflow">for</span> (cand_cdr = cand_cdr_master; cand_cdr; cand_cdr = cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;         <span class="comment">/* Skip any records that are not in a bridge or in this bridge.</span></div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;<span class="comment">          * I&#39;m not sure how that would happen, but it pays to be careful. */</span></div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;         <span class="keywordflow">if</span> (cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a> != &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a4213ec53168931f1d566f40e32870c4c">bridge_state_fn_table</a> ||</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;               strcmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">bridge</a>, cand_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">bridge</a>)) {</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;         }</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#a2757a0953447c692fbfff2e4d7f2edd2">single_state_bridge_enter_comparison</a>(cdr, cand_cdr)) {</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;         }</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;         <span class="comment">/* We successfully got a party B - break out */</span></div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;         success = 1;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;      }</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cand_cdr_master);</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cand_cdr_master);</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;   }</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;it_cdrs);</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;   <span class="comment">/* We always transition state, even if we didn&#39;t get a peer */</span></div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a>(cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a4213ec53168931f1d566f40e32870c4c">bridge_state_fn_table</a>);</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;   <span class="comment">/* Success implies that we have a Party B */</span></div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;   <span class="keywordflow">if</span> (success) {</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316ad10fe7b54c407ca92612577a074e58c7">BRIDGE_ENTER_OBTAINED_PARTY_B</a>;</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;   }</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316a7975da294ade48d4154d1f00ec059039">BRIDGE_ENTER_NO_PARTY_B</a>;</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;}</div><div class="ttc" id="structast__bridge__snapshot_html_adbc20a2fd50bb1376a3c6094e96a31e3"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#adbc20a2fd50bb1376a3c6094e96a31e3">ast_bridge_snapshot::channels</a></div><div class="ttdeci">struct ao2_container * channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00339">bridge.h:339</a></div></div>
<div class="ttc" id="cdr_8c_html_a3bdd3cd3f0f0a84448a50181c3cee316ad10fe7b54c407ca92612577a074e58c7"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316ad10fe7b54c407ca92612577a074e58c7">BRIDGE_ENTER_OBTAINED_PARTY_B</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00399">cdr.c:399</a></div></div>
<div class="ttc" id="astobj2_8h_html_a512cc40ce96c63b3d5c78040baa4c9cd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a></div><div class="ttdeci">int ao2_container_count(struct ao2_container *c)</div><div class="ttdoc">Returns the number of elements in a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00034">astobj2_container.c:34</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="cdr_8c_html_a3bdd3cd3f0f0a84448a50181c3cee316a62a0455d2eb58c31a04b25d2c7eed117"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316a62a0455d2eb58c31a04b25d2c7eed117">BRIDGE_ENTER_ONLY_PARTY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00395">cdr.c:395</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="cdr_8c_html_aabd874b0958bde3e08b5a876c2d1a395"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_master</div><div class="ttdoc">A container of the active master CDRs indexed by Party A channel uniqueid. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00365">cdr.c:365</a></div></div>
<div class="ttc" id="cdr_8c_html_a3bdd3cd3f0f0a84448a50181c3cee316a7975da294ade48d4154d1f00ec059039"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3bdd3cd3f0f0a84448a50181c3cee316a7975da294ade48d4154d1f00ec059039">BRIDGE_ENTER_NO_PARTY_B</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00403">cdr.c:403</a></div></div>
<div class="ttc" id="cdr_8c_html_a2757a0953447c692fbfff2e4d7f2edd2"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a2757a0953447c692fbfff2e4d7f2edd2">single_state_bridge_enter_comparison</a></div><div class="ttdeci">static int single_state_bridge_enter_comparison(struct cdr_object *cdr, struct cdr_object *cand_cdr)</div><div class="ttdoc">Handle a comparison between our cdr_object and a cdr_object already in the bridge while in the Single...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01692">cdr.c:1692</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">ast_bridge_snapshot::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="cdr_8c_html_a4213ec53168931f1d566f40e32870c4c"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a4213ec53168931f1d566f40e32870c4c">bridge_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table bridge_state_fn_table</div><div class="ttdoc">The virtual table for the Bridged state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00659">cdr.c:659</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="structcdr__object_html_af089037b58d169050b5b9242ab0b033f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">cdr_object::bridge</a></div><div class="ttdeci">const ast_string_field bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="cdr_8c_html_aec9ada03f8f99aa4c972b141bcbd2ee3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a></div><div class="ttdeci">static void cdr_object_transition_state(struct cdr_object *cdr, struct cdr_object_fn_table *fn_table)</div><div class="ttdoc">Transition a cdr_object to a new state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00821">cdr.c:821</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae33e55ef56f8433924bd1e1b666757db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae33e55ef56f8433924bd1e1b666757db">&#9670;&nbsp;</a></span>single_state_process_dial_begin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int single_state_process_dial_begin </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>caller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>peer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01653">1653</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d07/cdr_8h_source.html#l00247">AST_CDR_LOCK_APP</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01540">base_process_party_a()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00949">cdr_all_relink()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00210">CDR_DEBUG</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01531">cdr_object_swap_snapshot()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00821">cdr_object_transition_state()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00723">cdr_object::flags</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>.</p>
<div class="fragment"><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;{</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;   <span class="keywordflow">if</span> (caller &amp;&amp; !strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, caller-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>)) {</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a8eaa5eabaf72c8c63f40f6b03f196573">base_process_party_a</a>(cdr, caller);</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>(<span class="stringliteral">&quot;%p - Updated Party A %s snapshot\n&quot;</span>, cdr,</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;         cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a5f169319f8865c4f86897f944ae0f00c">cdr_object_swap_snapshot</a>(&amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>, peer);</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a9b92f90cd704735201d9c840842bd0bc">cdr_all_relink</a>(cdr);</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>(<span class="stringliteral">&quot;%p - Updated Party B %s snapshot\n&quot;</span>, cdr,</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;         cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;      <span class="comment">/* If we have two parties, lock the application that caused the</span></div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;<span class="comment">       * two parties to be associated. This prevents mid-call event</span></div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;<span class="comment">       * macros/gosubs from perturbing the CDR application/data</span></div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a13988d4b84386aec3e34c0d2459dd0e1">AST_CDR_LOCK_APP</a>);</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, peer-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>)) {</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;      <span class="comment">/* We&#39;re the entity being dialed, i.e., outbound origination */</span></div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a8eaa5eabaf72c8c63f40f6b03f196573">base_process_party_a</a>(cdr, peer);</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a>(<span class="stringliteral">&quot;%p - Updated Party A %s snapshot\n&quot;</span>, cdr,</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;         cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;   }</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a>(cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a018b74f4d21e19c8830f1b1a802acd95">dial_state_fn_table</a>);</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a8eaa5eabaf72c8c63f40f6b03f196573"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8eaa5eabaf72c8c63f40f6b03f196573">base_process_party_a</a></div><div class="ttdeci">static int base_process_party_a(struct cdr_object *cdr, struct ast_channel_snapshot *snapshot)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01540">cdr.c:1540</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="structcdr__object_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">cdr_object::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00723">cdr.c:723</a></div></div>
<div class="ttc" id="cdr_8c_html_a8052195443a9cb5835d7d2b3ab7279aa"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8052195443a9cb5835d7d2b3ab7279aa">CDR_DEBUG</a></div><div class="ttdeci">#define CDR_DEBUG(fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00210">cdr.c:210</a></div></div>
<div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37a13988d4b84386aec3e34c0d2459dd0e1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a13988d4b84386aec3e34c0d2459dd0e1">AST_CDR_LOCK_APP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00247">cdr.h:247</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f169319f8865c4f86897f944ae0f00c"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f169319f8865c4f86897f944ae0f00c">cdr_object_swap_snapshot</a></div><div class="ttdeci">static void cdr_object_swap_snapshot(struct cdr_object_snapshot *old_snapshot, struct ast_channel_snapshot *new_snapshot)</div><div class="ttdoc">Swap an old cdr_object_snapshot&amp;#39;s ast_channel_snapshot for a new ast_channel_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01531">cdr.c:1531</a></div></div>
<div class="ttc" id="cdr_8c_html_a018b74f4d21e19c8830f1b1a802acd95"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a018b74f4d21e19c8830f1b1a802acd95">dial_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table dial_state_fn_table</div><div class="ttdoc">The virtual table for the Dial state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00604">cdr.c:604</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="cdr_8c_html_a9b92f90cd704735201d9c840842bd0bc"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a9b92f90cd704735201d9c840842bd0bc">cdr_all_relink</a></div><div class="ttdeci">static void cdr_all_relink(struct cdr_object *cdr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00949">cdr.c:949</a></div></div>
<div class="ttc" id="cdr_8c_html_aec9ada03f8f99aa4c972b141bcbd2ee3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a></div><div class="ttdeci">static void cdr_object_transition_state(struct cdr_object *cdr, struct cdr_object_fn_table *fn_table)</div><div class="ttdoc">Transition a cdr_object to a new state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00821">cdr.c:821</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad6ca6ec30e128da079d404153d0fb0d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6ca6ec30e128da079d404153d0fb0d7">&#9670;&nbsp;</a></span>single_state_process_parking_bridge_enter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int single_state_process_parking_bridge_enter </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01793">1793</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l00821">cdr_object_transition_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;{</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a>(cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a7452de272169d0534a08287fde1dc636">parked_state_fn_table</a>);</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a7452de272169d0534a08287fde1dc636"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a7452de272169d0534a08287fde1dc636">parked_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table parked_state_fn_table</div><div class="ttdoc">The virtual table for the Parked state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00678">cdr.c:678</a></div></div>
<div class="ttc" id="cdr_8c_html_aec9ada03f8f99aa4c972b141bcbd2ee3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a></div><div class="ttdeci">static void cdr_object_transition_state(struct cdr_object *cdr, struct cdr_object_fn_table *fn_table)</div><div class="ttdoc">Transition a cdr_object to a new state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00821">cdr.c:821</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7468fe3499dfaff87d126d1993c2ebdc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7468fe3499dfaff87d126d1993c2ebdc">&#9670;&nbsp;</a></span>single_state_process_party_b()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void single_state_process_party_b </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>snapshot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01645">1645</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>.</p>
<div class="fragment"><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;{</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;   <span class="comment">/* This should never happen! */</span></div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;   <span class="keywordflow">return</span>;</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;}</div><div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abdcb681e5fb3d509b769efa9d498f3f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdcb681e5fb3d509b769efa9d498f3f7">&#9670;&nbsp;</a></span>snapshot_cep_changed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int snapshot_cep_changed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>old_snapshot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>new_snapshot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return whether or not a channel has changed its state in the dialplan, subject to endbeforehexten logic. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">old_snapshot</td><td>The previous state </td></tr>
    <tr><td class="paramname">new_snapshot</td><td>The new state</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if the state has not changed </td></tr>
    <tr><td class="paramname">1</td><td>if the state changed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01148">1148</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00070">ast_channel_snapshot_dialplan::appl</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01155">AST_SOFTHANGUP_HANGUP_EXEC</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00224">CDR_END_BEFORE_H_EXTEN</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00070">ast_channel_snapshot_dialplan::context</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00151">ast_channel_snapshot::dialplan</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00070">ast_channel_snapshot_dialplan::exten</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01127">is_cdr_flag_set()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00071">ast_channel_snapshot_dialplan::priority</a>, and <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00156">ast_channel_snapshot::softhangup_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02249">check_new_cdr_needed()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l01951">dialed_pending_state_process_party_a()</a>.</p>
<div class="fragment"><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;{</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;   <span class="comment">/* If we ignore hangup logic, don&#39;t indicate that we&#39;re executing anything new */</span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;new_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#acd7e028035da37eabb4e2dd1ca495f0c">softhangup_flags</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a33d9271d8d892501de8c9536382d71ea">AST_SOFTHANGUP_HANGUP_EXEC</a>)</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;      &amp;&amp; <a class="code" href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a>(<a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba951b6a2ed4e5418e5e7bdab6f37061a1">CDR_END_BEFORE_H_EXTEN</a>)) {</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;   }</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;   <span class="comment">/* When Party A is originated to an application and the application exits, the stack</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;<span class="comment">    * will attempt to clear the application and restore the dummy originate application</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<span class="comment">    * of &quot;AppDialX&quot;. Ignore application changes to AppDialX as a result.</span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;   <span class="keywordflow">if</span> (strcmp(new_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#af535fe520577fb6b8795dea539bd0230">appl</a>, old_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#af535fe520577fb6b8795dea539bd0230">appl</a>)</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;      &amp;&amp; strncasecmp(new_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#af535fe520577fb6b8795dea539bd0230">appl</a>, <span class="stringliteral">&quot;appdial&quot;</span>, 7)</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      &amp;&amp; (strcmp(new_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#a7faec841658b88ad0cfbc684853acad3">context</a>, old_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#a7faec841658b88ad0cfbc684853acad3">context</a>)</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;         || strcmp(new_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#aaee31f4cc48985167efcd38ab252dac8">exten</a>, old_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#aaee31f4cc48985167efcd38ab252dac8">exten</a>)</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;         || new_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a> != old_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>)) {</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;   }</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;}</div><div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba951b6a2ed4e5418e5e7bdab6f37061a1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba951b6a2ed4e5418e5e7bdab6f37061a1">CDR_END_BEFORE_H_EXTEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00224">cdr.h:224</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="cdr_8c_html_ab3ba06a4d885b31e4073c047d0dad02d"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a></div><div class="ttdeci">static int is_cdr_flag_set(unsigned int cdr_flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01127">cdr.c:1127</a></div></div>
<div class="ttc" id="structast__channel__snapshot__dialplan_html_acec9ce2df15222151ad66fcb1d74eb9f"><div class="ttname"><a href="../../dc/d3d/structast__channel__snapshot__dialplan.html#acec9ce2df15222151ad66fcb1d74eb9f">ast_channel_snapshot_dialplan::priority</a></div><div class="ttdeci">int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00071">stasis_channels.h:71</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_a5be1fb9b43b051b087f6952b6346909a"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">ast_channel_snapshot::dialplan</a></div><div class="ttdeci">struct ast_channel_snapshot_dialplan * dialplan</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00151">stasis_channels.h:151</a></div></div>
<div class="ttc" id="structast__channel__snapshot__dialplan_html_a7faec841658b88ad0cfbc684853acad3"><div class="ttname"><a href="../../dc/d3d/structast__channel__snapshot__dialplan.html#a7faec841658b88ad0cfbc684853acad3">ast_channel_snapshot_dialplan::context</a></div><div class="ttdeci">const ast_string_field context</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00070">stasis_channels.h:70</a></div></div>
<div class="ttc" id="structast__channel__snapshot__dialplan_html_af535fe520577fb6b8795dea539bd0230"><div class="ttname"><a href="../../dc/d3d/structast__channel__snapshot__dialplan.html#af535fe520577fb6b8795dea539bd0230">ast_channel_snapshot_dialplan::appl</a></div><div class="ttdeci">const ast_string_field appl</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00070">stasis_channels.h:70</a></div></div>
<div class="ttc" id="structast__channel__snapshot__dialplan_html_aaee31f4cc48985167efcd38ab252dac8"><div class="ttname"><a href="../../dc/d3d/structast__channel__snapshot__dialplan.html#aaee31f4cc48985167efcd38ab252dac8">ast_channel_snapshot_dialplan::exten</a></div><div class="ttdeci">const ast_string_field exten</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00070">stasis_channels.h:70</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_acd7e028035da37eabb4e2dd1ca495f0c"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#acd7e028035da37eabb4e2dd1ca495f0c">ast_channel_snapshot::softhangup_flags</a></div><div class="ttdeci">struct ast_flags softhangup_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00156">stasis_channels.h:156</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a33d9271d8d892501de8c9536382d71ea"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a33d9271d8d892501de8c9536382d71ea">AST_SOFTHANGUP_HANGUP_EXEC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01155">channel.h:1155</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab5904b00a02181783ce25d816a2e6d68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5904b00a02181783ce25d816a2e6d68">&#9670;&nbsp;</a></span>snapshot_is_dialed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int snapshot_is_dialed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>snapshot</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return whether or not a <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> is for a channel that was created as the result of a dial operation. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>the channel was not created as the result of a dial </td></tr>
    <tr><td class="paramname">1</td><td>the channel was created as the result of a dial </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l01179">1179</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h_source.html#l01040">AST_FLAG_ORIGINATED</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01000">AST_FLAG_OUTGOING</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, and <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00155">ast_channel_snapshot::flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l01287">cdr_object_create_public_records()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01192">cdr_object_pick_party_a()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04055">cli_show_channel()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03991">cli_show_channels()</a>.</p>
<div class="fragment"><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;{</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;   <span class="keywordflow">return</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a36fa77a64746637c77c6b18a7999d0a2">AST_FLAG_OUTGOING</a>)</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;         &amp;&amp; !(<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ae9c1c04502304018b62d1e5383ccacb3">AST_FLAG_ORIGINATED</a>)));</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;}</div><div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a36fa77a64746637c77c6b18a7999d0a2"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a36fa77a64746637c77c6b18a7999d0a2">AST_FLAG_OUTGOING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01000">channel.h:1000</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#aec78000b2897c094f68ed72559e18acd">ast_channel_snapshot::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00155">stasis_channels.h:155</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5ae9c1c04502304018b62d1e5383ccacb3"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ae9c1c04502304018b62d1e5383ccacb3">AST_FLAG_ORIGINATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01040">channel.h:1040</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8e55b20165112265d58bf812ccb57de0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e55b20165112265d58bf812ccb57de0">&#9670;&nbsp;</a></span>start_batch_mode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void start_batch_mode </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Do not hold the batch lock while calling this function </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03825">3825</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00524">ast_sched_add_variable()</a>, <a class="el" href="../../d7/d00/sched_8h_source.html#l00046">AST_SCHED_DEL</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00362">cdr_pending_cond</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00361">cdr_pending_lock</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00353">cdr_sched</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00354">cdr_sched_lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03804">submit_scheduled_batch()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03841">cdr_detach()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04416">cdr_enable_batch_mode()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l04212">handle_cli_submit()</a>.</p>
<div class="fragment"><div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;{</div><div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;   <span class="comment">/* Prevent two deletes from happening at the same time */</span></div><div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../dc/df2/cdr_8c.html#aea5f6ba47213475f890de68ec5b7e974">cdr_sched_lock</a>);</div><div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;   <span class="comment">/* this is okay since we are not being called from within the scheduler */</span></div><div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;   <a class="code" href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a4b8b0834379a5c8dd0deaa5161785419">cdr_sched</a>);</div><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;   <span class="comment">/* schedule the submission to occur ASAP (1 ms) */</span></div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a4b8b0834379a5c8dd0deaa5161785419">cdr_sched</a> = <a class="code" href="../../d7/d00/sched_8h.html#adec2ba936e662f6b9353fc0172e9fcec">ast_sched_add_variable</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, 1, <a class="code" href="../../dc/df2/cdr_8c.html#a8ba6c6273f321acb2b32dc754163e349">submit_scheduled_batch</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 1);</div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../dc/df2/cdr_8c.html#aea5f6ba47213475f890de68ec5b7e974">cdr_sched_lock</a>);</div><div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;</div><div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;   <span class="comment">/* signal the do_cdr thread to wakeup early and do some work (that lazy thread ;) */</span></div><div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../dc/df2/cdr_8c.html#acde84d468388579851a2de600c75a6e4">cdr_pending_lock</a>);</div><div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;<a class="code" href="../../dc/df2/cdr_8c.html#a3350735a1fc58db7a559b16073a83a3c">cdr_pending_cond</a>);</div><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../dc/df2/cdr_8c.html#acde84d468388579851a2de600c75a6e4">cdr_pending_lock</a>);</div><div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;}</div><div class="ttc" id="cdr_8c_html_aea5f6ba47213475f890de68ec5b7e974"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aea5f6ba47213475f890de68ec5b7e974">cdr_sched_lock</a></div><div class="ttdeci">static ast_mutex_t cdr_sched_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00354">cdr.c:354</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="sched_8h_html_adec2ba936e662f6b9353fc0172e9fcec"><div class="ttname"><a href="../../d7/d00/sched_8h.html#adec2ba936e662f6b9353fc0172e9fcec">ast_sched_add_variable</a></div><div class="ttdeci">int ast_sched_add_variable(struct ast_sched_context *con, int when, ast_sched_cb callback, const void *data, int variable) attribute_warn_unused_result</div><div class="ttdoc">Adds a scheduled event with rescheduling support. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00524">sched.c:524</a></div></div>
<div class="ttc" id="cdr_8c_html_a8ba6c6273f321acb2b32dc754163e349"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a8ba6c6273f321acb2b32dc754163e349">submit_scheduled_batch</a></div><div class="ttdeci">static int submit_scheduled_batch(const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03804">cdr.c:3804</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="sched_8h_html_a25647782014f8dc012994efcd1b81d32"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a></div><div class="ttdeci">#define AST_SCHED_DEL(sched, id)</div><div class="ttdoc">Remove a scheduler entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d00/sched_8h_source.html#l00046">sched.h:46</a></div></div>
<div class="ttc" id="cdr_8c_html_acde84d468388579851a2de600c75a6e4"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#acde84d468388579851a2de600c75a6e4">cdr_pending_lock</a></div><div class="ttdeci">static ast_mutex_t cdr_pending_lock</div><div class="ttdoc">These are used to wake up the CDR thread when there&amp;#39;s work to do. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00361">cdr.c:361</a></div></div>
<div class="ttc" id="cdr_8c_html_a3350735a1fc58db7a559b16073a83a3c"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3350735a1fc58db7a559b16073a83a3c">cdr_pending_cond</a></div><div class="ttdeci">static ast_cond_t cdr_pending_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00362">cdr.c:362</a></div></div>
<div class="ttc" id="cdr_8c_html_a4b8b0834379a5c8dd0deaa5161785419"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a4b8b0834379a5c8dd0deaa5161785419">cdr_sched</a></div><div class="ttdeci">static int cdr_sched</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00353">cdr.c:353</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a235b2953ff727a959b670c91bc2960a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a235b2953ff727a959b670c91bc2960a4">&#9670;&nbsp;</a></span>STASIS_MESSAGE_TYPE_DEFN_LOCAL()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STASIS_MESSAGE_TYPE_DEFN_LOCAL </td>
          <td>(</td>
          <td class="paramtype">cdr_sync_message_type&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A message type used to synchronize with the CDR topic. </p>

</div>
</div>
<a id="a8ba6c6273f321acb2b32dc754163e349"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ba6c6273f321acb2b32dc754163e349">&#9670;&nbsp;</a></span>submit_scheduled_batch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int submit_scheduled_batch </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03804">3804</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d4/d69/structast__cdr__config.html#ab3c4f8ad024814570a590d3d40752003">ast_cdr_config::batch_settings</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03766">cdr_submit_batch()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00223">module_config::general</a>, and <a class="el" href="../../dc/d07/cdr_8h_source.html#l00267">ast_cdr_config::batch_settings::time</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03825">start_batch_mode()</a>.</p>
<div class="fragment"><div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;{</div><div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d57/structmodule__config.html">module_config</a> *mod_cfg;</div><div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;   <span class="keywordtype">int</span> nextms;</div><div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;</div><div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#ae78649474f95f4adb19a0791ed39f4fc">cdr_submit_batch</a>(0);</div><div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;</div><div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;   mod_cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(module_configs);</div><div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;   <span class="keywordflow">if</span> (!mod_cfg) {</div><div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;   }</div><div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;</div><div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;   <span class="comment">/* Calculate the next scheduled interval */</span></div><div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;   nextms = mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>-&gt;<a class="code" href="../../d4/d69/structast__cdr__config.html#ab3c4f8ad024814570a590d3d40752003">batch_settings</a>.<a class="code" href="../../d3/d11/structast__cdr__config_1_1batch__settings.html#a83e57ce9bd59cfa0995c2e2c8589c274">time</a> * 1000;</div><div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;</div><div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(mod_cfg);</div><div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;</div><div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;   <span class="keywordflow">return</span> nextms;</div><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;}</div><div class="ttc" id="structast__cdr__config_1_1batch__settings_html_a83e57ce9bd59cfa0995c2e2c8589c274"><div class="ttname"><a href="../../d3/d11/structast__cdr__config_1_1batch__settings.html#a83e57ce9bd59cfa0995c2e2c8589c274">ast_cdr_config::batch_settings::time</a></div><div class="ttdeci">unsigned int time</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00267">cdr.h:267</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="cdr_8c_html_ae78649474f95f4adb19a0791ed39f4fc"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ae78649474f95f4adb19a0791ed39f4fc">cdr_submit_batch</a></div><div class="ttdeci">static void cdr_submit_batch(int shutdown)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03766">cdr.c:3766</a></div></div>
<div class="ttc" id="structast__cdr__config_html_ab3c4f8ad024814570a590d3d40752003"><div class="ttname"><a href="../../d4/d69/structast__cdr__config.html#ab3c4f8ad024814570a590d3d40752003">ast_cdr_config::batch_settings</a></div><div class="ttdeci">struct ast_cdr_config::batch_settings batch_settings</div></div>
<div class="ttc" id="structmodule__config_html"><div class="ttname"><a href="../../db/d57/structmodule__config.html">module_config</a></div><div class="ttdoc">The configuration settings for this module. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00222">cdr.c:222</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structmodule__config_html_a95699733ba47a55e25760adf5c51e59a"><div class="ttname"><a href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">module_config::general</a></div><div class="ttdeci">struct ast_cdr_config * general</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00223">cdr.c:223</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04515">4515</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l04304">destroy_subscriptions()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04617">reload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;{</div><div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#ae65f9813539412cd935004baea3e03f0">destroy_subscriptions</a>();</div><div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;</div><div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;}</div><div class="ttc" id="cdr_8c_html_ae65f9813539412cd935004baea3e03f0"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ae65f9813539412cd935004baea3e03f0">destroy_subscriptions</a></div><div class="ttdeci">static void destroy_subscriptions(void)</div><div class="ttdoc">Destroy the active Stasis subscriptions. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l04304">cdr.c:4304</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a835b27a90d895a488e4e14cc3d2dee8c">AST_MODFLAG_GLOBAL_SYMBOLS</a> | <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;CDR Engine&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .reload = reload_module, .load_pri = AST_MODPRI_CORE, .requires = &quot;extconfig&quot;, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04651">4651</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="abb1aee82330e86d734034f092559cc69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb1aee82330e86d734034f092559cc69">&#9670;&nbsp;</a></span>active_cdrs_all</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a>* active_cdrs_all</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A container of all active CDRs with a Party B indexed by Party B channel name. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00368">368</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="aabd874b0958bde3e08b5a876c2d1a395"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabd874b0958bde3e08b5a876c2d1a395">&#9670;&nbsp;</a></span>active_cdrs_master</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a>* active_cdrs_master</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A container of the active master CDRs indexed by Party A channel uniqueid. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00365">365</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04651">4651</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="a3c9a24d791e528330adc76210fb42407"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c9a24d791e528330adc76210fb42407">&#9670;&nbsp;</a></span>batch</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d3a/structcdr__batch.html">cdr_batch</a> * batch = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03841">cdr_detach()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04385">cdr_engine_shutdown()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03766">cdr_submit_batch()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04145">handle_cli_status()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03738">init_batch()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03730">reset_batch()</a>.</p>

</div>
</div>
<a id="a2ead69fce72c3bd053bdbc1e9ceb0899"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ead69fce72c3bd053bdbc1e9ceb0899">&#9670;&nbsp;</a></span>be_list</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d5/d08/structbe__list.html">be_list</a>   <a class="el" href="../../d5/d08/structbe__list.html">be_list</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a4213ec53168931f1d566f40e32870c4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4213ec53168931f1d566f40e32870c4c">&#9670;&nbsp;</a></span>bridge_state_fn_table</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/d0f/structcdr__object__fn__table.html">cdr_object_fn_table</a> bridge_state_fn_table</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The virtual table for the Bridged state. </p>
<p>A <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> enters this state when it receives notification that the channel has entered a bridge.</p>
<p>A <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> from this state can go to:</p><ul>
<li><a class="el" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a> </li>
</ul>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00659">659</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="a47209cbb2830370119a620706df43f19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47209cbb2830370119a620706df43f19">&#9670;&nbsp;</a></span>bridge_subscription</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d54/structstasis__forward.html">stasis_forward</a>* bridge_subscription</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Our subscription for bridges. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00374">374</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="a3a3969758c60f80011874aadde9d09ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a3969758c60f80011874aadde9d09ca">&#9670;&nbsp;</a></span>cdr_batch_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> cdr_batch_lock = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Lock protecting modifications to the batch queue. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00358">358</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03841">cdr_detach()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03766">cdr_submit_batch()</a>.</p>

</div>
</div>
<a id="aecd4251f0f7bfcfc7104d5b76e4e45f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecd4251f0f7bfcfc7104d5b76e4e45f6">&#9670;&nbsp;</a></span>cdr_debug_enabled</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int cdr_debug_enabled</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00208">208</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="a3350735a1fc58db7a559b16073a83a3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3350735a1fc58db7a559b16073a83a3c">&#9670;&nbsp;</a></span>cdr_pending_cond</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a> cdr_pending_cond</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00362">362</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04416">cdr_enable_batch_mode()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03903">do_cdr()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04277">finalize_batch_mode()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03825">start_batch_mode()</a>.</p>

</div>
</div>
<a id="acde84d468388579851a2de600c75a6e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acde84d468388579851a2de600c75a6e4">&#9670;&nbsp;</a></span>cdr_pending_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> cdr_pending_lock = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>These are used to wake up the CDR thread when there's work to do. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00361">361</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03903">do_cdr()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03825">start_batch_mode()</a>.</p>

</div>
</div>
<a id="a2256ef5c96ee6f5634e183c3c99f42f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2256ef5c96ee6f5634e183c3c99f42f8">&#9670;&nbsp;</a></span>cdr_readonly_vars</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* const cdr_readonly_vars[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03154">3154</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="a4b8b0834379a5c8dd0deaa5161785419"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b8b0834379a5c8dd0deaa5161785419">&#9670;&nbsp;</a></span>cdr_sched</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int cdr_sched = -1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00353">353</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04145">handle_cli_status()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03825">start_batch_mode()</a>.</p>

</div>
</div>
<a id="aea5f6ba47213475f890de68ec5b7e974"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea5f6ba47213475f890de68ec5b7e974">&#9670;&nbsp;</a></span>cdr_sched_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> cdr_sched_lock = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00354">354</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03825">start_batch_mode()</a>.</p>

</div>
</div>
<a id="a1a28dc87e0a897d209ff16ca63bff690"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a28dc87e0a897d209ff16ca63bff690">&#9670;&nbsp;</a></span>cdr_thread</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pthread_t cdr_thread = <a class="el" href="../../d4/dc5/extconf_8c.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00355">355</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04416">cdr_enable_batch_mode()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l04277">finalize_batch_mode()</a>.</p>

</div>
</div>
<a id="abc796aa4d7644ba463deefc014cd6ea9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc796aa4d7644ba463deefc014cd6ea9">&#9670;&nbsp;</a></span>cdr_topic</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a>* cdr_topic</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The parent topic for all topics we want to aggregate for CDRs. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00383">383</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="a5481f015567808a3331c677ee1922bf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5481f015567808a3331c677ee1922bf7">&#9670;&nbsp;</a></span>channel_subscription</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d54/structstasis__forward.html">stasis_forward</a>* channel_subscription</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Our subscription for channels. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00377">377</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="a1959d38582b0da24d4d42766cf13ade8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1959d38582b0da24d4d42766cf13ade8">&#9670;&nbsp;</a></span>cli_commands</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> cli_commands[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04249">4249</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="a018b74f4d21e19c8830f1b1a802acd95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a018b74f4d21e19c8830f1b1a802acd95">&#9670;&nbsp;</a></span>dial_state_fn_table</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/d0f/structcdr__object__fn__table.html">cdr_object_fn_table</a> dial_state_fn_table</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The virtual table for the Dial state. </p>
<p>A <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> that has begun a dial operation. This state is entered when the Party A for a CDR is determined to be dialing out to a Party B or when a CDR is for an originated channel (in which case the Party A information is the originated channel, and there is no Party B).</p>
<p>A <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> from this state can go in any of the following states:</p><ul>
<li><a class="el" href="../../dc/df2/cdr_8c.html#a2a48de7671f066dd9349192c100d62e8">dialed_pending_state_fn_table</a></li>
<li><a class="el" href="../../dc/df2/cdr_8c.html#a4213ec53168931f1d566f40e32870c4c">bridge_state_fn_table</a></li>
<li><a class="el" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a> </li>
</ul>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00604">604</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="a2a48de7671f066dd9349192c100d62e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a48de7671f066dd9349192c100d62e8">&#9670;&nbsp;</a></span>dialed_pending_state_fn_table</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/d0f/structcdr__object__fn__table.html">cdr_object_fn_table</a> dialed_pending_state_fn_table</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The virtual table for the Dialed Pending state. </p>
<p>A <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> that has successfully finished a dial operation, but we don't know what they're going to do yet. It's theoretically possible to dial a party and then have that party not be bridged with the caller; likewise, an origination can complete and the channel go off and execute dialplan. The pending state acts as a bridge between either:</p><ul>
<li>Entering a bridge</li>
<li>Getting a new CDR for new dialplan execution</li>
<li>Switching from being originated to executing dialplan</li>
</ul>
<p>A <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> from this state can go in any of the following states:</p><ul>
<li><a class="el" href="../../dc/df2/cdr_8c.html#a03d77113f205fd4450fe8866dc0f48dd">single_state_fn_table</a></li>
<li><a class="el" href="../../dc/df2/cdr_8c.html#a2a48de7671f066dd9349192c100d62e8">dialed_pending_state_fn_table</a></li>
<li><a class="el" href="../../dc/df2/cdr_8c.html#a4213ec53168931f1d566f40e32870c4c">bridge_state_fn_table</a></li>
<li><a class="el" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a> </li>
</ul>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00637">637</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="a5f50dd95a426c8a70710afc315164f04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f50dd95a426c8a70710afc315164f04">&#9670;&nbsp;</a></span>finalized_state_fn_table</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/d0f/structcdr__object__fn__table.html">cdr_object_fn_table</a> finalized_state_fn_table</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The virtual table for the finalized state. </p>
<p>Once in the finalized state, the CDR is done. No modifications can be made to the CDR. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00694">694</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="a5be5fa967836c0f0c98763deaff227b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5be5fa967836c0f0c98763deaff227b7">&#9670;&nbsp;</a></span>general_option</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a> general_option</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The type definition for general options. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00230">230</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="a8e03f6233c516c1beb21b5b9285ed69f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e03f6233c516c1beb21b5b9285ed69f">&#9670;&nbsp;</a></span>general_options</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a>* general_options[] = <a class="el" href="../../db/dfe/config__options_8h.html#af773eedd7f94d718752798605c687c4b">ACO_TYPES</a>(&amp;<a class="el" href="../../dc/dec/res_2ari_2config_8c.html#a5be5fa967836c0f0c98763deaff227b7">general_option</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00274">274</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="aaca91b8743296407c372a0c935fd5089"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaca91b8743296407c372a0c935fd5089">&#9670;&nbsp;</a></span>global_cdr_sequence</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int global_cdr_sequence = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The global sequence counter used for CDRs. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00349">349</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l01039">cdr_object_alloc()</a>.</p>

</div>
</div>
<a id="a27f4f033382189ae9c8466a861746a33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27f4f033382189ae9c8466a861746a33">&#9670;&nbsp;</a></span>ignore_categories</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* ignore_categories[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Config sections used by existing modules. Do not add to this list. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00239">239</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="a07fa2e00461eb8b105a7eabd84fc2aa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07fa2e00461eb8b105a7eabd84fc2aa6">&#9670;&nbsp;</a></span>ignore_option</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a> ignore_option</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00252">252</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="af34cc8951582d4c69367b3ea49b54eee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af34cc8951582d4c69367b3ea49b54eee">&#9670;&nbsp;</a></span>mo_list</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d6/d3d/structmo__list.html">mo_list</a>   <a class="el" href="../../d6/d3d/structmo__list.html">mo_list</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a5992da1d576df52445a82f5a49d6b54f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5992da1d576df52445a82f5a49d6b54f">&#9670;&nbsp;</a></span>module_file_conf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d9c/structaco__file.html">aco_file</a> module_file_conf</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .filename = <span class="stringliteral">&quot;cdr.conf&quot;</span>,</div><div class="line">   .types = <a class="code" href="../../db/dfe/config__options_8h.html#af773eedd7f94d718752798605c687c4b">ACO_TYPES</a>(&amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5be5fa967836c0f0c98763deaff227b7">general_option</a>, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a07fa2e00461eb8b105a7eabd84fc2aa6">ignore_option</a>),</div><div class="line">}</div><div class="ttc" id="config__options_8h_html_af773eedd7f94d718752798605c687c4b"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#af773eedd7f94d718752798605c687c4b">ACO_TYPES</a></div><div class="ttdeci">#define ACO_TYPES(...)</div><div class="ttdoc">A helper macro to ensure that aco_info types always have a sentinel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00181">config_options.h:181</a></div></div>
<div class="ttc" id="cdr_8c_html_a5be5fa967836c0f0c98763deaff227b7"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5be5fa967836c0f0c98763deaff227b7">general_option</a></div><div class="ttdeci">static struct aco_type general_option</div><div class="ttdoc">The type definition for general options. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00230">cdr.c:230</a></div></div>
<div class="ttc" id="cdr_8c_html_a07fa2e00461eb8b105a7eabd84fc2aa6"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a07fa2e00461eb8b105a7eabd84fc2aa6">ignore_option</a></div><div class="ttdeci">static struct aco_type ignore_option</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00252">cdr.c:252</a></div></div>
</div><!-- fragment -->
<p>The file definition. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00264">264</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="a7452de272169d0534a08287fde1dc636"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7452de272169d0534a08287fde1dc636">&#9670;&nbsp;</a></span>parked_state_fn_table</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/d0f/structcdr__object__fn__table.html">cdr_object_fn_table</a> parked_state_fn_table</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The virtual table for the Parked state. </p>
<p>Parking is weird. Unlike typical bridges, it has to be treated somewhat uniquely - a channel in a parking bridge (which is a subclass of a holding bridge) has to be handled as if the channel went into an application. However, when the channel comes out, we need a new CDR - unlike the Single state. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00678">678</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="aa421dba1330983098f1ca24a9ba128f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa421dba1330983098f1ca24a9ba128f6">&#9670;&nbsp;</a></span>parking_subscription</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d54/structstasis__forward.html">stasis_forward</a>* parking_subscription</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Our subscription for parking. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00380">380</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/ded/parking__applications_8c_source.html#l00892">park_and_announce_app_exec()</a>.</p>

</div>
</div>
<a id="a361b448e9abcfc301602a2573a662d3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a361b448e9abcfc301602a2573a662d3c">&#9670;&nbsp;</a></span>sched</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d7/de8/structast__sched__context.html">ast_sched_context</a>* <a class="el" href="../../d0/da0/structsched.html">sched</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Scheduler items. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00352">352</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="a03d77113f205fd4450fe8866dc0f48dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03d77113f205fd4450fe8866dc0f48dd">&#9670;&nbsp;</a></span>single_state_fn_table</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/d0f/structcdr__object__fn__table.html">cdr_object_fn_table</a> single_state_fn_table</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The virtual table for the Single state. </p>
<p>A <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> starts off in this state. This represents a channel that has no Party B information itself.</p>
<p>A <a class="el" href="../../d4/db4/structcdr__object.html">cdr_object</a> from this state can go into any of the following states:</p><ul>
<li><a class="el" href="../../dc/df2/cdr_8c.html#a018b74f4d21e19c8830f1b1a802acd95">dial_state_fn_table</a></li>
<li><a class="el" href="../../dc/df2/cdr_8c.html#a4213ec53168931f1d566f40e32870c4c">bridge_state_fn_table</a></li>
<li><a class="el" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a> </li>
</ul>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00573">573</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

</div>
</div>
<a id="a6d6d7bdd31cb1b6f84f2e447a7a2c6c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">&#9670;&nbsp;</a></span>stasis_router</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a>* stasis_router</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Message router for stasis messages regarding channel state. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l00371">371</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l04291">ast_cdr_message_router()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:44:58 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
