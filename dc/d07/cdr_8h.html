<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: cdr.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_6d4b1cdb59e2db6ad82005b337288fef.html">asterisk</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">cdr.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Call Detail Record API.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for cdr.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../d7/da4/cdr_8h__incl.png" border="0" usemap="#cdr_8h" alt=""/></div>
<map name="cdr_8h" id="cdr_8h">
<area shape="rect" id="node2" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="943,80,1082,107"/>
<area shape="rect" id="node3" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="886,155,1030,181"/>
<area shape="rect" id="node4" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="857,304,971,331"/>
<area shape="rect" id="node5" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1088,453,1201,480"/>
<area shape="rect" id="node7" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="523,379,681,405"/>
<area shape="rect" id="node8" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="316,229,475,256"/>
<area shape="rect" id="node12" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="996,304,1131,331"/>
<area shape="rect" id="node13" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1205,379,1356,405"/>
<area shape="rect" id="node14" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="181,155,345,181"/>
<area shape="rect" id="node17" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="551,229,677,256"/>
<area shape="rect" id="node19" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="1155,155,1302,181"/>
<area shape="rect" id="node20" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="753,229,880,256"/>
<area shape="rect" id="node21" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="1319,304,1469,331"/>
<area shape="rect" id="node22" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="5,304,167,331"/>
<area shape="rect" id="node23" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="2114,304,2285,331"/>
<area shape="rect" id="node25" href="../../de/dc8/ccss_8h.html" title="Call Completion Supplementary Services API. " alt="" coords="1819,155,1935,181"/>
<area shape="rect" id="node27" href="../../db/d3c/framehook_8h.html" title="FrameHook Architecture. " alt="" coords="603,155,761,181"/>
<area shape="rect" id="node28" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="1427,155,1553,181"/>
<area shape="rect" id="node32" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="1631,155,1781,181"/>
<area shape="rect" id="node6" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="799,528,946,555"/>
<area shape="rect" id="node10" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="337,304,467,331"/>
<area shape="rect" id="node11" href="../../d1/d16/codec_8h.html" title="Codec API. " alt="" coords="181,379,308,405"/>
<area shape="rect" id="node15" href="../../d9/dab/select_8h.html" title="Bitfield expansions for ast_select. " alt="" coords="84,229,211,256"/>
<area shape="rect" id="node18" href="../../d1/d84/endian_8h.html" title="Asterisk architecture endianess compatibility definitions. " alt="" coords="550,304,681,331"/>
<area shape="rect" id="node24" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="2096,379,2180,405"/>
<area shape="rect" id="node26" href="../../da/da2/devicestate_8h.html" title="Device state management. " alt="" coords="1877,229,2039,256"/>
<area shape="rect" id="node29" href="../../d4/d05/json_8h.html" title="Asterisk JSON abstraction layer. " alt="" coords="1687,229,1802,256"/>
<area shape="rect" id="node30" href="../../db/d45/manager_8h.html" title="The AMI &#45; Asterisk Manager Interface &#45; is a TCP protocol created to manage Asterisk with third&#45;party ..." alt="" coords="1369,229,1515,256"/>
<area shape="rect" id="node31" href="../../dd/d20/event_8h.html" title="asterisk/event.h" alt="" coords="1539,229,1663,256"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/dbd/cdr_8h__dep__incl.png" border="0" usemap="#cdr_8hdep" alt=""/></div>
<map name="cdr_8hdep" id="cdr_8hdep">
<area shape="rect" id="node2" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="2157,80,2241,107"/>
<area shape="rect" id="node21" href="../../dc/df2/cdr_8c.html" title="Call Detail Record API. " alt="" coords="536,304,588,331"/>
<area shape="rect" id="node22" href="../../d7/d8e/test__cdr_8c.html" title="CDR unit tests. " alt="" coords="1136,304,1220,331"/>
<area shape="rect" id="node25" href="../../d2/db9/app__forkcdr_8c.html" title="Fork CDR application. " alt="" coords="3807,229,3914,256"/>
<area shape="rect" id="node26" href="../../d9/d47/cdr__beanstalkd_8c.html" title="Asterisk Beanstalkd CDR records. " alt="" coords="4045,229,4175,256"/>
<area shape="rect" id="node27" href="../../d2/df4/cdr__custom_8c.html" title="Custom Comma Separated Value CDR records. " alt="" coords="3240,229,3348,256"/>
<area shape="rect" id="node28" href="../../df/d5a/cdr__manager_8c.html" title="Asterisk Call Manager CDR records. " alt="" coords="3373,229,3490,256"/>
<area shape="rect" id="node29" href="../../d5/dd1/cdr__sqlite3__custom_8c.html" title="Custom SQLite3 CDR records. " alt="" coords="3514,229,3671,256"/>
<area shape="rect" id="node30" href="../../d3/de4/cdr__syslog_8c.html" title="syslog CDR logger " alt="" coords="4251,229,4351,256"/>
<area shape="rect" id="node31" href="../../d7/dd2/func__cdr_8c.html" title="Call Detail Record related dialplan functions. " alt="" coords="3696,229,3783,256"/>
<area shape="rect" id="node32" href="../../d5/d03/asterisk_8c.html" title="Top level source file for Asterisk &#45; the Open Source PBX. Implementation of PBX core functions and CL..." alt="" coords="3938,229,4021,256"/>
<area shape="rect" id="node33" href="../../db/d94/pbx_8c.html" title="Core PBX routines. " alt="" coords="367,229,423,256"/>
<area shape="rect" id="node34" href="../../d4/dd3/res__config__sqlite_8c.html" title="res_config_sqlite module. " alt="" coords="4375,229,4514,256"/>
<area shape="rect" id="node35" href="../../d0/d29/cdr__mysql_8c.html" title="MySQL CDR backend. " alt="" coords="2978,155,3077,181"/>
<area shape="rect" id="node45" href="../../df/ddb/cdr__adaptive__odbc_8c.html" title="Adaptive ODBC CDR backend. " alt="" coords="3101,155,3255,181"/>
<area shape="rect" id="node46" href="../../d4/d4c/cdr__csv_8c.html" title="Comma Separated Value CDR records. " alt="" coords="3279,155,3359,181"/>
<area shape="rect" id="node47" href="../../d8/d56/cdr__odbc_8c.html" title="ODBC CDR Backend. " alt="" coords="3383,155,3474,181"/>
<area shape="rect" id="node48" href="../../dd/d22/cdr__pgsql_8c.html" title="PostgreSQL CDR logger. " alt="" coords="3499,155,3593,181"/>
<area shape="rect" id="node49" href="../../d7/d83/cdr__radius_8c.html" title="RADIUS CDR Support. " alt="" coords="3618,155,3717,181"/>
<area shape="rect" id="node50" href="../../d0/d2a/cdr__tds_8c.html" title="FreeTDS CDR logger. " alt="" coords="3741,155,3821,181"/>
<area shape="rect" id="node3" href="../../d0/db6/app__mysql_8c.html" title="MYSQL dialplan application. " alt="" coords="1345,229,1448,256"/>
<area shape="rect" id="node4" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="2288,155,2345,181"/>
<area shape="rect" id="node5" href="../../d3/d51/chan__mobile_8c.html" title="Bluetooth Mobile Device channel driver. " alt="" coords="1473,229,1587,256"/>
<area shape="rect" id="node6" href="../../d3/d45/chan__ooh323_8h.html" title="chan_ooh323.h" alt="" coords="586,229,706,256"/>
<area shape="rect" id="node7" href="../../db/d62/app__adsiprog_8c.html" title="Program Asterisk ADSI Scripts into phone. " alt="" coords="1612,229,1731,256"/>
<area shape="rect" id="node8" href="../../de/d11/app__agent__pool_8c.html" title="Call center agent pool. " alt="" coords="1036,229,1171,256"/>
<area shape="rect" id="node9" href="../../dc/d5c/app__alarmreceiver_8c.html" title="Central Station Alarm receiver for Ademco Contact ID. " alt="" coords="1755,229,1905,256"/>
<area shape="rect" id="node10" href="../../d2/d48/app__amd_8c.html" title="Answering machine detection. " alt="" coords="1930,229,2023,256"/>
<area shape="rect" id="node11" href="../../d0/df4/app__attended__transfer_8c.html" title="Attended transfer by caller channel. " alt="" coords="2047,229,2226,256"/>
<area shape="rect" id="node12" href="../../d6/d0f/app__authenticate_8c.html" title="Execute arbitrary authenticate commands. " alt="" coords="2251,229,2396,256"/>
<area shape="rect" id="node13" href="../../d7/d7c/app__blind__transfer_8c.html" title="Blind transfer by caller channel. " alt="" coords="2420,229,2571,256"/>
<area shape="rect" id="node14" href="../../dc/d22/app__bridgewait_8c.html" title="Application to place the channel into a holding Bridge. " alt="" coords="883,229,1012,256"/>
<area shape="rect" id="node15" href="../../d2/d43/app__chanisavail_8c.html" title="Check if Channel is Available. " alt="" coords="2647,229,2781,256"/>
<area shape="rect" id="node16" href="../../d7/d1b/app__channelredirect_8c.html" title="ChannelRedirect application. " alt="" coords="2806,229,2969,256"/>
<area shape="rect" id="node17" href="../../dc/d04/app__chanspy_8c.html" title="ChanSpy: Listen in on any channel. " alt="" coords="447,229,562,256"/>
<area shape="rect" id="node18" href="../../d0/dcf/app__confbridge_8c.html" title="Conference Bridge application. " alt="" coords="961,379,1091,405"/>
<area shape="rect" id="node19" href="../../dc/d4e/stasis__bridges_8h.html" title="stasis_bridges.h" alt="" coords="1195,229,1321,256"/>
<area shape="rect" id="node20" href="../../d4/de3/confbridge_8h.html" title="confbridge.h" alt="" coords="159,304,261,331"/>
<area shape="rect" id="node23" href="../../d3/d3a/app__dahdiras_8c.html" title="Execute an ISDN RAS. " alt="" coords="2993,229,3112,256"/>
<area shape="rect" id="node24" href="../../dc/dc4/app__db_8c.html" title="Database access functions. " alt="" coords="3135,229,3215,256"/>
<area shape="rect" id="node36" href="../../d5/da1/udptl_8h.html" title="UDPTL support for T.38. " alt="" coords="661,155,727,181"/>
<area shape="rect" id="node37" href="../../d9/d4a/stasis__channels_8h.html" title="stasis_channels.h" alt="" coords="752,155,887,181"/>
<area shape="rect" id="node38" href="../../dd/d18/res__config__mysql_8c.html" title="MySQL CDR backend. " alt="" coords="963,155,1105,181"/>
<area shape="rect" id="node39" href="../../dc/d7a/bridge__features_8h.html" title="Channel Bridging API. " alt="" coords="5,155,140,181"/>
<area shape="rect" id="node40" href="../../d9/daa/app__audiosocket_8c.html" title="AudioSocket application â€“ transmit and receive audio through a TCP socket. " alt="" coords="1181,155,1322,181"/>
<area shape="rect" id="node41" href="../../d8/d6e/app__bridgeaddchan_8c.html" title="Application to place the channel into an existing Bridge. " alt="" coords="1347,155,1505,181"/>
<area shape="rect" id="node42" href="../../db/dce/say_8h.html" title="Say numbers and dates (maybe words one day too) " alt="" coords="480,155,535,181"/>
<area shape="rect" id="node43" href="../../d1/da0/app__cdr_8c.html" title="Applications connected with CDR engine. " alt="" coords="1581,155,1663,181"/>
<area shape="rect" id="node44" href="../../d6/df5/app__celgenuserevent_8c.html" title="Generate User&#45;Defined CEL event. " alt="" coords="1687,155,1858,181"/>
</map>
</div>
</div>
<p><a href="../../dc/d07/cdr_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Responsible for call detail data.  <a href="../../d4/d5d/structast__cdr.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The global options available for CDRs.  <a href="../../d4/d69/structast__cdr__config.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d11/structast__cdr__config_1_1batch__settings.html">ast_cdr_config::batch_settings</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a5f51cd53e2482c562f7f348d68f4243c"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a5f51cd53e2482c562f7f348d68f4243c">ast_cdrbe</a>) (struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *cdr)</td></tr>
<tr class="memdesc:a5f51cd53e2482c562f7f348d68f4243c"><td class="mdescLeft">&#160;</td><td class="mdescRight">CDR backend callback.  <a href="#a5f51cd53e2482c562f7f348d68f4243c">More...</a><br /></td></tr>
<tr class="separator:a5f51cd53e2482c562f7f348d68f4243c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a3142c0762d64e330ffe9f2ebe8976652"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a3142c0762d64e330ffe9f2ebe8976652">ast_cdr_batch_mode_settings</a> { <a class="el" href="../../dc/d07/cdr_8h.html#a3142c0762d64e330ffe9f2ebe8976652a7f4f25540ae06946d3941e275bed8472">BATCH_MODE_SCHEDULER_ONLY</a> = 1 &lt;&lt; 0, 
<a class="el" href="../../dc/d07/cdr_8h.html#a3142c0762d64e330ffe9f2ebe8976652a2d351981e14dab32c9749dbdd87de33c">BATCH_MODE_SAFE_SHUTDOWN</a> = 1 &lt;&lt; 1
 }<tr class="memdesc:a3142c0762d64e330ffe9f2ebe8976652"><td class="mdescLeft">&#160;</td><td class="mdescRight">CDR Batch Mode settings.  <a href="../../dc/d07/cdr_8h.html#a3142c0762d64e330ffe9f2ebe8976652">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a3142c0762d64e330ffe9f2ebe8976652"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53e2666db1174cc83384daf9049023c0"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0">ast_cdr_disposition</a> { <br />
&#160;&#160;<a class="el" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2ae5ddf52a9d2a20fc4af7b9e5dde283">AST_CDR_NOANSWER</a> = 0, 
<a class="el" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2677fdaf6d385ca80373f0666b36b613">AST_CDR_NULL</a> = (1 &lt;&lt; 0), 
<a class="el" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0af31f029a69fc67c7fca424569f708143">AST_CDR_FAILED</a> = (1 &lt;&lt; 1), 
<a class="el" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ad5945e6977fe7c1d64bacadaad7aa9ea">AST_CDR_BUSY</a> = (1 &lt;&lt; 2), 
<br />
&#160;&#160;<a class="el" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ac3e47d059a0e67a03f822f10bb7ec5b1">AST_CDR_ANSWERED</a> = (1 &lt;&lt; 3), 
<a class="el" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a115c062baa559bcadd55720d6e2383bd">AST_CDR_CONGESTION</a> = (1 &lt;&lt; 4)
<br />
 }<tr class="memdesc:a53e2666db1174cc83384daf9049023c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">CDR Flags - Disposition.  <a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a53e2666db1174cc83384daf9049023c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e9ee9382efd6d636155553beb39ca37"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37">ast_cdr_options</a> { <br />
&#160;&#160;<a class="el" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37aca37d4bd33596be9016fa99e5b7216ca">AST_CDR_FLAG_KEEP_VARS</a> = (1 &lt;&lt; 0), 
<a class="el" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a78488053ee0f7af6d41ab8a65ecddce2">AST_CDR_FLAG_DISABLE</a> = (1 &lt;&lt; 1), 
<a class="el" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a09bf3b22840e16b6d70383a4d46eaaa8">AST_CDR_FLAG_DISABLE_ALL</a> = (3 &lt;&lt; 1), 
<a class="el" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a9f4db679b58ed0fbc91017c7b0302ac6">AST_CDR_FLAG_PARTY_A</a> = (1 &lt;&lt; 3), 
<br />
&#160;&#160;<a class="el" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a5c7786f80ec35a01e0dd275218afa0f8">AST_CDR_FLAG_FINALIZE</a> = (1 &lt;&lt; 4), 
<a class="el" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37afd891053fefc9facc81cbec028769dbc">AST_CDR_FLAG_SET_ANSWER</a> = (1 &lt;&lt; 5), 
<a class="el" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37ad94c296ac6b08059afe3466ea126d3e6">AST_CDR_FLAG_RESET</a> = (1 &lt;&lt; 6), 
<a class="el" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a13988d4b84386aec3e34c0d2459dd0e1">AST_CDR_LOCK_APP</a> = (1 &lt;&lt; 7)
<br />
 }<tr class="memdesc:a7e9ee9382efd6d636155553beb39ca37"><td class="mdescLeft">&#160;</td><td class="mdescRight">CDR manipulation options. Certain function calls will manipulate the state of a CDR object based on these flags.  <a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a7e9ee9382efd6d636155553beb39ca37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d5870f3bb33cc9720f24c358a33e11b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11b">ast_cdr_settings</a> { <br />
&#160;&#160;<a class="el" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a> = 1 &lt;&lt; 0, 
<a class="el" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492">CDR_BATCHMODE</a> = 1 &lt;&lt; 1, 
<a class="el" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba06d830667dc08cfba477152a01a6a6f1">CDR_UNANSWERED</a> = 1 &lt;&lt; 2, 
<a class="el" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11bac7e09eacc1390ca5ae2adf3f8cb7f487">CDR_CONGESTION</a> = 1 &lt;&lt; 3, 
<br />
&#160;&#160;<a class="el" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba951b6a2ed4e5418e5e7bdab6f37061a1">CDR_END_BEFORE_H_EXTEN</a> = 1 &lt;&lt; 4, 
<a class="el" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba33f9a78176524d40c46cb4fd28440ffd">CDR_INITIATED_SECONDS</a> = 1 &lt;&lt; 5, 
<a class="el" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baf775028494cdd77ca759999b993d8bcd">CDR_DEBUG</a> = 1 &lt;&lt; 6
<br />
 }<tr class="memdesc:a2d5870f3bb33cc9720f24c358a33e11b"><td class="mdescLeft">&#160;</td><td class="mdescRight">CDR engine settings.  <a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11b">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a2d5870f3bb33cc9720f24c358a33e11b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a29ba08b358224b4c820e5df826273b5b"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a29ba08b358224b4c820e5df826273b5b">ast_cdr_alloc</a> (void)</td></tr>
<tr class="memdesc:a29ba08b358224b4c820e5df826273b5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a CDR record.  <a href="#a29ba08b358224b4c820e5df826273b5b">More...</a><br /></td></tr>
<tr class="separator:a29ba08b358224b4c820e5df826273b5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca84ca1a31569fb8916b3209ca35160a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#aca84ca1a31569fb8916b3209ca35160a">ast_cdr_backend_suspend</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:aca84ca1a31569fb8916b3209ca35160a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suspend a CDR backend temporarily.  <a href="#aca84ca1a31569fb8916b3209ca35160a">More...</a><br /></td></tr>
<tr class="separator:aca84ca1a31569fb8916b3209ca35160a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67072dcfd4f1b7486826cffb25dfbc6c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a67072dcfd4f1b7486826cffb25dfbc6c">ast_cdr_backend_unsuspend</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:a67072dcfd4f1b7486826cffb25dfbc6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unsuspend a CDR backend.  <a href="#a67072dcfd4f1b7486826cffb25dfbc6c">More...</a><br /></td></tr>
<tr class="separator:a67072dcfd4f1b7486826cffb25dfbc6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49ad75e3e3203433d5a7f6b63dab856d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a49ad75e3e3203433d5a7f6b63dab856d">ast_cdr_clear_property</a> (const char *channel_name, enum <a class="el" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37">ast_cdr_options</a> option)</td></tr>
<tr class="memdesc:a49ad75e3e3203433d5a7f6b63dab856d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear a property on a CDR for a channel.  <a href="#a49ad75e3e3203433d5a7f6b63dab856d">More...</a><br /></td></tr>
<tr class="separator:a49ad75e3e3203433d5a7f6b63dab856d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e23f3be8d570dbc8e6c872c566c09d9"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a0e23f3be8d570dbc8e6c872c566c09d9">ast_cdr_disp2str</a> (int disposition)</td></tr>
<tr class="memdesc:a0e23f3be8d570dbc8e6c872c566c09d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disposition to a string.  <a href="#a0e23f3be8d570dbc8e6c872c566c09d9">More...</a><br /></td></tr>
<tr class="separator:a0e23f3be8d570dbc8e6c872c566c09d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e8acc90934bc4647dd675a251d9e6ab"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a7e8acc90934bc4647dd675a251d9e6ab">ast_cdr_dup</a> (struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *cdr)</td></tr>
<tr class="memdesc:a7e8acc90934bc4647dd675a251d9e6ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Duplicate a public CDR.  <a href="#a7e8acc90934bc4647dd675a251d9e6ab">More...</a><br /></td></tr>
<tr class="separator:a7e8acc90934bc4647dd675a251d9e6ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5634f8ea707fb2fdf87abdd55a539764"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a5634f8ea707fb2fdf87abdd55a539764">ast_cdr_engine_term</a> (void)</td></tr>
<tr class="separator:a5634f8ea707fb2fdf87abdd55a539764"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a849140919895e9871b901d6805f47eba"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a849140919895e9871b901d6805f47eba">ast_cdr_fork</a> (const char *channel_name, struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a> *<a class="el" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>)</td></tr>
<tr class="memdesc:a849140919895e9871b901d6805f47eba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fork a CDR.  <a href="#a849140919895e9871b901d6805f47eba">More...</a><br /></td></tr>
<tr class="separator:a849140919895e9871b901d6805f47eba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ce5d9fd0bec829301262576b9afdaf5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a4ce5d9fd0bec829301262576b9afdaf5">ast_cdr_format_var</a> (struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *cdr, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, char **ret, char *workspace, int workspacelen, int raw)</td></tr>
<tr class="memdesc:a4ce5d9fd0bec829301262576b9afdaf5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Format a CDR variable from an already posted CDR.  <a href="#a4ce5d9fd0bec829301262576b9afdaf5">More...</a><br /></td></tr>
<tr class="separator:a4ce5d9fd0bec829301262576b9afdaf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28b931d52c71271afd601186db95fec2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a28b931d52c71271afd601186db95fec2">ast_cdr_free</a> (struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *cdr)</td></tr>
<tr class="memdesc:a28b931d52c71271afd601186db95fec2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free a CDR record.  <a href="#a28b931d52c71271afd601186db95fec2">More...</a><br /></td></tr>
<tr class="separator:a28b931d52c71271afd601186db95fec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5aba419cbee0fdecc0ada086857edaaf"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a5aba419cbee0fdecc0ada086857edaaf">ast_cdr_get_config</a> (void)</td></tr>
<tr class="memdesc:a5aba419cbee0fdecc0ada086857edaaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtain the current CDR configuration.  <a href="#a5aba419cbee0fdecc0ada086857edaaf">More...</a><br /></td></tr>
<tr class="separator:a5aba419cbee0fdecc0ada086857edaaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90a1e29081a1827a2cc4c535ef07c8c2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a90a1e29081a1827a2cc4c535ef07c8c2">ast_cdr_getvar</a> (const char *channel_name, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>, size_t length)</td></tr>
<tr class="memdesc:a90a1e29081a1827a2cc4c535ef07c8c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve a CDR variable from a channel's current CDR.  <a href="#a90a1e29081a1827a2cc4c535ef07c8c2">More...</a><br /></td></tr>
<tr class="separator:a90a1e29081a1827a2cc4c535ef07c8c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1819c3aecd7b59e2734810f52b219059"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a1819c3aecd7b59e2734810f52b219059">ast_cdr_is_enabled</a> (void)</td></tr>
<tr class="memdesc:a1819c3aecd7b59e2734810f52b219059"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return TRUE if CDR subsystem is enabled.  <a href="#a1819c3aecd7b59e2734810f52b219059">More...</a><br /></td></tr>
<tr class="separator:a1819c3aecd7b59e2734810f52b219059"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0eef9f12c37f55a0ca10c9b7d3c50063"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a0eef9f12c37f55a0ca10c9b7d3c50063">ast_cdr_message_router</a> (void)</td></tr>
<tr class="memdesc:a0eef9f12c37f55a0ca10c9b7d3c50063"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the message router for the CDR engine.  <a href="#a0eef9f12c37f55a0ca10c9b7d3c50063">More...</a><br /></td></tr>
<tr class="separator:a0eef9f12c37f55a0ca10c9b7d3c50063"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a262bb97e8cbf833e7e6c1b80209b8abb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a262bb97e8cbf833e7e6c1b80209b8abb">ast_cdr_modifier_register</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *<a class="el" href="../../d5/dd1/cdr__sqlite3__custom_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>, <a class="el" href="../../dc/d07/cdr_8h.html#a5f51cd53e2482c562f7f348d68f4243c">ast_cdrbe</a> <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a>)</td></tr>
<tr class="memdesc:a262bb97e8cbf833e7e6c1b80209b8abb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a CDR modifier.  <a href="#a262bb97e8cbf833e7e6c1b80209b8abb">More...</a><br /></td></tr>
<tr class="separator:a262bb97e8cbf833e7e6c1b80209b8abb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bee4ca0e02f5bf17d5e32eca79d7998"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a3bee4ca0e02f5bf17d5e32eca79d7998">ast_cdr_modifier_unregister</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:a3bee4ca0e02f5bf17d5e32eca79d7998"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a CDR modifier.  <a href="#a3bee4ca0e02f5bf17d5e32eca79d7998">More...</a><br /></td></tr>
<tr class="separator:a3bee4ca0e02f5bf17d5e32eca79d7998"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdbcf7f728cbacea0b28bf9c51f99b92"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#abdbcf7f728cbacea0b28bf9c51f99b92">ast_cdr_register</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *<a class="el" href="../../d5/dd1/cdr__sqlite3__custom_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>, <a class="el" href="../../dc/d07/cdr_8h.html#a5f51cd53e2482c562f7f348d68f4243c">ast_cdrbe</a> <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a>)</td></tr>
<tr class="memdesc:abdbcf7f728cbacea0b28bf9c51f99b92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a CDR handling engine.  <a href="#abdbcf7f728cbacea0b28bf9c51f99b92">More...</a><br /></td></tr>
<tr class="separator:abdbcf7f728cbacea0b28bf9c51f99b92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af73a38a457f60f9c8a86286b3280c4d8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#af73a38a457f60f9c8a86286b3280c4d8">ast_cdr_reset</a> (const char *channel_name, int keep_variables)</td></tr>
<tr class="memdesc:af73a38a457f60f9c8a86286b3280c4d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the detail record.  <a href="#af73a38a457f60f9c8a86286b3280c4d8">More...</a><br /></td></tr>
<tr class="separator:af73a38a457f60f9c8a86286b3280c4d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa16b81388933557fa1c47537897c24a9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#aa16b81388933557fa1c47537897c24a9">ast_cdr_serialize_variables</a> (const char *channel_name, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, char delim, char sep)</td></tr>
<tr class="memdesc:aa16b81388933557fa1c47537897c24a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serializes all the data and variables for a current CDR record.  <a href="#aa16b81388933557fa1c47537897c24a9">More...</a><br /></td></tr>
<tr class="separator:aa16b81388933557fa1c47537897c24a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e119010fb723a389d3aabc45c0f9435"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a2e119010fb723a389d3aabc45c0f9435">ast_cdr_set_config</a> (struct <a class="el" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a> *<a class="el" href="../../d0/d8a/muted_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>)</td></tr>
<tr class="memdesc:a2e119010fb723a389d3aabc45c0f9435"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the current CDR configuration.  <a href="#a2e119010fb723a389d3aabc45c0f9435">More...</a><br /></td></tr>
<tr class="separator:a2e119010fb723a389d3aabc45c0f9435"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcdba7928fed6e22df50a8d9b6c4cbf8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#afcdba7928fed6e22df50a8d9b6c4cbf8">ast_cdr_set_property</a> (const char *channel_name, enum <a class="el" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37">ast_cdr_options</a> option)</td></tr>
<tr class="memdesc:afcdba7928fed6e22df50a8d9b6c4cbf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a property on a CDR for a channel.  <a href="#afcdba7928fed6e22df50a8d9b6c4cbf8">More...</a><br /></td></tr>
<tr class="separator:afcdba7928fed6e22df50a8d9b6c4cbf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a5de28755e68ba2351a38210afc2423"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a1a5de28755e68ba2351a38210afc2423">ast_cdr_setuserfield</a> (const char *channel_name, const char *userfield)</td></tr>
<tr class="memdesc:a1a5de28755e68ba2351a38210afc2423"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set CDR user field for channel (stored in CDR)  <a href="#a1a5de28755e68ba2351a38210afc2423">More...</a><br /></td></tr>
<tr class="separator:a1a5de28755e68ba2351a38210afc2423"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cb15fc5160b2842ef7aa5b4f238b7fb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a4cb15fc5160b2842ef7aa5b4f238b7fb">ast_cdr_setvar</a> (const char *channel_name, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="memdesc:a4cb15fc5160b2842ef7aa5b4f238b7fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a variable on a CDR.  <a href="#a4cb15fc5160b2842ef7aa5b4f238b7fb">More...</a><br /></td></tr>
<tr class="separator:a4cb15fc5160b2842ef7aa5b4f238b7fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a915cbbaeaf06834cc96f4b8e3c224251"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d07/cdr_8h.html#a915cbbaeaf06834cc96f4b8e3c224251">ast_cdr_unregister</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:a915cbbaeaf06834cc96f4b8e3c224251"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a CDR handling engine.  <a href="#a915cbbaeaf06834cc96f4b8e3c224251">More...</a><br /></td></tr>
<tr class="separator:a915cbbaeaf06834cc96f4b8e3c224251"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Call Detail Record API. </p>
<p>Call Detail Record Engine.</p>
<dl class="section author"><dt>Author</dt><dd>Mark Spencer <a href="#" onclick="location.href='mai'+'lto:'+'mar'+'ks'+'ter'+'@d'+'igi'+'um'+'.co'+'m'; return false;">marks<span style="display: none;">.nosp@m.</span>ter@<span style="display: none;">.nosp@m.</span>digiu<span style="display: none;">.nosp@m.</span>m.co<span style="display: none;">.nosp@m.</span>m</a></dd></dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../dc/d07/cdr_8h_source.html">cdr.h</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a5f51cd53e2482c562f7f348d68f4243c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f51cd53e2482c562f7f348d68f4243c">&#9670;&nbsp;</a></span>ast_cdrbe</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* ast_cdrbe) (struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *cdr)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>CDR backend callback. </p>
<dl class="section warning"><dt>Warning</dt><dd>CDR backends should NOT attempt to access the channel associated with a CDR record. This channel is not guaranteed to exist when the CDR backend is invoked. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d07/cdr_8h_source.html#l00458">458</a> of file <a class="el" href="../../dc/d07/cdr_8h_source.html">cdr.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a3142c0762d64e330ffe9f2ebe8976652"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3142c0762d64e330ffe9f2ebe8976652">&#9670;&nbsp;</a></span>ast_cdr_batch_mode_settings</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../dc/d07/cdr_8h.html#a3142c0762d64e330ffe9f2ebe8976652">ast_cdr_batch_mode_settings</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>CDR Batch Mode settings. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a3142c0762d64e330ffe9f2ebe8976652a7f4f25540ae06946d3941e275bed8472"></a>BATCH_MODE_SCHEDULER_ONLY&#160;</td><td class="fielddoc"><p>Don't spawn a thread to handle the batches - do it on the scheduler </p>
</td></tr>
<tr><td class="fieldname"><a id="a3142c0762d64e330ffe9f2ebe8976652a2d351981e14dab32c9749dbdd87de33c"></a>BATCH_MODE_SAFE_SHUTDOWN&#160;</td><td class="fielddoc"><p>During safe shutdown, submit the batched CDRs </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../dc/d07/cdr_8h_source.html#l00230">230</a> of file <a class="el" href="../../dc/d07/cdr_8h_source.html">cdr.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                                 {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a3142c0762d64e330ffe9f2ebe8976652a7f4f25540ae06946d3941e275bed8472">BATCH_MODE_SCHEDULER_ONLY</a> = 1 &lt;&lt; 0, <span class="comment">/*!&lt; Don&#39;t spawn a thread to handle the batches - do it on the scheduler */</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a3142c0762d64e330ffe9f2ebe8976652a2d351981e14dab32c9749dbdd87de33c">BATCH_MODE_SAFE_SHUTDOWN</a> = 1 &lt;&lt; 1,  <span class="comment">/*!&lt; During safe shutdown, submit the batched CDRs */</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;};</div><div class="ttc" id="cdr_8h_html_a3142c0762d64e330ffe9f2ebe8976652a2d351981e14dab32c9749dbdd87de33c"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a3142c0762d64e330ffe9f2ebe8976652a2d351981e14dab32c9749dbdd87de33c">BATCH_MODE_SAFE_SHUTDOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00232">cdr.h:232</a></div></div>
<div class="ttc" id="cdr_8h_html_a3142c0762d64e330ffe9f2ebe8976652a7f4f25540ae06946d3941e275bed8472"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a3142c0762d64e330ffe9f2ebe8976652a7f4f25540ae06946d3941e275bed8472">BATCH_MODE_SCHEDULER_ONLY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00231">cdr.h:231</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a53e2666db1174cc83384daf9049023c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53e2666db1174cc83384daf9049023c0">&#9670;&nbsp;</a></span>ast_cdr_disposition</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0">ast_cdr_disposition</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>CDR Flags - Disposition. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a53e2666db1174cc83384daf9049023c0a2ae5ddf52a9d2a20fc4af7b9e5dde283"></a>AST_CDR_NOANSWER&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a53e2666db1174cc83384daf9049023c0a2677fdaf6d385ca80373f0666b36b613"></a>AST_CDR_NULL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a53e2666db1174cc83384daf9049023c0af31f029a69fc67c7fca424569f708143"></a>AST_CDR_FAILED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a53e2666db1174cc83384daf9049023c0ad5945e6977fe7c1d64bacadaad7aa9ea"></a>AST_CDR_BUSY&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a53e2666db1174cc83384daf9049023c0ac3e47d059a0e67a03f822f10bb7ec5b1"></a>AST_CDR_ANSWERED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a53e2666db1174cc83384daf9049023c0a115c062baa559bcadd55720d6e2383bd"></a>AST_CDR_CONGESTION&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../dc/d07/cdr_8h_source.html#l00253">253</a> of file <a class="el" href="../../dc/d07/cdr_8h_source.html">cdr.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                         {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2ae5ddf52a9d2a20fc4af7b9e5dde283">AST_CDR_NOANSWER</a>   = 0,</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2677fdaf6d385ca80373f0666b36b613">AST_CDR_NULL</a>       = (1 &lt;&lt; 0),</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0af31f029a69fc67c7fca424569f708143">AST_CDR_FAILED</a>     = (1 &lt;&lt; 1),</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ad5945e6977fe7c1d64bacadaad7aa9ea">AST_CDR_BUSY</a>       = (1 &lt;&lt; 2),</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ac3e47d059a0e67a03f822f10bb7ec5b1">AST_CDR_ANSWERED</a>   = (1 &lt;&lt; 3),</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a115c062baa559bcadd55720d6e2383bd">AST_CDR_CONGESTION</a> = (1 &lt;&lt; 4),</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;};</div><div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0a2ae5ddf52a9d2a20fc4af7b9e5dde283"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2ae5ddf52a9d2a20fc4af7b9e5dde283">AST_CDR_NOANSWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00254">cdr.h:254</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0af31f029a69fc67c7fca424569f708143"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0af31f029a69fc67c7fca424569f708143">AST_CDR_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00256">cdr.h:256</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0ac3e47d059a0e67a03f822f10bb7ec5b1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ac3e47d059a0e67a03f822f10bb7ec5b1">AST_CDR_ANSWERED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00258">cdr.h:258</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0a2677fdaf6d385ca80373f0666b36b613"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2677fdaf6d385ca80373f0666b36b613">AST_CDR_NULL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00255">cdr.h:255</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0ad5945e6977fe7c1d64bacadaad7aa9ea"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ad5945e6977fe7c1d64bacadaad7aa9ea">AST_CDR_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00257">cdr.h:257</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0a115c062baa559bcadd55720d6e2383bd"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a115c062baa559bcadd55720d6e2383bd">AST_CDR_CONGESTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00259">cdr.h:259</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7e9ee9382efd6d636155553beb39ca37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e9ee9382efd6d636155553beb39ca37">&#9670;&nbsp;</a></span>ast_cdr_options</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37">ast_cdr_options</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>CDR manipulation options. Certain function calls will manipulate the state of a CDR object based on these flags. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a7e9ee9382efd6d636155553beb39ca37aca37d4bd33596be9016fa99e5b7216ca"></a>AST_CDR_FLAG_KEEP_VARS&#160;</td><td class="fielddoc"><p>Copy variables during the operation </p>
</td></tr>
<tr><td class="fieldname"><a id="a7e9ee9382efd6d636155553beb39ca37a78488053ee0f7af6d41ab8a65ecddce2"></a>AST_CDR_FLAG_DISABLE&#160;</td><td class="fielddoc"><p>Disable the current CDR </p>
</td></tr>
<tr><td class="fieldname"><a id="a7e9ee9382efd6d636155553beb39ca37a09bf3b22840e16b6d70383a4d46eaaa8"></a>AST_CDR_FLAG_DISABLE_ALL&#160;</td><td class="fielddoc"><p>Disable the CDR and all future CDRs </p>
</td></tr>
<tr><td class="fieldname"><a id="a7e9ee9382efd6d636155553beb39ca37a9f4db679b58ed0fbc91017c7b0302ac6"></a>AST_CDR_FLAG_PARTY_A&#160;</td><td class="fielddoc"><p>Set the channel as party A </p>
</td></tr>
<tr><td class="fieldname"><a id="a7e9ee9382efd6d636155553beb39ca37a5c7786f80ec35a01e0dd275218afa0f8"></a>AST_CDR_FLAG_FINALIZE&#160;</td><td class="fielddoc"><p>Finalize the current CDRs </p>
</td></tr>
<tr><td class="fieldname"><a id="a7e9ee9382efd6d636155553beb39ca37afd891053fefc9facc81cbec028769dbc"></a>AST_CDR_FLAG_SET_ANSWER&#160;</td><td class="fielddoc"><p>If the channel is answered, set the answer time to now </p>
</td></tr>
<tr><td class="fieldname"><a id="a7e9ee9382efd6d636155553beb39ca37ad94c296ac6b08059afe3466ea126d3e6"></a>AST_CDR_FLAG_RESET&#160;</td><td class="fielddoc"><p>If set, set the start and answer time to now </p>
</td></tr>
<tr><td class="fieldname"><a id="a7e9ee9382efd6d636155553beb39ca37a13988d4b84386aec3e34c0d2459dd0e1"></a>AST_CDR_LOCK_APP&#160;</td><td class="fielddoc"><p>Prevent any further changes to the application field/data field for this CDR </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../dc/d07/cdr_8h_source.html#l00239">239</a> of file <a class="el" href="../../dc/d07/cdr_8h_source.html">cdr.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                     {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37aca37d4bd33596be9016fa99e5b7216ca">AST_CDR_FLAG_KEEP_VARS</a> = (1 &lt;&lt; 0),   <span class="comment">/*!&lt; Copy variables during the operation */</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a78488053ee0f7af6d41ab8a65ecddce2">AST_CDR_FLAG_DISABLE</a> = (1 &lt;&lt; 1),     <span class="comment">/*!&lt; Disable the current CDR */</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a09bf3b22840e16b6d70383a4d46eaaa8">AST_CDR_FLAG_DISABLE_ALL</a> = (3 &lt;&lt; 1), <span class="comment">/*!&lt; Disable the CDR and all future CDRs */</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a9f4db679b58ed0fbc91017c7b0302ac6">AST_CDR_FLAG_PARTY_A</a> = (1 &lt;&lt; 3),     <span class="comment">/*!&lt; Set the channel as party A */</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a5c7786f80ec35a01e0dd275218afa0f8">AST_CDR_FLAG_FINALIZE</a> = (1 &lt;&lt; 4),    <span class="comment">/*!&lt; Finalize the current CDRs */</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37afd891053fefc9facc81cbec028769dbc">AST_CDR_FLAG_SET_ANSWER</a> = (1 &lt;&lt; 5),  <span class="comment">/*!&lt; If the channel is answered, set the answer time to now */</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37ad94c296ac6b08059afe3466ea126d3e6">AST_CDR_FLAG_RESET</a> = (1 &lt;&lt; 6),       <span class="comment">/*!&lt; If set, set the start and answer time to now */</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a13988d4b84386aec3e34c0d2459dd0e1">AST_CDR_LOCK_APP</a> = (1 &lt;&lt; 7),         <span class="comment">/*!&lt; Prevent any further changes to the application field/data field for this CDR */</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;};</div><div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37a09bf3b22840e16b6d70383a4d46eaaa8"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a09bf3b22840e16b6d70383a4d46eaaa8">AST_CDR_FLAG_DISABLE_ALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00242">cdr.h:242</a></div></div>
<div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37a5c7786f80ec35a01e0dd275218afa0f8"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a5c7786f80ec35a01e0dd275218afa0f8">AST_CDR_FLAG_FINALIZE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00244">cdr.h:244</a></div></div>
<div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37a78488053ee0f7af6d41ab8a65ecddce2"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a78488053ee0f7af6d41ab8a65ecddce2">AST_CDR_FLAG_DISABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00241">cdr.h:241</a></div></div>
<div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37a13988d4b84386aec3e34c0d2459dd0e1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a13988d4b84386aec3e34c0d2459dd0e1">AST_CDR_LOCK_APP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00247">cdr.h:247</a></div></div>
<div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37ad94c296ac6b08059afe3466ea126d3e6"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37ad94c296ac6b08059afe3466ea126d3e6">AST_CDR_FLAG_RESET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00246">cdr.h:246</a></div></div>
<div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37afd891053fefc9facc81cbec028769dbc"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37afd891053fefc9facc81cbec028769dbc">AST_CDR_FLAG_SET_ANSWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00245">cdr.h:245</a></div></div>
<div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37a9f4db679b58ed0fbc91017c7b0302ac6"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a9f4db679b58ed0fbc91017c7b0302ac6">AST_CDR_FLAG_PARTY_A</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00243">cdr.h:243</a></div></div>
<div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37aca37d4bd33596be9016fa99e5b7216ca"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37aca37d4bd33596be9016fa99e5b7216ca">AST_CDR_FLAG_KEEP_VARS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00240">cdr.h:240</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2d5870f3bb33cc9720f24c358a33e11b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d5870f3bb33cc9720f24c358a33e11b">&#9670;&nbsp;</a></span>ast_cdr_settings</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11b">ast_cdr_settings</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>CDR engine settings. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b"></a>CDR_ENABLED&#160;</td><td class="fielddoc"><p>Enable CDRs </p>
</td></tr>
<tr><td class="fieldname"><a id="a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492"></a>CDR_BATCHMODE&#160;</td><td class="fielddoc"><p>Whether or not we should dispatch CDRs in batches </p>
</td></tr>
<tr><td class="fieldname"><a id="a2d5870f3bb33cc9720f24c358a33e11ba06d830667dc08cfba477152a01a6a6f1"></a>CDR_UNANSWERED&#160;</td><td class="fielddoc"><p>Log unanswered CDRs </p>
</td></tr>
<tr><td class="fieldname"><a id="a2d5870f3bb33cc9720f24c358a33e11bac7e09eacc1390ca5ae2adf3f8cb7f487"></a>CDR_CONGESTION&#160;</td><td class="fielddoc"><p>Treat congestion as if it were a failed call </p>
</td></tr>
<tr><td class="fieldname"><a id="a2d5870f3bb33cc9720f24c358a33e11ba951b6a2ed4e5418e5e7bdab6f37061a1"></a>CDR_END_BEFORE_H_EXTEN&#160;</td><td class="fielddoc"><p>End the CDR before the 'h' extension runs </p>
</td></tr>
<tr><td class="fieldname"><a id="a2d5870f3bb33cc9720f24c358a33e11ba33f9a78176524d40c46cb4fd28440ffd"></a>CDR_INITIATED_SECONDS&#160;</td><td class="fielddoc"><p>Include microseconds into the billing time </p>
</td></tr>
<tr><td class="fieldname"><a id="a2d5870f3bb33cc9720f24c358a33e11baf775028494cdd77ca759999b993d8bcd"></a>CDR_DEBUG&#160;</td><td class="fielddoc"><p>Enables extra debug statements </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../dc/d07/cdr_8h_source.html#l00219">219</a> of file <a class="el" href="../../dc/d07/cdr_8h_source.html">cdr.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                      {</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a> = 1 &lt;&lt; 0,               <span class="comment">/*!&lt; Enable CDRs */</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492">CDR_BATCHMODE</a> = 1 &lt;&lt; 1,             <span class="comment">/*!&lt; Whether or not we should dispatch CDRs in batches */</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba06d830667dc08cfba477152a01a6a6f1">CDR_UNANSWERED</a> = 1 &lt;&lt; 2,            <span class="comment">/*!&lt; Log unanswered CDRs */</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11bac7e09eacc1390ca5ae2adf3f8cb7f487">CDR_CONGESTION</a> = 1 &lt;&lt; 3,            <span class="comment">/*!&lt; Treat congestion as if it were a failed call */</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba951b6a2ed4e5418e5e7bdab6f37061a1">CDR_END_BEFORE_H_EXTEN</a> = 1 &lt;&lt; 4,    <span class="comment">/*!&lt; End the CDR before the &#39;h&#39; extension runs */</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba33f9a78176524d40c46cb4fd28440ffd">CDR_INITIATED_SECONDS</a> = 1 &lt;&lt; 5,     <span class="comment">/*!&lt; Include microseconds into the billing time */</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baf775028494cdd77ca759999b993d8bcd">CDR_DEBUG</a> = 1 &lt;&lt; 6,                 <span class="comment">/*!&lt; Enables extra debug statements */</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;};</div><div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba951b6a2ed4e5418e5e7bdab6f37061a1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba951b6a2ed4e5418e5e7bdab6f37061a1">CDR_END_BEFORE_H_EXTEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00224">cdr.h:224</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492">CDR_BATCHMODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00221">cdr.h:221</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba33f9a78176524d40c46cb4fd28440ffd"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba33f9a78176524d40c46cb4fd28440ffd">CDR_INITIATED_SECONDS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00225">cdr.h:225</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11baf775028494cdd77ca759999b993d8bcd"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baf775028494cdd77ca759999b993d8bcd">CDR_DEBUG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00226">cdr.h:226</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11bac7e09eacc1390ca5ae2adf3f8cb7f487"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11bac7e09eacc1390ca5ae2adf3f8cb7f487">CDR_CONGESTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00223">cdr.h:223</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00220">cdr.h:220</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba06d830667dc08cfba477152a01a6a6f1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba06d830667dc08cfba477152a01a6a6f1">CDR_UNANSWERED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00222">cdr.h:222</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a29ba08b358224b4c820e5df826273b5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29ba08b358224b4c820e5df826273b5b">&#9670;&nbsp;</a></span>ast_cdr_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a>* ast_cdr_alloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a CDR record. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">a</td><td>malloc'd <a class="el" href="../../d4/d5d/structast__cdr.html" title="Responsible for call detail data. ">ast_cdr</a> structure </td></tr>
    <tr><td class="paramname">NULL</td><td>on error (malloc failure) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03422">3422</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l02998">ast_cdr_dup()</a>.</p>
<div class="fragment"><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;{</div><div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *x;</div><div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;</div><div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;   x = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*x));</div><div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;   <span class="keywordflow">return</span> x;</div><div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;}</div><div class="ttc" id="structast__cdr_html"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html">ast_cdr</a></div><div class="ttdoc">Responsible for call detail data. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00276">cdr.h:276</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aca84ca1a31569fb8916b3209ca35160a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca84ca1a31569fb8916b3209ca35160a">&#9670;&nbsp;</a></span>ast_cdr_backend_suspend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_backend_suspend </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Suspend a CDR backend temporarily. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>The backend is suspdended </td></tr>
    <tr><td class="paramname">-1</td><td>The backend could not be suspended </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02866">2866</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00322">cdr_beitem::name</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00082">load_config()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00383">my_unload_module()</a>, and <a class="el" href="../../d8/d56/cdr__odbc_8c_source.html#l00193">odbc_load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;{</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;   <span class="keywordtype">int</span> success = -1;</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dc6/structcdr__beitem.html">cdr_beitem</a> *i = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d5/d08/structbe__list.html">be_list</a>);</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d08/structbe__list.html">be_list</a>, i, list) {</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, i-&gt;<a class="code" href="../../dc/dc6/structcdr__beitem.html#a9997d8ee2df51d18efed254a5aa016fd">name</a>)) {</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Suspending CDR backend %s\n&quot;</span>, i-&gt;<a class="code" href="../../dc/dc6/structcdr__beitem.html#a9997d8ee2df51d18efed254a5aa016fd">name</a>);</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;         i-&gt;suspended = 1;</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;         success = 0;</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;      }</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;   }</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d08/structbe__list.html">be_list</a>);</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;   <span class="keywordflow">return</span> success;</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structcdr__beitem_html"><div class="ttname"><a href="../../dc/dc6/structcdr__beitem.html">cdr_beitem</a></div><div class="ttdoc">Registration object for CDR backends. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00321">cdr.c:321</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structcdr__beitem_html_a9997d8ee2df51d18efed254a5aa016fd"><div class="ttname"><a href="../../dc/dc6/structcdr__beitem.html#a9997d8ee2df51d18efed254a5aa016fd">cdr_beitem::name</a></div><div class="ttdeci">char name[20]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00322">cdr.c:322</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structbe__list_html"><div class="ttname"><a href="../../d5/d08/structbe__list.html">be_list</a></div><div class="ttdoc">List of registered backends. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00330">cdr.c:330</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a67072dcfd4f1b7486826cffb25dfbc6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67072dcfd4f1b7486826cffb25dfbc6c">&#9670;&nbsp;</a></span>ast_cdr_backend_unsuspend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_backend_unsuspend </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unsuspend a CDR backend. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>The backend was unsuspended </td></tr>
    <tr><td class="paramname">-1</td><td>The back could not be unsuspended </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02884">2884</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00322">cdr_beitem::name</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00082">load_config()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00597">my_load_module()</a>, and <a class="el" href="../../d8/d56/cdr__odbc_8c_source.html#l00193">odbc_load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;{</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;   <span class="keywordtype">int</span> success = -1;</div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dc6/structcdr__beitem.html">cdr_beitem</a> *i = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d5/d08/structbe__list.html">be_list</a>);</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d08/structbe__list.html">be_list</a>, i, list) {</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, i-&gt;<a class="code" href="../../dc/dc6/structcdr__beitem.html#a9997d8ee2df51d18efed254a5aa016fd">name</a>)) {</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Unsuspending CDR backend %s\n&quot;</span>, i-&gt;<a class="code" href="../../dc/dc6/structcdr__beitem.html#a9997d8ee2df51d18efed254a5aa016fd">name</a>);</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;         i-&gt;suspended = 0;</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;         success = 0;</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;      }</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;   }</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d08/structbe__list.html">be_list</a>);</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;   <span class="keywordflow">return</span> success;</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structcdr__beitem_html"><div class="ttname"><a href="../../dc/dc6/structcdr__beitem.html">cdr_beitem</a></div><div class="ttdoc">Registration object for CDR backends. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00321">cdr.c:321</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structcdr__beitem_html_a9997d8ee2df51d18efed254a5aa016fd"><div class="ttname"><a href="../../dc/dc6/structcdr__beitem.html#a9997d8ee2df51d18efed254a5aa016fd">cdr_beitem::name</a></div><div class="ttdeci">char name[20]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00322">cdr.c:322</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structbe__list_html"><div class="ttname"><a href="../../d5/d08/structbe__list.html">be_list</a></div><div class="ttdoc">List of registered backends. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00330">cdr.c:330</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a49ad75e3e3203433d5a7f6b63dab856d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49ad75e3e3203433d5a7f6b63dab856d">&#9670;&nbsp;</a></span>ast_cdr_clear_property()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_clear_property </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>channel_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37">ast_cdr_options</a>&#160;</td>
          <td class="paramname"><em>option</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear a property on a CDR for a channel. </p>
<dl class="section since"><dt>Since</dt><dd>12 Clears a flag previously set by <a class="el" href="../../dc/df2/cdr_8c.html#afcdba7928fed6e22df50a8d9b6c4cbf8">ast_cdr_set_property</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel_name</td><td>The CDR's channel </td></tr>
    <tr><td class="paramname">option</td><td>Option to clear from the CDR</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">1</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03575">3575</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00077">ast_clear_flag</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03312">cdr_object_get_by_name()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00723">cdr_object::flags</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da0/app__cdr_8c_source.html#l00131">appcdr_callback()</a>, <a class="el" href="../../d7/d8e/test__cdr_8c_source.html#l02324">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00400">cdr_prop_write_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;{</div><div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;</div><div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;   cdr = <a class="code" href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a>(channel_name);</div><div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;   }</div><div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;</div><div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cdr);</div><div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;   <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;      <span class="keywordflow">if</span> (it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a> == &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a>) {</div><div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;      }</div><div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(&amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">flags</a>, option);</div><div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;   }</div><div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cdr);</div><div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;</div><div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr);</div><div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;}</div><div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structcdr__object_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">cdr_object::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00723">cdr.c:723</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="cdr_8c_html_a89dc924870cf4d81f8841a3b4f33d722"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a></div><div class="ttdeci">static struct cdr_object * cdr_object_get_by_name(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03312">cdr.c:3312</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="utils_8h_html_a7b260320610a09017a9416398acd0a70"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a></div><div class="ttdeci">#define ast_clear_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00077">utils.h:77</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f50dd95a426c8a70710afc315164f04"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table finalized_state_fn_table</div><div class="ttdoc">The virtual table for the finalized state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00694">cdr.c:694</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0e23f3be8d570dbc8e6c872c566c09d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e23f3be8d570dbc8e6c872c566c09d9">&#9670;&nbsp;</a></span>ast_cdr_disp2str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_cdr_disp2str </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>disposition</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disposition to a string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">disposition</td><td>input binary form Converts the binary form of a disposition to string form. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the string form </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03430">3430</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d07/cdr_8h_source.html#l00258">AST_CDR_ANSWERED</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00257">AST_CDR_BUSY</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00259">AST_CDR_CONGESTION</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00256">AST_CDR_FAILED</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00254">AST_CDR_NOANSWER</a>, and <a class="el" href="../../dc/d07/cdr_8h_source.html#l00255">AST_CDR_NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df2/cdr_8c_source.html#l03050">ast_cdr_format_var()</a>, <a class="el" href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00162">beanstalk_put()</a>, <a class="el" href="../../d4/d4c/cdr__csv_8c_source.html#l00211">build_csv_record()</a>, <a class="el" href="../../d7/d83/cdr__radius_8c_source.html#l00098">build_radius_record()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01440">cdr_object_finalize()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00248">cdr_read_callback()</a>, <a class="el" href="../../d8/d56/cdr__odbc_8c_source.html#l00071">execute_cb()</a>, <a class="el" href="../../df/d5a/cdr__manager_8c_source.html#l00273">manager_log()</a>, and <a class="el" href="../../d0/d2a/cdr__tds_8c_source.html#l00109">tds_log()</a>.</p>
<div class="fragment"><div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;{</div><div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">disposition</a>) {</div><div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2677fdaf6d385ca80373f0666b36b613">AST_CDR_NULL</a>:</div><div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;NO ANSWER&quot;</span>; <span class="comment">/* by default, for backward compatibility */</span></div><div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2ae5ddf52a9d2a20fc4af7b9e5dde283">AST_CDR_NOANSWER</a>:</div><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;NO ANSWER&quot;</span>;</div><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0af31f029a69fc67c7fca424569f708143">AST_CDR_FAILED</a>:</div><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;FAILED&quot;</span>;</div><div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ad5945e6977fe7c1d64bacadaad7aa9ea">AST_CDR_BUSY</a>:</div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;BUSY&quot;</span>;</div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ac3e47d059a0e67a03f822f10bb7ec5b1">AST_CDR_ANSWERED</a>:</div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;ANSWERED&quot;</span>;</div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a115c062baa559bcadd55720d6e2383bd">AST_CDR_CONGESTION</a>:</div><div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;CONGESTION&quot;</span>;</div><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;   }</div><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;UNKNOWN&quot;</span>;</div><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;}</div><div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0a2ae5ddf52a9d2a20fc4af7b9e5dde283"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2ae5ddf52a9d2a20fc4af7b9e5dde283">AST_CDR_NOANSWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00254">cdr.h:254</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0af31f029a69fc67c7fca424569f708143"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0af31f029a69fc67c7fca424569f708143">AST_CDR_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00256">cdr.h:256</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0ac3e47d059a0e67a03f822f10bb7ec5b1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ac3e47d059a0e67a03f822f10bb7ec5b1">AST_CDR_ANSWERED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00258">cdr.h:258</a></div></div>
<div class="ttc" id="structcdr__object_html_a462f09f05430fd152a129a88f52cfce7"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a462f09f05430fd152a129a88f52cfce7">cdr_object::disposition</a></div><div class="ttdeci">enum ast_cdr_disposition disposition</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00717">cdr.c:717</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0a2677fdaf6d385ca80373f0666b36b613"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a2677fdaf6d385ca80373f0666b36b613">AST_CDR_NULL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00255">cdr.h:255</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0ad5945e6977fe7c1d64bacadaad7aa9ea"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0ad5945e6977fe7c1d64bacadaad7aa9ea">AST_CDR_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00257">cdr.h:257</a></div></div>
<div class="ttc" id="cdr_8h_html_a53e2666db1174cc83384daf9049023c0a115c062baa559bcadd55720d6e2383bd"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a53e2666db1174cc83384daf9049023c0a115c062baa559bcadd55720d6e2383bd">AST_CDR_CONGESTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00259">cdr.h:259</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7e8acc90934bc4647dd675a251d9e6ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e8acc90934bc4647dd675a251d9e6ab">&#9670;&nbsp;</a></span>ast_cdr_dup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a>* ast_cdr_dup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *&#160;</td>
          <td class="paramname"><em>cdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Duplicate a public CDR. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cdr</td><td>the record to duplicate</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">a</td><td>malloc'd <a class="el" href="../../d4/d5d/structast__cdr.html" title="Responsible for call detail data. ">ast_cdr</a> structure, </td></tr>
    <tr><td class="paramname">NULL</td><td>on error (malloc failure) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02998">2998</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l03422">ast_cdr_alloc()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00680">AST_LIST_HEAD_INIT_NOLOCK</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00746">copy_variables()</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00325">ast_cdr::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/d07/cdr_8h_source.html#l00323">ast_cdr::varshead</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/df4/cdr__custom_8c_source.html#l00129">custom_log()</a>, <a class="el" href="../../d5/dd1/cdr__sqlite3__custom_8c_source.html#l00119">load_values_config()</a>, <a class="el" href="../../df/d5a/cdr__manager_8c_source.html#l00273">manager_log()</a>, and <a class="el" href="../../d3/de4/cdr__syslog_8c_source.html#l00086">syslog_log()</a>.</p>
<div class="fragment"><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;{</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *newcdr;</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;   }</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;   newcdr = <a class="code" href="../../dc/df2/cdr_8c.html#a29ba08b358224b4c820e5df826273b5b">ast_cdr_alloc</a>();</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;   <span class="keywordflow">if</span> (!newcdr) {</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;   }</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;   *newcdr = *cdr;</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(&amp;newcdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a9ffb22045a8f14bef8f2137cd779ab25">varshead</a>);</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a7b10f449baa91a185f72f31509abb95f">copy_variables</a>(&amp;newcdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a9ffb22045a8f14bef8f2137cd779ab25">varshead</a>, &amp;cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a9ffb22045a8f14bef8f2137cd779ab25">varshead</a>);</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;   newcdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a8098d02138e27b57d184b260b6669eed">next</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;   <span class="keywordflow">return</span> newcdr;</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;}</div><div class="ttc" id="structast__cdr_html_a8098d02138e27b57d184b260b6669eed"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a8098d02138e27b57d184b260b6669eed">ast_cdr::next</a></div><div class="ttdeci">struct ast_cdr * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00325">cdr.h:325</a></div></div>
<div class="ttc" id="cdr_8c_html_a29ba08b358224b4c820e5df826273b5b"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a29ba08b358224b4c820e5df826273b5b">ast_cdr_alloc</a></div><div class="ttdeci">struct ast_cdr * ast_cdr_alloc(void)</div><div class="ttdoc">Allocate a CDR record. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03422">cdr.c:3422</a></div></div>
<div class="ttc" id="cdr_8c_html_a7b10f449baa91a185f72f31509abb95f"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a7b10f449baa91a185f72f31509abb95f">copy_variables</a></div><div class="ttdeci">static int copy_variables(struct varshead *to_list, struct varshead *from_list)</div><div class="ttdoc">Copy variables from one list to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00746">cdr.c:746</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__cdr_html_a9ffb22045a8f14bef8f2137cd779ab25"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a9ffb22045a8f14bef8f2137cd779ab25">ast_cdr::varshead</a></div><div class="ttdeci">struct varshead varshead</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00323">cdr.h:323</a></div></div>
<div class="ttc" id="structast__cdr_html"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html">ast_cdr</a></div><div class="ttdoc">Responsible for call detail data. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00276">cdr.h:276</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0d1f922e093ac18824a7863fe3f5fa27"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a></div><div class="ttdeci">#define AST_LIST_HEAD_INIT_NOLOCK(head)</div><div class="ttdoc">Initializes a list head structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00680">linkedlists.h:680</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5634f8ea707fb2fdf87abdd55a539764"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5634f8ea707fb2fdf87abdd55a539764">&#9670;&nbsp;</a></span>ast_cdr_engine_term()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_cdr_engine_term </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Submit any remaining CDRs and prepare for shutdown </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04577">4577</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00232">BATCH_MODE_SAFE_SHUTDOWN</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00221">CDR_BATCHMODE</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03766">cdr_submit_batch()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, and <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00288">stasis_message_router_publish_sync()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01921">can_safely_quit()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l04277">finalize_batch_mode()</a>.</p>
<div class="fragment"><div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;{</div><div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d57/structmodule__config.html">module_config</a> *, mod_cfg, <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(module_configs), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;</div><div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;   <span class="comment">/* Since this is called explicitly during process shutdown, we might not have ever</span></div><div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;<span class="comment">    * been initialized. If so, the config object will be NULL.</span></div><div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;   <span class="keywordflow">if</span> (!mod_cfg) {</div><div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;   }</div><div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;</div><div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;   <span class="keywordflow">if</span> (cdr_sync_message_type()) {</div><div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;      <span class="keywordtype">void</span> *payload;</div><div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="code" href="../../d8/d9e/structmessage.html">message</a>;</div><div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;</div><div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>) {</div><div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;      }</div><div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;</div><div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;      <span class="comment">/* Make sure we have the needed items */</span></div><div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;      payload = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*payload), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;      <span class="keywordflow">if</span> (!payload) {</div><div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;      }</div><div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;</div><div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;CDR Engine termination request received; waiting on messages...\n&quot;</span>);</div><div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;</div><div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;      message = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(cdr_sync_message_type(), payload);</div><div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;      <span class="keywordflow">if</span> (message) {</div><div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;         <a class="code" href="../../d4/d25/stasis__message__router_8h.html#afa3a5be12d8f5918aad9d1bb97c23893">stasis_message_router_publish_sync</a>(<a class="code" href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>, message);</div><div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;      }</div><div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(message);</div><div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(payload);</div><div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;   }</div><div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;</div><div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;general-&gt;settings, <a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492">CDR_BATCHMODE</a>)) {</div><div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#ae78649474f95f4adb19a0791ed39f4fc">cdr_submit_batch</a>(<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;mod_cfg-&gt;general-&gt;batch_settings.settings, <a class="code" href="../../dc/d07/cdr_8h.html#a3142c0762d64e330ffe9f2ebe8976652a2d351981e14dab32c9749dbdd87de33c">BATCH_MODE_SAFE_SHUTDOWN</a>));</div><div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;   }</div><div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a6d6d7bdd31cb1b6f84f2e447a7a2c6c2"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a></div><div class="ttdeci">static struct stasis_message_router * stasis_router</div><div class="ttdoc">Message router for stasis messages regarding channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00371">cdr.c:371</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="cdr_8h_html_a3142c0762d64e330ffe9f2ebe8976652a2d351981e14dab32c9749dbdd87de33c"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a3142c0762d64e330ffe9f2ebe8976652a2d351981e14dab32c9749dbdd87de33c">BATCH_MODE_SAFE_SHUTDOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00232">cdr.h:232</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_afa3a5be12d8f5918aad9d1bb97c23893"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#afa3a5be12d8f5918aad9d1bb97c23893">stasis_message_router_publish_sync</a></div><div class="ttdeci">void stasis_message_router_publish_sync(struct stasis_message_router *router, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a message router&amp;#39;s subscription synchronously. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00288">stasis_message_router.c:288</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="cdr_8c_html_ae78649474f95f4adb19a0791ed39f4fc"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ae78649474f95f4adb19a0791ed39f4fc">cdr_submit_batch</a></div><div class="ttdeci">static void cdr_submit_batch(int shutdown)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03766">cdr.c:3766</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11baa89cd2e6775acaca593f4e14c83dc492">CDR_BATCHMODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00221">cdr.h:221</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structmodule__config_html"><div class="ttname"><a href="../../db/d57/structmodule__config.html">module_config</a></div><div class="ttdoc">The configuration settings for this module. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00222">cdr.c:222</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a849140919895e9871b901d6805f47eba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a849140919895e9871b901d6805f47eba">&#9670;&nbsp;</a></span>ast_cdr_fork()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_fork </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>channel_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a> *&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fork a CDR. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel_name</td><td>The name of the channel whose CDR should be forked </td></tr>
    <tr><td class="paramname">options</td><td>Options to control how the fork occurs.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">-1</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03637">3637</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l00719">cdr_object::answer</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::appl</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00244">AST_CDR_FLAG_FINALIZE</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00240">AST_CDR_FLAG_KEEP_VARS</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00246">AST_CDR_FLAG_RESET</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00245">AST_CDR_FLAG_SET_ANSWER</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00247">AST_CDR_LOCK_APP</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00077">ast_clear_flag</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00042">AST_STATE_UP</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::bridge</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00949">cdr_all_relink()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01075">cdr_object_create_and_append()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01440">cdr_object_finalize()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03312">cdr_object_get_by_name()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00821">cdr_object_transition_state()</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::context</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00746">copy_variables()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::data</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00118">exten</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00734">cdr_object::exten</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00707">cdr_object_snapshot::flags</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00723">cdr_object::flags</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00777">free_variables()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00736">cdr_object::last</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00721">cdr_object::lastevent</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00602">SCOPED_AO2LOCK</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00718">cdr_object::start</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00153">ast_channel_snapshot::state</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00706">cdr_object_snapshot::userfield</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00708">cdr_object_snapshot::variables</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d8e/test__cdr_8c_source.html#l02120">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d2/db9/app__forkcdr_8c_source.html#l00115">forkcdr_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;{</div><div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *, cdr, <a class="code" href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a>(channel_name), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *new_cdr;</div><div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr_obj;</div><div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;</div><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;   }</div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;</div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;   {</div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, cdr);</div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;      <span class="keyword">struct </span>timeval now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;</div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;      cdr_obj = cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a761f66169af05fad3479b4e80ddd6315">last</a>;</div><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;      <span class="keywordflow">if</span> (cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a> == &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a>) {</div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;         <span class="comment">/* If the last CDR in the chain is finalized, don&#39;t allow a fork -</span></div><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;<span class="comment">          * things are already dying at this point</span></div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;      }</div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;</div><div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;      <span class="comment">/* Copy over the basic CDR information. The Party A information is</span></div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;<span class="comment">       * copied over automatically as part of the append</span></div><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Forking CDR for channel %s\n&quot;</span>, cdr-&gt;party_a.snapshot-&gt;base-&gt;name);</div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;      new_cdr = <a class="code" href="../../dc/df2/cdr_8c.html#af90187a3766c8b50aa4b984a62e30219">cdr_object_create_and_append</a>(cdr, &amp;now);</div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;      <span class="keywordflow">if</span> (!new_cdr) {</div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;      }</div><div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;      new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a> = cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a>;</div><div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(new_cdr, bridge, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">bridge</a>);</div><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(new_cdr, appl, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af535fe520577fb6b8795dea539bd0230">appl</a>);</div><div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(new_cdr, data, cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7870f447ef3c43ebf148da15363b25dd">data</a>);</div><div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(new_cdr, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, cdr-&gt;context);</div><div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(new_cdr, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, cdr-&gt;exten);</div><div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;      new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">flags</a> = cdr-&gt;<a class="code" href="../../dc/dac/structast__flags.html#ac92588540e8c1d014a08cd8a45462b19">flags</a>;</div><div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;      <span class="comment">/* Explicitly clear the AST_CDR_LOCK_APP flag - we want</span></div><div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;<span class="comment">       * the application to be changed on the new CDR if the</span></div><div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;<span class="comment">       * dialplan demands it</span></div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(&amp;new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a13988d4b84386aec3e34c0d2459dd0e1">AST_CDR_LOCK_APP</a>);</div><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;</div><div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;      <span class="comment">/* If there&#39;s a Party B, copy it over as well */</span></div><div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;      <span class="keywordflow">if</span> (cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>) {</div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;         new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a> = cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>;</div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>, +1);</div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#a9b92f90cd704735201d9c840842bd0bc">cdr_all_relink</a>(new_cdr);</div><div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;         strcpy(new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>, cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>);</div><div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;         new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#ac92588540e8c1d014a08cd8a45462b19">flags</a> = cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#ac92588540e8c1d014a08cd8a45462b19">flags</a>;</div><div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(options, <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37aca37d4bd33596be9016fa99e5b7216ca">AST_CDR_FLAG_KEEP_VARS</a>)) {</div><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;            <a class="code" href="../../dc/df2/cdr_8c.html#a7b10f449baa91a185f72f31509abb95f">copy_variables</a>(&amp;new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>, &amp;cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>);</div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;         }</div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;      }</div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;      new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a> = cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a>;</div><div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;      new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a> = cdr_obj-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>;</div><div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;      new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">lastevent</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;</div><div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;      <span class="comment">/* Modify the times based on the flags passed in */</span></div><div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(options, <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37afd891053fefc9facc81cbec028769dbc">AST_CDR_FLAG_SET_ANSWER</a>)</div><div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;            &amp;&amp; new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab772a54f7effa7ab06616e36ae30988a">state</a> == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>) {</div><div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;         new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;      }</div><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(options, <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37ad94c296ac6b08059afe3466ea126d3e6">AST_CDR_FLAG_RESET</a>)) {</div><div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;         new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;         new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;      }</div><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;</div><div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;      <span class="comment">/* Create and append, by default, copies over the variables */</span></div><div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(options, <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37aca37d4bd33596be9016fa99e5b7216ca">AST_CDR_FLAG_KEEP_VARS</a>)) {</div><div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;         <a class="code" href="../../dc/df2/cdr_8c.html#ae23ebf460a645c91c4f3c471c3ecd925">free_variables</a>(&amp;new_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>);</div><div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;      }</div><div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;</div><div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;      <span class="comment">/* Finalize any current CDRs */</span></div><div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(options, <a class="code" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a5c7786f80ec35a01e0dd275218afa0f8">AST_CDR_FLAG_FINALIZE</a>)) {</div><div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;         <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr != new_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;            <span class="keywordflow">if</span> (it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a> == &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a>) {</div><div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;            }</div><div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;            <span class="comment">/* Force finalization on the CDR. This will bypass any checks for</span></div><div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;<span class="comment">             * end before &#39;h&#39; extension.</span></div><div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;            <a class="code" href="../../dc/df2/cdr_8c.html#a34a146403fab13026f6e302c753be741">cdr_object_finalize</a>(it_cdr);</div><div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;            <a class="code" href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a>(it_cdr, &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a>);</div><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;         }</div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;      }</div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;   }</div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;</div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;}</div><div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a2e42d02e62d0d56d645c901011bb767b"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">cdr_object_snapshot::variables</a></div><div class="ttdeci">struct varshead variables</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00708">cdr.c:708</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37a5c7786f80ec35a01e0dd275218afa0f8"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a5c7786f80ec35a01e0dd275218afa0f8">AST_CDR_FLAG_FINALIZE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00244">cdr.h:244</a></div></div>
<div class="ttc" id="structast__flags_html_ac92588540e8c1d014a08cd8a45462b19"><div class="ttname"><a href="../../dc/dac/structast__flags.html#ac92588540e8c1d014a08cd8a45462b19">ast_flags::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00200">utils.h:200</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="structcdr__object_html_a621c14aed7c59835c5bc93bc88e8f3d9"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">cdr_object::answer</a></div><div class="ttdeci">struct timeval answer</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00719">cdr.c:719</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00042">channelstate.h:42</a></div></div>
<div class="ttc" id="structcdr__object_html_ad80305b5e16da9c2675d5f057bd69386"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">cdr_object::start</a></div><div class="ttdeci">struct timeval start</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00718">cdr.c:718</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_ac92588540e8c1d014a08cd8a45462b19"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#ac92588540e8c1d014a08cd8a45462b19">cdr_object_snapshot::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00707">cdr.c:707</a></div></div>
<div class="ttc" id="cdr_8c_html_a7b10f449baa91a185f72f31509abb95f"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a7b10f449baa91a185f72f31509abb95f">copy_variables</a></div><div class="ttdeci">static int copy_variables(struct varshead *to_list, struct varshead *from_list)</div><div class="ttdoc">Copy variables from one list to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00746">cdr.c:746</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="structcdr__object_html_af535fe520577fb6b8795dea539bd0230"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af535fe520577fb6b8795dea539bd0230">cdr_object::appl</a></div><div class="ttdeci">const ast_string_field appl</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a2d480b13820a3a97582a1a138036aa25"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">cdr_object_snapshot::userfield</a></div><div class="ttdeci">char userfield[AST_MAX_USER_FIELD]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00706">cdr.c:706</a></div></div>
<div class="ttc" id="structcdr__object_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">cdr_object::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00723">cdr.c:723</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="cdr_8c_html_a89dc924870cf4d81f8841a3b4f33d722"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a></div><div class="ttdeci">static struct cdr_object * cdr_object_get_by_name(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03312">cdr.c:3312</a></div></div>
<div class="ttc" id="cdr_8c_html_ae23ebf460a645c91c4f3c471c3ecd925"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ae23ebf460a645c91c4f3c471c3ecd925">free_variables</a></div><div class="ttdeci">static void free_variables(struct varshead *headp)</div><div class="ttdoc">Delete all variables from a variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00777">cdr.c:777</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37a13988d4b84386aec3e34c0d2459dd0e1"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37a13988d4b84386aec3e34c0d2459dd0e1">AST_CDR_LOCK_APP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00247">cdr.h:247</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="structcdr__object_html_a761f66169af05fad3479b4e80ddd6315"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a761f66169af05fad3479b4e80ddd6315">cdr_object::last</a></div><div class="ttdeci">struct cdr_object * last</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00736">cdr.c:736</a></div></div>
<div class="ttc" id="structcdr__object_html_a7870f447ef3c43ebf148da15363b25dd"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7870f447ef3c43ebf148da15363b25dd">cdr_object::data</a></div><div class="ttdeci">const ast_string_field data</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="structcdr__object_html_a7543dbd0c668cd22684e8d5aea0b5b93"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">cdr_object::lastevent</a></div><div class="ttdeci">struct timeval lastevent</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00721">cdr.c:721</a></div></div>
<div class="ttc" id="lock_8h_html_a2cfb325ed371eb6e629446bac4676e9f"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a></div><div class="ttdeci">#define SCOPED_AO2LOCK(varname, obj)</div><div class="ttdoc">scoped lock specialization for ao2 mutexes. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00602">lock.h:602</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ab772a54f7effa7ab06616e36ae30988a"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab772a54f7effa7ab06616e36ae30988a">ast_channel_snapshot::state</a></div><div class="ttdeci">enum ast_channel_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00153">stasis_channels.h:153</a></div></div>
<div class="ttc" id="utils_8h_html_a7b260320610a09017a9416398acd0a70"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a></div><div class="ttdeci">#define ast_clear_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00077">utils.h:77</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f50dd95a426c8a70710afc315164f04"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table finalized_state_fn_table</div><div class="ttdoc">The virtual table for the finalized state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00694">cdr.c:694</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37ad94c296ac6b08059afe3466ea126d3e6"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37ad94c296ac6b08059afe3466ea126d3e6">AST_CDR_FLAG_RESET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00246">cdr.h:246</a></div></div>
<div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37afd891053fefc9facc81cbec028769dbc"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37afd891053fefc9facc81cbec028769dbc">AST_CDR_FLAG_SET_ANSWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00245">cdr.h:245</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="cdr_8c_html_af90187a3766c8b50aa4b984a62e30219"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#af90187a3766c8b50aa4b984a62e30219">cdr_object_create_and_append</a></div><div class="ttdeci">static struct cdr_object * cdr_object_create_and_append(struct cdr_object *cdr, const struct timeval *event_time)</div><div class="ttdoc">Create a new cdr_object and append it to an existing chain. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01075">cdr.c:1075</a></div></div>
<div class="ttc" id="cdr_8c_html_a34a146403fab13026f6e302c753be741"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a34a146403fab13026f6e302c753be741">cdr_object_finalize</a></div><div class="ttdeci">static void cdr_object_finalize(struct cdr_object *cdr)</div><div class="ttdoc">Finalize a CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01440">cdr.c:1440</a></div></div>
<div class="ttc" id="cdr_8h_html_a7e9ee9382efd6d636155553beb39ca37aca37d4bd33596be9016fa99e5b7216ca"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37aca37d4bd33596be9016fa99e5b7216ca">AST_CDR_FLAG_KEEP_VARS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00240">cdr.h:240</a></div></div>
<div class="ttc" id="structcdr__object_html_af089037b58d169050b5b9242ab0b033f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af089037b58d169050b5b9242ab0b033f">cdr_object::bridge</a></div><div class="ttdeci">const ast_string_field bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00734">cdr.c:734</a></div></div>
<div class="ttc" id="cdr_8c_html_a9b92f90cd704735201d9c840842bd0bc"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a9b92f90cd704735201d9c840842bd0bc">cdr_all_relink</a></div><div class="ttdeci">static void cdr_all_relink(struct cdr_object *cdr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00949">cdr.c:949</a></div></div>
<div class="ttc" id="cdr_8c_html_aec9ada03f8f99aa4c972b141bcbd2ee3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aec9ada03f8f99aa4c972b141bcbd2ee3">cdr_object_transition_state</a></div><div class="ttdeci">static void cdr_object_transition_state(struct cdr_object *cdr, struct cdr_object_fn_table *fn_table)</div><div class="ttdoc">Transition a cdr_object to a new state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00821">cdr.c:821</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4ce5d9fd0bec829301262576b9afdaf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ce5d9fd0bec829301262576b9afdaf5">&#9670;&nbsp;</a></span>ast_cdr_format_var()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_cdr_format_var </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *&#160;</td>
          <td class="paramname"><em>cdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>workspace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>workspacelen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>raw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Format a CDR variable from an already posted CDR. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cdr</td><td>The dispatched CDR to process </td></tr>
    <tr><td class="paramname">name</td><td>The name of the variable </td></tr>
    <tr><td class="paramname">ret</td><td>Pointer to the formatted buffer </td></tr>
    <tr><td class="paramname">workspace</td><td>A pointer to the buffer to use to format the variable </td></tr>
    <tr><td class="paramname">workspacelen</td><td>The size of workspace </td></tr>
    <tr><td class="paramname">raw</td><td>If non-zero and a date/time is extraced, provide epoch seconds. Otherwise format as a date/time stamp </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03050">3050</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d07/cdr_8h_source.html#l00308">ast_cdr::accountcode</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00306">ast_cdr::amaflags</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00296">ast_cdr::answer</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03430">ast_cdr_disp2str()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04418">ast_channel_amaflags2string()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00108">ast_tvzero()</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00302">ast_cdr::billsec</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03018">cdr_format_var_internal()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03035">cdr_get_tv()</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00286">ast_cdr::channel</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00278">ast_cdr::clid</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00284">ast_cdr::dcontext</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00304">ast_cdr::disposition</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00282">ast_cdr::dst</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00288">ast_cdr::dstchannel</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00300">ast_cdr::duration</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00298">ast_cdr::end</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00290">ast_cdr::lastapp</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00292">ast_cdr::lastdata</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00316">ast_cdr::linkedid</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00310">ast_cdr::peeraccount</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00320">ast_cdr::sequence</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00280">ast_cdr::src</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00294">ast_cdr::start</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00314">ast_cdr::uniqueid</a>, and <a class="el" href="../../dc/d07/cdr_8h_source.html#l00318">ast_cdr::userfield</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00774">cdr_handler()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00248">cdr_read_callback()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00222">cdr_retrieve_time()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00172">mysql_log()</a>, <a class="el" href="../../df/ddb/cdr__adaptive__odbc_8c_source.html#l00379">odbc_log()</a>, and <a class="el" href="../../dd/d22/cdr__pgsql_8c_source.html#l00214">pgsql_log()</a>.</p>
<div class="fragment"><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;{</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt = <span class="stringliteral">&quot;%Y-%m-%d %T&quot;</span>;</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *varbuf;</div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;   }</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;   *ret = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;clid&quot;</span>)) {</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#ab7fd8bddf0ce6987ae5e58fb64cfc9e2">clid</a>, workspacelen);</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;src&quot;</span>)) {</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#aa8e4f370559b3fe698f36b3132467f94">src</a>, workspacelen);</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;dst&quot;</span>)) {</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#ab30db746a1bf5c869a5dc9dbfaa864d4">dst</a>, workspacelen);</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;dcontext&quot;</span>)) {</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, workspacelen);</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;channel&quot;</span>)) {</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a6396dbd53fd6fedc1fc3ba2743f00eca">channel</a>, workspacelen);</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;dstchannel&quot;</span>)) {</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a0d43f7cac6179c7c4f9521f3138195b4">dstchannel</a>, workspacelen);</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;lastapp&quot;</span>)) {</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#ae7697234189954ec7c6a81b4ab691b85">lastapp</a>, workspacelen);</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;lastdata&quot;</span>)) {</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a2176704f41b4368f2dfa94b64bfcfb6a">lastdata</a>, workspacelen);</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;start&quot;</span>)) {</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a26ef22f050d742f08715473a63720bb5">cdr_get_tv</a>(cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#ad80305b5e16da9c2675d5f057bd69386">start</a>, raw ? <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> : fmt, workspace, workspacelen);</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;answer&quot;</span>)) {</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a26ef22f050d742f08715473a63720bb5">cdr_get_tv</a>(cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>, raw ? <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> : fmt, workspace, workspacelen);</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;end&quot;</span>)) {</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a26ef22f050d742f08715473a63720bb5">cdr_get_tv</a>(cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>, raw ? <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> : fmt, workspace, workspacelen);</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;duration&quot;</span>)) {</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;      snprintf(workspace, workspacelen, <span class="stringliteral">&quot;%ld&quot;</span>, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>.tv_sec != 0 ? cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a993dee0d19091c6d48fdeda230fd6be0">duration</a> : (<span class="keywordtype">long</span>)<a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#ad80305b5e16da9c2675d5f057bd69386">start</a>) / 1000);</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;billsec&quot;</span>)) {</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;      snprintf(workspace, workspacelen, <span class="stringliteral">&quot;%ld&quot;</span>, (cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a4a98731fed2979292cd6042898671e8d">billsec</a> || !<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>) || <a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>)) ? cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a4a98731fed2979292cd6042898671e8d">billsec</a> : (<span class="keywordtype">long</span>)<a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>) / 1000);</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;disposition&quot;</span>)) {</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;      <span class="keywordflow">if</span> (raw) {</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;         snprintf(workspace, workspacelen, <span class="stringliteral">&quot;%ld&quot;</span>, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a1f9669e5d9d64aa831cd9db2dd71534f">disposition</a>);</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, <a class="code" href="../../dc/df2/cdr_8c.html#a0e23f3be8d570dbc8e6c872c566c09d9">ast_cdr_disp2str</a>(cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a1f9669e5d9d64aa831cd9db2dd71534f">disposition</a>), workspacelen);</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;      }</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;amaflags&quot;</span>)) {</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;      <span class="keywordflow">if</span> (raw) {</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;         snprintf(workspace, workspacelen, <span class="stringliteral">&quot;%ld&quot;</span>, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#aa2112d5526f7d98a80d5da0abea1cc7d">amaflags</a>);</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, <a class="code" href="../../d5/d7b/channel_8h.html#ac5686beb47ec95ccb0996ab1b596e559">ast_channel_amaflags2string</a>(cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#aa2112d5526f7d98a80d5da0abea1cc7d">amaflags</a>), workspacelen);</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;      }</div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;accountcode&quot;</span>)) {</div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#adfee50d07a98645d4d20b896ce03785a">accountcode</a>, workspacelen);</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;peeraccount&quot;</span>)) {</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a68f8603d8857718ec5ac0a42d4a507fa">peeraccount</a>, workspacelen);</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;uniqueid&quot;</span>)) {</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#ac733390e45613f1287d0b1b95e8d18ea">uniqueid</a>, workspacelen);</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;linkedid&quot;</span>)) {</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a2979e8d95424c018bf2c830b28a199d0">linkedid</a>, workspacelen);</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;userfield&quot;</span>)) {</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>, workspacelen);</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;sequence&quot;</span>)) {</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;      snprintf(workspace, workspacelen, <span class="stringliteral">&quot;%d&quot;</span>, cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#acc80722d9dd9349cbba06c72d6fb5972">sequence</a>);</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((varbuf = <a class="code" href="../../dc/df2/cdr_8c.html#a4705b2dc3ab2f2294119c7fc9ceeb003">cdr_format_var_internal</a>(cdr, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>))) {</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(workspace, varbuf, workspacelen);</div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;      workspace[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;   }</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(workspace)) {</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;      *ret = workspace;</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;   }</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;}</div><div class="ttc" id="structast__cdr_html_adfee50d07a98645d4d20b896ce03785a"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#adfee50d07a98645d4d20b896ce03785a">ast_cdr::accountcode</a></div><div class="ttdeci">char accountcode[AST_MAX_ACCOUNT_CODE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00308">cdr.h:308</a></div></div>
<div class="ttc" id="structast__cdr_html_a0d43f7cac6179c7c4f9521f3138195b4"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a0d43f7cac6179c7c4f9521f3138195b4">ast_cdr::dstchannel</a></div><div class="ttdeci">char dstchannel[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00288">cdr.h:288</a></div></div>
<div class="ttc" id="structast__cdr_html_a4a98731fed2979292cd6042898671e8d"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a4a98731fed2979292cd6042898671e8d">ast_cdr::billsec</a></div><div class="ttdeci">long int billsec</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00302">cdr.h:302</a></div></div>
<div class="ttc" id="structast__cdr_html_af27d556683a4a28e6564618bcf00bec1"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#af27d556683a4a28e6564618bcf00bec1">ast_cdr::dcontext</a></div><div class="ttdeci">char dcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00284">cdr.h:284</a></div></div>
<div class="ttc" id="time_8h_html_a4e7b3508884147c7991a68361ac781a2"><div class="ttname"><a href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a></div><div class="ttdeci">int ast_tvzero(const struct timeval t)</div><div class="ttdoc">Returns true if the argument is 0,0. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00108">time.h:108</a></div></div>
<div class="ttc" id="structast__cdr_html_acc80722d9dd9349cbba06c72d6fb5972"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#acc80722d9dd9349cbba06c72d6fb5972">ast_cdr::sequence</a></div><div class="ttdeci">int sequence</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00320">cdr.h:320</a></div></div>
<div class="ttc" id="channel_8h_html_ac5686beb47ec95ccb0996ab1b596e559"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac5686beb47ec95ccb0996ab1b596e559">ast_channel_amaflags2string</a></div><div class="ttdeci">const char * ast_channel_amaflags2string(enum ama_flags flags)</div><div class="ttdoc">Convert the enum representation of an AMA flag to a string representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04418">channel.c:4418</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__cdr_html_a2176704f41b4368f2dfa94b64bfcfb6a"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a2176704f41b4368f2dfa94b64bfcfb6a">ast_cdr::lastdata</a></div><div class="ttdeci">char lastdata[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00292">cdr.h:292</a></div></div>
<div class="ttc" id="structast__cdr_html_aa2112d5526f7d98a80d5da0abea1cc7d"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#aa2112d5526f7d98a80d5da0abea1cc7d">ast_cdr::amaflags</a></div><div class="ttdeci">long int amaflags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00306">cdr.h:306</a></div></div>
<div class="ttc" id="structast__cdr_html_a2979e8d95424c018bf2c830b28a199d0"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a2979e8d95424c018bf2c830b28a199d0">ast_cdr::linkedid</a></div><div class="ttdeci">char linkedid[AST_MAX_UNIQUEID]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00316">cdr.h:316</a></div></div>
<div class="ttc" id="structast__cdr_html_ac733390e45613f1287d0b1b95e8d18ea"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#ac733390e45613f1287d0b1b95e8d18ea">ast_cdr::uniqueid</a></div><div class="ttdeci">char uniqueid[AST_MAX_UNIQUEID]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00314">cdr.h:314</a></div></div>
<div class="ttc" id="cdr_8c_html_a26ef22f050d742f08715473a63720bb5"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a26ef22f050d742f08715473a63720bb5">cdr_get_tv</a></div><div class="ttdeci">static void cdr_get_tv(struct timeval when, const char *fmt, char *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03035">cdr.c:3035</a></div></div>
<div class="ttc" id="structast__cdr_html_ab30db746a1bf5c869a5dc9dbfaa864d4"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#ab30db746a1bf5c869a5dc9dbfaa864d4">ast_cdr::dst</a></div><div class="ttdeci">char dst[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00282">cdr.h:282</a></div></div>
<div class="ttc" id="structast__cdr_html_a6396dbd53fd6fedc1fc3ba2743f00eca"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a6396dbd53fd6fedc1fc3ba2743f00eca">ast_cdr::channel</a></div><div class="ttdeci">char channel[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00286">cdr.h:286</a></div></div>
<div class="ttc" id="cdr_8c_html_a4705b2dc3ab2f2294119c7fc9ceeb003"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a4705b2dc3ab2f2294119c7fc9ceeb003">cdr_format_var_internal</a></div><div class="ttdeci">static const char * cdr_format_var_internal(struct ast_cdr *cdr, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03018">cdr.c:3018</a></div></div>
<div class="ttc" id="structast__cdr_html_a621c14aed7c59835c5bc93bc88e8f3d9"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a621c14aed7c59835c5bc93bc88e8f3d9">ast_cdr::answer</a></div><div class="ttdeci">struct timeval answer</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00296">cdr.h:296</a></div></div>
<div class="ttc" id="structast__cdr_html_ae7697234189954ec7c6a81b4ab691b85"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#ae7697234189954ec7c6a81b4ab691b85">ast_cdr::lastapp</a></div><div class="ttdeci">char lastapp[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00290">cdr.h:290</a></div></div>
<div class="ttc" id="structast__cdr_html_ad80305b5e16da9c2675d5f057bd69386"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#ad80305b5e16da9c2675d5f057bd69386">ast_cdr::start</a></div><div class="ttdeci">struct timeval start</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00294">cdr.h:294</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structast__cdr_html_a993dee0d19091c6d48fdeda230fd6be0"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a993dee0d19091c6d48fdeda230fd6be0">ast_cdr::duration</a></div><div class="ttdeci">long int duration</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00300">cdr.h:300</a></div></div>
<div class="ttc" id="structast__cdr_html_aa8e4f370559b3fe698f36b3132467f94"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#aa8e4f370559b3fe698f36b3132467f94">ast_cdr::src</a></div><div class="ttdeci">char src[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00280">cdr.h:280</a></div></div>
<div class="ttc" id="structast__cdr_html_a68f8603d8857718ec5ac0a42d4a507fa"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a68f8603d8857718ec5ac0a42d4a507fa">ast_cdr::peeraccount</a></div><div class="ttdeci">char peeraccount[AST_MAX_ACCOUNT_CODE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00310">cdr.h:310</a></div></div>
<div class="ttc" id="structast__cdr_html_af5249cf68dff13dd1dcca5929f4f3a5b"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#af5249cf68dff13dd1dcca5929f4f3a5b">ast_cdr::end</a></div><div class="ttdeci">struct timeval end</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00298">cdr.h:298</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structast__cdr_html_a1f9669e5d9d64aa831cd9db2dd71534f"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a1f9669e5d9d64aa831cd9db2dd71534f">ast_cdr::disposition</a></div><div class="ttdeci">long int disposition</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00304">cdr.h:304</a></div></div>
<div class="ttc" id="structast__cdr_html_ab7fd8bddf0ce6987ae5e58fb64cfc9e2"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#ab7fd8bddf0ce6987ae5e58fb64cfc9e2">ast_cdr::clid</a></div><div class="ttdeci">char clid[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00278">cdr.h:278</a></div></div>
<div class="ttc" id="structast__cdr_html_a2d480b13820a3a97582a1a138036aa25"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a2d480b13820a3a97582a1a138036aa25">ast_cdr::userfield</a></div><div class="ttdeci">char userfield[AST_MAX_USER_FIELD]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00318">cdr.h:318</a></div></div>
<div class="ttc" id="cdr_8c_html_a0e23f3be8d570dbc8e6c872c566c09d9"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a0e23f3be8d570dbc8e6c872c566c09d9">ast_cdr_disp2str</a></div><div class="ttdeci">const char * ast_cdr_disp2str(int disposition)</div><div class="ttdoc">Disposition to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03430">cdr.c:3430</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a28b931d52c71271afd601186db95fec2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28b931d52c71271afd601186db95fec2">&#9670;&nbsp;</a></span>ast_cdr_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_cdr_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *&#160;</td>
          <td class="paramname"><em>cdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free a CDR record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cdr</td><td><a class="el" href="../../d4/d5d/structast__cdr.html" title="Responsible for call detail data. ">ast_cdr</a> structure to free Returns nothing </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03411">3411</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00777">free_variables()</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00325">ast_cdr::next</a>, and <a class="el" href="../../dc/d07/cdr_8h_source.html#l00323">ast_cdr::varshead</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l02192">ast_channel_destructor()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02338">ast_dummy_channel_destructor()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03841">cdr_detach()</a>, <a class="el" href="../../d7/d8e/test__cdr_8c_source.html#l00169">clear_mock_cdr_backend()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03749">do_batch_backend_process()</a>.</p>
<div class="fragment"><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;{</div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;   <span class="keywordflow">while</span> (cdr) {</div><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *<a class="code" href="../../d4/d5d/structast__cdr.html#a8098d02138e27b57d184b260b6669eed">next</a> = cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a8098d02138e27b57d184b260b6669eed">next</a>;</div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;</div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#ae23ebf460a645c91c4f3c471c3ecd925">free_variables</a>(&amp;cdr-&gt;<a class="code" href="../../d4/d5d/structast__cdr.html#a9ffb22045a8f14bef8f2137cd779ab25">varshead</a>);</div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cdr);</div><div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;      cdr = <a class="code" href="../../d4/d5d/structast__cdr.html#a8098d02138e27b57d184b260b6669eed">next</a>;</div><div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;   }</div><div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;}</div><div class="ttc" id="structast__cdr_html_a8098d02138e27b57d184b260b6669eed"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a8098d02138e27b57d184b260b6669eed">ast_cdr::next</a></div><div class="ttdeci">struct ast_cdr * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00325">cdr.h:325</a></div></div>
<div class="ttc" id="structast__cdr_html_a9ffb22045a8f14bef8f2137cd779ab25"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html#a9ffb22045a8f14bef8f2137cd779ab25">ast_cdr::varshead</a></div><div class="ttdeci">struct varshead varshead</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00323">cdr.h:323</a></div></div>
<div class="ttc" id="cdr_8c_html_ae23ebf460a645c91c4f3c471c3ecd925"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ae23ebf460a645c91c4f3c471c3ecd925">free_variables</a></div><div class="ttdeci">static void free_variables(struct varshead *headp)</div><div class="ttdoc">Delete all variables from a variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00777">cdr.c:777</a></div></div>
<div class="ttc" id="structast__cdr_html"><div class="ttname"><a href="../../d4/d5d/structast__cdr.html">ast_cdr</a></div><div class="ttdoc">Responsible for call detail data. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00276">cdr.h:276</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5aba419cbee0fdecc0ada086857edaaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5aba419cbee0fdecc0ada086857edaaf">&#9670;&nbsp;</a></span>ast_cdr_get_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a>* ast_cdr_get_config </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtain the current CDR configuration. </p>
<dl class="section since"><dt>Since</dt><dd>12 The configuration is a ref counted object. The caller of this function must decrement the ref count when finished with the configuration.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>on error </td></tr>
    <tr><td class="paramname">The</td><td>current CDR configuration </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02826">2826</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00223">module_config::general</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d8e/test__cdr_8c_source.html#l02522">test_cdr_init_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;{</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a> *general;</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d57/structmodule__config.html">module_config</a> *mod_cfg;</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;   mod_cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(module_configs);</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;   <span class="keywordflow">if</span> (!mod_cfg) {</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;   }</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;   general = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>);</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(mod_cfg);</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>;</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="structmodule__config_html"><div class="ttname"><a href="../../db/d57/structmodule__config.html">module_config</a></div><div class="ttdoc">The configuration settings for this module. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00222">cdr.c:222</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__cdr__config_html"><div class="ttname"><a href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a></div><div class="ttdoc">The global options available for CDRs. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00264">cdr.h:264</a></div></div>
<div class="ttc" id="structmodule__config_html_a95699733ba47a55e25760adf5c51e59a"><div class="ttname"><a href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">module_config::general</a></div><div class="ttdeci">struct ast_cdr_config * general</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00223">cdr.c:223</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a90a1e29081a1827a2cc4c535ef07c8c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90a1e29081a1827a2cc4c535ef07c8c2">&#9670;&nbsp;</a></span>ast_cdr_getvar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_getvar </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>channel_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve a CDR variable from a channel's current CDR. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel_name</td><td>The name of the party A channel that the CDR is associated with </td></tr>
    <tr><td class="paramname">name</td><td>The name of the variable to retrieve </td></tr>
    <tr><td class="paramname">value</td><td>Buffer to hold the value </td></tr>
    <tr><td class="paramname">length</td><td>The size of the buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">non-zero</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03324">3324</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00290">AST_LOG_ERROR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03243">cdr_object_format_property()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03226">cdr_object_format_var_internal()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03312">cdr_object_get_by_name()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00736">cdr_object::last</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d8e/test__cdr_8c_source.html#l02120">AST_TEST_DEFINE()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00248">cdr_read_callback()</a>, and <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00222">cdr_retrieve_time()</a>.</p>
<div class="fragment"><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;{</div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr_obj;</div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;</div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>)) {</div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;   }</div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;</div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;   cdr = <a class="code" href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a>(channel_name);</div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to find CDR for channel %s\n&quot;</span>, channel_name);</div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;   }</div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;</div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cdr);</div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;</div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;   cdr_obj = cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a761f66169af05fad3479b4e80ddd6315">last</a>;</div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#a0cdc281513509f0204d371e2c51fd18e">cdr_object_format_property</a>(cdr_obj, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, length)) {</div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;      <span class="comment">/* Property failed; attempt variable */</span></div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a950160d2c2449f652f0342b416909030">cdr_object_format_var_internal</a>(cdr_obj, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, length);</div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;   }</div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;</div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cdr);</div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;</div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr);</div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a950160d2c2449f652f0342b416909030"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a950160d2c2449f652f0342b416909030">cdr_object_format_var_internal</a></div><div class="ttdeci">static void cdr_object_format_var_internal(struct cdr_object *cdr, const char *name, char *value, size_t length)</div><div class="ttdoc">Format a variable on a cdr_object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03226">cdr.c:3226</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_a2fdd5bff193a29ec6c7278da2851ea56"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a></div><div class="ttdeci">#define AST_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00290">logger.h:290</a></div></div>
<div class="ttc" id="cdr_8c_html_a0cdc281513509f0204d371e2c51fd18e"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a0cdc281513509f0204d371e2c51fd18e">cdr_object_format_property</a></div><div class="ttdeci">static int cdr_object_format_property(struct cdr_object *cdr_obj, const char *name, char *value, size_t length)</div><div class="ttdoc">Format one of the standard properties on a cdr_object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03243">cdr.c:3243</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="cdr_8c_html_a89dc924870cf4d81f8841a3b4f33d722"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a></div><div class="ttdeci">static struct cdr_object * cdr_object_get_by_name(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03312">cdr.c:3312</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="structcdr__object_html_a761f66169af05fad3479b4e80ddd6315"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a761f66169af05fad3479b4e80ddd6315">cdr_object::last</a></div><div class="ttdeci">struct cdr_object * last</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00736">cdr.c:736</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1819c3aecd7b59e2734810f52b219059"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1819c3aecd7b59e2734810f52b219059">&#9670;&nbsp;</a></span>ast_cdr_is_enabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_is_enabled </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return TRUE if CDR subsystem is enabled. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02861">2861</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d07/cdr_8h_source.html#l00220">CDR_ENABLED</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l01127">is_cdr_flag_set()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l06276">action_coresettings()</a>, and <a class="el" href="../../d5/d03/asterisk_8c_source.html#l00450">handle_show_settings()</a>.</p>
<div class="fragment"><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;{</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a>(<a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a>);</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;}</div><div class="ttc" id="cdr_8c_html_ab3ba06a4d885b31e4073c047d0dad02d"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a></div><div class="ttdeci">static int is_cdr_flag_set(unsigned int cdr_flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01127">cdr.c:1127</a></div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00220">cdr.h:220</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0eef9f12c37f55a0ca10c9b7d3c50063"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0eef9f12c37f55a0ca10c9b7d3c50063">&#9670;&nbsp;</a></span>ast_cdr_message_router()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a>* ast_cdr_message_router </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the message router for the CDR engine. </p>
<p>This returns the <a class="el" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a> that the CDR engine uses for dispatching <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a> messages. The reference on the message router is bumped and must be released by the caller of this function.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>if the CDR engine is disabled or unavailable </td></tr>
    <tr><td class="paramname">the</td><td><a class="el" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a> otherwise </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l04291">4291</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00371">stasis_router</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00604">cdr_prop_write()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00448">cdr_read()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00506">cdr_write()</a>, <a class="el" href="../../d2/db9/app__forkcdr_8c_source.html#l00134">forkcdr_exec()</a>, <a class="el" href="../../d1/da0/app__cdr_8c_source.html#l00246">load_module()</a>, <a class="el" href="../../d1/da0/app__cdr_8c_source.html#l00166">publish_app_cdr_message()</a>, and <a class="el" href="../../d1/da0/app__cdr_8c_source.html#l00233">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;{</div><div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>) {</div><div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;   }</div><div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;</div><div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>);</div><div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>;</div><div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a6d6d7bdd31cb1b6f84f2e447a7a2c6c2"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a></div><div class="ttdeci">static struct stasis_message_router * stasis_router</div><div class="ttdoc">Message router for stasis messages regarding channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00371">cdr.c:371</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a262bb97e8cbf833e7e6c1b80209b8abb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a262bb97e8cbf833e7e6c1b80209b8abb">&#9670;&nbsp;</a></span>ast_cdr_modifier_register()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_modifier_register </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d07/cdr_8h.html#a5f51cd53e2482c562f7f348d68f4243c">ast_cdrbe</a>&#160;</td>
          <td class="paramname"><em>be</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a CDR modifier. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>name associated with the particular CDR modifier </td></tr>
    <tr><td class="paramname">desc</td><td>description of the CDR modifier </td></tr>
    <tr><td class="paramname">be</td><td>function pointer to a CDR modifier</td></tr>
  </table>
  </dd>
</dl>
<p>Used to register a Call Detail Record modifier.</p>
<p>This gives modules a chance to modify CDR fields before they are dispatched to registered backends (odbc, syslog, etc).</p>
<dl class="section note"><dt>Note</dt><dd>The <em>modified</em> CDR will be passed to <b>all</b> registered backends for logging. For instance, if cdr_manager changes the CDR data, cdr_adaptive_odbc will also get the modified CDR.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02948">2948</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l02902">cdr_generic_register()</a>.</p>
<div class="fragment"><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;{</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/cdr_8c.html#a3c028476f292cc1ae19c7bc9f89ab4e3">cdr_generic_register</a>((<span class="keyword">struct</span> <a class="code" href="../../d5/d08/structbe__list.html">be_list</a> *)&amp;<a class="code" href="../../d6/d3d/structmo__list.html">mo_list</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a>);</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;}</div><div class="ttc" id="cdr__mysql_8c_html_a787f82faccb7c1f40a2539a14855601b"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a></div><div class="ttdeci">static const char desc[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00073">cdr_mysql.c:73</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a39730e90126aad69cfc9ca4d6fcdb3a6"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a></div><div class="ttdeci">char * be</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="cdr_8c_html_a3c028476f292cc1ae19c7bc9f89ab4e3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3c028476f292cc1ae19c7bc9f89ab4e3">cdr_generic_register</a></div><div class="ttdeci">static int cdr_generic_register(struct be_list *generic_list, const char *name, const char *desc, ast_cdrbe be)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02902">cdr.c:2902</a></div></div>
<div class="ttc" id="structmo__list_html"><div class="ttname"><a href="../../d6/d3d/structmo__list.html">mo_list</a></div><div class="ttdoc">List of registered modifiers. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00333">cdr.c:333</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structbe__list_html"><div class="ttname"><a href="../../d5/d08/structbe__list.html">be_list</a></div><div class="ttdoc">List of registered backends. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00330">cdr.c:330</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3bee4ca0e02f5bf17d5e32eca79d7998"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bee4ca0e02f5bf17d5e32eca79d7998">&#9670;&nbsp;</a></span>ast_cdr_modifier_unregister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_modifier_unregister </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister a CDR modifier. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>name of CDR modifier to unregister Unregisters a CDR modifier by its name</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>The modifier unregistered successfully </td></tr>
    <tr><td class="paramname">-1</td><td>The modifier could not be unregistered at this time </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02993">2993</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l02953">ast_cdr_generic_unregister()</a>.</p>
<div class="fragment"><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;{</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/cdr_8c.html#a740f0c21a596d9d15654f31d8e74432f">ast_cdr_generic_unregister</a>((<span class="keyword">struct</span> <a class="code" href="../../d5/d08/structbe__list.html">be_list</a> *)&amp;<a class="code" href="../../d6/d3d/structmo__list.html">mo_list</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a740f0c21a596d9d15654f31d8e74432f"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a740f0c21a596d9d15654f31d8e74432f">ast_cdr_generic_unregister</a></div><div class="ttdeci">static int ast_cdr_generic_unregister(struct be_list *generic_list, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02953">cdr.c:2953</a></div></div>
<div class="ttc" id="structmo__list_html"><div class="ttname"><a href="../../d6/d3d/structmo__list.html">mo_list</a></div><div class="ttdoc">List of registered modifiers. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00333">cdr.c:333</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structbe__list_html"><div class="ttname"><a href="../../d5/d08/structbe__list.html">be_list</a></div><div class="ttdoc">List of registered backends. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00330">cdr.c:330</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abdbcf7f728cbacea0b28bf9c51f99b92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdbcf7f728cbacea0b28bf9c51f99b92">&#9670;&nbsp;</a></span>ast_cdr_register()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_register </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d07/cdr_8h.html#a5f51cd53e2482c562f7f348d68f4243c">ast_cdrbe</a>&#160;</td>
          <td class="paramname"><em>be</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a CDR handling engine. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>name associated with the particular CDR handler </td></tr>
    <tr><td class="paramname">desc</td><td>description of the CDR handler </td></tr>
    <tr><td class="paramname">be</td><td>function pointer to a CDR handler Used to register a Call Detail Record handler. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02943">2943</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l02902">cdr_generic_register()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/ddb/cdr__adaptive__odbc_8c_source.html#l00802">load_module()</a>, <a class="el" href="../../d5/dd1/cdr__sqlite3__custom_8c_source.html#l00119">load_values_config()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00597">my_load_module()</a>, <a class="el" href="../../d8/d56/cdr__odbc_8c_source.html#l00193">odbc_load_module()</a>, and <a class="el" href="../../df/ddb/cdr__adaptive__odbc_8c_source.html#l00785">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;{</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/cdr_8c.html#a3c028476f292cc1ae19c7bc9f89ab4e3">cdr_generic_register</a>(&amp;<a class="code" href="../../d5/d08/structbe__list.html">be_list</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a>);</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;}</div><div class="ttc" id="cdr__mysql_8c_html_a787f82faccb7c1f40a2539a14855601b"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a></div><div class="ttdeci">static const char desc[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00073">cdr_mysql.c:73</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a39730e90126aad69cfc9ca4d6fcdb3a6"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a></div><div class="ttdeci">char * be</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="cdr_8c_html_a3c028476f292cc1ae19c7bc9f89ab4e3"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a3c028476f292cc1ae19c7bc9f89ab4e3">cdr_generic_register</a></div><div class="ttdeci">static int cdr_generic_register(struct be_list *generic_list, const char *name, const char *desc, ast_cdrbe be)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02902">cdr.c:2902</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structbe__list_html"><div class="ttname"><a href="../../d5/d08/structbe__list.html">be_list</a></div><div class="ttdoc">List of registered backends. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00330">cdr.c:330</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af73a38a457f60f9c8a86286b3280c4d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af73a38a457f60f9c8a86286b3280c4d8">&#9670;&nbsp;</a></span>ast_cdr_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_reset </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>channel_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keep_variables</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the detail record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel_name</td><td>The channel that the CDR is associated with </td></tr>
    <tr><td class="paramname">keep_variables</td><td>Keep the variables during the reset. If zero, variables are discarded during the reset.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">-1</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03598">3598</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l00719">cdr_object::answer</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02473">ast_var_delete()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01494">cdr_object_check_party_a_answer()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03312">cdr_object_get_by_name()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00720">cdr_object::end</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00721">cdr_object::lastevent</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00718">cdr_object::start</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00708">cdr_object_snapshot::variables</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da0/app__cdr_8c_source.html#l00131">appcdr_callback()</a>, and <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>.</p>
<div class="fragment"><div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;{</div><div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *vardata;</div><div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;</div><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;   cdr = <a class="code" href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a>(channel_name);</div><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;   }</div><div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;</div><div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cdr);</div><div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;   <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;      <span class="comment">/* clear variables */</span></div><div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;      <span class="keywordflow">if</span> (!keep_variables) {</div><div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;         <span class="keywordflow">while</span> ((vardata = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>, entries))) {</div><div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;            <a class="code" href="../../d9/de7/chanvars_8h.html#ae19fa022349aa0481f982ccced85d7ba">ast_var_delete</a>(vardata);</div><div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;         }</div><div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;         <span class="keywordflow">if</span> (cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>) {</div><div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;            <span class="keywordflow">while</span> ((vardata = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>, entries))) {</div><div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;               <a class="code" href="../../d9/de7/chanvars_8h.html#ae19fa022349aa0481f982ccced85d7ba">ast_var_delete</a>(vardata);</div><div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;            }</div><div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;         }</div><div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;      }</div><div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;</div><div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;      <span class="comment">/* Reset to initial state */</span></div><div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;      memset(&amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a>, 0, <span class="keyword">sizeof</span>(it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a>));</div><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;      memset(&amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>, 0, <span class="keyword">sizeof</span>(it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">end</a>));</div><div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;      memset(&amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>, 0, <span class="keyword">sizeof</span>(it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">answer</a>));</div><div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;      it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;      it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">lastevent</a> = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">start</a>;</div><div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a89033e69df1c30043f7f2dbdcfd3ec12">cdr_object_check_party_a_answer</a>(it_cdr);</div><div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;   }</div><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cdr);</div><div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;</div><div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr);</div><div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;}</div><div class="ttc" id="structcdr__object__snapshot_html_a2e42d02e62d0d56d645c901011bb767b"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">cdr_object_snapshot::variables</a></div><div class="ttdeci">struct varshead variables</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00708">cdr.c:708</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="structcdr__object_html_a621c14aed7c59835c5bc93bc88e8f3d9"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a621c14aed7c59835c5bc93bc88e8f3d9">cdr_object::answer</a></div><div class="ttdeci">struct timeval answer</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00719">cdr.c:719</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structcdr__object_html_ad80305b5e16da9c2675d5f057bd69386"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#ad80305b5e16da9c2675d5f057bd69386">cdr_object::start</a></div><div class="ttdeci">struct timeval start</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00718">cdr.c:718</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="cdr_8c_html_a89dc924870cf4d81f8841a3b4f33d722"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a></div><div class="ttdeci">static struct cdr_object * cdr_object_get_by_name(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03312">cdr.c:3312</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="structast__var__t_html"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html">ast_var_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00028">chanvars.h:28</a></div></div>
<div class="ttc" id="chanvars_8h_html_ae19fa022349aa0481f982ccced85d7ba"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#ae19fa022349aa0481f982ccced85d7ba">ast_var_delete</a></div><div class="ttdeci">void ast_var_delete(struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02473">extconf.c:2473</a></div></div>
<div class="ttc" id="structcdr__object_html_a7543dbd0c668cd22684e8d5aea0b5b93"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a7543dbd0c668cd22684e8d5aea0b5b93">cdr_object::lastevent</a></div><div class="ttdeci">struct timeval lastevent</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00721">cdr.c:721</a></div></div>
<div class="ttc" id="structcdr__object_html_af5249cf68dff13dd1dcca5929f4f3a5b"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af5249cf68dff13dd1dcca5929f4f3a5b">cdr_object::end</a></div><div class="ttdeci">struct timeval end</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00720">cdr.c:720</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="cdr_8c_html_a89033e69df1c30043f7f2dbdcfd3ec12"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a89033e69df1c30043f7f2dbdcfd3ec12">cdr_object_check_party_a_answer</a></div><div class="ttdeci">static void cdr_object_check_party_a_answer(struct cdr_object *cdr)</div><div class="ttdoc">Check to see if a CDR needs to be answered based on its Party A. Note that this is safe to call as mu...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01494">cdr.c:1494</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa16b81388933557fa1c47537897c24a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa16b81388933557fa1c47537897c24a9">&#9670;&nbsp;</a></span>ast_cdr_serialize_variables()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_serialize_variables </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>channel_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>delim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>sep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Serializes all the data and variables for a current CDR record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel_name</td><td>The channel to get the CDR for </td></tr>
    <tr><td class="paramname">buf</td><td>A buffer to use for formatting the data </td></tr>
    <tr><td class="paramname">delim</td><td>A delimeter to use to separate variable keys/values </td></tr>
    <tr><td class="paramname">sep</td><td>A separator to use between nestings </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">the</td><td>total number of serialized variables </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03353">3353</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00290">AST_LOG_ERROR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00653">ast_str_reset()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d9/df9/chanvars_8c_source.html#l00060">ast_var_name()</a>, <a class="el" href="../../d9/df9/chanvars_8c_source.html#l00080">ast_var_value()</a>, <a class="el" href="../../dc/d07/cdr_8h_source.html#l00220">CDR_ENABLED</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03243">cdr_object_format_property()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03312">cdr_object_get_by_name()</a>, <a class="el" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">ast_var_t::entries</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01127">is_cdr_flag_set()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../dd/d27/res__adsi_8c_source.html#l00968">total</a>, <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00614">var</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00708">cdr_object_snapshot::variables</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l01610">handle_showchan()</a>.</p>
<div class="fragment"><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;{</div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *variable;</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;   <span class="keywordtype">char</span> workspace[256];</div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dd/d27/res__adsi_8c.html#ac7af894858cf396a219d632f40afdc8d">total</a> = 0, x = 0, i;</div><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;</div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;   cdr = <a class="code" href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a>(channel_name);</div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a>(<a class="code" href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a>)) {</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to find CDR for channel %s\n&quot;</span>, channel_name);</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;      }</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;   }</div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;</div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a>(*buf);</div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cdr);</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;   <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;      <span class="keywordflow">if</span> (++x &gt; 1) {</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(buf, 0, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;      }</div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;</div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>, variable, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>) {</div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;         <span class="keywordflow">if</span> (!(var = <a class="code" href="../../d9/de7/chanvars_8h.html#a356a31cd608ec07d3668dcd589be49d8">ast_var_name</a>(variable))) {</div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;         }</div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(buf, 0, <span class="stringliteral">&quot;level %d: %s%c%s%c&quot;</span>, x, var, delim, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(<a class="code" href="../../d9/de7/chanvars_8h.html#a8e0081172db71c5021d20706c50d959c">ast_var_value</a>(variable), <span class="stringliteral">&quot;&quot;</span>), sep) &lt; 0) {</div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Data Buffer Size Exceeded!\n&quot;</span>);</div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;         }</div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;         total++;</div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;      }</div><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;</div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;      <span class="keywordflow">for</span> (i = 0; <a class="code" href="../../dc/df2/cdr_8c.html#a2256ef5c96ee6f5634e183c3c99f42f8">cdr_readonly_vars</a>[i]; i++) {</div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dc/df2/cdr_8c.html#a0cdc281513509f0204d371e2c51fd18e">cdr_object_format_property</a>(it_cdr, <a class="code" href="../../dc/df2/cdr_8c.html#a2256ef5c96ee6f5634e183c3c99f42f8">cdr_readonly_vars</a>[i], workspace, <span class="keyword">sizeof</span>(workspace))) {</div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;            <span class="comment">/* Unhandled read-only CDR variable. */</span></div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;            <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;         }</div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;</div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(workspace)</div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;            &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(buf, 0, <span class="stringliteral">&quot;level %d: %s%c%s%c&quot;</span>, x, <a class="code" href="../../dc/df2/cdr_8c.html#a2256ef5c96ee6f5634e183c3c99f42f8">cdr_readonly_vars</a>[i], delim, workspace, sep) &lt; 0) {</div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Data Buffer Size Exceeded!\n&quot;</span>);</div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;         }</div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;         total++;</div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;      }</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;   }</div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cdr);</div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr);</div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d27/res__adsi_8c.html#ac7af894858cf396a219d632f40afdc8d">total</a>;</div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;}</div><div class="ttc" id="structcdr__object__snapshot_html_a2e42d02e62d0d56d645c901011bb767b"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">cdr_object_snapshot::variables</a></div><div class="ttdeci">struct varshead variables</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00708">cdr.c:708</a></div></div>
<div class="ttc" id="chanvars_8h_html_a8e0081172db71c5021d20706c50d959c"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#a8e0081172db71c5021d20706c50d959c">ast_var_value</a></div><div class="ttdeci">const char * ast_var_value(const struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df9/chanvars_8c_source.html#l00080">chanvars.c:80</a></div></div>
<div class="ttc" id="cdr_8c_html_ab3ba06a4d885b31e4073c047d0dad02d"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#ab3ba06a4d885b31e4073c047d0dad02d">is_cdr_flag_set</a></div><div class="ttdeci">static int is_cdr_flag_set(unsigned int cdr_flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01127">cdr.c:1127</a></div></div>
<div class="ttc" id="chanvars_8h_html_a356a31cd608ec07d3668dcd589be49d8"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#a356a31cd608ec07d3668dcd589be49d8">ast_var_name</a></div><div class="ttdeci">const char * ast_var_name(const struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df9/chanvars_8c_source.html#l00060">chanvars.c:60</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_a2fdd5bff193a29ec6c7278da2851ea56"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a></div><div class="ttdeci">#define AST_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00290">logger.h:290</a></div></div>
<div class="ttc" id="cdr_8c_html_a0cdc281513509f0204d371e2c51fd18e"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a0cdc281513509f0204d371e2c51fd18e">cdr_object_format_property</a></div><div class="ttdeci">static int cdr_object_format_property(struct cdr_object *cdr_obj, const char *name, char *value, size_t length)</div><div class="ttdoc">Format one of the standard properties on a cdr_object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03243">cdr.c:3243</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="cdr_8c_html_a2256ef5c96ee6f5634e183c3c99f42f8"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a2256ef5c96ee6f5634e183c3c99f42f8">cdr_readonly_vars</a></div><div class="ttdeci">static const char *const cdr_readonly_vars[]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03154">cdr.c:3154</a></div></div>
<div class="ttc" id="cdr_8c_html_a89dc924870cf4d81f8841a3b4f33d722"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a></div><div class="ttdeci">static struct cdr_object * cdr_object_get_by_name(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03312">cdr.c:3312</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__var__t_html"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html">ast_var_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00028">chanvars.h:28</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structast__var__t_html_a55d5c7988e3164d7310d88c67d97a1db"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">ast_var_t::entries</a></div><div class="ttdeci">struct ast_var_t::@249 entries</div></div>
<div class="ttc" id="cdr_8h_html_a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a2d5870f3bb33cc9720f24c358a33e11ba3e9793b17d79d8ffbdc3efcf7dd25d7b">CDR_ENABLED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d07/cdr_8h_source.html#l00220">cdr.h:220</a></div></div>
<div class="ttc" id="strings_8h_html_a8239b9ad10367bfc936e9b60ff7706a8"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a></div><div class="ttdeci">void ast_str_reset(struct ast_str *buf)</div><div class="ttdoc">Reset the content of a dynamic string. Useful before a series of ast_str_append. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00653">strings.h:653</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="res__adsi_8c_html_ac7af894858cf396a219d632f40afdc8d"><div class="ttname"><a href="../../dd/d27/res__adsi_8c.html#ac7af894858cf396a219d632f40afdc8d">total</a></div><div class="ttdeci">static int total</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d27/res__adsi_8c_source.html#l00968">res_adsi.c:968</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2e119010fb723a389d3aabc45c0f9435"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e119010fb723a389d3aabc45c0f9435">&#9670;&nbsp;</a></span>ast_cdr_set_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_cdr_set_config </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d69/structast__cdr__config.html">ast_cdr_config</a> *&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the current CDR configuration. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>The new CDR configuration </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02840">2840</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00517">ao2_replace</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00203">cdr_set_debug_mode</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04488">cdr_toggle_runtime_options()</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00223">module_config::general</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d8e/test__cdr_8c_source.html#l02534">test_cdr_cleanup_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;{</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d57/structmodule__config.html">module_config</a> *mod_cfg;</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;   <span class="keywordflow">if</span> (!config) {</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;   }</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;   mod_cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(module_configs);</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;   <span class="keywordflow">if</span> (!mod_cfg) {</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;   }</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;</div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a>(mod_cfg-&gt;<a class="code" href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">general</a>, config);</div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a64c2a67abebb54e4d8defda57e4e9206">cdr_set_debug_mode</a>(mod_cfg);</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;   <a class="code" href="../../dc/df2/cdr_8c.html#a77dc1728a978dd5a7d045800200be4cc">cdr_toggle_runtime_options</a>();</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(mod_cfg);</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a64c2a67abebb54e4d8defda57e4e9206"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a64c2a67abebb54e4d8defda57e4e9206">cdr_set_debug_mode</a></div><div class="ttdeci">#define cdr_set_debug_mode(mod_cfg)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00203">cdr.c:203</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="structmodule__config_html"><div class="ttname"><a href="../../db/d57/structmodule__config.html">module_config</a></div><div class="ttdoc">The configuration settings for this module. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00222">cdr.c:222</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa81c8462bd0574f4f9e09e71f2772f44"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a></div><div class="ttdeci">#define ao2_replace(dst, src)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00517">astobj2.h:517</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structmodule__config_html_a95699733ba47a55e25760adf5c51e59a"><div class="ttname"><a href="../../db/d57/structmodule__config.html#a95699733ba47a55e25760adf5c51e59a">module_config::general</a></div><div class="ttdeci">struct ast_cdr_config * general</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00223">cdr.c:223</a></div></div>
<div class="ttc" id="cdr_8c_html_a77dc1728a978dd5a7d045800200be4cc"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a77dc1728a978dd5a7d045800200be4cc">cdr_toggle_runtime_options</a></div><div class="ttdeci">static int cdr_toggle_runtime_options(void)</div><div class="ttdoc">Checks if CDRs are enabled and enables/disables the necessary options. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l04488">cdr.c:4488</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afcdba7928fed6e22df50a8d9b6c4cbf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcdba7928fed6e22df50a8d9b6c4cbf8">&#9670;&nbsp;</a></span>ast_cdr_set_property()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_set_property </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>channel_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../dc/d07/cdr_8h.html#a7e9ee9382efd6d636155553beb39ca37">ast_cdr_options</a>&#160;</td>
          <td class="paramname"><em>option</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a property on a CDR for a channel. </p>
<dl class="section since"><dt>Since</dt><dd>12 This function sets specific administrative properties on a CDR for a channel. This includes properties like preventing a CDR from being dispatched, to setting the channel as the preferred Party A in future CDRs. See enum ast_cdr_options for more information.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel_name</td><td>The CDR's channel </td></tr>
    <tr><td class="paramname">option</td><td>Option to apply to the CDR</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">1</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03548">3548</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03312">cdr_object_get_by_name()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00723">cdr_object::flags</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da0/app__cdr_8c_source.html#l00131">appcdr_callback()</a>, <a class="el" href="../../d7/d8e/test__cdr_8c_source.html#l02324">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00400">cdr_prop_write_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;{</div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;</div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;   cdr = <a class="code" href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a>(channel_name);</div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;   <span class="keywordflow">if</span> (!cdr) {</div><div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;   }</div><div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;</div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cdr);</div><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;   <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;      <span class="keywordflow">if</span> (it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a> == &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a>) {</div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;      }</div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;      <span class="comment">/* Note: in general, set the flags on both the CDR record as well as the</span></div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;<span class="comment">       * Party A. Sometimes all we have is the Party A to look at.</span></div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">flags</a>, option);</div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>, option);</div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;   }</div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cdr);</div><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;</div><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr);</div><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;}</div><div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="structcdr__object_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#aec78000b2897c094f68ed72559e18acd">cdr_object::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00723">cdr.c:723</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="cdr_8c_html_a89dc924870cf4d81f8841a3b4f33d722"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a></div><div class="ttdeci">static struct cdr_object * cdr_object_get_by_name(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03312">cdr.c:3312</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f50dd95a426c8a70710afc315164f04"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table finalized_state_fn_table</div><div class="ttdoc">The virtual table for the finalized state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00694">cdr.c:694</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1a5de28755e68ba2351a38210afc2423"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a5de28755e68ba2351a38210afc2423">&#9670;&nbsp;</a></span>ast_cdr_setuserfield()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_cdr_setuserfield </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>channel_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>userfield</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set CDR user field for channel (stored in CDR) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel_name</td><td>The name of the channel that owns the CDR </td></tr>
    <tr><td class="paramname">userfield</td><td>The user field to set </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03477">3477</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01743">ao2_callback_data</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03312">cdr_object_get_by_name()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03455">cdr_object_update_party_b_userfield_cb()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03450">party_b_userfield_update::channel_name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01053">OBJ_MULTIPLE</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01048">OBJ_NODATA</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00706">cdr_object_snapshot::userfield</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l03451">party_b_userfield_update::userfield</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d8e/test__cdr_8c_source.html#l02120">AST_TEST_DEFINE()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00357">cdr_write_callback()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l22622">handle_request_info()</a>, and <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00693">start_monitor_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;{</div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d6c/structparty__b__userfield__update.html">party_b_userfield_update</a> party_b_info = {</div><div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;      .<a class="code" href="../../dc/d6c/structparty__b__userfield__update.html#a52e3444b72c993e4da5424384673bab7">channel_name</a> = <a class="code" href="../../dc/d6c/structparty__b__userfield__update.html#a52e3444b72c993e4da5424384673bab7">channel_name</a>,</div><div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;      .userfield = <a class="code" href="../../dc/d6c/structparty__b__userfield__update.html#a3a9a77adeaf7170b7d2dec43d3344970">userfield</a>,</div><div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;   };</div><div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;</div><div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;   <span class="comment">/* Handle Party A */</span></div><div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;   cdr = <a class="code" href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a>(channel_name);</div><div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;   <span class="keywordflow">if</span> (cdr) {</div><div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cdr);</div><div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;      <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;         <span class="keywordflow">if</span> (it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a> == &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a> &amp;&amp; it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;         }</div><div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>, userfield,</div><div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;            <span class="keyword">sizeof</span>(it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">userfield</a>));</div><div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;      }</div><div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cdr);</div><div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;   }</div><div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;</div><div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;   <span class="comment">/* Handle Party B */</span></div><div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a63fd831fe48aed32d3ef992ad8e45293">ao2_callback_data</a>(<a class="code" href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>,</div><div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;      <a class="code" href="../../dc/df2/cdr_8c.html#a9996dd8c278c3be2f3a04bacb316f053">cdr_object_update_party_b_userfield_cb</a>, (<span class="keywordtype">char</span> *) party_b_info.<a class="code" href="../../dc/d6c/structparty__b__userfield__update.html#a52e3444b72c993e4da5424384673bab7">channel_name</a>,</div><div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;      &amp;party_b_info);</div><div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;</div><div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr);</div><div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a9996dd8c278c3be2f3a04bacb316f053"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a9996dd8c278c3be2f3a04bacb316f053">cdr_object_update_party_b_userfield_cb</a></div><div class="ttdeci">static int cdr_object_update_party_b_userfield_cb(void *obj, void *arg, void *data, int flags)</div><div class="ttdoc">Callback used to update the userfield on Party B on all CDRs. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03455">cdr.c:3455</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01048">astobj2.h:1048</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="structparty__b__userfield__update_html_a3a9a77adeaf7170b7d2dec43d3344970"><div class="ttname"><a href="../../dc/d6c/structparty__b__userfield__update.html#a3a9a77adeaf7170b7d2dec43d3344970">party_b_userfield_update::userfield</a></div><div class="ttdeci">const char * userfield</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03451">cdr.c:3451</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a2d480b13820a3a97582a1a138036aa25"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a2d480b13820a3a97582a1a138036aa25">cdr_object_snapshot::userfield</a></div><div class="ttdeci">char userfield[AST_MAX_USER_FIELD]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00706">cdr.c:706</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="cdr_8c_html_a89dc924870cf4d81f8841a3b4f33d722"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a89dc924870cf4d81f8841a3b4f33d722">cdr_object_get_by_name</a></div><div class="ttdeci">static struct cdr_object * cdr_object_get_by_name(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03312">cdr.c:3312</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="structparty__b__userfield__update_html_a52e3444b72c993e4da5424384673bab7"><div class="ttname"><a href="../../dc/d6c/structparty__b__userfield__update.html#a52e3444b72c993e4da5424384673bab7">party_b_userfield_update::channel_name</a></div><div class="ttdeci">const char * channel_name</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03450">cdr.c:3450</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="astobj2_8h_html_a63fd831fe48aed32d3ef992ad8e45293"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a63fd831fe48aed32d3ef992ad8e45293">ao2_callback_data</a></div><div class="ttdeci">#define ao2_callback_data(container, flags, cb_fn, arg, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01743">astobj2.h:1743</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f50dd95a426c8a70710afc315164f04"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table finalized_state_fn_table</div><div class="ttdoc">The virtual table for the finalized state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00694">cdr.c:694</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="cdr_8c_html_abb1aee82330e86d734034f092559cc69"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#abb1aee82330e86d734034f092559cc69">active_cdrs_all</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_all</div><div class="ttdoc">A container of all active CDRs with a Party B indexed by Party B channel name. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00368">cdr.c:368</a></div></div>
<div class="ttc" id="structparty__b__userfield__update_html"><div class="ttname"><a href="../../dc/d6c/structparty__b__userfield__update.html">party_b_userfield_update</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03449">cdr.c:3449</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01053">astobj2.h:1053</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4cb15fc5160b2842ef7aa5b4f238b7fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cb15fc5160b2842ef7aa5b4f238b7fb">&#9670;&nbsp;</a></span>ast_cdr_setvar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_setvar </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>channel_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a variable on a CDR. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel_name</td><td>The channel to set the variable on </td></tr>
    <tr><td class="paramname">name</td><td>The name of the variable to set </td></tr>
    <tr><td class="paramname">value</td><td>The value of the variable to set</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">non-zero</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l03178">3178</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01716">ao2_callback</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00290">AST_LOG_ERROR</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03126">cdr_object_select_all_by_name_cb()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00715">cdr_object::fn_table</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00735">cdr_object::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01053">OBJ_MULTIPLE</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00713">cdr_object::party_a</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00714">cdr_object::party_b</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01262">set_variable()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l00705">cdr_object_snapshot::snapshot</a>, and <a class="el" href="../../dc/df2/cdr_8c_source.html#l00708">cdr_object_snapshot::variables</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d8e/test__cdr_8c_source.html#l02120">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00357">cdr_write_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;{</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *cdr;</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db4/structcdr__object.html">cdr_object</a> *it_cdr;</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> *it_cdrs;</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;   <span class="keywordtype">char</span> *arg = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(channel_name);</div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;   <span class="keywordflow">for</span> (x = 0; <a class="code" href="../../dc/df2/cdr_8c.html#a2256ef5c96ee6f5634e183c3c99f42f8">cdr_readonly_vars</a>[x]; x++) {</div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a2256ef5c96ee6f5634e183c3c99f42f8">cdr_readonly_vars</a>[x])) {</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Attempt to set the &#39;%s&#39; read-only variable!\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;      }</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;   }</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;</div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;   it_cdrs = <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(<a class="code" href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a>, <a class="code" href="../../dc/df2/cdr_8c.html#a4b0de636092270f4f2b0ecff29eb6135">cdr_object_select_all_by_name_cb</a>, arg);</div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;   <span class="keywordflow">if</span> (!it_cdrs) {</div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to find CDR for channel %s\n&quot;</span>, channel_name);</div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;   }</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;</div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;   <span class="keywordflow">for</span> (; (cdr = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(it_cdrs)); <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cdr), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdr)) {</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cdr);</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;      <span class="keywordflow">for</span> (it_cdr = cdr; it_cdr; it_cdr = it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a>) {</div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../dd/de6/structvarshead.html">varshead</a> *headp = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;</div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;         <span class="keywordflow">if</span> (it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">fn_table</a> == &amp;<a class="code" href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a> &amp;&amp; it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">next</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;         }</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(channel_name, it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>)) {</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;            headp = &amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">party_a</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>;</div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a></div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;            &amp;&amp; !strcasecmp(channel_name, it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>)) {</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;            headp = &amp;it_cdr-&gt;<a class="code" href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">party_b</a>.<a class="code" href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">variables</a>;</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;         }</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;         <span class="keywordflow">if</span> (headp) {</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;            <a class="code" href="../../dc/df2/cdr_8c.html#a89071964424cbe2e7d79b8682cc452df">set_variable</a>(headp, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;         }</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;      }</div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;   }</div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(it_cdrs);</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a2e42d02e62d0d56d645c901011bb767b"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a2e42d02e62d0d56d645c901011bb767b">cdr_object_snapshot::variables</a></div><div class="ttdeci">struct varshead variables</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00708">cdr.c:708</a></div></div>
<div class="ttc" id="structcdr__object__snapshot_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../dc/d50/structcdr__object__snapshot.html#a36584c0251e54a7af4892d63f7a28c77">cdr_object_snapshot::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00705">cdr.c:705</a></div></div>
<div class="ttc" id="astobj2_8h_html_a47857055118a703ae87ea5ebaf4842ed"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a></div><div class="ttdeci">#define ao2_callback(c, flags, cb_fn, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01716">astobj2.h:1716</a></div></div>
<div class="ttc" id="structcdr__object_html_a4f1d01988e1d08b9d736e0d10af6a65f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a4f1d01988e1d08b9d736e0d10af6a65f">cdr_object::next</a></div><div class="ttdeci">struct cdr_object * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00735">cdr.c:735</a></div></div>
<div class="ttc" id="structcdr__object_html_af566df36c3ea7c348f7a428e103f21d8"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#af566df36c3ea7c348f7a428e103f21d8">cdr_object::party_b</a></div><div class="ttdeci">struct cdr_object_snapshot party_b</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00714">cdr.c:714</a></div></div>
<div class="ttc" id="cdr_8c_html_a89071964424cbe2e7d79b8682cc452df"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a89071964424cbe2e7d79b8682cc452df">set_variable</a></div><div class="ttdeci">static void set_variable(struct varshead *headp, const char *name, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l01262">cdr.c:1262</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr_8c_html_a4b0de636092270f4f2b0ecff29eb6135"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a4b0de636092270f4f2b0ecff29eb6135">cdr_object_select_all_by_name_cb</a></div><div class="ttdeci">static int cdr_object_select_all_by_name_cb(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03126">cdr.c:3126</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="structcdr__object_html_a74e188bdfefcfd19a473f943cd55673f"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a74e188bdfefcfd19a473f943cd55673f">cdr_object::party_a</a></div><div class="ttdeci">struct cdr_object_snapshot party_a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00713">cdr.c:713</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_a2fdd5bff193a29ec6c7278da2851ea56"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a></div><div class="ttdeci">#define AST_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00290">logger.h:290</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="cdr_8c_html_a2256ef5c96ee6f5634e183c3c99f42f8"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a2256ef5c96ee6f5634e183c3c99f42f8">cdr_readonly_vars</a></div><div class="ttdeci">static const char *const cdr_readonly_vars[]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03154">cdr.c:3154</a></div></div>
<div class="ttc" id="structcdr__object_html_a2c4092bf55f5b5aa8266f4baafb49e04"><div class="ttname"><a href="../../d4/db4/structcdr__object.html#a2c4092bf55f5b5aa8266f4baafb49e04">cdr_object::fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table * fn_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00715">cdr.c:715</a></div></div>
<div class="ttc" id="structcdr__object_html"><div class="ttname"><a href="../../d4/db4/structcdr__object.html">cdr_object</a></div><div class="ttdoc">An in-memory representation of an active CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00712">cdr.c:712</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="cdr_8c_html_aabd874b0958bde3e08b5a876c2d1a395"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#aabd874b0958bde3e08b5a876c2d1a395">active_cdrs_master</a></div><div class="ttdeci">static struct ao2_container * active_cdrs_master</div><div class="ttdoc">A container of the active master CDRs indexed by Party A channel uniqueid. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00365">cdr.c:365</a></div></div>
<div class="ttc" id="structvarshead_html"><div class="ttname"><a href="../../dd/de6/structvarshead.html">varshead</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00034">chanvars.h:34</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="cdr_8c_html_a5f50dd95a426c8a70710afc315164f04"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a5f50dd95a426c8a70710afc315164f04">finalized_state_fn_table</a></div><div class="ttdeci">struct cdr_object_fn_table finalized_state_fn_table</div><div class="ttdoc">The virtual table for the finalized state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00694">cdr.c:694</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01053">astobj2.h:1053</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a915cbbaeaf06834cc96f4b8e3c224251"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a915cbbaeaf06834cc96f4b8e3c224251">&#9670;&nbsp;</a></span>ast_cdr_unregister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_cdr_unregister </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister a CDR handling engine. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>name of CDR handler to unregister Unregisters a CDR by it's name</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>The backend unregistered successfully </td></tr>
    <tr><td class="paramname">-1</td><td>The backend could not be unregistered at this time </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df2/cdr_8c_source.html#l02988">2988</a> of file <a class="el" href="../../dc/df2/cdr_8c_source.html">cdr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l02953">ast_cdr_generic_unregister()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00246">load_module()</a>, <a class="el" href="../../d5/dd1/cdr__sqlite3__custom_8c_source.html#l00119">load_values_config()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00383">my_unload_module()</a>, <a class="el" href="../../d4/d4c/cdr__csv_8c_source.html#l00344">reload()</a>, <a class="el" href="../../d0/d2a/cdr__tds_8c_source.html#l00442">tds_unload_module()</a>, and <a class="el" href="../../df/ddb/cdr__adaptive__odbc_8c_source.html#l00785">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;{</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/cdr_8c.html#a740f0c21a596d9d15654f31d8e74432f">ast_cdr_generic_unregister</a>(&amp;<a class="code" href="../../d5/d08/structbe__list.html">be_list</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;}</div><div class="ttc" id="cdr_8c_html_a740f0c21a596d9d15654f31d8e74432f"><div class="ttname"><a href="../../dc/df2/cdr_8c.html#a740f0c21a596d9d15654f31d8e74432f">ast_cdr_generic_unregister</a></div><div class="ttdeci">static int ast_cdr_generic_unregister(struct be_list *generic_list, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02953">cdr.c:2953</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structbe__list_html"><div class="ttname"><a href="../../d5/d08/structbe__list.html">be_list</a></div><div class="ttdoc">List of registered backends. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l00330">cdr.c:330</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:44:58 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
