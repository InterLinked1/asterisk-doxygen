<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: res_stasis_device_state.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_7b47cca4d318623bb4270ab1fb592ef5.html">res</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">res_stasis_device_state.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d4a/astdb_8h_source.html">asterisk/astdb.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/da5/astobj2_8h_source.html">asterisk/astobj2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d0b/stasis__app__impl_8h_source.html">asterisk/stasis_app_impl.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d75/stasis__app__device__state_8h_source.html">asterisk/stasis_app_device_state.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for res_stasis_device_state.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/dc3/res__stasis__device__state_8c__incl.png" border="0" usemap="#res__stasis__device__state_8c" alt=""/></div>
<map name="res__stasis__device__state_8c" id="res__stasis__device__state_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="70,543,154,569"/>
<area shape="rect" id="node22" href="../../de/d4a/astdb_8h.html" title="Persistant data storage (akin to *doze registry) " alt="" coords="1733,87,1857,114"/>
<area shape="rect" id="node23" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="1631,543,1766,569"/>
<area shape="rect" id="node33" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="995,169,1131,196"/>
<area shape="rect" id="node40" href="../../de/d0b/stasis__app__impl_8h.html" title="Backend API for implementing components of res_stasis. " alt="" coords="1387,80,1531,121"/>
<area shape="rect" id="node44" href="../../d1/d75/stasis__app__device__state_8h.html" title="Stasis Application Device State API. See StasisApplication API&quot; for detailed documentation. " alt="" coords="1219,80,1363,121"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="7,841,161,868"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="930,617,1067,644"/>
<area shape="rect" id="node21" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="31,617,166,644"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="11,916,157,943"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="1267,767,1410,793"/>
<area shape="rect" id="node24" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1747,692,1861,719"/>
<area shape="rect" id="node27" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="429,841,576,868"/>
<area shape="rect" id="node32" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1530,617,1681,644"/>
<area shape="rect" id="node26" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="351,767,414,793"/>
<area shape="rect" id="node30" href="../../d3/dda/backtrace_8h.html" title="Asterisk backtrace generation. " alt="" coords="1930,767,2081,793"/>
<area shape="rect" id="node31" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1434,767,1561,793"/>
<area shape="rect" id="node34" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1048,393,1163,420"/>
<area shape="rect" id="node35" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="759,468,897,495"/>
<area shape="rect" id="node36" href="../../d5/deb/localtime_8h.html" title="Custom localtime functions for multiple timezones. " alt="" coords="921,468,1068,495"/>
<area shape="rect" id="node37" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="1348,468,1505,495"/>
<area shape="rect" id="node38" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="1193,468,1324,495"/>
<area shape="rect" id="node39" href="../../dc/d7d/threadstorage_8h.html" title="Definitions to aid in the use of thread local storage. " alt="" coords="607,543,785,569"/>
<area shape="rect" id="node41" href="../../d8/d9c/stasis__app_8h.html" title="Stasis Application API. See Stasis Application API for detailed documentation. " alt="" coords="1381,169,1537,196"/>
<area shape="rect" id="node42" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1423,244,1561,271"/>
<area shape="rect" id="node43" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="1279,319,1404,345"/>
<area shape="rect" id="node45" href="../../d3/d93/include_2asterisk_2app_8h.html" title="Application convenience functions, designed to give consistent look and feel to Asterisk apps..." alt="" coords="1151,244,1263,271"/>
<area shape="rect" id="node46" href="../../d2/d4d/file_8h.html" title="Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. " alt="" coords="1047,319,1153,345"/>
</map>
</div>
</div>
<p><a href="../../dd/d71/res__stasis__device__state_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Device state subscription object.  <a href="../../db/d3a/structdevice__state__subscription.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa144d6445fe5bcfc21e67acabcf65a90"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#aa144d6445fe5bcfc21e67acabcf65a90">DEVICE_STATE_ALL</a>&#160;&#160;&#160;&quot;__AST_DEVICE_STATE_ALL_TOPIC&quot;</td></tr>
<tr class="separator:aa144d6445fe5bcfc21e67acabcf65a90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02b554105b926b0af4d54c68e8d8365e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#a02b554105b926b0af4d54c68e8d8365e">DEVICE_STATE_BUCKETS</a>&#160;&#160;&#160;37</td></tr>
<tr class="separator:a02b554105b926b0af4d54c68e8d8365e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae75a677e78fc3692a57a56e07cb8c7d1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#ae75a677e78fc3692a57a56e07cb8c7d1">DEVICE_STATE_FAMILY</a>&#160;&#160;&#160;&quot;StasisDeviceState&quot;</td></tr>
<tr class="separator:ae75a677e78fc3692a57a56e07cb8c7d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a966e51af1233a838d4a3f48f10db080a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#a966e51af1233a838d4a3f48f10db080a">DEVICE_STATE_PROVIDER_STASIS</a>&#160;&#160;&#160;&quot;Stasis&quot;</td></tr>
<tr class="separator:a966e51af1233a838d4a3f48f10db080a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d5da079ec5d11cf8ecd8511ec58d44f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#a4d5da079ec5d11cf8ecd8511ec58d44f">DEVICE_STATE_SCHEME_STASIS</a>&#160;&#160;&#160;&quot;Stasis:&quot;</td></tr>
<tr class="separator:a4d5da079ec5d11cf8ecd8511ec58d44f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6faee2d97b1413c77ed79fc4bf4232bc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#a6faee2d97b1413c77ed79fc4bf4232bc">DEVICE_STATE_SCHEME_SUB</a>&#160;&#160;&#160;&quot;deviceState:&quot;</td></tr>
<tr class="separator:a6faee2d97b1413c77ed79fc4bf4232bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6aaf8e13228e500cc1b793adc2006f98"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#a6aaf8e13228e500cc1b793adc2006f98">DEVICE_STATE_SIZE</a>&#160;&#160;&#160;64</td></tr>
<tr class="separator:a6aaf8e13228e500cc1b793adc2006f98"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d46e18369f92f19f1ad190a943d6fd1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#a9d46e18369f92f19f1ad190a943d6fd1">device_state_cb</a> (void *data, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg)</td></tr>
<tr class="separator:a9d46e18369f92f19f1ad190a943d6fd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab90e66bb4ef1b5eda6024d8a53482db7"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#ab90e66bb4ef1b5eda6024d8a53482db7">device_state_subscription_create</a> (const struct <a class="el" href="../../d4/de3/structstasis__app.html">stasis_app</a> *<a class="el" href="../../dd/de9/res__agi_8c.html#a9e5f57131367eff409b9e0bd7b31aa1a">app</a>, const char *device_name)</td></tr>
<tr class="separator:ab90e66bb4ef1b5eda6024d8a53482db7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35cbf94b14334480739c3225f9ea9b81"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#a35cbf94b14334480739c3225f9ea9b81">device_state_subscription_destroy</a> (void *obj)</td></tr>
<tr class="separator:a35cbf94b14334480739c3225f9ea9b81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0a96a12f7b4dee2c69ba639a91a7967"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#aa0a96a12f7b4dee2c69ba639a91a7967">device_state_subscriptions_cmp</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="separator:aa0a96a12f7b4dee2c69ba639a91a7967"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaae9c356706934cbe8651551f0b37709"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#aaae9c356706934cbe8651551f0b37709">device_state_subscriptions_hash</a> (const void *obj, const int flags)</td></tr>
<tr class="separator:aaae9c356706934cbe8651551f0b37709"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a710fb16f2aa91f2ba174718e90b98946"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#a710fb16f2aa91f2ba174718e90b98946">device_to_json_cb</a> (void *obj, void *arg, void *data, int flags)</td></tr>
<tr class="separator:a710fb16f2aa91f2ba174718e90b98946"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7b13e845fec90f119e1170e17fd263e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#ae7b13e845fec90f119e1170e17fd263e">devices_to_json</a> (const struct <a class="el" href="../../d4/de3/structstasis__app.html">stasis_app</a> *<a class="el" href="../../dd/de9/res__agi_8c.html#a9e5f57131367eff409b9e0bd7b31aa1a">app</a>, struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *json)</td></tr>
<tr class="separator:ae7b13e845fec90f119e1170e17fd263e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ef0280651a5547952424f877b807a04"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#a0ef0280651a5547952424f877b807a04">find_device_state</a> (const struct <a class="el" href="../../d4/de3/structstasis__app.html">stasis_app</a> *<a class="el" href="../../dd/de9/res__agi_8c.html#a9e5f57131367eff409b9e0bd7b31aa1a">app</a>, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:a0ef0280651a5547952424f877b807a04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb6223e83822ca943f928da19228647d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#afb6223e83822ca943f928da19228647d">find_device_state_subscription</a> (struct <a class="el" href="../../d4/de3/structstasis__app.html">stasis_app</a> *<a class="el" href="../../dd/de9/res__agi_8c.html#a9e5f57131367eff409b9e0bd7b31aa1a">app</a>, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:afb6223e83822ca943f928da19228647d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c755b38b5f0442503093e1628ebe166"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#a3c755b38b5f0442503093e1628ebe166">is_subscribed_device_state</a> (struct <a class="el" href="../../d4/de3/structstasis__app.html">stasis_app</a> *<a class="el" href="../../dd/de9/res__agi_8c.html#a9e5f57131367eff409b9e0bd7b31aa1a">app</a>, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:a3c755b38b5f0442503093e1628ebe166"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5e6e035bdebd35bb0ffcdf1a26fde51"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#ab5e6e035bdebd35bb0ffcdf1a26fde51">is_subscribed_device_state_lock</a> (struct <a class="el" href="../../d4/de3/structstasis__app.html">stasis_app</a> *<a class="el" href="../../dd/de9/res__agi_8c.html#a9e5f57131367eff409b9e0bd7b31aa1a">app</a>, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:ab5e6e035bdebd35bb0ffcdf1a26fde51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a875c19ec85af68eae3735b2cd4ae7ca0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#a875c19ec85af68eae3735b2cd4ae7ca0">populate_cache</a> (void)</td></tr>
<tr class="separator:a875c19ec85af68eae3735b2cd4ae7ca0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f37286e4eb64547197b9ddc4d37c29c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#a7f37286e4eb64547197b9ddc4d37c29c">remove_device_state_subscription</a> (struct <a class="el" href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="separator:a7f37286e4eb64547197b9ddc4d37c29c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b99c303421f7ded88417b58023c13df"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#a8b99c303421f7ded88417b58023c13df">send_device_state</a> (struct <a class="el" href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> <a class="el" href="../../d4/d88/structstate.html">state</a>)</td></tr>
<tr class="separator:a8b99c303421f7ded88417b58023c13df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a174eadb5e6076973870eaf0ce20e7458"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="../../d1/d75/stasis__app__device__state_8h.html#a40976afac9dd3f4b95fb6de99d8b1903">stasis_device_state_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#a174eadb5e6076973870eaf0ce20e7458">stasis_app_device_state_delete</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:a174eadb5e6076973870eaf0ce20e7458"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a device controlled by ARI.  <a href="#a174eadb5e6076973870eaf0ce20e7458">More...</a><br /></td></tr>
<tr class="separator:a174eadb5e6076973870eaf0ce20e7458"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4cdca00e48d5cca299bcbc7965acd89"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#aa4cdca00e48d5cca299bcbc7965acd89">stasis_app_device_state_to_json</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> <a class="el" href="../../d4/d88/structstate.html">state</a>)</td></tr>
<tr class="memdesc:aa4cdca00e48d5cca299bcbc7965acd89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert device state to json.  <a href="#aa4cdca00e48d5cca299bcbc7965acd89">More...</a><br /></td></tr>
<tr class="separator:aa4cdca00e48d5cca299bcbc7965acd89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04e8420c252a634e0c285864d1662d16"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="../../d1/d75/stasis__app__device__state_8h.html#a40976afac9dd3f4b95fb6de99d8b1903">stasis_device_state_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#a04e8420c252a634e0c285864d1662d16">stasis_app_device_state_update</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="memdesc:a04e8420c252a634e0c285864d1662d16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes the state of a device controlled by ARI.  <a href="#a04e8420c252a634e0c285864d1662d16">More...</a><br /></td></tr>
<tr class="separator:a04e8420c252a634e0c285864d1662d16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bcc1e1e94dd30c921885dacecce3e2d"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#a5bcc1e1e94dd30c921885dacecce3e2d">stasis_app_device_states_to_json</a> (void)</td></tr>
<tr class="memdesc:a5bcc1e1e94dd30c921885dacecce3e2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert device states to json array.  <a href="#a5bcc1e1e94dd30c921885dacecce3e2d">More...</a><br /></td></tr>
<tr class="separator:a5bcc1e1e94dd30c921885dacecce3e2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb2c210ac53c9aff148ecf63991a2ecb"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#adb2c210ac53c9aff148ecf63991a2ecb">stasis_device_state_cb</a> (const char *data)</td></tr>
<tr class="separator:adb2c210ac53c9aff148ecf63991a2ecb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c9795a047f6b71c3822542abdbc89d8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#a0c9795a047f6b71c3822542abdbc89d8">subscribe_device_state</a> (struct <a class="el" href="../../d4/de3/structstasis__app.html">stasis_app</a> *<a class="el" href="../../dd/de9/res__agi_8c.html#a9e5f57131367eff409b9e0bd7b31aa1a">app</a>, void *obj)</td></tr>
<tr class="separator:a0c9795a047f6b71c3822542abdbc89d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fc74077bf22b50acf5ab76658fa9e2f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#a7fc74077bf22b50acf5ab76658fa9e2f">unsubscribe_device_state</a> (struct <a class="el" href="../../d4/de3/structstasis__app.html">stasis_app</a> *<a class="el" href="../../dd/de9/res__agi_8c.html#a9e5f57131367eff409b9e0bd7b31aa1a">app</a>, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:a7fc74077bf22b50acf5ab76658fa9e2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a835b27a90d895a488e4e14cc3d2dee8c">AST_MODFLAG_GLOBAL_SYMBOLS</a> , .description = &quot;Stasis application device <a class="el" href="../../d4/d88/structstate.html">state</a> support&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .requires = &quot;res_stasis&quot;, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a54be790d8809d337c9a604000326ff"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d7/d3a/structstasis__app__event__source.html">stasis_app_event_source</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#a3a54be790d8809d337c9a604000326ff">device_state_event_source</a></td></tr>
<tr class="separator:a3a54be790d8809d337c9a604000326ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a265d2c16ebc2cd7a5db72bd7527fa4a4"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a></td></tr>
<tr class="separator:a265d2c16ebc2cd7a5db72bd7527fa4a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aa144d6445fe5bcfc21e67acabcf65a90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa144d6445fe5bcfc21e67acabcf65a90">&#9670;&nbsp;</a></span>DEVICE_STATE_ALL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEVICE_STATE_ALL&#160;&#160;&#160;&quot;__AST_DEVICE_STATE_ALL_TOPIC&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The key used for tracking a subscription to all device states </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00046">46</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00112">device_state_subscription_create()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00330">is_subscribed_device_state()</a>, and <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00360">subscribe_device_state()</a>.</p>

</div>
</div>
<a id="a02b554105b926b0af4d54c68e8d8365e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02b554105b926b0af4d54c68e8d8365e">&#9670;&nbsp;</a></span>DEVICE_STATE_BUCKETS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEVICE_STATE_BUCKETS&#160;&#160;&#160;37</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of hash buckets for device state subscriptions </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00043">43</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00456">load_module()</a>.</p>

</div>
</div>
<a id="ae75a677e78fc3692a57a56e07cb8c7d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae75a677e78fc3692a57a56e07cb8c7d1">&#9670;&nbsp;</a></span>DEVICE_STATE_FAMILY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEVICE_STATE_FAMILY&#160;&#160;&#160;&quot;StasisDeviceState&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>astdb family name </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00034">34</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00275">populate_cache()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00244">stasis_app_device_state_delete()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00211">stasis_app_device_state_update()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00168">stasis_app_device_states_to_json()</a>, and <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00292">stasis_device_state_cb()</a>.</p>

</div>
</div>
<a id="a966e51af1233a838d4a3f48f10db080a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a966e51af1233a838d4a3f48f10db080a">&#9670;&nbsp;</a></span>DEVICE_STATE_PROVIDER_STASIS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEVICE_STATE_PROVIDER_STASIS&#160;&#160;&#160;&quot;Stasis&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stasis device state provider </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00036">36</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00456">load_module()</a>, and <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00476">unload_module()</a>.</p>

</div>
</div>
<a id="a4d5da079ec5d11cf8ecd8511ec58d44f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d5da079ec5d11cf8ecd8511ec58d44f">&#9670;&nbsp;</a></span>DEVICE_STATE_SCHEME_STASIS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEVICE_STATE_SCHEME_STASIS&#160;&#160;&#160;&quot;Stasis:&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Scheme for custom device states </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00038">38</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00275">populate_cache()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00244">stasis_app_device_state_delete()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00211">stasis_app_device_state_update()</a>, and <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00168">stasis_app_device_states_to_json()</a>.</p>

</div>
</div>
<a id="a6faee2d97b1413c77ed79fc4bf4232bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6faee2d97b1413c77ed79fc4bf4232bc">&#9670;&nbsp;</a></span>DEVICE_STATE_SCHEME_SUB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEVICE_STATE_SCHEME_SUB&#160;&#160;&#160;&quot;deviceState:&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Scheme for device state subscriptions </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00040">40</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

</div>
</div>
<a id="a6aaf8e13228e500cc1b793adc2006f98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6aaf8e13228e500cc1b793adc2006f98">&#9670;&nbsp;</a></span>DEVICE_STATE_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEVICE_STATE_SIZE&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00032">32</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00168">stasis_app_device_states_to_json()</a>, and <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00292">stasis_device_state_cb()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00490">490</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00490">490</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00490">490</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

</div>
</div>
<a id="a9d46e18369f92f19f1ad190a943d6fd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d46e18369f92f19f1ad190a943d6fd1">&#9670;&nbsp;</a></span>device_state_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void device_state_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00301">301</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type()</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00242">ast_device_state_message::device</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00248">ast_device_state_message::eid</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00191">send_device_state()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message_type()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01176">stasis_subscription_final_message()</a>, and <a class="el" href="../../da/da2/devicestate_8h_source.html#l00250">ast_device_state_message::state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00360">subscribe_device_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;{</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d92/structast__device__state__message.html">ast_device_state_message</a> *device_state;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a839350445aaa51cedf31f6daec933ee0">stasis_subscription_final_message</a>(sub, msg)) {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="comment">/* Remove stasis subscription&#39;s reference to device_state_subscription */</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(data, -1);</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   }</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type</a>() != <a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(msg)) {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   device_state = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <span class="keywordflow">if</span> (device_state-&gt;<a class="code" href="../../db/d92/structast__device__state__message.html#a39d1b63955a48c72508fa9f884d05762">eid</a>) {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="comment">/* ignore non-aggregate states */</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a8b99c303421f7ded88417b58023c13df">send_device_state</a>(data, device_state-&gt;<a class="code" href="../../db/d92/structast__device__state__message.html#a8059c3b19eb356cf729e5d25b139647e">device</a>, device_state-&gt;<a class="code" href="../../db/d92/structast__device__state__message.html#a1acd064aff48cf4d5eafec1030f8429d">state</a>);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;}</div><div class="ttc" id="structast__device__state__message_html_a1acd064aff48cf4d5eafec1030f8429d"><div class="ttname"><a href="../../db/d92/structast__device__state__message.html#a1acd064aff48cf4d5eafec1030f8429d">ast_device_state_message::state</a></div><div class="ttdeci">enum ast_device_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00250">devicestate.h:250</a></div></div>
<div class="ttc" id="stasis_8h_html_a9356e8a29344ca4eac93088198ccff89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_message_type(const struct stasis_message *msg)</div><div class="ttdoc">Get the message type for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message.c:187</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_a8b99c303421f7ded88417b58023c13df"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a8b99c303421f7ded88417b58023c13df">send_device_state</a></div><div class="ttdeci">static void send_device_state(struct device_state_subscription *sub, const char *name, enum ast_device_state state)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00191">res_stasis_device_state.c:191</a></div></div>
<div class="ttc" id="devicestate_8h_html_a9459272db1c8c968ed1aff1387f0f9fd"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type</a></div><div class="ttdeci">struct stasis_message_type * ast_device_state_message_type(void)</div><div class="ttdoc">Get the Stasis message type for device state messages. </div></div>
<div class="ttc" id="structast__device__state__message_html_a39d1b63955a48c72508fa9f884d05762"><div class="ttname"><a href="../../db/d92/structast__device__state__message.html#a39d1b63955a48c72508fa9f884d05762">ast_device_state_message::eid</a></div><div class="ttdeci">const struct ast_eid * eid</div><div class="ttdoc">The EID of the server where this message originated. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00248">devicestate.h:248</a></div></div>
<div class="ttc" id="structast__device__state__message_html_a8059c3b19eb356cf729e5d25b139647e"><div class="ttname"><a href="../../db/d92/structast__device__state__message.html#a8059c3b19eb356cf729e5d25b139647e">ast_device_state_message::device</a></div><div class="ttdeci">const char * device</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00242">devicestate.h:242</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="stasis_8h_html_a839350445aaa51cedf31f6daec933ee0"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a839350445aaa51cedf31f6daec933ee0">stasis_subscription_final_message</a></div><div class="ttdeci">int stasis_subscription_final_message(struct stasis_subscription *sub, struct stasis_message *msg)</div><div class="ttdoc">Determine whether a message is the final message to be received on a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01176">stasis.c:1176</a></div></div>
<div class="ttc" id="structast__device__state__message_html"><div class="ttname"><a href="../../db/d92/structast__device__state__message.html">ast_device_state_message</a></div><div class="ttdoc">The structure that contains device state. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00240">devicestate.h:240</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab90e66bb4ef1b5eda6024d8a53482db7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab90e66bb4ef1b5eda6024d8a53482db7">&#9670;&nbsp;</a></span>device_state_subscription_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a>* device_state_subscription_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/de3/structstasis__app.html">stasis_app</a> *&#160;</td>
          <td class="paramname"><em>app</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>device_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00112">112</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00058">device_state_subscription::app_name</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00353">ast_string_field_init</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00046">DEVICE_STATE_ALL</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00106">device_state_subscription_destroy()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l01156">stasis_app_name()</a>, and <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00060">device_state_subscription::sub</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00325">find_device_state()</a>, and <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00360">subscribe_device_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;{</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a> = <a class="code" href="../../d8/d9c/stasis__app_8h.html#a8f04206486943b8208052323a7dfd101">stasis_app_name</a>(app);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;   <span class="keywordtype">size_t</span> size;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../db/d3a/structdevice__state__subscription.html#a2396cd3c5e694eeb579a002266c5adb4">device_name</a>)) {</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      <a class="code" href="../../db/d3a/structdevice__state__subscription.html#a2396cd3c5e694eeb579a002266c5adb4">device_name</a> = <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#aa144d6445fe5bcfc21e67acabcf65a90">DEVICE_STATE_ALL</a>;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;   }</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;   size = strlen(<a class="code" href="../../db/d3a/structdevice__state__subscription.html#a2396cd3c5e694eeb579a002266c5adb4">device_name</a>) + strlen(app_name) + 2;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;   sub = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*sub), <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a35cbf94b14334480739c3225f9ea9b81">device_state_subscription_destroy</a>);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   <span class="keywordflow">if</span> (!sub) {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;   }</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a>(sub, size)) {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sub, -1);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;   }</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(sub, app_name, app_name);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(sub, <a class="code" href="../../db/d3a/structdevice__state__subscription.html#a2396cd3c5e694eeb579a002266c5adb4">device_name</a>, <a class="code" href="../../db/d3a/structdevice__state__subscription.html#a2396cd3c5e694eeb579a002266c5adb4">device_name</a>);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div><div class="ttc" id="structdevice__state__subscription_html"><div class="ttname"><a href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a></div><div class="ttdoc">Device state subscription object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00054">res_stasis_device_state.c:54</a></div></div>
<div class="ttc" id="structdevice__state__subscription_html_a2396cd3c5e694eeb579a002266c5adb4"><div class="ttname"><a href="../../db/d3a/structdevice__state__subscription.html#a2396cd3c5e694eeb579a002266c5adb4">device_state_subscription::device_name</a></div><div class="ttdeci">const ast_string_field device_name</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00058">res_stasis_device_state.c:58</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_aa144d6445fe5bcfc21e67acabcf65a90"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#aa144d6445fe5bcfc21e67acabcf65a90">DEVICE_STATE_ALL</a></div><div class="ttdeci">#define DEVICE_STATE_ALL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00046">res_stasis_device_state.c:46</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="stringfields_8h_html_a871274fa4fd2687c7a44849a84df3665"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a></div><div class="ttdeci">#define ast_string_field_init(x, size)</div><div class="ttdoc">Initialize a field pool and fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00353">stringfields.h:353</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a8f04206486943b8208052323a7dfd101"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a8f04206486943b8208052323a7dfd101">stasis_app_name</a></div><div class="ttdeci">const char * stasis_app_name(const struct stasis_app *app)</div><div class="ttdoc">Retrieve an application&amp;#39;s name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5e/res_2stasis_2app_8c_source.html#l01156">res/stasis/app.c:1156</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="pbx__app_8c_html_a6d3c140ecf1f736c6750d5a17e5bf958"><div class="ttname"><a href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a></div><div class="ttdeci">const char * app_name(struct ast_app *app)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00463">pbx_app.c:463</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_a35cbf94b14334480739c3225f9ea9b81"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a35cbf94b14334480739c3225f9ea9b81">device_state_subscription_destroy</a></div><div class="ttdeci">static void device_state_subscription_destroy(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00106">res_stasis_device_state.c:106</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a35cbf94b14334480739c3225f9ea9b81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35cbf94b14334480739c3225f9ea9b81">&#9670;&nbsp;</a></span>device_state_subscription_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void device_state_subscription_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00106">106</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00368">ast_string_field_free_memory</a>, and <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00060">device_state_subscription::sub</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00112">device_state_subscription_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;{</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = obj;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a>(sub);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;}</div><div class="ttc" id="structdevice__state__subscription_html"><div class="ttname"><a href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a></div><div class="ttdoc">Device state subscription object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00054">res_stasis_device_state.c:54</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="stringfields_8h_html_abf60f862ae6a141d2f86a0f5e82792de"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a></div><div class="ttdeci">#define ast_string_field_free_memory(x)</div><div class="ttdoc">free all memory - to be called before destroying the object </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00368">stringfields.h:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa0a96a12f7b4dee2c69ba639a91a7967"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0a96a12f7b4dee2c69ba639a91a7967">&#9670;&nbsp;</a></span>device_state_subscriptions_cmp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int device_state_subscriptions_cmp </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00079">79</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00058">device_state_subscription::app_name</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01032">CMP_STOP</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00058">device_state_subscription::device_name</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01076">OBJ_SEARCH_MASK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01120">OBJ_SEARCH_PARTIAL_KEY</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00456">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;{</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a> *object_left = obj;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a> *object_right = arg;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;   <span class="keywordtype">int</span> cmp;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;   <span class="keywordflow">switch</span> (flags &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a>) {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>:</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <span class="comment">/* find objects matching both device and app names */</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <span class="keywordflow">if</span> (strcmp(object_left-&gt;<a class="code" href="../../db/d3a/structdevice__state__subscription.html#a2396cd3c5e694eeb579a002266c5adb4">device_name</a>,</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            object_right-&gt;<a class="code" href="../../db/d3a/structdevice__state__subscription.html#a2396cd3c5e694eeb579a002266c5adb4">device_name</a>)) {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      }</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      cmp = strcmp(object_left-&gt;<a class="code" href="../../db/d3a/structdevice__state__subscription.html#aa5dd3a30f2b8996640f371bdc96530cf">app_name</a>, object_right-&gt;<a class="code" href="../../db/d3a/structdevice__state__subscription.html#aa5dd3a30f2b8996640f371bdc96530cf">app_name</a>);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>:</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a>:</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0); <span class="comment">/* not supported by container */</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <span class="comment">/* fall through */</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      cmp = 0;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;   }</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;   <span class="keywordflow">return</span> cmp ? 0 : <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a>;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;}</div><div class="ttc" id="structdevice__state__subscription_html_aa5dd3a30f2b8996640f371bdc96530cf"><div class="ttname"><a href="../../db/d3a/structdevice__state__subscription.html#aa5dd3a30f2b8996640f371bdc96530cf">device_state_subscription::app_name</a></div><div class="ttdeci">const ast_string_field app_name</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00058">res_stasis_device_state.c:58</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="structdevice__state__subscription_html"><div class="ttname"><a href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a></div><div class="ttdoc">Device state subscription object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00054">res_stasis_device_state.c:54</a></div></div>
<div class="ttc" id="structdevice__state__subscription_html_a2396cd3c5e694eeb579a002266c5adb4"><div class="ttname"><a href="../../db/d3a/structdevice__state__subscription.html#a2396cd3c5e694eeb579a002266c5adb4">device_state_subscription::device_name</a></div><div class="ttdeci">const ast_string_field device_name</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00058">res_stasis_device_state.c:58</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01032">astobj2.h:1032</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a></div><div class="ttdoc">The arg parameter is a partial search key similar to OBJ_SEARCH_KEY. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01120">astobj2.h:1120</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a></div><div class="ttdoc">Search option field mask. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01076">astobj2.h:1076</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaae9c356706934cbe8651551f0b37709"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaae9c356706934cbe8651551f0b37709">&#9670;&nbsp;</a></span>device_state_subscriptions_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int device_state_subscriptions_hash </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00063">63</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01206">ast_str_hash()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00058">device_state_subscription::device_name</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01076">OBJ_SEARCH_MASK</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00456">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a> *object;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;   <span class="keywordflow">switch</span> (flags &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a>) {</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>:</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      <span class="keywordtype">object</span> = obj;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a33ab7fa091d5513d8507d3bd33ef5b55">ast_str_hash</a>(object-&gt;<a class="code" href="../../db/d3a/structdevice__state__subscription.html#a2396cd3c5e694eeb579a002266c5adb4">device_name</a>);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>:</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      <span class="comment">/* Hash can only work on something with a full key. */</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;   }</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="structdevice__state__subscription_html"><div class="ttname"><a href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a></div><div class="ttdoc">Device state subscription object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00054">res_stasis_device_state.c:54</a></div></div>
<div class="ttc" id="structdevice__state__subscription_html_a2396cd3c5e694eeb579a002266c5adb4"><div class="ttname"><a href="../../db/d3a/structdevice__state__subscription.html#a2396cd3c5e694eeb579a002266c5adb4">device_state_subscription::device_name</a></div><div class="ttdeci">const ast_string_field device_name</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00058">res_stasis_device_state.c:58</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a></div><div class="ttdoc">Search option field mask. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01076">astobj2.h:1076</a></div></div>
<div class="ttc" id="strings_8h_html_a33ab7fa091d5513d8507d3bd33ef5b55"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a33ab7fa091d5513d8507d3bd33ef5b55">ast_str_hash</a></div><div class="ttdeci">static force_inline int attribute_pure ast_str_hash(const char *str)</div><div class="ttdoc">Compute a hash value on a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01206">strings.h:1206</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a710fb16f2aa91f2ba174718e90b98946"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a710fb16f2aa91f2ba174718e90b98946">&#9670;&nbsp;</a></span>device_to_json_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int device_to_json_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00423">423</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00058">device_state_subscription::app_name</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01017">array()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00368">ast_json_array_append()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00268">ast_json_string_create()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00058">device_state_subscription::device_name</a>, and <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00060">device_state_subscription::sub</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00439">devices_to_json()</a>.</p>
<div class="fragment"><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;{</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = obj;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a> = arg;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *<a class="code" href="../../d9/d1e/func__strings_8c.html#ab6e308b3a41c01e08d252e071511495c">array</a> = data;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   <span class="keywordflow">if</span> (strcmp(sub-&gt;<a class="code" href="../../db/d3a/structdevice__state__subscription.html#aa5dd3a30f2b8996640f371bdc96530cf">app_name</a>, app_name)) {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;   }</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#a3d675e52f866630a6a03302df2712b8d">ast_json_array_append</a>(</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      array, <a class="code" href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a>(sub-&gt;<a class="code" href="../../db/d3a/structdevice__state__subscription.html#a2396cd3c5e694eeb579a002266c5adb4">device_name</a>));</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;}</div><div class="ttc" id="structdevice__state__subscription_html_aa5dd3a30f2b8996640f371bdc96530cf"><div class="ttname"><a href="../../db/d3a/structdevice__state__subscription.html#aa5dd3a30f2b8996640f371bdc96530cf">device_state_subscription::app_name</a></div><div class="ttdeci">const ast_string_field app_name</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00058">res_stasis_device_state.c:58</a></div></div>
<div class="ttc" id="structdevice__state__subscription_html"><div class="ttname"><a href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a></div><div class="ttdoc">Device state subscription object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00054">res_stasis_device_state.c:54</a></div></div>
<div class="ttc" id="structdevice__state__subscription_html_a2396cd3c5e694eeb579a002266c5adb4"><div class="ttname"><a href="../../db/d3a/structdevice__state__subscription.html#a2396cd3c5e694eeb579a002266c5adb4">device_state_subscription::device_name</a></div><div class="ttdeci">const ast_string_field device_name</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00058">res_stasis_device_state.c:58</a></div></div>
<div class="ttc" id="json_8h_html_adc52f8d76b7fdd0c8d12987981fd5bf5"><div class="ttname"><a href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a></div><div class="ttdeci">struct ast_json * ast_json_string_create(const char *value)</div><div class="ttdoc">Construct a JSON string from value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00268">json.c:268</a></div></div>
<div class="ttc" id="json_8h_html_a3d675e52f866630a6a03302df2712b8d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a3d675e52f866630a6a03302df2712b8d">ast_json_array_append</a></div><div class="ttdeci">int ast_json_array_append(struct ast_json *array, struct ast_json *value)</div><div class="ttdoc">Append to an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00368">json.c:368</a></div></div>
<div class="ttc" id="func__strings_8c_html_ab6e308b3a41c01e08d252e071511495c"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#ab6e308b3a41c01e08d252e071511495c">array</a></div><div class="ttdeci">static int array(struct ast_channel *chan, const char *cmd, char *var, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01017">func_strings.c:1017</a></div></div>
<div class="ttc" id="pbx__app_8c_html_a6d3c140ecf1f736c6750d5a17e5bf958"><div class="ttname"><a href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a></div><div class="ttdeci">const char * app_name(struct ast_app *app)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00463">pbx_app.c:463</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae7b13e845fec90f119e1170e17fd263e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7b13e845fec90f119e1170e17fd263e">&#9670;&nbsp;</a></span>devices_to_json()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void devices_to_json </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/de3/structstasis__app.html">stasis_app</a> *&#160;</td>
          <td class="paramname"><em>app</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td>
          <td class="paramname"><em>json</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00439">439</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01743">ao2_callback_data</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01017">array()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00352">ast_json_array_create()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00404">ast_json_object_set()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00423">device_to_json_cb()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01048">OBJ_NODATA</a>, and <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l01156">stasis_app_name()</a>.</p>
<div class="fragment"><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;{</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *<a class="code" href="../../d9/d1e/func__strings_8c.html#ab6e308b3a41c01e08d252e071511495c">array</a> = <a class="code" href="../../d4/d05/json_8h.html#a48d874eed79fb2bbeb0557440e33ae67">ast_json_array_create</a>();</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a63fd831fe48aed32d3ef992ad8e45293">ao2_callback_data</a>(<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>,</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;           <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a710fb16f2aa91f2ba174718e90b98946">device_to_json_cb</a>, (<span class="keywordtype">void</span> *)<a class="code" href="../../d8/d9c/stasis__app_8h.html#a8f04206486943b8208052323a7dfd101">stasis_app_name</a>(app), array);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(json, <span class="stringliteral">&quot;device_names&quot;</span>, array);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;}</div><div class="ttc" id="res__stasis__device__state_8c_html_a265d2c16ebc2cd7a5db72bd7527fa4a4"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a></div><div class="ttdeci">static struct ao2_container * device_state_subscriptions</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00049">res_stasis_device_state.c:49</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01048">astobj2.h:1048</a></div></div>
<div class="ttc" id="json_8h_html_abc8b563c172cfaffa2b555195990f729"><div class="ttname"><a href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a></div><div class="ttdeci">int ast_json_object_set(struct ast_json *object, const char *key, struct ast_json *value)</div><div class="ttdoc">Set a field in a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00404">json.c:404</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a8f04206486943b8208052323a7dfd101"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a8f04206486943b8208052323a7dfd101">stasis_app_name</a></div><div class="ttdeci">const char * stasis_app_name(const struct stasis_app *app)</div><div class="ttdoc">Retrieve an application&amp;#39;s name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5e/res_2stasis_2app_8c_source.html#l01156">res/stasis/app.c:1156</a></div></div>
<div class="ttc" id="json_8h_html_a48d874eed79fb2bbeb0557440e33ae67"><div class="ttname"><a href="../../d4/d05/json_8h.html#a48d874eed79fb2bbeb0557440e33ae67">ast_json_array_create</a></div><div class="ttdeci">struct ast_json * ast_json_array_create(void)</div><div class="ttdoc">Create a empty JSON array. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00352">json.c:352</a></div></div>
<div class="ttc" id="func__strings_8c_html_ab6e308b3a41c01e08d252e071511495c"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#ab6e308b3a41c01e08d252e071511495c">array</a></div><div class="ttdeci">static int array(struct ast_channel *chan, const char *cmd, char *var, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01017">func_strings.c:1017</a></div></div>
<div class="ttc" id="astobj2_8h_html_a63fd831fe48aed32d3ef992ad8e45293"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a63fd831fe48aed32d3ef992ad8e45293">ao2_callback_data</a></div><div class="ttdeci">#define ao2_callback_data(container, flags, cb_fn, arg, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01743">astobj2.h:1743</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_a710fb16f2aa91f2ba174718e90b98946"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a710fb16f2aa91f2ba174718e90b98946">device_to_json_cb</a></div><div class="ttdeci">static int device_to_json_cb(void *obj, void *arg, void *data, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00423">res_stasis_device_state.c:423</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0ef0280651a5547952424f877b807a04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ef0280651a5547952424f877b807a04">&#9670;&nbsp;</a></span>find_device_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* find_device_state </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/de3/structstasis__app.html">stasis_app</a> *&#160;</td>
          <td class="paramname"><em>app</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00325">325</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00112">device_state_subscription_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;{</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#ab90e66bb4ef1b5eda6024d8a53482db7">device_state_subscription_create</a>(app, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;}</div><div class="ttc" id="res__stasis__device__state_8c_html_ab90e66bb4ef1b5eda6024d8a53482db7"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#ab90e66bb4ef1b5eda6024d8a53482db7">device_state_subscription_create</a></div><div class="ttdeci">static struct device_state_subscription * device_state_subscription_create(const struct stasis_app *app, const char *device_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00112">res_stasis_device_state.c:112</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afb6223e83822ca943f928da19228647d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb6223e83822ca943f928da19228647d">&#9670;&nbsp;</a></span>find_device_state_subscription()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a>* find_device_state_subscription </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/de3/structstasis__app.html">stasis_app</a> *&#160;</td>
          <td class="paramname"><em>app</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00140">140</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00058">device_state_subscription::app_name</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01067">OBJ_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>, and <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l01156">stasis_app_name()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00330">is_subscribed_device_state()</a>, and <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00407">unsubscribe_device_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;{</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a> dummy_sub = {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      .<a class="code" href="../../db/d3a/structdevice__state__subscription.html#aa5dd3a30f2b8996640f371bdc96530cf">app_name</a> = <a class="code" href="../../d8/d9c/stasis__app_8h.html#a8f04206486943b8208052323a7dfd101">stasis_app_name</a>(app),</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      .device_name = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;   };</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a>, &amp;dummy_sub, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a>);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div><div class="ttc" id="res__stasis__device__state_8c_html_a265d2c16ebc2cd7a5db72bd7527fa4a4"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a></div><div class="ttdeci">static struct ao2_container * device_state_subscriptions</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00049">res_stasis_device_state.c:49</a></div></div>
<div class="ttc" id="structdevice__state__subscription_html_aa5dd3a30f2b8996640f371bdc96530cf"><div class="ttname"><a href="../../db/d3a/structdevice__state__subscription.html#aa5dd3a30f2b8996640f371bdc96530cf">device_state_subscription::app_name</a></div><div class="ttdeci">const ast_string_field app_name</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00058">res_stasis_device_state.c:58</a></div></div>
<div class="ttc" id="structdevice__state__subscription_html"><div class="ttname"><a href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a></div><div class="ttdoc">Device state subscription object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00054">res_stasis_device_state.c:54</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a></div><div class="ttdoc">Assume that the ao2_container is already locked. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01067">astobj2.h:1067</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a8f04206486943b8208052323a7dfd101"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a8f04206486943b8208052323a7dfd101">stasis_app_name</a></div><div class="ttdeci">const char * stasis_app_name(const struct stasis_app *app)</div><div class="ttdoc">Retrieve an application&amp;#39;s name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5e/res_2stasis_2app_8c_source.html#l01156">res/stasis/app.c:1156</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c755b38b5f0442503093e1628ebe166"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c755b38b5f0442503093e1628ebe166">&#9670;&nbsp;</a></span>is_subscribed_device_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int is_subscribed_device_state </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/de3/structstasis__app.html">stasis_app</a> *&#160;</td>
          <td class="paramname"><em>app</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00330">330</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00046">DEVICE_STATE_ALL</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00140">find_device_state_subscription()</a>, and <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00060">device_state_subscription::sub</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00349">is_subscribed_device_state_lock()</a>, and <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00360">subscribe_device_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;{</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   sub = <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#afb6223e83822ca943f928da19228647d">find_device_state_subscription</a>(app, <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#aa144d6445fe5bcfc21e67acabcf65a90">DEVICE_STATE_ALL</a>);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;   <span class="keywordflow">if</span> (sub) {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sub, -1);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;   }</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   sub = <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#afb6223e83822ca943f928da19228647d">find_device_state_subscription</a>(app, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;   <span class="keywordflow">if</span> (sub) {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sub, -1);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   }</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;}</div><div class="ttc" id="structdevice__state__subscription_html"><div class="ttname"><a href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a></div><div class="ttdoc">Device state subscription object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00054">res_stasis_device_state.c:54</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_aa144d6445fe5bcfc21e67acabcf65a90"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#aa144d6445fe5bcfc21e67acabcf65a90">DEVICE_STATE_ALL</a></div><div class="ttdeci">#define DEVICE_STATE_ALL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00046">res_stasis_device_state.c:46</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_afb6223e83822ca943f928da19228647d"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#afb6223e83822ca943f928da19228647d">find_device_state_subscription</a></div><div class="ttdeci">static struct device_state_subscription * find_device_state_subscription(struct stasis_app *app, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00140">res_stasis_device_state.c:140</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab5e6e035bdebd35bb0ffcdf1a26fde51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5e6e035bdebd35bb0ffcdf1a26fde51">&#9670;&nbsp;</a></span>is_subscribed_device_state_lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int is_subscribed_device_state_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/de3/structstasis__app.html">stasis_app</a> *&#160;</td>
          <td class="paramname"><em>app</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00349">349</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, and <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00330">is_subscribed_device_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;{</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;   <span class="keywordtype">int</span> is_subscribed;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a>);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   is_subscribed = <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a3c755b38b5f0442503093e1628ebe166">is_subscribed_device_state</a>(app, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a>);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   <span class="keywordflow">return</span> is_subscribed;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;}</div><div class="ttc" id="res__stasis__device__state_8c_html_a265d2c16ebc2cd7a5db72bd7527fa4a4"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a></div><div class="ttdeci">static struct ao2_container * device_state_subscriptions</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00049">res_stasis_device_state.c:49</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_a3c755b38b5f0442503093e1628ebe166"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a3c755b38b5f0442503093e1628ebe166">is_subscribed_device_state</a></div><div class="ttdeci">static int is_subscribed_device_state(struct stasis_app *app, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00330">res_stasis_device_state.c:330</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00456">456</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00365">AO2_ALLOC_OPT_LOCK_MUTEX</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01310">ao2_container_alloc_hash</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00391">ast_devstate_prov_add()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00418">ast_devstate_prov_del()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00043">DEVICE_STATE_BUCKETS</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00036">DEVICE_STATE_PROVIDER_STASIS</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00079">device_state_subscriptions_cmp()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00063">device_state_subscriptions_hash()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00275">populate_cache()</a>, <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l01816">stasis_app_register_event_source()</a>, and <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00292">stasis_device_state_cb()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00476">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;{</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a875c19ec85af68eae3735b2cd4ae7ca0">populate_cache</a>();</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/da2/devicestate_8h.html#ae832fcc32c88962e73025ffeafe2961e">ast_devstate_prov_add</a>(<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a966e51af1233a838d4a3f48f10db080a">DEVICE_STATE_PROVIDER_STASIS</a>,</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;              <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#adb2c210ac53c9aff148ecf63991a2ecb">stasis_device_state_cb</a>)) {</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   }</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;   <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0,</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a02b554105b926b0af4d54c68e8d8365e">DEVICE_STATE_BUCKETS</a>, <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#aaae9c356706934cbe8651551f0b37709">device_state_subscriptions_hash</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#aa0a96a12f7b4dee2c69ba639a91a7967">device_state_subscriptions_cmp</a>);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a>) {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <a class="code" href="../../da/da2/devicestate_8h.html#a1ab579ae15aaca64a904c3c41d8b8b01">ast_devstate_prov_del</a>(<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a966e51af1233a838d4a3f48f10db080a">DEVICE_STATE_PROVIDER_STASIS</a>);</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;   }</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;   <a class="code" href="../../d8/d9c/stasis__app_8h.html#aad7e2e88b43d2044074a802ebd34409d">stasis_app_register_event_source</a>(&amp;<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a3a54be790d8809d337c9a604000326ff">device_state_event_source</a>);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;}</div><div class="ttc" id="res__stasis__device__state_8c_html_a265d2c16ebc2cd7a5db72bd7527fa4a4"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a></div><div class="ttdeci">static struct ao2_container * device_state_subscriptions</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00049">res_stasis_device_state.c:49</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="devicestate_8h_html_a1ab579ae15aaca64a904c3c41d8b8b01"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a1ab579ae15aaca64a904c3c41d8b8b01">ast_devstate_prov_del</a></div><div class="ttdeci">int ast_devstate_prov_del(const char *label)</div><div class="ttdoc">Remove device state provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00418">devicestate.c:418</a></div></div>
<div class="ttc" id="devicestate_8h_html_ae832fcc32c88962e73025ffeafe2961e"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#ae832fcc32c88962e73025ffeafe2961e">ast_devstate_prov_add</a></div><div class="ttdeci">int ast_devstate_prov_add(const char *label, ast_devstate_prov_cb_type callback)</div><div class="ttdoc">Add device state provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00391">devicestate.c:391</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_a875c19ec85af68eae3735b2cd4ae7ca0"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a875c19ec85af68eae3735b2cd4ae7ca0">populate_cache</a></div><div class="ttdeci">static void populate_cache(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00275">res_stasis_device_state.c:275</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_a3a54be790d8809d337c9a604000326ff"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a3a54be790d8809d337c9a604000326ff">device_state_event_source</a></div><div class="ttdeci">struct stasis_app_event_source device_state_event_source</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00447">res_stasis_device_state.c:447</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00365">astobj2.h:365</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_adb2c210ac53c9aff148ecf63991a2ecb"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#adb2c210ac53c9aff148ecf63991a2ecb">stasis_device_state_cb</a></div><div class="ttdeci">static enum ast_device_state stasis_device_state_cb(const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00292">res_stasis_device_state.c:292</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_a966e51af1233a838d4a3f48f10db080a"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a966e51af1233a838d4a3f48f10db080a">DEVICE_STATE_PROVIDER_STASIS</a></div><div class="ttdeci">#define DEVICE_STATE_PROVIDER_STASIS</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00036">res_stasis_device_state.c:36</a></div></div>
<div class="ttc" id="astobj2_8h_html_aefc16f8aa9087cbc5c55c70cf1dd41b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a></div><div class="ttdeci">#define ao2_container_alloc_hash(ao2_options, container_options, n_buckets, hash_fn, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01310">astobj2.h:1310</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_aaae9c356706934cbe8651551f0b37709"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#aaae9c356706934cbe8651551f0b37709">device_state_subscriptions_hash</a></div><div class="ttdeci">static int device_state_subscriptions_hash(const void *obj, const int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00063">res_stasis_device_state.c:63</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_a02b554105b926b0af4d54c68e8d8365e"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a02b554105b926b0af4d54c68e8d8365e">DEVICE_STATE_BUCKETS</a></div><div class="ttdeci">#define DEVICE_STATE_BUCKETS</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00043">res_stasis_device_state.c:43</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_aa0a96a12f7b4dee2c69ba639a91a7967"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#aa0a96a12f7b4dee2c69ba639a91a7967">device_state_subscriptions_cmp</a></div><div class="ttdeci">static int device_state_subscriptions_cmp(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00079">res_stasis_device_state.c:79</a></div></div>
<div class="ttc" id="stasis__app_8h_html_aad7e2e88b43d2044074a802ebd34409d"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#aad7e2e88b43d2044074a802ebd34409d">stasis_app_register_event_source</a></div><div class="ttdeci">void stasis_app_register_event_source(struct stasis_app_event_source *obj)</div><div class="ttdoc">Register an application event source. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l01816">res_stasis.c:1816</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a875c19ec85af68eae3735b2cd4ae7ca0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a875c19ec85af68eae3735b2cd4ae7ca0">&#9670;&nbsp;</a></span>populate_cache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void populate_cache </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00275">275</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d21/main_2db_8c_source.html#l00598">ast_db_freetree()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00531">ast_db_gettree()</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00070">AST_DEVSTATE_CACHABLE</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00510">ast_devstate_changed()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00260">ast_devstate_val()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d4a/astdb_8h_source.html#l00034">ast_db_entry::data</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00034">DEVICE_STATE_FAMILY</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00038">DEVICE_STATE_SCHEME_STASIS</a>, <a class="el" href="../../de/d4a/astdb_8h_source.html#l00033">ast_db_entry::key</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../de/d4a/astdb_8h_source.html#l00032">ast_db_entry::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00456">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;{</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/d1d/structast__db__entry.html">ast_db_entry</a> *, tree,</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;       <a class="code" href="../../de/d4a/astdb_8h.html#afeb9839f89da4fc24838de74739d181e">ast_db_gettree</a>(<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#ae75a677e78fc3692a57a56e07cb8c7d1">DEVICE_STATE_FAMILY</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>), <a class="code" href="../../de/d4a/astdb_8h.html#af9ab454a70a91551b2bf6c55199fc514">ast_db_freetree</a>);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d1d/structast__db__entry.html">ast_db_entry</a> *<a class="code" href="../../d3/d96/structentry.html">entry</a>;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;   <span class="keywordflow">for</span> (entry = tree; entry; entry = entry-&gt;<a class="code" href="../../da/d1d/structast__db__entry.html#a3fee4a0a4bff112e0262fb8d49f41b5e">next</a>) {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = strrchr(entry-&gt;<a class="code" href="../../da/d1d/structast__db__entry.html#a5892a9181e6a332f84d27aecd41dcd12">key</a>, <span class="charliteral">&#39;/&#39;</span>);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name)) {</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;         <a class="code" href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a>(</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            <a class="code" href="../../da/da2/devicestate_8h.html#ae148e0b95218b57b0348ab53f2f82657">ast_devstate_val</a>(entry-&gt;<a class="code" href="../../da/d1d/structast__db__entry.html#a9a3b4be1b9151b0369d7fca9911c7ecd">data</a>),</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>, <span class="stringliteral">&quot;%s%s\n&quot;</span>,</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a4d5da079ec5d11cf8ecd8511ec58d44f">DEVICE_STATE_SCHEME_STASIS</a>, name + 1);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      }</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;   }</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;}</div><div class="ttc" id="res__stasis__device__state_8c_html_a4d5da079ec5d11cf8ecd8511ec58d44f"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a4d5da079ec5d11cf8ecd8511ec58d44f">DEVICE_STATE_SCHEME_STASIS</a></div><div class="ttdeci">#define DEVICE_STATE_SCHEME_STASIS</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00038">res_stasis_device_state.c:38</a></div></div>
<div class="ttc" id="astdb_8h_html_af9ab454a70a91551b2bf6c55199fc514"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#af9ab454a70a91551b2bf6c55199fc514">ast_db_freetree</a></div><div class="ttdeci">void ast_db_freetree(struct ast_db_entry *entry)</div><div class="ttdoc">Free structure created by ast_db_gettree() </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00598">main/db.c:598</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__db__entry_html_a3fee4a0a4bff112e0262fb8d49f41b5e"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html#a3fee4a0a4bff112e0262fb8d49f41b5e">ast_db_entry::next</a></div><div class="ttdeci">struct ast_db_entry * next</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00032">astdb.h:32</a></div></div>
<div class="ttc" id="devicestate_8h_html_a62a8e6bc4b82dd797e505688f9f29bff"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a></div><div class="ttdeci">int ast_devstate_changed(enum ast_device_state state, enum ast_devstate_cache cachable, const char *fmt,...)</div><div class="ttdoc">Tells Asterisk the State for Device is changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00510">devicestate.c:510</a></div></div>
<div class="ttc" id="devicestate_8h_html_ae148e0b95218b57b0348ab53f2f82657"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#ae148e0b95218b57b0348ab53f2f82657">ast_devstate_val</a></div><div class="ttdeci">enum ast_device_state ast_devstate_val(const char *val)</div><div class="ttdoc">Convert device state from text to integer value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00260">devicestate.c:260</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astdb_8h_html_afeb9839f89da4fc24838de74739d181e"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#afeb9839f89da4fc24838de74739d181e">ast_db_gettree</a></div><div class="ttdeci">struct ast_db_entry * ast_db_gettree(const char *family, const char *keytree)</div><div class="ttdoc">Get a list of values within the astdb tree. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00531">main/db.c:531</a></div></div>
<div class="ttc" id="structast__db__entry_html"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html">ast_db_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00031">astdb.h:31</a></div></div>
<div class="ttc" id="structast__db__entry_html_a9a3b4be1b9151b0369d7fca9911c7ecd"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html#a9a3b4be1b9151b0369d7fca9911c7ecd">ast_db_entry::data</a></div><div class="ttdeci">char data[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00034">astdb.h:34</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="devicestate_8h_html_a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00070">devicestate.h:70</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_ae75a677e78fc3692a57a56e07cb8c7d1"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#ae75a677e78fc3692a57a56e07cb8c7d1">DEVICE_STATE_FAMILY</a></div><div class="ttdeci">#define DEVICE_STATE_FAMILY</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00034">res_stasis_device_state.c:34</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structast__db__entry_html_a5892a9181e6a332f84d27aecd41dcd12"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html#a5892a9181e6a332f84d27aecd41dcd12">ast_db_entry::key</a></div><div class="ttdeci">char * key</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00033">astdb.h:33</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f37286e4eb64547197b9ddc4d37c29c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f37286e4eb64547197b9ddc4d37c29c">&#9670;&nbsp;</a></span>remove_device_state_subscription()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void remove_device_state_subscription </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00151">151</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01622">ao2_unlink_flags</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01067">OBJ_NOLOCK</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01136">stasis_unsubscribe_and_join()</a>, and <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00060">device_state_subscription::sub</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00407">unsubscribe_device_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;{</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;   <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../db/d3a/structdevice__state__subscription.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>) {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      sub-&gt;<a class="code" href="../../db/d3a/structdevice__state__subscription.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a221d05010106dcde0cc2e2b43c1a8b67">stasis_unsubscribe_and_join</a>(sub-&gt;<a class="code" href="../../db/d3a/structdevice__state__subscription.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;   }</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a77df7775a2a8b6cbef307e211dbf045c">ao2_unlink_flags</a>(<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a>, sub, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a>);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div><div class="ttc" id="res__stasis__device__state_8c_html_a265d2c16ebc2cd7a5db72bd7527fa4a4"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a></div><div class="ttdeci">static struct ao2_container * device_state_subscriptions</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00049">res_stasis_device_state.c:49</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a></div><div class="ttdoc">Assume that the ao2_container is already locked. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01067">astobj2.h:1067</a></div></div>
<div class="ttc" id="stasis_8h_html_a221d05010106dcde0cc2e2b43c1a8b67"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a221d05010106dcde0cc2e2b43c1a8b67">stasis_unsubscribe_and_join</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe_and_join(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription, blocking until the last message is processed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01136">stasis.c:1136</a></div></div>
<div class="ttc" id="structdevice__state__subscription_html_a03bb86c52b8e22ea4325ea04e6443fa0"><div class="ttname"><a href="../../db/d3a/structdevice__state__subscription.html#a03bb86c52b8e22ea4325ea04e6443fa0">device_state_subscription::sub</a></div><div class="ttdeci">struct stasis_subscription * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00060">res_stasis_device_state.c:60</a></div></div>
<div class="ttc" id="astobj2_8h_html_a77df7775a2a8b6cbef307e211dbf045c"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a77df7775a2a8b6cbef307e211dbf045c">ao2_unlink_flags</a></div><div class="ttdeci">#define ao2_unlink_flags(container, obj, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01622">astobj2.h:1622</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b99c303421f7ded88417b58023c13df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b99c303421f7ded88417b58023c13df">&#9670;&nbsp;</a></span>send_device_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void send_device_state </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00191">191</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00058">device_state_subscription::app_name</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00591">ast_json_pack()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00649">ast_json_timeval()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00160">stasis_app_device_state_to_json()</a>, and <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l01656">stasis_app_send()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00301">device_state_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;{</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, json, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;   json = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s:s, s:s, s:o, s:o}&quot;</span>,</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;              <span class="stringliteral">&quot;type&quot;</span>, <span class="stringliteral">&quot;DeviceStateChanged&quot;</span>,</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;              <span class="stringliteral">&quot;application&quot;</span>, sub-&gt;<a class="code" href="../../db/d3a/structdevice__state__subscription.html#aa5dd3a30f2b8996640f371bdc96530cf">app_name</a>,</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;              <span class="stringliteral">&quot;timestamp&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a2b7c72e2e3ab2634d8a4f8b708440d95">ast_json_timeval</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;              <span class="stringliteral">&quot;device_state&quot;</span>, <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#aa4cdca00e48d5cca299bcbc7965acd89">stasis_app_device_state_to_json</a>(</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                 <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d4/d88/structstate.html">state</a>));</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;   <span class="keywordflow">if</span> (!json) {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create device state json object\n&quot;</span>);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;   }</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;   <a class="code" href="../../d8/d9c/stasis__app_8h.html#a27e480436ce57455bc35ec42889104ab">stasis_app_send</a>(sub-&gt;<a class="code" href="../../db/d3a/structdevice__state__subscription.html#aa5dd3a30f2b8996640f371bdc96530cf">app_name</a>, json);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div><div class="ttc" id="structdevice__state__subscription_html_aa5dd3a30f2b8996640f371bdc96530cf"><div class="ttname"><a href="../../db/d3a/structdevice__state__subscription.html#aa5dd3a30f2b8996640f371bdc96530cf">device_state_subscription::app_name</a></div><div class="ttdeci">const ast_string_field app_name</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00058">res_stasis_device_state.c:58</a></div></div>
<div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="json_8h_html_a2b7c72e2e3ab2634d8a4f8b708440d95"><div class="ttname"><a href="../../d4/d05/json_8h.html#a2b7c72e2e3ab2634d8a4f8b708440d95">ast_json_timeval</a></div><div class="ttdeci">struct ast_json * ast_json_timeval(const struct timeval tv, const char *zone)</div><div class="ttdoc">Construct a timeval as JSON. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00649">json.c:649</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a27e480436ce57455bc35ec42889104ab"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a27e480436ce57455bc35ec42889104ab">stasis_app_send</a></div><div class="ttdeci">int stasis_app_send(const char *app_name, struct ast_json *message)</div><div class="ttdoc">Send a message to the given Stasis application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l01656">res_stasis.c:1656</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_aa4cdca00e48d5cca299bcbc7965acd89"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#aa4cdca00e48d5cca299bcbc7965acd89">stasis_app_device_state_to_json</a></div><div class="ttdeci">struct ast_json * stasis_app_device_state_to_json(const char *name, enum ast_device_state state)</div><div class="ttdoc">Convert device state to json. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00160">res_stasis_device_state.c:160</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a174eadb5e6076973870eaf0ce20e7458"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a174eadb5e6076973870eaf0ce20e7458">&#9670;&nbsp;</a></span>stasis_app_device_state_delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d1/d75/stasis__app__device__state_8h.html#a40976afac9dd3f4b95fb6de99d8b1903">stasis_device_state_result</a> stasis_app_device_state_delete </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a device controlled by ARI. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the name of the ARI controlled device</td></tr>
  </table>
  </dd>
</dl>
<p>stasis device state application result. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00244">244</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d21/main_2db_8c_source.html#l00429">ast_db_del()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00688">ast_device_state_clear_cache()</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00053">AST_DEVICE_UNKNOWN</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00070">AST_DEVSTATE_CACHABLE</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00510">ast_devstate_changed()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00034">DEVICE_STATE_FAMILY</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00038">DEVICE_STATE_SCHEME_STASIS</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../d1/d75/stasis__app__device__state_8h_source.html#l00062">STASIS_DEVICE_STATE_MISSING</a>, <a class="el" href="../../d1/d75/stasis__app__device__state_8h_source.html#l00060">STASIS_DEVICE_STATE_NOT_CONTROLLED</a>, <a class="el" href="../../d1/d75/stasis__app__device__state_8h_source.html#l00058">STASIS_DEVICE_STATE_OK</a>, and <a class="el" href="../../d1/d75/stasis__app__device__state_8h_source.html#l00064">STASIS_DEVICE_STATE_UNKNOWN</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d20/resource__device__states_8c_source.html#l00091">ast_ari_device_states_delete()</a>.</p>
<div class="fragment"><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;{</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *full_name = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   <span class="keywordtype">size_t</span> size = strlen(<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a4d5da079ec5d11cf8ecd8511ec58d44f">DEVICE_STATE_SCHEME_STASIS</a>);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;   <span class="keywordflow">if</span> (strncasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a4d5da079ec5d11cf8ecd8511ec58d44f">DEVICE_STATE_SCHEME_STASIS</a>, size)) {</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Can only delete &#39;%s&#39; device states!\n&quot;</span>,</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;         <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a4d5da079ec5d11cf8ecd8511ec58d44f">DEVICE_STATE_SCHEME_STASIS</a>);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d1/d75/stasis__app__device__state_8h.html#a40976afac9dd3f4b95fb6de99d8b1903a72f5745e7b25db63305dd09d6de120d7">STASIS_DEVICE_STATE_NOT_CONTROLLED</a>;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;   }</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;   <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> += size;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>)) {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Delete requires a device name!\n&quot;</span>);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d1/d75/stasis__app__device__state_8h.html#a40976afac9dd3f4b95fb6de99d8b1903ac13711afc3a4a79b1a8fcc77d211c600">STASIS_DEVICE_STATE_MISSING</a>;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/da2/devicestate_8h.html#ac94ca2b82d62f44e03dc2937c9c061d4">ast_device_state_clear_cache</a>(full_name)) {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d1/d75/stasis__app__device__state_8h.html#a40976afac9dd3f4b95fb6de99d8b1903af4da9d4d0fef25a40f796673eed97dee">STASIS_DEVICE_STATE_UNKNOWN</a>;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;   }</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;   <a class="code" href="../../de/d4a/astdb_8h.html#a71e8d5ab1757b184683a99125d1c8160">ast_db_del</a>(<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#ae75a677e78fc3692a57a56e07cb8c7d1">DEVICE_STATE_FAMILY</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;   <span class="comment">/* send state change for delete */</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a>(</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>, <span class="stringliteral">&quot;%s%s&quot;</span>,</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a4d5da079ec5d11cf8ecd8511ec58d44f">DEVICE_STATE_SCHEME_STASIS</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/d75/stasis__app__device__state_8h.html#a40976afac9dd3f4b95fb6de99d8b1903aa1338c640420886ddd01800cbf13813c">STASIS_DEVICE_STATE_OK</a>;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;}</div><div class="ttc" id="stasis__app__device__state_8h_html_a40976afac9dd3f4b95fb6de99d8b1903ac13711afc3a4a79b1a8fcc77d211c600"><div class="ttname"><a href="../../d1/d75/stasis__app__device__state_8h.html#a40976afac9dd3f4b95fb6de99d8b1903ac13711afc3a4a79b1a8fcc77d211c600">STASIS_DEVICE_STATE_MISSING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d75/stasis__app__device__state_8h_source.html#l00062">stasis_app_device_state.h:62</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_a4d5da079ec5d11cf8ecd8511ec58d44f"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a4d5da079ec5d11cf8ecd8511ec58d44f">DEVICE_STATE_SCHEME_STASIS</a></div><div class="ttdeci">#define DEVICE_STATE_SCHEME_STASIS</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00038">res_stasis_device_state.c:38</a></div></div>
<div class="ttc" id="devicestate_8h_html_ac94ca2b82d62f44e03dc2937c9c061d4"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#ac94ca2b82d62f44e03dc2937c9c061d4">ast_device_state_clear_cache</a></div><div class="ttdeci">int ast_device_state_clear_cache(const char *device)</div><div class="ttdoc">Clear the device from the stasis cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00688">devicestate.c:688</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="devicestate_8h_html_a62a8e6bc4b82dd797e505688f9f29bff"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a></div><div class="ttdeci">int ast_devstate_changed(enum ast_device_state state, enum ast_devstate_cache cachable, const char *fmt,...)</div><div class="ttdoc">Tells Asterisk the State for Device is changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00510">devicestate.c:510</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00053">devicestate.h:53</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="stasis__app__device__state_8h_html_a40976afac9dd3f4b95fb6de99d8b1903af4da9d4d0fef25a40f796673eed97dee"><div class="ttname"><a href="../../d1/d75/stasis__app__device__state_8h.html#a40976afac9dd3f4b95fb6de99d8b1903af4da9d4d0fef25a40f796673eed97dee">STASIS_DEVICE_STATE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d75/stasis__app__device__state_8h_source.html#l00064">stasis_app_device_state.h:64</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="devicestate_8h_html_a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00070">devicestate.h:70</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_ae75a677e78fc3692a57a56e07cb8c7d1"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#ae75a677e78fc3692a57a56e07cb8c7d1">DEVICE_STATE_FAMILY</a></div><div class="ttdeci">#define DEVICE_STATE_FAMILY</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00034">res_stasis_device_state.c:34</a></div></div>
<div class="ttc" id="stasis__app__device__state_8h_html_a40976afac9dd3f4b95fb6de99d8b1903a72f5745e7b25db63305dd09d6de120d7"><div class="ttname"><a href="../../d1/d75/stasis__app__device__state_8h.html#a40976afac9dd3f4b95fb6de99d8b1903a72f5745e7b25db63305dd09d6de120d7">STASIS_DEVICE_STATE_NOT_CONTROLLED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d75/stasis__app__device__state_8h_source.html#l00060">stasis_app_device_state.h:60</a></div></div>
<div class="ttc" id="astdb_8h_html_a71e8d5ab1757b184683a99125d1c8160"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#a71e8d5ab1757b184683a99125d1c8160">ast_db_del</a></div><div class="ttdeci">int ast_db_del(const char *family, const char *key)</div><div class="ttdoc">Delete entry in astdb. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00429">main/db.c:429</a></div></div>
<div class="ttc" id="stasis__app__device__state_8h_html_a40976afac9dd3f4b95fb6de99d8b1903aa1338c640420886ddd01800cbf13813c"><div class="ttname"><a href="../../d1/d75/stasis__app__device__state_8h.html#a40976afac9dd3f4b95fb6de99d8b1903aa1338c640420886ddd01800cbf13813c">STASIS_DEVICE_STATE_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d75/stasis__app__device__state_8h_source.html#l00058">stasis_app_device_state.h:58</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa4cdca00e48d5cca299bcbc7965acd89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4cdca00e48d5cca299bcbc7965acd89">&#9670;&nbsp;</a></span>stasis_app_device_state_to_json()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a>* stasis_app_device_state_to_json </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert device state to json. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the name of the device </td></tr>
    <tr><td class="paramname">state</td><td>the device state </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JSON representation. </dd>
<dd>
<code>NULL</code> on error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00160">160</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00255">ast_devstate_str()</a>, and <a class="el" href="../../df/d98/json_8c_source.html#l00591">ast_json_pack()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d20/resource__device__states_8c_source.html#l00051">ast_ari_device_states_get()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00191">send_device_state()</a>, and <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00168">stasis_app_device_states_to_json()</a>.</p>
<div class="fragment"><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;{</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s, s: s}&quot;</span>,</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;              <span class="stringliteral">&quot;name&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>,</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;              <span class="stringliteral">&quot;state&quot;</span>, <a class="code" href="../../da/da2/devicestate_8h.html#a6190de57ac370315e51f2c46724d5b10">ast_devstate_str</a>(<a class="code" href="../../d4/d88/structstate.html">state</a>));</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;}</div><div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="devicestate_8h_html_a6190de57ac370315e51f2c46724d5b10"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a6190de57ac370315e51f2c46724d5b10">ast_devstate_str</a></div><div class="ttdeci">const char * ast_devstate_str(enum ast_device_state devstate) attribute_pure</div><div class="ttdoc">Convert device state to text string that is easier to parse. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00255">devicestate.c:255</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a04e8420c252a634e0c285864d1662d16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04e8420c252a634e0c285864d1662d16">&#9670;&nbsp;</a></span>stasis_app_device_state_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d1/d75/stasis__app__device__state_8h.html#a40976afac9dd3f4b95fb6de99d8b1903">stasis_device_state_result</a> stasis_app_device_state_update </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Changes the state of a device controlled by ARI. </p>
<dl class="section note"><dt>Note</dt><dd>The controlled device must be prefixed with 'Stasis:'. </dd>
<dd>
Implicitly creates the device state.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the name of the ARI controlled device </td></tr>
    <tr><td class="paramname">value</td><td>a valid device state value</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a stasis device state application result. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00211">211</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d21/main_2db_8c_source.html#l00327">ast_db_put()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00053">AST_DEVICE_UNKNOWN</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00070">AST_DEVSTATE_CACHABLE</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00510">ast_devstate_changed()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00260">ast_devstate_val()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00034">DEVICE_STATE_FAMILY</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00038">DEVICE_STATE_SCHEME_STASIS</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d75/stasis__app__device__state_8h_source.html#l00062">STASIS_DEVICE_STATE_MISSING</a>, <a class="el" href="../../d1/d75/stasis__app__device__state_8h_source.html#l00060">STASIS_DEVICE_STATE_NOT_CONTROLLED</a>, <a class="el" href="../../d1/d75/stasis__app__device__state_8h_source.html#l00058">STASIS_DEVICE_STATE_OK</a>, <a class="el" href="../../d1/d75/stasis__app__device__state_8h_source.html#l00064">STASIS_DEVICE_STATE_UNKNOWN</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00959">state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d20/resource__device__states_8c_source.html#l00067">ast_ari_device_states_update()</a>.</p>
<div class="fragment"><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;{</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;   <span class="keywordtype">size_t</span> size = strlen(<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a4d5da079ec5d11cf8ecd8511ec58d44f">DEVICE_STATE_SCHEME_STASIS</a>);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Updating device name = %s, value = %s&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;   <span class="keywordflow">if</span> (strncasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a4d5da079ec5d11cf8ecd8511ec58d44f">DEVICE_STATE_SCHEME_STASIS</a>, size)) {</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Update can only be used to set &quot;</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;         <span class="stringliteral">&quot;&#39;%s&#39; device state!\n&quot;</span>, <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a4d5da079ec5d11cf8ecd8511ec58d44f">DEVICE_STATE_SCHEME_STASIS</a>);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d1/d75/stasis__app__device__state_8h.html#a40976afac9dd3f4b95fb6de99d8b1903a72f5745e7b25db63305dd09d6de120d7">STASIS_DEVICE_STATE_NOT_CONTROLLED</a>;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;   <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> += size;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>)) {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Update requires custom device name!\n&quot;</span>);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d1/d75/stasis__app__device__state_8h.html#a40976afac9dd3f4b95fb6de99d8b1903ac13711afc3a4a79b1a8fcc77d211c600">STASIS_DEVICE_STATE_MISSING</a>;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;   }</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> || (state = <a class="code" href="../../da/da2/devicestate_8h.html#ae148e0b95218b57b0348ab53f2f82657">ast_devstate_val</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>)) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a>) {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unknown device state &quot;</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;         <span class="stringliteral">&quot;value &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d1/d75/stasis__app__device__state_8h.html#a40976afac9dd3f4b95fb6de99d8b1903af4da9d4d0fef25a40f796673eed97dee">STASIS_DEVICE_STATE_UNKNOWN</a>;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;   }</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;   <a class="code" href="../../de/d4a/astdb_8h.html#a0f14f6bff4f412c88b50aba34d3a5e35">ast_db_put</a>(<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#ae75a677e78fc3692a57a56e07cb8c7d1">DEVICE_STATE_FAMILY</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a>(state, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>, <span class="stringliteral">&quot;%s%s&quot;</span>,</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;              <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a4d5da079ec5d11cf8ecd8511ec58d44f">DEVICE_STATE_SCHEME_STASIS</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/d75/stasis__app__device__state_8h.html#a40976afac9dd3f4b95fb6de99d8b1903aa1338c640420886ddd01800cbf13813c">STASIS_DEVICE_STATE_OK</a>;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eee"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a></div><div class="ttdeci">ast_device_state</div><div class="ttdoc">Device States. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00052">devicestate.h:52</a></div></div>
<div class="ttc" id="stasis__app__device__state_8h_html_a40976afac9dd3f4b95fb6de99d8b1903ac13711afc3a4a79b1a8fcc77d211c600"><div class="ttname"><a href="../../d1/d75/stasis__app__device__state_8h.html#a40976afac9dd3f4b95fb6de99d8b1903ac13711afc3a4a79b1a8fcc77d211c600">STASIS_DEVICE_STATE_MISSING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d75/stasis__app__device__state_8h_source.html#l00062">stasis_app_device_state.h:62</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_a4d5da079ec5d11cf8ecd8511ec58d44f"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a4d5da079ec5d11cf8ecd8511ec58d44f">DEVICE_STATE_SCHEME_STASIS</a></div><div class="ttdeci">#define DEVICE_STATE_SCHEME_STASIS</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00038">res_stasis_device_state.c:38</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="devicestate_8h_html_a62a8e6bc4b82dd797e505688f9f29bff"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a></div><div class="ttdeci">int ast_devstate_changed(enum ast_device_state state, enum ast_devstate_cache cachable, const char *fmt,...)</div><div class="ttdoc">Tells Asterisk the State for Device is changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00510">devicestate.c:510</a></div></div>
<div class="ttc" id="devicestate_8h_html_ae148e0b95218b57b0348ab53f2f82657"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#ae148e0b95218b57b0348ab53f2f82657">ast_devstate_val</a></div><div class="ttdeci">enum ast_device_state ast_devstate_val(const char *val)</div><div class="ttdoc">Convert device state from text to integer value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00260">devicestate.c:260</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00053">devicestate.h:53</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="stasis__app__device__state_8h_html_a40976afac9dd3f4b95fb6de99d8b1903af4da9d4d0fef25a40f796673eed97dee"><div class="ttname"><a href="../../d1/d75/stasis__app__device__state_8h.html#a40976afac9dd3f4b95fb6de99d8b1903af4da9d4d0fef25a40f796673eed97dee">STASIS_DEVICE_STATE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d75/stasis__app__device__state_8h_source.html#l00064">stasis_app_device_state.h:64</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="devicestate_8h_html_a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00070">devicestate.h:70</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_ae75a677e78fc3692a57a56e07cb8c7d1"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#ae75a677e78fc3692a57a56e07cb8c7d1">DEVICE_STATE_FAMILY</a></div><div class="ttdeci">#define DEVICE_STATE_FAMILY</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00034">res_stasis_device_state.c:34</a></div></div>
<div class="ttc" id="stasis__app__device__state_8h_html_a40976afac9dd3f4b95fb6de99d8b1903a72f5745e7b25db63305dd09d6de120d7"><div class="ttname"><a href="../../d1/d75/stasis__app__device__state_8h.html#a40976afac9dd3f4b95fb6de99d8b1903a72f5745e7b25db63305dd09d6de120d7">STASIS_DEVICE_STATE_NOT_CONTROLLED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d75/stasis__app__device__state_8h_source.html#l00060">stasis_app_device_state.h:60</a></div></div>
<div class="ttc" id="astdb_8h_html_a0f14f6bff4f412c88b50aba34d3a5e35"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#a0f14f6bff4f412c88b50aba34d3a5e35">ast_db_put</a></div><div class="ttdeci">int ast_db_put(const char *family, const char *key, const char *value)</div><div class="ttdoc">Store value addressed by family/key. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00327">main/db.c:327</a></div></div>
<div class="ttc" id="stasis__app__device__state_8h_html_a40976afac9dd3f4b95fb6de99d8b1903aa1338c640420886ddd01800cbf13813c"><div class="ttname"><a href="../../d1/d75/stasis__app__device__state_8h.html#a40976afac9dd3f4b95fb6de99d8b1903aa1338c640420886ddd01800cbf13813c">STASIS_DEVICE_STATE_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d75/stasis__app__device__state_8h_source.html#l00058">stasis_app_device_state.h:58</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5bcc1e1e94dd30c921885dacecce3e2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bcc1e1e94dd30c921885dacecce3e2d">&#9670;&nbsp;</a></span>stasis_app_device_states_to_json()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a>* stasis_app_device_states_to_json </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert device states to json array. </p>
<dl class="section return"><dt>Returns</dt><dd>JSON representation. </dd>
<dd>
<code>NULL</code> on error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00168">168</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01017">array()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00598">ast_db_freetree()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00531">ast_db_gettree()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00368">ast_json_array_append()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00352">ast_json_array_create()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00034">DEVICE_STATE_FAMILY</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00038">DEVICE_STATE_SCHEME_STASIS</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00032">DEVICE_STATE_SIZE</a>, <a class="el" href="../../de/d4a/astdb_8h_source.html#l00033">ast_db_entry::key</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../de/d4a/astdb_8h_source.html#l00032">ast_db_entry::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00160">stasis_app_device_state_to_json()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d20/resource__device__states_8c_source.html#l00035">ast_ari_device_states_list()</a>.</p>
<div class="fragment"><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;{</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *<a class="code" href="../../d9/d1e/func__strings_8c.html#ab6e308b3a41c01e08d252e071511495c">array</a> = <a class="code" href="../../d4/d05/json_8h.html#a48d874eed79fb2bbeb0557440e33ae67">ast_json_array_create</a>();</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d1d/structast__db__entry.html">ast_db_entry</a> *tree;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d1d/structast__db__entry.html">ast_db_entry</a> *<a class="code" href="../../d3/d96/structentry.html">entry</a>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   tree = <a class="code" href="../../de/d4a/astdb_8h.html#afeb9839f89da4fc24838de74739d181e">ast_db_gettree</a>(<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#ae75a677e78fc3692a57a56e07cb8c7d1">DEVICE_STATE_FAMILY</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;   <span class="keywordflow">for</span> (entry = tree; entry; entry = entry-&gt;<a class="code" href="../../da/d1d/structast__db__entry.html#a3fee4a0a4bff112e0262fb8d49f41b5e">next</a>) {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = strrchr(entry-&gt;<a class="code" href="../../da/d1d/structast__db__entry.html#a5892a9181e6a332f84d27aecd41dcd12">key</a>, <span class="charliteral">&#39;/&#39;</span>);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name)) {</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;         <span class="keywordtype">char</span> device[<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a6aaf8e13228e500cc1b793adc2006f98">DEVICE_STATE_SIZE</a>];</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;         snprintf(device, <span class="keyword">sizeof</span>(device), <span class="stringliteral">&quot;%s%s&quot;</span>, <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a4d5da079ec5d11cf8ecd8511ec58d44f">DEVICE_STATE_SCHEME_STASIS</a>, ++name);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;         <a class="code" href="../../d4/d05/json_8h.html#a3d675e52f866630a6a03302df2712b8d">ast_json_array_append</a>(array,</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#aa4cdca00e48d5cca299bcbc7965acd89">stasis_app_device_state_to_json</a>(device, <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>(device)));</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      }</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   <a class="code" href="../../de/d4a/astdb_8h.html#af9ab454a70a91551b2bf6c55199fc514">ast_db_freetree</a>(tree);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#ab6e308b3a41c01e08d252e071511495c">array</a>;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;}</div><div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eee"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a></div><div class="ttdeci">ast_device_state</div><div class="ttdoc">Device States. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00052">devicestate.h:52</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_a4d5da079ec5d11cf8ecd8511ec58d44f"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a4d5da079ec5d11cf8ecd8511ec58d44f">DEVICE_STATE_SCHEME_STASIS</a></div><div class="ttdeci">#define DEVICE_STATE_SCHEME_STASIS</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00038">res_stasis_device_state.c:38</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_a6aaf8e13228e500cc1b793adc2006f98"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a6aaf8e13228e500cc1b793adc2006f98">DEVICE_STATE_SIZE</a></div><div class="ttdeci">#define DEVICE_STATE_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00032">res_stasis_device_state.c:32</a></div></div>
<div class="ttc" id="astdb_8h_html_af9ab454a70a91551b2bf6c55199fc514"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#af9ab454a70a91551b2bf6c55199fc514">ast_db_freetree</a></div><div class="ttdeci">void ast_db_freetree(struct ast_db_entry *entry)</div><div class="ttdoc">Free structure created by ast_db_gettree() </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00598">main/db.c:598</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__db__entry_html_a3fee4a0a4bff112e0262fb8d49f41b5e"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html#a3fee4a0a4bff112e0262fb8d49f41b5e">ast_db_entry::next</a></div><div class="ttdeci">struct ast_db_entry * next</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00032">astdb.h:32</a></div></div>
<div class="ttc" id="json_8h_html_a48d874eed79fb2bbeb0557440e33ae67"><div class="ttname"><a href="../../d4/d05/json_8h.html#a48d874eed79fb2bbeb0557440e33ae67">ast_json_array_create</a></div><div class="ttdeci">struct ast_json * ast_json_array_create(void)</div><div class="ttdoc">Create a empty JSON array. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00352">json.c:352</a></div></div>
<div class="ttc" id="json_8h_html_a3d675e52f866630a6a03302df2712b8d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a3d675e52f866630a6a03302df2712b8d">ast_json_array_append</a></div><div class="ttdeci">int ast_json_array_append(struct ast_json *array, struct ast_json *value)</div><div class="ttdoc">Append to an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00368">json.c:368</a></div></div>
<div class="ttc" id="astdb_8h_html_afeb9839f89da4fc24838de74739d181e"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#afeb9839f89da4fc24838de74739d181e">ast_db_gettree</a></div><div class="ttdeci">struct ast_db_entry * ast_db_gettree(const char *family, const char *keytree)</div><div class="ttdoc">Get a list of values within the astdb tree. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00531">main/db.c:531</a></div></div>
<div class="ttc" id="func__strings_8c_html_ab6e308b3a41c01e08d252e071511495c"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#ab6e308b3a41c01e08d252e071511495c">array</a></div><div class="ttdeci">static int array(struct ast_channel *chan, const char *cmd, char *var, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01017">func_strings.c:1017</a></div></div>
<div class="ttc" id="structast__db__entry_html"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html">ast_db_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00031">astdb.h:31</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_aa4cdca00e48d5cca299bcbc7965acd89"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#aa4cdca00e48d5cca299bcbc7965acd89">stasis_app_device_state_to_json</a></div><div class="ttdeci">struct ast_json * stasis_app_device_state_to_json(const char *name, enum ast_device_state state)</div><div class="ttdoc">Convert device state to json. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00160">res_stasis_device_state.c:160</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_ae75a677e78fc3692a57a56e07cb8c7d1"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#ae75a677e78fc3692a57a56e07cb8c7d1">DEVICE_STATE_FAMILY</a></div><div class="ttdeci">#define DEVICE_STATE_FAMILY</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00034">res_stasis_device_state.c:34</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structast__db__entry_html_a5892a9181e6a332f84d27aecd41dcd12"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html#a5892a9181e6a332f84d27aecd41dcd12">ast_db_entry::key</a></div><div class="ttdeci">char * key</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00033">astdb.h:33</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adb2c210ac53c9aff148ecf63991a2ecb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb2c210ac53c9aff148ecf63991a2ecb">&#9670;&nbsp;</a></span>stasis_device_state_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> stasis_device_state_cb </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00292">292</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d21/main_2db_8c_source.html#l00412">ast_db_get()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00260">ast_devstate_val()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00034">DEVICE_STATE_FAMILY</a>, and <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00032">DEVICE_STATE_SIZE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00456">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;{</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a6aaf8e13228e500cc1b793adc2006f98">DEVICE_STATE_SIZE</a>];</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   <a class="code" href="../../de/d4a/astdb_8h.html#a6ab91701fa0db9fad7759fe42a581c17">ast_db_get</a>(<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#ae75a677e78fc3692a57a56e07cb8c7d1">DEVICE_STATE_FAMILY</a>, <a class="code" href="../../da/d1d/structast__db__entry.html#a9a3b4be1b9151b0369d7fca9911c7ecd">data</a>, buf, <span class="keyword">sizeof</span>(buf));</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#ae148e0b95218b57b0348ab53f2f82657">ast_devstate_val</a>(buf);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_a6aaf8e13228e500cc1b793adc2006f98"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a6aaf8e13228e500cc1b793adc2006f98">DEVICE_STATE_SIZE</a></div><div class="ttdeci">#define DEVICE_STATE_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00032">res_stasis_device_state.c:32</a></div></div>
<div class="ttc" id="devicestate_8h_html_ae148e0b95218b57b0348ab53f2f82657"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#ae148e0b95218b57b0348ab53f2f82657">ast_devstate_val</a></div><div class="ttdeci">enum ast_device_state ast_devstate_val(const char *val)</div><div class="ttdoc">Convert device state from text to integer value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00260">devicestate.c:260</a></div></div>
<div class="ttc" id="structast__db__entry_html_a9a3b4be1b9151b0369d7fca9911c7ecd"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html#a9a3b4be1b9151b0369d7fca9911c7ecd">ast_db_entry::data</a></div><div class="ttdeci">char data[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00034">astdb.h:34</a></div></div>
<div class="ttc" id="astdb_8h_html_a6ab91701fa0db9fad7759fe42a581c17"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#a6ab91701fa0db9fad7759fe42a581c17">ast_db_get</a></div><div class="ttdeci">int ast_db_get(const char *family, const char *key, char *value, int valuelen)</div><div class="ttdoc">Get key value specified by family/key. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00412">main/db.c:412</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_ae75a677e78fc3692a57a56e07cb8c7d1"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#ae75a677e78fc3692a57a56e07cb8c7d1">DEVICE_STATE_FAMILY</a></div><div class="ttdeci">#define DEVICE_STATE_FAMILY</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00034">res_stasis_device_state.c:34</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0c9795a047f6b71c3822542abdbc89d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c9795a047f6b71c3822542abdbc89d8">&#9670;&nbsp;</a></span>subscribe_device_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int subscribe_device_state </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/de3/structstasis__app.html">stasis_app</a> *&#160;</td>
          <td class="paramname"><em>app</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00360">360</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01572">ao2_link_flags</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00683">ast_device_state_topic()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00668">ast_device_state_topic_all()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00058">device_state_subscription::device_name</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00046">DEVICE_STATE_ALL</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00301">device_state_cb()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00112">device_state_subscription_create()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00330">is_subscribed_device_state()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01067">OBJ_NOLOCK</a>, <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l01156">stasis_app_name()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00682">stasis_subscribe_pool</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01025">stasis_subscription_accept_message_type()</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00300">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01079">stasis_subscription_set_filter()</a>, and <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00060">device_state_subscription::sub</a>.</p>
<div class="fragment"><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;{</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = obj;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;   <span class="keywordflow">if</span> (!sub) {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      sub = <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#ab90e66bb4ef1b5eda6024d8a53482db7">device_state_subscription_create</a>(app, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <span class="keywordflow">if</span> (!sub) {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;   }</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   <span class="keywordflow">if</span> (strcmp(sub-&gt;<a class="code" href="../../db/d3a/structdevice__state__subscription.html#a2396cd3c5e694eeb579a002266c5adb4">device_name</a>, <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#aa144d6445fe5bcfc21e67acabcf65a90">DEVICE_STATE_ALL</a>)) {</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      topic = <a class="code" href="../../da/da2/devicestate_8h.html#a85810de734ea25b982144651195bbebb">ast_device_state_topic</a>(sub-&gt;<a class="code" href="../../db/d3a/structdevice__state__subscription.html#a2396cd3c5e694eeb579a002266c5adb4">device_name</a>);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      topic = <a class="code" href="../../da/da2/devicestate_8h.html#a9fa7376e8e627cf5a512209005692013">ast_device_state_topic_all</a>();</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   }</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a>);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a3c755b38b5f0442503093e1628ebe166">is_subscribed_device_state</a>(app, sub-&gt;<a class="code" href="../../db/d3a/structdevice__state__subscription.html#a2396cd3c5e694eeb579a002266c5adb4">device_name</a>)) {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a>);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;App %s is already subscribed to %s\n&quot;</span>, <a class="code" href="../../d8/d9c/stasis__app_8h.html#a8f04206486943b8208052323a7dfd101">stasis_app_name</a>(app), sub-&gt;<a class="code" href="../../db/d3a/structdevice__state__subscription.html#a2396cd3c5e694eeb579a002266c5adb4">device_name</a>);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   }</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Subscribing to device %s\n&quot;</span>, sub-&gt;<a class="code" href="../../db/d3a/structdevice__state__subscription.html#a2396cd3c5e694eeb579a002266c5adb4">device_name</a>);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;   sub-&gt;<a class="code" href="../../db/d3a/structdevice__state__subscription.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a597f7a30fe616c9f083a93ed168955ed">stasis_subscribe_pool</a>(topic, <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a9d46e18369f92f19f1ad190a943d6fd1">device_state_cb</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(sub));</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;   <span class="keywordflow">if</span> (!sub-&gt;<a class="code" href="../../db/d3a/structdevice__state__subscription.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>) {</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a>);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to subscribe to device %s\n&quot;</span>,</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;         sub-&gt;<a class="code" href="../../db/d3a/structdevice__state__subscription.html#a2396cd3c5e694eeb579a002266c5adb4">device_name</a>);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <span class="comment">/* Reference we added when attempting to stasis_subscribe_pool */</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sub, -1);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a4f248ee5f4791f05d0af8768aaab282b">stasis_subscription_accept_message_type</a>(sub-&gt;<a class="code" href="../../db/d3a/structdevice__state__subscription.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type</a>());</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a4f248ee5f4791f05d0af8768aaab282b">stasis_subscription_accept_message_type</a>(sub-&gt;<a class="code" href="../../db/d3a/structdevice__state__subscription.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a>());</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a52b5393bef89d7781c0d039d6489de23">stasis_subscription_set_filter</a>(sub-&gt;<a class="code" href="../../db/d3a/structdevice__state__subscription.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a>);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a7ce8563daf84a18540a86504d165b444">ao2_link_flags</a>(<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a>, sub, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a>);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a>);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div><div class="ttc" id="devicestate_8h_html_a85810de734ea25b982144651195bbebb"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a85810de734ea25b982144651195bbebb">ast_device_state_topic</a></div><div class="ttdeci">struct stasis_topic * ast_device_state_topic(const char *device)</div><div class="ttdoc">Get the Stasis topic for device state messages for a specific device. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00683">devicestate.c:683</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_a265d2c16ebc2cd7a5db72bd7527fa4a4"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a></div><div class="ttdeci">static struct ao2_container * device_state_subscriptions</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00049">res_stasis_device_state.c:49</a></div></div>
<div class="ttc" id="structdevice__state__subscription_html"><div class="ttname"><a href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a></div><div class="ttdoc">Device state subscription object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00054">res_stasis_device_state.c:54</a></div></div>
<div class="ttc" id="structdevice__state__subscription_html_a2396cd3c5e694eeb579a002266c5adb4"><div class="ttname"><a href="../../db/d3a/structdevice__state__subscription.html#a2396cd3c5e694eeb579a002266c5adb4">device_state_subscription::device_name</a></div><div class="ttdeci">const ast_string_field device_name</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00058">res_stasis_device_state.c:58</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_aa144d6445fe5bcfc21e67acabcf65a90"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#aa144d6445fe5bcfc21e67acabcf65a90">DEVICE_STATE_ALL</a></div><div class="ttdeci">#define DEVICE_STATE_ALL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00046">res_stasis_device_state.c:46</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a></div><div class="ttdoc">Assume that the ao2_container is already locked. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01067">astobj2.h:1067</a></div></div>
<div class="ttc" id="stasis_8h_html_a52b5393bef89d7781c0d039d6489de23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a52b5393bef89d7781c0d039d6489de23">stasis_subscription_set_filter</a></div><div class="ttdeci">int stasis_subscription_set_filter(struct stasis_subscription *subscription, enum stasis_subscription_message_filter filter)</div><div class="ttdoc">Set the message type filtering level on a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01079">stasis.c:1079</a></div></div>
<div class="ttc" id="astobj2_8h_html_a7ce8563daf84a18540a86504d165b444"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a7ce8563daf84a18540a86504d165b444">ao2_link_flags</a></div><div class="ttdeci">#define ao2_link_flags(container, obj, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01572">astobj2.h:1572</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_ab90e66bb4ef1b5eda6024d8a53482db7"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#ab90e66bb4ef1b5eda6024d8a53482db7">device_state_subscription_create</a></div><div class="ttdeci">static struct device_state_subscription * device_state_subscription_create(const struct stasis_app *app, const char *device_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00112">res_stasis_device_state.c:112</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="devicestate_8h_html_a9459272db1c8c968ed1aff1387f0f9fd"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type</a></div><div class="ttdeci">struct stasis_message_type * ast_device_state_message_type(void)</div><div class="ttdoc">Get the Stasis message type for device state messages. </div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_a9d46e18369f92f19f1ad190a943d6fd1"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a9d46e18369f92f19f1ad190a943d6fd1">device_state_cb</a></div><div class="ttdeci">static void device_state_cb(void *data, struct stasis_subscription *sub, struct stasis_message *msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00301">res_stasis_device_state.c:301</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a8f04206486943b8208052323a7dfd101"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a8f04206486943b8208052323a7dfd101">stasis_app_name</a></div><div class="ttdeci">const char * stasis_app_name(const struct stasis_app *app)</div><div class="ttdoc">Retrieve an application&amp;#39;s name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5e/res_2stasis_2app_8c_source.html#l01156">res/stasis/app.c:1156</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_a3c755b38b5f0442503093e1628ebe166"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a3c755b38b5f0442503093e1628ebe166">is_subscribed_device_state</a></div><div class="ttdeci">static int is_subscribed_device_state(struct stasis_app *app, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00330">res_stasis_device_state.c:330</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="stasis_8h_html_a597f7a30fe616c9f083a93ed168955ed"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a597f7a30fe616c9f083a93ed168955ed">stasis_subscribe_pool</a></div><div class="ttdeci">#define stasis_subscribe_pool(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00682">stasis.h:682</a></div></div>
<div class="ttc" id="devicestate_8h_html_a9fa7376e8e627cf5a512209005692013"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a9fa7376e8e627cf5a512209005692013">ast_device_state_topic_all</a></div><div class="ttdeci">struct stasis_topic * ast_device_state_topic_all(void)</div><div class="ttdoc">Get the Stasis topic for device state messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00668">devicestate.c:668</a></div></div>
<div class="ttc" id="structdevice__state__subscription_html_a03bb86c52b8e22ea4325ea04e6443fa0"><div class="ttname"><a href="../../db/d3a/structdevice__state__subscription.html#a03bb86c52b8e22ea4325ea04e6443fa0">device_state_subscription::sub</a></div><div class="ttdeci">struct stasis_subscription * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00060">res_stasis_device_state.c:60</a></div></div>
<div class="ttc" id="stasis_8h_html_a4f248ee5f4791f05d0af8768aaab282b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a4f248ee5f4791f05d0af8768aaab282b">stasis_subscription_accept_message_type</a></div><div class="ttdeci">int stasis_subscription_accept_message_type(struct stasis_subscription *subscription, const struct stasis_message_type *type)</div><div class="ttdoc">Indicate to a subscription that we are interested in a message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01025">stasis.c:1025</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="stasis_8h_html_a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00300">stasis.h:300</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gafae630f05995b59b49dc523a5b9ce757"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_subscription_change_type(void)</div><div class="ttdoc">Gets the message type for subscription change notices. </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00476">476</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00418">ast_devstate_prov_del()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00316">AST_MODFLAG_GLOBAL_SYMBOLS</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00121">AST_MODULE_SUPPORT_CORE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00036">DEVICE_STATE_PROVIDER_STASIS</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00456">load_module()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l01823">stasis_app_unregister_event_source()</a>.</p>
<div class="fragment"><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;{</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#a1ab579ae15aaca64a904c3c41d8b8b01">ast_devstate_prov_del</a>(<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a966e51af1233a838d4a3f48f10db080a">DEVICE_STATE_PROVIDER_STASIS</a>);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;   <a class="code" href="../../d8/d9c/stasis__app_8h.html#a6899b9113d6f268865efa52e88a425f3">stasis_app_unregister_event_source</a>(&amp;<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a3a54be790d8809d337c9a604000326ff">device_state_event_source</a>);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a>);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;   <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;}</div><div class="ttc" id="res__stasis__device__state_8c_html_a265d2c16ebc2cd7a5db72bd7527fa4a4"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a></div><div class="ttdeci">static struct ao2_container * device_state_subscriptions</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00049">res_stasis_device_state.c:49</a></div></div>
<div class="ttc" id="devicestate_8h_html_a1ab579ae15aaca64a904c3c41d8b8b01"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a1ab579ae15aaca64a904c3c41d8b8b01">ast_devstate_prov_del</a></div><div class="ttdeci">int ast_devstate_prov_del(const char *label)</div><div class="ttdoc">Remove device state provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00418">devicestate.c:418</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_a3a54be790d8809d337c9a604000326ff"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a3a54be790d8809d337c9a604000326ff">device_state_event_source</a></div><div class="ttdeci">struct stasis_app_event_source device_state_event_source</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00447">res_stasis_device_state.c:447</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_a966e51af1233a838d4a3f48f10db080a"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a966e51af1233a838d4a3f48f10db080a">DEVICE_STATE_PROVIDER_STASIS</a></div><div class="ttdeci">#define DEVICE_STATE_PROVIDER_STASIS</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00036">res_stasis_device_state.c:36</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a6899b9113d6f268865efa52e88a425f3"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a6899b9113d6f268865efa52e88a425f3">stasis_app_unregister_event_source</a></div><div class="ttdeci">void stasis_app_unregister_event_source(struct stasis_app_event_source *obj)</div><div class="ttdoc">Unregister an application event source. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l01823">res_stasis.c:1823</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7fc74077bf22b50acf5ab76658fa9e2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fc74077bf22b50acf5ab76658fa9e2f">&#9670;&nbsp;</a></span>unsubscribe_device_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unsubscribe_device_state </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/de3/structstasis__app.html">stasis_app</a> *&#160;</td>
          <td class="paramname"><em>app</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00407">407</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00140">find_device_state_subscription()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00151">remove_device_state_subscription()</a>, and <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00060">device_state_subscription::sub</a>.</p>
<div class="fragment"><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;{</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a>);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   sub = <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#afb6223e83822ca943f928da19228647d">find_device_state_subscription</a>(app, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   <span class="keywordflow">if</span> (sub) {</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a7f37286e4eb64547197b9ddc4d37c29c">remove_device_state_subscription</a>(sub);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   }</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(<a class="code" href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a>);</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(sub);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;}</div><div class="ttc" id="res__stasis__device__state_8c_html_a265d2c16ebc2cd7a5db72bd7527fa4a4"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a265d2c16ebc2cd7a5db72bd7527fa4a4">device_state_subscriptions</a></div><div class="ttdeci">static struct ao2_container * device_state_subscriptions</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00049">res_stasis_device_state.c:49</a></div></div>
<div class="ttc" id="structdevice__state__subscription_html"><div class="ttname"><a href="../../db/d3a/structdevice__state__subscription.html">device_state_subscription</a></div><div class="ttdoc">Device state subscription object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00054">res_stasis_device_state.c:54</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_a7f37286e4eb64547197b9ddc4d37c29c"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#a7f37286e4eb64547197b9ddc4d37c29c">remove_device_state_subscription</a></div><div class="ttdeci">static void remove_device_state_subscription(struct device_state_subscription *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00151">res_stasis_device_state.c:151</a></div></div>
<div class="ttc" id="res__stasis__device__state_8c_html_afb6223e83822ca943f928da19228647d"><div class="ttname"><a href="../../dd/d71/res__stasis__device__state_8c.html#afb6223e83822ca943f928da19228647d">find_device_state_subscription</a></div><div class="ttdeci">static struct device_state_subscription * find_device_state_subscription(struct stasis_app *app, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/res__stasis__device__state_8c_source.html#l00140">res_stasis_device_state.c:140</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a835b27a90d895a488e4e14cc3d2dee8c">AST_MODFLAG_GLOBAL_SYMBOLS</a> , .description = &quot;Stasis application device <a class="el" href="../../d4/d88/structstate.html">state</a> support&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .requires = &quot;res_stasis&quot;, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00490">490</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00490">490</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

</div>
</div>
<a id="a3a54be790d8809d337c9a604000326ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a54be790d8809d337c9a604000326ff">&#9670;&nbsp;</a></span>device_state_event_source</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d7/d3a/structstasis__app__event__source.html">stasis_app_event_source</a> device_state_event_source</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00447">447</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

</div>
</div>
<a id="a265d2c16ebc2cd7a5db72bd7527fa4a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a265d2c16ebc2cd7a5db72bd7527fa4a4">&#9670;&nbsp;</a></span>device_state_subscriptions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a>* device_state_subscriptions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Container for subscribed device states </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00049">49</a> of file <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html">res_stasis_device_state.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:39 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
