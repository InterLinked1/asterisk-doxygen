<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: bridge_roles.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_6d4b1cdb59e2db6ad82005b337288fef.html">asterisk</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">bridge_roles.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Channel Bridging Roles API.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../df/d90/linkedlists_8h_source.html">asterisk/linkedlists.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for bridge_roles.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d17/bridge__roles_8h__incl.png" border="0" usemap="#bridge__roles_8h" alt=""/></div>
<map name="bridge__roles_8h" id="bridge__roles_8h">
<area shape="rect" id="node2" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="345,80,496,107"/>
<area shape="rect" id="node3" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="364,155,477,181"/>
<area shape="rect" id="node5" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="113,229,176,256"/>
<area shape="rect" id="node6" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="106,304,253,331"/>
<area shape="rect" id="node9" href="../../d3/dda/backtrace_8h.html" title="Asterisk backtrace generation. " alt="" coords="488,229,639,256"/>
<area shape="rect" id="node10" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="663,229,789,256"/>
<area shape="rect" id="node11" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="813,229,956,256"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../d7/d88/bridge__roles_8h__dep__incl.png" border="0" usemap="#bridge__roles_8hdep" alt=""/></div>
<map name="bridge__roles_8hdep" id="bridge__roles_8hdep">
<area shape="rect" id="node2" href="../../d4/d56/bridge_8h.html" title="Bridging API. " alt="" coords="2394,80,2469,107"/>
<area shape="rect" id="node49" href="../../dd/d13/bridge__roles_8c.html" title="Channel Bridging Roles API. " alt="" coords="5205,162,5316,189"/>
<area shape="rect" id="node3" href="../../de/d11/app__agent__pool_8c.html" title="Call center agent pool. " alt="" coords="4668,162,4803,189"/>
<area shape="rect" id="node4" href="../../d0/df4/app__attended__transfer_8c.html" title="Attended transfer by caller channel. " alt="" coords="4827,162,5006,189"/>
<area shape="rect" id="node5" href="../../d7/d7c/app__blind__transfer_8c.html" title="Blind transfer by caller channel. " alt="" coords="5031,162,5181,189"/>
<area shape="rect" id="node6" href="../../d8/d6e/app__bridgeaddchan_8c.html" title="Application to place the channel into an existing Bridge. " alt="" coords="5,244,164,271"/>
<area shape="rect" id="node7" href="../../de/d47/features_8h.html" title="Call Parking and Pickup API Includes code and algorithms from the Zapata library. ..." alt="" coords="857,162,944,189"/>
<area shape="rect" id="node8" href="../../dc/d22/app__bridgewait_8c.html" title="Application to place the channel into a holding Bridge. " alt="" coords="188,244,317,271"/>
<area shape="rect" id="node9" href="../../d1/d97/chan__dahdi_8c.html" title="DAHDI for Pseudo TDM. " alt="" coords="598,244,705,271"/>
<area shape="rect" id="node10" href="../../d5/dff/chan__iax2_8c.html" title="Implementation of Inter&#45;Asterisk eXchange Version 2 as specified in RFC 5456. " alt="" coords="341,244,439,271"/>
<area shape="rect" id="node11" href="../../d0/dd6/chan__mgcp_8c.html" title="Implementation of Media Gateway Control Protocol. " alt="" coords="729,244,835,271"/>
<area shape="rect" id="node12" href="../../d7/d9b/chan__misdn_8c.html" title="the chan_misdn channel driver for Asterisk " alt="" coords="463,244,573,271"/>
<area shape="rect" id="node13" href="../../d2/d09/sig__analog_8c.html" title="Analog signaling module. " alt="" coords="1330,244,1431,271"/>
<area shape="rect" id="node14" href="../../d0/d95/bridge_8c.html" title="Bridging API. " alt="" coords="2107,244,2180,271"/>
<area shape="rect" id="node15" href="../../d7/d9b/bridge__basic_8c.html" title="Basic bridge class. It is a subclass of struct ast_bridge. " alt="" coords="1077,244,1191,271"/>
<area shape="rect" id="node16" href="../../d4/d28/channel_8c.html" title="Channel Management. " alt="" coords="859,244,942,271"/>
<area shape="rect" id="node17" href="../../d5/d92/features_8c.html" title="Routines implementing call features as call pickup, parking and transfer. " alt="" coords="967,244,1053,271"/>
<area shape="rect" id="node18" href="../../d4/d10/manager_8c.html" title="The Asterisk Management Interface &#45; AMI. " alt="" coords="1215,244,1306,271"/>
<area shape="rect" id="node19" href="../../d0/dcf/app__confbridge_8c.html" title="Conference Bridge application. " alt="" coords="1778,319,1909,345"/>
<area shape="rect" id="node20" href="../../d4/de3/confbridge_8h.html" title="confbridge.h" alt="" coords="1629,244,1730,271"/>
<area shape="rect" id="node21" href="../../d8/d4f/conf__chan__announce_8c.html" title="ConfBridge announcer channel driver. " alt="" coords="1985,319,2153,345"/>
<area shape="rect" id="node22" href="../../d9/d44/conf__chan__record_8c.html" title="ConfBridge recorder channel driver. " alt="" coords="1403,319,1550,345"/>
<area shape="rect" id="node23" href="../../dd/d92/confbridge__manager_8c.html" title="Confbridge manager events for stasis messages. " alt="" coords="1589,319,1753,345"/>
<area shape="rect" id="node24" href="../../dc/d4e/stasis__bridges_8h.html" title="stasis_bridges.h" alt="" coords="1767,162,1893,189"/>
<area shape="rect" id="node25" href="../../d3/d32/bridge__channel_8c.html" title="Bridging Channel API. " alt="" coords="2205,244,2335,271"/>
<area shape="rect" id="node26" href="../../da/dc9/cel_8c.html" title="Channel Event Logging API. " alt="" coords="2359,244,2410,271"/>
<area shape="rect" id="node27" href="../../df/dd3/main_2cli_8c.html" title="Standard Command Line Interface. " alt="" coords="1557,244,1604,271"/>
<area shape="rect" id="node28" href="../../da/d0f/stasis__bridges_8c.html" title="Stasis Messages and Data Types for Bridge Objects. " alt="" coords="1856,244,1980,271"/>
<area shape="rect" id="node29" href="../../db/d0b/resource__bridges_8c.html" title="Implementation for ARI stubs. " alt="" coords="2989,244,3132,271"/>
<area shape="rect" id="node30" href="../../d2/ddd/app__dumpchan_8c.html" title="Application to dump channel variables. " alt="" coords="2365,162,2497,189"/>
<area shape="rect" id="node31" href="../../de/dea/core__unreal_8h.html" title="Unreal channel derivative framework. " alt="" coords="2775,162,2885,189"/>
<area shape="rect" id="node32" href="../../df/d0c/chan__bridge__media_8c.html" title="Bridge Media Channels driver. " alt="" coords="3208,244,3367,271"/>
<area shape="rect" id="node33" href="../../de/d47/core__local_8c.html" title="Local proxy channel driver. " alt="" coords="3391,244,3488,271"/>
<area shape="rect" id="node34" href="../../df/d2e/core__unreal_8c.html" title="Unreal channel derivatives framework for channel drivers like local channels. " alt="" coords="3512,244,3620,271"/>
<area shape="rect" id="node35" href="../../d9/d45/bridge__builtin__features_8c.html" title="Built in bridging features. " alt="" coords="2434,244,2613,271"/>
<area shape="rect" id="node36" href="../../d2/d33/parking_8h.html" title="Call Parking API. " alt="" coords="2208,162,2289,189"/>
<area shape="rect" id="node37" href="../../d5/dfe/chan__sip_8c.html" title="Implementation of Session Initiation Protocol. " alt="" coords="2637,244,2727,271"/>
<area shape="rect" id="node38" href="../../d0/d80/chan__skinny_8c.html" title="Implementation of the Skinny protocol. " alt="" coords="2751,244,2861,271"/>
<area shape="rect" id="node39" href="../../d3/d2a/parking_8c.html" title="Parking Core. " alt="" coords="2885,244,2965,271"/>
<area shape="rect" id="node40" href="../../d2/df4/bridge__builtin__interval__features_8c.html" title="Built in bridging interval features. " alt="" coords="3061,155,3223,196"/>
<area shape="rect" id="node41" href="../../d8/d66/bridge__holding_8c.html" title="Bridging technology for storing channels in a bridge for the purpose of holding, parking, queues, and other such states where a channel may need to be in a bridge but not actually communicating with anything. " alt="" coords="3247,162,3373,189"/>
<area shape="rect" id="node42" href="../../d1/d27/bridge__native__rtp_8c.html" title="Native RTP bridging technology module. " alt="" coords="3398,162,3542,189"/>
<area shape="rect" id="node43" href="../../da/daf/bridge__simple_8c.html" title="Simple two channel bridging module. " alt="" coords="3566,162,3689,189"/>
<area shape="rect" id="node44" href="../../d8/df0/bridge__softmix__internal_8h.html" title="Multi&#45;party software based channel mixing (header) " alt="" coords="3713,162,3896,189"/>
<area shape="rect" id="node45" href="../../d3/dac/chan__oss_8c.html" title="Channel driver for OSS sound cards. " alt="" coords="3921,162,4014,189"/>
<area shape="rect" id="node46" href="../../d1/d6d/chan__unistim_8c.html" title="chan_unistim channel driver for Asterisk " alt="" coords="4039,162,4157,189"/>
<area shape="rect" id="node47" href="../../d9/da5/bridge__native__dahdi_8c.html" title="Native DAHDI bridging support. " alt="" coords="4181,162,4343,189"/>
<area shape="rect" id="node48" href="../../d9/d3d/func__channel_8c.html" title="Channel info dialplan functions. " alt="" coords="4367,162,4485,189"/>
<area shape="rect" id="node50" href="../../dc/d2b/stasis__channels_8c.html" title="Stasis Messages and Data Types for Channel Objects. " alt="" coords="4509,162,4644,189"/>
</map>
</div>
</div>
<p><a href="../../dd/dff/bridge__roles_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa1de6a788503b198662fce24bc87ed99"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dff/bridge__roles_8h.html#aa1de6a788503b198662fce24bc87ed99">AST_ROLE_LEN</a>&#160;&#160;&#160;32</td></tr>
<tr class="separator:aa1de6a788503b198662fce24bc87ed99"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af01f5cb3712ef0b120433da770f645ab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dff/bridge__roles_8h.html#af01f5cb3712ef0b120433da770f645ab">ast_bridge_channel_clear_roles</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="memdesc:af01f5cb3712ef0b120433da770f645ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear all roles from a bridge_channel's role list.  <a href="#af01f5cb3712ef0b120433da770f645ab">More...</a><br /></td></tr>
<tr class="separator:af01f5cb3712ef0b120433da770f645ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad449a795348a52aefe000f13a1d015f8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dff/bridge__roles_8h.html#ad449a795348a52aefe000f13a1d015f8">ast_bridge_channel_establish_roles</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="memdesc:ad449a795348a52aefe000f13a1d015f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clone the roles from a bridge_channel's attached <a class="el" href="../../df/d3c/structast__channel.html" title="Main Channel structure associated with a channel. ">ast_channel</a> onto the bridge_channel's role list.  <a href="#ad449a795348a52aefe000f13a1d015f8">More...</a><br /></td></tr>
<tr class="separator:ad449a795348a52aefe000f13a1d015f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac114a541f2409bc882f142162391b6e7"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dff/bridge__roles_8h.html#ac114a541f2409bc882f142162391b6e7">ast_bridge_channel_get_role_option</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const char *role_name, const char *option)</td></tr>
<tr class="memdesc:ac114a541f2409bc882f142162391b6e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the value of a requested role option from a bridge channel.  <a href="#ac114a541f2409bc882f142162391b6e7">More...</a><br /></td></tr>
<tr class="separator:ac114a541f2409bc882f142162391b6e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc192ffe6ffc292806e647e0fa9b775e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dff/bridge__roles_8h.html#abc192ffe6ffc292806e647e0fa9b775e">ast_bridge_channel_has_role</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const char *role_name)</td></tr>
<tr class="memdesc:abc192ffe6ffc292806e647e0fa9b775e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check to see if a bridge channel inherited a specific role from its channel.  <a href="#abc192ffe6ffc292806e647e0fa9b775e">More...</a><br /></td></tr>
<tr class="separator:abc192ffe6ffc292806e647e0fa9b775e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8511ad15a10f0b6269094ad307ba17a2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dff/bridge__roles_8h.html#a8511ad15a10f0b6269094ad307ba17a2">ast_channel_add_bridge_role</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *role_name)</td></tr>
<tr class="memdesc:a8511ad15a10f0b6269094ad307ba17a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a bridge role to a channel.  <a href="#a8511ad15a10f0b6269094ad307ba17a2">More...</a><br /></td></tr>
<tr class="separator:a8511ad15a10f0b6269094ad307ba17a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f7bd18b68cbc66bd4ed574ffc3039d2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dff/bridge__roles_8h.html#a8f7bd18b68cbc66bd4ed574ffc3039d2">ast_channel_clear_bridge_roles</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</td></tr>
<tr class="memdesc:a8f7bd18b68cbc66bd4ed574ffc3039d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes all bridge roles currently on a channel.  <a href="#a8f7bd18b68cbc66bd4ed574ffc3039d2">More...</a><br /></td></tr>
<tr class="separator:a8f7bd18b68cbc66bd4ed574ffc3039d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c16dcfdabf78d468e98cfe919836bf3"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dff/bridge__roles_8h.html#a9c16dcfdabf78d468e98cfe919836bf3">ast_channel_get_role_option</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="el" href="../../d4/d84/structchannel.html">channel</a>, const char *role_name, const char *option)</td></tr>
<tr class="memdesc:a9c16dcfdabf78d468e98cfe919836bf3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the value of a requested role option from a channel.  <a href="#a9c16dcfdabf78d468e98cfe919836bf3">More...</a><br /></td></tr>
<tr class="separator:a9c16dcfdabf78d468e98cfe919836bf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b856fa6db0d3de843aa5a1d89db1154"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dff/bridge__roles_8h.html#a6b856fa6db0d3de843aa5a1d89db1154">ast_channel_has_role</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="el" href="../../d4/d84/structchannel.html">channel</a>, const char *role_name)</td></tr>
<tr class="memdesc:a6b856fa6db0d3de843aa5a1d89db1154"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a role exists on a channel.  <a href="#a6b856fa6db0d3de843aa5a1d89db1154">More...</a><br /></td></tr>
<tr class="separator:a6b856fa6db0d3de843aa5a1d89db1154"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dce43ab7e058fda7576097ab7068ae2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dff/bridge__roles_8h.html#a7dce43ab7e058fda7576097ab7068ae2">ast_channel_remove_bridge_role</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *role_name)</td></tr>
<tr class="memdesc:a7dce43ab7e058fda7576097ab7068ae2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a bridge role from a channel.  <a href="#a7dce43ab7e058fda7576097ab7068ae2">More...</a><br /></td></tr>
<tr class="separator:a7dce43ab7e058fda7576097ab7068ae2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c1bc5238aea4e2d19c9894c1b68a457"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dff/bridge__roles_8h.html#a3c1bc5238aea4e2d19c9894c1b68a457">ast_channel_set_bridge_role_option</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="el" href="../../d4/d84/structchannel.html">channel</a>, const char *role_name, const char *option, const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="memdesc:a3c1bc5238aea4e2d19c9894c1b68a457"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a role option on a channel.  <a href="#a3c1bc5238aea4e2d19c9894c1b68a457">More...</a><br /></td></tr>
<tr class="separator:a3c1bc5238aea4e2d19c9894c1b68a457"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Channel Bridging Roles API. </p>
<dl class="section author"><dt>Author</dt><dd>Jonathan Rose <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'se'+'@di'+'gi'+'um.'+'co'+'m'; return false;">jrose<span style="display: none;">.nosp@m.</span>@dig<span style="display: none;">.nosp@m.</span>ium.c<span style="display: none;">.nosp@m.</span>om</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../dd/dff/bridge__roles_8h_source.html">bridge_roles.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aa1de6a788503b198662fce24bc87ed99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1de6a788503b198662fce24bc87ed99">&#9670;&nbsp;</a></span>AST_ROLE_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_ROLE_LEN&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dff/bridge__roles_8h_source.html#l00033">33</a> of file <a class="el" href="../../dd/dff/bridge__roles_8h_source.html">bridge_roles.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="af01f5cb3712ef0b120433da770f645ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af01f5cb3712ef0b120433da770f645ab">&#9670;&nbsp;</a></span>ast_bridge_channel_clear_roles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_clear_roles </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear all roles from a bridge_channel's role list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>the bridge channel that we are scrubbing</td></tr>
  </table>
  </dd>
</dl>
<p>If roles are already established on a bridge channel, ast_bridge_channel_establish_roles will fail unconditionally without changing any roles. In order to update a bridge channel's roles, they must first be cleared from the bridge channel using this function.</p>
<dl class="section note"><dt>Note</dt><dd>ast_bridge_channel_clear_roles also serves as the destructor for the role list of a bridge channel. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00495">495</a> of file <a class="el" href="../../dd/d13/bridge__roles_8c_source.html">bridge_roles.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00090">bridge_role_datastore_destroy()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00143">ast_bridge_channel::bridge_roles</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01738">agent_alert()</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00447">ast_bridge_channel_establish_roles()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02178">bridge_channel_internal_pull()</a>.</p>
<div class="fragment"><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;{</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4730c4489878f1ffcb891c4f7b0f8989">bridge_roles</a>) {</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <a class="code" href="../../dd/d13/bridge__roles_8c.html#a37d1a214d2da9f04e9710592c1bfd316">bridge_role_datastore_destroy</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4730c4489878f1ffcb891c4f7b0f8989">bridge_roles</a>);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4730c4489878f1ffcb891c4f7b0f8989">bridge_roles</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;   }</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="bridge__roles_8c_html_a37d1a214d2da9f04e9710592c1bfd316"><div class="ttname"><a href="../../dd/d13/bridge__roles_8c.html#a37d1a214d2da9f04e9710592c1bfd316">bridge_role_datastore_destroy</a></div><div class="ttdeci">static void bridge_role_datastore_destroy(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00090">bridge_roles.c:90</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4730c4489878f1ffcb891c4f7b0f8989"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4730c4489878f1ffcb891c4f7b0f8989">ast_bridge_channel::bridge_roles</a></div><div class="ttdeci">struct bridge_roles_datastore * bridge_roles</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00143">bridge_channel.h:143</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad449a795348a52aefe000f13a1d015f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad449a795348a52aefe000f13a1d015f8">&#9670;&nbsp;</a></span>ast_bridge_channel_establish_roles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_establish_roles </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clone the roles from a bridge_channel's attached <a class="el" href="../../df/d3c/structast__channel.html" title="Main Channel structure associated with a channel. ">ast_channel</a> onto the bridge_channel's role list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>The bridge channel that we are preparing</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">-1</td><td>on failure</td></tr>
  </table>
  </dd>
</dl>
<p>This function should always be called when the bridge_channel binds to an <a class="el" href="../../df/d3c/structast__channel.html" title="Main Channel structure associated with a channel. ">ast_channel</a> at some point before the bridge_channel joins or is imparted onto a bridge. Failure to do so will result in an empty role list. While the list remains established, changes to roles on the <a class="el" href="../../df/d3c/structast__channel.html" title="Main Channel structure associated with a channel. ">ast_channel</a> will not propogate to the bridge channel and roles can not be re-established on the bridge channel without first clearing the roles with ast_bridge_roles_bridge_channel_clear_roles. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00447">447</a> of file <a class="el" href="../../dd/d13/bridge__roles_8c_source.html">bridge_roles.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00495">ast_bridge_channel_clear_roles()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00428">AST_LIST_LAST</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00143">ast_bridge_channel::bridge_roles</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00148">fetch_bridge_roles_datastore()</a>, <a class="el" href="../../d0/dbf/structbridge__role__option.html#a07e6c294ac62613b82b37ef0821eca6d">bridge_role_option::list</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00049">bridge_role_option::option</a>, <a class="el" href="../../d4/d66/structbridge__role.html#a1d09e1162d9743e7d53b752e264458cc">bridge_role::options</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00055">bridge_role::role</a>, <a class="el" href="../../d8/d71/structbridge__roles__datastore.html#a108fbb06e816e911e60abef6aa3e14ec">bridge_roles_datastore::role_list</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00260">setup_bridge_role()</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00291">setup_bridge_role_option()</a>, and <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00049">bridge_role_option::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01738">agent_alert()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02235">bridge_channel_internal_push_full()</a>.</p>
<div class="fragment"><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;{</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d71/structbridge__roles__datastore.html">bridge_roles_datastore</a> *roles_datastore;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d66/structbridge__role.html">bridge_role</a> *<a class="code" href="../../d4/d66/structbridge__role.html#a8bc65efeeb9ecfa300b247197a7a6dd9">role</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/dbf/structbridge__role__option.html">bridge_role_option</a> *role_option;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;   <span class="keywordflow">if</span> (!bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>) {</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Attempted to set roles on a bridge channel that has no associated channel. That&#39;s a bad idea.\n&quot;</span>);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;   }</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4730c4489878f1ffcb891c4f7b0f8989">bridge_roles</a>) {</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Attempted to reset roles while roles were already established. Purge existing roles first.\n&quot;</span>);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;   }</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   roles_datastore = <a class="code" href="../../dd/d13/bridge__roles_8c.html#af46488674ad92ba1e7ed3906413fd1f5">fetch_bridge_roles_datastore</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;   <span class="keywordflow">if</span> (!roles_datastore) {</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="comment">/* No roles to establish. */</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   }</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <span class="keywordflow">if</span> (!(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4730c4489878f1ffcb891c4f7b0f8989">bridge_roles</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4730c4489878f1ffcb891c4f7b0f8989">bridge_roles</a>)))) {</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   }</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;roles_datastore-&gt;<a class="code" href="../../d8/d71/structbridge__roles__datastore.html#a108fbb06e816e911e60abef6aa3e14ec">role_list</a>, role, <a class="code" href="../../d0/dbf/structbridge__role__option.html#a07e6c294ac62613b82b37ef0821eca6d">list</a>) {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d66/structbridge__role.html">bridge_role</a> *this_role_copy;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d13/bridge__roles_8c.html#a92389bef650b27d3d5a9a5b1563bdad2">setup_bridge_role</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4730c4489878f1ffcb891c4f7b0f8989">bridge_roles</a>, role-&gt;<a class="code" href="../../d4/d66/structbridge__role.html#a8bc65efeeb9ecfa300b247197a7a6dd9">role</a>)) {</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;         <span class="comment">/* We need to abandon the copy because we couldn&#39;t setup a role */</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;         <a class="code" href="../../dd/d13/bridge__roles_8c.html#af01f5cb3712ef0b120433da770f645ab">ast_bridge_channel_clear_roles</a>(bridge_channel);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      this_role_copy = <a class="code" href="../../df/d90/linkedlists_8h.html#a1e37109bb72d95999821eb45f28c261c">AST_LIST_LAST</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4730c4489878f1ffcb891c4f7b0f8989">bridge_roles</a>-&gt;<a class="code" href="../../d8/d71/structbridge__roles__datastore.html#a108fbb06e816e911e60abef6aa3e14ec">role_list</a>);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;role-&gt;<a class="code" href="../../d4/d66/structbridge__role.html#a1d09e1162d9743e7d53b752e264458cc">options</a>, role_option, <a class="code" href="../../d4/d66/structbridge__role.html#a64e4bd0d52d2c8be49413055b7785f86">list</a>) {</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dd/d13/bridge__roles_8c.html#a1307916af3e510c85a761e3664e6e635">setup_bridge_role_option</a>(this_role_copy, role_option-&gt;<a class="code" href="../../d0/dbf/structbridge__role__option.html#ac1820bcac88da94da29266408aad8f62">option</a>, role_option-&gt;<a class="code" href="../../d0/dbf/structbridge__role__option.html#ac835e96f4a17b5b7c61eef01a07670a8">value</a>)) {</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            <span class="comment">/* We need to abandon the copy because we couldn&#39;t setup a role option */</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            <a class="code" href="../../dd/d13/bridge__roles_8c.html#af01f5cb3712ef0b120433da770f645ab">ast_bridge_channel_clear_roles</a>(bridge_channel);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;         }</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      }</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;   }</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;}</div><div class="ttc" id="bridge__roles_8c_html_af01f5cb3712ef0b120433da770f645ab"><div class="ttname"><a href="../../dd/d13/bridge__roles_8c.html#af01f5cb3712ef0b120433da770f645ab">ast_bridge_channel_clear_roles</a></div><div class="ttdeci">void ast_bridge_channel_clear_roles(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Clear all roles from a bridge_channel&amp;#39;s role list. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00495">bridge_roles.c:495</a></div></div>
<div class="ttc" id="structbridge__role_html_a8bc65efeeb9ecfa300b247197a7a6dd9"><div class="ttname"><a href="../../d4/d66/structbridge__role.html#a8bc65efeeb9ecfa300b247197a7a6dd9">bridge_role::role</a></div><div class="ttdeci">char role[AST_ROLE_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00055">bridge_roles.c:55</a></div></div>
<div class="ttc" id="structbridge__roles__datastore_html_a108fbb06e816e911e60abef6aa3e14ec"><div class="ttname"><a href="../../d8/d71/structbridge__roles__datastore.html#a108fbb06e816e911e60abef6aa3e14ec">bridge_roles_datastore::role_list</a></div><div class="ttdeci">struct bridge_roles_datastore::@358 role_list</div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="bridge__roles_8c_html_af46488674ad92ba1e7ed3906413fd1f5"><div class="ttname"><a href="../../dd/d13/bridge__roles_8c.html#af46488674ad92ba1e7ed3906413fd1f5">fetch_bridge_roles_datastore</a></div><div class="ttdeci">static struct bridge_roles_datastore * fetch_bridge_roles_datastore(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00148">bridge_roles.c:148</a></div></div>
<div class="ttc" id="structbridge__role__option_html"><div class="ttname"><a href="../../d0/dbf/structbridge__role__option.html">bridge_role_option</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00044">bridge_roles.c:44</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structbridge__roles__datastore_html"><div class="ttname"><a href="../../d8/d71/structbridge__roles__datastore.html">bridge_roles_datastore</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00058">bridge_roles.c:58</a></div></div>
<div class="ttc" id="structbridge__role__option_html_ac835e96f4a17b5b7c61eef01a07670a8"><div class="ttname"><a href="../../d0/dbf/structbridge__role__option.html#ac835e96f4a17b5b7c61eef01a07670a8">bridge_role_option::value</a></div><div class="ttdeci">const ast_string_field value</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00049">bridge_roles.c:49</a></div></div>
<div class="ttc" id="structbridge__role_html"><div class="ttname"><a href="../../d4/d66/structbridge__role.html">bridge_role</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00052">bridge_roles.c:52</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4730c4489878f1ffcb891c4f7b0f8989"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4730c4489878f1ffcb891c4f7b0f8989">ast_bridge_channel::bridge_roles</a></div><div class="ttdeci">struct bridge_roles_datastore * bridge_roles</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00143">bridge_channel.h:143</a></div></div>
<div class="ttc" id="bridge__roles_8c_html_a92389bef650b27d3d5a9a5b1563bdad2"><div class="ttname"><a href="../../dd/d13/bridge__roles_8c.html#a92389bef650b27d3d5a9a5b1563bdad2">setup_bridge_role</a></div><div class="ttdeci">static int setup_bridge_role(struct bridge_roles_datastore *roles_datastore, const char *role_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00260">bridge_roles.c:260</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a1e37109bb72d95999821eb45f28c261c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a1e37109bb72d95999821eb45f28c261c">AST_LIST_LAST</a></div><div class="ttdeci">#define AST_LIST_LAST(head)</div><div class="ttdoc">Returns the last entry contained in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00428">linkedlists.h:428</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structbridge__role_html_a1d09e1162d9743e7d53b752e264458cc"><div class="ttname"><a href="../../d4/d66/structbridge__role.html#a1d09e1162d9743e7d53b752e264458cc">bridge_role::options</a></div><div class="ttdeci">struct bridge_role::@357 options</div></div>
<div class="ttc" id="structbridge__role_html_a64e4bd0d52d2c8be49413055b7785f86"><div class="ttname"><a href="../../d4/d66/structbridge__role.html#a64e4bd0d52d2c8be49413055b7785f86">bridge_role::list</a></div><div class="ttdeci">struct bridge_role::@356 list</div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structbridge__role__option_html_ac1820bcac88da94da29266408aad8f62"><div class="ttname"><a href="../../d0/dbf/structbridge__role__option.html#ac1820bcac88da94da29266408aad8f62">bridge_role_option::option</a></div><div class="ttdeci">const ast_string_field option</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00049">bridge_roles.c:49</a></div></div>
<div class="ttc" id="bridge__roles_8c_html_a1307916af3e510c85a761e3664e6e635"><div class="ttname"><a href="../../dd/d13/bridge__roles_8c.html#a1307916af3e510c85a761e3664e6e635">setup_bridge_role_option</a></div><div class="ttdeci">static int setup_bridge_role_option(struct bridge_role *role, const char *option, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00291">bridge_roles.c:291</a></div></div>
<div class="ttc" id="structbridge__role__option_html_a07e6c294ac62613b82b37ef0821eca6d"><div class="ttname"><a href="../../d0/dbf/structbridge__role__option.html#a07e6c294ac62613b82b37ef0821eca6d">bridge_role_option::list</a></div><div class="ttdeci">struct bridge_role_option::@355 list</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac114a541f2409bc882f142162391b6e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac114a541f2409bc882f142162391b6e7">&#9670;&nbsp;</a></span>ast_bridge_channel_get_role_option()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_bridge_channel_get_role_option </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>role_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>option</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the value of a requested role option from a bridge channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>The bridge channel we are retrieving the option from </td></tr>
    <tr><td class="paramname">role_name</td><td>Name of the role the option will be retrieved from </td></tr>
    <tr><td class="paramname">option</td><td>Name of the option we are retrieving the value of</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>If either the role does not exist on the bridge_channel or the role does exist but the option has not been set </td></tr>
    <tr><td class="paramname">The</td><td>value of the option</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>See ast_channel_set_role_option note about the need to call ast_bridge_channel_establish_roles.</dd>
<dd>
The returned character pointer is only valid as long as the bridge_channel is guaranteed to be alive and hasn't had ast_bridge_channel_clear_roles called against it (as this will free all roles and role options in the bridge channel). If you need this value after one of these destruction events occurs, you must make a local copy while it is still valid. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00427">427</a> of file <a class="el" href="../../dd/d13/bridge__roles_8c_source.html">bridge_roles.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00143">ast_bridge_channel::bridge_roles</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00197">get_role_from_datastore()</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00238">get_role_option()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00055">bridge_role::role</a>, and <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00049">bridge_role_option::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/dc5/parking__bridge_8c_source.html#l00206">bridge_parking_push()</a>, <a class="el" href="../../d8/d66/bridge__holding_8c_source.html#l00188">participant_entertainment_start()</a>, and <a class="el" href="../../d8/d66/bridge__holding_8c_source.html#l00116">participant_idle_mode_setup()</a>.</p>
<div class="fragment"><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;{</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d66/structbridge__role.html">bridge_role</a> *<a class="code" href="../../d4/d66/structbridge__role.html#a8bc65efeeb9ecfa300b247197a7a6dd9">role</a>;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/dbf/structbridge__role__option.html">bridge_role_option</a> *role_option = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;   <span class="keywordflow">if</span> (!bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4730c4489878f1ffcb891c4f7b0f8989">bridge_roles</a>) {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;   }</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   role = <a class="code" href="../../dd/d13/bridge__roles_8c.html#af6040810d6d269a4234f5a65e1e2f981">get_role_from_datastore</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4730c4489878f1ffcb891c4f7b0f8989">bridge_roles</a>, role_name);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;   <span class="keywordflow">if</span> (!role) {</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;   }</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   role_option = <a class="code" href="../../dd/d13/bridge__roles_8c.html#a27a8f1927159d860393565cb5b9ca457">get_role_option</a>(role, <a class="code" href="../../d0/dbf/structbridge__role__option.html#ac1820bcac88da94da29266408aad8f62">option</a>);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   <span class="keywordflow">return</span> role_option ? role_option-&gt;<a class="code" href="../../d0/dbf/structbridge__role__option.html#ac835e96f4a17b5b7c61eef01a07670a8">value</a> : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;}</div><div class="ttc" id="structbridge__role_html_a8bc65efeeb9ecfa300b247197a7a6dd9"><div class="ttname"><a href="../../d4/d66/structbridge__role.html#a8bc65efeeb9ecfa300b247197a7a6dd9">bridge_role::role</a></div><div class="ttdeci">char role[AST_ROLE_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00055">bridge_roles.c:55</a></div></div>
<div class="ttc" id="bridge__roles_8c_html_af6040810d6d269a4234f5a65e1e2f981"><div class="ttname"><a href="../../dd/d13/bridge__roles_8c.html#af6040810d6d269a4234f5a65e1e2f981">get_role_from_datastore</a></div><div class="ttdeci">static struct bridge_role * get_role_from_datastore(struct bridge_roles_datastore *roles_datastore, const char *role_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00197">bridge_roles.c:197</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structbridge__role__option_html"><div class="ttname"><a href="../../d0/dbf/structbridge__role__option.html">bridge_role_option</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00044">bridge_roles.c:44</a></div></div>
<div class="ttc" id="structbridge__role__option_html_ac835e96f4a17b5b7c61eef01a07670a8"><div class="ttname"><a href="../../d0/dbf/structbridge__role__option.html#ac835e96f4a17b5b7c61eef01a07670a8">bridge_role_option::value</a></div><div class="ttdeci">const ast_string_field value</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00049">bridge_roles.c:49</a></div></div>
<div class="ttc" id="structbridge__role_html"><div class="ttname"><a href="../../d4/d66/structbridge__role.html">bridge_role</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00052">bridge_roles.c:52</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4730c4489878f1ffcb891c4f7b0f8989"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4730c4489878f1ffcb891c4f7b0f8989">ast_bridge_channel::bridge_roles</a></div><div class="ttdeci">struct bridge_roles_datastore * bridge_roles</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00143">bridge_channel.h:143</a></div></div>
<div class="ttc" id="bridge__roles_8c_html_a27a8f1927159d860393565cb5b9ca457"><div class="ttname"><a href="../../dd/d13/bridge__roles_8c.html#a27a8f1927159d860393565cb5b9ca457">get_role_option</a></div><div class="ttdeci">static struct bridge_role_option * get_role_option(struct bridge_role *role, const char *option)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00238">bridge_roles.c:238</a></div></div>
<div class="ttc" id="structbridge__role__option_html_ac1820bcac88da94da29266408aad8f62"><div class="ttname"><a href="../../d0/dbf/structbridge__role__option.html#ac1820bcac88da94da29266408aad8f62">bridge_role_option::option</a></div><div class="ttdeci">const ast_string_field option</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00049">bridge_roles.c:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abc192ffe6ffc292806e647e0fa9b775e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc192ffe6ffc292806e647e0fa9b775e">&#9670;&nbsp;</a></span>ast_bridge_channel_has_role()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_has_role </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>role_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check to see if a bridge channel inherited a specific role from its channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>The bridge channel being checked </td></tr>
    <tr><td class="paramname">role_name</td><td>Name of the role being checked</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>The bridge channel does not have the requested role </td></tr>
    <tr><td class="paramname">1</td><td>The bridge channel does have the requested role</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Before a bridge_channel can effectively check roles against a bridge, ast_bridge_channel_establish_roles should be called on the bridge_channel so that roles and their respective role options can be copied from the channel datastore into the bridge_channel roles list. Otherwise this function will just return 0 because the list will be NULL. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00418">418</a> of file <a class="el" href="../../dd/d13/bridge__roles_8c_source.html">bridge_roles.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00143">ast_bridge_channel::bridge_roles</a>, and <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00197">get_role_from_datastore()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/dc5/parking__bridge_8c_source.html#l00206">bridge_parking_push()</a>, and <a class="el" href="../../d8/d66/bridge__holding_8c_source.html#l00244">holding_bridge_join()</a>.</p>
<div class="fragment"><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;{</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   <span class="keywordflow">if</span> (!bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4730c4489878f1ffcb891c4f7b0f8989">bridge_roles</a>) {</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;   }</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d13/bridge__roles_8c.html#af6040810d6d269a4234f5a65e1e2f981">get_role_from_datastore</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4730c4489878f1ffcb891c4f7b0f8989">bridge_roles</a>, role_name) ? 1 : 0;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div><div class="ttc" id="bridge__roles_8c_html_af6040810d6d269a4234f5a65e1e2f981"><div class="ttname"><a href="../../dd/d13/bridge__roles_8c.html#af6040810d6d269a4234f5a65e1e2f981">get_role_from_datastore</a></div><div class="ttdeci">static struct bridge_role * get_role_from_datastore(struct bridge_roles_datastore *roles_datastore, const char *role_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00197">bridge_roles.c:197</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4730c4489878f1ffcb891c4f7b0f8989"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4730c4489878f1ffcb891c4f7b0f8989">ast_bridge_channel::bridge_roles</a></div><div class="ttdeci">struct bridge_roles_datastore * bridge_roles</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00143">bridge_channel.h:143</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8511ad15a10f0b6269094ad307ba17a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8511ad15a10f0b6269094ad307ba17a2">&#9670;&nbsp;</a></span>ast_channel_add_bridge_role()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_channel_add_bridge_role </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>role_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a bridge role to a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Acquirer of the requested role </td></tr>
    <tr><td class="paramname">role_name</td><td>Name of the role being attached</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">-1</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00317">317</a> of file <a class="el" href="../../dd/d13/bridge__roles_8c_source.html">bridge_roles.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00172">fetch_or_create_bridge_roles_datastore()</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00197">get_role_from_datastore()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00260">setup_bridge_role()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l03121">add_transferer_role()</a>, <a class="el" href="../../d8/d4f/conf__chan__announce_8c_source.html#l00079">announce_request()</a>, <a class="el" href="../../de/de3/control_8c_source.html#l00308">app_control_add_role()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01196">bridge_agent_hold_push()</a>, <a class="el" href="../../d9/de0/stasis__bridge_8c_source.html#l00192">bridge_stasis_push()</a>, <a class="el" href="../../df/d0c/chan__bridge__media_8c_source.html#l00115">media_request_helper()</a>, <a class="el" href="../../db/d81/parking__controller_8c_source.html#l00057">parking_channel_set_roles()</a>, <a class="el" href="../../dc/d22/app__bridgewait_8c_source.html#l00268">process_options()</a>, and <a class="el" href="../../d9/d44/conf__chan__record_8c_source.html#l00057">rec_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;{</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d71/structbridge__roles__datastore.html">bridge_roles_datastore</a> *roles_datastore = <a class="code" href="../../dd/d13/bridge__roles_8c.html#af15fdd0acdfa1c899439498ef9820021">fetch_or_create_bridge_roles_datastore</a>(chan);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   <span class="keywordflow">if</span> (!roles_datastore) {</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to set up bridge role datastore on channel %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   }</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   <span class="comment">/* Check to make sure we aren&#39;t adding a redundant role */</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d13/bridge__roles_8c.html#af6040810d6d269a4234f5a65e1e2f981">get_role_from_datastore</a>(roles_datastore, role_name)) {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Bridge role %s is already applied to the channel %s\n&quot;</span>, role_name, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;   }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   <span class="comment">/* It wasn&#39;t already there, so we can just finish setting it up now. */</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d13/bridge__roles_8c.html#a92389bef650b27d3d5a9a5b1563bdad2">setup_bridge_role</a>(roles_datastore, role_name);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;}</div><div class="ttc" id="bridge__roles_8c_html_af6040810d6d269a4234f5a65e1e2f981"><div class="ttname"><a href="../../dd/d13/bridge__roles_8c.html#af6040810d6d269a4234f5a65e1e2f981">get_role_from_datastore</a></div><div class="ttdeci">static struct bridge_role * get_role_from_datastore(struct bridge_roles_datastore *roles_datastore, const char *role_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00197">bridge_roles.c:197</a></div></div>
<div class="ttc" id="bridge__roles_8c_html_af15fdd0acdfa1c899439498ef9820021"><div class="ttname"><a href="../../dd/d13/bridge__roles_8c.html#af15fdd0acdfa1c899439498ef9820021">fetch_or_create_bridge_roles_datastore</a></div><div class="ttdeci">static struct bridge_roles_datastore * fetch_or_create_bridge_roles_datastore(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00172">bridge_roles.c:172</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structbridge__roles__datastore_html"><div class="ttname"><a href="../../d8/d71/structbridge__roles__datastore.html">bridge_roles_datastore</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00058">bridge_roles.c:58</a></div></div>
<div class="ttc" id="bridge__roles_8c_html_a92389bef650b27d3d5a9a5b1563bdad2"><div class="ttname"><a href="../../dd/d13/bridge__roles_8c.html#a92389bef650b27d3d5a9a5b1563bdad2">setup_bridge_role</a></div><div class="ttdeci">static int setup_bridge_role(struct bridge_roles_datastore *roles_datastore, const char *role_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00260">bridge_roles.c:260</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8f7bd18b68cbc66bd4ed574ffc3039d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f7bd18b68cbc66bd4ed574ffc3039d2">&#9670;&nbsp;</a></span>ast_channel_clear_bridge_roles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_channel_clear_bridge_roles </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes all bridge roles currently on a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel the roles are being removed from </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00360">360</a> of file <a class="el" href="../../dd/d13/bridge__roles_8c_source.html">bridge_roles.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00556">AST_LIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00528">AST_LIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00614">AST_LIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00071">bridge_role_destroy()</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00148">fetch_bridge_roles_datastore()</a>, <a class="el" href="../../d0/dbf/structbridge__role__option.html#a07e6c294ac62613b82b37ef0821eca6d">bridge_role_option::list</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00055">bridge_role::role</a>, and <a class="el" href="../../d8/d71/structbridge__roles__datastore.html#a108fbb06e816e911e60abef6aa3e14ec">bridge_roles_datastore::role_list</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/de3/control_8c_source.html#l00330">app_control_clear_roles()</a>, and <a class="el" href="../../d9/de0/stasis__bridge_8c_source.html#l00284">bridge_stasis_pull()</a>.</p>
<div class="fragment"><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;{</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d71/structbridge__roles__datastore.html">bridge_roles_datastore</a> *roles_datastore = <a class="code" href="../../dd/d13/bridge__roles_8c.html#af46488674ad92ba1e7ed3906413fd1f5">fetch_bridge_roles_datastore</a>(chan);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d66/structbridge__role.html">bridge_role</a> *<a class="code" href="../../d4/d66/structbridge__role.html#a8bc65efeeb9ecfa300b247197a7a6dd9">role</a>;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;   <span class="keywordflow">if</span> (!roles_datastore) {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <span class="comment">/* The roles datastore didn&#39;t already exist, so there is no need to remove any roles */</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Roles did not exist on channel %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;roles_datastore-&gt;<a class="code" href="../../d8/d71/structbridge__roles__datastore.html#a108fbb06e816e911e60abef6aa3e14ec">role_list</a>, role, <a class="code" href="../../d4/d66/structbridge__role.html#a64e4bd0d52d2c8be49413055b7785f86">list</a>) {</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Removing bridge role %s from channel %s\n&quot;</span>, role-&gt;<a class="code" href="../../d4/d66/structbridge__role.html#a8bc65efeeb9ecfa300b247197a7a6dd9">role</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../d4/d66/structbridge__role.html#a64e4bd0d52d2c8be49413055b7785f86">list</a>);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <a class="code" href="../../dd/d13/bridge__roles_8c.html#a0277f4c1fdae96402e679310a48dce00">bridge_role_destroy</a>(role);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;   }</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;}</div><div class="ttc" id="structbridge__role_html_a8bc65efeeb9ecfa300b247197a7a6dd9"><div class="ttname"><a href="../../d4/d66/structbridge__role.html#a8bc65efeeb9ecfa300b247197a7a6dd9">bridge_role::role</a></div><div class="ttdeci">char role[AST_ROLE_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00055">bridge_roles.c:55</a></div></div>
<div class="ttc" id="structbridge__roles__datastore_html_a108fbb06e816e911e60abef6aa3e14ec"><div class="ttname"><a href="../../d8/d71/structbridge__roles__datastore.html#a108fbb06e816e911e60abef6aa3e14ec">bridge_roles_datastore::role_list</a></div><div class="ttdeci">struct bridge_roles_datastore::@358 role_list</div></div>
<div class="ttc" id="linkedlists_8h_html_a712c04b4493919a7052399cd30ee8fb9"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_END</div><div class="ttdoc">Closes a safe loop traversal block. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00614">linkedlists.h:614</a></div></div>
<div class="ttc" id="bridge__roles_8c_html_af46488674ad92ba1e7ed3906413fd1f5"><div class="ttname"><a href="../../dd/d13/bridge__roles_8c.html#af46488674ad92ba1e7ed3906413fd1f5">fetch_bridge_roles_datastore</a></div><div class="ttdeci">static struct bridge_roles_datastore * fetch_bridge_roles_datastore(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00148">bridge_roles.c:148</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structbridge__roles__datastore_html"><div class="ttname"><a href="../../d8/d71/structbridge__roles__datastore.html">bridge_roles_datastore</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00058">bridge_roles.c:58</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa8ac496fa9c717d5afb99a02e1e2760c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_LIST_REMOVE_CURRENT(field)</div><div class="ttdoc">Removes the current entry from a list during a traversal. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00556">linkedlists.h:556</a></div></div>
<div class="ttc" id="structbridge__role_html"><div class="ttname"><a href="../../d4/d66/structbridge__role.html">bridge_role</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00052">bridge_roles.c:52</a></div></div>
<div class="ttc" id="bridge__roles_8c_html_a0277f4c1fdae96402e679310a48dce00"><div class="ttname"><a href="../../dd/d13/bridge__roles_8c.html#a0277f4c1fdae96402e679310a48dce00">bridge_role_destroy</a></div><div class="ttdeci">static void bridge_role_destroy(struct bridge_role *role)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00071">bridge_roles.c:71</a></div></div>
<div class="ttc" id="structbridge__role_html_a64e4bd0d52d2c8be49413055b7785f86"><div class="ttname"><a href="../../d4/d66/structbridge__role.html#a64e4bd0d52d2c8be49413055b7785f86">bridge_role::list</a></div><div class="ttdeci">struct bridge_role::@356 list</div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="linkedlists_8h_html_aa5be52067bf16bdc7e56ca19b5ba858d"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_BEGIN(head, var, field)</div><div class="ttdoc">Loops safely over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00528">linkedlists.h:528</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9c16dcfdabf78d468e98cfe919836bf3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c16dcfdabf78d468e98cfe919836bf3">&#9670;&nbsp;</a></span>ast_channel_get_role_option()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_channel_get_role_option </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>role_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>option</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the value of a requested role option from a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>The channel to retrieve the requested option from </td></tr>
    <tr><td class="paramname">role_name</td><td>The role to which the option belongs </td></tr>
    <tr><td class="paramname">option</td><td>The name of the option to retrieve</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>The option does not exist </td></tr>
    <tr><td class="paramname">non-NULL</td><td>The value of the option</td></tr>
  </table>
  </dd>
</dl>
<p>This is an alternative to <a class="el" href="../../dd/d13/bridge__roles_8c.html#ac114a541f2409bc882f142162391b6e7">ast_bridge_channel_get_role_option</a> that is useful if bridge roles have not yet been esstablished on a channel's bridge_channel. A possible example of when this could be used is in a bridge v_table's push() callback. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00403">403</a> of file <a class="el" href="../../dd/d13/bridge__roles_8c_source.html">bridge_roles.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00221">get_role_from_channel()</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00238">get_role_option()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00055">bridge_role::role</a>, and <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00049">bridge_role_option::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l02855">bridge_personality_atxfer_push()</a>.</p>
<div class="fragment"><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;{</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d66/structbridge__role.html">bridge_role</a> *<a class="code" href="../../d4/d66/structbridge__role.html#a8bc65efeeb9ecfa300b247197a7a6dd9">role</a>;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/dbf/structbridge__role__option.html">bridge_role_option</a> *role_option;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   role = <a class="code" href="../../dd/d13/bridge__roles_8c.html#ada095ba03be4d06760ab0c96fde6a4e9">get_role_from_channel</a>(channel, role_name);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;   <span class="keywordflow">if</span> (!role) {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;   }</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   role_option = <a class="code" href="../../dd/d13/bridge__roles_8c.html#a27a8f1927159d860393565cb5b9ca457">get_role_option</a>(role, <a class="code" href="../../d0/dbf/structbridge__role__option.html#ac1820bcac88da94da29266408aad8f62">option</a>);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   <span class="keywordflow">return</span> role_option ? role_option-&gt;<a class="code" href="../../d0/dbf/structbridge__role__option.html#ac835e96f4a17b5b7c61eef01a07670a8">value</a> : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;}</div><div class="ttc" id="structbridge__role_html_a8bc65efeeb9ecfa300b247197a7a6dd9"><div class="ttname"><a href="../../d4/d66/structbridge__role.html#a8bc65efeeb9ecfa300b247197a7a6dd9">bridge_role::role</a></div><div class="ttdeci">char role[AST_ROLE_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00055">bridge_roles.c:55</a></div></div>
<div class="ttc" id="bridge__roles_8c_html_ada095ba03be4d06760ab0c96fde6a4e9"><div class="ttname"><a href="../../dd/d13/bridge__roles_8c.html#ada095ba03be4d06760ab0c96fde6a4e9">get_role_from_channel</a></div><div class="ttdeci">static struct bridge_role * get_role_from_channel(struct ast_channel *channel, const char *role_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00221">bridge_roles.c:221</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structbridge__role__option_html"><div class="ttname"><a href="../../d0/dbf/structbridge__role__option.html">bridge_role_option</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00044">bridge_roles.c:44</a></div></div>
<div class="ttc" id="structbridge__role__option_html_ac835e96f4a17b5b7c61eef01a07670a8"><div class="ttname"><a href="../../d0/dbf/structbridge__role__option.html#ac835e96f4a17b5b7c61eef01a07670a8">bridge_role_option::value</a></div><div class="ttdeci">const ast_string_field value</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00049">bridge_roles.c:49</a></div></div>
<div class="ttc" id="structbridge__role_html"><div class="ttname"><a href="../../d4/d66/structbridge__role.html">bridge_role</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00052">bridge_roles.c:52</a></div></div>
<div class="ttc" id="bridge__roles_8c_html_a27a8f1927159d860393565cb5b9ca457"><div class="ttname"><a href="../../dd/d13/bridge__roles_8c.html#a27a8f1927159d860393565cb5b9ca457">get_role_option</a></div><div class="ttdeci">static struct bridge_role_option * get_role_option(struct bridge_role *role, const char *option)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00238">bridge_roles.c:238</a></div></div>
<div class="ttc" id="structbridge__role__option_html_ac1820bcac88da94da29266408aad8f62"><div class="ttname"><a href="../../d0/dbf/structbridge__role__option.html#ac1820bcac88da94da29266408aad8f62">bridge_role_option::option</a></div><div class="ttdeci">const ast_string_field option</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00049">bridge_roles.c:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b856fa6db0d3de843aa5a1d89db1154"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b856fa6db0d3de843aa5a1d89db1154">&#9670;&nbsp;</a></span>ast_channel_has_role()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_channel_has_role </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>role_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if a role exists on a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>The channel to check </td></tr>
    <tr><td class="paramname">role_name</td><td>The name of the role to search for</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>The requested role does not exist on the channel </td></tr>
    <tr><td class="paramname">1</td><td>The requested role exists on the channel</td></tr>
  </table>
  </dd>
</dl>
<p>This is an alternative to <a class="el" href="../../dd/d13/bridge__roles_8c.html#abc192ffe6ffc292806e647e0fa9b775e">ast_bridge_channel_has_role</a> that is useful if bridge roles have not yet been established on a channel's bridge_channel. A possible example of when this could be used is in a bridge v_table's push() callback. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00398">398</a> of file <a class="el" href="../../dd/d13/bridge__roles_8c_source.html">bridge_roles.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00221">get_role_from_channel()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l02855">bridge_personality_atxfer_push()</a>, <a class="el" href="../../d9/de0/stasis__bridge_8c_source.html#l00192">bridge_stasis_push()</a>, and <a class="el" href="../../da/dfb/app__queue_8c_source.html#l06398">handle_hangup()</a>.</p>
<div class="fragment"><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;{</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d13/bridge__roles_8c.html#ada095ba03be4d06760ab0c96fde6a4e9">get_role_from_channel</a>(channel, role_name) ? 1 : 0;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;}</div><div class="ttc" id="bridge__roles_8c_html_ada095ba03be4d06760ab0c96fde6a4e9"><div class="ttname"><a href="../../dd/d13/bridge__roles_8c.html#ada095ba03be4d06760ab0c96fde6a4e9">get_role_from_channel</a></div><div class="ttdeci">static struct bridge_role * get_role_from_channel(struct ast_channel *channel, const char *role_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00221">bridge_roles.c:221</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7dce43ab7e058fda7576097ab7068ae2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dce43ab7e058fda7576097ab7068ae2">&#9670;&nbsp;</a></span>ast_channel_remove_bridge_role()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_channel_remove_bridge_role </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>role_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes a bridge role from a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel the role is being removed from </td></tr>
    <tr><td class="paramname">role_name</td><td>Name of the role being removed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00336">336</a> of file <a class="el" href="../../dd/d13/bridge__roles_8c_source.html">bridge_roles.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00556">AST_LIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00528">AST_LIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00614">AST_LIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00071">bridge_role_destroy()</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00148">fetch_bridge_roles_datastore()</a>, <a class="el" href="../../d0/dbf/structbridge__role__option.html#a07e6c294ac62613b82b37ef0821eca6d">bridge_role_option::list</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00055">bridge_role::role</a>, and <a class="el" href="../../d8/d71/structbridge__roles__datastore.html#a108fbb06e816e911e60abef6aa3e14ec">bridge_roles_datastore::role_list</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01508">attended_transfer_properties_shutdown()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01369">bridge_agent_hold_pull()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01196">bridge_agent_hold_push()</a>.</p>
<div class="fragment"><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;{</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d71/structbridge__roles__datastore.html">bridge_roles_datastore</a> *roles_datastore = <a class="code" href="../../dd/d13/bridge__roles_8c.html#af46488674ad92ba1e7ed3906413fd1f5">fetch_bridge_roles_datastore</a>(chan);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d66/structbridge__role.html">bridge_role</a> *<a class="code" href="../../d4/d66/structbridge__role.html#a8bc65efeeb9ecfa300b247197a7a6dd9">role</a>;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;   <span class="keywordflow">if</span> (!roles_datastore) {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="comment">/* The roles datastore didn&#39;t already exist, so there is no need to remove a role */</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Role %s did not exist on channel %s\n&quot;</span>, role_name, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   }</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;roles_datastore-&gt;<a class="code" href="../../d8/d71/structbridge__roles__datastore.html#a108fbb06e816e911e60abef6aa3e14ec">role_list</a>, role, <a class="code" href="../../d4/d66/structbridge__role.html#a64e4bd0d52d2c8be49413055b7785f86">list</a>) {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <span class="keywordflow">if</span> (!strcmp(role-&gt;<a class="code" href="../../d4/d66/structbridge__role.html#a8bc65efeeb9ecfa300b247197a7a6dd9">role</a>, role_name)) {</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Removing bridge role %s from channel %s\n&quot;</span>, role_name, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../d4/d66/structbridge__role.html#a64e4bd0d52d2c8be49413055b7785f86">list</a>);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;         <a class="code" href="../../dd/d13/bridge__roles_8c.html#a0277f4c1fdae96402e679310a48dce00">bridge_role_destroy</a>(role);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      }</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Role %s did not exist on channel %s\n&quot;</span>, role_name, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;}</div><div class="ttc" id="structbridge__role_html_a8bc65efeeb9ecfa300b247197a7a6dd9"><div class="ttname"><a href="../../d4/d66/structbridge__role.html#a8bc65efeeb9ecfa300b247197a7a6dd9">bridge_role::role</a></div><div class="ttdeci">char role[AST_ROLE_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00055">bridge_roles.c:55</a></div></div>
<div class="ttc" id="structbridge__roles__datastore_html_a108fbb06e816e911e60abef6aa3e14ec"><div class="ttname"><a href="../../d8/d71/structbridge__roles__datastore.html#a108fbb06e816e911e60abef6aa3e14ec">bridge_roles_datastore::role_list</a></div><div class="ttdeci">struct bridge_roles_datastore::@358 role_list</div></div>
<div class="ttc" id="linkedlists_8h_html_a712c04b4493919a7052399cd30ee8fb9"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_END</div><div class="ttdoc">Closes a safe loop traversal block. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00614">linkedlists.h:614</a></div></div>
<div class="ttc" id="bridge__roles_8c_html_af46488674ad92ba1e7ed3906413fd1f5"><div class="ttname"><a href="../../dd/d13/bridge__roles_8c.html#af46488674ad92ba1e7ed3906413fd1f5">fetch_bridge_roles_datastore</a></div><div class="ttdeci">static struct bridge_roles_datastore * fetch_bridge_roles_datastore(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00148">bridge_roles.c:148</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structbridge__roles__datastore_html"><div class="ttname"><a href="../../d8/d71/structbridge__roles__datastore.html">bridge_roles_datastore</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00058">bridge_roles.c:58</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa8ac496fa9c717d5afb99a02e1e2760c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_LIST_REMOVE_CURRENT(field)</div><div class="ttdoc">Removes the current entry from a list during a traversal. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00556">linkedlists.h:556</a></div></div>
<div class="ttc" id="structbridge__role_html"><div class="ttname"><a href="../../d4/d66/structbridge__role.html">bridge_role</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00052">bridge_roles.c:52</a></div></div>
<div class="ttc" id="bridge__roles_8c_html_a0277f4c1fdae96402e679310a48dce00"><div class="ttname"><a href="../../dd/d13/bridge__roles_8c.html#a0277f4c1fdae96402e679310a48dce00">bridge_role_destroy</a></div><div class="ttdeci">static void bridge_role_destroy(struct bridge_role *role)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00071">bridge_roles.c:71</a></div></div>
<div class="ttc" id="structbridge__role_html_a64e4bd0d52d2c8be49413055b7785f86"><div class="ttname"><a href="../../d4/d66/structbridge__role.html#a64e4bd0d52d2c8be49413055b7785f86">bridge_role::list</a></div><div class="ttdeci">struct bridge_role::@356 list</div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="linkedlists_8h_html_aa5be52067bf16bdc7e56ca19b5ba858d"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_BEGIN(head, var, field)</div><div class="ttdoc">Loops safely over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00528">linkedlists.h:528</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c1bc5238aea4e2d19c9894c1b68a457"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c1bc5238aea4e2d19c9894c1b68a457">&#9670;&nbsp;</a></span>ast_channel_set_bridge_role_option()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_channel_set_bridge_role_option </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>role_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>option</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a role option on a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>Channel receiving the role option </td></tr>
    <tr><td class="paramname">role_name</td><td>Role the role option is applied to </td></tr>
    <tr><td class="paramname">option</td><td>Name of the option </td></tr>
    <tr><td class="paramname">value</td><td>Value of the option</td></tr>
    <tr><td class="paramname">0</td><td>on success </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00379">379</a> of file <a class="el" href="../../dd/d13/bridge__roles_8c_source.html">bridge_roles.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00221">get_role_from_channel()</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00238">get_role_option()</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00055">bridge_role::role</a>, and <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00291">setup_bridge_role_option()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l03121">add_transferer_role()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01738">agent_alert()</a>, <a class="el" href="../../dc/d22/app__bridgewait_8c_source.html#l00241">apply_option_entertainment()</a>, <a class="el" href="../../dc/d22/app__bridgewait_8c_source.html#l00236">apply_option_moh()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01196">bridge_agent_hold_push()</a>, <a class="el" href="../../d9/de0/stasis__bridge_8c_source.html#l00192">bridge_stasis_push()</a>, and <a class="el" href="../../db/d81/parking__controller_8c_source.html#l00057">parking_channel_set_roles()</a>.</p>
<div class="fragment"><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;{</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d66/structbridge__role.html">bridge_role</a> *<a class="code" href="../../d4/d66/structbridge__role.html#a8bc65efeeb9ecfa300b247197a7a6dd9">role</a> = <a class="code" href="../../dd/d13/bridge__roles_8c.html#ada095ba03be4d06760ab0c96fde6a4e9">get_role_from_channel</a>(channel, role_name);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/dbf/structbridge__role__option.html">bridge_role_option</a> *role_option;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   <span class="keywordflow">if</span> (!role) {</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;   }</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;   role_option = <a class="code" href="../../dd/d13/bridge__roles_8c.html#a27a8f1927159d860393565cb5b9ca457">get_role_option</a>(role, <a class="code" href="../../d0/dbf/structbridge__role__option.html#ac1820bcac88da94da29266408aad8f62">option</a>);</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;   <span class="keywordflow">if</span> (role_option) {</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(role_option, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;   }</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d13/bridge__roles_8c.html#a1307916af3e510c85a761e3664e6e635">setup_bridge_role_option</a>(role, <a class="code" href="../../d0/dbf/structbridge__role__option.html#ac1820bcac88da94da29266408aad8f62">option</a>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;}</div><div class="ttc" id="structbridge__role_html_a8bc65efeeb9ecfa300b247197a7a6dd9"><div class="ttname"><a href="../../d4/d66/structbridge__role.html#a8bc65efeeb9ecfa300b247197a7a6dd9">bridge_role::role</a></div><div class="ttdeci">char role[AST_ROLE_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00055">bridge_roles.c:55</a></div></div>
<div class="ttc" id="bridge__roles_8c_html_ada095ba03be4d06760ab0c96fde6a4e9"><div class="ttname"><a href="../../dd/d13/bridge__roles_8c.html#ada095ba03be4d06760ab0c96fde6a4e9">get_role_from_channel</a></div><div class="ttdeci">static struct bridge_role * get_role_from_channel(struct ast_channel *channel, const char *role_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00221">bridge_roles.c:221</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="structbridge__role__option_html"><div class="ttname"><a href="../../d0/dbf/structbridge__role__option.html">bridge_role_option</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00044">bridge_roles.c:44</a></div></div>
<div class="ttc" id="structbridge__role_html"><div class="ttname"><a href="../../d4/d66/structbridge__role.html">bridge_role</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00052">bridge_roles.c:52</a></div></div>
<div class="ttc" id="bridge__roles_8c_html_a27a8f1927159d860393565cb5b9ca457"><div class="ttname"><a href="../../dd/d13/bridge__roles_8c.html#a27a8f1927159d860393565cb5b9ca457">get_role_option</a></div><div class="ttdeci">static struct bridge_role_option * get_role_option(struct bridge_role *role, const char *option)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00238">bridge_roles.c:238</a></div></div>
<div class="ttc" id="structbridge__role__option_html_ac1820bcac88da94da29266408aad8f62"><div class="ttname"><a href="../../d0/dbf/structbridge__role__option.html#ac1820bcac88da94da29266408aad8f62">bridge_role_option::option</a></div><div class="ttdeci">const ast_string_field option</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00049">bridge_roles.c:49</a></div></div>
<div class="ttc" id="bridge__roles_8c_html_a1307916af3e510c85a761e3664e6e635"><div class="ttname"><a href="../../dd/d13/bridge__roles_8c.html#a1307916af3e510c85a761e3664e6e635">setup_bridge_role_option</a></div><div class="ttdeci">static int setup_bridge_role_option(struct bridge_role *role, const char *option, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00291">bridge_roles.c:291</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:44:54 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
