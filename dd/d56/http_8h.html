<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: http.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_6d4b1cdb59e2db6ad82005b337288fef.html">asterisk</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">http.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Support for Private Asterisk HTTP Servers.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html">asterisk/config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/ddf/tcptls_8h_source.html">asterisk/tcptls.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d90/linkedlists_8h_source.html">asterisk/linkedlists.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for http.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dee/http_8h__incl.png" border="0" usemap="#http_8h" alt=""/></div>
<map name="http_8h" id="http_8h">
<area shape="rect" id="node2" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="394,80,520,107"/>
<area shape="rect" id="node18" href="../../d4/ddf/tcptls_8h.html" title="Generic support for tcp/tls servers in Asterisk. " alt="" coords="561,80,684,107"/>
<area shape="rect" id="node22" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="242,155,392,181"/>
<area shape="rect" id="node3" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="573,155,688,181"/>
<area shape="rect" id="node9" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="202,379,349,405"/>
<area shape="rect" id="node4" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="1088,229,1226,256"/>
<area shape="rect" id="node7" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="610,304,672,331"/>
<area shape="rect" id="node11" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="256,229,370,256"/>
<area shape="rect" id="node14" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="816,304,943,331"/>
<area shape="rect" id="node15" href="../../d5/deb/localtime_8h.html" title="Custom localtime functions for multiple timezones. " alt="" coords="394,229,541,256"/>
<area shape="rect" id="node16" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="22,304,180,331"/>
<area shape="rect" id="node17" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="565,229,696,256"/>
<area shape="rect" id="node19" href="../../dd/d27/iostream_8h.html" title="Generic abstraction for input/output streams. " alt="" coords="1083,155,1228,181"/>
<area shape="rect" id="node21" href="../../db/df1/netsock2_8h.html" title="Network socket handling. " alt="" coords="917,229,1064,256"/>
<area shape="rect" id="node20" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="1302,229,1386,256"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d88/http_8h__dep__incl.png" border="0" usemap="#http_8hdep" alt=""/></div>
<map name="http_8hdep" id="http_8hdep">
<area shape="rect" id="node2" href="../../d0/d0c/http__websocket_8h.html" title="Support for WebSocket connections within the Asterisk HTTP server and client WebSocket connections to..." alt="" coords="3233,80,3368,107"/>
<area shape="rect" id="node8" href="../../de/d4c/res__http__websocket_8c.html" title="WebSocket support for the Asterisk internal HTTP server. " alt="" coords="3927,162,4087,189"/>
<area shape="rect" id="node12" href="../../d4/d59/ari_8h.html" title="Asterisk RESTful API hooks. " alt="" coords="1918,80,1969,107"/>
<area shape="rect" id="node43" href="../../dd/d43/http_8c.html" title="http server for AMI access " alt="" coords="3443,80,3502,107"/>
<area shape="rect" id="node44" href="../../d4/d10/manager_8c.html" title="The Asterisk Management Interface &#45; AMI. " alt="" coords="3526,80,3617,107"/>
<area shape="rect" id="node45" href="../../db/dde/internal_8h.html" title="Internal API&#39;s for res_ari. " alt="" coords="2999,80,3082,107"/>
<area shape="rect" id="node47" href="../../d6/dc9/res__http__post_8c.html" title="HTTP POST upload support for Asterisk HTTP server. " alt="" coords="3641,80,3763,107"/>
<area shape="rect" id="node48" href="../../d9/de9/res__phoneprov_8c.html" title="Phone provisioning application for the asterisk internal http server. " alt="" coords="3787,80,3913,107"/>
<area shape="rect" id="node49" href="../../d7/d1b/res__prometheus_8c.html" title="Core Prometheus metrics API. " alt="" coords="3938,80,4077,107"/>
<area shape="rect" id="node50" href="../../d4/d45/test__http__media__cache_8c.html" title="Tests for the HTTP media cache backend. " alt="" coords="4101,80,4284,107"/>
<area shape="rect" id="node3" href="../../d5/dfe/chan__sip_8c.html" title="Implementation of Session Initiation Protocol. " alt="" coords="3813,162,3903,189"/>
<area shape="rect" id="node4" href="../../d8/d44/ari__websockets_8c.html" title="WebSocket support for RESTful API&#39;s. " alt="" coords="2862,162,2993,189"/>
<area shape="rect" id="node5" href="../../dc/dec/res_2ari_2config_8c.html" title="Config framework stuffz for ARI. " alt="" coords="3088,162,3159,189"/>
<area shape="rect" id="node6" href="../../dd/df4/resource__events_8c.html" title="/api&#45;docs/events.{format} implementation&#45; WebSocket resource " alt="" coords="3034,244,3173,271"/>
<area shape="rect" id="node7" href="../../d6/d87/res__ari__events_8c.html" title="WebSocket resource. " alt="" coords="3197,244,3324,271"/>
<area shape="rect" id="node9" href="../../d3/d17/config__transport_8c.html" title="config_transport.c" alt="" coords="3285,162,3423,189"/>
<area shape="rect" id="node10" href="../../d2/db8/res__pjsip__transport__websocket_8c.html" title="res_pjsip_transport\l_websocket.c" alt="" coords="3447,155,3591,196"/>
<area shape="rect" id="node11" href="../../de/de9/test__websocket__client_8c.html" title="Websocket Client Unit Tests. " alt="" coords="3615,162,3789,189"/>
<area shape="rect" id="node13" href="../../d7/d0c/resource__applications_8h.html" title="Generated file &#45; declares stubs to be implemented in res/ari/resource_applications.c. " alt="" coords="1857,162,2030,189"/>
<area shape="rect" id="node16" href="../../d3/ddb/resource__asterisk_8h.html" title="Generated file &#45; declares stubs to be implemented in res/ari/resource_asterisk.c. ..." alt="" coords="2054,162,2201,189"/>
<area shape="rect" id="node19" href="../../d5/d36/resource__bridges_8h.html" title="Generated file &#45; declares stubs to be implemented in res/ari/resource_bridges.c. " alt="" coords="2250,162,2394,189"/>
<area shape="rect" id="node22" href="../../d0/d12/resource__channels_8h.html" title="Generated file &#45; declares stubs to be implemented in res/ari/resource_channels.c. ..." alt="" coords="2418,162,2573,189"/>
<area shape="rect" id="node25" href="../../db/d87/resource__device__states_8h.html" title="Generated file &#45; declares stubs to be implemented in res/ari/resource_deviceStates.c. " alt="" coords="1099,162,1284,189"/>
<area shape="rect" id="node28" href="../../d6/d2d/resource__endpoints_8h.html" title="Generated file &#45; declares stubs to be implemented in res/ari/resource_endpoints.c. " alt="" coords="1399,162,1559,189"/>
<area shape="rect" id="node31" href="../../d1/dda/resource__events_8h.html" title="Generated file &#45; declares stubs to be implemented in res/ari/resource_events.c. " alt="" coords="2597,162,2737,189"/>
<area shape="rect" id="node32" href="../../d0/db9/resource__mailboxes_8h.html" title="Generated file &#45; declares stubs to be implemented in res/ari/resource_mailboxes.c. " alt="" coords="177,162,339,189"/>
<area shape="rect" id="node35" href="../../de/d64/resource__playbacks_8h.html" title="Generated file &#45; declares stubs to be implemented in res/ari/resource_playbacks.c. " alt="" coords="534,162,694,189"/>
<area shape="rect" id="node38" href="../../dd/dfd/resource__recordings_8h.html" title="Generated file &#45; declares stubs to be implemented in res/ari/resource_recordings.c. " alt="" coords="815,162,979,189"/>
<area shape="rect" id="node40" href="../../d3/dde/resource__sounds_8h.html" title="Generated file &#45; declares stubs to be implemented in res/ari/resource_sounds.c. " alt="" coords="1584,162,1727,189"/>
<area shape="rect" id="node41" href="../../d7/dbc/res__ari_8c.html" title="HTTP binding for the Stasis API. " alt="" coords="2761,162,2837,189"/>
<area shape="rect" id="node42" href="../../da/d03/test__ari_8c.html" title="Test ARI API. David M. Lee, II &lt;dlee@digium.com&gt; . " alt="" coords="1751,162,1832,189"/>
<area shape="rect" id="node14" href="../../d5/dbc/resource__applications_8c.html" title="/api&#45;docs/applications.{format} implementation &#45; Stasis application resources " alt="" coords="1844,244,2016,271"/>
<area shape="rect" id="node15" href="../../d3/d82/res__ari__applications_8c.html" title="Stasis application resources. " alt="" coords="1661,244,1820,271"/>
<area shape="rect" id="node17" href="../../df/d20/resource__asterisk_8c.html" title="Implementation for ARI stubs. " alt="" coords="2041,244,2187,271"/>
<area shape="rect" id="node18" href="../../dd/d87/res__ari__asterisk_8c.html" title="Asterisk resources. " alt="" coords="2211,244,2345,271"/>
<area shape="rect" id="node20" href="../../db/d0b/resource__bridges_8c.html" title="Implementation for ARI stubs. " alt="" coords="2369,244,2512,271"/>
<area shape="rect" id="node21" href="../../d6/dcd/res__ari__bridges_8c.html" title="Bridge resources. " alt="" coords="2537,244,2667,271"/>
<area shape="rect" id="node23" href="../../da/d49/resource__channels_8c.html" title="Implementation for ARI stubs. " alt="" coords="2856,244,3009,271"/>
<area shape="rect" id="node24" href="../../de/daa/res__ari__channels_8c.html" title="Channel resources. " alt="" coords="2692,244,2832,271"/>
<area shape="rect" id="node26" href="../../da/d20/resource__device__states_8c.html" title="/api&#45;docs/deviceStates.{format} implementation&#45; Device state resources " alt="" coords="1099,244,1283,271"/>
<area shape="rect" id="node27" href="../../dc/d85/res__ari__device__states_8c.html" title="Device state resources. " alt="" coords="905,244,1075,271"/>
<area shape="rect" id="node29" href="../../d1/d5a/resource__endpoints_8c.html" title="/api&#45;docs/endpoints.{format} implementation&#45; Endpoint resources " alt="" coords="1479,244,1637,271"/>
<area shape="rect" id="node30" href="../../d1/dd2/res__ari__endpoints_8c.html" title="Endpoint resources. " alt="" coords="1307,244,1454,271"/>
<area shape="rect" id="node33" href="../../d9/d8a/resource__mailboxes_8c.html" title="/api&#45;docs/mailboxes.{format} implementation&#45; Mailboxes resources " alt="" coords="177,244,339,271"/>
<area shape="rect" id="node34" href="../../d0/dd5/res__ari__mailboxes_8c.html" title="Mailboxes resources. " alt="" coords="5,244,153,271"/>
<area shape="rect" id="node36" href="../../d1/db1/resource__playbacks_8c.html" title="/api&#45;docs/playbacks.{format} implementation&#45; Playback control resources " alt="" coords="535,244,693,271"/>
<area shape="rect" id="node37" href="../../d0/d2f/res__ari__playbacks_8c.html" title="Playback control resources. " alt="" coords="363,244,510,271"/>
<area shape="rect" id="node39" href="../../d6/d1b/resource__recordings_8c.html" title="/api&#45;docs/recordings.{format} implementation&#45; Recording resources " alt="" coords="718,244,881,271"/>
<area shape="rect" id="node46" href="../../d8/dfa/res_2ari_2cli_8c.html" title="Command line for ARI. " alt="" coords="3017,162,3064,189"/>
</map>
</div>
</div>
<p><a href="../../dd/d56/http_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/dbf/structast__http__auth.html">ast_http_auth</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">HTTP authentication information.  <a href="../../d5/dbf/structast__http__auth.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definition of a URI handler.  <a href="../../d0/d6c/structast__http__uri.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a7336d81a706b873bbf44aea94bcd5069"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#a7336d81a706b873bbf44aea94bcd5069">ast_http_callback</a>) (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, const struct <a class="el" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a> *urih, const char *uri, enum <a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80ef">ast_http_method</a> <a class="el" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *get_params, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers)</td></tr>
<tr class="memdesc:a7336d81a706b873bbf44aea94bcd5069"><td class="mdescLeft">&#160;</td><td class="mdescRight">HTTP Callbacks.  <a href="#a7336d81a706b873bbf44aea94bcd5069">More...</a><br /></td></tr>
<tr class="separator:a7336d81a706b873bbf44aea94bcd5069"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a16fb43ed7e6093a9dc96477ba37b80ef"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80ef">ast_http_method</a> { <br />
&#160;&#160;<a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa8f6ca13b1fe4a9c235071bd548509ea7">AST_HTTP_UNKNOWN</a> = -1, 
<a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa74b1cb5c2ecb5e0bd9af5d46a7b78fd2">AST_HTTP_GET</a> = 0, 
<a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa544b9492daf28b47937772ca54e31c80">AST_HTTP_POST</a>, 
<a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efaf8da4e60a407fb100dd10e20929ea162">AST_HTTP_HEAD</a>, 
<br />
&#160;&#160;<a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa001bd38674d391df71e468b51ffe50ce">AST_HTTP_PUT</a>, 
<a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa48eee9f380e72e9356c181ec467af41b">AST_HTTP_DELETE</a>, 
<a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efaa7118e76cc07d36dec9b2b2f67feafc4">AST_HTTP_OPTIONS</a>, 
<a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa75a3a32958910ac5da248eabad9e2475">AST_HTTP_MAX_METHOD</a>
<br />
 }<tr class="memdesc:a16fb43ed7e6093a9dc96477ba37b80ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">HTTP Request methods known by Asterisk.  <a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80ef">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a16fb43ed7e6093a9dc96477ba37b80ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a656cd4a1dab52abb5e6cd641e064c18f"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#a656cd4a1dab52abb5e6cd641e064c18f">ast_get_http_method</a> (enum <a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80ef">ast_http_method</a> <a class="el" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>) <a class="el" href="../../d4/dd1/compiler_8h.html#a74d759b292a027618339fab3574b9175">attribute_pure</a></td></tr>
<tr class="memdesc:a656cd4a1dab52abb5e6cd641e064c18f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return http method name string.  <a href="#a656cd4a1dab52abb5e6cd641e064c18f">More...</a><br /></td></tr>
<tr class="separator:a656cd4a1dab52abb5e6cd641e064c18f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacbeca1d5a14388e6c2f708ac7a9fffa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#aacbeca1d5a14388e6c2f708ac7a9fffa">ast_http_auth</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, const char *realm, const unsigned long nonce, const unsigned long opaque, int stale, const char *<a class="el" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a>)</td></tr>
<tr class="memdesc:aacbeca1d5a14388e6c2f708ac7a9fffa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send http "401 Unauthorized" response and close socket.  <a href="#aacbeca1d5a14388e6c2f708ac7a9fffa">More...</a><br /></td></tr>
<tr class="separator:aacbeca1d5a14388e6c2f708ac7a9fffa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6158887813b6c700d9056b4daea05df0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#a6158887813b6c700d9056b4daea05df0">ast_http_body_discard</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser)</td></tr>
<tr class="memdesc:a6158887813b6c700d9056b4daea05df0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read and discard any unread HTTP request body.  <a href="#a6158887813b6c700d9056b4daea05df0">More...</a><br /></td></tr>
<tr class="separator:a6158887813b6c700d9056b4daea05df0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af220ac7e6b4ecb8be48359c18e10adaa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#af220ac7e6b4ecb8be48359c18e10adaa">ast_http_body_read_status</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, int read_success)</td></tr>
<tr class="memdesc:af220ac7e6b4ecb8be48359c18e10adaa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the body read success status.  <a href="#af220ac7e6b4ecb8be48359c18e10adaa">More...</a><br /></td></tr>
<tr class="separator:af220ac7e6b4ecb8be48359c18e10adaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf98d4742ea06a06bef5ead3cd8ef0ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#acf98d4742ea06a06bef5ead3cd8ef0ed">ast_http_create_response</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, int status_code, const char *status_title, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> *http_header_data, const char *<a class="el" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a>)</td></tr>
<tr class="memdesc:acf98d4742ea06a06bef5ead3cd8ef0ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates and sends a formatted http response message.  <a href="#acf98d4742ea06a06bef5ead3cd8ef0ed">More...</a><br /></td></tr>
<tr class="separator:acf98d4742ea06a06bef5ead3cd8ef0ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0f7966324a592e02d53f01e7bb9cc17"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#ab0f7966324a592e02d53f01e7bb9cc17">ast_http_error</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, int <a class="el" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>, const char *title, const char *<a class="el" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a>)</td></tr>
<tr class="memdesc:ab0f7966324a592e02d53f01e7bb9cc17"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send HTTP error message and close socket.  <a href="#ab0f7966324a592e02d53f01e7bb9cc17">More...</a><br /></td></tr>
<tr class="separator:ab0f7966324a592e02d53f01e7bb9cc17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa8ae400d72e4c479e32c38ba10f8398"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#afa8ae400d72e4c479e32c38ba10f8398">ast_http_ftype2mtype</a> (const char *ftype) <a class="el" href="../../d4/dd1/compiler_8h.html#a74d759b292a027618339fab3574b9175">attribute_pure</a></td></tr>
<tr class="memdesc:afa8ae400d72e4c479e32c38ba10f8398"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return mime type based on extension.  <a href="#afa8ae400d72e4c479e32c38ba10f8398">More...</a><br /></td></tr>
<tr class="separator:afa8ae400d72e4c479e32c38ba10f8398"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a7ef71bdba2a4f83b40dd7fad426207"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d5/dbf/structast__http__auth.html">ast_http_auth</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#a9a7ef71bdba2a4f83b40dd7fad426207">ast_http_get_auth</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers)</td></tr>
<tr class="memdesc:a9a7ef71bdba2a4f83b40dd7fad426207"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get HTTP authentication information from headers.  <a href="#a9a7ef71bdba2a4f83b40dd7fad426207">More...</a><br /></td></tr>
<tr class="separator:a9a7ef71bdba2a4f83b40dd7fad426207"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e7522cd280df6ee043aad7bef980eb9"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#a2e7522cd280df6ee043aad7bef980eb9">ast_http_get_cookies</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers)</td></tr>
<tr class="memdesc:a2e7522cd280df6ee043aad7bef980eb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get cookie from Request headers.  <a href="#a2e7522cd280df6ee043aad7bef980eb9">More...</a><br /></td></tr>
<tr class="separator:a2e7522cd280df6ee043aad7bef980eb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69c4e20e1d1d148576176a43562fa826"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#a69c4e20e1d1d148576176a43562fa826">ast_http_get_json</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers)</td></tr>
<tr class="memdesc:a69c4e20e1d1d148576176a43562fa826"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get JSON from client Request Entity-Body, if content type is application/json.  <a href="#a69c4e20e1d1d148576176a43562fa826">More...</a><br /></td></tr>
<tr class="separator:a69c4e20e1d1d148576176a43562fa826"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac000c497701f197370cbef5aa4c1a92e"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#ac000c497701f197370cbef5aa4c1a92e">ast_http_get_post_vars</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers)</td></tr>
<tr class="memdesc:ac000c497701f197370cbef5aa4c1a92e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get post variables from client Request Entity-Body, if content type is application/x-www-form-urlencoded.  <a href="#ac000c497701f197370cbef5aa4c1a92e">More...</a><br /></td></tr>
<tr class="separator:ac000c497701f197370cbef5aa4c1a92e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a927d764492a7c0d2341ebb35994d9e81"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#a927d764492a7c0d2341ebb35994d9e81">ast_http_header_match</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *expected_name, const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>, const char *expected_value)</td></tr>
<tr class="memdesc:a927d764492a7c0d2341ebb35994d9e81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the header and value match (case insensitive) their associated expected values.  <a href="#a927d764492a7c0d2341ebb35994d9e81">More...</a><br /></td></tr>
<tr class="separator:a927d764492a7c0d2341ebb35994d9e81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20dc0ed36f151f2cfd588ee64b737011"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#a20dc0ed36f151f2cfd588ee64b737011">ast_http_header_match_in</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *expected_name, const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>, const char *expected_value)</td></tr>
<tr class="memdesc:a20dc0ed36f151f2cfd588ee64b737011"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the header name matches the expected header name. If so, then check to see if the value can be located in the expected value.  <a href="#a20dc0ed36f151f2cfd588ee64b737011">More...</a><br /></td></tr>
<tr class="separator:a20dc0ed36f151f2cfd588ee64b737011"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b1e02f7f0b46b21d8b3750d40aff87b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#a1b1e02f7f0b46b21d8b3750d40aff87b">ast_http_header_parse</a> (char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, char **<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, char **<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="memdesc:a1b1e02f7f0b46b21d8b3750d40aff87b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse a header into the given name/value strings.  <a href="#a1b1e02f7f0b46b21d8b3750d40aff87b">More...</a><br /></td></tr>
<tr class="separator:a1b1e02f7f0b46b21d8b3750d40aff87b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa62626630003222102b29b97f18ff94c"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#aa62626630003222102b29b97f18ff94c">ast_http_manid_from_vars</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers) <a class="el" href="../../d4/dd1/compiler_8h.html#a74d759b292a027618339fab3574b9175">attribute_pure</a></td></tr>
<tr class="memdesc:aa62626630003222102b29b97f18ff94c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return manager id, if exist, from request headers.  <a href="#aa62626630003222102b29b97f18ff94c">More...</a><br /></td></tr>
<tr class="separator:aa62626630003222102b29b97f18ff94c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0059c10f2538cfa09f9979d5fefd5638"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#a0059c10f2538cfa09f9979d5fefd5638">ast_http_prefix</a> (char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</td></tr>
<tr class="memdesc:a0059c10f2538cfa09f9979d5fefd5638"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the current prefix.  <a href="#a0059c10f2538cfa09f9979d5fefd5638">More...</a><br /></td></tr>
<tr class="separator:a0059c10f2538cfa09f9979d5fefd5638"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0286838ed2b93e0d77fe9d7af8a37b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#ab0286838ed2b93e0d77fe9d7af8a37b5">ast_http_request_close_on_completion</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser)</td></tr>
<tr class="memdesc:ab0286838ed2b93e0d77fe9d7af8a37b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request the HTTP connection be closed after this HTTP request.  <a href="#ab0286838ed2b93e0d77fe9d7af8a37b5">More...</a><br /></td></tr>
<tr class="separator:ab0286838ed2b93e0d77fe9d7af8a37b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa042c9c6e2344db5e8a8d97683424b3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#aaa042c9c6e2344db5e8a8d97683424b3">ast_http_response_status_line</a> (const char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, const char *<a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a>, int code)</td></tr>
<tr class="memdesc:aaa042c9c6e2344db5e8a8d97683424b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse the http response status line.  <a href="#aaa042c9c6e2344db5e8a8d97683424b3">More...</a><br /></td></tr>
<tr class="separator:aaa042c9c6e2344db5e8a8d97683424b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0448c9f4a66b6ee7994870b187e185b4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#a0448c9f4a66b6ee7994870b187e185b4">ast_http_send</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, enum <a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80ef">ast_http_method</a> <a class="el" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>, int status_code, const char *status_title, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> *http_header, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="el" href="../../da/d7c/utils_2frame_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, int fd, unsigned int static_content)</td></tr>
<tr class="memdesc:a0448c9f4a66b6ee7994870b187e185b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic function for sending HTTP/1.1 response.  <a href="#a0448c9f4a66b6ee7994870b187e185b4">More...</a><br /></td></tr>
<tr class="separator:a0448c9f4a66b6ee7994870b187e185b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac99d56925cf94f8cf3ed0acac52e2d75"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#ac99d56925cf94f8cf3ed0acac52e2d75">ast_http_uri_link</a> (struct <a class="el" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a> *urihandler)</td></tr>
<tr class="memdesc:ac99d56925cf94f8cf3ed0acac52e2d75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a URI handler.  <a href="#ac99d56925cf94f8cf3ed0acac52e2d75">More...</a><br /></td></tr>
<tr class="separator:ac99d56925cf94f8cf3ed0acac52e2d75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33e436ed8aeb33287f1e6cb1c5288a14"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#a33e436ed8aeb33287f1e6cb1c5288a14">ast_http_uri_unlink</a> (struct <a class="el" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a> *urihandler)</td></tr>
<tr class="memdesc:a33e436ed8aeb33287f1e6cb1c5288a14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a URI handler.  <a href="#a33e436ed8aeb33287f1e6cb1c5288a14">More...</a><br /></td></tr>
<tr class="separator:a33e436ed8aeb33287f1e6cb1c5288a14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae05bfd31702ddfd156bd1312ccbf2441"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/http_8h.html#ae05bfd31702ddfd156bd1312ccbf2441">ast_http_uri_unlink_all_with_key</a> (const char *key)</td></tr>
<tr class="memdesc:ae05bfd31702ddfd156bd1312ccbf2441"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister all handlers with matching key.  <a href="#ae05bfd31702ddfd156bd1312ccbf2441">More...</a><br /></td></tr>
<tr class="separator:ae05bfd31702ddfd156bd1312ccbf2441"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Support for Private Asterisk HTTP Servers. </p>
<dl class="section note"><dt>Note</dt><dd>Note: The Asterisk HTTP servers are extremely simple and minimal and only support the "GET" method.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Mark Spencer <a href="#" onclick="location.href='mai'+'lto:'+'mar'+'ks'+'ter'+'@d'+'igi'+'um'+'.co'+'m'; return false;">marks<span style="display: none;">.nosp@m.</span>ter@<span style="display: none;">.nosp@m.</span>digiu<span style="display: none;">.nosp@m.</span>m.co<span style="display: none;">.nosp@m.</span>m</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>In order to have TLS/SSL support, we need the openssl libraries. Still we can decide whether or not to use them by commenting in or out the DO_SSL macro. TLS/SSL support is basically implemented by reading from a config file (currently http.conf) the names of the certificate and cipher to use, and then run ssl_setup() to create an appropriate SSL_CTX (ssl_ctx) If we support multiple domains, presumably we need to read multiple certificates. When we are requested to open a TLS socket, we run make_file_from_fd() on the socket, to do the necessary setup. At the moment the context's name is hardwired in the function, but we can certainly make it into an extra parameter to the function. We declare most of ssl support variables unconditionally, because their number is small and this simplifies the code.</dd>
<dd>
: the ssl-support variables (ssl_ctx, do_ssl, certfile, cipher) and their setup should be moved to a more central place, e.g. asterisk.conf and the source files that processes it. Similarly, ssl_setup() should be run earlier in the startup process so modules have it available. </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../dd/d56/http_8h_source.html">http.h</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a7336d81a706b873bbf44aea94bcd5069"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7336d81a706b873bbf44aea94bcd5069">&#9670;&nbsp;</a></span>ast_http_callback</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* ast_http_callback) (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, const struct <a class="el" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a> *urih, const char *uri, enum <a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80ef">ast_http_method</a> <a class="el" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *get_params, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>HTTP Callbacks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ser</td><td>TCP/TLS session object </td></tr>
    <tr><td class="paramname">urih</td><td>Registered URI handler struct for the URI. </td></tr>
    <tr><td class="paramname">uri</td><td>Remaining request URI path (also with the get_params removed). </td></tr>
    <tr><td class="paramname">method</td><td>enum ast_http_method GET, POST, etc. </td></tr>
    <tr><td class="paramname">get_params</td><td>URI argument list passed with the HTTP request. </td></tr>
    <tr><td class="paramname">headers</td><td>HTTP request header-name/value pair list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Should use the <a class="el" href="../../dd/d56/http_8h.html#a0448c9f4a66b6ee7994870b187e185b4" title="Generic function for sending HTTP/1.1 response. ">ast_http_send()</a> function for sending content allocated with <a class="el" href="../../dd/da2/structast__str.html" title="The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...">ast_str</a> and/or content from an opened file descriptor.</dd></dl>
<p>Status and status text should be sent as arguments to the <a class="el" href="../../dd/d56/http_8h.html#a0448c9f4a66b6ee7994870b187e185b4" title="Generic function for sending HTTP/1.1 response. ">ast_http_send()</a> function to reflect the status of the request (200 or 304, for example). Content length is calculated by <a class="el" href="../../dd/d56/http_8h.html#a0448c9f4a66b6ee7994870b187e185b4" title="Generic function for sending HTTP/1.1 response. ">ast_http_send()</a> automatically.</p>
<p>Static content may be indicated to the <a class="el" href="../../dd/d56/http_8h.html#a0448c9f4a66b6ee7994870b187e185b4" title="Generic function for sending HTTP/1.1 response. ">ast_http_send()</a> function, to indicate that it may be cached.</p>
<p>For a need authentication response, the <a class="el" href="../../dd/d56/http_8h.html#aacbeca1d5a14388e6c2f708ac7a9fffa" title="Send http &quot;401 Unauthorized&quot; response and close socket. ">ast_http_auth()</a> function should be used.</p>
<p>For an error response, the <a class="el" href="../../dd/d56/http_8h.html#ab0f7966324a592e02d53f01e7bb9cc17" title="Send HTTP error message and close socket. ">ast_http_error()</a> function should be used.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Continue and process the next HTTP request. </td></tr>
    <tr><td class="paramname">-1</td><td>Fatal HTTP connection error. Force the HTTP connection closed. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d56/http_8h_source.html#l00097">97</a> of file <a class="el" href="../../dd/d56/http_8h_source.html">http.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a16fb43ed7e6093a9dc96477ba37b80ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16fb43ed7e6093a9dc96477ba37b80ef">&#9670;&nbsp;</a></span>ast_http_method</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80ef">ast_http_method</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>HTTP Request methods known by Asterisk. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a16fb43ed7e6093a9dc96477ba37b80efa8f6ca13b1fe4a9c235071bd548509ea7"></a>AST_HTTP_UNKNOWN&#160;</td><td class="fielddoc"><p>Unknown response </p>
</td></tr>
<tr><td class="fieldname"><a id="a16fb43ed7e6093a9dc96477ba37b80efa74b1cb5c2ecb5e0bd9af5d46a7b78fd2"></a>AST_HTTP_GET&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a16fb43ed7e6093a9dc96477ba37b80efa544b9492daf28b47937772ca54e31c80"></a>AST_HTTP_POST&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a16fb43ed7e6093a9dc96477ba37b80efaf8da4e60a407fb100dd10e20929ea162"></a>AST_HTTP_HEAD&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a16fb43ed7e6093a9dc96477ba37b80efa001bd38674d391df71e468b51ffe50ce"></a>AST_HTTP_PUT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a16fb43ed7e6093a9dc96477ba37b80efa48eee9f380e72e9356c181ec467af41b"></a>AST_HTTP_DELETE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a16fb43ed7e6093a9dc96477ba37b80efaa7118e76cc07d36dec9b2b2f67feafc4"></a>AST_HTTP_OPTIONS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a16fb43ed7e6093a9dc96477ba37b80efa75a3a32958910ac5da248eabad9e2475"></a>AST_HTTP_MAX_METHOD&#160;</td><td class="fielddoc"><p>Last entry in ast_http_method enum </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../dd/d56/http_8h_source.html#l00056">56</a> of file <a class="el" href="../../dd/d56/http_8h_source.html">http.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                     {</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;   <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa8f6ca13b1fe4a9c235071bd548509ea7">AST_HTTP_UNKNOWN</a> = -1,   <span class="comment">/*!&lt; Unknown response */</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;   <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa74b1cb5c2ecb5e0bd9af5d46a7b78fd2">AST_HTTP_GET</a> = 0,</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;   <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa544b9492daf28b47937772ca54e31c80">AST_HTTP_POST</a>,</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;   <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efaf8da4e60a407fb100dd10e20929ea162">AST_HTTP_HEAD</a>,</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;   <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa001bd38674d391df71e468b51ffe50ce">AST_HTTP_PUT</a>,</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;   <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa48eee9f380e72e9356c181ec467af41b">AST_HTTP_DELETE</a>,</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;   <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efaa7118e76cc07d36dec9b2b2f67feafc4">AST_HTTP_OPTIONS</a>,</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;   <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa75a3a32958910ac5da248eabad9e2475">AST_HTTP_MAX_METHOD</a>, <span class="comment">/*!&lt; Last entry in ast_http_method enum */</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;};</div><div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80efa75a3a32958910ac5da248eabad9e2475"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa75a3a32958910ac5da248eabad9e2475">AST_HTTP_MAX_METHOD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00064">http.h:64</a></div></div>
<div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80efa48eee9f380e72e9356c181ec467af41b"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa48eee9f380e72e9356c181ec467af41b">AST_HTTP_DELETE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00062">http.h:62</a></div></div>
<div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80efaa7118e76cc07d36dec9b2b2f67feafc4"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efaa7118e76cc07d36dec9b2b2f67feafc4">AST_HTTP_OPTIONS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00063">http.h:63</a></div></div>
<div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80efa001bd38674d391df71e468b51ffe50ce"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa001bd38674d391df71e468b51ffe50ce">AST_HTTP_PUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00061">http.h:61</a></div></div>
<div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80efa8f6ca13b1fe4a9c235071bd548509ea7"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa8f6ca13b1fe4a9c235071bd548509ea7">AST_HTTP_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00057">http.h:57</a></div></div>
<div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80efa74b1cb5c2ecb5e0bd9af5d46a7b78fd2"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa74b1cb5c2ecb5e0bd9af5d46a7b78fd2">AST_HTTP_GET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00058">http.h:58</a></div></div>
<div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80efaf8da4e60a407fb100dd10e20929ea162"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efaf8da4e60a407fb100dd10e20929ea162">AST_HTTP_HEAD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00060">http.h:60</a></div></div>
<div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80efa544b9492daf28b47937772ca54e31c80"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa544b9492daf28b47937772ca54e31c80">AST_HTTP_POST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00059">http.h:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a656cd4a1dab52abb5e6cd641e064c18f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a656cd4a1dab52abb5e6cd641e064c18f">&#9670;&nbsp;</a></span>ast_get_http_method()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_get_http_method </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80ef">ast_http_method</a>&#160;</td>
          <td class="paramname"><em>method</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return http method name string. </p>
<dl class="section since"><dt>Since</dt><dd>1.8 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00190">190</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dd/d43/http_8c.html#a8db57df0d65cdcb49f817ba20f1addfc">ast_http_methods_text</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l00179">ast_cfhttp_methods_text::text</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00315">add_allow_header()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00491">ast_ari_invoke()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>, and <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00361">handle_options()</a>.</p>
<div class="fragment"><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;{</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dd/d43/http_8c.html#a8db57df0d65cdcb49f817ba20f1addfc">ast_http_methods_text</a>); x++) {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#a8db57df0d65cdcb49f817ba20f1addfc">ast_http_methods_text</a>[x].<a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a> == <a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>) {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dd/d43/http_8c.html#a8db57df0d65cdcb49f817ba20f1addfc">ast_http_methods_text</a>[x].<a class="code" href="../../d8/d9e/structast__cfhttp__methods__text.html#a16343090e80c4472521560f30113d96c">text</a>;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      }</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   }</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="structast__cfhttp__methods__text_html_a16343090e80c4472521560f30113d96c"><div class="ttname"><a href="../../d8/d9e/structast__cfhttp__methods__text.html#a16343090e80c4472521560f30113d96c">ast_cfhttp_methods_text::text</a></div><div class="ttdeci">const char * text</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00179">http.c:179</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a8b44a03925325ceaf2de7b079b1541a1"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a></div><div class="ttdeci">const char * method</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04335">res_pjsip.c:4335</a></div></div>
<div class="ttc" id="http_8c_html_a8db57df0d65cdcb49f817ba20f1addfc"><div class="ttname"><a href="../../dd/d43/http_8c.html#a8db57df0d65cdcb49f817ba20f1addfc">ast_http_methods_text</a></div><div class="ttdeci">static const struct ast_cfhttp_methods_text ast_http_methods_text[]</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aacbeca1d5a14388e6c2f708ac7a9fffa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacbeca1d5a14388e6c2f708ac7a9fffa">&#9670;&nbsp;</a></span>ast_http_auth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d5/dbf/structast__http__auth.html">ast_http_auth</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>realm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned long&#160;</td>
          <td class="paramname"><em>nonce</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned long&#160;</td>
          <td class="paramname"><em>opaque</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send http "401 Unauthorized" response and close socket. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00622">622</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d43/http_8c_source.html#l00567">ast_http_create_response()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l00081">DEFAULT_RESPONSE_HEADER_LENGTH</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;{</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;   <span class="keywordtype">int</span> status_code = 401;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   <span class="keywordtype">char</span> *status_title = <span class="stringliteral">&quot;Unauthorized&quot;</span>;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *http_header_data = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(<a class="code" href="../../dd/d43/http_8c.html#af5a66da7db69b05a371613d80051da9f">DEFAULT_RESPONSE_HEADER_LENGTH</a>);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   <span class="keywordflow">if</span> (http_header_data) {</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;http_header_data,</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                  0,</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                  <span class="stringliteral">&quot;WWW-authenticate: Digest algorithm=MD5, realm=\&quot;%s\&quot;, nonce=\&quot;%08lx\&quot;, qop=\&quot;auth\&quot;, opaque=\&quot;%08lx\&quot;%s\r\n&quot;</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                  <span class="stringliteral">&quot;Content-type: text/html\r\n&quot;</span>,</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                  realm ? realm : <span class="stringliteral">&quot;Asterisk&quot;</span>,</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                  nonce,</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                  opaque,</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                  stale ? <span class="stringliteral">&quot;, stale=true&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;   }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#acf98d4742ea06a06bef5ead3cd8ef0ed">ast_http_create_response</a>(ser,</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                            status_code,</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                            status_title,</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                            http_header_data,</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                            <a class="code" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a>);</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;}</div><div class="ttc" id="app__queue_8c_html_a5633b1433389cec21ade3811bbe9ca5b"><div class="ttname"><a href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a></div><div class="ttdeci">char * text</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/app__queue_8c_source.html#l01508">app_queue.c:1508</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="http_8c_html_acf98d4742ea06a06bef5ead3cd8ef0ed"><div class="ttname"><a href="../../dd/d43/http_8c.html#acf98d4742ea06a06bef5ead3cd8ef0ed">ast_http_create_response</a></div><div class="ttdeci">void ast_http_create_response(struct ast_tcptls_session_instance *ser, int status_code, const char *status_title, struct ast_str *http_header_data, const char *text)</div><div class="ttdoc">Creates and sends a formatted http response message. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00567">http.c:567</a></div></div>
<div class="ttc" id="http_8c_html_af5a66da7db69b05a371613d80051da9f"><div class="ttname"><a href="../../dd/d43/http_8c.html#af5a66da7db69b05a371613d80051da9f">DEFAULT_RESPONSE_HEADER_LENGTH</a></div><div class="ttdeci">#define DEFAULT_RESPONSE_HEADER_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00081">http.c:81</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6158887813b6c700d9056b4daea05df0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6158887813b6c700d9056b4daea05df0">&#9670;&nbsp;</a></span>ast_http_body_discard()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_http_body_discard </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read and discard any unread HTTP request body. </p>
<dl class="section since"><dt>Since</dt><dd>12.4.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ser</td><td>HTTP TCP/TLS session object.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01120">1120</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00451">http_worker_private_data::body_length</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00453">http_worker_private_data::flags</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01069">http_body_check_chunk_sync()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01100">http_body_discard_chunk_trailer_headers()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00964">http_body_discard_contents()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01041">http_body_get_chunk_length()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00443">HTTP_FLAG_BODY_READ</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00445">HTTP_FLAG_CLOSE_ON_COMPLETION</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00441">HTTP_FLAG_HAS_BODY</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00162">ast_tcptls_session_instance::private_data</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02559">request()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l00456">ast_http_send()</a>, and <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l00790">ast_websocket_uri_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;{</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a> *<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a>;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;   request = ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">private_data</a>;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920">HTTP_FLAG_HAS_BODY</a>)</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      || <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88">HTTP_FLAG_BODY_READ</a>)) {</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      <span class="comment">/* No body to read or it has already been read. */</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;   }</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88">HTTP_FLAG_BODY_READ</a>);</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;HTTP discarding unused request body\n&quot;</span>);</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#a7c4c998980a0428c51179a4694431068">body_length</a> != 0);</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;   <span class="keywordflow">if</span> (0 &lt; request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#a7c4c998980a0428c51179a4694431068">body_length</a>) {</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#a74e0dc6d3ec99536cb67408015622210">http_body_discard_contents</a>(ser, request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#a7c4c998980a0428c51179a4694431068">body_length</a>, <span class="stringliteral">&quot;body&quot;</span>)) {</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>);</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;      }</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;   }</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;   <span class="comment">/* parse chunked-body */</span></div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;      <span class="keywordtype">int</span> length;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;      length = <a class="code" href="../../dd/d43/http_8c.html#af79aa289c3929912006d5757d19d6136">http_body_get_chunk_length</a>(ser);</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;      <span class="keywordflow">if</span> (length &lt; 0) {</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>);</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      }</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      <span class="keywordflow">if</span> (length == 0) {</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;         <span class="comment">/* parsed last-chunk */</span></div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      }</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#a74e0dc6d3ec99536cb67408015622210">http_body_discard_contents</a>(ser, length, <span class="stringliteral">&quot;chunk-data&quot;</span>)</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;         || <a class="code" href="../../dd/d43/http_8c.html#a8cab07b884d4c0d4e380ca603478ddaf">http_body_check_chunk_sync</a>(ser)) {</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>);</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      }</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;   }</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;   <span class="comment">/* Read and discard any trailer entity-header lines. */</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#a0407b8b04eb198ad0b20136d3ec4fa6d">http_body_discard_chunk_trailer_headers</a>(ser)) {</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>);</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;   }</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;}</div><div class="ttc" id="structhttp__worker__private__data_html_a7c4c998980a0428c51179a4694431068"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html#a7c4c998980a0428c51179a4694431068">http_worker_private_data::body_length</a></div><div class="ttdeci">int body_length</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00451">http.c:451</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920">HTTP_FLAG_HAS_BODY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00441">http.c:441</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88">HTTP_FLAG_BODY_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00443">http.c:443</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_ad517770dac2061381b2008850ff12e6c"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">ast_tcptls_session_instance::private_data</a></div><div class="ttdeci">void * private_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00162">tcptls.h:162</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">http_worker_private_data::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00453">http.c:453</a></div></div>
<div class="ttc" id="http_8c_html_af79aa289c3929912006d5757d19d6136"><div class="ttname"><a href="../../dd/d43/http_8c.html#af79aa289c3929912006d5757d19d6136">http_body_get_chunk_length</a></div><div class="ttdeci">static int http_body_get_chunk_length(struct ast_tcptls_session_instance *ser)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01041">http.c:1041</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a4e2e6fb7d874f0d2deddd2ecfc8afb32"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a></div><div class="ttdeci">static int request(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02559">chan_pjsip.c:2559</a></div></div>
<div class="ttc" id="http_8c_html_a0407b8b04eb198ad0b20136d3ec4fa6d"><div class="ttname"><a href="../../dd/d43/http_8c.html#a0407b8b04eb198ad0b20136d3ec4fa6d">http_body_discard_chunk_trailer_headers</a></div><div class="ttdeci">static int http_body_discard_chunk_trailer_headers(struct ast_tcptls_session_instance *ser)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01100">http.c:1100</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00445">http.c:445</a></div></div>
<div class="ttc" id="http_8c_html_a74e0dc6d3ec99536cb67408015622210"><div class="ttname"><a href="../../dd/d43/http_8c.html#a74e0dc6d3ec99536cb67408015622210">http_body_discard_contents</a></div><div class="ttdeci">static int http_body_discard_contents(struct ast_tcptls_session_instance *ser, int length, const char *what_getting)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00964">http.c:964</a></div></div>
<div class="ttc" id="http_8c_html_a8cab07b884d4c0d4e380ca603478ddaf"><div class="ttname"><a href="../../dd/d43/http_8c.html#a8cab07b884d4c0d4e380ca603478ddaf">http_body_check_chunk_sync</a></div><div class="ttdeci">static int http_body_check_chunk_sync(struct ast_tcptls_session_instance *ser)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01069">http.c:1069</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00449">http.c:449</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af220ac7e6b4ecb8be48359c18e10adaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af220ac7e6b4ecb8be48359c18e10adaa">&#9670;&nbsp;</a></span>ast_http_body_read_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_http_body_read_status </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>read_success</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the body read success status. </p>
<dl class="section since"><dt>Since</dt><dd>12.4.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ser</td><td>HTTP TCP/TLS session object. </td></tr>
    <tr><td class="paramname">read_success</td><td>TRUE if body was read successfully.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00899">899</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00453">http_worker_private_data::flags</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00443">HTTP_FLAG_BODY_READ</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00445">HTTP_FLAG_CLOSE_ON_COMPLETION</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00441">HTTP_FLAG_HAS_BODY</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00162">ast_tcptls_session_instance::private_data</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02559">request()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dc9/res__http__post_8c_source.html#l00323">http_post_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;{</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a> *<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a>;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;   request = ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">private_data</a>;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920">HTTP_FLAG_HAS_BODY</a>)</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      || <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88">HTTP_FLAG_BODY_READ</a>)) {</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      <span class="comment">/* No body to read. */</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;   }</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88">HTTP_FLAG_BODY_READ</a>);</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;   <span class="keywordflow">if</span> (!read_success) {</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>);</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;   }</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;}</div><div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920">HTTP_FLAG_HAS_BODY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00441">http.c:441</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88">HTTP_FLAG_BODY_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00443">http.c:443</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_ad517770dac2061381b2008850ff12e6c"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">ast_tcptls_session_instance::private_data</a></div><div class="ttdeci">void * private_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00162">tcptls.h:162</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">http_worker_private_data::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00453">http.c:453</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a4e2e6fb7d874f0d2deddd2ecfc8afb32"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a></div><div class="ttdeci">static int request(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02559">chan_pjsip.c:2559</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00445">http.c:445</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00449">http.c:449</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acf98d4742ea06a06bef5ead3cd8ef0ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf98d4742ea06a06bef5ead3cd8ef0ed">&#9670;&nbsp;</a></span>ast_http_create_response()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_http_create_response </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>status_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>status_title</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> *&#160;</td>
          <td class="paramname"><em>http_header_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates and sends a formatted http response message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ser</td><td>TCP/TLS session object </td></tr>
    <tr><td class="paramname">status_code</td><td>HTTP response code (200/401/403/404/500) </td></tr>
    <tr><td class="paramname">status_title</td><td>English equivalent to the status_code parameter </td></tr>
    <tr><td class="paramname">http_header_data</td><td>The formatted text to use in the http header </td></tr>
    <tr><td class="paramname">text</td><td>Additional informational text to use in the response</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Function constructs response headers from the status_code, status_title and http_header_data parameters.</dd></dl>
<p>The response body is created as HTML content, from the status_code, status_title, and the text parameters.</p>
<p>The http_header_data parameter will be freed as a result of calling function.</p>
<dl class="section since"><dt>Since</dt><dd>13.2.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00567">567</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00456">ast_http_send()</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00057">AST_HTTP_UNKNOWN</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00839">ast_tcptls_close_session_file()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00718">ast_xml_escape()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00104">http_server_name</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00092">INITIAL_RESPONSE_BODY_BUFFER</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00079">MAX_SERVER_NAME_LENGTH</a>, and <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00033">out</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l00622">ast_http_auth()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l00648">ast_http_error()</a>.</p>
<div class="fragment"><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;{</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <span class="keywordtype">char</span> server_name[<a class="code" href="../../dd/d43/http_8c.html#af5c7bcd09f0d5f4bb9e09bd401130b95">MAX_SERVER_NAME_LENGTH</a>];</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *server_address = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(<a class="code" href="../../dd/d43/http_8c.html#af5c7bcd09f0d5f4bb9e09bd401130b95">MAX_SERVER_NAME_LENGTH</a>);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a> = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(<a class="code" href="../../dd/d43/http_8c.html#a35f98eb496f88107d8571d3abbe9ef5f">INITIAL_RESPONSE_BODY_BUFFER</a>);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   <span class="keywordflow">if</span> (!http_header_data || !server_address || !out) {</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(http_header_data);</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(server_address);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(out);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keywordflow">if</span> (ser) {</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;HTTP closing session. OOM.\n&quot;</span>);</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;         <a class="code" href="../../d4/ddf/tcptls_8h.html#adea645492f53ec11186b84eaf85e14d9">ast_tcptls_close_session_file</a>(ser);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      }</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;   }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   <span class="keywordflow">if</span>(!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../dd/d43/http_8c.html#a5086e142ada070c22242a51c58f3da4a">http_server_name</a>)) {</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a89e629b7a1e5ab2c19c2ea30af769aa9">ast_xml_escape</a>(<a class="code" href="../../dd/d43/http_8c.html#a5086e142ada070c22242a51c58f3da4a">http_server_name</a>, server_name, <span class="keyword">sizeof</span>(server_name));</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;server_address,</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                   0,</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                   <span class="stringliteral">&quot;&lt;address&gt;%s&lt;/address&gt;\r\n&quot;</span>,</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                   server_name);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;out,</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;               0,</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;               <span class="stringliteral">&quot;&lt;!DOCTYPE HTML PUBLIC \&quot;-//IETF//DTD HTML 2.0//EN\&quot;&gt;\r\n&quot;</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;               <span class="stringliteral">&quot;&lt;html&gt;&lt;head&gt;\r\n&quot;</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;               <span class="stringliteral">&quot;&lt;title&gt;%d %s&lt;/title&gt;\r\n&quot;</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;               <span class="stringliteral">&quot;&lt;/head&gt;&lt;body&gt;\r\n&quot;</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;               <span class="stringliteral">&quot;&lt;h1&gt;%s&lt;/h1&gt;\r\n&quot;</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;               <span class="stringliteral">&quot;&lt;p&gt;%s&lt;/p&gt;\r\n&quot;</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;               <span class="stringliteral">&quot;&lt;hr /&gt;\r\n&quot;</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;               <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;               <span class="stringliteral">&quot;&lt;/body&gt;&lt;/html&gt;\r\n&quot;</span>,</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;               status_code,</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;               status_title,</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;               status_title,</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;               <a class="code" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a> ? <a class="code" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(server_address));</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(server_address);</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#a0448c9f4a66b6ee7994870b187e185b4">ast_http_send</a>(ser,</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                 <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa8f6ca13b1fe4a9c235071bd548509ea7">AST_HTTP_UNKNOWN</a>,</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                 status_code,</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                 status_title,</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                 http_header_data,</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                 out,</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                 0,</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                 0);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;}</div><div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="http_8c_html_a35f98eb496f88107d8571d3abbe9ef5f"><div class="ttname"><a href="../../dd/d43/http_8c.html#a35f98eb496f88107d8571d3abbe9ef5f">INITIAL_RESPONSE_BODY_BUFFER</a></div><div class="ttdeci">#define INITIAL_RESPONSE_BODY_BUFFER</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00092">http.c:92</a></div></div>
<div class="ttc" id="app__queue_8c_html_a5633b1433389cec21ade3811bbe9ca5b"><div class="ttname"><a href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a></div><div class="ttdeci">char * text</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/app__queue_8c_source.html#l01508">app_queue.c:1508</a></div></div>
<div class="ttc" id="utils_8h_html_a89e629b7a1e5ab2c19c2ea30af769aa9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a89e629b7a1e5ab2c19c2ea30af769aa9">ast_xml_escape</a></div><div class="ttdeci">int ast_xml_escape(const char *string, char *outbuf, size_t buflen)</div><div class="ttdoc">Escape reserved characters for use in XML. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00718">main/utils.c:718</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="http_8c_html_af5c7bcd09f0d5f4bb9e09bd401130b95"><div class="ttname"><a href="../../dd/d43/http_8c.html#af5c7bcd09f0d5f4bb9e09bd401130b95">MAX_SERVER_NAME_LENGTH</a></div><div class="ttdeci">#define MAX_SERVER_NAME_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00079">http.c:79</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80efa8f6ca13b1fe4a9c235071bd548509ea7"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa8f6ca13b1fe4a9c235071bd548509ea7">AST_HTTP_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00057">http.h:57</a></div></div>
<div class="ttc" id="http_8c_html_a5086e142ada070c22242a51c58f3da4a"><div class="ttname"><a href="../../dd/d43/http_8c.html#a5086e142ada070c22242a51c58f3da4a">http_server_name</a></div><div class="ttdeci">static char http_server_name[MAX_SERVER_NAME_LENGTH]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00104">http.c:104</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="http_8c_html_a0448c9f4a66b6ee7994870b187e185b4"><div class="ttname"><a href="../../dd/d43/http_8c.html#a0448c9f4a66b6ee7994870b187e185b4">ast_http_send</a></div><div class="ttdeci">void ast_http_send(struct ast_tcptls_session_instance *ser, enum ast_http_method method, int status_code, const char *status_title, struct ast_str *http_header, struct ast_str *out, int fd, unsigned int static_content)</div><div class="ttdoc">Generic function for sending HTTP/1.1 response. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00456">http.c:456</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a48bc11919b2752df9d14ce89557cfb25"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00033">utils/frame.c:33</a></div></div>
<div class="ttc" id="tcptls_8h_html_adea645492f53ec11186b84eaf85e14d9"><div class="ttname"><a href="../../d4/ddf/tcptls_8h.html#adea645492f53ec11186b84eaf85e14d9">ast_tcptls_close_session_file</a></div><div class="ttdeci">void ast_tcptls_close_session_file(struct ast_tcptls_session_instance *tcptls_session)</div><div class="ttdoc">Closes a tcptls session instance&amp;#39;s file and/or file descriptor. The tcptls_session will be set to NUL...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9b/tcptls_8c_source.html#l00839">tcptls.c:839</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab0f7966324a592e02d53f01e7bb9cc17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0f7966324a592e02d53f01e7bb9cc17">&#9670;&nbsp;</a></span>ast_http_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_http_error </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>title</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send HTTP error message and close socket. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00648">648</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d43/http_8c_source.html#l00567">ast_http_create_response()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l00081">DEFAULT_RESPONSE_HEADER_LENGTH</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00885">ast_ari_callback()</a>, <a class="el" href="../../d6/d87/res__ari__events_8c_source.html#l00055">ast_ari_events_event_websocket_ws_attempted_cb()</a>, <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l00790">ast_websocket_uri_cb()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>, <a class="el" href="../../dd/df4/resource__events_8c_source.html#l00339">event_session_allocation_error_handler()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07907">generic_http_callback()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01401">handle_uri()</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00091">http_callback()</a>, <a class="el" href="../../d6/dc9/res__http__post_8c_source.html#l00323">http_post_callback()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01757">http_request_headers_get()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00871">http_request_tracking_setup()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01937">httpd_helper_thread()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01839">httpd_process_request()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00368">httpstatus_callback()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00240">static_callback()</a>, and <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l00777">websocket_bad_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;{</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *http_header_data = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(<a class="code" href="../../dd/d43/http_8c.html#af5a66da7db69b05a371613d80051da9f">DEFAULT_RESPONSE_HEADER_LENGTH</a>);</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   <span class="keywordflow">if</span> (http_header_data) {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;http_header_data, 0, <span class="stringliteral">&quot;Content-type: text/html\r\n&quot;</span>);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;   }</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#acf98d4742ea06a06bef5ead3cd8ef0ed">ast_http_create_response</a>(ser,</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                            status_code,</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                            status_title,</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                            http_header_data,</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                            <a class="code" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a>);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;}</div><div class="ttc" id="app__queue_8c_html_a5633b1433389cec21ade3811bbe9ca5b"><div class="ttname"><a href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a></div><div class="ttdeci">char * text</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/app__queue_8c_source.html#l01508">app_queue.c:1508</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="http_8c_html_acf98d4742ea06a06bef5ead3cd8ef0ed"><div class="ttname"><a href="../../dd/d43/http_8c.html#acf98d4742ea06a06bef5ead3cd8ef0ed">ast_http_create_response</a></div><div class="ttdeci">void ast_http_create_response(struct ast_tcptls_session_instance *ser, int status_code, const char *status_title, struct ast_str *http_header_data, const char *text)</div><div class="ttdoc">Creates and sends a formatted http response message. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00567">http.c:567</a></div></div>
<div class="ttc" id="http_8c_html_af5a66da7db69b05a371613d80051da9f"><div class="ttname"><a href="../../dd/d43/http_8c.html#af5a66da7db69b05a371613d80051da9f">DEFAULT_RESPONSE_HEADER_LENGTH</a></div><div class="ttdeci">#define DEFAULT_RESPONSE_HEADER_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00081">http.c:81</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afa8ae400d72e4c479e32c38ba10f8398"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa8ae400d72e4c479e32c38ba10f8398">&#9670;&nbsp;</a></span>ast_http_ftype2mtype()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_http_ftype2mtype </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>ftype</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return mime type based on extension. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ftype</td><td>filename extension </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>String containing associated MIME type </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.8 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00203">203</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00147">ext</a>, <a class="el" href="../../dd/d43/http_8c.html#ac966dd481c59b05f2c113dc4365d72f6">mimetypes</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/de9/res__phoneprov_8c_source.html#l00580">build_profile()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l00240">static_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;{</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   <span class="keywordflow">if</span> (ftype) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dd/d43/http_8c.html#ac966dd481c59b05f2c113dc4365d72f6">mimetypes</a>); x++) {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(ftype, <a class="code" href="../../dd/d43/http_8c.html#ac966dd481c59b05f2c113dc4365d72f6">mimetypes</a>[x].<a class="code" href="../../dd/d43/http_8c.html#af9b32121c4ad80b0887a3d73fd24de5f">ext</a>)) {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dd/d43/http_8c.html#ac966dd481c59b05f2c113dc4365d72f6">mimetypes</a>[x].mtype;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;         }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      }</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   }</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div><div class="ttc" id="http_8c_html_ac966dd481c59b05f2c113dc4365d72f6"><div class="ttname"><a href="../../dd/d43/http_8c.html#ac966dd481c59b05f2c113dc4365d72f6">mimetypes</a></div><div class="ttdeci">static struct @395 mimetypes[]</div><div class="ttdoc">Limit the kinds of files we&amp;#39;re willing to serve up. </div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="http_8c_html_af9b32121c4ad80b0887a3d73fd24de5f"><div class="ttname"><a href="../../dd/d43/http_8c.html#af9b32121c4ad80b0887a3d73fd24de5f">ext</a></div><div class="ttdeci">const char * ext</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00147">http.c:147</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9a7ef71bdba2a4f83b40dd7fad426207"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a7ef71bdba2a4f83b40dd7fad426207">&#9670;&nbsp;</a></span>ast_http_get_auth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d5/dbf/structast__http__auth.html">ast_http_auth</a>* ast_http_get_auth </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get HTTP authentication information from headers. </p>
<p>The returned object is AO2 managed, so clean up with <a class="el" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">headers</td><td>HTTP request headers. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>HTTP auth structure. </dd>
<dd>
<code>NULL</code> if no supported HTTP auth headers present. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01579">1579</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00294">ast_base64decode()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00094">ast_begins_with()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01545">auth_create()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00078">base64</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01577">BASIC_LEN</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01576">BASIC_PREFIX</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00241">LOG_DEBUG</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00077">password</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00848">authenticate_user()</a>, and <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00593">http_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;{</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;   <span class="keywordflow">for</span> (v = headers; v; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/d1f/main_2utils_8c.html#a094cd85754f67592588ab5a0636cf0ea">base64</a>;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;      <span class="keywordtype">char</span> decoded[256] = {};</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;      <span class="keywordtype">char</span> *username;</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a>;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;      <span class="keywordtype">int</span> cnt;</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* AST_DEVMODE */</span><span class="preprocessor"></span></div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;      <span class="keywordflow">if</span> (strcasecmp(<span class="stringliteral">&quot;Authorization&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>) != 0) {</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;      }</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#ac51fa66c90ce950b248c9ff3e8c4e453">ast_begins_with</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <a class="code" href="../../dd/d43/http_8c.html#a4905fca3498c74da82b5726e68587f40">BASIC_PREFIX</a>)) {</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>,</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;            <span class="stringliteral">&quot;Unsupported Authorization scheme\n&quot;</span>);</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;      }</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;      <span class="comment">/* Basic auth header parsing. RFC 2617, section 2.</span></div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;<span class="comment">       *   credentials = &quot;Basic&quot; basic-credentials</span></div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;<span class="comment">       *   basic-credentials = base64-user-pass</span></div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;<span class="comment">       *   base64-user-pass  = &lt;base64 encoding of user-pass,</span></div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;<span class="comment">       *                        except not limited to 76 char/line&gt;</span></div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;<span class="comment">       *   user-pass   = userid &quot;:&quot; password</span></div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      base64 = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a> + <a class="code" href="../../dd/d43/http_8c.html#ad599c720bbdc2219933755c4a4364cbe">BASIC_LEN</a>;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      <span class="comment">/* This will truncate &quot;userid:password&quot; lines to</span></div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;<span class="comment">       * sizeof(decoded). The array is long enough that this shouldn&#39;t</span></div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;<span class="comment">       * be a problem */</span></div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;      cnt =</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* AST_DEVMODE */</span><span class="preprocessor"></span></div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1e7e06bd20719ecfd58b67f230780ffa">ast_base64decode</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)decoded, base64,</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;         <span class="keyword">sizeof</span>(decoded) - 1);</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(cnt &lt; <span class="keyword">sizeof</span>(decoded));</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;      <span class="comment">/* Split the string at the colon */</span></div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;      password = decoded;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      username = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;password, <span class="stringliteral">&quot;:&quot;</span>);</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;      <span class="keywordflow">if</span> (!password) {</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid Authorization header\n&quot;</span>);</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;      }</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/d43/http_8c.html#a1af65cc256b1c374d1f42ff2cb85a4e5">auth_create</a>(username, password);</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;   }</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_a6ff63e8955665c4a58b1598f2b07c51a"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a></div><div class="ttdeci">#define LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00241">logger.h:241</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_ab4fdb206838f2974bd15fc2ca1e9d366"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a></div><div class="ttdeci">static struct ast_str * password</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00077">cdr_mysql.c:77</a></div></div>
<div class="ttc" id="utils_8h_html_a1e7e06bd20719ecfd58b67f230780ffa"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1e7e06bd20719ecfd58b67f230780ffa">ast_base64decode</a></div><div class="ttdeci">int ast_base64decode(unsigned char *dst, const char *src, int max)</div><div class="ttdoc">Decode data from base64. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00294">main/utils.c:294</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="http_8c_html_ad599c720bbdc2219933755c4a4364cbe"><div class="ttname"><a href="../../dd/d43/http_8c.html#ad599c720bbdc2219933755c4a4364cbe">BASIC_LEN</a></div><div class="ttdeci">#define BASIC_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01577">http.c:1577</a></div></div>
<div class="ttc" id="http_8c_html_a1af65cc256b1c374d1f42ff2cb85a4e5"><div class="ttname"><a href="../../dd/d43/http_8c.html#a1af65cc256b1c374d1f42ff2cb85a4e5">auth_create</a></div><div class="ttdeci">static struct ast_http_auth * auth_create(const char *userid, const char *password)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01545">http.c:1545</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="strings_8h_html_ac51fa66c90ce950b248c9ff3e8c4e453"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac51fa66c90ce950b248c9ff3e8c4e453">ast_begins_with</a></div><div class="ttdeci">static int force_inline attribute_pure ast_begins_with(const char *str, const char *prefix)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00094">strings.h:94</a></div></div>
<div class="ttc" id="http_8c_html_a4905fca3498c74da82b5726e68587f40"><div class="ttname"><a href="../../dd/d43/http_8c.html#a4905fca3498c74da82b5726e68587f40">BASIC_PREFIX</a></div><div class="ttdeci">#define BASIC_PREFIX</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01576">http.c:1576</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a094cd85754f67592588ab5a0636cf0ea"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a094cd85754f67592588ab5a0636cf0ea">base64</a></div><div class="ttdeci">static char base64[64]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00078">main/utils.c:78</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2e7522cd280df6ee043aad7bef980eb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e7522cd280df6ee043aad7bef980eb9">&#9670;&nbsp;</a></span>ast_http_get_cookies()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a>* ast_http_get_cookies </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get cookie from Request headers. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01532">1532</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01263">ast_variables_destroy()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01498">parse_cookies()</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l00217">ast_http_manid_from_vars()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l00368">httpstatus_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;{</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v, *cookies = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;   <span class="keywordflow">for</span> (v = headers; v; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;Cookie&quot;</span>)) {</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;         <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(cookies);</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;         cookies = <a class="code" href="../../dd/d43/http_8c.html#a51d0195b6167cb6e4661f6aec72382e9">parse_cookies</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;      }</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;   }</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;   <span class="keywordflow">return</span> cookies;</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="http_8c_html_a51d0195b6167cb6e4661f6aec72382e9"><div class="ttname"><a href="../../dd/d43/http_8c.html#a51d0195b6167cb6e4661f6aec72382e9">parse_cookies</a></div><div class="ttdeci">static struct ast_variable * parse_cookies(const char *cookies)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01498">http.c:1498</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a69c4e20e1d1d148576176a43562fa826"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69c4e20e1d1d148576176a43562fa826">&#9670;&nbsp;</a></span>ast_http_get_json()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a>* ast_http_get_json </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get JSON from client Request Entity-Body, if content type is application/json. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ser</td><td>TCP/TLS session object </td></tr>
    <tr><td class="paramname">headers</td><td>List of HTTP headers </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Parsed JSON content body </dd>
<dd>
<code>NULL</code> on error, if no content, or if different content type. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01314">1314</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01181">ast_http_get_contents()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00564">ast_json_load_buf()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00761">get_content_type()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00885">ast_ari_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;{</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;   <span class="keywordtype">int</span> content_length = 0;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *body;</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../dd/d43/http_8c.html#ad06499f4d8764c97a4cd7750b8e199f3">get_content_type</a>(headers), <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;   <span class="comment">/* Use errno to distinguish errors from no body */</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;   <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = 0;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) || strcasecmp(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <span class="stringliteral">&quot;application/json&quot;</span>)) {</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;      <span class="comment">/* Content type is not JSON.  Don&#39;t read the body. */</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;   }</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> = <a class="code" href="../../dd/d43/http_8c.html#a6f10cf7bc3c66a48184c2d722330c7e1">ast_http_get_contents</a>(&amp;content_length, ser, headers);</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> || !content_length) {</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;<span class="comment">       * errno already set</span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;<span class="comment">       * or it is not an error to have zero content</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;   }</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;   body = <a class="code" href="../../d4/d05/json_8h.html#aa1ad8d1561851ac6a4e97e82025266e4">ast_json_load_buf</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, content_length, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;   <span class="keywordflow">if</span> (!body) {</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;      <span class="comment">/* Failed to parse JSON; treat as an I/O error */</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = EIO;</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;   }</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;   <span class="keywordflow">return</span> body;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="http_8c_html_a6f10cf7bc3c66a48184c2d722330c7e1"><div class="ttname"><a href="../../dd/d43/http_8c.html#a6f10cf7bc3c66a48184c2d722330c7e1">ast_http_get_contents</a></div><div class="ttdeci">static char * ast_http_get_contents(int *return_length, struct ast_tcptls_session_instance *ser, struct ast_variable *headers)</div><div class="ttdoc">Returns the contents (body) of the HTTP request. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01181">http.c:1181</a></div></div>
<div class="ttc" id="json_8h_html_aa1ad8d1561851ac6a4e97e82025266e4"><div class="ttname"><a href="../../d4/d05/json_8h.html#aa1ad8d1561851ac6a4e97e82025266e4">ast_json_load_buf</a></div><div class="ttdeci">struct ast_json * ast_json_load_buf(const char *buffer, size_t buflen, struct ast_json_error *error)</div><div class="ttdoc">Parse buffer with known length into a JSON object or array. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00564">json.c:564</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="http_8c_html_ad06499f4d8764c97a4cd7750b8e199f3"><div class="ttname"><a href="../../dd/d43/http_8c.html#ad06499f4d8764c97a4cd7750b8e199f3">get_content_type</a></div><div class="ttdeci">static char * get_content_type(struct ast_variable *headers)</div><div class="ttdoc">Retrieves the content type specified in the &quot;Content-Type&quot; header. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00761">http.c:761</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac000c497701f197370cbef5aa4c1a92e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac000c497701f197370cbef5aa4c1a92e">&#9670;&nbsp;</a></span>ast_http_get_post_vars()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a>* ast_http_get_post_vars </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get post variables from client Request Entity-Body, if content type is application/x-www-form-urlencoded. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ser</td><td>TCP/TLS session object </td></tr>
    <tr><td class="paramname">headers</td><td>List of HTTP headers </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>List of variables within the POST body </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Since returned list is malloc'd, list should be free'd by the calling function </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.8 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01353">1353</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01181">ast_http_get_contents()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00616">ast_uri_decode()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00574">ast_uri_http_legacy</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">ast_variable_new</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00761">get_content_type()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>, <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>, and <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00614">var</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00885">ast_ari_callback()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l07907">generic_http_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;{</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;   <span class="keywordtype">int</span> content_length = 0;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v, *post_vars=<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *prev = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>, *<a class="code" href="../../d5/d85/structval.html">val</a>;</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../dd/d43/http_8c.html#ad06499f4d8764c97a4cd7750b8e199f3">get_content_type</a>(headers), <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;   <span class="comment">/* Use errno to distinguish errors from no params */</span></div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;   <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = 0;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) ||</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;       strcasecmp(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <span class="stringliteral">&quot;application/x-www-form-urlencoded&quot;</span>)) {</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;      <span class="comment">/* Content type is not form data.  Don&#39;t read the body. */</span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;   }</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> = <a class="code" href="../../dd/d43/http_8c.html#a6f10cf7bc3c66a48184c2d722330c7e1">ast_http_get_contents</a>(&amp;content_length, ser, headers);</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> || !content_length) {</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="comment">       * errno already set</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;<span class="comment">       * or it is not an error to have zero content</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;   }</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;   <span class="keywordflow">while</span> ((val = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="stringliteral">&quot;&amp;&quot;</span>))) {</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;      var = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;val, <span class="stringliteral">&quot;=&quot;</span>);</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;      <span class="keywordflow">if</span> (val) {</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ad9d3c7c4cc262a1205c833a95fa65a6d">ast_uri_decode</a>(val, <a class="code" href="../../d5/d60/utils_8h.html#af7cc8e3b6b28b9315c312edb79af2f59">ast_uri_http_legacy</a>);</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      } <span class="keywordflow">else</span>  {</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;         val = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;      }</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ad9d3c7c4cc262a1205c833a95fa65a6d">ast_uri_decode</a>(var, <a class="code" href="../../d5/d60/utils_8h.html#af7cc8e3b6b28b9315c312edb79af2f59">ast_uri_http_legacy</a>);</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;      <span class="keywordflow">if</span> ((v = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(var, val, <span class="stringliteral">&quot;&quot;</span>))) {</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;         <span class="keywordflow">if</span> (post_vars) {</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;            prev-&gt;next = v;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;            post_vars = v;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;         }</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;         prev = v;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;      }</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;   }</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;   <span class="keywordflow">return</span> post_vars;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;}</div><div class="ttc" id="utils_8h_html_ad9d3c7c4cc262a1205c833a95fa65a6d"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ad9d3c7c4cc262a1205c833a95fa65a6d">ast_uri_decode</a></div><div class="ttdeci">void ast_uri_decode(char *s, struct ast_flags spec)</div><div class="ttdoc">Decode URI, URN, URL (overwrite string) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00616">main/utils.c:616</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="http_8c_html_a6f10cf7bc3c66a48184c2d722330c7e1"><div class="ttname"><a href="../../dd/d43/http_8c.html#a6f10cf7bc3c66a48184c2d722330c7e1">ast_http_get_contents</a></div><div class="ttdeci">static char * ast_http_get_contents(int *return_length, struct ast_tcptls_session_instance *ser, struct ast_variable *headers)</div><div class="ttdoc">Returns the contents (body) of the HTTP request. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01181">http.c:1181</a></div></div>
<div class="ttc" id="structval_html"><div class="ttname"><a href="../../d5/d85/structval.html">val</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd1/ast__expr2_8c_source.html#l00325">ast_expr2.c:325</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="http_8c_html_ad06499f4d8764c97a4cd7750b8e199f3"><div class="ttname"><a href="../../dd/d43/http_8c.html#ad06499f4d8764c97a4cd7750b8e199f3">get_content_type</a></div><div class="ttdeci">static char * get_content_type(struct ast_variable *headers)</div><div class="ttdoc">Retrieves the content type specified in the &quot;Content-Type&quot; header. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00761">http.c:761</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a66581086d34dfe7ea86b0644bacef239"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a></div><div class="ttdeci">#define ast_variable_new(name, value, filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">include/asterisk/config.h:914</a></div></div>
<div class="ttc" id="utils_8h_html_af7cc8e3b6b28b9315c312edb79af2f59"><div class="ttname"><a href="../../d5/d60/utils_8h.html#af7cc8e3b6b28b9315c312edb79af2f59">ast_uri_http_legacy</a></div><div class="ttdeci">const struct ast_flags ast_uri_http_legacy</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00574">main/utils.c:574</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a927d764492a7c0d2341ebb35994d9e81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a927d764492a7c0d2341ebb35994d9e81">&#9670;&nbsp;</a></span>ast_http_header_match()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_http_header_match </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>expected_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>expected_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if the header and value match (case insensitive) their associated expected values. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>header name to check </td></tr>
    <tr><td class="paramname">expected_name</td><td>the expected name of the header </td></tr>
    <tr><td class="paramname">value</td><td>header value to check </td></tr>
    <tr><td class="paramname">expected_value</td><td>the expected value of the header </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if the name and expected name do not match </dd>
<dd>
-1 if the value and expected value do not match </dd>
<dd>
1 if the both the name and value match their expected value </dd></dl>
<dl class="section since"><dt>Since</dt><dd>13 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01710">1710</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l01300">websocket_client_handshake_get_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;{</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;   <span class="keywordflow">if</span> (strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, expected_name)) {</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;      <span class="comment">/* no value to validate if names don&#39;t match */</span></div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;   }</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;   <span class="keywordflow">if</span> (strcasecmp(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, expected_value)) {</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid header value - expected %s &quot;</span></div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;         <span class="stringliteral">&quot;received %s&quot;</span>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, expected_value);</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;   }</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;}</div><div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a20dc0ed36f151f2cfd588ee64b737011"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20dc0ed36f151f2cfd588ee64b737011">&#9670;&nbsp;</a></span>ast_http_header_match_in()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_http_header_match_in </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>expected_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>expected_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if the header name matches the expected header name. If so, then check to see if the value can be located in the expected value. </p>
<dl class="section note"><dt>Note</dt><dd>Both header and value checks are case insensitive.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>header name to check </td></tr>
    <tr><td class="paramname">expected_name</td><td>the expected name of the header </td></tr>
    <tr><td class="paramname">value</td><td>header value to check if in expected value </td></tr>
    <tr><td class="paramname">expected_value</td><td>the expected value(s) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if the name and expected name do not match </dd>
<dd>
-1 if the value and is not in the expected value </dd>
<dd>
1 if the name matches expected name and value is in expected value </dd></dl>
<dl class="section since"><dt>Since</dt><dd>13 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01726">1726</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, and <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l01300">websocket_client_handshake_get_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;{</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;   <span class="keywordflow">if</span> (strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, expected_name)) {</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;      <span class="comment">/* no value to validate if names don&#39;t match */</span></div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;   }</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a>(expected_value, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>)) {</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Header &#39;%s&#39; - could not locate &#39;%s&#39; &quot;</span></div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;         <span class="stringliteral">&quot;in &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, expected_value);</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;   }</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;}</div><div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a0d78ab95e54db8c72a64038cfefb5161"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a></div><div class="ttdeci">char * strcasestr(const char *, const char *)</div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1b1e02f7f0b46b21d8b3750d40aff87b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b1e02f7f0b46b21d8b3750d40aff87b">&#9670;&nbsp;</a></span>ast_http_header_parse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_http_header_parse </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse a header into the given name/value strings. </p>
<dl class="section note"><dt>Note</dt><dd>This modifies the given buffer and the out parameters point (not allocated) to the start of the header name and header value, respectively.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>a string containing the name/value to point to </td></tr>
    <tr><td class="paramname">name</td><td>out parameter pointing to the header name </td></tr>
    <tr><td class="paramname">value</td><td>out parameter pointing to header value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 if buf is empty </dd>
<dd>
0 if buf could be separated into name and value </dd>
<dd>
1 if name or value portion don't exist </dd></dl>
<dl class="section since"><dt>Since</dt><dd>13 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01688">1688</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00157">ast_skip_blanks()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00182">ast_trim_blanks()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01659">remove_excess_lws()</a>, and <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l01300">websocket_client_handshake_get_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;{</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#abe38193be148775f7559f8fff6e0c17e">ast_trim_blanks</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>);</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>)) {</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;   }</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;   *<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> = <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;   *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, <span class="stringliteral">&quot;:&quot;</span>);</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;   <span class="keywordflow">if</span> (!*<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>) {</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;   }</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;   *<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> = <a class="code" href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a>(*<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(*<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(*<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>)) {</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;   }</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#a96830ad81e8b0d664a6b681bc90edb92">remove_excess_lws</a>(*<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="strings_8h_html_af5693da955fa3bc73bc49c47b601fc7a"><div class="ttname"><a href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a></div><div class="ttdeci">char * ast_skip_blanks(const char *str)</div><div class="ttdoc">Gets a pointer to the first non-whitespace character in a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00157">strings.h:157</a></div></div>
<div class="ttc" id="strings_8h_html_abe38193be148775f7559f8fff6e0c17e"><div class="ttname"><a href="../../d6/d90/strings_8h.html#abe38193be148775f7559f8fff6e0c17e">ast_trim_blanks</a></div><div class="ttdeci">char * ast_trim_blanks(char *str)</div><div class="ttdoc">Trims trailing whitespace characters from a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00182">strings.h:182</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="http_8c_html_a96830ad81e8b0d664a6b681bc90edb92"><div class="ttname"><a href="../../dd/d43/http_8c.html#a96830ad81e8b0d664a6b681bc90edb92">remove_excess_lws</a></div><div class="ttdeci">static void remove_excess_lws(char *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01659">http.c:1659</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa62626630003222102b29b97f18ff94c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa62626630003222102b29b97f18ff94c">&#9670;&nbsp;</a></span>ast_http_manid_from_vars()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t ast_http_manid_from_vars </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return manager id, if exist, from request headers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">headers</td><td>List of HTTP headers </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>32-bit associated manager session identifier </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.8 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00217">217</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d43/http_8c_source.html#l01532">ast_http_get_cookies()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01263">ast_variables_destroy()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l07907">generic_http_callback()</a>, <a class="el" href="../../d6/dc9/res__http__post_8c_source.html#l00323">http_post_callback()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l00240">static_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;{</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;   uint32_t mngid = 0;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v, *cookies;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;   cookies = <a class="code" href="../../dd/d43/http_8c.html#a2e7522cd280df6ee043aad7bef980eb9">ast_http_get_cookies</a>(headers);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   <span class="keywordflow">for</span> (v = cookies; v; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;mansession_id&quot;</span>)) {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;         sscanf(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;%30x&quot;</span>, &amp;mngid);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      }</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(cookies);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;   <span class="keywordflow">return</span> mngid;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="http_8c_html_a2e7522cd280df6ee043aad7bef980eb9"><div class="ttname"><a href="../../dd/d43/http_8c.html#a2e7522cd280df6ee043aad7bef980eb9">ast_http_get_cookies</a></div><div class="ttdeci">struct ast_variable * ast_http_get_cookies(struct ast_variable *headers)</div><div class="ttdoc">Get cookie from Request headers. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01532">http.c:1532</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0059c10f2538cfa09f9979d5fefd5638"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0059c10f2538cfa09f9979d5fefd5638">&#9670;&nbsp;</a></span>ast_http_prefix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_http_prefix </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the current prefix. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>destination buffer for previous </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of prefix to copy </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00233">233</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l00141">prefix</a>.</p>
<div class="fragment"><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;{</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a>, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;   }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="http_8c_html_a6f25bc812d09fedb86bf394c01061c56"><div class="ttname"><a href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a></div><div class="ttdeci">static char prefix[MAX_PREFIX]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00141">http.c:141</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab0286838ed2b93e0d77fe9d7af8a37b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0286838ed2b93e0d77fe9d7af8a37b5">&#9670;&nbsp;</a></span>ast_http_request_close_on_completion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_http_request_close_on_completion </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Request the HTTP connection be closed after this HTTP request. </p>
<dl class="section since"><dt>Since</dt><dd>12.4.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ser</td><td>HTTP TCP/TLS session object.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Call before <a class="el" href="../../dd/d56/http_8h.html#ab0f7966324a592e02d53f01e7bb9cc17" title="Send HTTP error message and close socket. ">ast_http_error()</a> to make the connection close.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00836">836</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00453">http_worker_private_data::flags</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00445">HTTP_FLAG_CLOSE_ON_COMPLETION</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00162">ast_tcptls_session_instance::private_data</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02559">request()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00885">ast_ari_callback()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07907">generic_http_callback()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01401">handle_uri()</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00091">http_callback()</a>, <a class="el" href="../../d6/dc9/res__http__post_8c_source.html#l00323">http_post_callback()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00368">httpstatus_callback()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00240">static_callback()</a>, and <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l00777">websocket_bad_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;{</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a> *<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a> = ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">private_data</a>;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>);</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;}</div><div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_ad517770dac2061381b2008850ff12e6c"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">ast_tcptls_session_instance::private_data</a></div><div class="ttdeci">void * private_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00162">tcptls.h:162</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">http_worker_private_data::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00453">http.c:453</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a4e2e6fb7d874f0d2deddd2ecfc8afb32"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a></div><div class="ttdeci">static int request(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02559">chan_pjsip.c:2559</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00445">http.c:445</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00449">http.c:449</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa042c9c6e2344db5e8a8d97683424b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa042c9c6e2344db5e8a8d97683424b3">&#9670;&nbsp;</a></span>ast_http_response_status_line()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_http_response_status_line </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse the http response status line. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>the http response line information </td></tr>
    <tr><td class="paramname">version</td><td>the expected http version (e.g. HTTP/1.1) </td></tr>
    <tr><td class="paramname">code</td><td>the expected status code </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 if version didn't match or status code conversion fails. </dd>
<dd>
status code (&gt;0) </dd></dl>
<dl class="section since"><dt>Since</dt><dd>13 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01636">1636</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l01300">websocket_client_handshake_get_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;{</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;   <span class="keywordtype">int</span> status_code;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;   <span class="keywordtype">size_t</span> size = strlen(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a81b4b1c3c855fb371e7723b473f1ee78">version</a>);</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;   <span class="keywordflow">if</span> (strncmp(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a81b4b1c3c855fb371e7723b473f1ee78">version</a>, size) || <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[size] != <span class="charliteral">&#39; &#39;</span>) {</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;HTTP version not supported - &quot;</span></div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;         <span class="stringliteral">&quot;expected %s\n&quot;</span>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a81b4b1c3c855fb371e7723b473f1ee78">version</a>);</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;   }</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;   <span class="comment">/* skip to status code (version + space) */</span></div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> += size + 1;</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;   <span class="keywordflow">if</span> (sscanf(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="stringliteral">&quot;%d&quot;</span>, &amp;status_code) != 1) {</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not read HTTP status code - &quot;</span></div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;         <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>);</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;   }</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;   <span class="keywordflow">return</span> status_code;</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a81b4b1c3c855fb371e7723b473f1ee78"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a81b4b1c3c855fb371e7723b473f1ee78">version</a></div><div class="ttdeci">static char version[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00391">chan_ooh323.c:391</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0448c9f4a66b6ee7994870b187e185b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0448c9f4a66b6ee7994870b187e185b4">&#9670;&nbsp;</a></span>ast_http_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_http_send </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80ef">ast_http_method</a>&#160;</td>
          <td class="paramname"><em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>status_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>status_title</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> *&#160;</td>
          <td class="paramname"><em>http_header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> *&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>static_content</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generic function for sending HTTP/1.1 response. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ser</td><td>TCP/TLS session object </td></tr>
    <tr><td class="paramname">method</td><td>GET/POST/HEAD </td></tr>
    <tr><td class="paramname">status_code</td><td>HTTP response code (200/401/403/404/500) </td></tr>
    <tr><td class="paramname">status_title</td><td>English equivalent to the status_code parameter </td></tr>
    <tr><td class="paramname">http_header</td><td>An <a class="el" href="../../dd/da2/structast__str.html" title="The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...">ast_str</a> object containing all headers </td></tr>
    <tr><td class="paramname">out</td><td>An <a class="el" href="../../dd/da2/structast__str.html" title="The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...">ast_str</a> object containing the body of the response </td></tr>
    <tr><td class="paramname">fd</td><td>If out is NULL, a file descriptor where the body of the response is held (otherwise -1) </td></tr>
    <tr><td class="paramname">static_content</td><td>Zero if the content is dynamically generated and should not be cached; nonzero otherwise</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Function determines the HTTP response header from status_code, status_header, and http_header.</dd></dl>
<p>Extra HTTP headers MUST be present only in the http_header argument. The argument "out" should contain only content of the response (no headers!).</p>
<p>HTTP content can be constructed from the argument "out", if it is not NULL; otherwise, the function will read content from FD.</p>
<p>This function calculates the content-length http header itself.</p>
<p>Both the http_header and out arguments will be freed by this function; however, if FD is open, it will remain open.</p>
<dl class="section since"><dt>Since</dt><dd>1.8 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00456">456</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01120">ast_http_body_discard()</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00060">AST_HTTP_HEAD</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00491">ast_iostream_printf()</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00374">ast_iostream_write()</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l01739">ast_localtime()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00688">ast_str_strlen()</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l02524">ast_strftime()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00839">ast_tcptls_close_session_file()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00453">http_worker_private_data::flags</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00445">HTTP_FLAG_CLOSE_ON_COMPLETION</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00104">http_server_name</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00079">MAX_SERVER_NAME_LENGTH</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00162">ast_tcptls_session_instance::private_data</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02559">request()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00108">session_keep_alive</a>, and <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00160">ast_tcptls_session_instance::stream</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00885">ast_ari_callback()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00567">ast_http_create_response()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07907">generic_http_callback()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01401">handle_uri()</a>, <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00593">http_callback()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00368">httpstatus_callback()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00240">static_callback()</a>, and <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l00777">websocket_bad_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;{</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;   <span class="keyword">struct </span>timeval now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d84/structast__tm.html">ast_tm</a> tm;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   <span class="keywordtype">char</span> timebuf[80];</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[256];</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   <span class="keywordtype">int</span> content_length = 0;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   <span class="keywordtype">int</span> close_connection;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *server_header_field = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(<a class="code" href="../../dd/d43/http_8c.html#af5c7bcd09f0d5f4bb9e09bd401130b95">MAX_SERVER_NAME_LENGTH</a>);</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <span class="keywordtype">int</span> send_content;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   <span class="keywordflow">if</span> (!ser || !server_header_field) {</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      <span class="comment">/* The connection is not open. */</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(http_header);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(out);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(server_header_field);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   }</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;   <span class="keywordflow">if</span>(!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../dd/d43/http_8c.html#a5086e142ada070c22242a51c58f3da4a">http_server_name</a>)) {</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;server_header_field,</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                   0,</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                   <span class="stringliteral">&quot;Server: %s\r\n&quot;</span>,</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                   <a class="code" href="../../dd/d43/http_8c.html#a5086e142ada070c22242a51c58f3da4a">http_server_name</a>);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;   }</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">    * We shouldn&#39;t be sending non-final status codes to this</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">    * function because we may close the connection before</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">    * returning.</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(200 &lt;= status_code);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#ad49ee0814a6efb14658ec87f2f6a86fb">session_keep_alive</a> &lt;= 0) {</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      close_connection = 1;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a> *<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a>;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      request = ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">private_data</a>;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <span class="keywordflow">if</span> (!request</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;         || <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>)</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;         || <a class="code" href="../../dd/d43/http_8c.html#a6158887813b6c700d9056b4daea05df0">ast_http_body_discard</a>(ser)) {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;         close_connection = 1;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;         close_connection = 0;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      }</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   }</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   <a class="code" href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a>(timebuf, <span class="keyword">sizeof</span>(timebuf), <span class="stringliteral">&quot;%a, %d %b %Y %H:%M:%S GMT&quot;</span>, <a class="code" href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a>(&amp;now, &amp;tm, <span class="stringliteral">&quot;GMT&quot;</span>));</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;   <span class="comment">/* calc content length */</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   <span class="keywordflow">if</span> (out) {</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      content_length += <a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(out);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   }</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   <span class="keywordflow">if</span> (fd) {</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      content_length += lseek(fd, 0, SEEK_END);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      lseek(fd, 0, SEEK_SET);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   }</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;   send_content = <a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a> != <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efaf8da4e60a407fb100dd10e20929ea162">AST_HTTP_HEAD</a> || status_code &gt;= 400;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;   <span class="comment">/* send http header */</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d27/iostream_8h.html#a23c05430f4b03eb5c72e1531f0716499">ast_iostream_printf</a>(ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>,</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      <span class="stringliteral">&quot;HTTP/1.1 %d %s\r\n&quot;</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <span class="stringliteral">&quot;Date: %s\r\n&quot;</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      <span class="stringliteral">&quot;Content-Length: %d\r\n&quot;</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      <span class="stringliteral">&quot;\r\n&quot;</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span>,</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      status_code, status_title ? status_title : <span class="stringliteral">&quot;OK&quot;</span>,</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(server_header_field),</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      timebuf,</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      close_connection ? <span class="stringliteral">&quot;Connection: close\r\n&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      static_content ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;Cache-Control: no-cache, no-store\r\n&quot;</span>,</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      http_header ? <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(http_header) : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      content_length,</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      send_content &amp;&amp; out &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(out) ? <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(out) : <span class="stringliteral">&quot;&quot;</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      ) &lt;= 0) {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;ast_iostream_printf() failed: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      close_connection = 1;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (send_content &amp;&amp; fd) {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <span class="comment">/* send file content */</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <span class="keywordflow">while</span> ((len = read(fd, buf, <span class="keyword">sizeof</span>(buf))) &gt; 0) {</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dd/d27/iostream_8h.html#a6e0bf2afcbc5b330b96378626f9ac5b3">ast_iostream_write</a>(ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>, buf, len) != len) {</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;ast_iostream_write() failed: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            close_connection = 1;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;         }</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      }</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   }</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(http_header);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(out);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(server_header_field);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   <span class="keywordflow">if</span> (close_connection) {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;HTTP closing session.  status_code:%d\n&quot;</span>, status_code);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <a class="code" href="../../d4/ddf/tcptls_8h.html#adea645492f53ec11186b84eaf85e14d9">ast_tcptls_close_session_file</a>(ser);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;HTTP keeping session open.  status_code:%d\n&quot;</span>, status_code);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   }</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;}</div><div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="iostream_8h_html_a6e0bf2afcbc5b330b96378626f9ac5b3"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#a6e0bf2afcbc5b330b96378626f9ac5b3">ast_iostream_write</a></div><div class="ttdeci">ssize_t ast_iostream_write(struct ast_iostream *stream, const void *buffer, size_t count)</div><div class="ttdoc">Write data to an iostream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00374">iostream.c:374</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="localtime_8h_html_ae9fbda728350a9a5b9c09b29214d718e"><div class="ttname"><a href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a></div><div class="ttdeci">struct ast_tm * ast_localtime(const struct timeval *timep, struct ast_tm *p_tm, const char *zone)</div><div class="ttdoc">Timezone-independent version of localtime_r(3). </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l01739">localtime.c:1739</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="http_8c_html_af5c7bcd09f0d5f4bb9e09bd401130b95"><div class="ttname"><a href="../../dd/d43/http_8c.html#af5c7bcd09f0d5f4bb9e09bd401130b95">MAX_SERVER_NAME_LENGTH</a></div><div class="ttdeci">#define MAX_SERVER_NAME_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00079">http.c:79</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="http_8c_html_a6158887813b6c700d9056b4daea05df0"><div class="ttname"><a href="../../dd/d43/http_8c.html#a6158887813b6c700d9056b4daea05df0">ast_http_body_discard</a></div><div class="ttdeci">int ast_http_body_discard(struct ast_tcptls_session_instance *ser)</div><div class="ttdoc">Read and discard any unread HTTP request body. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01120">http.c:1120</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a8b44a03925325ceaf2de7b079b1541a1"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a></div><div class="ttdeci">const char * method</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04335">res_pjsip.c:4335</a></div></div>
<div class="ttc" id="iostream_8h_html_a23c05430f4b03eb5c72e1531f0716499"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#a23c05430f4b03eb5c72e1531f0716499">ast_iostream_printf</a></div><div class="ttdeci">ssize_t ast_iostream_printf(struct ast_iostream *stream, const char *format,...)</div><div class="ttdoc">Write a formatted string to an iostream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00491">iostream.c:491</a></div></div>
<div class="ttc" id="http_8c_html_a5086e142ada070c22242a51c58f3da4a"><div class="ttname"><a href="../../dd/d43/http_8c.html#a5086e142ada070c22242a51c58f3da4a">http_server_name</a></div><div class="ttdeci">static char http_server_name[MAX_SERVER_NAME_LENGTH]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00104">http.c:104</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_ad517770dac2061381b2008850ff12e6c"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">ast_tcptls_session_instance::private_data</a></div><div class="ttdeci">void * private_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00162">tcptls.h:162</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">http_worker_private_data::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00453">http.c:453</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="localtime_8h_html_aa8e63928b14a347bd3973d680b885f93"><div class="ttname"><a href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a></div><div class="ttdeci">int ast_strftime(char *buf, size_t len, const char *format, const struct ast_tm *tm)</div><div class="ttdoc">Special version of strftime(3) that handles fractions of a second. Takes the same arguments as strfti...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l02524">localtime.c:2524</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a4e2e6fb7d874f0d2deddd2ecfc8afb32"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a></div><div class="ttdeci">static int request(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02559">chan_pjsip.c:2559</a></div></div>
<div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80efaf8da4e60a407fb100dd10e20929ea162"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efaf8da4e60a407fb100dd10e20929ea162">AST_HTTP_HEAD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00060">http.h:60</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00445">http.c:445</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_a36ac2dd734607a43ed90acb7e9d81ac5"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">ast_tcptls_session_instance::stream</a></div><div class="ttdeci">struct ast_iostream * stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00160">tcptls.h:160</a></div></div>
<div class="ttc" id="strings_8h_html_aabc005bd1c7e249e8f8659d57d4500b6"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a></div><div class="ttdeci">size_t ast_str_strlen(const struct ast_str *buf)</div><div class="ttdoc">Returns the current length of the string stored within buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00688">strings.h:688</a></div></div>
<div class="ttc" id="tcptls_8h_html_adea645492f53ec11186b84eaf85e14d9"><div class="ttname"><a href="../../d4/ddf/tcptls_8h.html#adea645492f53ec11186b84eaf85e14d9">ast_tcptls_close_session_file</a></div><div class="ttdeci">void ast_tcptls_close_session_file(struct ast_tcptls_session_instance *tcptls_session)</div><div class="ttdoc">Closes a tcptls session instance&amp;#39;s file and/or file descriptor. The tcptls_session will be set to NUL...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9b/tcptls_8c_source.html#l00839">tcptls.c:839</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00449">http.c:449</a></div></div>
<div class="ttc" id="http_8c_html_ad49ee0814a6efb14658ec87f2f6a86fb"><div class="ttname"><a href="../../dd/d43/http_8c.html#ad49ee0814a6efb14658ec87f2f6a86fb">session_keep_alive</a></div><div class="ttdeci">static int session_keep_alive</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00108">http.c:108</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
<div class="ttc" id="structast__tm_html"><div class="ttname"><a href="../../d5/d84/structast__tm.html">ast_tm</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/deb/localtime_8h_source.html#l00035">localtime.h:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac99d56925cf94f8cf3ed0acac52e2d75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac99d56925cf94f8cf3ed0acac52e2d75">&#9670;&nbsp;</a></span>ast_http_uri_link()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_http_uri_link </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a> *&#160;</td>
          <td class="paramname"><em>urih</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a URI handler. </p>
<p>Register a URI handler.</p>
<p>They are sorted by length of the string, not alphabetically. Duplicate entries are not replaced, but the insertion order (using &lt;= and not just &lt;) makes sure that more recent insertions hide older ones. On a lookup, we just scan the list and stop at the first matching entry. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00673">673</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00451">AST_RWLIST_EMPTY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00422">AST_RWLIST_FIRST</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00701">AST_RWLIST_INSERT_AFTER</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00717">AST_RWLIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00740">AST_RWLIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00440">AST_RWLIST_NEXT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00104">ast_http_uri::prefix</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00141">prefix</a>, and <a class="el" href="../../dd/d56/http_8h_source.html#l00103">ast_http_uri::uri</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>, <a class="el" href="../../d6/dc9/res__http__post_8c_source.html#l00429">__ast_http_post_load()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l01144">load_module()</a>, and <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l01187">reload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;{</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a> *<a class="code" href="../../d0/d6c/structast__http__uri.html#a69ec24fb2d0a5f5e532deb9adaab81d6">uri</a>;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = strlen(urih-&gt;<a class="code" href="../../d0/d6c/structast__http__uri.html#a69ec24fb2d0a5f5e532deb9adaab81d6">uri</a>);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>);</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;   urih-&gt;<a class="code" href="../../d0/d6c/structast__http__uri.html#a5b41c5ae4505891e6c53e26df197e02b">prefix</a> = <a class="code" href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a>;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   <span class="keywordflow">if</span> ( <a class="code" href="../../df/d90/linkedlists_8h.html#a0044f6572f50a89049b3b5272e51b0e7">AST_RWLIST_EMPTY</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>) || strlen(<a class="code" href="../../df/d90/linkedlists_8h.html#a64835fe6d570951b2a0404799c3d116f">AST_RWLIST_FIRST</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>)-&gt;uri) &lt;= len ) {</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>, urih, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>);</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   }</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>, uri, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a5c021d1e034a53d09360da4d95c76220">AST_RWLIST_NEXT</a>(uri, <a class="code" href="../../d3/d96/structentry.html">entry</a>) &amp;&amp;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;         strlen(<a class="code" href="../../df/d90/linkedlists_8h.html#a5c021d1e034a53d09360da4d95c76220">AST_RWLIST_NEXT</a>(uri, <a class="code" href="../../d3/d96/structentry.html">entry</a>)-&gt;uri) &lt;= len) {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a5937d72e8b39660a1b824af2042c0e9c">AST_RWLIST_INSERT_AFTER</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>, uri, urih, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>);</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      }</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   }</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>, urih, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a5c021d1e034a53d09360da4d95c76220"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a5c021d1e034a53d09360da4d95c76220">AST_RWLIST_NEXT</a></div><div class="ttdeci">#define AST_RWLIST_NEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00440">linkedlists.h:440</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a5937d72e8b39660a1b824af2042c0e9c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a5937d72e8b39660a1b824af2042c0e9c">AST_RWLIST_INSERT_AFTER</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_AFTER</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00701">linkedlists.h:701</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aacc5f6b7c25e361d11d40137fd55a8e8"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00717">linkedlists.h:717</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0044f6572f50a89049b3b5272e51b0e7"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0044f6572f50a89049b3b5272e51b0e7">AST_RWLIST_EMPTY</a></div><div class="ttdeci">#define AST_RWLIST_EMPTY</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00451">linkedlists.h:451</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="structast__http__uri_html_a5b41c5ae4505891e6c53e26df197e02b"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html#a5b41c5ae4505891e6c53e26df197e02b">ast_http_uri::prefix</a></div><div class="ttdeci">const char * prefix</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00104">http.h:104</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadda916488b2d151af4426e2f06ad332"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_TAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00740">linkedlists.h:740</a></div></div>
<div class="ttc" id="structast__http__uri_html"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a></div><div class="ttdoc">Definition of a URI handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00100">http.h:100</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structuris_html"><div class="ttname"><a href="../../db/ddf/structuris.html">uris</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00138">http.c:138</a></div></div>
<div class="ttc" id="structast__http__uri_html_a69ec24fb2d0a5f5e532deb9adaab81d6"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html#a69ec24fb2d0a5f5e532deb9adaab81d6">ast_http_uri::uri</a></div><div class="ttdeci">const char * uri</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00103">http.h:103</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a64835fe6d570951b2a0404799c3d116f"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a64835fe6d570951b2a0404799c3d116f">AST_RWLIST_FIRST</a></div><div class="ttdeci">#define AST_RWLIST_FIRST</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00422">linkedlists.h:422</a></div></div>
<div class="ttc" id="http_8c_html_a6f25bc812d09fedb86bf394c01061c56"><div class="ttname"><a href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a></div><div class="ttdeci">static char prefix[MAX_PREFIX]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00141">http.c:141</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a33e436ed8aeb33287f1e6cb1c5288a14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33e436ed8aeb33287f1e6cb1c5288a14">&#9670;&nbsp;</a></span>ast_http_uri_unlink()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_http_uri_unlink </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a> *&#160;</td>
          <td class="paramname"><em>urihandler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister a URI handler. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00705">705</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00884">AST_RWLIST_REMOVE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, and <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00945">load_module()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l01187">reload_module()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l02343">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;{</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>);</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6091f0518f8b6f443fd9f5150f3ac407">AST_RWLIST_REMOVE</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>, urih, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6091f0518f8b6f443fd9f5150f3ac407"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6091f0518f8b6f443fd9f5150f3ac407">AST_RWLIST_REMOVE</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00884">linkedlists.h:884</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structuris_html"><div class="ttname"><a href="../../db/ddf/structuris.html">uris</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00138">http.c:138</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae05bfd31702ddfd156bd1312ccbf2441"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae05bfd31702ddfd156bd1312ccbf2441">&#9670;&nbsp;</a></span>ast_http_uri_unlink_all_with_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_http_uri_unlink_all_with_key </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister all handlers with matching key. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00712">712</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00569">AST_RWLIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00114">ast_http_uri::data</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00110">ast_http_uri::dmallocd</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00116">ast_http_uri::key</a>, and <a class="el" href="../../dd/d56/http_8h_source.html#l00108">ast_http_uri::mallocd</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dc9/res__http__post_8c_source.html#l00429">__ast_http_post_load()</a>, and <a class="el" href="../../d6/dc9/res__http__post_8c_source.html#l00484">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;{</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a> *urih;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>, urih, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;      <span class="keywordflow">if</span> (!strcmp(urih-&gt;<a class="code" href="../../d0/d6c/structast__http__uri.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>, <a class="code" href="../../d0/d6c/structast__http__uri.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>)) {</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a>(<a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;         <span class="keywordflow">if</span> (urih-&gt;<a class="code" href="../../d0/d6c/structast__http__uri.html#a55ab2ed9aeff792462e0efe00685b7d6">dmallocd</a>) {</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(urih-&gt;<a class="code" href="../../d0/d6c/structast__http__uri.html#a735984d41155bc1032e09bece8f8d66d">data</a>);</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;         }</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;         <span class="keywordflow">if</span> (urih-&gt;<a class="code" href="../../d0/d6c/structast__http__uri.html#ae6cd4621862105820006f1c6ba56e427">mallocd</a>) {</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(urih);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;         }</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      }</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;   }</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structast__http__uri_html_acd3d88da3c0e0313c3645ff34f62f542"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html#acd3d88da3c0e0313c3645ff34f62f542">ast_http_uri::key</a></div><div class="ttdeci">const char * key</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00116">http.h:116</a></div></div>
<div class="ttc" id="structast__http__uri_html_ae6cd4621862105820006f1c6ba56e427"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html#ae6cd4621862105820006f1c6ba56e427">ast_http_uri::mallocd</a></div><div class="ttdeci">unsigned int mallocd</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00108">http.h:108</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a02212548652c9eb0f3db38dc4e4bd285"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00569">linkedlists.h:569</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__http__uri_html"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a></div><div class="ttdoc">Definition of a URI handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00100">http.h:100</a></div></div>
<div class="ttc" id="structast__http__uri_html_a55ab2ed9aeff792462e0efe00685b7d6"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html#a55ab2ed9aeff792462e0efe00685b7d6">ast_http_uri::dmallocd</a></div><div class="ttdeci">unsigned int dmallocd</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00110">http.h:110</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structuris_html"><div class="ttname"><a href="../../db/ddf/structuris.html">uris</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00138">http.c:138</a></div></div>
<div class="ttc" id="structast__http__uri_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html#a735984d41155bc1032e09bece8f8d66d">ast_http_uri::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00114">http.h:114</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:45:59 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
