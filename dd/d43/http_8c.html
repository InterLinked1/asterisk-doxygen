<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: http.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">http.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>http server for AMI access  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="../../de/df7/time_8h_source.html">time.h</a>&gt;</code><br />
<code>#include &lt;sys/time.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../dd/df2/paths_8h_source.html">asterisk/paths.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db0/cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/ddf/tcptls_8h_source.html">asterisk/tcptls.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d56/http_8h_source.html">asterisk/http.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d90/strings_8h_source.html">asterisk/strings.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html">asterisk/config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d0f/stringfields_8h_source.html">asterisk/stringfields.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/db9/ast__version_8h_source.html">asterisk/ast_version.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d45/manager_8h_source.html">asterisk/manager.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/da5/astobj2_8h_source.html">asterisk/astobj2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/df1/netsock2_8h_source.html">asterisk/netsock2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d05/json_8h_source.html">asterisk/json.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for http.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d0e/http_8c__incl.png" border="0" usemap="#http_8c" alt=""/></div>
<map name="http_8c" id="http_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="525,453,609,480"/>
<area shape="rect" id="node18" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="1249,528,1312,555"/>
<area shape="rect" id="node24" href="../../dd/df2/paths_8h.html" title="Asterisk file paths, configured in asterisk.conf. " alt="" coords="2503,80,2627,107"/>
<area shape="rect" id="node25" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="1009,155,1110,181"/>
<area shape="rect" id="node31" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="1023,229,1154,256"/>
<area shape="rect" id="node33" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1394,379,1509,405"/>
<area shape="rect" id="node37" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="1746,453,1903,480"/>
<area shape="rect" id="node39" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="587,304,721,331"/>
<area shape="rect" id="node40" href="../../d4/ddf/tcptls_8h.html" title="Generic support for tcp/tls servers in Asterisk. " alt="" coords="746,304,869,331"/>
<area shape="rect" id="node42" href="../../db/df1/netsock2_8h.html" title="Network socket handling. " alt="" coords="1973,379,2119,405"/>
<area shape="rect" id="node43" href="../../dd/d56/http_8h.html" title="Support for Private Asterisk HTTP Servers. " alt="" coords="834,229,949,256"/>
<area shape="rect" id="node44" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="1568,304,1695,331"/>
<area shape="rect" id="node45" href="../../d5/db9/ast__version_8h.html" title="Asterisk version information. " alt="" coords="2651,80,2812,107"/>
<area shape="rect" id="node46" href="../../db/d45/manager_8h.html" title="The AMI &#45; Asterisk Manager Interface &#45; is a TCP protocol created to manage Asterisk with third&#45;party ..." alt="" coords="1336,80,1481,107"/>
<area shape="rect" id="node49" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="1711,155,1847,181"/>
<area shape="rect" id="node50" href="../../d4/d05/json_8h.html" title="Asterisk JSON abstraction layer. " alt="" coords="1973,155,2087,181"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="1165,603,1319,629"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="339,528,476,555"/>
<area shape="rect" id="node17" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="500,528,635,555"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="1169,677,1315,704"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="805,603,948,629"/>
<area shape="rect" id="node20" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="1343,603,1490,629"/>
<area shape="rect" id="node26" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="895,379,1045,405"/>
<area shape="rect" id="node27" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1007,453,1120,480"/>
<area shape="rect" id="node30" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1388,528,1515,555"/>
<area shape="rect" id="node38" href="../../dc/d7d/threadstorage_8h.html" title="Definitions to aid in the use of thread local storage. " alt="" coords="1239,304,1418,331"/>
<area shape="rect" id="node34" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="1583,453,1722,480"/>
<area shape="rect" id="node41" href="../../dd/d27/iostream_8h.html" title="Generic abstraction for input/output streams. " alt="" coords="521,379,667,405"/>
<area shape="rect" id="node47" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="1179,229,1329,256"/>
<area shape="rect" id="node48" href="../../d1/d99/xmldoc_8h.html" title="Asterisk XML Documentation API. " alt="" coords="1236,155,1371,181"/>
</map>
</div>
</div>
<p><a href="../../dd/d43/http_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d9e/structast__cfhttp__methods__text.html">ast_cfhttp_methods_text</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d02/structhttp__uri__redirect.html">http_uri_redirect</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/ddf/structuris.html">uris</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad599c720bbdc2219933755c4a4364cbe"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#ad599c720bbdc2219933755c4a4364cbe">BASIC_LEN</a>&#160;&#160;&#160;6</td></tr>
<tr class="separator:ad599c720bbdc2219933755c4a4364cbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4905fca3498c74da82b5726e68587f40"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a4905fca3498c74da82b5726e68587f40">BASIC_PREFIX</a>&#160;&#160;&#160;&quot;Basic &quot;</td></tr>
<tr class="separator:a4905fca3498c74da82b5726e68587f40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16b710f592bf8f7900666392adc444dc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a16b710f592bf8f7900666392adc444dc">DEFAULT_PORT</a>&#160;&#160;&#160;8088</td></tr>
<tr class="separator:a16b710f592bf8f7900666392adc444dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5a66da7db69b05a371613d80051da9f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#af5a66da7db69b05a371613d80051da9f">DEFAULT_RESPONSE_HEADER_LENGTH</a>&#160;&#160;&#160;512</td></tr>
<tr class="separator:af5a66da7db69b05a371613d80051da9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8418419ee998a4151ff9d2d3e61694b1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a8418419ee998a4151ff9d2d3e61694b1">DEFAULT_SESSION_INACTIVITY</a>&#160;&#160;&#160;30000</td></tr>
<tr class="separator:a8418419ee998a4151ff9d2d3e61694b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa35c8da693177f283276e6250ab2ea61"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#aa35c8da693177f283276e6250ab2ea61">DEFAULT_SESSION_KEEP_ALIVE</a>&#160;&#160;&#160;15000</td></tr>
<tr class="separator:aa35c8da693177f283276e6250ab2ea61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe0d8ae0cb8f0a0e291943ce1140c766"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#afe0d8ae0cb8f0a0e291943ce1140c766">DEFAULT_SESSION_LIMIT</a>&#160;&#160;&#160;100</td></tr>
<tr class="separator:afe0d8ae0cb8f0a0e291943ce1140c766"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc2a3ec1424866bc76df0b0a4b8c046e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#abc2a3ec1424866bc76df0b0a4b8c046e">DEFAULT_TLS_PORT</a>&#160;&#160;&#160;8089</td></tr>
<tr class="separator:abc2a3ec1424866bc76df0b0a4b8c046e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35f98eb496f88107d8571d3abbe9ef5f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a35f98eb496f88107d8571d3abbe9ef5f">INITIAL_RESPONSE_BODY_BUFFER</a>&#160;&#160;&#160;1024</td></tr>
<tr class="separator:a35f98eb496f88107d8571d3abbe9ef5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aace3c09acf4173f55f74d5c65976b23a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#aace3c09acf4173f55f74d5c65976b23a">MAX_CONTENT_LENGTH</a>&#160;&#160;&#160;40960</td></tr>
<tr class="separator:aace3c09acf4173f55f74d5c65976b23a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed5af68d7cd4bc4ed1fdca3e2de959af"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#aed5af68d7cd4bc4ed1fdca3e2de959af">MAX_HTTP_LINE_LENGTH</a>&#160;&#160;&#160;4096</td></tr>
<tr class="separator:aed5af68d7cd4bc4ed1fdca3e2de959af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a933ca6c1a804b56ec28e07f9c2a911"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a5a933ca6c1a804b56ec28e07f9c2a911">MAX_HTTP_REQUEST_HEADERS</a>&#160;&#160;&#160;100</td></tr>
<tr class="separator:a5a933ca6c1a804b56ec28e07f9c2a911"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecb32037d29b6d4c9d903ba03b56f065"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#aecb32037d29b6d4c9d903ba03b56f065">MAX_PREFIX</a>&#160;&#160;&#160;80</td></tr>
<tr class="separator:aecb32037d29b6d4c9d903ba03b56f065"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5c7bcd09f0d5f4bb9e09bd401130b95"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#af5c7bcd09f0d5f4bb9e09bd401130b95">MAX_SERVER_NAME_LENGTH</a>&#160;&#160;&#160;128</td></tr>
<tr class="separator:af5c7bcd09f0d5f4bb9e09bd401130b95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a285225f3d0ac09c658f9b505ebaab250"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a285225f3d0ac09c658f9b505ebaab250">MIN_INITIAL_REQUEST_TIMEOUT</a>&#160;&#160;&#160;10000</td></tr>
<tr class="separator:a285225f3d0ac09c658f9b505ebaab250"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a647c59574088759d4b555ceb63d9df89"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89">http_private_flags</a> { <a class="el" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920">HTTP_FLAG_HAS_BODY</a> = (1 &lt;&lt; 0), 
<a class="el" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88">HTTP_FLAG_BODY_READ</a> = (1 &lt;&lt; 1), 
<a class="el" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a> = (1 &lt;&lt; 2)
 }</td></tr>
<tr class="separator:a647c59574088759d4b555ceb63d9df89"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3ce71802a2d0296a3478fcfeb3c21aac"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a3ce71802a2d0296a3478fcfeb3c21aac">__ast_http_load</a> (int <a class="el" href="../../dc/d6b/res__xmpp_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a>)</td></tr>
<tr class="separator:a3ce71802a2d0296a3478fcfeb3c21aac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50af5ddf9c9a9dd76f2a1203f50dafdd"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a50af5ddf9c9a9dd76f2a1203f50dafdd">add_redirect</a> (const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="memdesc:a50af5ddf9c9a9dd76f2a1203f50dafdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a new URI redirect The entries in the redirect list are sorted by length, just like the list of URI handlers.  <a href="#a50af5ddf9c9a9dd76f2a1203f50dafdd">More...</a><br /></td></tr>
<tr class="separator:a50af5ddf9c9a9dd76f2a1203f50dafdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ca65fca50c28c5cc4de588cd7ca6cbd"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a4ca65fca50c28c5cc4de588cd7ca6cbd">ast_get_http_method</a> (enum <a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80ef">ast_http_method</a> <a class="el" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>)</td></tr>
<tr class="memdesc:a4ca65fca50c28c5cc4de588cd7ca6cbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return http method name string.  <a href="#a4ca65fca50c28c5cc4de588cd7ca6cbd">More...</a><br /></td></tr>
<tr class="separator:a4ca65fca50c28c5cc4de588cd7ca6cbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacbeca1d5a14388e6c2f708ac7a9fffa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#aacbeca1d5a14388e6c2f708ac7a9fffa">ast_http_auth</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, const char *realm, const unsigned long nonce, const unsigned long opaque, int stale, const char *<a class="el" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a>)</td></tr>
<tr class="memdesc:aacbeca1d5a14388e6c2f708ac7a9fffa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send http "401 Unauthorized" response and close socket.  <a href="#aacbeca1d5a14388e6c2f708ac7a9fffa">More...</a><br /></td></tr>
<tr class="separator:aacbeca1d5a14388e6c2f708ac7a9fffa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6158887813b6c700d9056b4daea05df0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a6158887813b6c700d9056b4daea05df0">ast_http_body_discard</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser)</td></tr>
<tr class="memdesc:a6158887813b6c700d9056b4daea05df0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read and discard any unread HTTP request body.  <a href="#a6158887813b6c700d9056b4daea05df0">More...</a><br /></td></tr>
<tr class="separator:a6158887813b6c700d9056b4daea05df0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af220ac7e6b4ecb8be48359c18e10adaa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#af220ac7e6b4ecb8be48359c18e10adaa">ast_http_body_read_status</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, int read_success)</td></tr>
<tr class="memdesc:af220ac7e6b4ecb8be48359c18e10adaa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the body read success status.  <a href="#af220ac7e6b4ecb8be48359c18e10adaa">More...</a><br /></td></tr>
<tr class="separator:af220ac7e6b4ecb8be48359c18e10adaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf98d4742ea06a06bef5ead3cd8ef0ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#acf98d4742ea06a06bef5ead3cd8ef0ed">ast_http_create_response</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, int status_code, const char *status_title, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> *http_header_data, const char *<a class="el" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a>)</td></tr>
<tr class="memdesc:acf98d4742ea06a06bef5ead3cd8ef0ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates and sends a formatted http response message.  <a href="#acf98d4742ea06a06bef5ead3cd8ef0ed">More...</a><br /></td></tr>
<tr class="separator:acf98d4742ea06a06bef5ead3cd8ef0ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ab57c2e45049bd17a5cf6d0ce6e1ebe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, int status_code, const char *status_title, const char *<a class="el" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a>)</td></tr>
<tr class="memdesc:a6ab57c2e45049bd17a5cf6d0ce6e1ebe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send HTTP error message and close socket.  <a href="#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">More...</a><br /></td></tr>
<tr class="separator:a6ab57c2e45049bd17a5cf6d0ce6e1ebe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23c0584001722249f242fc66a3d33caf"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a23c0584001722249f242fc66a3d33caf">ast_http_ftype2mtype</a> (const char *ftype)</td></tr>
<tr class="memdesc:a23c0584001722249f242fc66a3d33caf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return mime type based on extension.  <a href="#a23c0584001722249f242fc66a3d33caf">More...</a><br /></td></tr>
<tr class="separator:a23c0584001722249f242fc66a3d33caf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a7ef71bdba2a4f83b40dd7fad426207"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d5/dbf/structast__http__auth.html">ast_http_auth</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a9a7ef71bdba2a4f83b40dd7fad426207">ast_http_get_auth</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers)</td></tr>
<tr class="memdesc:a9a7ef71bdba2a4f83b40dd7fad426207"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get HTTP authentication information from headers.  <a href="#a9a7ef71bdba2a4f83b40dd7fad426207">More...</a><br /></td></tr>
<tr class="separator:a9a7ef71bdba2a4f83b40dd7fad426207"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f10cf7bc3c66a48184c2d722330c7e1"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a6f10cf7bc3c66a48184c2d722330c7e1">ast_http_get_contents</a> (int *return_length, struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers)</td></tr>
<tr class="memdesc:a6f10cf7bc3c66a48184c2d722330c7e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the contents (body) of the HTTP request.  <a href="#a6f10cf7bc3c66a48184c2d722330c7e1">More...</a><br /></td></tr>
<tr class="separator:a6f10cf7bc3c66a48184c2d722330c7e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e7522cd280df6ee043aad7bef980eb9"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a2e7522cd280df6ee043aad7bef980eb9">ast_http_get_cookies</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers)</td></tr>
<tr class="memdesc:a2e7522cd280df6ee043aad7bef980eb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get cookie from Request headers.  <a href="#a2e7522cd280df6ee043aad7bef980eb9">More...</a><br /></td></tr>
<tr class="separator:a2e7522cd280df6ee043aad7bef980eb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69c4e20e1d1d148576176a43562fa826"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a69c4e20e1d1d148576176a43562fa826">ast_http_get_json</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers)</td></tr>
<tr class="memdesc:a69c4e20e1d1d148576176a43562fa826"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get JSON from client Request Entity-Body, if content type is application/json.  <a href="#a69c4e20e1d1d148576176a43562fa826">More...</a><br /></td></tr>
<tr class="separator:a69c4e20e1d1d148576176a43562fa826"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac000c497701f197370cbef5aa4c1a92e"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#ac000c497701f197370cbef5aa4c1a92e">ast_http_get_post_vars</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers)</td></tr>
<tr class="memdesc:ac000c497701f197370cbef5aa4c1a92e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get post variables from client Request Entity-Body, if content type is application/x-www-form-urlencoded.  <a href="#ac000c497701f197370cbef5aa4c1a92e">More...</a><br /></td></tr>
<tr class="separator:ac000c497701f197370cbef5aa4c1a92e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a927d764492a7c0d2341ebb35994d9e81"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a927d764492a7c0d2341ebb35994d9e81">ast_http_header_match</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *expected_name, const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>, const char *expected_value)</td></tr>
<tr class="memdesc:a927d764492a7c0d2341ebb35994d9e81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the header and value match (case insensitive) their associated expected values.  <a href="#a927d764492a7c0d2341ebb35994d9e81">More...</a><br /></td></tr>
<tr class="separator:a927d764492a7c0d2341ebb35994d9e81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20dc0ed36f151f2cfd588ee64b737011"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a20dc0ed36f151f2cfd588ee64b737011">ast_http_header_match_in</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *expected_name, const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>, const char *expected_value)</td></tr>
<tr class="memdesc:a20dc0ed36f151f2cfd588ee64b737011"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the header name matches the expected header name. If so, then check to see if the value can be located in the expected value.  <a href="#a20dc0ed36f151f2cfd588ee64b737011">More...</a><br /></td></tr>
<tr class="separator:a20dc0ed36f151f2cfd588ee64b737011"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b1e02f7f0b46b21d8b3750d40aff87b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a1b1e02f7f0b46b21d8b3750d40aff87b">ast_http_header_parse</a> (char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, char **<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, char **<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="memdesc:a1b1e02f7f0b46b21d8b3750d40aff87b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse a header into the given name/value strings.  <a href="#a1b1e02f7f0b46b21d8b3750d40aff87b">More...</a><br /></td></tr>
<tr class="separator:a1b1e02f7f0b46b21d8b3750d40aff87b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add40a4aab8126b7700387d428c830f18"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#add40a4aab8126b7700387d428c830f18">ast_http_manid_from_vars</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers)</td></tr>
<tr class="memdesc:add40a4aab8126b7700387d428c830f18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return manager id, if exist, from request headers.  <a href="#add40a4aab8126b7700387d428c830f18">More...</a><br /></td></tr>
<tr class="separator:add40a4aab8126b7700387d428c830f18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0059c10f2538cfa09f9979d5fefd5638"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a0059c10f2538cfa09f9979d5fefd5638">ast_http_prefix</a> (char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</td></tr>
<tr class="memdesc:a0059c10f2538cfa09f9979d5fefd5638"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the current prefix.  <a href="#a0059c10f2538cfa09f9979d5fefd5638">More...</a><br /></td></tr>
<tr class="separator:a0059c10f2538cfa09f9979d5fefd5638"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0286838ed2b93e0d77fe9d7af8a37b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#ab0286838ed2b93e0d77fe9d7af8a37b5">ast_http_request_close_on_completion</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser)</td></tr>
<tr class="memdesc:ab0286838ed2b93e0d77fe9d7af8a37b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request the HTTP connection be closed after this HTTP request.  <a href="#ab0286838ed2b93e0d77fe9d7af8a37b5">More...</a><br /></td></tr>
<tr class="separator:ab0286838ed2b93e0d77fe9d7af8a37b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa042c9c6e2344db5e8a8d97683424b3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#aaa042c9c6e2344db5e8a8d97683424b3">ast_http_response_status_line</a> (const char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, const char *<a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a>, int code)</td></tr>
<tr class="memdesc:aaa042c9c6e2344db5e8a8d97683424b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse the http response status line.  <a href="#aaa042c9c6e2344db5e8a8d97683424b3">More...</a><br /></td></tr>
<tr class="separator:aaa042c9c6e2344db5e8a8d97683424b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0448c9f4a66b6ee7994870b187e185b4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a0448c9f4a66b6ee7994870b187e185b4">ast_http_send</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, enum <a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80ef">ast_http_method</a> <a class="el" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>, int status_code, const char *status_title, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> *http_header, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="el" href="../../da/d7c/utils_2frame_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, int fd, unsigned int static_content)</td></tr>
<tr class="memdesc:a0448c9f4a66b6ee7994870b187e185b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic function for sending HTTP/1.1 response.  <a href="#a0448c9f4a66b6ee7994870b187e185b4">More...</a><br /></td></tr>
<tr class="separator:a0448c9f4a66b6ee7994870b187e185b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b30188fccd09ea5f099a088b325a190"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a5b30188fccd09ea5f099a088b325a190">ast_http_uri_link</a> (struct <a class="el" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a> *urih)</td></tr>
<tr class="memdesc:a5b30188fccd09ea5f099a088b325a190"><td class="mdescLeft">&#160;</td><td class="mdescRight">Link the new uri into the list.  <a href="#a5b30188fccd09ea5f099a088b325a190">More...</a><br /></td></tr>
<tr class="separator:a5b30188fccd09ea5f099a088b325a190"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc4e71c538d9c1ad56b8e4a2e46bed35"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#abc4e71c538d9c1ad56b8e4a2e46bed35">ast_http_uri_unlink</a> (struct <a class="el" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a> *urih)</td></tr>
<tr class="memdesc:abc4e71c538d9c1ad56b8e4a2e46bed35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a URI handler.  <a href="#abc4e71c538d9c1ad56b8e4a2e46bed35">More...</a><br /></td></tr>
<tr class="separator:abc4e71c538d9c1ad56b8e4a2e46bed35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae05bfd31702ddfd156bd1312ccbf2441"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#ae05bfd31702ddfd156bd1312ccbf2441">ast_http_uri_unlink_all_with_key</a> (const char *key)</td></tr>
<tr class="memdesc:ae05bfd31702ddfd156bd1312ccbf2441"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister all handlers with matching key.  <a href="#ae05bfd31702ddfd156bd1312ccbf2441">More...</a><br /></td></tr>
<tr class="separator:ae05bfd31702ddfd156bd1312ccbf2441"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1af65cc256b1c374d1f42ff2cb85a4e5"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d5/dbf/structast__http__auth.html">ast_http_auth</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a1af65cc256b1c374d1f42ff2cb85a4e5">auth_create</a> (const char *userid, const char *<a class="el" href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a>)</td></tr>
<tr class="separator:a1af65cc256b1c374d1f42ff2cb85a4e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafe33264f49ecf610f7867ca34e89613"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#aafe33264f49ecf610f7867ca34e89613">chunked_atoh</a> (const char *s, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</td></tr>
<tr class="separator:aafe33264f49ecf610f7867ca34e89613"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdfa71c968840ceb0eb770bad2735abf"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#afdfa71c968840ceb0eb770bad2735abf">get_content_length</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers)</td></tr>
<tr class="memdesc:afdfa71c968840ceb0eb770bad2735abf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the value of the Content-Length header.  <a href="#afdfa71c968840ceb0eb770bad2735abf">More...</a><br /></td></tr>
<tr class="separator:afdfa71c968840ceb0eb770bad2735abf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad06499f4d8764c97a4cd7750b8e199f3"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#ad06499f4d8764c97a4cd7750b8e199f3">get_content_type</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers)</td></tr>
<tr class="memdesc:ad06499f4d8764c97a4cd7750b8e199f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the content type specified in the "Content-Type" header.  <a href="#ad06499f4d8764c97a4cd7750b8e199f3">More...</a><br /></td></tr>
<tr class="separator:ad06499f4d8764c97a4cd7750b8e199f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b70578b4ddd7767d3f33e41bdade8a8"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a4b70578b4ddd7767d3f33e41bdade8a8">get_header</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, const char *field_name)</td></tr>
<tr class="memdesc:a4b70578b4ddd7767d3f33e41bdade8a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the header with the given field name.  <a href="#a4b70578b4ddd7767d3f33e41bdade8a8">More...</a><br /></td></tr>
<tr class="separator:a4b70578b4ddd7767d3f33e41bdade8a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a329db7109281018b7098339ef58e9b4e"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a329db7109281018b7098339ef58e9b4e">get_transfer_encoding</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers)</td></tr>
<tr class="memdesc:a329db7109281018b7098339ef58e9b4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the value of the Transfer-Encoding header.  <a href="#a329db7109281018b7098339ef58e9b4e">More...</a><br /></td></tr>
<tr class="separator:a329db7109281018b7098339ef58e9b4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd384ccb6510fda645ef76636af6642a"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#abd384ccb6510fda645ef76636af6642a">handle_show_http</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:abd384ccb6510fda645ef76636af6642a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb8c9004124fd9ace0a57f2d222ff9ad"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#adb8c9004124fd9ace0a57f2d222ff9ad">handle_uri</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, char *uri, enum <a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80ef">ast_http_method</a> <a class="el" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers)</td></tr>
<tr class="separator:adb8c9004124fd9ace0a57f2d222ff9ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cab07b884d4c0d4e380ca603478ddaf"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a8cab07b884d4c0d4e380ca603478ddaf">http_body_check_chunk_sync</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser)</td></tr>
<tr class="separator:a8cab07b884d4c0d4e380ca603478ddaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0407b8b04eb198ad0b20136d3ec4fa6d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a0407b8b04eb198ad0b20136d3ec4fa6d">http_body_discard_chunk_trailer_headers</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser)</td></tr>
<tr class="separator:a0407b8b04eb198ad0b20136d3ec4fa6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74e0dc6d3ec99536cb67408015622210"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a74e0dc6d3ec99536cb67408015622210">http_body_discard_contents</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, int length, const char *what_getting)</td></tr>
<tr class="separator:a74e0dc6d3ec99536cb67408015622210"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af79aa289c3929912006d5757d19d6136"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#af79aa289c3929912006d5757d19d6136">http_body_get_chunk_length</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser)</td></tr>
<tr class="separator:af79aa289c3929912006d5757d19d6136"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2e59f3466d22103f61bfd928bbd9e19"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#ab2e59f3466d22103f61bfd928bbd9e19">http_body_read_contents</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, int length, const char *what_getting)</td></tr>
<tr class="separator:ab2e59f3466d22103f61bfd928bbd9e19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a104dfc8d09b06044f2c35f99802c5ffe"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a104dfc8d09b06044f2c35f99802c5ffe">http_check_connection_close</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers)</td></tr>
<tr class="separator:a104dfc8d09b06044f2c35f99802c5ffe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a409d88e2752cd7a0034f184ab130a6dc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a409d88e2752cd7a0034f184ab130a6dc">http_request_headers_get</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> **headers)</td></tr>
<tr class="separator:a409d88e2752cd7a0034f184ab130a6dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46ab7be436b65128e5cbe8a4cbecf9fa"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a46ab7be436b65128e5cbe8a4cbecf9fa">http_request_tracking_init</a> (struct <a class="el" href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a> *<a class="el" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a>)</td></tr>
<tr class="separator:a46ab7be436b65128e5cbe8a4cbecf9fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4480bab3d6e6cab9e1004d275ca3fc90"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a4480bab3d6e6cab9e1004d275ca3fc90">http_request_tracking_setup</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers)</td></tr>
<tr class="separator:a4480bab3d6e6cab9e1004d275ca3fc90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0605800ec02aa2a6ffd42af6ba06b98f"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a0605800ec02aa2a6ffd42af6ba06b98f">httpd_helper_thread</a> (void *arg)</td></tr>
<tr class="separator:a0605800ec02aa2a6ffd42af6ba06b98f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad93caa5af16f64b49525f28b5ec0a5c6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#ad93caa5af16f64b49525f28b5ec0a5c6">httpd_process_request</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser)</td></tr>
<tr class="separator:ad93caa5af16f64b49525f28b5ec0a5c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a555a4644192793b6aa436f3982ab09"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a1a555a4644192793b6aa436f3982ab09">httpstatus_callback</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, const struct <a class="el" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a> *urih, const char *uri, enum <a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80ef">ast_http_method</a> <a class="el" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *get_vars, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers)</td></tr>
<tr class="separator:a1a555a4644192793b6aa436f3982ab09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51d0195b6167cb6e4661f6aec72382e9"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a51d0195b6167cb6e4661f6aec72382e9">parse_cookies</a> (const char *cookies)</td></tr>
<tr class="separator:a51d0195b6167cb6e4661f6aec72382e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c6ac25ea7536c0bc9ed18cbcf917527"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a7c6ac25ea7536c0bc9ed18cbcf917527">reload_module</a> (void)</td></tr>
<tr class="separator:a7c6ac25ea7536c0bc9ed18cbcf917527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96830ad81e8b0d664a6b681bc90edb92"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a96830ad81e8b0d664a6b681bc90edb92">remove_excess_lws</a> (char *s)</td></tr>
<tr class="separator:a96830ad81e8b0d664a6b681bc90edb92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fea3758bd8ff4b078886120bb6c5f12"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a4fea3758bd8ff4b078886120bb6c5f12">static_callback</a> (struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser, const struct <a class="el" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a> *urih, const char *uri, enum <a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80ef">ast_http_method</a> <a class="el" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *get_vars, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers)</td></tr>
<tr class="separator:a4fea3758bd8ff4b078886120bb6c5f12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a835b27a90d895a488e4e14cc3d2dee8c">AST_MODFLAG_GLOBAL_SYMBOLS</a> | <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Built-<a class="el" href="../../da/d7c/utils_2frame_8h.html#aca392a8d3941cd0740aef3ad92545d67">in</a> HTTP Server&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .reload = reload_module, .load_pri = AST_MODPRI_CORE, .requires = &quot;extconfig&quot;, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8db57df0d65cdcb49f817ba20f1addfc"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../d8/d9e/structast__cfhttp__methods__text.html">ast_cfhttp_methods_text</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a8db57df0d65cdcb49f817ba20f1addfc">ast_http_methods_text</a> []</td></tr>
<tr class="separator:a8db57df0d65cdcb49f817ba20f1addfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62ac5f089c743a2d4113e518818000fa"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a62ac5f089c743a2d4113e518818000fa">cli_http</a> []</td></tr>
<tr class="separator:a62ac5f089c743a2d4113e518818000fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef37d79896cadcf96c364f8c5609fd2f"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../da/d2b/structast__tcptls__session__args.html">ast_tcptls_session_args</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#aef37d79896cadcf96c364f8c5609fd2f">http_desc</a></td></tr>
<tr class="separator:aef37d79896cadcf96c364f8c5609fd2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5086e142ada070c22242a51c58f3da4a"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a5086e142ada070c22242a51c58f3da4a">http_server_name</a> [<a class="el" href="../../dd/d43/http_8c.html#af5c7bcd09f0d5f4bb9e09bd401130b95">MAX_SERVER_NAME_LENGTH</a>]</td></tr>
<tr class="separator:a5086e142ada070c22242a51c58f3da4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c80a21a7aa2d6eee02f11b48485a331"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d5/d90/structast__tls__config.html">ast_tls_config</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a></td></tr>
<tr class="separator:a1c80a21a7aa2d6eee02f11b48485a331"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad04999a886797d6dfe4fc6f6742527f5"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../da/d2b/structast__tcptls__session__args.html">ast_tcptls_session_args</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#ad04999a886797d6dfe4fc6f6742527f5">https_desc</a></td></tr>
<tr class="separator:ad04999a886797d6dfe4fc6f6742527f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac966dd481c59b05f2c113dc4365d72f6"><td class="memItemLeft" >struct {</td></tr>
<tr class="memitem:af9b32121c4ad80b0887a3d73fd24de5f"><td class="memItemLeft" >&#160;&#160;&#160;const char *&#160;&#160;&#160;<a class="el" href="../../dd/d43/http_8c.html#af9b32121c4ad80b0887a3d73fd24de5f">ext</a></td></tr>
<tr class="separator:af9b32121c4ad80b0887a3d73fd24de5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3189f2c804f88ece5a83d4772e11ff9e"><td class="memItemLeft" >&#160;&#160;&#160;const char *&#160;&#160;&#160;<a class="el" href="../../dd/d43/http_8c.html#a3189f2c804f88ece5a83d4772e11ff9e">mtype</a></td></tr>
<tr class="separator:a3189f2c804f88ece5a83d4772e11ff9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac966dd481c59b05f2c113dc4365d72f6"><td class="memItemLeft" valign="top">}&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#ac966dd481c59b05f2c113dc4365d72f6">mimetypes</a> []</td></tr>
<tr class="memdesc:ac966dd481c59b05f2c113dc4365d72f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Limit the kinds of files we're willing to serve up.  <a href="#ac966dd481c59b05f2c113dc4365d72f6">More...</a><br /></td></tr>
<tr class="separator:ac966dd481c59b05f2c113dc4365d72f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f25bc812d09fedb86bf394c01061c56"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a> [<a class="el" href="../../d0/d0c/res__statsd_8c.html#aecb32037d29b6d4c9d903ba03b56f065">MAX_PREFIX</a>]</td></tr>
<tr class="separator:a6f25bc812d09fedb86bf394c01061c56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7aa5af3eb4d501b0c44c590507f751e8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a7aa5af3eb4d501b0c44c590507f751e8">session_count</a> = 0</td></tr>
<tr class="separator:a7aa5af3eb4d501b0c44c590507f751e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fca7b13ef64698410758fcd096c048b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a7fca7b13ef64698410758fcd096c048b">session_inactivity</a> = <a class="el" href="../../dd/d43/http_8c.html#a8418419ee998a4151ff9d2d3e61694b1">DEFAULT_SESSION_INACTIVITY</a></td></tr>
<tr class="separator:a7fca7b13ef64698410758fcd096c048b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad49ee0814a6efb14658ec87f2f6a86fb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#ad49ee0814a6efb14658ec87f2f6a86fb">session_keep_alive</a> = <a class="el" href="../../dd/d43/http_8c.html#aa35c8da693177f283276e6250ab2ea61">DEFAULT_SESSION_KEEP_ALIVE</a></td></tr>
<tr class="separator:ad49ee0814a6efb14658ec87f2f6a86fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9b90c23264e36e6492a2eb8598c9bf0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#af9b90c23264e36e6492a2eb8598c9bf0">session_limit</a> = <a class="el" href="../../dd/d43/http_8c.html#afe0d8ae0cb8f0a0e291943ce1140c766">DEFAULT_SESSION_LIMIT</a></td></tr>
<tr class="separator:af9b90c23264e36e6492a2eb8598c9bf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5bbe302426a5b211e0f2a2bed2e7a75"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#ac5bbe302426a5b211e0f2a2bed2e7a75">static_uri</a></td></tr>
<tr class="separator:ac5bbe302426a5b211e0f2a2bed2e7a75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad15ea39a758fbebb32d28a1060107f2b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#ad15ea39a758fbebb32d28a1060107f2b">static_uri_enabled</a></td></tr>
<tr class="separator:ad15ea39a758fbebb32d28a1060107f2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b7fe7f8acc26c737d74df3696250165"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a8b7fe7f8acc26c737d74df3696250165">status_uri</a></td></tr>
<tr class="separator:a8b7fe7f8acc26c737d74df3696250165"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e7930049dbf3967931097a8f62333d6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a5e7930049dbf3967931097a8f62333d6">status_uri_enabled</a></td></tr>
<tr class="separator:a5e7930049dbf3967931097a8f62333d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c6fa5595c4deca7f0f058a1e03d007f"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a2c6fa5595c4deca7f0f058a1e03d007f">uri_redirects</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:a2c6fa5595c4deca7f0f058a1e03d007f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ae2c5e2dfda054fa60ed7a905fee59c"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/ddf/structuris.html">uris</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d43/http_8c.html#a1ae2c5e2dfda054fa60ed7a905fee59c">uris</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:a1ae2c5e2dfda054fa60ed7a905fee59c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>http server for AMI access </p>
<dl class="section author"><dt>Author</dt><dd>Mark Spencer <a href="#" onclick="location.href='mai'+'lto:'+'mar'+'ks'+'ter'+'@d'+'igi'+'um'+'.co'+'m'; return false;">marks<span style="display: none;">.nosp@m.</span>ter@<span style="display: none;">.nosp@m.</span>digiu<span style="display: none;">.nosp@m.</span>m.co<span style="display: none;">.nosp@m.</span>m</a></dd></dl>
<p>This program implements a tiny http server and was inspired by micro-httpd by Jef Poskanzer</p>
<p>GMime <a href="http://spruce.sourceforge.net/gmime/">http://spruce.sourceforge.net/gmime/</a></p>
<p><a class="el" href="../../d1/d71/AstHTTP.html">AMI over HTTP support</a> - AMI over the http protocol </p>

<p class="definition">Definition in file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad599c720bbdc2219933755c4a4364cbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad599c720bbdc2219933755c4a4364cbe">&#9670;&nbsp;</a></span>BASIC_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BASIC_LEN&#160;&#160;&#160;6</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>strlen(BASIC_PREFIX) </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01577">1577</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l01579">ast_http_get_auth()</a>.</p>

</div>
</div>
<a id="a4905fca3498c74da82b5726e68587f40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4905fca3498c74da82b5726e68587f40">&#9670;&nbsp;</a></span>BASIC_PREFIX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BASIC_PREFIX&#160;&#160;&#160;&quot;Basic &quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01576">1576</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l01579">ast_http_get_auth()</a>.</p>

</div>
</div>
<a id="a16b710f592bf8f7900666392adc444dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16b710f592bf8f7900666392adc444dc">&#9670;&nbsp;</a></span>DEFAULT_PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_PORT&#160;&#160;&#160;8088</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00069">69</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>.</p>

</div>
</div>
<a id="af5a66da7db69b05a371613d80051da9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5a66da7db69b05a371613d80051da9f">&#9670;&nbsp;</a></span>DEFAULT_RESPONSE_HEADER_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_RESPONSE_HEADER_LENGTH&#160;&#160;&#160;512</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Max size for the http response header </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00081">81</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l00622">ast_http_auth()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l00648">ast_http_error()</a>.</p>

</div>
</div>
<a id="a8418419ee998a4151ff9d2d3e61694b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8418419ee998a4151ff9d2d3e61694b1">&#9670;&nbsp;</a></span>DEFAULT_SESSION_INACTIVITY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_SESSION_INACTIVITY&#160;&#160;&#160;30000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>(ms) Idle time waiting for data. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00073">73</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>.</p>

</div>
</div>
<a id="aa35c8da693177f283276e6250ab2ea61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa35c8da693177f283276e6250ab2ea61">&#9670;&nbsp;</a></span>DEFAULT_SESSION_KEEP_ALIVE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_SESSION_KEEP_ALIVE&#160;&#160;&#160;15000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>(ms) Idle time between HTTP requests </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00077">77</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>.</p>

</div>
</div>
<a id="afe0d8ae0cb8f0a0e291943ce1140c766"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe0d8ae0cb8f0a0e291943ce1140c766">&#9670;&nbsp;</a></span>DEFAULT_SESSION_LIMIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_SESSION_LIMIT&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00071">71</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>.</p>

</div>
</div>
<a id="abc2a3ec1424866bc76df0b0a4b8c046e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc2a3ec1424866bc76df0b0a4b8c046e">&#9670;&nbsp;</a></span>DEFAULT_TLS_PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_TLS_PORT&#160;&#160;&#160;8089</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00070">70</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>.</p>

</div>
</div>
<a id="a35f98eb496f88107d8571d3abbe9ef5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35f98eb496f88107d8571d3abbe9ef5f">&#9670;&nbsp;</a></span>INITIAL_RESPONSE_BODY_BUFFER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INITIAL_RESPONSE_BODY_BUFFER&#160;&#160;&#160;1024</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initial response body length. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00092">92</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l00567">ast_http_create_response()</a>.</p>

</div>
</div>
<a id="aace3c09acf4173f55f74d5c65976b23a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aace3c09acf4173f55f74d5c65976b23a">&#9670;&nbsp;</a></span>MAX_CONTENT_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_CONTENT_LENGTH&#160;&#160;&#160;40960</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum application/json or application/x-www-form-urlencoded body content length. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00085">85</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l01181">ast_http_get_contents()</a>.</p>

</div>
</div>
<a id="aed5af68d7cd4bc4ed1fdca3e2de959af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed5af68d7cd4bc4ed1fdca3e2de959af">&#9670;&nbsp;</a></span>MAX_HTTP_LINE_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_HTTP_LINE_LENGTH&#160;&#160;&#160;4096</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum line length for HTTP requests. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00099">99</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l01100">http_body_discard_chunk_trailer_headers()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01041">http_body_get_chunk_length()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01757">http_request_headers_get()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l01839">httpd_process_request()</a>.</p>

</div>
</div>
<a id="a5a933ca6c1a804b56ec28e07f9c2a911"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a933ca6c1a804b56ec28e07f9c2a911">&#9670;&nbsp;</a></span>MAX_HTTP_REQUEST_HEADERS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_HTTP_REQUEST_HEADERS&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Limit the number of request headers in case the sender is being ridiculous. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01744">1744</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l01757">http_request_headers_get()</a>.</p>

</div>
</div>
<a id="aecb32037d29b6d4c9d903ba03b56f065"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecb32037d29b6d4c9d903ba03b56f065">&#9670;&nbsp;</a></span>MAX_PREFIX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_PREFIX&#160;&#160;&#160;80</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00068">68</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>.</p>

</div>
</div>
<a id="af5c7bcd09f0d5f4bb9e09bd401130b95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5c7bcd09f0d5f4bb9e09bd401130b95">&#9670;&nbsp;</a></span>MAX_SERVER_NAME_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_SERVER_NAME_LENGTH&#160;&#160;&#160;128</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Max size for the http server name </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00079">79</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00567">ast_http_create_response()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l00456">ast_http_send()</a>.</p>

</div>
</div>
<a id="a285225f3d0ac09c658f9b505ebaab250"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a285225f3d0ac09c658f9b505ebaab250">&#9670;&nbsp;</a></span>MIN_INITIAL_REQUEST_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_INITIAL_REQUEST_TIMEOUT&#160;&#160;&#160;10000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>(ms) Min timeout for initial HTTP request to start coming in. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00075">75</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l01937">httpd_helper_thread()</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a647c59574088759d4b555ceb63d9df89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a647c59574088759d4b555ceb63d9df89">&#9670;&nbsp;</a></span>http_private_flags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89">http_private_flags</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920"></a>HTTP_FLAG_HAS_BODY&#160;</td><td class="fielddoc"><p>TRUE if the HTTP request has a body. </p>
</td></tr>
<tr><td class="fieldname"><a id="a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88"></a>HTTP_FLAG_BODY_READ&#160;</td><td class="fielddoc"><p>TRUE if the HTTP request body has been read. </p>
</td></tr>
<tr><td class="fieldname"><a id="a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f"></a>HTTP_FLAG_CLOSE_ON_COMPLETION&#160;</td><td class="fielddoc"><p>TRUE if the HTTP request must close when completed. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00439">439</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                        {<span class="comment"></span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">   /*! TRUE if the HTTP request has a body. */</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920">HTTP_FLAG_HAS_BODY</a> = (1 &lt;&lt; 0),<span class="comment"></span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">   /*! TRUE if the HTTP request body has been read. */</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88">HTTP_FLAG_BODY_READ</a> = (1 &lt;&lt; 1),<span class="comment"></span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">   /*! TRUE if the HTTP request must close when completed. */</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a> = (1 &lt;&lt; 2),</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;};</div><div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920">HTTP_FLAG_HAS_BODY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00441">http.c:441</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88">HTTP_FLAG_BODY_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00443">http.c:443</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00445">http.c:445</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a3ce71802a2d0296a3478fcfeb3c21aac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ce71802a2d0296a3478fcfeb3c21aac">&#9670;&nbsp;</a></span>__ast_http_load()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int __ast_http_load </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reload</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l02077">2077</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00135">ast_tcptls_session_args::accept_fd</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l02022">add_redirect()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00054">AST_AF_UNSPEC</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00062">AST_CERTFILE</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01290">ast_config_destroy()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l03154">ast_config_load2()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d2/d0b/version_8c_source.html#l00016">ast_get_version()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00673">ast_http_uri_link()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00705">ast_http_uri_unlink()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l03657">ast_parse_arg()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00843">AST_RWLIST_REMOVE_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00521">ast_sockaddr_port</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00280">ast_sockaddr_resolve()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00537">ast_sockaddr_set_port</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00140">ast_sockaddr_setnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00080">AST_SSL_DISABLE_TLSV1</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00078">AST_SSL_SERVER_CIPHER_ORDER</a>, <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00570">ast_ssl_setup()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00685">ast_tcptls_server_start()</a>, <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00849">ast_tcptls_server_stop()</a>, <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00875">ast_tls_read_conf()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01951">ast_true()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01216">ast_variable_browse()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00093">ast_tls_config::capath</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00089">ast_tls_config::certfile</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00091">ast_tls_config::cipher</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00043">CONFIG_FLAG_FILEUNCHANGED</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">CONFIG_STATUS_FILEINVALID</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00059">CONFIG_STATUS_FILEUNCHANGED</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00069">DEFAULT_PORT</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00073">DEFAULT_SESSION_INACTIVITY</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00077">DEFAULT_SESSION_KEEP_ALIVE</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00071">DEFAULT_SESSION_LIMIT</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00070">DEFAULT_TLS_PORT</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00088">ast_tls_config::enabled</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00091">enabled</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00094">ast_tls_config::flags</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00104">http_server_name</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00111">http_tls_cfg</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00095">ast_variable::lineno</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00130">ast_tcptls_session_args::local_address</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00068">MAX_PREFIX</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00079">MAX_SERVER_NAME_LENGTH</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01118">PARSE_DEFAULT</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01125">PARSE_IN_RANGE</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01086">PARSE_INT32</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01087">PARSE_UINT32</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00141">prefix</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00090">ast_tls_config::pvtfile</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00107">session_inactivity</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00108">session_keep_alive</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00106">session_limit</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00142">static_uri_enabled</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00143">status_uri_enabled</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00134">ast_tcptls_session_args::tls_cfg</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02374">load_module()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l02334">reload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;{</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg;</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v;</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a> = 0;</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;   <span class="keywordtype">int</span> new_static_uri_enabled = 0;</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;   <span class="keywordtype">int</span> new_status_uri_enabled = 1; <span class="comment">/* Default to enabled for BC */</span></div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;   <span class="keywordtype">char</span> newprefix[<a class="code" href="../../dd/d43/http_8c.html#aecb32037d29b6d4c9d903ba03b56f065">MAX_PREFIX</a>] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;   <span class="keywordtype">char</span> server_name[<a class="code" href="../../dd/d43/http_8c.html#af5c7bcd09f0d5f4bb9e09bd401130b95">MAX_SERVER_NAME_LENGTH</a>];</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d02/structhttp__uri__redirect.html">http_uri_redirect</a> *redirect;</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> config_flags = { <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a> ? <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fafa887389dc380bbdcffb65fec379f037">CONFIG_FLAG_FILEUNCHANGED</a> : 0 };</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;   uint32_t bindport = <a class="code" href="../../dd/d43/http_8c.html#a16b710f592bf8f7900666392adc444dc">DEFAULT_PORT</a>;</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *, addrs, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;   <span class="keywordtype">int</span> num_addrs = 0;</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;   <span class="keywordtype">int</span> http_tls_was_enabled = 0;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;   cfg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aab3eac8fa82a86a93c074deb7b77dbc9">ast_config_load2</a>(<span class="stringliteral">&quot;http.conf&quot;</span>, <span class="stringliteral">&quot;http&quot;</span>, config_flags);</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;   <span class="keywordflow">if</span> (!cfg || cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>) {</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;   }</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;   <span class="comment">/* Even if the http.conf hasn&#39;t been updated, the TLS certs/keys may have been */</span></div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;   <span class="keywordflow">if</span> (cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a846844eb2c4eb44554445936b3770711">CONFIG_STATUS_FILEUNCHANGED</a>) {</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a>.<a class="code" href="../../d5/d90/structast__tls__config.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a> &amp;&amp; <a class="code" href="../../d4/ddf/tcptls_8h.html#a24ff4bad1d2894ae3cae4e555d508fd0">ast_ssl_setup</a>(<a class="code" href="../../dd/d43/http_8c.html#ad04999a886797d6dfe4fc6f6742527f5">https_desc</a>.<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#aeb4a21e3ae033a326cc9dfd20a7ab074">tls_cfg</a>)) {</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;         <a class="code" href="../../d4/ddf/tcptls_8h.html#a29375a4482c8de1e9879b97be2e88bf0">ast_tcptls_server_start</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#ad04999a886797d6dfe4fc6f6742527f5">https_desc</a>);</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;      }</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;   }</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;   http_tls_was_enabled = (<a class="code" href="../../d0/d29/cdr__mysql_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a> &amp;&amp; <a class="code" href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a>.<a class="code" href="../../d5/d90/structast__tls__config.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a>);</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a>.<a class="code" href="../../d5/d90/structast__tls__config.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a> = 0;</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a>.<a class="code" href="../../d5/d90/structast__tls__config.html#a333dffcec025fcdbee0676476f401685">certfile</a>);</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a>.<a class="code" href="../../d5/d90/structast__tls__config.html#a333dffcec025fcdbee0676476f401685">certfile</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../d4/ddf/tcptls_8h.html#a1850a109f5255895d75980912723ae7c">AST_CERTFILE</a>);</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a>.<a class="code" href="../../d5/d90/structast__tls__config.html#a8331a8443119478cd6b1daeb707a94dc">capath</a>);</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a>.<a class="code" href="../../d5/d90/structast__tls__config.html#a8331a8443119478cd6b1daeb707a94dc">capath</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a>.<a class="code" href="../../d5/d90/structast__tls__config.html#a6005f11af6a60f4169876fcd075595ca">pvtfile</a>);</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a>.<a class="code" href="../../d5/d90/structast__tls__config.html#a6005f11af6a60f4169876fcd075595ca">pvtfile</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;   <span class="comment">/* Apply modern intermediate settings according to the Mozilla OpSec team as of July 30th, 2015 but disable TLSv1 */</span></div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a>.<a class="code" href="../../d5/d90/structast__tls__config.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../d4/ddf/tcptls_8h.html#a667a09d76fe878551ac296875754971cae2335e286c6332acafc11c55bda2b3ef">AST_SSL_DISABLE_TLSV1</a> | <a class="code" href="../../d4/ddf/tcptls_8h.html#a667a09d76fe878551ac296875754971cabd2609384690cb305648269648e9ff46">AST_SSL_SERVER_CIPHER_ORDER</a>);</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a>.<a class="code" href="../../d5/d90/structast__tls__config.html#a3d12e13733aa5172b5cb091fbf8ea478">cipher</a>);</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a>.<a class="code" href="../../d5/d90/structast__tls__config.html#a3d12e13733aa5172b5cb091fbf8ea478">cipher</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA&quot;</span>);</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>);</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;   <span class="keywordflow">while</span> ((redirect = <a class="code" href="../../df/d90/linkedlists_8h.html#a3d3aa4fb3b4ba38ad8d6d255d97e037c">AST_RWLIST_REMOVE_HEAD</a>(&amp;<a class="code" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>, <a class="code" href="../../d3/d96/structentry.html">entry</a>))) {</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirect);</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;   }</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>);</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#ad91b5dfe4c188d15f4b2e9e2ec5d8864">ast_sockaddr_setnull</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#ad04999a886797d6dfe4fc6f6742527f5">https_desc</a>.<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>);</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#af9b90c23264e36e6492a2eb8598c9bf0">session_limit</a> = <a class="code" href="../../dd/d43/http_8c.html#afe0d8ae0cb8f0a0e291943ce1140c766">DEFAULT_SESSION_LIMIT</a>;</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#a7fca7b13ef64698410758fcd096c048b">session_inactivity</a> = <a class="code" href="../../dd/d43/http_8c.html#a8418419ee998a4151ff9d2d3e61694b1">DEFAULT_SESSION_INACTIVITY</a>;</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#ad49ee0814a6efb14658ec87f2f6a86fb">session_keep_alive</a> = <a class="code" href="../../dd/d43/http_8c.html#aa35c8da693177f283276e6250ab2ea61">DEFAULT_SESSION_KEEP_ALIVE</a>;</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;   snprintf(server_name, <span class="keyword">sizeof</span>(server_name), <span class="stringliteral">&quot;Asterisk/%s&quot;</span>, <a class="code" href="../../d5/db9/ast__version_8h.html#a7765c608aea948584928643ab3963b2a">ast_get_version</a>());</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;   v = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>);</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;   <span class="keywordflow">for</span> (; v; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;      <span class="comment">/* read tls config options while preventing unsupported options from being set */</span></div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;      <span class="keywordflow">if</span> (strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;tlscafile&quot;</span>)</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;         &amp;&amp; strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;tlscapath&quot;</span>)</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;         &amp;&amp; strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;tlscadir&quot;</span>)</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;         &amp;&amp; strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;tlsverifyclient&quot;</span>)</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;         &amp;&amp; strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;tlsdontverifyserver&quot;</span>)</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;         &amp;&amp; strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;tlsclientmethod&quot;</span>)</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;         &amp;&amp; strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;sslclientmethod&quot;</span>)</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;         &amp;&amp; !<a class="code" href="../../d4/ddf/tcptls_8h.html#a79d9a3beb22f1fb8551cef625e9fd8a1">ast_tls_read_conf</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a>, &amp;<a class="code" href="../../dd/d43/http_8c.html#ad04999a886797d6dfe4fc6f6742527f5">https_desc</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>)) {</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;      }</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;servername&quot;</span>)) {</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>)) {</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(server_name, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(server_name));</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;            server_name[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;         }</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;enabled&quot;</span>)) {</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;         enabled = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;enablestatic&quot;</span>) || !strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;enable_static&quot;</span>)) {</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;         new_static_uri_enabled = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;enable_status&quot;</span>)) {</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;         new_status_uri_enabled = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;bindport&quot;</span>)) {</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7e9aea581abeaae5d3799367d95284ac">ast_parse_arg</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fadba5c0b0122c30502fe469a55fea3c4b">PARSE_UINT32</a> | <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa37848843c0c65e9ce998148c2f16d585">PARSE_IN_RANGE</a> | <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569facc865488860e2c25dd9f80e5473cf760">PARSE_DEFAULT</a>,</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;            &amp;bindport, <a class="code" href="../../dd/d43/http_8c.html#a16b710f592bf8f7900666392adc444dc">DEFAULT_PORT</a>, 0, 65535)) {</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid port %s specified. Using default port %&quot;</span> PRId32 <span class="stringliteral">&quot;\n&quot;</span>,</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;               v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <a class="code" href="../../dd/d43/http_8c.html#a16b710f592bf8f7900666392adc444dc">DEFAULT_PORT</a>);</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;         }</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;bindaddr&quot;</span>)) {</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;         <span class="keywordflow">if</span> (!(num_addrs = <a class="code" href="../../db/df1/netsock2_8h.html#a8ba6f5b5a9de09137dd18fe2d9592880">ast_sockaddr_resolve</a>(&amp;addrs, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, 0, <a class="code" href="../../db/df1/netsock2_8h.html#a27c1625aa5fde74a6dec3d424733c579a97dcf13ca2f2ce3ce4c66de236e6f3f7">AST_AF_UNSPEC</a>))) {</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid bind address %s\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;         }</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;prefix&quot;</span>)) {</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>)) {</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;            newprefix[0] = <span class="charliteral">&#39;/&#39;</span>;</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(newprefix + 1, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(newprefix) - 1);</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;            newprefix[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;         }</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;redirect&quot;</span>)) {</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;         <a class="code" href="../../dd/d43/http_8c.html#a50af5ddf9c9a9dd76f2a1203f50dafdd">add_redirect</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;sessionlimit&quot;</span>)) {</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7e9aea581abeaae5d3799367d95284ac">ast_parse_arg</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fabac6774d4b76ec6847b57ccce4822738">PARSE_INT32</a> | <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569facc865488860e2c25dd9f80e5473cf760">PARSE_DEFAULT</a> | <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa37848843c0c65e9ce998148c2f16d585">PARSE_IN_RANGE</a>,</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;            &amp;<a class="code" href="../../dd/d43/http_8c.html#af9b90c23264e36e6492a2eb8598c9bf0">session_limit</a>, <a class="code" href="../../dd/d43/http_8c.html#afe0d8ae0cb8f0a0e291943ce1140c766">DEFAULT_SESSION_LIMIT</a>, 1, INT_MAX)) {</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid %s &#39;%s&#39; at line %d of http.conf\n&quot;</span>,</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;               v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>);</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;         }</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;session_inactivity&quot;</span>)) {</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7e9aea581abeaae5d3799367d95284ac">ast_parse_arg</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fabac6774d4b76ec6847b57ccce4822738">PARSE_INT32</a> | <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569facc865488860e2c25dd9f80e5473cf760">PARSE_DEFAULT</a> | <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa37848843c0c65e9ce998148c2f16d585">PARSE_IN_RANGE</a>,</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;            &amp;<a class="code" href="../../dd/d43/http_8c.html#a7fca7b13ef64698410758fcd096c048b">session_inactivity</a>, <a class="code" href="../../dd/d43/http_8c.html#a8418419ee998a4151ff9d2d3e61694b1">DEFAULT_SESSION_INACTIVITY</a>, 1, INT_MAX)) {</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid %s &#39;%s&#39; at line %d of http.conf\n&quot;</span>,</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;               v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>);</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;         }</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;session_keep_alive&quot;</span>)) {</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;         <span class="keywordflow">if</span> (sscanf(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;<a class="code" href="../../dd/d43/http_8c.html#ad49ee0814a6efb14658ec87f2f6a86fb">session_keep_alive</a>) != 1</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;            || <a class="code" href="../../dd/d43/http_8c.html#ad49ee0814a6efb14658ec87f2f6a86fb">session_keep_alive</a> &lt; 0) {</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;            <a class="code" href="../../dd/d43/http_8c.html#ad49ee0814a6efb14658ec87f2f6a86fb">session_keep_alive</a> = <a class="code" href="../../dd/d43/http_8c.html#aa35c8da693177f283276e6250ab2ea61">DEFAULT_SESSION_KEEP_ALIVE</a>;</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid %s &#39;%s&#39; at line %d of http.conf\n&quot;</span>,</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;               v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>);</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;         }</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Ignoring unknown option &#39;%s&#39; in http.conf\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;      }</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;   }</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;   <span class="keywordflow">if</span> (strcmp(<a class="code" href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a>, newprefix)) {</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a>, newprefix, <span class="keyword">sizeof</span>(<a class="code" href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a>));</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;   }</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../dd/d43/http_8c.html#a5086e142ada070c22242a51c58f3da4a">http_server_name</a>, server_name, <span class="keyword">sizeof</span>(<a class="code" href="../../dd/d43/http_8c.html#a5086e142ada070c22242a51c58f3da4a">http_server_name</a>));</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;   <span class="keywordflow">if</span> (num_addrs &amp;&amp; enabled) {</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;      <span class="keywordtype">int</span> i;</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; num_addrs; ++i) {</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#aef37d79896cadcf96c364f8c5609fd2f">http_desc</a>.<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>, &amp;addrs[i]);</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#aef37d79896cadcf96c364f8c5609fd2f">http_desc</a>.<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>)) {</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#aef37d79896cadcf96c364f8c5609fd2f">http_desc</a>.<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>, bindport);</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;         }</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;         <a class="code" href="../../d4/ddf/tcptls_8h.html#a29375a4482c8de1e9879b97be2e88bf0">ast_tcptls_server_start</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#aef37d79896cadcf96c364f8c5609fd2f">http_desc</a>);</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#aef37d79896cadcf96c364f8c5609fd2f">http_desc</a>.<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#ad6d7a8463d59a02084cf9d4360f46b79">accept_fd</a> == -1) {</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to start HTTP server for address %s\n&quot;</span>, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;addrs[i]));</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#ad91b5dfe4c188d15f4b2e9e2ec5d8864">ast_sockaddr_setnull</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#aef37d79896cadcf96c364f8c5609fd2f">http_desc</a>.<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>);</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(1, <span class="stringliteral">&quot;Bound HTTP server to address %s\n&quot;</span>, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;addrs[i]));</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;         }</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;      }</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;      <span class="comment">/* When no specific TLS bindaddr is specified, we just use</span></div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;<span class="comment">       * the non-TLS bindaddress here.</span></div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#ad04999a886797d6dfe4fc6f6742527f5">https_desc</a>.<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>) &amp;&amp; <a class="code" href="../../dd/d43/http_8c.html#aef37d79896cadcf96c364f8c5609fd2f">http_desc</a>.<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#ad6d7a8463d59a02084cf9d4360f46b79">accept_fd</a> != -1) {</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#ad04999a886797d6dfe4fc6f6742527f5">https_desc</a>.<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>, &amp;<a class="code" href="../../dd/d43/http_8c.html#aef37d79896cadcf96c364f8c5609fd2f">http_desc</a>.<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>);</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;         <span class="comment">/* Of course, we can&#39;t use the same port though.</span></div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;<span class="comment">          * Since no bind address was specified, we just use the</span></div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;<span class="comment">          * default TLS port</span></div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#ad04999a886797d6dfe4fc6f6742527f5">https_desc</a>.<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>, <a class="code" href="../../dd/d43/http_8c.html#abc2a3ec1424866bc76df0b0a4b8c046e">DEFAULT_TLS_PORT</a>);</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;      }</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;   }</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;   <span class="keywordflow">if</span> (http_tls_was_enabled &amp;&amp; !<a class="code" href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a>.<a class="code" href="../../d5/d90/structast__tls__config.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a>) {</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;      <a class="code" href="../../d4/ddf/tcptls_8h.html#a1fd4aa5038c9a488acc0f8017fe94fda">ast_tcptls_server_stop</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#ad04999a886797d6dfe4fc6f6742527f5">https_desc</a>);</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a>.<a class="code" href="../../d5/d90/structast__tls__config.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a> &amp;&amp; !<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#ad04999a886797d6dfe4fc6f6742527f5">https_desc</a>.<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>)) {</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;      <span class="comment">/* We can get here either because a TLS-specific address was specified</span></div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;<span class="comment">       * or because we copied the non-TLS address here. In the case where</span></div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;<span class="comment">       * we read an explicit address from the config, there may have been</span></div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;<span class="comment">       * no port specified, so we&#39;ll just use the default TLS port.</span></div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#ad04999a886797d6dfe4fc6f6742527f5">https_desc</a>.<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>)) {</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#ad04999a886797d6dfe4fc6f6742527f5">https_desc</a>.<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>, <a class="code" href="../../dd/d43/http_8c.html#abc2a3ec1424866bc76df0b0a4b8c046e">DEFAULT_TLS_PORT</a>);</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;      }</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d4/ddf/tcptls_8h.html#a24ff4bad1d2894ae3cae4e555d508fd0">ast_ssl_setup</a>(<a class="code" href="../../dd/d43/http_8c.html#ad04999a886797d6dfe4fc6f6742527f5">https_desc</a>.<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#aeb4a21e3ae033a326cc9dfd20a7ab074">tls_cfg</a>)) {</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;         <a class="code" href="../../d4/ddf/tcptls_8h.html#a29375a4482c8de1e9879b97be2e88bf0">ast_tcptls_server_start</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#ad04999a886797d6dfe4fc6f6742527f5">https_desc</a>);</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;      }</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;   }</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#ad15ea39a758fbebb32d28a1060107f2b">static_uri_enabled</a> &amp;&amp; !new_static_uri_enabled) {</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#abc4e71c538d9c1ad56b8e4a2e46bed35">ast_http_uri_unlink</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#ac5bbe302426a5b211e0f2a2bed2e7a75">static_uri</a>);</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d43/http_8c.html#ad15ea39a758fbebb32d28a1060107f2b">static_uri_enabled</a> &amp;&amp; new_static_uri_enabled) {</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#a5b30188fccd09ea5f099a088b325a190">ast_http_uri_link</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#ac5bbe302426a5b211e0f2a2bed2e7a75">static_uri</a>);</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;   }</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#ad15ea39a758fbebb32d28a1060107f2b">static_uri_enabled</a> = new_static_uri_enabled;</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#a5e7930049dbf3967931097a8f62333d6">status_uri_enabled</a> &amp;&amp; !new_status_uri_enabled) {</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#abc4e71c538d9c1ad56b8e4a2e46bed35">ast_http_uri_unlink</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#a8b7fe7f8acc26c737d74df3696250165">status_uri</a>);</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d43/http_8c.html#a5e7930049dbf3967931097a8f62333d6">status_uri_enabled</a> &amp;&amp; new_status_uri_enabled) {</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#a5b30188fccd09ea5f099a088b325a190">ast_http_uri_link</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#a8b7fe7f8acc26c737d74df3696250165">status_uri</a>);</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;   }</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#a5e7930049dbf3967931097a8f62333d6">status_uri_enabled</a> = new_status_uri_enabled;</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="structast__tls__config_html_a6005f11af6a60f4169876fcd075595ca"><div class="ttname"><a href="../../d5/d90/structast__tls__config.html#a6005f11af6a60f4169876fcd075595ca">ast_tls_config::pvtfile</a></div><div class="ttdeci">char * pvtfile</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00090">tcptls.h:90</a></div></div>
<div class="ttc" id="tcptls_8h_html_a1850a109f5255895d75980912723ae7c"><div class="ttname"><a href="../../d4/ddf/tcptls_8h.html#a1850a109f5255895d75980912723ae7c">AST_CERTFILE</a></div><div class="ttdeci">#define AST_CERTFILE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00062">tcptls.h:62</a></div></div>
<div class="ttc" id="tcptls_8h_html_a29375a4482c8de1e9879b97be2e88bf0"><div class="ttname"><a href="../../d4/ddf/tcptls_8h.html#a29375a4482c8de1e9879b97be2e88bf0">ast_tcptls_server_start</a></div><div class="ttdeci">void ast_tcptls_server_start(struct ast_tcptls_session_args *desc)</div><div class="ttdoc">This is a generic (re)start routine for a TCP server, which does the socket/bind/listen and starts a ...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9b/tcptls_8c_source.html#l00685">tcptls.c:685</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569facc865488860e2c25dd9f80e5473cf760"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569facc865488860e2c25dd9f80e5473cf760">PARSE_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01118">include/asterisk/config.h:1118</a></div></div>
<div class="ttc" id="tcptls_8h_html_a24ff4bad1d2894ae3cae4e555d508fd0"><div class="ttname"><a href="../../d4/ddf/tcptls_8h.html#a24ff4bad1d2894ae3cae4e555d508fd0">ast_ssl_setup</a></div><div class="ttdeci">int ast_ssl_setup(struct ast_tls_config *cfg)</div><div class="ttdoc">Set up an SSL server. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9b/tcptls_8c_source.html#l00570">tcptls.c:570</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aef636ed2f3d33f4c7a1ba67eb7c4d052"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a></div><div class="ttdeci">struct ast_variable * ast_variable_browse(const struct ast_config *config, const char *category_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01216">extconf.c:1216</a></div></div>
<div class="ttc" id="http_8c_html_ad15ea39a758fbebb32d28a1060107f2b"><div class="ttname"><a href="../../dd/d43/http_8c.html#ad15ea39a758fbebb32d28a1060107f2b">static_uri_enabled</a></div><div class="ttdeci">static int static_uri_enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00142">http.c:142</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="ast__version_8h_html_a7765c608aea948584928643ab3963b2a"><div class="ttname"><a href="../../d5/db9/ast__version_8h.html#a7765c608aea948584928643ab3963b2a">ast_get_version</a></div><div class="ttdeci">const char * ast_get_version(void)</div><div class="ttdoc">Retrieve the Asterisk version string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0b/version_8c_source.html#l00016">version.c:16</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="http_8c_html_a16b710f592bf8f7900666392adc444dc"><div class="ttname"><a href="../../dd/d43/http_8c.html#a16b710f592bf8f7900666392adc444dc">DEFAULT_PORT</a></div><div class="ttdeci">#define DEFAULT_PORT</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00069">http.c:69</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="http_8c_html_a5e7930049dbf3967931097a8f62333d6"><div class="ttname"><a href="../../dd/d43/http_8c.html#a5e7930049dbf3967931097a8f62333d6">status_uri_enabled</a></div><div class="ttdeci">static int status_uri_enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00143">http.c:143</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a8d1a63cdf2c7aff22a77b6e75d93b377"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEINVALID</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">include/asterisk/config.h:60</a></div></div>
<div class="ttc" id="structast__variable_html_a501b314f49b3a9ff6e7be599d94686ee"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">ast_variable::lineno</a></div><div class="ttdeci">int lineno</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00095">include/asterisk/config.h:95</a></div></div>
<div class="ttc" id="http_8c_html_abc4e71c538d9c1ad56b8e4a2e46bed35"><div class="ttname"><a href="../../dd/d43/http_8c.html#abc4e71c538d9c1ad56b8e4a2e46bed35">ast_http_uri_unlink</a></div><div class="ttdeci">void ast_http_uri_unlink(struct ast_http_uri *urih)</div><div class="ttdoc">Unregister a URI handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00705">http.c:705</a></div></div>
<div class="ttc" id="http_8c_html_abc2a3ec1424866bc76df0b0a4b8c046e"><div class="ttname"><a href="../../dd/d43/http_8c.html#abc2a3ec1424866bc76df0b0a4b8c046e">DEFAULT_TLS_PORT</a></div><div class="ttdeci">#define DEFAULT_TLS_PORT</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00070">http.c:70</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="http_8c_html_afe0d8ae0cb8f0a0e291943ce1140c766"><div class="ttname"><a href="../../dd/d43/http_8c.html#afe0d8ae0cb8f0a0e291943ce1140c766">DEFAULT_SESSION_LIMIT</a></div><div class="ttdeci">#define DEFAULT_SESSION_LIMIT</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00071">http.c:71</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aab3eac8fa82a86a93c074deb7b77dbc9"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aab3eac8fa82a86a93c074deb7b77dbc9">ast_config_load2</a></div><div class="ttdeci">struct ast_config * ast_config_load2(const char *filename, const char *who_asked, struct ast_flags flags)</div><div class="ttdoc">Load a config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03154">main/config.c:3154</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569fadba5c0b0122c30502fe469a55fea3c4b"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fadba5c0b0122c30502fe469a55fea3c4b">PARSE_UINT32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01087">include/asterisk/config.h:1087</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="http_8c_html_aecb32037d29b6d4c9d903ba03b56f065"><div class="ttname"><a href="../../dd/d43/http_8c.html#aecb32037d29b6d4c9d903ba03b56f065">MAX_PREFIX</a></div><div class="ttdeci">#define MAX_PREFIX</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00068">http.c:68</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="http_8c_html_aa35c8da693177f283276e6250ab2ea61"><div class="ttname"><a href="../../dd/d43/http_8c.html#aa35c8da693177f283276e6250ab2ea61">DEFAULT_SESSION_KEEP_ALIVE</a></div><div class="ttdeci">#define DEFAULT_SESSION_KEEP_ALIVE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00077">http.c:77</a></div></div>
<div class="ttc" id="netsock2_8h_html_ad91b5dfe4c188d15f4b2e9e2ec5d8864"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ad91b5dfe4c188d15f4b2e9e2ec5d8864">ast_sockaddr_setnull</a></div><div class="ttdeci">static void ast_sockaddr_setnull(struct ast_sockaddr *addr)</div><div class="ttdoc">Sets address addr to null. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00140">netsock2.h:140</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="netsock2_8h_html_a51e2841175bf3ad58a4e11ad9fb2453f"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a></div><div class="ttdeci">#define ast_sockaddr_port(addr)</div><div class="ttdoc">Get the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00521">netsock2.h:521</a></div></div>
<div class="ttc" id="http_8c_html_af5c7bcd09f0d5f4bb9e09bd401130b95"><div class="ttname"><a href="../../dd/d43/http_8c.html#af5c7bcd09f0d5f4bb9e09bd401130b95">MAX_SERVER_NAME_LENGTH</a></div><div class="ttdeci">#define MAX_SERVER_NAME_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00079">http.c:79</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569fabac6774d4b76ec6847b57ccce4822738"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fabac6774d4b76ec6847b57ccce4822738">PARSE_INT32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01086">include/asterisk/config.h:1086</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structuri__redirects_html"><div class="ttname"><a href="../../d6/dd5/structuri__redirects.html">uri_redirects</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00175">http.c:175</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a6b4d4d929013de7812fbba4e58353078"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a></div><div class="ttdeci">void ast_config_destroy(struct ast_config *config)</div><div class="ttdoc">Destroys a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01290">extconf.c:1290</a></div></div>
<div class="ttc" id="http_8c_html_a1c80a21a7aa2d6eee02f11b48485a331"><div class="ttname"><a href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a></div><div class="ttdeci">static struct ast_tls_config http_tls_cfg</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00111">http.c:111</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="http_8c_html_aef37d79896cadcf96c364f8c5609fd2f"><div class="ttname"><a href="../../dd/d43/http_8c.html#aef37d79896cadcf96c364f8c5609fd2f">http_desc</a></div><div class="ttdeci">static struct ast_tcptls_session_args http_desc</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00118">http.c:118</a></div></div>
<div class="ttc" id="tcptls_8h_html_a667a09d76fe878551ac296875754971cabd2609384690cb305648269648e9ff46"><div class="ttname"><a href="../../d4/ddf/tcptls_8h.html#a667a09d76fe878551ac296875754971cabd2609384690cb305648269648e9ff46">AST_SSL_SERVER_CIPHER_ORDER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00078">tcptls.h:78</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a846844eb2c4eb44554445936b3770711"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a846844eb2c4eb44554445936b3770711">CONFIG_STATUS_FILEUNCHANGED</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEUNCHANGED</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00059">include/asterisk/config.h:59</a></div></div>
<div class="ttc" id="http_8c_html_a5086e142ada070c22242a51c58f3da4a"><div class="ttname"><a href="../../dd/d43/http_8c.html#a5086e142ada070c22242a51c58f3da4a">http_server_name</a></div><div class="ttdeci">static char http_server_name[MAX_SERVER_NAME_LENGTH]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00104">http.c:104</a></div></div>
<div class="ttc" id="http_8c_html_a50af5ddf9c9a9dd76f2a1203f50dafdd"><div class="ttname"><a href="../../dd/d43/http_8c.html#a50af5ddf9c9a9dd76f2a1203f50dafdd">add_redirect</a></div><div class="ttdeci">static void add_redirect(const char *value)</div><div class="ttdoc">Add a new URI redirect The entries in the redirect list are sorted by length, just like the list of U...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l02022">http.c:2022</a></div></div>
<div class="ttc" id="http_8c_html_af9b90c23264e36e6492a2eb8598c9bf0"><div class="ttname"><a href="../../dd/d43/http_8c.html#af9b90c23264e36e6492a2eb8598c9bf0">session_limit</a></div><div class="ttdeci">static int session_limit</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00106">http.c:106</a></div></div>
<div class="ttc" id="strings_8h_html_a387a69b3871ca31061566a73f45d20f4"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a></div><div class="ttdeci">int attribute_pure ast_true(const char *val)</div><div class="ttdoc">Make sure something is true. Determine if a string containing a boolean value is &quot;true&quot;. This function checks to see whether a string passed to it is an indication of an &quot;true&quot; value. It checks to see if the string is &quot;yes&quot;, &quot;true&quot;, &quot;y&quot;, &quot;t&quot;, &quot;on&quot; or &quot;1&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01951">main/utils.c:1951</a></div></div>
<div class="ttc" id="netsock2_8h_html_ac83e6bdec376b74d02da8d2f8e1af888"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a></div><div class="ttdeci">#define ast_sockaddr_set_port(addr, port)</div><div class="ttdoc">Sets the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00537">netsock2.h:537</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569fa37848843c0c65e9ce998148c2f16d585"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa37848843c0c65e9ce998148c2f16d585">PARSE_IN_RANGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01125">include/asterisk/config.h:1125</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="tcptls_8h_html_a667a09d76fe878551ac296875754971cae2335e286c6332acafc11c55bda2b3ef"><div class="ttname"><a href="../../d4/ddf/tcptls_8h.html#a667a09d76fe878551ac296875754971cae2335e286c6332acafc11c55bda2b3ef">AST_SSL_DISABLE_TLSV1</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00080">tcptls.h:80</a></div></div>
<div class="ttc" id="structast__config_html"><div class="ttname"><a href="../../dd/d18/structast__config.html">ast_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00249">main/config.c:249</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="netsock2_8h_html_a27c1625aa5fde74a6dec3d424733c579a97dcf13ca2f2ce3ce4c66de236e6f3f7"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a27c1625aa5fde74a6dec3d424733c579a97dcf13ca2f2ce3ce4c66de236e6f3f7">AST_AF_UNSPEC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00054">netsock2.h:54</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_ad1982509765f4870f1f63412a53ea668"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a></div><div class="ttdeci">static int reload(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00741">cdr_mysql.c:741</a></div></div>
<div class="ttc" id="http_8c_html_a7fca7b13ef64698410758fcd096c048b"><div class="ttname"><a href="../../dd/d43/http_8c.html#a7fca7b13ef64698410758fcd096c048b">session_inactivity</a></div><div class="ttdeci">static int session_inactivity</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00107">http.c:107</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a7e9aea581abeaae5d3799367d95284ac"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a7e9aea581abeaae5d3799367d95284ac">ast_parse_arg</a></div><div class="ttdeci">int ast_parse_arg(const char *arg, enum ast_parse_flags flags, void *result,...)</div><div class="ttdoc">The argument parsing routine. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03657">main/config.c:3657</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3d3aa4fb3b4ba38ad8d6d255d97e037c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3d3aa4fb3b4ba38ad8d6d255d97e037c">AST_RWLIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00843">linkedlists.h:843</a></div></div>
<div class="ttc" id="http_8c_html_a8418419ee998a4151ff9d2d3e61694b1"><div class="ttname"><a href="../../dd/d43/http_8c.html#a8418419ee998a4151ff9d2d3e61694b1">DEFAULT_SESSION_INACTIVITY</a></div><div class="ttdeci">#define DEFAULT_SESSION_INACTIVITY</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00073">http.c:73</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="structast__tls__config_html_a333dffcec025fcdbee0676476f401685"><div class="ttname"><a href="../../d5/d90/structast__tls__config.html#a333dffcec025fcdbee0676476f401685">ast_tls_config::certfile</a></div><div class="ttdeci">char * certfile</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00089">tcptls.h:89</a></div></div>
<div class="ttc" id="http_8c_html_a5b30188fccd09ea5f099a088b325a190"><div class="ttname"><a href="../../dd/d43/http_8c.html#a5b30188fccd09ea5f099a088b325a190">ast_http_uri_link</a></div><div class="ttdeci">int ast_http_uri_link(struct ast_http_uri *urih)</div><div class="ttdoc">Link the new uri into the list. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00673">http.c:673</a></div></div>
<div class="ttc" id="http_8c_html_ac5bbe302426a5b211e0f2a2bed2e7a75"><div class="ttname"><a href="../../dd/d43/http_8c.html#ac5bbe302426a5b211e0f2a2bed2e7a75">static_uri</a></div><div class="ttdeci">static struct ast_http_uri static_uri</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00430">http.c:430</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="tcptls_8h_html_a79d9a3beb22f1fb8551cef625e9fd8a1"><div class="ttname"><a href="../../d4/ddf/tcptls_8h.html#a79d9a3beb22f1fb8551cef625e9fd8a1">ast_tls_read_conf</a></div><div class="ttdeci">int ast_tls_read_conf(struct ast_tls_config *tls_cfg, struct ast_tcptls_session_args *tls_desc, const char *varname, const char *value)</div><div class="ttdoc">Used to parse conf files containing tls/ssl options. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9b/tcptls_8c_source.html#l00875">tcptls.c:875</a></div></div>
<div class="ttc" id="structast__tcptls__session__args_html_ad6d7a8463d59a02084cf9d4360f46b79"><div class="ttname"><a href="../../da/d2b/structast__tcptls__session__args.html#ad6d7a8463d59a02084cf9d4360f46b79">ast_tcptls_session_args::accept_fd</a></div><div class="ttdeci">int accept_fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00135">tcptls.h:135</a></div></div>
<div class="ttc" id="structhttp__uri__redirect_html"><div class="ttname"><a href="../../db/d02/structhttp__uri__redirect.html">http_uri_redirect</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00169">http.c:169</a></div></div>
<div class="ttc" id="structast__tls__config_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d5/d90/structast__tls__config.html#aec78000b2897c094f68ed72559e18acd">ast_tls_config::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00094">tcptls.h:94</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structast__tls__config_html_a8331a8443119478cd6b1daeb707a94dc"><div class="ttname"><a href="../../d5/d90/structast__tls__config.html#a8331a8443119478cd6b1daeb707a94dc">ast_tls_config::capath</a></div><div class="ttdeci">char * capath</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00093">tcptls.h:93</a></div></div>
<div class="ttc" id="tcptls_8h_html_a1fd4aa5038c9a488acc0f8017fe94fda"><div class="ttname"><a href="../../d4/ddf/tcptls_8h.html#a1fd4aa5038c9a488acc0f8017fe94fda">ast_tcptls_server_stop</a></div><div class="ttdeci">void ast_tcptls_server_stop(struct ast_tcptls_session_args *desc)</div><div class="ttdoc">Shutdown a running server if there is one. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9b/tcptls_8c_source.html#l00849">tcptls.c:849</a></div></div>
<div class="ttc" id="structast__tcptls__session__args_html_aeb4a21e3ae033a326cc9dfd20a7ab074"><div class="ttname"><a href="../../da/d2b/structast__tcptls__session__args.html#aeb4a21e3ae033a326cc9dfd20a7ab074">ast_tcptls_session_args::tls_cfg</a></div><div class="ttdeci">struct ast_tls_config * tls_cfg</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00134">tcptls.h:134</a></div></div>
<div class="ttc" id="structast__tcptls__session__args_html_a6652499b3aff8f317d4c6d1a36c6c740"><div class="ttname"><a href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">ast_tcptls_session_args::local_address</a></div><div class="ttdeci">struct ast_sockaddr local_address</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00130">tcptls.h:130</a></div></div>
<div class="ttc" id="http_8c_html_ad49ee0814a6efb14658ec87f2f6a86fb"><div class="ttname"><a href="../../dd/d43/http_8c.html#ad49ee0814a6efb14658ec87f2f6a86fb">session_keep_alive</a></div><div class="ttdeci">static int session_keep_alive</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00108">http.c:108</a></div></div>
<div class="ttc" id="http_8c_html_ad04999a886797d6dfe4fc6f6742527f5"><div class="ttname"><a href="../../dd/d43/http_8c.html#ad04999a886797d6dfe4fc6f6742527f5">https_desc</a></div><div class="ttdeci">static struct ast_tcptls_session_args https_desc</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00128">http.c:128</a></div></div>
<div class="ttc" id="http_8c_html_a8b7fe7f8acc26c737d74df3696250165"><div class="ttname"><a href="../../dd/d43/http_8c.html#a8b7fe7f8acc26c737d74df3696250165">status_uri</a></div><div class="ttdeci">static struct ast_http_uri status_uri</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00421">http.c:421</a></div></div>
<div class="ttc" id="structast__tls__config_html_a3d12e13733aa5172b5cb091fbf8ea478"><div class="ttname"><a href="../../d5/d90/structast__tls__config.html#a3d12e13733aa5172b5cb091fbf8ea478">ast_tls_config::cipher</a></div><div class="ttdeci">char * cipher</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00091">tcptls.h:91</a></div></div>
<div class="ttc" id="netsock2_8h_html_a8ba6f5b5a9de09137dd18fe2d9592880"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a8ba6f5b5a9de09137dd18fe2d9592880">ast_sockaddr_resolve</a></div><div class="ttdeci">int ast_sockaddr_resolve(struct ast_sockaddr **addrs, const char *str, int flags, int family)</div><div class="ttdoc">Parses a string with an IPv4 or IPv6 address and place results into an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00280">netsock2.c:280</a></div></div>
<div class="ttc" id="http_8c_html_a6f25bc812d09fedb86bf394c01061c56"><div class="ttname"><a href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a></div><div class="ttdeci">static char prefix[MAX_PREFIX]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00141">http.c:141</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a03e6cca0c879c0443efb431c30c14f76"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a></div><div class="ttdeci">static int enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00091">dnsmgr.c:91</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a103e76ed4bd42f776f7f260080b98b3fafa887389dc380bbdcffb65fec379f037"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fafa887389dc380bbdcffb65fec379f037">CONFIG_FLAG_FILEUNCHANGED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00043">include/asterisk/config.h:43</a></div></div>
<div class="ttc" id="structast__tls__config_html_a03e6cca0c879c0443efb431c30c14f76"><div class="ttname"><a href="../../d5/d90/structast__tls__config.html#a03e6cca0c879c0443efb431c30c14f76">ast_tls_config::enabled</a></div><div class="ttdeci">int enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00088">tcptls.h:88</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l02388">2388</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l02388">2388</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

</div>
</div>
<a id="a50af5ddf9c9a9dd76f2a1203f50dafdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50af5ddf9c9a9dd76f2a1203f50dafdd">&#9670;&nbsp;</a></span>add_redirect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void add_redirect </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a new URI redirect The entries in the redirect list are sorted by length, just like the list of URI handlers. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l02022">2022</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00451">AST_RWLIST_EMPTY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00422">AST_RWLIST_FIRST</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00701">AST_RWLIST_INSERT_AFTER</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00717">AST_RWLIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00740">AST_RWLIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00440">AST_RWLIST_NEXT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00157">ast_skip_blanks()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00171">http_uri_redirect::dest</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l00172">http_uri_redirect::target</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>.</p>
<div class="fragment"><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;{</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;   <span class="keywordtype">char</span> *target, *dest;</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d02/structhttp__uri__redirect.html">http_uri_redirect</a> *redirect, *cur;</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> target_len;</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> total_len;</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;   <span class="keywordtype">size_t</span> dest_len;</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;   dest = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;   dest = <a class="code" href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a>(dest);</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;   target = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;dest, <span class="stringliteral">&quot; &quot;</span>);</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;   target = <a class="code" href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a>(target);</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;   target = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;target, <span class="stringliteral">&quot; &quot;</span>); <span class="comment">/* trim trailing whitespace */</span></div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;   <span class="keywordflow">if</span> (!dest) {</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirect &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;   }</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;   target_len = strlen(target) + 1;</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;   dest_len = strlen(dest) + 1;</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;   total_len = <span class="keyword">sizeof</span>(*redirect) + target_len + dest_len;</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;   <span class="keywordflow">if</span> (!(redirect = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, total_len))) {</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;   }</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;   redirect-&gt;<a class="code" href="../../db/d02/structhttp__uri__redirect.html#a21b0374bf8175befbde3cf5ad4831c04">dest</a> = redirect-&gt;<a class="code" href="../../db/d02/structhttp__uri__redirect.html#aa00cb69f785f055cd7b8eda63452666e">target</a> + target_len;</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;   strcpy(redirect-&gt;<a class="code" href="../../db/d02/structhttp__uri__redirect.html#aa00cb69f785f055cd7b8eda63452666e">target</a>, target);</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(redirect-&gt;<a class="code" href="../../db/d02/structhttp__uri__redirect.html#a21b0374bf8175befbde3cf5ad4831c04">dest</a>, dest, dest_len);</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>);</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;   target_len--; <span class="comment">/* So we can compare directly with strlen() */</span></div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a0044f6572f50a89049b3b5272e51b0e7">AST_RWLIST_EMPTY</a>(&amp;<a class="code" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>)</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;      || strlen(<a class="code" href="../../df/d90/linkedlists_8h.html#a64835fe6d570951b2a0404799c3d116f">AST_RWLIST_FIRST</a>(&amp;<a class="code" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>)-&gt;target) &lt;= target_len ) {</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>, redirect, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>);</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;   }</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>, cur, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a5c021d1e034a53d09360da4d95c76220">AST_RWLIST_NEXT</a>(cur, <a class="code" href="../../d3/d96/structentry.html">entry</a>)</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;         &amp;&amp; strlen(<a class="code" href="../../df/d90/linkedlists_8h.html#a5c021d1e034a53d09360da4d95c76220">AST_RWLIST_NEXT</a>(cur, <a class="code" href="../../d3/d96/structentry.html">entry</a>)-&gt;target) &lt;= target_len ) {</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a5937d72e8b39660a1b824af2042c0e9c">AST_RWLIST_INSERT_AFTER</a>(&amp;<a class="code" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>, cur, redirect, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>);</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;      }</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;   }</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>, redirect, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>);</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a5c021d1e034a53d09360da4d95c76220"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a5c021d1e034a53d09360da4d95c76220">AST_RWLIST_NEXT</a></div><div class="ttdeci">#define AST_RWLIST_NEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00440">linkedlists.h:440</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a5937d72e8b39660a1b824af2042c0e9c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a5937d72e8b39660a1b824af2042c0e9c">AST_RWLIST_INSERT_AFTER</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_AFTER</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00701">linkedlists.h:701</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structhttp__uri__redirect_html_a21b0374bf8175befbde3cf5ad4831c04"><div class="ttname"><a href="../../db/d02/structhttp__uri__redirect.html#a21b0374bf8175befbde3cf5ad4831c04">http_uri_redirect::dest</a></div><div class="ttdeci">char * dest</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00171">http.c:171</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aacc5f6b7c25e361d11d40137fd55a8e8"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00717">linkedlists.h:717</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structuri__redirects_html"><div class="ttname"><a href="../../d6/dd5/structuri__redirects.html">uri_redirects</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00175">http.c:175</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0044f6572f50a89049b3b5272e51b0e7"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0044f6572f50a89049b3b5272e51b0e7">AST_RWLIST_EMPTY</a></div><div class="ttdeci">#define AST_RWLIST_EMPTY</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00451">linkedlists.h:451</a></div></div>
<div class="ttc" id="strings_8h_html_af5693da955fa3bc73bc49c47b601fc7a"><div class="ttname"><a href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a></div><div class="ttdeci">char * ast_skip_blanks(const char *str)</div><div class="ttdoc">Gets a pointer to the first non-whitespace character in a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00157">strings.h:157</a></div></div>
<div class="ttc" id="structhttp__uri__redirect_html_aa00cb69f785f055cd7b8eda63452666e"><div class="ttname"><a href="../../db/d02/structhttp__uri__redirect.html#aa00cb69f785f055cd7b8eda63452666e">http_uri_redirect::target</a></div><div class="ttdeci">char target[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00172">http.c:172</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadda916488b2d151af4426e2f06ad332"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_TAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00740">linkedlists.h:740</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structhttp__uri__redirect_html"><div class="ttname"><a href="../../db/d02/structhttp__uri__redirect.html">http_uri_redirect</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00169">http.c:169</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a64835fe6d570951b2a0404799c3d116f"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a64835fe6d570951b2a0404799c3d116f">AST_RWLIST_FIRST</a></div><div class="ttdeci">#define AST_RWLIST_FIRST</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00422">linkedlists.h:422</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4ca65fca50c28c5cc4de588cd7ca6cbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ca65fca50c28c5cc4de588cd7ca6cbd">&#9670;&nbsp;</a></span>ast_get_http_method()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_get_http_method </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80ef">ast_http_method</a>&#160;</td>
          <td class="paramname"><em>method</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return http method name string. </p>
<dl class="section since"><dt>Since</dt><dd>1.8 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00190">190</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dd/d43/http_8c.html#a8db57df0d65cdcb49f817ba20f1addfc">ast_http_methods_text</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l00179">ast_cfhttp_methods_text::text</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00315">add_allow_header()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00491">ast_ari_invoke()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>, and <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00361">handle_options()</a>.</p>
<div class="fragment"><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;{</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dd/d43/http_8c.html#a8db57df0d65cdcb49f817ba20f1addfc">ast_http_methods_text</a>); x++) {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#a8db57df0d65cdcb49f817ba20f1addfc">ast_http_methods_text</a>[x].<a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a> == <a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>) {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dd/d43/http_8c.html#a8db57df0d65cdcb49f817ba20f1addfc">ast_http_methods_text</a>[x].<a class="code" href="../../d8/d9e/structast__cfhttp__methods__text.html#a16343090e80c4472521560f30113d96c">text</a>;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      }</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   }</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="structast__cfhttp__methods__text_html_a16343090e80c4472521560f30113d96c"><div class="ttname"><a href="../../d8/d9e/structast__cfhttp__methods__text.html#a16343090e80c4472521560f30113d96c">ast_cfhttp_methods_text::text</a></div><div class="ttdeci">const char * text</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00179">http.c:179</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a8b44a03925325ceaf2de7b079b1541a1"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a></div><div class="ttdeci">const char * method</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04335">res_pjsip.c:4335</a></div></div>
<div class="ttc" id="http_8c_html_a8db57df0d65cdcb49f817ba20f1addfc"><div class="ttname"><a href="../../dd/d43/http_8c.html#a8db57df0d65cdcb49f817ba20f1addfc">ast_http_methods_text</a></div><div class="ttdeci">static const struct ast_cfhttp_methods_text ast_http_methods_text[]</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aacbeca1d5a14388e6c2f708ac7a9fffa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacbeca1d5a14388e6c2f708ac7a9fffa">&#9670;&nbsp;</a></span>ast_http_auth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d5/dbf/structast__http__auth.html">ast_http_auth</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>realm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned long&#160;</td>
          <td class="paramname"><em>nonce</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned long&#160;</td>
          <td class="paramname"><em>opaque</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send http "401 Unauthorized" response and close socket. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00622">622</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d43/http_8c_source.html#l00567">ast_http_create_response()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l00081">DEFAULT_RESPONSE_HEADER_LENGTH</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;{</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;   <span class="keywordtype">int</span> status_code = 401;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   <span class="keywordtype">char</span> *status_title = <span class="stringliteral">&quot;Unauthorized&quot;</span>;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *http_header_data = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(<a class="code" href="../../dd/d43/http_8c.html#af5a66da7db69b05a371613d80051da9f">DEFAULT_RESPONSE_HEADER_LENGTH</a>);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   <span class="keywordflow">if</span> (http_header_data) {</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;http_header_data,</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                  0,</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                  <span class="stringliteral">&quot;WWW-authenticate: Digest algorithm=MD5, realm=\&quot;%s\&quot;, nonce=\&quot;%08lx\&quot;, qop=\&quot;auth\&quot;, opaque=\&quot;%08lx\&quot;%s\r\n&quot;</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                  <span class="stringliteral">&quot;Content-type: text/html\r\n&quot;</span>,</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                  realm ? realm : <span class="stringliteral">&quot;Asterisk&quot;</span>,</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                  nonce,</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                  opaque,</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                  stale ? <span class="stringliteral">&quot;, stale=true&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;   }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#acf98d4742ea06a06bef5ead3cd8ef0ed">ast_http_create_response</a>(ser,</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                            status_code,</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                            status_title,</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                            http_header_data,</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                            <a class="code" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a>);</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;}</div><div class="ttc" id="app__queue_8c_html_a5633b1433389cec21ade3811bbe9ca5b"><div class="ttname"><a href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a></div><div class="ttdeci">char * text</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/app__queue_8c_source.html#l01508">app_queue.c:1508</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="http_8c_html_acf98d4742ea06a06bef5ead3cd8ef0ed"><div class="ttname"><a href="../../dd/d43/http_8c.html#acf98d4742ea06a06bef5ead3cd8ef0ed">ast_http_create_response</a></div><div class="ttdeci">void ast_http_create_response(struct ast_tcptls_session_instance *ser, int status_code, const char *status_title, struct ast_str *http_header_data, const char *text)</div><div class="ttdoc">Creates and sends a formatted http response message. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00567">http.c:567</a></div></div>
<div class="ttc" id="http_8c_html_af5a66da7db69b05a371613d80051da9f"><div class="ttname"><a href="../../dd/d43/http_8c.html#af5a66da7db69b05a371613d80051da9f">DEFAULT_RESPONSE_HEADER_LENGTH</a></div><div class="ttdeci">#define DEFAULT_RESPONSE_HEADER_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00081">http.c:81</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6158887813b6c700d9056b4daea05df0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6158887813b6c700d9056b4daea05df0">&#9670;&nbsp;</a></span>ast_http_body_discard()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_http_body_discard </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read and discard any unread HTTP request body. </p>
<dl class="section since"><dt>Since</dt><dd>12.4.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ser</td><td>HTTP TCP/TLS session object.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01120">1120</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00451">http_worker_private_data::body_length</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00453">http_worker_private_data::flags</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01069">http_body_check_chunk_sync()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01100">http_body_discard_chunk_trailer_headers()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00964">http_body_discard_contents()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01041">http_body_get_chunk_length()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00443">HTTP_FLAG_BODY_READ</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00445">HTTP_FLAG_CLOSE_ON_COMPLETION</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00441">HTTP_FLAG_HAS_BODY</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00162">ast_tcptls_session_instance::private_data</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02559">request()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l00456">ast_http_send()</a>, and <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l00790">ast_websocket_uri_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;{</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a> *<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a>;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;   request = ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">private_data</a>;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920">HTTP_FLAG_HAS_BODY</a>)</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      || <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88">HTTP_FLAG_BODY_READ</a>)) {</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      <span class="comment">/* No body to read or it has already been read. */</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;   }</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88">HTTP_FLAG_BODY_READ</a>);</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;HTTP discarding unused request body\n&quot;</span>);</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#a7c4c998980a0428c51179a4694431068">body_length</a> != 0);</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;   <span class="keywordflow">if</span> (0 &lt; request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#a7c4c998980a0428c51179a4694431068">body_length</a>) {</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#a74e0dc6d3ec99536cb67408015622210">http_body_discard_contents</a>(ser, request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#a7c4c998980a0428c51179a4694431068">body_length</a>, <span class="stringliteral">&quot;body&quot;</span>)) {</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>);</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;      }</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;   }</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;   <span class="comment">/* parse chunked-body */</span></div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;      <span class="keywordtype">int</span> length;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;      length = <a class="code" href="../../dd/d43/http_8c.html#af79aa289c3929912006d5757d19d6136">http_body_get_chunk_length</a>(ser);</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;      <span class="keywordflow">if</span> (length &lt; 0) {</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>);</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      }</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      <span class="keywordflow">if</span> (length == 0) {</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;         <span class="comment">/* parsed last-chunk */</span></div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      }</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#a74e0dc6d3ec99536cb67408015622210">http_body_discard_contents</a>(ser, length, <span class="stringliteral">&quot;chunk-data&quot;</span>)</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;         || <a class="code" href="../../dd/d43/http_8c.html#a8cab07b884d4c0d4e380ca603478ddaf">http_body_check_chunk_sync</a>(ser)) {</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>);</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      }</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;   }</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;   <span class="comment">/* Read and discard any trailer entity-header lines. */</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#a0407b8b04eb198ad0b20136d3ec4fa6d">http_body_discard_chunk_trailer_headers</a>(ser)) {</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>);</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;   }</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;}</div><div class="ttc" id="structhttp__worker__private__data_html_a7c4c998980a0428c51179a4694431068"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html#a7c4c998980a0428c51179a4694431068">http_worker_private_data::body_length</a></div><div class="ttdeci">int body_length</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00451">http.c:451</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920">HTTP_FLAG_HAS_BODY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00441">http.c:441</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88">HTTP_FLAG_BODY_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00443">http.c:443</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_ad517770dac2061381b2008850ff12e6c"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">ast_tcptls_session_instance::private_data</a></div><div class="ttdeci">void * private_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00162">tcptls.h:162</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">http_worker_private_data::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00453">http.c:453</a></div></div>
<div class="ttc" id="http_8c_html_af79aa289c3929912006d5757d19d6136"><div class="ttname"><a href="../../dd/d43/http_8c.html#af79aa289c3929912006d5757d19d6136">http_body_get_chunk_length</a></div><div class="ttdeci">static int http_body_get_chunk_length(struct ast_tcptls_session_instance *ser)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01041">http.c:1041</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a4e2e6fb7d874f0d2deddd2ecfc8afb32"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a></div><div class="ttdeci">static int request(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02559">chan_pjsip.c:2559</a></div></div>
<div class="ttc" id="http_8c_html_a0407b8b04eb198ad0b20136d3ec4fa6d"><div class="ttname"><a href="../../dd/d43/http_8c.html#a0407b8b04eb198ad0b20136d3ec4fa6d">http_body_discard_chunk_trailer_headers</a></div><div class="ttdeci">static int http_body_discard_chunk_trailer_headers(struct ast_tcptls_session_instance *ser)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01100">http.c:1100</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00445">http.c:445</a></div></div>
<div class="ttc" id="http_8c_html_a74e0dc6d3ec99536cb67408015622210"><div class="ttname"><a href="../../dd/d43/http_8c.html#a74e0dc6d3ec99536cb67408015622210">http_body_discard_contents</a></div><div class="ttdeci">static int http_body_discard_contents(struct ast_tcptls_session_instance *ser, int length, const char *what_getting)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00964">http.c:964</a></div></div>
<div class="ttc" id="http_8c_html_a8cab07b884d4c0d4e380ca603478ddaf"><div class="ttname"><a href="../../dd/d43/http_8c.html#a8cab07b884d4c0d4e380ca603478ddaf">http_body_check_chunk_sync</a></div><div class="ttdeci">static int http_body_check_chunk_sync(struct ast_tcptls_session_instance *ser)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01069">http.c:1069</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00449">http.c:449</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af220ac7e6b4ecb8be48359c18e10adaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af220ac7e6b4ecb8be48359c18e10adaa">&#9670;&nbsp;</a></span>ast_http_body_read_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_http_body_read_status </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>read_success</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the body read success status. </p>
<dl class="section since"><dt>Since</dt><dd>12.4.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ser</td><td>HTTP TCP/TLS session object. </td></tr>
    <tr><td class="paramname">read_success</td><td>TRUE if body was read successfully.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00899">899</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00453">http_worker_private_data::flags</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00443">HTTP_FLAG_BODY_READ</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00445">HTTP_FLAG_CLOSE_ON_COMPLETION</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00441">HTTP_FLAG_HAS_BODY</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00162">ast_tcptls_session_instance::private_data</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02559">request()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dc9/res__http__post_8c_source.html#l00323">http_post_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;{</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a> *<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a>;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;   request = ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">private_data</a>;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920">HTTP_FLAG_HAS_BODY</a>)</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      || <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88">HTTP_FLAG_BODY_READ</a>)) {</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      <span class="comment">/* No body to read. */</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;   }</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88">HTTP_FLAG_BODY_READ</a>);</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;   <span class="keywordflow">if</span> (!read_success) {</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>);</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;   }</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;}</div><div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920">HTTP_FLAG_HAS_BODY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00441">http.c:441</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88">HTTP_FLAG_BODY_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00443">http.c:443</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_ad517770dac2061381b2008850ff12e6c"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">ast_tcptls_session_instance::private_data</a></div><div class="ttdeci">void * private_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00162">tcptls.h:162</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">http_worker_private_data::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00453">http.c:453</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a4e2e6fb7d874f0d2deddd2ecfc8afb32"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a></div><div class="ttdeci">static int request(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02559">chan_pjsip.c:2559</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00445">http.c:445</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00449">http.c:449</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acf98d4742ea06a06bef5ead3cd8ef0ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf98d4742ea06a06bef5ead3cd8ef0ed">&#9670;&nbsp;</a></span>ast_http_create_response()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_http_create_response </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>status_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>status_title</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> *&#160;</td>
          <td class="paramname"><em>http_header_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates and sends a formatted http response message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ser</td><td>TCP/TLS session object </td></tr>
    <tr><td class="paramname">status_code</td><td>HTTP response code (200/401/403/404/500) </td></tr>
    <tr><td class="paramname">status_title</td><td>English equivalent to the status_code parameter </td></tr>
    <tr><td class="paramname">http_header_data</td><td>The formatted text to use in the http header </td></tr>
    <tr><td class="paramname">text</td><td>Additional informational text to use in the response</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Function constructs response headers from the status_code, status_title and http_header_data parameters.</dd></dl>
<p>The response body is created as HTML content, from the status_code, status_title, and the text parameters.</p>
<p>The http_header_data parameter will be freed as a result of calling function.</p>
<dl class="section since"><dt>Since</dt><dd>13.2.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00567">567</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00456">ast_http_send()</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00057">AST_HTTP_UNKNOWN</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00839">ast_tcptls_close_session_file()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00718">ast_xml_escape()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00104">http_server_name</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00092">INITIAL_RESPONSE_BODY_BUFFER</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00079">MAX_SERVER_NAME_LENGTH</a>, and <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00033">out</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l00622">ast_http_auth()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l00648">ast_http_error()</a>.</p>
<div class="fragment"><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;{</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <span class="keywordtype">char</span> server_name[<a class="code" href="../../dd/d43/http_8c.html#af5c7bcd09f0d5f4bb9e09bd401130b95">MAX_SERVER_NAME_LENGTH</a>];</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *server_address = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(<a class="code" href="../../dd/d43/http_8c.html#af5c7bcd09f0d5f4bb9e09bd401130b95">MAX_SERVER_NAME_LENGTH</a>);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a> = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(<a class="code" href="../../dd/d43/http_8c.html#a35f98eb496f88107d8571d3abbe9ef5f">INITIAL_RESPONSE_BODY_BUFFER</a>);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   <span class="keywordflow">if</span> (!http_header_data || !server_address || !out) {</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(http_header_data);</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(server_address);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(out);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keywordflow">if</span> (ser) {</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;HTTP closing session. OOM.\n&quot;</span>);</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;         <a class="code" href="../../d4/ddf/tcptls_8h.html#adea645492f53ec11186b84eaf85e14d9">ast_tcptls_close_session_file</a>(ser);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      }</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;   }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   <span class="keywordflow">if</span>(!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../dd/d43/http_8c.html#a5086e142ada070c22242a51c58f3da4a">http_server_name</a>)) {</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a89e629b7a1e5ab2c19c2ea30af769aa9">ast_xml_escape</a>(<a class="code" href="../../dd/d43/http_8c.html#a5086e142ada070c22242a51c58f3da4a">http_server_name</a>, server_name, <span class="keyword">sizeof</span>(server_name));</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;server_address,</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                   0,</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                   <span class="stringliteral">&quot;&lt;address&gt;%s&lt;/address&gt;\r\n&quot;</span>,</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                   server_name);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;out,</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;               0,</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;               <span class="stringliteral">&quot;&lt;!DOCTYPE HTML PUBLIC \&quot;-//IETF//DTD HTML 2.0//EN\&quot;&gt;\r\n&quot;</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;               <span class="stringliteral">&quot;&lt;html&gt;&lt;head&gt;\r\n&quot;</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;               <span class="stringliteral">&quot;&lt;title&gt;%d %s&lt;/title&gt;\r\n&quot;</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;               <span class="stringliteral">&quot;&lt;/head&gt;&lt;body&gt;\r\n&quot;</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;               <span class="stringliteral">&quot;&lt;h1&gt;%s&lt;/h1&gt;\r\n&quot;</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;               <span class="stringliteral">&quot;&lt;p&gt;%s&lt;/p&gt;\r\n&quot;</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;               <span class="stringliteral">&quot;&lt;hr /&gt;\r\n&quot;</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;               <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;               <span class="stringliteral">&quot;&lt;/body&gt;&lt;/html&gt;\r\n&quot;</span>,</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;               status_code,</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;               status_title,</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;               status_title,</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;               <a class="code" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a> ? <a class="code" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(server_address));</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(server_address);</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#a0448c9f4a66b6ee7994870b187e185b4">ast_http_send</a>(ser,</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                 <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa8f6ca13b1fe4a9c235071bd548509ea7">AST_HTTP_UNKNOWN</a>,</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                 status_code,</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                 status_title,</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                 http_header_data,</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                 out,</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                 0,</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                 0);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;}</div><div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="http_8c_html_a35f98eb496f88107d8571d3abbe9ef5f"><div class="ttname"><a href="../../dd/d43/http_8c.html#a35f98eb496f88107d8571d3abbe9ef5f">INITIAL_RESPONSE_BODY_BUFFER</a></div><div class="ttdeci">#define INITIAL_RESPONSE_BODY_BUFFER</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00092">http.c:92</a></div></div>
<div class="ttc" id="app__queue_8c_html_a5633b1433389cec21ade3811bbe9ca5b"><div class="ttname"><a href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a></div><div class="ttdeci">char * text</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/app__queue_8c_source.html#l01508">app_queue.c:1508</a></div></div>
<div class="ttc" id="utils_8h_html_a89e629b7a1e5ab2c19c2ea30af769aa9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a89e629b7a1e5ab2c19c2ea30af769aa9">ast_xml_escape</a></div><div class="ttdeci">int ast_xml_escape(const char *string, char *outbuf, size_t buflen)</div><div class="ttdoc">Escape reserved characters for use in XML. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00718">main/utils.c:718</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="http_8c_html_af5c7bcd09f0d5f4bb9e09bd401130b95"><div class="ttname"><a href="../../dd/d43/http_8c.html#af5c7bcd09f0d5f4bb9e09bd401130b95">MAX_SERVER_NAME_LENGTH</a></div><div class="ttdeci">#define MAX_SERVER_NAME_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00079">http.c:79</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80efa8f6ca13b1fe4a9c235071bd548509ea7"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa8f6ca13b1fe4a9c235071bd548509ea7">AST_HTTP_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00057">http.h:57</a></div></div>
<div class="ttc" id="http_8c_html_a5086e142ada070c22242a51c58f3da4a"><div class="ttname"><a href="../../dd/d43/http_8c.html#a5086e142ada070c22242a51c58f3da4a">http_server_name</a></div><div class="ttdeci">static char http_server_name[MAX_SERVER_NAME_LENGTH]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00104">http.c:104</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="http_8c_html_a0448c9f4a66b6ee7994870b187e185b4"><div class="ttname"><a href="../../dd/d43/http_8c.html#a0448c9f4a66b6ee7994870b187e185b4">ast_http_send</a></div><div class="ttdeci">void ast_http_send(struct ast_tcptls_session_instance *ser, enum ast_http_method method, int status_code, const char *status_title, struct ast_str *http_header, struct ast_str *out, int fd, unsigned int static_content)</div><div class="ttdoc">Generic function for sending HTTP/1.1 response. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00456">http.c:456</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a48bc11919b2752df9d14ce89557cfb25"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00033">utils/frame.c:33</a></div></div>
<div class="ttc" id="tcptls_8h_html_adea645492f53ec11186b84eaf85e14d9"><div class="ttname"><a href="../../d4/ddf/tcptls_8h.html#adea645492f53ec11186b84eaf85e14d9">ast_tcptls_close_session_file</a></div><div class="ttdeci">void ast_tcptls_close_session_file(struct ast_tcptls_session_instance *tcptls_session)</div><div class="ttdoc">Closes a tcptls session instance&amp;#39;s file and/or file descriptor. The tcptls_session will be set to NUL...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9b/tcptls_8c_source.html#l00839">tcptls.c:839</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6ab57c2e45049bd17a5cf6d0ce6e1ebe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">&#9670;&nbsp;</a></span>ast_http_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_http_error </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>status_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>status_title</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send HTTP error message and close socket. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00648">648</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d43/http_8c_source.html#l00567">ast_http_create_response()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l00081">DEFAULT_RESPONSE_HEADER_LENGTH</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00885">ast_ari_callback()</a>, <a class="el" href="../../d6/d87/res__ari__events_8c_source.html#l00055">ast_ari_events_event_websocket_ws_attempted_cb()</a>, <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l00790">ast_websocket_uri_cb()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>, <a class="el" href="../../dd/df4/resource__events_8c_source.html#l00339">event_session_allocation_error_handler()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07907">generic_http_callback()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01401">handle_uri()</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00091">http_callback()</a>, <a class="el" href="../../d6/dc9/res__http__post_8c_source.html#l00323">http_post_callback()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01757">http_request_headers_get()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00871">http_request_tracking_setup()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01937">httpd_helper_thread()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01839">httpd_process_request()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00368">httpstatus_callback()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00240">static_callback()</a>, and <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l00777">websocket_bad_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;{</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *http_header_data = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(<a class="code" href="../../dd/d43/http_8c.html#af5a66da7db69b05a371613d80051da9f">DEFAULT_RESPONSE_HEADER_LENGTH</a>);</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   <span class="keywordflow">if</span> (http_header_data) {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;http_header_data, 0, <span class="stringliteral">&quot;Content-type: text/html\r\n&quot;</span>);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;   }</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#acf98d4742ea06a06bef5ead3cd8ef0ed">ast_http_create_response</a>(ser,</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                            status_code,</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                            status_title,</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                            http_header_data,</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                            <a class="code" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a>);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;}</div><div class="ttc" id="app__queue_8c_html_a5633b1433389cec21ade3811bbe9ca5b"><div class="ttname"><a href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a></div><div class="ttdeci">char * text</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/app__queue_8c_source.html#l01508">app_queue.c:1508</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="http_8c_html_acf98d4742ea06a06bef5ead3cd8ef0ed"><div class="ttname"><a href="../../dd/d43/http_8c.html#acf98d4742ea06a06bef5ead3cd8ef0ed">ast_http_create_response</a></div><div class="ttdeci">void ast_http_create_response(struct ast_tcptls_session_instance *ser, int status_code, const char *status_title, struct ast_str *http_header_data, const char *text)</div><div class="ttdoc">Creates and sends a formatted http response message. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00567">http.c:567</a></div></div>
<div class="ttc" id="http_8c_html_af5a66da7db69b05a371613d80051da9f"><div class="ttname"><a href="../../dd/d43/http_8c.html#af5a66da7db69b05a371613d80051da9f">DEFAULT_RESPONSE_HEADER_LENGTH</a></div><div class="ttdeci">#define DEFAULT_RESPONSE_HEADER_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00081">http.c:81</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a23c0584001722249f242fc66a3d33caf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23c0584001722249f242fc66a3d33caf">&#9670;&nbsp;</a></span>ast_http_ftype2mtype()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_http_ftype2mtype </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>ftype</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return mime type based on extension. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ftype</td><td>filename extension </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>String containing associated MIME type </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.8 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00203">203</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00147">ext</a>, <a class="el" href="../../dd/d43/http_8c.html#ac966dd481c59b05f2c113dc4365d72f6">mimetypes</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/de9/res__phoneprov_8c_source.html#l00580">build_profile()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l00240">static_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;{</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   <span class="keywordflow">if</span> (ftype) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dd/d43/http_8c.html#ac966dd481c59b05f2c113dc4365d72f6">mimetypes</a>); x++) {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(ftype, <a class="code" href="../../dd/d43/http_8c.html#ac966dd481c59b05f2c113dc4365d72f6">mimetypes</a>[x].<a class="code" href="../../dd/d43/http_8c.html#af9b32121c4ad80b0887a3d73fd24de5f">ext</a>)) {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dd/d43/http_8c.html#ac966dd481c59b05f2c113dc4365d72f6">mimetypes</a>[x].mtype;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;         }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      }</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   }</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div><div class="ttc" id="http_8c_html_ac966dd481c59b05f2c113dc4365d72f6"><div class="ttname"><a href="../../dd/d43/http_8c.html#ac966dd481c59b05f2c113dc4365d72f6">mimetypes</a></div><div class="ttdeci">static struct @395 mimetypes[]</div><div class="ttdoc">Limit the kinds of files we&amp;#39;re willing to serve up. </div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="http_8c_html_af9b32121c4ad80b0887a3d73fd24de5f"><div class="ttname"><a href="../../dd/d43/http_8c.html#af9b32121c4ad80b0887a3d73fd24de5f">ext</a></div><div class="ttdeci">const char * ext</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00147">http.c:147</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9a7ef71bdba2a4f83b40dd7fad426207"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a7ef71bdba2a4f83b40dd7fad426207">&#9670;&nbsp;</a></span>ast_http_get_auth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d5/dbf/structast__http__auth.html">ast_http_auth</a>* ast_http_get_auth </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get HTTP authentication information from headers. </p>
<p>The returned object is AO2 managed, so clean up with <a class="el" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">headers</td><td>HTTP request headers. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>HTTP auth structure. </dd>
<dd>
<code>NULL</code> if no supported HTTP auth headers present. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01579">1579</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00294">ast_base64decode()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00094">ast_begins_with()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01545">auth_create()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00078">base64</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01577">BASIC_LEN</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01576">BASIC_PREFIX</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00241">LOG_DEBUG</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00077">password</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00848">authenticate_user()</a>, and <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00593">http_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;{</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;   <span class="keywordflow">for</span> (v = headers; v; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/d1f/main_2utils_8c.html#a094cd85754f67592588ab5a0636cf0ea">base64</a>;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;      <span class="keywordtype">char</span> decoded[256] = {};</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;      <span class="keywordtype">char</span> *username;</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a>;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;      <span class="keywordtype">int</span> cnt;</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* AST_DEVMODE */</span><span class="preprocessor"></span></div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;      <span class="keywordflow">if</span> (strcasecmp(<span class="stringliteral">&quot;Authorization&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>) != 0) {</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;      }</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#ac51fa66c90ce950b248c9ff3e8c4e453">ast_begins_with</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <a class="code" href="../../dd/d43/http_8c.html#a4905fca3498c74da82b5726e68587f40">BASIC_PREFIX</a>)) {</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>,</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;            <span class="stringliteral">&quot;Unsupported Authorization scheme\n&quot;</span>);</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;      }</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;      <span class="comment">/* Basic auth header parsing. RFC 2617, section 2.</span></div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;<span class="comment">       *   credentials = &quot;Basic&quot; basic-credentials</span></div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;<span class="comment">       *   basic-credentials = base64-user-pass</span></div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;<span class="comment">       *   base64-user-pass  = &lt;base64 encoding of user-pass,</span></div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;<span class="comment">       *                        except not limited to 76 char/line&gt;</span></div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;<span class="comment">       *   user-pass   = userid &quot;:&quot; password</span></div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      base64 = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a> + <a class="code" href="../../dd/d43/http_8c.html#ad599c720bbdc2219933755c4a4364cbe">BASIC_LEN</a>;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      <span class="comment">/* This will truncate &quot;userid:password&quot; lines to</span></div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;<span class="comment">       * sizeof(decoded). The array is long enough that this shouldn&#39;t</span></div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;<span class="comment">       * be a problem */</span></div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;      cnt =</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* AST_DEVMODE */</span><span class="preprocessor"></span></div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1e7e06bd20719ecfd58b67f230780ffa">ast_base64decode</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)decoded, base64,</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;         <span class="keyword">sizeof</span>(decoded) - 1);</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(cnt &lt; <span class="keyword">sizeof</span>(decoded));</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;      <span class="comment">/* Split the string at the colon */</span></div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;      password = decoded;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      username = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;password, <span class="stringliteral">&quot;:&quot;</span>);</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;      <span class="keywordflow">if</span> (!password) {</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid Authorization header\n&quot;</span>);</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;      }</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/d43/http_8c.html#a1af65cc256b1c374d1f42ff2cb85a4e5">auth_create</a>(username, password);</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;   }</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_a6ff63e8955665c4a58b1598f2b07c51a"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a></div><div class="ttdeci">#define LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00241">logger.h:241</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_ab4fdb206838f2974bd15fc2ca1e9d366"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a></div><div class="ttdeci">static struct ast_str * password</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00077">cdr_mysql.c:77</a></div></div>
<div class="ttc" id="utils_8h_html_a1e7e06bd20719ecfd58b67f230780ffa"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1e7e06bd20719ecfd58b67f230780ffa">ast_base64decode</a></div><div class="ttdeci">int ast_base64decode(unsigned char *dst, const char *src, int max)</div><div class="ttdoc">Decode data from base64. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00294">main/utils.c:294</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="http_8c_html_ad599c720bbdc2219933755c4a4364cbe"><div class="ttname"><a href="../../dd/d43/http_8c.html#ad599c720bbdc2219933755c4a4364cbe">BASIC_LEN</a></div><div class="ttdeci">#define BASIC_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01577">http.c:1577</a></div></div>
<div class="ttc" id="http_8c_html_a1af65cc256b1c374d1f42ff2cb85a4e5"><div class="ttname"><a href="../../dd/d43/http_8c.html#a1af65cc256b1c374d1f42ff2cb85a4e5">auth_create</a></div><div class="ttdeci">static struct ast_http_auth * auth_create(const char *userid, const char *password)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01545">http.c:1545</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="strings_8h_html_ac51fa66c90ce950b248c9ff3e8c4e453"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac51fa66c90ce950b248c9ff3e8c4e453">ast_begins_with</a></div><div class="ttdeci">static int force_inline attribute_pure ast_begins_with(const char *str, const char *prefix)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00094">strings.h:94</a></div></div>
<div class="ttc" id="http_8c_html_a4905fca3498c74da82b5726e68587f40"><div class="ttname"><a href="../../dd/d43/http_8c.html#a4905fca3498c74da82b5726e68587f40">BASIC_PREFIX</a></div><div class="ttdeci">#define BASIC_PREFIX</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01576">http.c:1576</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a094cd85754f67592588ab5a0636cf0ea"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a094cd85754f67592588ab5a0636cf0ea">base64</a></div><div class="ttdeci">static char base64[64]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00078">main/utils.c:78</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6f10cf7bc3c66a48184c2d722330c7e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f10cf7bc3c66a48184c2d722330c7e1">&#9670;&nbsp;</a></span>ast_http_get_contents()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* ast_http_get_contents </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>return_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the contents (body) of the HTTP request. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">return_length</td><td>ptr to int that returns content length </td></tr>
    <tr><td class="paramname">ser</td><td>HTTP TCP/TLS session object </td></tr>
    <tr><td class="paramname">headers</td><td>List of HTTP headers </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ptr to content (zero terminated) or NULL on failure </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Since returned ptr is malloc'd, it should be free'd by caller </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01181">1181</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00228">ast_realloc</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00451">http_worker_private_data::body_length</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00453">http_worker_private_data::flags</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01069">http_body_check_chunk_sync()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01100">http_body_discard_chunk_trailer_headers()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01041">http_body_get_chunk_length()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00928">http_body_read_contents()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00443">HTTP_FLAG_BODY_READ</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00445">HTTP_FLAG_CLOSE_ON_COMPLETION</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00441">HTTP_FLAG_HAS_BODY</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00085">MAX_CONTENT_LENGTH</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00162">ast_tcptls_session_instance::private_data</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02559">request()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l01314">ast_http_get_json()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l01353">ast_http_get_post_vars()</a>.</p>
<div class="fragment"><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;{</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a> *<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a>;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;   <span class="keywordtype">int</span> content_length;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;   <span class="keywordtype">int</span> bufsize;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;   request = ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">private_data</a>;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920">HTTP_FLAG_HAS_BODY</a>)) {</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;      <span class="comment">/* no content - not an error */</span></div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;   }</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88">HTTP_FLAG_BODY_READ</a>)) {</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;      <span class="comment">/* Already read the body.  Cannot read again.  Assume no content. */</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;   }</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88">HTTP_FLAG_BODY_READ</a>);</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;HTTP consuming request body\n&quot;</span>);</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#a7c4c998980a0428c51179a4694431068">body_length</a> != 0);</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;   <span class="keywordflow">if</span> (0 &lt; request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#a7c4c998980a0428c51179a4694431068">body_length</a>) {</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;      <span class="comment">/* handle regular non-chunked content */</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      content_length = request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#a7c4c998980a0428c51179a4694431068">body_length</a>;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;      <span class="keywordflow">if</span> (content_length &gt; <a class="code" href="../../dd/d43/http_8c.html#aace3c09acf4173f55f74d5c65976b23a">MAX_CONTENT_LENGTH</a>) {</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Excessively long HTTP content. (%d &gt; %d)\n&quot;</span>,</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;            content_length, <a class="code" href="../../dd/d43/http_8c.html#aace3c09acf4173f55f74d5c65976b23a">MAX_CONTENT_LENGTH</a>);</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>);</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;         <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = EFBIG;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;      }</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      buf = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(content_length + 1);</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      <span class="keywordflow">if</span> (!buf) {</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;         <span class="comment">/* Malloc sets ENOMEM */</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>);</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;      }</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#ab2e59f3466d22103f61bfd928bbd9e19">http_body_read_contents</a>(ser, buf, content_length, <span class="stringliteral">&quot;body&quot;</span>)) {</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>);</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;         <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = EIO;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(buf);</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;      }</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;      buf[content_length] = 0;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;      *return_length = content_length;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;   }</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;   <span class="comment">/* pre-allocate buffer */</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;   bufsize = 250;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;   buf = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(bufsize);</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;   <span class="keywordflow">if</span> (!buf) {</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>);</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;   }</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;   <span class="comment">/* parse chunked-body */</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;   content_length = 0;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;      <span class="keywordtype">int</span> chunk_length;</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      chunk_length = <a class="code" href="../../dd/d43/http_8c.html#af79aa289c3929912006d5757d19d6136">http_body_get_chunk_length</a>(ser);</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      <span class="keywordflow">if</span> (chunk_length &lt; 0) {</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>);</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;         <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = EIO;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(buf);</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;      }</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;      <span class="keywordflow">if</span> (chunk_length == 0) {</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;         <span class="comment">/* parsed last-chunk */</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;      }</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;      <span class="keywordflow">if</span> (content_length + chunk_length &gt; <a class="code" href="../../dd/d43/http_8c.html#aace3c09acf4173f55f74d5c65976b23a">MAX_CONTENT_LENGTH</a>) {</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;            <span class="stringliteral">&quot;Excessively long HTTP accumulated chunked body. (%d + %d &gt; %d)\n&quot;</span>,</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            content_length, chunk_length, <a class="code" href="../../dd/d43/http_8c.html#aace3c09acf4173f55f74d5c65976b23a">MAX_CONTENT_LENGTH</a>);</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>);</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;         <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = EFBIG;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(buf);</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      }</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      <span class="comment">/* insure buffer is large enough +1 */</span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;      <span class="keywordflow">if</span> (content_length + chunk_length &gt;= bufsize) {</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;         <span class="keywordtype">char</span> *new_buf;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;         <span class="comment">/* Increase bufsize until it can handle the expected data. */</span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;         <span class="keywordflow">do</span> {</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;            bufsize *= 2;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;         } <span class="keywordflow">while</span> (content_length + chunk_length &gt;= bufsize);</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;         new_buf = <a class="code" href="../../d8/d8a/astmm_8h.html#aa6bcdb74dc1508c22986f0adf171a0f2">ast_realloc</a>(buf, bufsize);</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;         <span class="keywordflow">if</span> (!new_buf) {</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;            <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>);</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(buf);</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;         }</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;         buf = new_buf;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      }</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#ab2e59f3466d22103f61bfd928bbd9e19">http_body_read_contents</a>(ser, buf + content_length, chunk_length, <span class="stringliteral">&quot;chunk-data&quot;</span>)</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;         || <a class="code" href="../../dd/d43/http_8c.html#a8cab07b884d4c0d4e380ca603478ddaf">http_body_check_chunk_sync</a>(ser)) {</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>);</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;         <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = EIO;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(buf);</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;      }</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;      content_length += chunk_length;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;   }</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;<span class="comment">    * Read and discard any trailer entity-header lines</span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;<span class="comment">    * which we don&#39;t care about.</span></div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;<span class="comment">    * XXX In the future we may need to add the trailer headers</span></div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="comment">    * to the passed in headers list rather than discarding them.</span></div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#a0407b8b04eb198ad0b20136d3ec4fa6d">http_body_discard_chunk_trailer_headers</a>(ser)) {</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>);</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;      <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = EIO;</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(buf);</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;   }</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;   buf[content_length] = 0;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;   *return_length = content_length;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;}</div><div class="ttc" id="astmm_8h_html_aa6bcdb74dc1508c22986f0adf171a0f2"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#aa6bcdb74dc1508c22986f0adf171a0f2">ast_realloc</a></div><div class="ttdeci">#define ast_realloc(p, len)</div><div class="ttdoc">A wrapper for realloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00228">astmm.h:228</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html_a7c4c998980a0428c51179a4694431068"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html#a7c4c998980a0428c51179a4694431068">http_worker_private_data::body_length</a></div><div class="ttdeci">int body_length</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00451">http.c:451</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920">HTTP_FLAG_HAS_BODY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00441">http.c:441</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88">HTTP_FLAG_BODY_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00443">http.c:443</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="http_8c_html_ab2e59f3466d22103f61bfd928bbd9e19"><div class="ttname"><a href="../../dd/d43/http_8c.html#ab2e59f3466d22103f61bfd928bbd9e19">http_body_read_contents</a></div><div class="ttdeci">static int http_body_read_contents(struct ast_tcptls_session_instance *ser, char *buf, int length, const char *what_getting)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00928">http.c:928</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_ad517770dac2061381b2008850ff12e6c"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">ast_tcptls_session_instance::private_data</a></div><div class="ttdeci">void * private_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00162">tcptls.h:162</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">http_worker_private_data::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00453">http.c:453</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="http_8c_html_af79aa289c3929912006d5757d19d6136"><div class="ttname"><a href="../../dd/d43/http_8c.html#af79aa289c3929912006d5757d19d6136">http_body_get_chunk_length</a></div><div class="ttdeci">static int http_body_get_chunk_length(struct ast_tcptls_session_instance *ser)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01041">http.c:1041</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a4e2e6fb7d874f0d2deddd2ecfc8afb32"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a></div><div class="ttdeci">static int request(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02559">chan_pjsip.c:2559</a></div></div>
<div class="ttc" id="http_8c_html_a0407b8b04eb198ad0b20136d3ec4fa6d"><div class="ttname"><a href="../../dd/d43/http_8c.html#a0407b8b04eb198ad0b20136d3ec4fa6d">http_body_discard_chunk_trailer_headers</a></div><div class="ttdeci">static int http_body_discard_chunk_trailer_headers(struct ast_tcptls_session_instance *ser)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01100">http.c:1100</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00445">http.c:445</a></div></div>
<div class="ttc" id="http_8c_html_aace3c09acf4173f55f74d5c65976b23a"><div class="ttname"><a href="../../dd/d43/http_8c.html#aace3c09acf4173f55f74d5c65976b23a">MAX_CONTENT_LENGTH</a></div><div class="ttdeci">#define MAX_CONTENT_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00085">http.c:85</a></div></div>
<div class="ttc" id="http_8c_html_a8cab07b884d4c0d4e380ca603478ddaf"><div class="ttname"><a href="../../dd/d43/http_8c.html#a8cab07b884d4c0d4e380ca603478ddaf">http_body_check_chunk_sync</a></div><div class="ttdeci">static int http_body_check_chunk_sync(struct ast_tcptls_session_instance *ser)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01069">http.c:1069</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00449">http.c:449</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2e7522cd280df6ee043aad7bef980eb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e7522cd280df6ee043aad7bef980eb9">&#9670;&nbsp;</a></span>ast_http_get_cookies()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a>* ast_http_get_cookies </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get cookie from Request headers. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01532">1532</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01263">ast_variables_destroy()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01498">parse_cookies()</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l00217">ast_http_manid_from_vars()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l00368">httpstatus_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;{</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v, *cookies = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;   <span class="keywordflow">for</span> (v = headers; v; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;Cookie&quot;</span>)) {</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;         <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(cookies);</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;         cookies = <a class="code" href="../../dd/d43/http_8c.html#a51d0195b6167cb6e4661f6aec72382e9">parse_cookies</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;      }</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;   }</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;   <span class="keywordflow">return</span> cookies;</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="http_8c_html_a51d0195b6167cb6e4661f6aec72382e9"><div class="ttname"><a href="../../dd/d43/http_8c.html#a51d0195b6167cb6e4661f6aec72382e9">parse_cookies</a></div><div class="ttdeci">static struct ast_variable * parse_cookies(const char *cookies)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01498">http.c:1498</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a69c4e20e1d1d148576176a43562fa826"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69c4e20e1d1d148576176a43562fa826">&#9670;&nbsp;</a></span>ast_http_get_json()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a>* ast_http_get_json </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get JSON from client Request Entity-Body, if content type is application/json. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ser</td><td>TCP/TLS session object </td></tr>
    <tr><td class="paramname">headers</td><td>List of HTTP headers </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Parsed JSON content body </dd>
<dd>
<code>NULL</code> on error, if no content, or if different content type. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01314">1314</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01181">ast_http_get_contents()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00564">ast_json_load_buf()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00761">get_content_type()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00885">ast_ari_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;{</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;   <span class="keywordtype">int</span> content_length = 0;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *body;</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../dd/d43/http_8c.html#ad06499f4d8764c97a4cd7750b8e199f3">get_content_type</a>(headers), <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;   <span class="comment">/* Use errno to distinguish errors from no body */</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;   <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = 0;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) || strcasecmp(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <span class="stringliteral">&quot;application/json&quot;</span>)) {</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;      <span class="comment">/* Content type is not JSON.  Don&#39;t read the body. */</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;   }</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> = <a class="code" href="../../dd/d43/http_8c.html#a6f10cf7bc3c66a48184c2d722330c7e1">ast_http_get_contents</a>(&amp;content_length, ser, headers);</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> || !content_length) {</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;<span class="comment">       * errno already set</span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;<span class="comment">       * or it is not an error to have zero content</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;   }</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;   body = <a class="code" href="../../d4/d05/json_8h.html#aa1ad8d1561851ac6a4e97e82025266e4">ast_json_load_buf</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, content_length, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;   <span class="keywordflow">if</span> (!body) {</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;      <span class="comment">/* Failed to parse JSON; treat as an I/O error */</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = EIO;</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;   }</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;   <span class="keywordflow">return</span> body;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="http_8c_html_a6f10cf7bc3c66a48184c2d722330c7e1"><div class="ttname"><a href="../../dd/d43/http_8c.html#a6f10cf7bc3c66a48184c2d722330c7e1">ast_http_get_contents</a></div><div class="ttdeci">static char * ast_http_get_contents(int *return_length, struct ast_tcptls_session_instance *ser, struct ast_variable *headers)</div><div class="ttdoc">Returns the contents (body) of the HTTP request. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01181">http.c:1181</a></div></div>
<div class="ttc" id="json_8h_html_aa1ad8d1561851ac6a4e97e82025266e4"><div class="ttname"><a href="../../d4/d05/json_8h.html#aa1ad8d1561851ac6a4e97e82025266e4">ast_json_load_buf</a></div><div class="ttdeci">struct ast_json * ast_json_load_buf(const char *buffer, size_t buflen, struct ast_json_error *error)</div><div class="ttdoc">Parse buffer with known length into a JSON object or array. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00564">json.c:564</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="http_8c_html_ad06499f4d8764c97a4cd7750b8e199f3"><div class="ttname"><a href="../../dd/d43/http_8c.html#ad06499f4d8764c97a4cd7750b8e199f3">get_content_type</a></div><div class="ttdeci">static char * get_content_type(struct ast_variable *headers)</div><div class="ttdoc">Retrieves the content type specified in the &quot;Content-Type&quot; header. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00761">http.c:761</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac000c497701f197370cbef5aa4c1a92e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac000c497701f197370cbef5aa4c1a92e">&#9670;&nbsp;</a></span>ast_http_get_post_vars()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a>* ast_http_get_post_vars </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get post variables from client Request Entity-Body, if content type is application/x-www-form-urlencoded. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ser</td><td>TCP/TLS session object </td></tr>
    <tr><td class="paramname">headers</td><td>List of HTTP headers </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>List of variables within the POST body </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Since returned list is malloc'd, list should be free'd by the calling function </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.8 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01353">1353</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01181">ast_http_get_contents()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00616">ast_uri_decode()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00574">ast_uri_http_legacy</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">ast_variable_new</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00761">get_content_type()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>, <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>, and <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00614">var</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00885">ast_ari_callback()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l07907">generic_http_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;{</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;   <span class="keywordtype">int</span> content_length = 0;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v, *post_vars=<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *prev = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>, *<a class="code" href="../../d5/d85/structval.html">val</a>;</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../dd/d43/http_8c.html#ad06499f4d8764c97a4cd7750b8e199f3">get_content_type</a>(headers), <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;   <span class="comment">/* Use errno to distinguish errors from no params */</span></div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;   <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = 0;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) ||</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;       strcasecmp(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <span class="stringliteral">&quot;application/x-www-form-urlencoded&quot;</span>)) {</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;      <span class="comment">/* Content type is not form data.  Don&#39;t read the body. */</span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;   }</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> = <a class="code" href="../../dd/d43/http_8c.html#a6f10cf7bc3c66a48184c2d722330c7e1">ast_http_get_contents</a>(&amp;content_length, ser, headers);</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> || !content_length) {</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="comment">       * errno already set</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;<span class="comment">       * or it is not an error to have zero content</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;   }</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;   <span class="keywordflow">while</span> ((val = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="stringliteral">&quot;&amp;&quot;</span>))) {</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;      var = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;val, <span class="stringliteral">&quot;=&quot;</span>);</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;      <span class="keywordflow">if</span> (val) {</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ad9d3c7c4cc262a1205c833a95fa65a6d">ast_uri_decode</a>(val, <a class="code" href="../../d5/d60/utils_8h.html#af7cc8e3b6b28b9315c312edb79af2f59">ast_uri_http_legacy</a>);</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      } <span class="keywordflow">else</span>  {</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;         val = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;      }</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ad9d3c7c4cc262a1205c833a95fa65a6d">ast_uri_decode</a>(var, <a class="code" href="../../d5/d60/utils_8h.html#af7cc8e3b6b28b9315c312edb79af2f59">ast_uri_http_legacy</a>);</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;      <span class="keywordflow">if</span> ((v = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(var, val, <span class="stringliteral">&quot;&quot;</span>))) {</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;         <span class="keywordflow">if</span> (post_vars) {</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;            prev-&gt;next = v;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;            post_vars = v;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;         }</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;         prev = v;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;      }</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;   }</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;   <span class="keywordflow">return</span> post_vars;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;}</div><div class="ttc" id="utils_8h_html_ad9d3c7c4cc262a1205c833a95fa65a6d"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ad9d3c7c4cc262a1205c833a95fa65a6d">ast_uri_decode</a></div><div class="ttdeci">void ast_uri_decode(char *s, struct ast_flags spec)</div><div class="ttdoc">Decode URI, URN, URL (overwrite string) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00616">main/utils.c:616</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="http_8c_html_a6f10cf7bc3c66a48184c2d722330c7e1"><div class="ttname"><a href="../../dd/d43/http_8c.html#a6f10cf7bc3c66a48184c2d722330c7e1">ast_http_get_contents</a></div><div class="ttdeci">static char * ast_http_get_contents(int *return_length, struct ast_tcptls_session_instance *ser, struct ast_variable *headers)</div><div class="ttdoc">Returns the contents (body) of the HTTP request. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01181">http.c:1181</a></div></div>
<div class="ttc" id="structval_html"><div class="ttname"><a href="../../d5/d85/structval.html">val</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd1/ast__expr2_8c_source.html#l00325">ast_expr2.c:325</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="http_8c_html_ad06499f4d8764c97a4cd7750b8e199f3"><div class="ttname"><a href="../../dd/d43/http_8c.html#ad06499f4d8764c97a4cd7750b8e199f3">get_content_type</a></div><div class="ttdeci">static char * get_content_type(struct ast_variable *headers)</div><div class="ttdoc">Retrieves the content type specified in the &quot;Content-Type&quot; header. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00761">http.c:761</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a66581086d34dfe7ea86b0644bacef239"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a></div><div class="ttdeci">#define ast_variable_new(name, value, filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">include/asterisk/config.h:914</a></div></div>
<div class="ttc" id="utils_8h_html_af7cc8e3b6b28b9315c312edb79af2f59"><div class="ttname"><a href="../../d5/d60/utils_8h.html#af7cc8e3b6b28b9315c312edb79af2f59">ast_uri_http_legacy</a></div><div class="ttdeci">const struct ast_flags ast_uri_http_legacy</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00574">main/utils.c:574</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a927d764492a7c0d2341ebb35994d9e81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a927d764492a7c0d2341ebb35994d9e81">&#9670;&nbsp;</a></span>ast_http_header_match()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_http_header_match </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>expected_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>expected_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if the header and value match (case insensitive) their associated expected values. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>header name to check </td></tr>
    <tr><td class="paramname">expected_name</td><td>the expected name of the header </td></tr>
    <tr><td class="paramname">value</td><td>header value to check </td></tr>
    <tr><td class="paramname">expected_value</td><td>the expected value of the header </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if the name and expected name do not match </dd>
<dd>
-1 if the value and expected value do not match </dd>
<dd>
1 if the both the name and value match their expected value </dd></dl>
<dl class="section since"><dt>Since</dt><dd>13 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01710">1710</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l01300">websocket_client_handshake_get_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;{</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;   <span class="keywordflow">if</span> (strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, expected_name)) {</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;      <span class="comment">/* no value to validate if names don&#39;t match */</span></div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;   }</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;   <span class="keywordflow">if</span> (strcasecmp(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, expected_value)) {</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid header value - expected %s &quot;</span></div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;         <span class="stringliteral">&quot;received %s&quot;</span>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, expected_value);</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;   }</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;}</div><div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a20dc0ed36f151f2cfd588ee64b737011"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20dc0ed36f151f2cfd588ee64b737011">&#9670;&nbsp;</a></span>ast_http_header_match_in()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_http_header_match_in </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>expected_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>expected_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if the header name matches the expected header name. If so, then check to see if the value can be located in the expected value. </p>
<dl class="section note"><dt>Note</dt><dd>Both header and value checks are case insensitive.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>header name to check </td></tr>
    <tr><td class="paramname">expected_name</td><td>the expected name of the header </td></tr>
    <tr><td class="paramname">value</td><td>header value to check if in expected value </td></tr>
    <tr><td class="paramname">expected_value</td><td>the expected value(s) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if the name and expected name do not match </dd>
<dd>
-1 if the value and is not in the expected value </dd>
<dd>
1 if the name matches expected name and value is in expected value </dd></dl>
<dl class="section since"><dt>Since</dt><dd>13 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01726">1726</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, and <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l01300">websocket_client_handshake_get_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;{</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;   <span class="keywordflow">if</span> (strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, expected_name)) {</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;      <span class="comment">/* no value to validate if names don&#39;t match */</span></div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;   }</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a>(expected_value, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>)) {</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Header &#39;%s&#39; - could not locate &#39;%s&#39; &quot;</span></div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;         <span class="stringliteral">&quot;in &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, expected_value);</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;   }</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;}</div><div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a0d78ab95e54db8c72a64038cfefb5161"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a></div><div class="ttdeci">char * strcasestr(const char *, const char *)</div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1b1e02f7f0b46b21d8b3750d40aff87b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b1e02f7f0b46b21d8b3750d40aff87b">&#9670;&nbsp;</a></span>ast_http_header_parse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_http_header_parse </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse a header into the given name/value strings. </p>
<dl class="section note"><dt>Note</dt><dd>This modifies the given buffer and the out parameters point (not allocated) to the start of the header name and header value, respectively.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>a string containing the name/value to point to </td></tr>
    <tr><td class="paramname">name</td><td>out parameter pointing to the header name </td></tr>
    <tr><td class="paramname">value</td><td>out parameter pointing to header value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 if buf is empty </dd>
<dd>
0 if buf could be separated into name and value </dd>
<dd>
1 if name or value portion don't exist </dd></dl>
<dl class="section since"><dt>Since</dt><dd>13 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01688">1688</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00157">ast_skip_blanks()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00182">ast_trim_blanks()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01659">remove_excess_lws()</a>, and <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l01300">websocket_client_handshake_get_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;{</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#abe38193be148775f7559f8fff6e0c17e">ast_trim_blanks</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>);</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>)) {</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;   }</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;   *<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> = <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;   *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, <span class="stringliteral">&quot;:&quot;</span>);</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;   <span class="keywordflow">if</span> (!*<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>) {</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;   }</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;   *<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> = <a class="code" href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a>(*<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(*<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(*<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>)) {</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;   }</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#a96830ad81e8b0d664a6b681bc90edb92">remove_excess_lws</a>(*<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="strings_8h_html_af5693da955fa3bc73bc49c47b601fc7a"><div class="ttname"><a href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a></div><div class="ttdeci">char * ast_skip_blanks(const char *str)</div><div class="ttdoc">Gets a pointer to the first non-whitespace character in a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00157">strings.h:157</a></div></div>
<div class="ttc" id="strings_8h_html_abe38193be148775f7559f8fff6e0c17e"><div class="ttname"><a href="../../d6/d90/strings_8h.html#abe38193be148775f7559f8fff6e0c17e">ast_trim_blanks</a></div><div class="ttdeci">char * ast_trim_blanks(char *str)</div><div class="ttdoc">Trims trailing whitespace characters from a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00182">strings.h:182</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="http_8c_html_a96830ad81e8b0d664a6b681bc90edb92"><div class="ttname"><a href="../../dd/d43/http_8c.html#a96830ad81e8b0d664a6b681bc90edb92">remove_excess_lws</a></div><div class="ttdeci">static void remove_excess_lws(char *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01659">http.c:1659</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="add40a4aab8126b7700387d428c830f18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add40a4aab8126b7700387d428c830f18">&#9670;&nbsp;</a></span>ast_http_manid_from_vars()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t ast_http_manid_from_vars </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return manager id, if exist, from request headers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">headers</td><td>List of HTTP headers </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>32-bit associated manager session identifier </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.8 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00217">217</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d43/http_8c_source.html#l01532">ast_http_get_cookies()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01263">ast_variables_destroy()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l07907">generic_http_callback()</a>, <a class="el" href="../../d6/dc9/res__http__post_8c_source.html#l00323">http_post_callback()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l00240">static_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;{</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;   uint32_t mngid = 0;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v, *cookies;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;   cookies = <a class="code" href="../../dd/d43/http_8c.html#a2e7522cd280df6ee043aad7bef980eb9">ast_http_get_cookies</a>(headers);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   <span class="keywordflow">for</span> (v = cookies; v; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;mansession_id&quot;</span>)) {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;         sscanf(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;%30x&quot;</span>, &amp;mngid);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      }</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(cookies);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;   <span class="keywordflow">return</span> mngid;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="http_8c_html_a2e7522cd280df6ee043aad7bef980eb9"><div class="ttname"><a href="../../dd/d43/http_8c.html#a2e7522cd280df6ee043aad7bef980eb9">ast_http_get_cookies</a></div><div class="ttdeci">struct ast_variable * ast_http_get_cookies(struct ast_variable *headers)</div><div class="ttdoc">Get cookie from Request headers. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01532">http.c:1532</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0059c10f2538cfa09f9979d5fefd5638"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0059c10f2538cfa09f9979d5fefd5638">&#9670;&nbsp;</a></span>ast_http_prefix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_http_prefix </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the current prefix. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>destination buffer for previous </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of prefix to copy </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00233">233</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l00141">prefix</a>.</p>
<div class="fragment"><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;{</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a>, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;   }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="http_8c_html_a6f25bc812d09fedb86bf394c01061c56"><div class="ttname"><a href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a></div><div class="ttdeci">static char prefix[MAX_PREFIX]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00141">http.c:141</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab0286838ed2b93e0d77fe9d7af8a37b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0286838ed2b93e0d77fe9d7af8a37b5">&#9670;&nbsp;</a></span>ast_http_request_close_on_completion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_http_request_close_on_completion </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Request the HTTP connection be closed after this HTTP request. </p>
<dl class="section since"><dt>Since</dt><dd>12.4.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ser</td><td>HTTP TCP/TLS session object.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Call before <a class="el" href="../../dd/d56/http_8h.html#ab0f7966324a592e02d53f01e7bb9cc17" title="Send HTTP error message and close socket. ">ast_http_error()</a> to make the connection close.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00836">836</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00453">http_worker_private_data::flags</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00445">HTTP_FLAG_CLOSE_ON_COMPLETION</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00162">ast_tcptls_session_instance::private_data</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02559">request()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00885">ast_ari_callback()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07907">generic_http_callback()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01401">handle_uri()</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00091">http_callback()</a>, <a class="el" href="../../d6/dc9/res__http__post_8c_source.html#l00323">http_post_callback()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00368">httpstatus_callback()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00240">static_callback()</a>, and <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l00777">websocket_bad_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;{</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a> *<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a> = ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">private_data</a>;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>);</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;}</div><div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_ad517770dac2061381b2008850ff12e6c"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">ast_tcptls_session_instance::private_data</a></div><div class="ttdeci">void * private_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00162">tcptls.h:162</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">http_worker_private_data::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00453">http.c:453</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a4e2e6fb7d874f0d2deddd2ecfc8afb32"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a></div><div class="ttdeci">static int request(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02559">chan_pjsip.c:2559</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00445">http.c:445</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00449">http.c:449</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa042c9c6e2344db5e8a8d97683424b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa042c9c6e2344db5e8a8d97683424b3">&#9670;&nbsp;</a></span>ast_http_response_status_line()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_http_response_status_line </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse the http response status line. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>the http response line information </td></tr>
    <tr><td class="paramname">version</td><td>the expected http version (e.g. HTTP/1.1) </td></tr>
    <tr><td class="paramname">code</td><td>the expected status code </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 if version didn't match or status code conversion fails. </dd>
<dd>
status code (&gt;0) </dd></dl>
<dl class="section since"><dt>Since</dt><dd>13 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01636">1636</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l01300">websocket_client_handshake_get_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;{</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;   <span class="keywordtype">int</span> status_code;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;   <span class="keywordtype">size_t</span> size = strlen(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a81b4b1c3c855fb371e7723b473f1ee78">version</a>);</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;   <span class="keywordflow">if</span> (strncmp(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a81b4b1c3c855fb371e7723b473f1ee78">version</a>, size) || <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[size] != <span class="charliteral">&#39; &#39;</span>) {</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;HTTP version not supported - &quot;</span></div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;         <span class="stringliteral">&quot;expected %s\n&quot;</span>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a81b4b1c3c855fb371e7723b473f1ee78">version</a>);</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;   }</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;   <span class="comment">/* skip to status code (version + space) */</span></div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> += size + 1;</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;   <span class="keywordflow">if</span> (sscanf(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="stringliteral">&quot;%d&quot;</span>, &amp;status_code) != 1) {</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not read HTTP status code - &quot;</span></div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;         <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>);</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;   }</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;   <span class="keywordflow">return</span> status_code;</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a81b4b1c3c855fb371e7723b473f1ee78"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a81b4b1c3c855fb371e7723b473f1ee78">version</a></div><div class="ttdeci">static char version[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00391">chan_ooh323.c:391</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0448c9f4a66b6ee7994870b187e185b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0448c9f4a66b6ee7994870b187e185b4">&#9670;&nbsp;</a></span>ast_http_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_http_send </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80ef">ast_http_method</a>&#160;</td>
          <td class="paramname"><em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>status_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>status_title</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> *&#160;</td>
          <td class="paramname"><em>http_header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> *&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>static_content</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generic function for sending HTTP/1.1 response. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ser</td><td>TCP/TLS session object </td></tr>
    <tr><td class="paramname">method</td><td>GET/POST/HEAD </td></tr>
    <tr><td class="paramname">status_code</td><td>HTTP response code (200/401/403/404/500) </td></tr>
    <tr><td class="paramname">status_title</td><td>English equivalent to the status_code parameter </td></tr>
    <tr><td class="paramname">http_header</td><td>An <a class="el" href="../../dd/da2/structast__str.html" title="The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...">ast_str</a> object containing all headers </td></tr>
    <tr><td class="paramname">out</td><td>An <a class="el" href="../../dd/da2/structast__str.html" title="The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...">ast_str</a> object containing the body of the response </td></tr>
    <tr><td class="paramname">fd</td><td>If out is NULL, a file descriptor where the body of the response is held (otherwise -1) </td></tr>
    <tr><td class="paramname">static_content</td><td>Zero if the content is dynamically generated and should not be cached; nonzero otherwise</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Function determines the HTTP response header from status_code, status_header, and http_header.</dd></dl>
<p>Extra HTTP headers MUST be present only in the http_header argument. The argument "out" should contain only content of the response (no headers!).</p>
<p>HTTP content can be constructed from the argument "out", if it is not NULL; otherwise, the function will read content from FD.</p>
<p>This function calculates the content-length http header itself.</p>
<p>Both the http_header and out arguments will be freed by this function; however, if FD is open, it will remain open.</p>
<dl class="section since"><dt>Since</dt><dd>1.8 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00456">456</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01120">ast_http_body_discard()</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00060">AST_HTTP_HEAD</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00491">ast_iostream_printf()</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00374">ast_iostream_write()</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l01739">ast_localtime()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00688">ast_str_strlen()</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l02524">ast_strftime()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00839">ast_tcptls_close_session_file()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00453">http_worker_private_data::flags</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00445">HTTP_FLAG_CLOSE_ON_COMPLETION</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00104">http_server_name</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00079">MAX_SERVER_NAME_LENGTH</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00162">ast_tcptls_session_instance::private_data</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02559">request()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00108">session_keep_alive</a>, and <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00160">ast_tcptls_session_instance::stream</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00885">ast_ari_callback()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00567">ast_http_create_response()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07907">generic_http_callback()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01401">handle_uri()</a>, <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00593">http_callback()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00368">httpstatus_callback()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00240">static_callback()</a>, and <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l00777">websocket_bad_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;{</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;   <span class="keyword">struct </span>timeval now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d84/structast__tm.html">ast_tm</a> tm;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   <span class="keywordtype">char</span> timebuf[80];</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[256];</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   <span class="keywordtype">int</span> content_length = 0;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   <span class="keywordtype">int</span> close_connection;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *server_header_field = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(<a class="code" href="../../dd/d43/http_8c.html#af5c7bcd09f0d5f4bb9e09bd401130b95">MAX_SERVER_NAME_LENGTH</a>);</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <span class="keywordtype">int</span> send_content;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   <span class="keywordflow">if</span> (!ser || !server_header_field) {</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      <span class="comment">/* The connection is not open. */</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(http_header);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(out);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(server_header_field);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   }</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;   <span class="keywordflow">if</span>(!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../dd/d43/http_8c.html#a5086e142ada070c22242a51c58f3da4a">http_server_name</a>)) {</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;server_header_field,</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                   0,</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                   <span class="stringliteral">&quot;Server: %s\r\n&quot;</span>,</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                   <a class="code" href="../../dd/d43/http_8c.html#a5086e142ada070c22242a51c58f3da4a">http_server_name</a>);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;   }</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">    * We shouldn&#39;t be sending non-final status codes to this</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">    * function because we may close the connection before</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">    * returning.</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(200 &lt;= status_code);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#ad49ee0814a6efb14658ec87f2f6a86fb">session_keep_alive</a> &lt;= 0) {</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      close_connection = 1;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a> *<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a>;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      request = ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">private_data</a>;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <span class="keywordflow">if</span> (!request</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;         || <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>)</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;         || <a class="code" href="../../dd/d43/http_8c.html#a6158887813b6c700d9056b4daea05df0">ast_http_body_discard</a>(ser)) {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;         close_connection = 1;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;         close_connection = 0;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      }</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   }</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   <a class="code" href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a>(timebuf, <span class="keyword">sizeof</span>(timebuf), <span class="stringliteral">&quot;%a, %d %b %Y %H:%M:%S GMT&quot;</span>, <a class="code" href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a>(&amp;now, &amp;tm, <span class="stringliteral">&quot;GMT&quot;</span>));</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;   <span class="comment">/* calc content length */</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   <span class="keywordflow">if</span> (out) {</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      content_length += <a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(out);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   }</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   <span class="keywordflow">if</span> (fd) {</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      content_length += lseek(fd, 0, SEEK_END);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      lseek(fd, 0, SEEK_SET);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   }</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;   send_content = <a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a> != <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efaf8da4e60a407fb100dd10e20929ea162">AST_HTTP_HEAD</a> || status_code &gt;= 400;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;   <span class="comment">/* send http header */</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d27/iostream_8h.html#a23c05430f4b03eb5c72e1531f0716499">ast_iostream_printf</a>(ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>,</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      <span class="stringliteral">&quot;HTTP/1.1 %d %s\r\n&quot;</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <span class="stringliteral">&quot;Date: %s\r\n&quot;</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      <span class="stringliteral">&quot;Content-Length: %d\r\n&quot;</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      <span class="stringliteral">&quot;\r\n&quot;</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span>,</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      status_code, status_title ? status_title : <span class="stringliteral">&quot;OK&quot;</span>,</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(server_header_field),</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      timebuf,</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      close_connection ? <span class="stringliteral">&quot;Connection: close\r\n&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      static_content ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;Cache-Control: no-cache, no-store\r\n&quot;</span>,</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      http_header ? <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(http_header) : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      content_length,</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      send_content &amp;&amp; out &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(out) ? <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(out) : <span class="stringliteral">&quot;&quot;</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      ) &lt;= 0) {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;ast_iostream_printf() failed: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      close_connection = 1;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (send_content &amp;&amp; fd) {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <span class="comment">/* send file content */</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <span class="keywordflow">while</span> ((len = read(fd, buf, <span class="keyword">sizeof</span>(buf))) &gt; 0) {</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dd/d27/iostream_8h.html#a6e0bf2afcbc5b330b96378626f9ac5b3">ast_iostream_write</a>(ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>, buf, len) != len) {</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;ast_iostream_write() failed: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            close_connection = 1;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;         }</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      }</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   }</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(http_header);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(out);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(server_header_field);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   <span class="keywordflow">if</span> (close_connection) {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;HTTP closing session.  status_code:%d\n&quot;</span>, status_code);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <a class="code" href="../../d4/ddf/tcptls_8h.html#adea645492f53ec11186b84eaf85e14d9">ast_tcptls_close_session_file</a>(ser);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;HTTP keeping session open.  status_code:%d\n&quot;</span>, status_code);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   }</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;}</div><div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="iostream_8h_html_a6e0bf2afcbc5b330b96378626f9ac5b3"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#a6e0bf2afcbc5b330b96378626f9ac5b3">ast_iostream_write</a></div><div class="ttdeci">ssize_t ast_iostream_write(struct ast_iostream *stream, const void *buffer, size_t count)</div><div class="ttdoc">Write data to an iostream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00374">iostream.c:374</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="localtime_8h_html_ae9fbda728350a9a5b9c09b29214d718e"><div class="ttname"><a href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a></div><div class="ttdeci">struct ast_tm * ast_localtime(const struct timeval *timep, struct ast_tm *p_tm, const char *zone)</div><div class="ttdoc">Timezone-independent version of localtime_r(3). </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l01739">localtime.c:1739</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="http_8c_html_af5c7bcd09f0d5f4bb9e09bd401130b95"><div class="ttname"><a href="../../dd/d43/http_8c.html#af5c7bcd09f0d5f4bb9e09bd401130b95">MAX_SERVER_NAME_LENGTH</a></div><div class="ttdeci">#define MAX_SERVER_NAME_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00079">http.c:79</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="http_8c_html_a6158887813b6c700d9056b4daea05df0"><div class="ttname"><a href="../../dd/d43/http_8c.html#a6158887813b6c700d9056b4daea05df0">ast_http_body_discard</a></div><div class="ttdeci">int ast_http_body_discard(struct ast_tcptls_session_instance *ser)</div><div class="ttdoc">Read and discard any unread HTTP request body. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01120">http.c:1120</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a8b44a03925325ceaf2de7b079b1541a1"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a></div><div class="ttdeci">const char * method</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04335">res_pjsip.c:4335</a></div></div>
<div class="ttc" id="iostream_8h_html_a23c05430f4b03eb5c72e1531f0716499"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#a23c05430f4b03eb5c72e1531f0716499">ast_iostream_printf</a></div><div class="ttdeci">ssize_t ast_iostream_printf(struct ast_iostream *stream, const char *format,...)</div><div class="ttdoc">Write a formatted string to an iostream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00491">iostream.c:491</a></div></div>
<div class="ttc" id="http_8c_html_a5086e142ada070c22242a51c58f3da4a"><div class="ttname"><a href="../../dd/d43/http_8c.html#a5086e142ada070c22242a51c58f3da4a">http_server_name</a></div><div class="ttdeci">static char http_server_name[MAX_SERVER_NAME_LENGTH]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00104">http.c:104</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_ad517770dac2061381b2008850ff12e6c"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">ast_tcptls_session_instance::private_data</a></div><div class="ttdeci">void * private_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00162">tcptls.h:162</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">http_worker_private_data::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00453">http.c:453</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="localtime_8h_html_aa8e63928b14a347bd3973d680b885f93"><div class="ttname"><a href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a></div><div class="ttdeci">int ast_strftime(char *buf, size_t len, const char *format, const struct ast_tm *tm)</div><div class="ttdoc">Special version of strftime(3) that handles fractions of a second. Takes the same arguments as strfti...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l02524">localtime.c:2524</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a4e2e6fb7d874f0d2deddd2ecfc8afb32"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a></div><div class="ttdeci">static int request(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02559">chan_pjsip.c:2559</a></div></div>
<div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80efaf8da4e60a407fb100dd10e20929ea162"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efaf8da4e60a407fb100dd10e20929ea162">AST_HTTP_HEAD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00060">http.h:60</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00445">http.c:445</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_a36ac2dd734607a43ed90acb7e9d81ac5"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">ast_tcptls_session_instance::stream</a></div><div class="ttdeci">struct ast_iostream * stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00160">tcptls.h:160</a></div></div>
<div class="ttc" id="strings_8h_html_aabc005bd1c7e249e8f8659d57d4500b6"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a></div><div class="ttdeci">size_t ast_str_strlen(const struct ast_str *buf)</div><div class="ttdoc">Returns the current length of the string stored within buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00688">strings.h:688</a></div></div>
<div class="ttc" id="tcptls_8h_html_adea645492f53ec11186b84eaf85e14d9"><div class="ttname"><a href="../../d4/ddf/tcptls_8h.html#adea645492f53ec11186b84eaf85e14d9">ast_tcptls_close_session_file</a></div><div class="ttdeci">void ast_tcptls_close_session_file(struct ast_tcptls_session_instance *tcptls_session)</div><div class="ttdoc">Closes a tcptls session instance&amp;#39;s file and/or file descriptor. The tcptls_session will be set to NUL...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9b/tcptls_8c_source.html#l00839">tcptls.c:839</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00449">http.c:449</a></div></div>
<div class="ttc" id="http_8c_html_ad49ee0814a6efb14658ec87f2f6a86fb"><div class="ttname"><a href="../../dd/d43/http_8c.html#ad49ee0814a6efb14658ec87f2f6a86fb">session_keep_alive</a></div><div class="ttdeci">static int session_keep_alive</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00108">http.c:108</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
<div class="ttc" id="structast__tm_html"><div class="ttname"><a href="../../d5/d84/structast__tm.html">ast_tm</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/deb/localtime_8h_source.html#l00035">localtime.h:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5b30188fccd09ea5f099a088b325a190"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b30188fccd09ea5f099a088b325a190">&#9670;&nbsp;</a></span>ast_http_uri_link()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_http_uri_link </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a> *&#160;</td>
          <td class="paramname"><em>urih</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Link the new uri into the list. </p>
<p>Register a URI handler.</p>
<p>They are sorted by length of the string, not alphabetically. Duplicate entries are not replaced, but the insertion order (using &lt;= and not just &lt;) makes sure that more recent insertions hide older ones. On a lookup, we just scan the list and stop at the first matching entry. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00673">673</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00451">AST_RWLIST_EMPTY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00422">AST_RWLIST_FIRST</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00701">AST_RWLIST_INSERT_AFTER</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00717">AST_RWLIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00740">AST_RWLIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00440">AST_RWLIST_NEXT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00104">ast_http_uri::prefix</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00141">prefix</a>, and <a class="el" href="../../dd/d56/http_8h_source.html#l00103">ast_http_uri::uri</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>, <a class="el" href="../../d6/dc9/res__http__post_8c_source.html#l00429">__ast_http_post_load()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l01144">load_module()</a>, and <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l01187">reload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;{</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a> *<a class="code" href="../../d0/d6c/structast__http__uri.html#a69ec24fb2d0a5f5e532deb9adaab81d6">uri</a>;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = strlen(urih-&gt;<a class="code" href="../../d0/d6c/structast__http__uri.html#a69ec24fb2d0a5f5e532deb9adaab81d6">uri</a>);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>);</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;   urih-&gt;<a class="code" href="../../d0/d6c/structast__http__uri.html#a5b41c5ae4505891e6c53e26df197e02b">prefix</a> = <a class="code" href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a>;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   <span class="keywordflow">if</span> ( <a class="code" href="../../df/d90/linkedlists_8h.html#a0044f6572f50a89049b3b5272e51b0e7">AST_RWLIST_EMPTY</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>) || strlen(<a class="code" href="../../df/d90/linkedlists_8h.html#a64835fe6d570951b2a0404799c3d116f">AST_RWLIST_FIRST</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>)-&gt;uri) &lt;= len ) {</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>, urih, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>);</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   }</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>, uri, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a5c021d1e034a53d09360da4d95c76220">AST_RWLIST_NEXT</a>(uri, <a class="code" href="../../d3/d96/structentry.html">entry</a>) &amp;&amp;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;         strlen(<a class="code" href="../../df/d90/linkedlists_8h.html#a5c021d1e034a53d09360da4d95c76220">AST_RWLIST_NEXT</a>(uri, <a class="code" href="../../d3/d96/structentry.html">entry</a>)-&gt;uri) &lt;= len) {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a5937d72e8b39660a1b824af2042c0e9c">AST_RWLIST_INSERT_AFTER</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>, uri, urih, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>);</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      }</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   }</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>, urih, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a5c021d1e034a53d09360da4d95c76220"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a5c021d1e034a53d09360da4d95c76220">AST_RWLIST_NEXT</a></div><div class="ttdeci">#define AST_RWLIST_NEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00440">linkedlists.h:440</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a5937d72e8b39660a1b824af2042c0e9c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a5937d72e8b39660a1b824af2042c0e9c">AST_RWLIST_INSERT_AFTER</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_AFTER</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00701">linkedlists.h:701</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aacc5f6b7c25e361d11d40137fd55a8e8"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00717">linkedlists.h:717</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0044f6572f50a89049b3b5272e51b0e7"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0044f6572f50a89049b3b5272e51b0e7">AST_RWLIST_EMPTY</a></div><div class="ttdeci">#define AST_RWLIST_EMPTY</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00451">linkedlists.h:451</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="structast__http__uri_html_a5b41c5ae4505891e6c53e26df197e02b"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html#a5b41c5ae4505891e6c53e26df197e02b">ast_http_uri::prefix</a></div><div class="ttdeci">const char * prefix</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00104">http.h:104</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadda916488b2d151af4426e2f06ad332"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_TAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00740">linkedlists.h:740</a></div></div>
<div class="ttc" id="structast__http__uri_html"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a></div><div class="ttdoc">Definition of a URI handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00100">http.h:100</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structuris_html"><div class="ttname"><a href="../../db/ddf/structuris.html">uris</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00138">http.c:138</a></div></div>
<div class="ttc" id="structast__http__uri_html_a69ec24fb2d0a5f5e532deb9adaab81d6"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html#a69ec24fb2d0a5f5e532deb9adaab81d6">ast_http_uri::uri</a></div><div class="ttdeci">const char * uri</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00103">http.h:103</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a64835fe6d570951b2a0404799c3d116f"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a64835fe6d570951b2a0404799c3d116f">AST_RWLIST_FIRST</a></div><div class="ttdeci">#define AST_RWLIST_FIRST</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00422">linkedlists.h:422</a></div></div>
<div class="ttc" id="http_8c_html_a6f25bc812d09fedb86bf394c01061c56"><div class="ttname"><a href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a></div><div class="ttdeci">static char prefix[MAX_PREFIX]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00141">http.c:141</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abc4e71c538d9c1ad56b8e4a2e46bed35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc4e71c538d9c1ad56b8e4a2e46bed35">&#9670;&nbsp;</a></span>ast_http_uri_unlink()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_http_uri_unlink </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a> *&#160;</td>
          <td class="paramname"><em>urih</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister a URI handler. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00705">705</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00884">AST_RWLIST_REMOVE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, and <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00945">load_module()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l01187">reload_module()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l02343">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;{</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>);</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6091f0518f8b6f443fd9f5150f3ac407">AST_RWLIST_REMOVE</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>, urih, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6091f0518f8b6f443fd9f5150f3ac407"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6091f0518f8b6f443fd9f5150f3ac407">AST_RWLIST_REMOVE</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00884">linkedlists.h:884</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structuris_html"><div class="ttname"><a href="../../db/ddf/structuris.html">uris</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00138">http.c:138</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae05bfd31702ddfd156bd1312ccbf2441"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae05bfd31702ddfd156bd1312ccbf2441">&#9670;&nbsp;</a></span>ast_http_uri_unlink_all_with_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_http_uri_unlink_all_with_key </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister all handlers with matching key. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00712">712</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00569">AST_RWLIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00114">ast_http_uri::data</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00110">ast_http_uri::dmallocd</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00116">ast_http_uri::key</a>, and <a class="el" href="../../dd/d56/http_8h_source.html#l00108">ast_http_uri::mallocd</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dc9/res__http__post_8c_source.html#l00429">__ast_http_post_load()</a>, and <a class="el" href="../../d6/dc9/res__http__post_8c_source.html#l00484">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;{</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a> *urih;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>, urih, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;      <span class="keywordflow">if</span> (!strcmp(urih-&gt;<a class="code" href="../../d0/d6c/structast__http__uri.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>, <a class="code" href="../../d0/d6c/structast__http__uri.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>)) {</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a>(<a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;         <span class="keywordflow">if</span> (urih-&gt;<a class="code" href="../../d0/d6c/structast__http__uri.html#a55ab2ed9aeff792462e0efe00685b7d6">dmallocd</a>) {</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(urih-&gt;<a class="code" href="../../d0/d6c/structast__http__uri.html#a735984d41155bc1032e09bece8f8d66d">data</a>);</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;         }</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;         <span class="keywordflow">if</span> (urih-&gt;<a class="code" href="../../d0/d6c/structast__http__uri.html#ae6cd4621862105820006f1c6ba56e427">mallocd</a>) {</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(urih);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;         }</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      }</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;   }</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structast__http__uri_html_acd3d88da3c0e0313c3645ff34f62f542"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html#acd3d88da3c0e0313c3645ff34f62f542">ast_http_uri::key</a></div><div class="ttdeci">const char * key</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00116">http.h:116</a></div></div>
<div class="ttc" id="structast__http__uri_html_ae6cd4621862105820006f1c6ba56e427"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html#ae6cd4621862105820006f1c6ba56e427">ast_http_uri::mallocd</a></div><div class="ttdeci">unsigned int mallocd</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00108">http.h:108</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a02212548652c9eb0f3db38dc4e4bd285"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00569">linkedlists.h:569</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__http__uri_html"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a></div><div class="ttdoc">Definition of a URI handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00100">http.h:100</a></div></div>
<div class="ttc" id="structast__http__uri_html_a55ab2ed9aeff792462e0efe00685b7d6"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html#a55ab2ed9aeff792462e0efe00685b7d6">ast_http_uri::dmallocd</a></div><div class="ttdeci">unsigned int dmallocd</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00110">http.h:110</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structuris_html"><div class="ttname"><a href="../../db/ddf/structuris.html">uris</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00138">http.c:138</a></div></div>
<div class="ttc" id="structast__http__uri_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html#a735984d41155bc1032e09bece8f8d66d">ast_http_uri::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00114">http.h:114</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l02388">2388</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

</div>
</div>
<a id="a1af65cc256b1c374d1f42ff2cb85a4e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1af65cc256b1c374d1f42ff2cb85a4e5">&#9670;&nbsp;</a></span>auth_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d5/dbf/structast__http__auth.html">ast_http_auth</a>* auth_create </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>userid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>password</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01545">1545</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00127">ast_http_auth::password</a>, and <a class="el" href="../../dd/d56/http_8h_source.html#l00125">ast_http_auth::userid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l01579">ast_http_get_auth()</a>.</p>
<div class="fragment"><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;{</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dbf/structast__http__auth.html">ast_http_auth</a> *auth;</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;   <span class="keywordtype">size_t</span> userid_len;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;   <span class="keywordtype">size_t</span> password_len;</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/dbf/structast__http__auth.html#a73d34d9d434bc914f9fcad3427632609">userid</a> || !<a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a>) {</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid userid/password\n&quot;</span>);</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;   }</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;   userid_len = strlen(<a class="code" href="../../d5/dbf/structast__http__auth.html#a73d34d9d434bc914f9fcad3427632609">userid</a>) + 1;</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;   password_len = strlen(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a>) + 1;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;   <span class="comment">/* Allocate enough room to store everything in one memory block */</span></div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;   auth = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*auth) + userid_len + password_len, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;   <span class="keywordflow">if</span> (!auth) {</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;   }</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;   <span class="comment">/* Put the userid right after the struct */</span></div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;   auth-&gt;<a class="code" href="../../d5/dbf/structast__http__auth.html#a73d34d9d434bc914f9fcad3427632609">userid</a> = (<span class="keywordtype">char</span> *)(auth + 1);</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;   strcpy(auth-&gt;<a class="code" href="../../d5/dbf/structast__http__auth.html#a73d34d9d434bc914f9fcad3427632609">userid</a>, <a class="code" href="../../d5/dbf/structast__http__auth.html#a73d34d9d434bc914f9fcad3427632609">userid</a>);</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;   <span class="comment">/* Put the password right after the userid */</span></div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;   auth-&gt;<a class="code" href="../../d5/dbf/structast__http__auth.html#a59460a3ff2c12443d1022e5cc0fba85c">password</a> = auth-&gt;<a class="code" href="../../d5/dbf/structast__http__auth.html#a73d34d9d434bc914f9fcad3427632609">userid</a> + userid_len;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;   strcpy(auth-&gt;<a class="code" href="../../d5/dbf/structast__http__auth.html#a59460a3ff2c12443d1022e5cc0fba85c">password</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a>);</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;   <span class="keywordflow">return</span> auth;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;}</div><div class="ttc" id="structast__http__auth_html_a73d34d9d434bc914f9fcad3427632609"><div class="ttname"><a href="../../d5/dbf/structast__http__auth.html#a73d34d9d434bc914f9fcad3427632609">ast_http_auth::userid</a></div><div class="ttdeci">char * userid</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00125">http.h:125</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_ab4fdb206838f2974bd15fc2ca1e9d366"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a></div><div class="ttdeci">static struct ast_str * password</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00077">cdr_mysql.c:77</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="structast__http__auth_html_a59460a3ff2c12443d1022e5cc0fba85c"><div class="ttname"><a href="../../d5/dbf/structast__http__auth.html#a59460a3ff2c12443d1022e5cc0fba85c">ast_http_auth::password</a></div><div class="ttdeci">char * password</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00127">http.h:127</a></div></div>
<div class="ttc" id="structast__http__auth_html"><div class="ttname"><a href="../../d5/dbf/structast__http__auth.html">ast_http_auth</a></div><div class="ttdoc">HTTP authentication information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00123">http.h:123</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aafe33264f49ecf610f7867ca34e89613"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafe33264f49ecf610f7867ca34e89613">&#9670;&nbsp;</a></span>chunked_atoh()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int chunked_atoh </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00987">987</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, and <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l01041">http_body_get_chunk_length()</a>.</p>
<div class="fragment"><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;{</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> = 0;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;   <span class="keywordflow">if</span> (*s &lt; <span class="charliteral">&#39;0&#39;</span>) {</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      <span class="comment">/* zero value must be 0\n not just \n */</span></div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;   }</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;   <span class="keywordflow">while</span> (<a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>--) {</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;      c = *s++;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      <span class="keywordflow">if</span> (c == <span class="stringliteral">&#39;\x0D&#39;</span>) {</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      }</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;;&#39;</span>) {</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;         <span class="comment">/* We have a chunk-extension that we don&#39;t care about. */</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;         <span class="keywordflow">while</span> (<a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>--) {</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;            <span class="keywordflow">if</span> (*s++ == <span class="stringliteral">&#39;\x0D&#39;</span>) {</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;               <span class="keywordflow">return</span> <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            }</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;         }</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      }</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      value &lt;&lt;= 4;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      <span class="keywordflow">if</span> (c &gt;= <span class="charliteral">&#39;0&#39;</span> &amp;&amp; c &lt;= <span class="charliteral">&#39;9&#39;</span>) {</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;         value += c - <span class="charliteral">&#39;0&#39;</span>;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;      }</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      <span class="keywordflow">if</span> (c &gt;= <span class="charliteral">&#39;a&#39;</span> &amp;&amp; c &lt;= <span class="charliteral">&#39;f&#39;</span>) {</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;         value += 10 + c - <span class="charliteral">&#39;a&#39;</span>;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      }</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      <span class="keywordflow">if</span> (c &gt;= <span class="charliteral">&#39;A&#39;</span> &amp;&amp; c &lt;= <span class="charliteral">&#39;F&#39;</span>) {</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;         value += 10 + c - <span class="charliteral">&#39;A&#39;</span>;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;      }</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;      <span class="comment">/* invalid character */</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;   }</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;   <span class="comment">/* end of string */</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;}</div><div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afdfa71c968840ceb0eb770bad2735abf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdfa71c968840ceb0eb770bad2735abf">&#9670;&nbsp;</a></span>get_content_length()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int get_content_length </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the value of the Content-Length header. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">headers</td><td>HTTP headers.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">length</td><td>Value of the Content-Length header. </td></tr>
    <tr><td class="paramname">0</td><td>if header is not present. </td></tr>
    <tr><td class="paramname">-1</td><td>if header is invalid. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00786">786</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d43/http_8c_source.html#l00739">get_header()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l00871">http_request_tracking_setup()</a>.</p>
<div class="fragment"><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;{</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *content_length = <a class="code" href="../../dd/d43/http_8c.html#a4b70578b4ddd7767d3f33e41bdade8a8">get_header</a>(headers, <span class="stringliteral">&quot;Content-Length&quot;</span>);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;   <span class="keywordtype">int</span> length;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;   <span class="keywordflow">if</span> (!content_length) {</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      <span class="comment">/* Missing content length; assume zero */</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;   }</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;   length = 0;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;   <span class="keywordflow">if</span> (sscanf(content_length, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;length) != 1) {</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      <span class="comment">/* Invalid Content-Length value */</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      length = -1;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;   }</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;   <span class="keywordflow">return</span> length;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;}</div><div class="ttc" id="http_8c_html_a4b70578b4ddd7767d3f33e41bdade8a8"><div class="ttname"><a href="../../dd/d43/http_8c.html#a4b70578b4ddd7767d3f33e41bdade8a8">get_header</a></div><div class="ttdeci">static const char * get_header(struct ast_variable *headers, const char *field_name)</div><div class="ttdoc">Retrieves the header with the given field name. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00739">http.c:739</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad06499f4d8764c97a4cd7750b8e199f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad06499f4d8764c97a4cd7750b8e199f3">&#9670;&nbsp;</a></span>get_content_type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* get_content_type </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves the content type specified in the "Content-Type" header. </p>
<p>This function only returns the "type/subtype" and any trailing parameter is not included.</p>
<dl class="section note"><dt>Note</dt><dd>the return value is an allocated string that needs to be freed.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">the</td><td>content type/subtype or NULL if the header is not found. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00761">761</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00258">ast_strndup</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00739">get_header()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l01314">ast_http_get_json()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l01353">ast_http_get_post_vars()</a>.</p>
<div class="fragment"><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;{</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *content_type = <a class="code" href="../../dd/d43/http_8c.html#a4b70578b4ddd7767d3f33e41bdade8a8">get_header</a>(headers, <span class="stringliteral">&quot;Content-Type&quot;</span>);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *param;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;   <span class="keywordtype">size_t</span> size;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;   <span class="keywordflow">if</span> (!content_type) {</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   }</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;   param = strchr(content_type, <span class="charliteral">&#39;;&#39;</span>);</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   size = param ? param - content_type : strlen(content_type);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d8/d8a/astmm_8h.html#aa1202a8277cd3013d22535bf5bfe85fc">ast_strndup</a>(content_type, size);</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="http_8c_html_a4b70578b4ddd7767d3f33e41bdade8a8"><div class="ttname"><a href="../../dd/d43/http_8c.html#a4b70578b4ddd7767d3f33e41bdade8a8">get_header</a></div><div class="ttdeci">static const char * get_header(struct ast_variable *headers, const char *field_name)</div><div class="ttdoc">Retrieves the header with the given field name. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00739">http.c:739</a></div></div>
<div class="ttc" id="astmm_8h_html_aa1202a8277cd3013d22535bf5bfe85fc"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#aa1202a8277cd3013d22535bf5bfe85fc">ast_strndup</a></div><div class="ttdeci">#define ast_strndup(str, len)</div><div class="ttdoc">A wrapper for strndup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00258">astmm.h:258</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4b70578b4ddd7767d3f33e41bdade8a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b70578b4ddd7767d3f33e41bdade8a8">&#9670;&nbsp;</a></span>get_header()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* get_header </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>field_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves the header with the given field name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">headers</td><td>Headers to search. </td></tr>
    <tr><td class="paramname">field_name</td><td>Name of the header to find. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Associated header value. </dd>
<dd>
<code>NULL</code> if header is not present. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00739">739</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l00786">get_content_length()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00761">get_content_type()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00811">get_transfer_encoding()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l00825">http_check_connection_close()</a>.</p>
<div class="fragment"><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;{</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;   <span class="keywordflow">for</span> (v = headers; v; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, field_name)) {</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;         <span class="keywordflow">return</span> v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      }</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;   }</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a329db7109281018b7098339ef58e9b4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a329db7109281018b7098339ef58e9b4e">&#9670;&nbsp;</a></span>get_transfer_encoding()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* get_transfer_encoding </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the value of the Transfer-Encoding header. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">headers</td><td>HTTP headers. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>Value of the Transfer-Encoding header. </td></tr>
    <tr><td class="paramname">NULL</td><td>if header is not present. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00811">811</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d43/http_8c_source.html#l00739">get_header()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l00871">http_request_tracking_setup()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l01839">httpd_process_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;{</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d43/http_8c.html#a4b70578b4ddd7767d3f33e41bdade8a8">get_header</a>(headers, <span class="stringliteral">&quot;Transfer-Encoding&quot;</span>);</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;}</div><div class="ttc" id="http_8c_html_a4b70578b4ddd7767d3f33e41bdade8a8"><div class="ttname"><a href="../../dd/d43/http_8c.html#a4b70578b4ddd7767d3f33e41bdade8a8">get_header</a></div><div class="ttdeci">static const char * get_header(struct ast_variable *headers, const char *field_name)</div><div class="ttdoc">Retrieves the header with the given field name. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00739">http.c:739</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abd384ccb6510fda645ef76636af6642a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd384ccb6510fda645ef76636af6642a">&#9670;&nbsp;</a></span>handle_show_http()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_show_http </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l02279">2279</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00451">AST_RWLIST_EMPTY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00102">ast_http_uri::description</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00171">http_uri_redirect::dest</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00088">ast_tls_config::enabled</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00106">ast_http_uri::has_subtree</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00104">http_server_name</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00111">http_tls_cfg</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00131">ast_tcptls_session_args::old_address</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00141">prefix</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00172">http_uri_redirect::target</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00103">ast_http_uri::uri</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;{</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a> *urih;</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d02/structhttp__uri__redirect.html">http_uri_redirect</a> *redirect;</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;http show status&quot;</span>;</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;         <span class="stringliteral">&quot;Usage: http show status\n&quot;</span></div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;         <span class="stringliteral">&quot;       Lists status of internal HTTP engine\n&quot;</span>;</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;   }</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3) {</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;   }</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;HTTP Server Status:\n&quot;</span>);</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Prefix: %s\n&quot;</span>, <a class="code" href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a>);</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Server: %s\n&quot;</span>, <a class="code" href="../../dd/d43/http_8c.html#a5086e142ada070c22242a51c58f3da4a">http_server_name</a>);</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#aef37d79896cadcf96c364f8c5609fd2f">http_desc</a>.<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#ac2badb17597d7e81dc4d44e54d470a05">old_address</a>)) {</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Server Disabled\n\n&quot;</span>);</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Server Enabled and Bound to %s\n\n&quot;</span>,</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#aef37d79896cadcf96c364f8c5609fd2f">http_desc</a>.<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#ac2badb17597d7e81dc4d44e54d470a05">old_address</a>));</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a>.<a class="code" href="../../d5/d90/structast__tls__config.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a>) {</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;HTTPS Server Enabled and Bound to %s\n\n&quot;</span>,</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#ad04999a886797d6dfe4fc6f6742527f5">https_desc</a>.<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#ac2badb17597d7e81dc4d44e54d470a05">old_address</a>));</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;      }</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;   }</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Enabled URI&#39;s:\n&quot;</span>);</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>);</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a0044f6572f50a89049b3b5272e51b0e7">AST_RWLIST_EMPTY</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>)) {</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;None.\n&quot;</span>);</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>, urih, <a class="code" href="../../d3/d96/structentry.html">entry</a>)</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s/%s%s =&gt; %s\n&quot;</span>, <a class="code" href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a>, urih-&gt;<a class="code" href="../../d0/d6c/structast__http__uri.html#a69ec24fb2d0a5f5e532deb9adaab81d6">uri</a>, (urih-&gt;<a class="code" href="../../d0/d6c/structast__http__uri.html#a208647b07f25afba1725ed60eefb98ac">has_subtree</a> ? <span class="stringliteral">&quot;/...&quot;</span> : <span class="stringliteral">&quot;&quot;</span> ), urih-&gt;<a class="code" href="../../d0/d6c/structast__http__uri.html#a68344fa88cf4e86b5079fd69a5c22d57">description</a>);</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;   }</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>);</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\nEnabled Redirects:\n&quot;</span>);</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>);</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>, redirect, <a class="code" href="../../d3/d96/structentry.html">entry</a>)</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  %s =&gt; %s\n&quot;</span>, redirect-&gt;<a class="code" href="../../db/d02/structhttp__uri__redirect.html#aa00cb69f785f055cd7b8eda63452666e">target</a>, redirect-&gt;<a class="code" href="../../db/d02/structhttp__uri__redirect.html#a21b0374bf8175befbde3cf5ad4831c04">dest</a>);</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a0044f6572f50a89049b3b5272e51b0e7">AST_RWLIST_EMPTY</a>(&amp;<a class="code" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>)) {</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  None.\n&quot;</span>);</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;   }</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>);</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="structhttp__uri__redirect_html_a21b0374bf8175befbde3cf5ad4831c04"><div class="ttname"><a href="../../db/d02/structhttp__uri__redirect.html#a21b0374bf8175befbde3cf5ad4831c04">http_uri_redirect::dest</a></div><div class="ttdeci">char * dest</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00171">http.c:171</a></div></div>
<div class="ttc" id="structast__http__uri_html_a208647b07f25afba1725ed60eefb98ac"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html#a208647b07f25afba1725ed60eefb98ac">ast_http_uri::has_subtree</a></div><div class="ttdeci">unsigned int has_subtree</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00106">http.h:106</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structuri__redirects_html"><div class="ttname"><a href="../../d6/dd5/structuri__redirects.html">uri_redirects</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00175">http.c:175</a></div></div>
<div class="ttc" id="http_8c_html_a1c80a21a7aa2d6eee02f11b48485a331"><div class="ttname"><a href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a></div><div class="ttdeci">static struct ast_tls_config http_tls_cfg</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00111">http.c:111</a></div></div>
<div class="ttc" id="http_8c_html_aef37d79896cadcf96c364f8c5609fd2f"><div class="ttname"><a href="../../dd/d43/http_8c.html#aef37d79896cadcf96c364f8c5609fd2f">http_desc</a></div><div class="ttdeci">static struct ast_tcptls_session_args http_desc</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00118">http.c:118</a></div></div>
<div class="ttc" id="http_8c_html_a5086e142ada070c22242a51c58f3da4a"><div class="ttname"><a href="../../dd/d43/http_8c.html#a5086e142ada070c22242a51c58f3da4a">http_server_name</a></div><div class="ttdeci">static char http_server_name[MAX_SERVER_NAME_LENGTH]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00104">http.c:104</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0044f6572f50a89049b3b5272e51b0e7"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0044f6572f50a89049b3b5272e51b0e7">AST_RWLIST_EMPTY</a></div><div class="ttdeci">#define AST_RWLIST_EMPTY</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00451">linkedlists.h:451</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__http__uri_html_a68344fa88cf4e86b5079fd69a5c22d57"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html#a68344fa88cf4e86b5079fd69a5c22d57">ast_http_uri::description</a></div><div class="ttdeci">const char * description</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00102">http.h:102</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="structhttp__uri__redirect_html_aa00cb69f785f055cd7b8eda63452666e"><div class="ttname"><a href="../../db/d02/structhttp__uri__redirect.html#aa00cb69f785f055cd7b8eda63452666e">http_uri_redirect::target</a></div><div class="ttdeci">char target[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00172">http.c:172</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__tcptls__session__args_html_ac2badb17597d7e81dc4d44e54d470a05"><div class="ttname"><a href="../../da/d2b/structast__tcptls__session__args.html#ac2badb17597d7e81dc4d44e54d470a05">ast_tcptls_session_args::old_address</a></div><div class="ttdeci">struct ast_sockaddr old_address</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00131">tcptls.h:131</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structast__http__uri_html"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a></div><div class="ttdoc">Definition of a URI handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00100">http.h:100</a></div></div>
<div class="ttc" id="structhttp__uri__redirect_html"><div class="ttname"><a href="../../db/d02/structhttp__uri__redirect.html">http_uri_redirect</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00169">http.c:169</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structuris_html"><div class="ttname"><a href="../../db/ddf/structuris.html">uris</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00138">http.c:138</a></div></div>
<div class="ttc" id="structast__http__uri_html_a69ec24fb2d0a5f5e532deb9adaab81d6"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html#a69ec24fb2d0a5f5e532deb9adaab81d6">ast_http_uri::uri</a></div><div class="ttdeci">const char * uri</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00103">http.h:103</a></div></div>
<div class="ttc" id="http_8c_html_ad04999a886797d6dfe4fc6f6742527f5"><div class="ttname"><a href="../../dd/d43/http_8c.html#ad04999a886797d6dfe4fc6f6742527f5">https_desc</a></div><div class="ttdeci">static struct ast_tcptls_session_args https_desc</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00128">http.c:128</a></div></div>
<div class="ttc" id="http_8c_html_a6f25bc812d09fedb86bf394c01061c56"><div class="ttname"><a href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a></div><div class="ttdeci">static char prefix[MAX_PREFIX]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00141">http.c:141</a></div></div>
<div class="ttc" id="structast__tls__config_html_a03e6cca0c879c0443efb431c30c14f76"><div class="ttname"><a href="../../d5/d90/structast__tls__config.html#a03e6cca0c879c0443efb431c30c14f76">ast_tls_config::enabled</a></div><div class="ttdeci">int enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00088">tcptls.h:88</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adb8c9004124fd9ace0a57f2d222ff9ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb8c9004124fd9ace0a57f2d222ff9ad">&#9670;&nbsp;</a></span>handle_uri()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_uri </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80ef">ast_http_method</a>&#160;</td>
          <td class="paramname"><em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01401">1401</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00648">ast_http_error()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00836">ast_http_request_close_on_completion()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00456">ast_http_send()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00616">ast_uri_decode()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00574">ast_uri_http_legacy</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">ast_variable_new</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01263">ast_variables_destroy()</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00105">ast_http_uri::callback</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">cleanup()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00171">http_uri_redirect::dest</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00106">ast_http_uri::has_subtree</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00112">ast_http_uri::no_decode_uri</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00141">prefix</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00172">http_uri_redirect::target</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00103">ast_http_uri::uri</a>, and <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00614">var</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l01839">httpd_process_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;{</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;   <span class="keywordtype">char</span> *params = uri;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a> *urih = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;   <span class="keywordtype">int</span> l;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *get_vars = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *v, *prev = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d02/structhttp__uri__redirect.html">http_uri_redirect</a> *redirect;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;HTTP Request URI is %s \n&quot;</span>, uri);</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;   <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;params, <span class="stringliteral">&quot;?&quot;</span>);</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;   <span class="comment">/* Extract arguments from the request and store them in variables. */</span></div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;   <span class="keywordflow">if</span> (params) {</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>, *<a class="code" href="../../d5/d85/structval.html">val</a>;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      <span class="keywordflow">while</span> ((val = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;params, <span class="stringliteral">&quot;&amp;&quot;</span>))) {</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;         var = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;val, <span class="stringliteral">&quot;=&quot;</span>);</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;         <span class="keywordflow">if</span> (val) {</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;            <a class="code" href="../../d5/d60/utils_8h.html#ad9d3c7c4cc262a1205c833a95fa65a6d">ast_uri_decode</a>(val, <a class="code" href="../../d5/d60/utils_8h.html#af7cc8e3b6b28b9315c312edb79af2f59">ast_uri_http_legacy</a>);</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;         } <span class="keywordflow">else</span>  {</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;            val = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;         }</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ad9d3c7c4cc262a1205c833a95fa65a6d">ast_uri_decode</a>(var, <a class="code" href="../../d5/d60/utils_8h.html#af7cc8e3b6b28b9315c312edb79af2f59">ast_uri_http_legacy</a>);</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;         <span class="keywordflow">if</span> ((v = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(var, val, <span class="stringliteral">&quot;&quot;</span>))) {</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;            <span class="keywordflow">if</span> (get_vars) {</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;               prev-&gt;next = v;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;               get_vars = v;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;            }</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;            prev = v;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;         }</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;      }</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;   }</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>);</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>, redirect, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(uri, redirect-&gt;<a class="code" href="../../db/d02/structhttp__uri__redirect.html#aa00cb69f785f055cd7b8eda63452666e">target</a>)) {</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *http_header = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(128);</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;         <span class="keywordflow">if</span> (!http_header) {</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;            <a class="code" href="../../dd/d43/http_8c.html#ab0286838ed2b93e0d77fe9d7af8a37b5">ast_http_request_close_on_completion</a>(ser);</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;            <a class="code" href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a>(ser, 500, <span class="stringliteral">&quot;Server Error&quot;</span>, <span class="stringliteral">&quot;Out of memory&quot;</span>);</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;         }</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;http_header, 0, <span class="stringliteral">&quot;Location: %s\r\n&quot;</span>, redirect-&gt;<a class="code" href="../../db/d02/structhttp__uri__redirect.html#a21b0374bf8175befbde3cf5ad4831c04">dest</a>);</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;         <a class="code" href="../../dd/d43/http_8c.html#a0448c9f4a66b6ee7994870b187e185b4">ast_http_send</a>(ser, <a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>, 302, <span class="stringliteral">&quot;Moved Temporarily&quot;</span>, http_header, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, 0);</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;      }</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;   }</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>);</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;   <span class="keywordflow">if</span> (redirect) {</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;   }</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;   <span class="comment">/* We want requests to start with the (optional) prefix and &#39;/&#39; */</span></div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;   l = strlen(<a class="code" href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a>);</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;   <span class="keywordflow">if</span> (!strncasecmp(uri, <a class="code" href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a>, l) &amp;&amp; uri[l] == <span class="charliteral">&#39;/&#39;</span>) {</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;      uri += l + 1;</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;      <span class="comment">/* scan registered uris to see if we match one. */</span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>);</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>, urih, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;         l = strlen(urih-&gt;<a class="code" href="../../d0/d6c/structast__http__uri.html#a69ec24fb2d0a5f5e532deb9adaab81d6">uri</a>);</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;         c = uri + l;   <span class="comment">/* candidate */</span></div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;match request [%s] with handler [%s] len %d\n&quot;</span>, uri, urih-&gt;<a class="code" href="../../d0/d6c/structast__http__uri.html#a69ec24fb2d0a5f5e532deb9adaab81d6">uri</a>, l);</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;         <span class="keywordflow">if</span> (strncasecmp(urih-&gt;<a class="code" href="../../d0/d6c/structast__http__uri.html#a69ec24fb2d0a5f5e532deb9adaab81d6">uri</a>, uri, l) <span class="comment">/* no match */</span></div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;             || (*c &amp;&amp; *c != <span class="charliteral">&#39;/&#39;</span>)) { <span class="comment">/* substring */</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;         }</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;         <span class="keywordflow">if</span> (*c == <span class="charliteral">&#39;/&#39;</span>) {</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;            c++;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;         }</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;         <span class="keywordflow">if</span> (!*c || urih-&gt;<a class="code" href="../../d0/d6c/structast__http__uri.html#a208647b07f25afba1725ed60eefb98ac">has_subtree</a>) {</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;            uri = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;         }</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;      }</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/ddf/structuris.html">uris</a>);</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;   }</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;   <span class="keywordflow">if</span> (urih) {</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Match made with [%s]\n&quot;</span>, urih-&gt;<a class="code" href="../../d0/d6c/structast__http__uri.html#a69ec24fb2d0a5f5e532deb9adaab81d6">uri</a>);</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;      <span class="keywordflow">if</span> (!urih-&gt;<a class="code" href="../../d0/d6c/structast__http__uri.html#a2944194fd2239970327261d69d1206da">no_decode_uri</a>) {</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ad9d3c7c4cc262a1205c833a95fa65a6d">ast_uri_decode</a>(uri, <a class="code" href="../../d5/d60/utils_8h.html#af7cc8e3b6b28b9315c312edb79af2f59">ast_uri_http_legacy</a>);</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;      }</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;      res = urih-&gt;<a class="code" href="../../d0/d6c/structast__http__uri.html#a4ef4b8290b170231e27114a0a02f1c51">callback</a>(ser, urih, uri, <a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>, get_vars, headers);</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Requested URI [%s] has no handler\n&quot;</span>, uri);</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a>(ser, 404, <span class="stringliteral">&quot;Not Found&quot;</span>, <span class="stringliteral">&quot;The requested URL was not found on this server.&quot;</span>);</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;   }</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>:</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(get_vars);</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;}</div><div class="ttc" id="utils_8h_html_ad9d3c7c4cc262a1205c833a95fa65a6d"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ad9d3c7c4cc262a1205c833a95fa65a6d">ast_uri_decode</a></div><div class="ttdeci">void ast_uri_decode(char *s, struct ast_flags spec)</div><div class="ttdoc">Decode URI, URN, URL (overwrite string) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00616">main/utils.c:616</a></div></div>
<div class="ttc" id="structast__http__uri_html_a4ef4b8290b170231e27114a0a02f1c51"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html#a4ef4b8290b170231e27114a0a02f1c51">ast_http_uri::callback</a></div><div class="ttdeci">ast_http_callback callback</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00105">http.h:105</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="structval_html"><div class="ttname"><a href="../../d5/d85/structval.html">val</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd1/ast__expr2_8c_source.html#l00325">ast_expr2.c:325</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="structhttp__uri__redirect_html_a21b0374bf8175befbde3cf5ad4831c04"><div class="ttname"><a href="../../db/d02/structhttp__uri__redirect.html#a21b0374bf8175befbde3cf5ad4831c04">http_uri_redirect::dest</a></div><div class="ttdeci">char * dest</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00171">http.c:171</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="structast__http__uri_html_a208647b07f25afba1725ed60eefb98ac"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html#a208647b07f25afba1725ed60eefb98ac">ast_http_uri::has_subtree</a></div><div class="ttdeci">unsigned int has_subtree</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00106">http.h:106</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structuri__redirects_html"><div class="ttname"><a href="../../d6/dd5/structuri__redirects.html">uri_redirects</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00175">http.c:175</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a8b44a03925325ceaf2de7b079b1541a1"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a></div><div class="ttdeci">const char * method</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04335">res_pjsip.c:4335</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a66581086d34dfe7ea86b0644bacef239"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a></div><div class="ttdeci">#define ast_variable_new(name, value, filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">include/asterisk/config.h:914</a></div></div>
<div class="ttc" id="utils_8h_html_af7cc8e3b6b28b9315c312edb79af2f59"><div class="ttname"><a href="../../d5/d60/utils_8h.html#af7cc8e3b6b28b9315c312edb79af2f59">ast_uri_http_legacy</a></div><div class="ttdeci">const struct ast_flags ast_uri_http_legacy</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00574">main/utils.c:574</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="http_8c_html_ab0286838ed2b93e0d77fe9d7af8a37b5"><div class="ttname"><a href="../../dd/d43/http_8c.html#ab0286838ed2b93e0d77fe9d7af8a37b5">ast_http_request_close_on_completion</a></div><div class="ttdeci">void ast_http_request_close_on_completion(struct ast_tcptls_session_instance *ser)</div><div class="ttdoc">Request the HTTP connection be closed after this HTTP request. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00836">http.c:836</a></div></div>
<div class="ttc" id="http_8c_html_a0448c9f4a66b6ee7994870b187e185b4"><div class="ttname"><a href="../../dd/d43/http_8c.html#a0448c9f4a66b6ee7994870b187e185b4">ast_http_send</a></div><div class="ttdeci">void ast_http_send(struct ast_tcptls_session_instance *ser, enum ast_http_method method, int status_code, const char *status_title, struct ast_str *http_header, struct ast_str *out, int fd, unsigned int static_content)</div><div class="ttdoc">Generic function for sending HTTP/1.1 response. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00456">http.c:456</a></div></div>
<div class="ttc" id="structhttp__uri__redirect_html_aa00cb69f785f055cd7b8eda63452666e"><div class="ttname"><a href="../../db/d02/structhttp__uri__redirect.html#aa00cb69f785f055cd7b8eda63452666e">http_uri_redirect::target</a></div><div class="ttdeci">char target[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00172">http.c:172</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_a10b51e1931bd03dd172cbfb9d3d67efb"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a></div><div class="ttdeci">static void * cleanup(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">pbx_realtime.c:124</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="structast__http__uri_html"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a></div><div class="ttdoc">Definition of a URI handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00100">http.h:100</a></div></div>
<div class="ttc" id="structhttp__uri__redirect_html"><div class="ttname"><a href="../../db/d02/structhttp__uri__redirect.html">http_uri_redirect</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00169">http.c:169</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="http_8c_html_a6ab57c2e45049bd17a5cf6d0ce6e1ebe"><div class="ttname"><a href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a></div><div class="ttdeci">void ast_http_error(struct ast_tcptls_session_instance *ser, int status_code, const char *status_title, const char *text)</div><div class="ttdoc">Send HTTP error message and close socket. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00648">http.c:648</a></div></div>
<div class="ttc" id="structuris_html"><div class="ttname"><a href="../../db/ddf/structuris.html">uris</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00138">http.c:138</a></div></div>
<div class="ttc" id="structast__http__uri_html_a69ec24fb2d0a5f5e532deb9adaab81d6"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html#a69ec24fb2d0a5f5e532deb9adaab81d6">ast_http_uri::uri</a></div><div class="ttdeci">const char * uri</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00103">http.h:103</a></div></div>
<div class="ttc" id="structast__http__uri_html_a2944194fd2239970327261d69d1206da"><div class="ttname"><a href="../../d0/d6c/structast__http__uri.html#a2944194fd2239970327261d69d1206da">ast_http_uri::no_decode_uri</a></div><div class="ttdeci">unsigned int no_decode_uri</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00112">http.h:112</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
<div class="ttc" id="http_8c_html_a6f25bc812d09fedb86bf394c01061c56"><div class="ttname"><a href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a></div><div class="ttdeci">static char prefix[MAX_PREFIX]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00141">http.c:141</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8cab07b884d4c0d4e380ca603478ddaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cab07b884d4c0d4e380ca603478ddaf">&#9670;&nbsp;</a></span>http_body_check_chunk_sync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int http_body_check_chunk_sync </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01069">1069</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00273">ast_iostream_read()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00160">ast_tcptls_session_instance::stream</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l01120">ast_http_body_discard()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l01181">ast_http_get_contents()</a>.</p>
<div class="fragment"><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;{</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;   <span class="keywordtype">char</span> chunk_sync[2];</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;   <span class="comment">/* Stay in fread until get the expected CRLF or timeout. */</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;   res = <a class="code" href="../../dd/d27/iostream_8h.html#aa009ff0c2d31892c5beb19114f47768b">ast_iostream_read</a>(ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>, chunk_sync, <span class="keyword">sizeof</span>(chunk_sync));</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;   <span class="keywordflow">if</span> (res &lt; <span class="keyword">sizeof</span>(chunk_sync)) {</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Short HTTP chunk sync read (Wanted %zu)\n&quot;</span>,</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;         <span class="keyword">sizeof</span>(chunk_sync));</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;   }</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;   <span class="keywordflow">if</span> (chunk_sync[0] != 0x0D || chunk_sync[1] != 0x0A) {</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;HTTP chunk sync bytes wrong (0x%02hhX, 0x%02hhX)\n&quot;</span>,</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;         (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) chunk_sync[0], (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) chunk_sync[1]);</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;   }</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="iostream_8h_html_aa009ff0c2d31892c5beb19114f47768b"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#aa009ff0c2d31892c5beb19114f47768b">ast_iostream_read</a></div><div class="ttdeci">ssize_t ast_iostream_read(struct ast_iostream *stream, void *buffer, size_t count)</div><div class="ttdoc">Read data from an iostream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00273">iostream.c:273</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_a36ac2dd734607a43ed90acb7e9d81ac5"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">ast_tcptls_session_instance::stream</a></div><div class="ttdeci">struct ast_iostream * stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00160">tcptls.h:160</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0407b8b04eb198ad0b20136d3ec4fa6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0407b8b04eb198ad0b20136d3ec4fa6d">&#9670;&nbsp;</a></span>http_body_discard_chunk_trailer_headers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int http_body_discard_chunk_trailer_headers </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01100">1100</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00300">ast_iostream_gets()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00182">ast_trim_blanks()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00099">MAX_HTTP_LINE_LENGTH</a>, and <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00160">ast_tcptls_session_instance::stream</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l01120">ast_http_body_discard()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l01181">ast_http_get_contents()</a>.</p>
<div class="fragment"><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;{</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;   <span class="keywordtype">char</span> header_line[<a class="code" href="../../dd/d43/http_8c.html#aed5af68d7cd4bc4ed1fdca3e2de959af">MAX_HTTP_LINE_LENGTH</a>];</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d27/iostream_8h.html#a2837e9ce1fee3102081db853e207fd2c">ast_iostream_gets</a>(ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>, header_line, <span class="keyword">sizeof</span>(header_line)) &lt;= 0) {</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Short HTTP read of chunked trailer header\n&quot;</span>);</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;      }</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      <span class="comment">/* Trim trailing whitespace */</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#abe38193be148775f7559f8fff6e0c17e">ast_trim_blanks</a>(header_line);</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(header_line)) {</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;         <span class="comment">/* A blank line ends the chunked-body */</span></div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      }</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;   }</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="strings_8h_html_abe38193be148775f7559f8fff6e0c17e"><div class="ttname"><a href="../../d6/d90/strings_8h.html#abe38193be148775f7559f8fff6e0c17e">ast_trim_blanks</a></div><div class="ttdeci">char * ast_trim_blanks(char *str)</div><div class="ttdoc">Trims trailing whitespace characters from a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00182">strings.h:182</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_a36ac2dd734607a43ed90acb7e9d81ac5"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">ast_tcptls_session_instance::stream</a></div><div class="ttdeci">struct ast_iostream * stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00160">tcptls.h:160</a></div></div>
<div class="ttc" id="iostream_8h_html_a2837e9ce1fee3102081db853e207fd2c"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#a2837e9ce1fee3102081db853e207fd2c">ast_iostream_gets</a></div><div class="ttdeci">ssize_t ast_iostream_gets(struct ast_iostream *stream, char *buffer, size_t size)</div><div class="ttdoc">Read a LF-terminated string from an iostream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00300">iostream.c:300</a></div></div>
<div class="ttc" id="http_8c_html_aed5af68d7cd4bc4ed1fdca3e2de959af"><div class="ttname"><a href="../../dd/d43/http_8c.html#aed5af68d7cd4bc4ed1fdca3e2de959af">MAX_HTTP_LINE_LENGTH</a></div><div class="ttdeci">#define MAX_HTTP_LINE_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00099">http.c:99</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a74e0dc6d3ec99536cb67408015622210"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74e0dc6d3ec99536cb67408015622210">&#9670;&nbsp;</a></span>http_body_discard_contents()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int http_body_discard_contents </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>what_getting</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00964">964</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00357">ast_iostream_discard()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00160">ast_tcptls_session_instance::stream</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l01120">ast_http_body_discard()</a>.</p>
<div class="fragment"><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;{</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;   ssize_t res;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;   res = <a class="code" href="../../dd/d27/iostream_8h.html#abbea98e49630c83d2440acdbb3f795ff">ast_iostream_discard</a>(ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>, length);</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;   <span class="keywordflow">if</span> (res &lt; length) {</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Short HTTP request %s (Wanted %d but got %zd)\n&quot;</span>,</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;         what_getting, length, res);</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;   }</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="iostream_8h_html_abbea98e49630c83d2440acdbb3f795ff"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#abbea98e49630c83d2440acdbb3f795ff">ast_iostream_discard</a></div><div class="ttdeci">ssize_t ast_iostream_discard(struct ast_iostream *stream, size_t count)</div><div class="ttdoc">Discard the specified number of bytes from an iostream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00357">iostream.c:357</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_a36ac2dd734607a43ed90acb7e9d81ac5"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">ast_tcptls_session_instance::stream</a></div><div class="ttdeci">struct ast_iostream * stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00160">tcptls.h:160</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af79aa289c3929912006d5757d19d6136"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af79aa289c3929912006d5757d19d6136">&#9670;&nbsp;</a></span>http_body_get_chunk_length()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int http_body_get_chunk_length </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01041">1041</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00300">ast_iostream_gets()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00987">chunked_atoh()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00099">MAX_HTTP_LINE_LENGTH</a>, and <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00160">ast_tcptls_session_instance::stream</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l01120">ast_http_body_discard()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l01181">ast_http_get_contents()</a>.</p>
<div class="fragment"><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;{</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;   <span class="keywordtype">int</span> length;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;   <span class="keywordtype">char</span> header_line[<a class="code" href="../../dd/d43/http_8c.html#aed5af68d7cd4bc4ed1fdca3e2de959af">MAX_HTTP_LINE_LENGTH</a>];</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;   <span class="comment">/* get the line of hexadecimal giving chunk-size w/ optional chunk-extension */</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d27/iostream_8h.html#a2837e9ce1fee3102081db853e207fd2c">ast_iostream_gets</a>(ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>, header_line, <span class="keyword">sizeof</span>(header_line)) &lt;= 0) {</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Short HTTP read of chunked header\n&quot;</span>);</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;   }</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;   length = <a class="code" href="../../dd/d43/http_8c.html#aafe33264f49ecf610f7867ca34e89613">chunked_atoh</a>(header_line, strlen(header_line));</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;   <span class="keywordflow">if</span> (length &lt; 0) {</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid HTTP chunk size\n&quot;</span>);</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;   }</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;   <span class="keywordflow">return</span> length;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="http_8c_html_aafe33264f49ecf610f7867ca34e89613"><div class="ttname"><a href="../../dd/d43/http_8c.html#aafe33264f49ecf610f7867ca34e89613">chunked_atoh</a></div><div class="ttdeci">static int chunked_atoh(const char *s, int len)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00987">http.c:987</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_a36ac2dd734607a43ed90acb7e9d81ac5"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">ast_tcptls_session_instance::stream</a></div><div class="ttdeci">struct ast_iostream * stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00160">tcptls.h:160</a></div></div>
<div class="ttc" id="iostream_8h_html_a2837e9ce1fee3102081db853e207fd2c"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#a2837e9ce1fee3102081db853e207fd2c">ast_iostream_gets</a></div><div class="ttdeci">ssize_t ast_iostream_gets(struct ast_iostream *stream, char *buffer, size_t size)</div><div class="ttdoc">Read a LF-terminated string from an iostream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00300">iostream.c:300</a></div></div>
<div class="ttc" id="http_8c_html_aed5af68d7cd4bc4ed1fdca3e2de959af"><div class="ttname"><a href="../../dd/d43/http_8c.html#aed5af68d7cd4bc4ed1fdca3e2de959af">MAX_HTTP_LINE_LENGTH</a></div><div class="ttdeci">#define MAX_HTTP_LINE_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00099">http.c:99</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab2e59f3466d22103f61bfd928bbd9e19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2e59f3466d22103f61bfd928bbd9e19">&#9670;&nbsp;</a></span>http_body_read_contents()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int http_body_read_contents </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>what_getting</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00928">928</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00273">ast_iostream_read()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00160">ast_tcptls_session_instance::stream</a>, and <a class="el" href="../../dd/d27/res__adsi_8c_source.html#l00968">total</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l01181">ast_http_get_contents()</a>.</p>
<div class="fragment"><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;{</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dd/d27/res__adsi_8c.html#ac7af894858cf396a219d632f40afdc8d">total</a> = 0;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;   <span class="comment">/* Stream is in exclusive mode so we get it all if possible. */</span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;   <span class="keywordflow">while</span> (total != length) {</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      res = <a class="code" href="../../dd/d27/iostream_8h.html#aa009ff0c2d31892c5beb19114f47768b">ast_iostream_read</a>(ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> + total, length - total);</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      <span class="keywordflow">if</span> (res &lt;= 0) {</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      }</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      total += res;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;   }</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;   <span class="keywordflow">if</span> (total != length) {</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Wrong HTTP content read. Request %s (Wanted %d, Read %d)\n&quot;</span>,</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;         what_getting, length, res);</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;   }</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="iostream_8h_html_aa009ff0c2d31892c5beb19114f47768b"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#aa009ff0c2d31892c5beb19114f47768b">ast_iostream_read</a></div><div class="ttdeci">ssize_t ast_iostream_read(struct ast_iostream *stream, void *buffer, size_t count)</div><div class="ttdoc">Read data from an iostream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00273">iostream.c:273</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_a36ac2dd734607a43ed90acb7e9d81ac5"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">ast_tcptls_session_instance::stream</a></div><div class="ttdeci">struct ast_iostream * stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00160">tcptls.h:160</a></div></div>
<div class="ttc" id="res__adsi_8c_html_ac7af894858cf396a219d632f40afdc8d"><div class="ttname"><a href="../../dd/d27/res__adsi_8c.html#ac7af894858cf396a219d632f40afdc8d">total</a></div><div class="ttdeci">static int total</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d27/res__adsi_8c_source.html#l00968">res_adsi.c:968</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a104dfc8d09b06044f2c35f99802c5ffe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a104dfc8d09b06044f2c35f99802c5ffe">&#9670;&nbsp;</a></span>http_check_connection_close()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int http_check_connection_close </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00825">825</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d43/http_8c_source.html#l00739">get_header()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l00871">http_request_tracking_setup()</a>.</p>
<div class="fragment"><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;{</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *connection = <a class="code" href="../../dd/d43/http_8c.html#a4b70578b4ddd7767d3f33e41bdade8a8">get_header</a>(headers, <span class="stringliteral">&quot;Connection&quot;</span>);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;   <span class="keywordtype">int</span> close_connection = 0;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   <span class="keywordflow">if</span> (connection &amp;&amp; !strcasecmp(connection, <span class="stringliteral">&quot;close&quot;</span>)) {</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      close_connection = -1;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   }</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;   <span class="keywordflow">return</span> close_connection;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;}</div><div class="ttc" id="http_8c_html_a4b70578b4ddd7767d3f33e41bdade8a8"><div class="ttname"><a href="../../dd/d43/http_8c.html#a4b70578b4ddd7767d3f33e41bdade8a8">get_header</a></div><div class="ttdeci">static const char * get_header(struct ast_variable *headers, const char *field_name)</div><div class="ttdoc">Retrieves the header with the given field name. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00739">http.c:739</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a409d88e2752cd7a0034f184ab130a6dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a409d88e2752cd7a0034f184ab130a6dc">&#9670;&nbsp;</a></span>http_request_headers_get()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int http_request_headers_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> **&#160;</td>
          <td class="paramname"><em>headers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01757">1757</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d43/http_8c_source.html#l00648">ast_http_error()</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00300">ast_iostream_gets()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00157">ast_skip_blanks()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00182">ast_trim_blanks()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">ast_variable_new</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01263">ast_variables_destroy()</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00099">MAX_HTTP_LINE_LENGTH</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01744">MAX_HTTP_REQUEST_HEADERS</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00142">ast_tcptls_session_args::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00160">ast_tcptls_session_instance::stream</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>, and <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l01839">httpd_process_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;{</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *tail = *headers;</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;   <span class="keywordtype">int</span> remaining_headers;</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;   <span class="keywordtype">char</span> header_line[<a class="code" href="../../dd/d43/http_8c.html#aed5af68d7cd4bc4ed1fdca3e2de959af">MAX_HTTP_LINE_LENGTH</a>];</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;   remaining_headers = <a class="code" href="../../dd/d43/http_8c.html#a5a933ca6c1a804b56ec28e07f9c2a911">MAX_HTTP_REQUEST_HEADERS</a>;</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;      ssize_t <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;      len = <a class="code" href="../../dd/d27/iostream_8h.html#a2837e9ce1fee3102081db853e207fd2c">ast_iostream_gets</a>(ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>, header_line, <span class="keyword">sizeof</span>(header_line));</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;      <span class="keywordflow">if</span> (len &lt;= 0) {</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;         <a class="code" href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a>(ser, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>, <span class="stringliteral">&quot;Timeout&quot;</span>);</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;      }</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      <span class="keywordflow">if</span> (header_line[len - 1] != <span class="charliteral">&#39;\n&#39;</span>) {</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;         <span class="comment">/* We didn&#39;t get a full line */</span></div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;         <a class="code" href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a>(ser, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;            (len == <span class="keyword">sizeof</span>(header_line) - 1) ? <span class="stringliteral">&quot;Header line too long&quot;</span> : <span class="stringliteral">&quot;Timeout&quot;</span>);</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;      }</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;      <span class="comment">/* Trim trailing characters */</span></div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#abe38193be148775f7559f8fff6e0c17e">ast_trim_blanks</a>(header_line);</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(header_line)) {</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;         <span class="comment">/* A blank line ends the request header section. */</span></div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;      }</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;      value = header_line;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;      name = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;value, <span class="stringliteral">&quot;:&quot;</span>);</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;      <span class="keywordflow">if</span> (!value) {</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;      }</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;      value = <a class="code" href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a>(value);</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(value) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name)) {</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;      }</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#abe38193be148775f7559f8fff6e0c17e">ast_trim_blanks</a>(name);</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;      <span class="keywordflow">if</span> (!remaining_headers--) {</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;         <span class="comment">/* Too many headers. */</span></div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;         <a class="code" href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a>(ser, 413, <span class="stringliteral">&quot;Request Entity Too Large&quot;</span>, <span class="stringliteral">&quot;Too many headers&quot;</span>);</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;      }</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;      <span class="keywordflow">if</span> (!*headers) {</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;         *headers = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(name, value, __FILE__);</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;         tail = *headers;</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;         tail-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a> = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(name, value, __FILE__);</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;         tail = tail-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>;</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;      }</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;      <span class="keywordflow">if</span> (!tail) {</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;<span class="comment">          * Variable allocation failure.</span></div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;<span class="comment">          * Try to make some room.</span></div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;         <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(*headers);</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;         *headers = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;         <a class="code" href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a>(ser, 500, <span class="stringliteral">&quot;Server Error&quot;</span>, <span class="stringliteral">&quot;Out of memory&quot;</span>);</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;      }</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;   }</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a66581086d34dfe7ea86b0644bacef239"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a></div><div class="ttdeci">#define ast_variable_new(name, value, filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">include/asterisk/config.h:914</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="strings_8h_html_af5693da955fa3bc73bc49c47b601fc7a"><div class="ttname"><a href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a></div><div class="ttdeci">char * ast_skip_blanks(const char *str)</div><div class="ttdoc">Gets a pointer to the first non-whitespace character in a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00157">strings.h:157</a></div></div>
<div class="ttc" id="strings_8h_html_abe38193be148775f7559f8fff6e0c17e"><div class="ttname"><a href="../../d6/d90/strings_8h.html#abe38193be148775f7559f8fff6e0c17e">ast_trim_blanks</a></div><div class="ttdeci">char * ast_trim_blanks(char *str)</div><div class="ttdoc">Trims trailing whitespace characters from a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00182">strings.h:182</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_a36ac2dd734607a43ed90acb7e9d81ac5"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">ast_tcptls_session_instance::stream</a></div><div class="ttdeci">struct ast_iostream * stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00160">tcptls.h:160</a></div></div>
<div class="ttc" id="iostream_8h_html_a2837e9ce1fee3102081db853e207fd2c"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#a2837e9ce1fee3102081db853e207fd2c">ast_iostream_gets</a></div><div class="ttdeci">ssize_t ast_iostream_gets(struct ast_iostream *stream, char *buffer, size_t size)</div><div class="ttdoc">Read a LF-terminated string from an iostream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00300">iostream.c:300</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="http_8c_html_a5a933ca6c1a804b56ec28e07f9c2a911"><div class="ttname"><a href="../../dd/d43/http_8c.html#a5a933ca6c1a804b56ec28e07f9c2a911">MAX_HTTP_REQUEST_HEADERS</a></div><div class="ttdeci">#define MAX_HTTP_REQUEST_HEADERS</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01744">http.c:1744</a></div></div>
<div class="ttc" id="http_8c_html_a6ab57c2e45049bd17a5cf6d0ce6e1ebe"><div class="ttname"><a href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a></div><div class="ttdeci">void ast_http_error(struct ast_tcptls_session_instance *ser, int status_code, const char *status_title, const char *text)</div><div class="ttdoc">Send HTTP error message and close socket. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00648">http.c:648</a></div></div>
<div class="ttc" id="http_8c_html_aed5af68d7cd4bc4ed1fdca3e2de959af"><div class="ttname"><a href="../../dd/d43/http_8c.html#aed5af68d7cd4bc4ed1fdca3e2de959af">MAX_HTTP_LINE_LENGTH</a></div><div class="ttdeci">#define MAX_HTTP_LINE_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00099">http.c:99</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a46ab7be436b65128e5cbe8a4cbecf9fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46ab7be436b65128e5cbe8a4cbecf9fa">&#9670;&nbsp;</a></span>http_request_tracking_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void http_request_tracking_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a> *&#160;</td>
          <td class="paramname"><em>request</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00852">852</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00104">ast_set_flags_to</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00453">http_worker_private_data::flags</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00443">HTTP_FLAG_BODY_READ</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00445">HTTP_FLAG_CLOSE_ON_COMPLETION</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l00441">HTTP_FLAG_HAS_BODY</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l01937">httpd_helper_thread()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l01839">httpd_process_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;{</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#af369c4577c71400e8bf7924d8b12ad3f">ast_set_flags_to</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>,</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920">HTTP_FLAG_HAS_BODY</a> | <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88">HTTP_FLAG_BODY_READ</a> | <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>,</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      <span class="comment">/* Assume close in case request fails early */</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>);</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;}</div><div class="ttc" id="utils_8h_html_af369c4577c71400e8bf7924d8b12ad3f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#af369c4577c71400e8bf7924d8b12ad3f">ast_set_flags_to</a></div><div class="ttdeci">#define ast_set_flags_to(p, flag, value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00104">utils.h:104</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920">HTTP_FLAG_HAS_BODY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00441">http.c:441</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88">HTTP_FLAG_BODY_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00443">http.c:443</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">http_worker_private_data::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00453">http.c:453</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00445">http.c:445</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4480bab3d6e6cab9e1004d275ca3fc90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4480bab3d6e6cab9e1004d275ca3fc90">&#9670;&nbsp;</a></span>http_request_tracking_setup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int http_request_tracking_setup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00871">871</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d43/http_8c_source.html#l00648">ast_http_error()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00104">ast_set_flags_to</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00451">http_worker_private_data::body_length</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00453">http_worker_private_data::flags</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00786">get_content_length()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00811">get_transfer_encoding()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00825">http_check_connection_close()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00443">HTTP_FLAG_BODY_READ</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00445">HTTP_FLAG_CLOSE_ON_COMPLETION</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00441">HTTP_FLAG_HAS_BODY</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00162">ast_tcptls_session_instance::private_data</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02559">request()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l01839">httpd_process_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;{</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a> *<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a> = ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">private_data</a>;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *transfer_encoding;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#af369c4577c71400e8bf7924d8b12ad3f">ast_set_flags_to</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>,</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920">HTTP_FLAG_HAS_BODY</a> | <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88">HTTP_FLAG_BODY_READ</a> | <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>,</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#a104dfc8d09b06044f2c35f99802c5ffe">http_check_connection_close</a>(headers) ? <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a> : 0);</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;   transfer_encoding = <a class="code" href="../../dd/d43/http_8c.html#a329db7109281018b7098339ef58e9b4e">get_transfer_encoding</a>(headers);</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;   <span class="keywordflow">if</span> (transfer_encoding &amp;&amp; !strcasecmp(transfer_encoding, <span class="stringliteral">&quot;chunked&quot;</span>)) {</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#a7c4c998980a0428c51179a4694431068">body_length</a> = -1;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920">HTTP_FLAG_HAS_BODY</a>);</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;   }</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;   request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#a7c4c998980a0428c51179a4694431068">body_length</a> = <a class="code" href="../../dd/d43/http_8c.html#afdfa71c968840ceb0eb770bad2735abf">get_content_length</a>(headers);</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;   <span class="keywordflow">if</span> (0 &lt; request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#a7c4c998980a0428c51179a4694431068">body_length</a>) {</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920">HTTP_FLAG_HAS_BODY</a>);</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#a7c4c998980a0428c51179a4694431068">body_length</a> &lt; 0) {</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      <span class="comment">/* Invalid Content-Length */</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>);</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a>(ser, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>, <span class="stringliteral">&quot;Invalid Content-Length in request!&quot;</span>);</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;   }</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;}</div><div class="ttc" id="structhttp__worker__private__data_html_a7c4c998980a0428c51179a4694431068"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html#a7c4c998980a0428c51179a4694431068">http_worker_private_data::body_length</a></div><div class="ttdeci">int body_length</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00451">http.c:451</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="http_8c_html_afdfa71c968840ceb0eb770bad2735abf"><div class="ttname"><a href="../../dd/d43/http_8c.html#afdfa71c968840ceb0eb770bad2735abf">get_content_length</a></div><div class="ttdeci">static int get_content_length(struct ast_variable *headers)</div><div class="ttdoc">Returns the value of the Content-Length header. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00786">http.c:786</a></div></div>
<div class="ttc" id="utils_8h_html_af369c4577c71400e8bf7924d8b12ad3f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#af369c4577c71400e8bf7924d8b12ad3f">ast_set_flags_to</a></div><div class="ttdeci">#define ast_set_flags_to(p, flag, value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00104">utils.h:104</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9e7c534ebe43cd36992aa36dd22dc920">HTTP_FLAG_HAS_BODY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00441">http.c:441</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a5543c621a8f1ea9ec5279560a6f07d88">HTTP_FLAG_BODY_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00443">http.c:443</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_ad517770dac2061381b2008850ff12e6c"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">ast_tcptls_session_instance::private_data</a></div><div class="ttdeci">void * private_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00162">tcptls.h:162</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">http_worker_private_data::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00453">http.c:453</a></div></div>
<div class="ttc" id="http_8c_html_a329db7109281018b7098339ef58e9b4e"><div class="ttname"><a href="../../dd/d43/http_8c.html#a329db7109281018b7098339ef58e9b4e">get_transfer_encoding</a></div><div class="ttdeci">static const char * get_transfer_encoding(struct ast_variable *headers)</div><div class="ttdoc">Returns the value of the Transfer-Encoding header. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00811">http.c:811</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a4e2e6fb7d874f0d2deddd2ecfc8afb32"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a></div><div class="ttdeci">static int request(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02559">chan_pjsip.c:2559</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00445">http.c:445</a></div></div>
<div class="ttc" id="http_8c_html_a104dfc8d09b06044f2c35f99802c5ffe"><div class="ttname"><a href="../../dd/d43/http_8c.html#a104dfc8d09b06044f2c35f99802c5ffe">http_check_connection_close</a></div><div class="ttdeci">static int http_check_connection_close(struct ast_variable *headers)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00825">http.c:825</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00449">http.c:449</a></div></div>
<div class="ttc" id="http_8c_html_a6ab57c2e45049bd17a5cf6d0ce6e1ebe"><div class="ttname"><a href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a></div><div class="ttdeci">void ast_http_error(struct ast_tcptls_session_instance *ser, int status_code, const char *status_title, const char *text)</div><div class="ttdoc">Send HTTP error message and close socket. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00648">http.c:648</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0605800ec02aa2a6ffd42af6ba06b98f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0605800ec02aa2a6ffd42af6ba06b98f">&#9670;&nbsp;</a></span>httpd_helper_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void * httpd_helper_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01937">1937</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00755">ast_atomic_fetchadd_int()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00648">ast_http_error()</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00084">ast_iostream_get_fd()</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00103">ast_iostream_nonblock()</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00148">ast_iostream_set_exclusive_input()</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00130">ast_iostream_set_timeout_idle_inactivity()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00839">ast_tcptls_close_session_file()</a>, <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00048">done</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00852">http_request_tracking_init()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01839">httpd_process_request()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00075">MIN_INITIAL_REQUEST_TIMEOUT</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00162">ast_tcptls_session_instance::private_data</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00109">session_count</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00107">session_inactivity</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00108">session_keep_alive</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00106">session_limit</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00160">ast_tcptls_session_instance::stream</a>, and <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00086">timeout</a>.</p>
<div class="fragment"><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;{</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser = data;</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;   <span class="keywordtype">int</span> arg = 1;</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;   <span class="keywordflow">if</span> (!ser) {</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(ser);</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;   }</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#a7aa5af3eb4d501b0c44c590507f751e8">session_count</a>, +1) &gt;= <a class="code" href="../../dd/d43/http_8c.html#af9b90c23264e36e6492a2eb8598c9bf0">session_limit</a>) {</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;HTTP session count exceeded %d sessions.\n&quot;</span>,</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;         <a class="code" href="../../dd/d43/http_8c.html#af9b90c23264e36e6492a2eb8598c9bf0">session_limit</a>);</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;   }</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;HTTP opening session.  Top level\n&quot;</span>);</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;<span class="comment">    * Here we set TCP_NODELAY on the socket to disable Nagle&#39;s algorithm.</span></div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;<span class="comment">    * This is necessary to prevent delays (caused by buffering) as we</span></div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;<span class="comment">    * write to the socket in bits and pieces.</span></div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;   <span class="keywordflow">if</span> (setsockopt(<a class="code" href="../../dd/d27/iostream_8h.html#a6ebb2730257107d3535fe6cb1285f479">ast_iostream_get_fd</a>(ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>), IPPROTO_TCP, TCP_NODELAY, (<span class="keywordtype">char</span> *) &amp;arg, <span class="keyword">sizeof</span>(arg)) &lt; 0) {</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to set TCP_NODELAY on HTTP connection: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;   }</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;   <a class="code" href="../../dd/d27/iostream_8h.html#ab426c2063464fc2e2719f8edd9e03085">ast_iostream_nonblock</a>(ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>);</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;   <span class="comment">/* Setup HTTP worker private data to keep track of request body reading. */</span></div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">private_data</a>);</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;   ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">private_data</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a>), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;   <span class="keywordflow">if</span> (!ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">private_data</a>) {</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a>(ser, 500, <span class="stringliteral">&quot;Server Error&quot;</span>, <span class="stringliteral">&quot;Out of memory&quot;</span>);</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;   }</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#a46ab7be436b65128e5cbe8a4cbecf9fa">http_request_tracking_init</a>(ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">private_data</a>);</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;   <span class="comment">/* Determine initial HTTP request wait timeout. */</span></div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;   timeout = <a class="code" href="../../dd/d43/http_8c.html#ad49ee0814a6efb14658ec87f2f6a86fb">session_keep_alive</a>;</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;   <span class="keywordflow">if</span> (timeout &lt;= 0) {</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;      <span class="comment">/* Persistent connections not enabled. */</span></div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;      timeout = <a class="code" href="../../dd/d43/http_8c.html#a7fca7b13ef64698410758fcd096c048b">session_inactivity</a>;</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;   }</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;   <span class="keywordflow">if</span> (timeout &lt; <a class="code" href="../../dd/d43/http_8c.html#a285225f3d0ac09c658f9b505ebaab250">MIN_INITIAL_REQUEST_TIMEOUT</a>) {</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;      timeout = <a class="code" href="../../dd/d43/http_8c.html#a285225f3d0ac09c658f9b505ebaab250">MIN_INITIAL_REQUEST_TIMEOUT</a>;</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;   }</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;   <span class="comment">/* We can let the stream wait for data to arrive. */</span></div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;   <a class="code" href="../../dd/d27/iostream_8h.html#a7da9c8f9652decad87fdb8d39c4f06df">ast_iostream_set_exclusive_input</a>(ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>, 1);</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;      <span class="comment">/* Wait for next potential HTTP request message. */</span></div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;      <a class="code" href="../../dd/d27/iostream_8h.html#a4a3dcf5f4fc390a9eb10b7a69a44cf35">ast_iostream_set_timeout_idle_inactivity</a>(ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>, timeout, <a class="code" href="../../dd/d43/http_8c.html#a7fca7b13ef64698410758fcd096c048b">session_inactivity</a>);</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#ad93caa5af16f64b49525f28b5ec0a5c6">httpd_process_request</a>(ser)) {</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;         <span class="comment">/* Break the connection or the connection closed */</span></div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;      }</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;      <span class="keywordflow">if</span> (!ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>) {</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;         <span class="comment">/* Web-socket or similar that took the connection */</span></div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;      }</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;      timeout = <a class="code" href="../../dd/d43/http_8c.html#ad49ee0814a6efb14658ec87f2f6a86fb">session_keep_alive</a>;</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;      <span class="keywordflow">if</span> (timeout &lt;= 0) {</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;         <span class="comment">/* Persistent connections not enabled. */</span></div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;      }</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;   }</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;<a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>:</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#a7aa5af3eb4d501b0c44c590507f751e8">session_count</a>, -1);</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;HTTP closing session.  Top level\n&quot;</span>);</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;   <a class="code" href="../../d4/ddf/tcptls_8h.html#adea645492f53ec11186b84eaf85e14d9">ast_tcptls_close_session_file</a>(ser);</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ser, -1);</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;}</div><div class="ttc" id="iostream_8h_html_a7da9c8f9652decad87fdb8d39c4f06df"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#a7da9c8f9652decad87fdb8d39c4f06df">ast_iostream_set_exclusive_input</a></div><div class="ttdeci">void ast_iostream_set_exclusive_input(struct ast_iostream *stream, int exclusive_input)</div><div class="ttdoc">Set the iostream if it can exclusively depend upon the set timeouts. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00148">iostream.c:148</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="iostream_8h_html_a6ebb2730257107d3535fe6cb1285f479"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#a6ebb2730257107d3535fe6cb1285f479">ast_iostream_get_fd</a></div><div class="ttdeci">int ast_iostream_get_fd(struct ast_iostream *stream)</div><div class="ttdoc">Get an iostream&amp;#39;s file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00084">iostream.c:84</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="iostream_8h_html_a4a3dcf5f4fc390a9eb10b7a69a44cf35"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#a4a3dcf5f4fc390a9eb10b7a69a44cf35">ast_iostream_set_timeout_idle_inactivity</a></div><div class="ttdeci">void ast_iostream_set_timeout_idle_inactivity(struct ast_iostream *stream, int timeout, int timeout_reset)</div><div class="ttdoc">Set the iostream inactivity &amp; idle timeout timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00130">iostream.c:130</a></div></div>
<div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
<div class="ttc" id="test__amihooks_8c_html_a5992b274cfdcacdbc1fa8347fd01ebde"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a></div><div class="ttdeci">int done</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00048">test_amihooks.c:48</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a></div><div class="ttdoc">describes a server instance </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00149">tcptls.h:149</a></div></div>
<div class="ttc" id="http_8c_html_ad93caa5af16f64b49525f28b5ec0a5c6"><div class="ttname"><a href="../../dd/d43/http_8c.html#ad93caa5af16f64b49525f28b5ec0a5c6">httpd_process_request</a></div><div class="ttdeci">static int httpd_process_request(struct ast_tcptls_session_instance *ser)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01839">http.c:1839</a></div></div>
<div class="ttc" id="http_8c_html_af9b90c23264e36e6492a2eb8598c9bf0"><div class="ttname"><a href="../../dd/d43/http_8c.html#af9b90c23264e36e6492a2eb8598c9bf0">session_limit</a></div><div class="ttdeci">static int session_limit</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00106">http.c:106</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_ad517770dac2061381b2008850ff12e6c"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">ast_tcptls_session_instance::private_data</a></div><div class="ttdeci">void * private_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00162">tcptls.h:162</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="http_8c_html_a46ab7be436b65128e5cbe8a4cbecf9fa"><div class="ttname"><a href="../../dd/d43/http_8c.html#a46ab7be436b65128e5cbe8a4cbecf9fa">http_request_tracking_init</a></div><div class="ttdeci">static void http_request_tracking_init(struct http_worker_private_data *request)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00852">http.c:852</a></div></div>
<div class="ttc" id="http_8c_html_a7fca7b13ef64698410758fcd096c048b"><div class="ttname"><a href="../../dd/d43/http_8c.html#a7fca7b13ef64698410758fcd096c048b">session_inactivity</a></div><div class="ttdeci">static int session_inactivity</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00107">http.c:107</a></div></div>
<div class="ttc" id="http_8c_html_a285225f3d0ac09c658f9b505ebaab250"><div class="ttname"><a href="../../dd/d43/http_8c.html#a285225f3d0ac09c658f9b505ebaab250">MIN_INITIAL_REQUEST_TIMEOUT</a></div><div class="ttdeci">#define MIN_INITIAL_REQUEST_TIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00075">http.c:75</a></div></div>
<div class="ttc" id="http_8c_html_a7aa5af3eb4d501b0c44c590507f751e8"><div class="ttname"><a href="../../dd/d43/http_8c.html#a7aa5af3eb4d501b0c44c590507f751e8">session_count</a></div><div class="ttdeci">static int session_count</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00109">http.c:109</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_a36ac2dd734607a43ed90acb7e9d81ac5"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">ast_tcptls_session_instance::stream</a></div><div class="ttdeci">struct ast_iostream * stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00160">tcptls.h:160</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="tcptls_8h_html_adea645492f53ec11186b84eaf85e14d9"><div class="ttname"><a href="../../d4/ddf/tcptls_8h.html#adea645492f53ec11186b84eaf85e14d9">ast_tcptls_close_session_file</a></div><div class="ttdeci">void ast_tcptls_close_session_file(struct ast_tcptls_session_instance *tcptls_session)</div><div class="ttdoc">Closes a tcptls session instance&amp;#39;s file and/or file descriptor. The tcptls_session will be set to NUL...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9b/tcptls_8c_source.html#l00839">tcptls.c:839</a></div></div>
<div class="ttc" id="iostream_8h_html_ab426c2063464fc2e2719f8edd9e03085"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#ab426c2063464fc2e2719f8edd9e03085">ast_iostream_nonblock</a></div><div class="ttdeci">void ast_iostream_nonblock(struct ast_iostream *stream)</div><div class="ttdoc">Make an iostream non-blocking. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00103">iostream.c:103</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00449">http.c:449</a></div></div>
<div class="ttc" id="http_8c_html_a6ab57c2e45049bd17a5cf6d0ce6e1ebe"><div class="ttname"><a href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a></div><div class="ttdeci">void ast_http_error(struct ast_tcptls_session_instance *ser, int status_code, const char *status_title, const char *text)</div><div class="ttdoc">Send HTTP error message and close socket. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00648">http.c:648</a></div></div>
<div class="ttc" id="http_8c_html_ad49ee0814a6efb14658ec87f2f6a86fb"><div class="ttname"><a href="../../dd/d43/http_8c.html#ad49ee0814a6efb14658ec87f2f6a86fb">session_keep_alive</a></div><div class="ttdeci">static int session_keep_alive</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00108">http.c:108</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad93caa5af16f64b49525f28b5ec0a5c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad93caa5af16f64b49525f28b5ec0a5c6">&#9670;&nbsp;</a></span>httpd_process_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int httpd_process_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01839">1839</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d56/http_8h_source.html#l00062">AST_HTTP_DELETE</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00648">ast_http_error()</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00058">AST_HTTP_GET</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00060">AST_HTTP_HEAD</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00063">AST_HTTP_OPTIONS</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00059">AST_HTTP_POST</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00061">AST_HTTP_PUT</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00057">AST_HTTP_UNKNOWN</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00300">ast_iostream_gets()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01829">ast_shutdown_final()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00157">ast_skip_blanks()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00200">ast_skip_nonblanks()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01263">ast_variables_destroy()</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00453">http_worker_private_data::flags</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00811">get_transfer_encoding()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01401">handle_uri()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00445">HTTP_FLAG_CLOSE_ON_COMPLETION</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01757">http_request_headers_get()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00852">http_request_tracking_init()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00871">http_request_tracking_setup()</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00099">MAX_HTTP_LINE_LENGTH</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04335">method</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00162">ast_tcptls_session_instance::private_data</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02559">request()</a>, and <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00160">ast_tcptls_session_instance::stream</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l01937">httpd_helper_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;{</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *, headers, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>);</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;   <span class="keywordtype">char</span> *uri;</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>;</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *transfer_encoding;</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a> *<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a>;</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80ef">ast_http_method</a> http_method = <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa8f6ca13b1fe4a9c235071bd548509ea7">AST_HTTP_UNKNOWN</a>;</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;   ssize_t <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;   <span class="keywordtype">char</span> request_line[<a class="code" href="../../dd/d43/http_8c.html#aed5af68d7cd4bc4ed1fdca3e2de959af">MAX_HTTP_LINE_LENGTH</a>];</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;   len = <a class="code" href="../../dd/d27/iostream_8h.html#a2837e9ce1fee3102081db853e207fd2c">ast_iostream_gets</a>(ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>, request_line, <span class="keyword">sizeof</span>(request_line));</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;   <span class="keywordflow">if</span> (len &lt;= 0) {</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;   }</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;   <span class="comment">/* Re-initialize the request body tracking data. */</span></div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;   request = ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">private_data</a>;</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#a46ab7be436b65128e5cbe8a4cbecf9fa">http_request_tracking_init</a>(request);</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;   <span class="keywordflow">if</span> (request_line[len - 1] != <span class="charliteral">&#39;\n&#39;</span>) {</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;      <span class="comment">/* We didn&#39;t get a full line */</span></div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a>(ser, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;         (len == <span class="keyword">sizeof</span>(request_line) - 1) ? <span class="stringliteral">&quot;Request line too long&quot;</span> : <span class="stringliteral">&quot;Timeout&quot;</span>);</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;   }</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;   <span class="comment">/* Get method */</span></div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;   method = <a class="code" href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a>(request_line);</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;   uri = <a class="code" href="../../d6/d90/strings_8h.html#a0734e172f7ec5c8b5ed5ba0737874083">ast_skip_nonblanks</a>(method);</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;   <span class="keywordflow">if</span> (*uri) {</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;      *uri++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;   }</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(method,<span class="stringliteral">&quot;GET&quot;</span>)) {</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;      http_method = <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa74b1cb5c2ecb5e0bd9af5d46a7b78fd2">AST_HTTP_GET</a>;</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(method,<span class="stringliteral">&quot;POST&quot;</span>)) {</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;      http_method = <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa544b9492daf28b47937772ca54e31c80">AST_HTTP_POST</a>;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(method,<span class="stringliteral">&quot;HEAD&quot;</span>)) {</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;      http_method = <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efaf8da4e60a407fb100dd10e20929ea162">AST_HTTP_HEAD</a>;</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(method,<span class="stringliteral">&quot;PUT&quot;</span>)) {</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;      http_method = <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa001bd38674d391df71e468b51ffe50ce">AST_HTTP_PUT</a>;</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(method,<span class="stringliteral">&quot;DELETE&quot;</span>)) {</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;      http_method = <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa48eee9f380e72e9356c181ec467af41b">AST_HTTP_DELETE</a>;</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(method,<span class="stringliteral">&quot;OPTIONS&quot;</span>)) {</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;      http_method = <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efaa7118e76cc07d36dec9b2b2f67feafc4">AST_HTTP_OPTIONS</a>;</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;   }</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;   uri = <a class="code" href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a>(uri);   <span class="comment">/* Skip white space */</span></div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;   <span class="keywordflow">if</span> (*uri) {       <span class="comment">/* terminate at the first blank */</span></div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> = <a class="code" href="../../d6/d90/strings_8h.html#a0734e172f7ec5c8b5ed5ba0737874083">ast_skip_nonblanks</a>(uri);</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;      <span class="keywordflow">if</span> (*c) {</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;         *c = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;      }</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a>(ser, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>, <span class="stringliteral">&quot;Invalid Request&quot;</span>);</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;   }</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/db2/asterisk_8h.html#a0eb0441c04955094ce5845fb0258645a">ast_shutdown_final</a>()) {</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a>(ser, 503, <span class="stringliteral">&quot;Service Unavailable&quot;</span>, <span class="stringliteral">&quot;Shutdown in progress&quot;</span>);</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;   }</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;   <span class="comment">/* process &quot;Request Headers&quot; lines */</span></div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#a409d88e2752cd7a0034f184ab130a6dc">http_request_headers_get</a>(ser, &amp;headers)) {</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;   }</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;   transfer_encoding = <a class="code" href="../../dd/d43/http_8c.html#a329db7109281018b7098339ef58e9b4e">get_transfer_encoding</a>(headers);</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;   <span class="comment">/* Transfer encoding defaults to identity */</span></div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;   <span class="keywordflow">if</span> (!transfer_encoding) {</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;      transfer_encoding = <span class="stringliteral">&quot;identity&quot;</span>;</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;   }</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;<span class="comment">    * RFC 2616, section 3.6, we should respond with a 501 for any transfer-</span></div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;<span class="comment">    * codings we don&#39;t understand.</span></div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;   <span class="keywordflow">if</span> (strcasecmp(transfer_encoding, <span class="stringliteral">&quot;identity&quot;</span>) != 0 &amp;&amp;</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;      strcasecmp(transfer_encoding, <span class="stringliteral">&quot;chunked&quot;</span>) != 0) {</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;      <span class="comment">/* Transfer encodings not supported */</span></div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a>(ser, 501, <span class="stringliteral">&quot;Unimplemented&quot;</span>, <span class="stringliteral">&quot;Unsupported Transfer-Encoding.&quot;</span>);</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;   }</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#a4480bab3d6e6cab9e1004d275ca3fc90">http_request_tracking_setup</a>(ser, headers)</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;      || <a class="code" href="../../dd/d43/http_8c.html#adb8c9004124fd9ace0a57f2d222ff9ad">handle_uri</a>(ser, uri, http_method, headers)</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;      || <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;request-&gt;<a class="code" href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a>)) {</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;      res = -1;</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;      res = 0;</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;   }</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;}</div><div class="ttc" id="http_8c_html_a409d88e2752cd7a0034f184ab130a6dc"><div class="ttname"><a href="../../dd/d43/http_8c.html#a409d88e2752cd7a0034f184ab130a6dc">http_request_headers_get</a></div><div class="ttdeci">static int http_request_headers_get(struct ast_tcptls_session_instance *ser, struct ast_variable **headers)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01757">http.c:1757</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80efa48eee9f380e72e9356c181ec467af41b"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa48eee9f380e72e9356c181ec467af41b">AST_HTTP_DELETE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00062">http.h:62</a></div></div>
<div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80efaa7118e76cc07d36dec9b2b2f67feafc4"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efaa7118e76cc07d36dec9b2b2f67feafc4">AST_HTTP_OPTIONS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00063">http.h:63</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="http_8c_html_a4480bab3d6e6cab9e1004d275ca3fc90"><div class="ttname"><a href="../../dd/d43/http_8c.html#a4480bab3d6e6cab9e1004d275ca3fc90">http_request_tracking_setup</a></div><div class="ttdeci">static int http_request_tracking_setup(struct ast_tcptls_session_instance *ser, struct ast_variable *headers)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00871">http.c:871</a></div></div>
<div class="ttc" id="strings_8h_html_a0734e172f7ec5c8b5ed5ba0737874083"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a0734e172f7ec5c8b5ed5ba0737874083">ast_skip_nonblanks</a></div><div class="ttdeci">char * ast_skip_nonblanks(const char *str)</div><div class="ttdoc">Gets a pointer to first whitespace character in a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00200">strings.h:200</a></div></div>
<div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80efa001bd38674d391df71e468b51ffe50ce"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa001bd38674d391df71e468b51ffe50ce">AST_HTTP_PUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00061">http.h:61</a></div></div>
<div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80efa8f6ca13b1fe4a9c235071bd548509ea7"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa8f6ca13b1fe4a9c235071bd548509ea7">AST_HTTP_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00057">http.h:57</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a8b44a03925325ceaf2de7b079b1541a1"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a></div><div class="ttdeci">const char * method</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04335">res_pjsip.c:4335</a></div></div>
<div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80efa74b1cb5c2ecb5e0bd9af5d46a7b78fd2"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa74b1cb5c2ecb5e0bd9af5d46a7b78fd2">AST_HTTP_GET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00058">http.h:58</a></div></div>
<div class="ttc" id="asterisk_8h_html_a0eb0441c04955094ce5845fb0258645a"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#a0eb0441c04955094ce5845fb0258645a">ast_shutdown_final</a></div><div class="ttdeci">int ast_shutdown_final(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01829">asterisk.c:1829</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_ad517770dac2061381b2008850ff12e6c"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#ad517770dac2061381b2008850ff12e6c">ast_tcptls_session_instance::private_data</a></div><div class="ttdeci">void * private_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00162">tcptls.h:162</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html#aec78000b2897c094f68ed72559e18acd">http_worker_private_data::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00453">http.c:453</a></div></div>
<div class="ttc" id="strings_8h_html_af5693da955fa3bc73bc49c47b601fc7a"><div class="ttname"><a href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a></div><div class="ttdeci">char * ast_skip_blanks(const char *str)</div><div class="ttdoc">Gets a pointer to the first non-whitespace character in a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00157">strings.h:157</a></div></div>
<div class="ttc" id="http_8c_html_a46ab7be436b65128e5cbe8a4cbecf9fa"><div class="ttname"><a href="../../dd/d43/http_8c.html#a46ab7be436b65128e5cbe8a4cbecf9fa">http_request_tracking_init</a></div><div class="ttdeci">static void http_request_tracking_init(struct http_worker_private_data *request)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00852">http.c:852</a></div></div>
<div class="ttc" id="http_8c_html_a329db7109281018b7098339ef58e9b4e"><div class="ttname"><a href="../../dd/d43/http_8c.html#a329db7109281018b7098339ef58e9b4e">get_transfer_encoding</a></div><div class="ttdeci">static const char * get_transfer_encoding(struct ast_variable *headers)</div><div class="ttdoc">Returns the value of the Transfer-Encoding header. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00811">http.c:811</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a4e2e6fb7d874f0d2deddd2ecfc8afb32"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a></div><div class="ttdeci">static int request(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02559">chan_pjsip.c:2559</a></div></div>
<div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80efaf8da4e60a407fb100dd10e20929ea162"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efaf8da4e60a407fb100dd10e20929ea162">AST_HTTP_HEAD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00060">http.h:60</a></div></div>
<div class="ttc" id="http_8c_html_a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f"><div class="ttname"><a href="../../dd/d43/http_8c.html#a647c59574088759d4b555ceb63d9df89a9a4c1894f10d0148043df7933b6e471f">HTTP_FLAG_CLOSE_ON_COMPLETION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00445">http.c:445</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_a36ac2dd734607a43ed90acb7e9d81ac5"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">ast_tcptls_session_instance::stream</a></div><div class="ttdeci">struct ast_iostream * stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00160">tcptls.h:160</a></div></div>
<div class="ttc" id="http_8c_html_adb8c9004124fd9ace0a57f2d222ff9ad"><div class="ttname"><a href="../../dd/d43/http_8c.html#adb8c9004124fd9ace0a57f2d222ff9ad">handle_uri</a></div><div class="ttdeci">static int handle_uri(struct ast_tcptls_session_instance *ser, char *uri, enum ast_http_method method, struct ast_variable *headers)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01401">http.c:1401</a></div></div>
<div class="ttc" id="iostream_8h_html_a2837e9ce1fee3102081db853e207fd2c"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#a2837e9ce1fee3102081db853e207fd2c">ast_iostream_gets</a></div><div class="ttdeci">ssize_t ast_iostream_gets(struct ast_iostream *stream, char *buffer, size_t size)</div><div class="ttdoc">Read a LF-terminated string from an iostream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00300">iostream.c:300</a></div></div>
<div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80efa544b9492daf28b47937772ca54e31c80"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa544b9492daf28b47937772ca54e31c80">AST_HTTP_POST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00059">http.h:59</a></div></div>
<div class="ttc" id="structhttp__worker__private__data_html"><div class="ttname"><a href="../../d5/d53/structhttp__worker__private__data.html">http_worker_private_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00449">http.c:449</a></div></div>
<div class="ttc" id="http_8c_html_a6ab57c2e45049bd17a5cf6d0ce6e1ebe"><div class="ttname"><a href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a></div><div class="ttdeci">void ast_http_error(struct ast_tcptls_session_instance *ser, int status_code, const char *status_title, const char *text)</div><div class="ttdoc">Send HTTP error message and close socket. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00648">http.c:648</a></div></div>
<div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80ef"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80ef">ast_http_method</a></div><div class="ttdeci">ast_http_method</div><div class="ttdoc">HTTP Request methods known by Asterisk. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00056">http.h:56</a></div></div>
<div class="ttc" id="http_8c_html_aed5af68d7cd4bc4ed1fdca3e2de959af"><div class="ttname"><a href="../../dd/d43/http_8c.html#aed5af68d7cd4bc4ed1fdca3e2de959af">MAX_HTTP_LINE_LENGTH</a></div><div class="ttdeci">#define MAX_HTTP_LINE_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00099">http.c:99</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1a555a4644192793b6aa436f3982ab09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a555a4644192793b6aa436f3982ab09">&#9670;&nbsp;</a></span>httpstatus_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int httpstatus_callback </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a> *&#160;</td>
          <td class="paramname"><em>urih</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80ef">ast_http_method</a>&#160;</td>
          <td class="paramname"><em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>get_vars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00368">368</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d43/http_8c_source.html#l00648">ast_http_error()</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00058">AST_HTTP_GET</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01532">ast_http_get_cookies()</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00060">AST_HTTP_HEAD</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00836">ast_http_request_close_on_completion()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00456">ast_http_send()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00290">ast_sockaddr_stringify_addr()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00362">ast_sockaddr_stringify_port()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01263">ast_variables_destroy()</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00088">ast_tls_config::enabled</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00104">http_server_name</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00111">http_tls_cfg</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00131">ast_tcptls_session_args::old_address</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00033">out</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00141">prefix</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>
<div class="fragment"><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;{</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v, *cookies = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a> != <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa74b1cb5c2ecb5e0bd9af5d46a7b78fd2">AST_HTTP_GET</a> &amp;&amp; <a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a> != <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efaf8da4e60a407fb100dd10e20929ea162">AST_HTTP_HEAD</a>) {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a>(ser, 501, <span class="stringliteral">&quot;Not Implemented&quot;</span>, <span class="stringliteral">&quot;Attempt to use unimplemented / unsupported method&quot;</span>);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;   }</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;   out = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(512);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;   <span class="keywordflow">if</span> (!out) {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#ab0286838ed2b93e0d77fe9d7af8a37b5">ast_http_request_close_on_completion</a>(ser);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a>(ser, 500, <span class="stringliteral">&quot;Server Error&quot;</span>, <span class="stringliteral">&quot;Out of memory&quot;</span>);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;   }</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0,</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <span class="stringliteral">&quot;&lt;html&gt;&lt;title&gt;Asterisk HTTP Status&lt;/title&gt;\r\n&quot;</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      <span class="stringliteral">&quot;&lt;body bgcolor=\&quot;#ffffff\&quot;&gt;\r\n&quot;</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <span class="stringliteral">&quot;&lt;table bgcolor=\&quot;#f1f1f1\&quot; align=\&quot;center\&quot;&gt;&lt;tr&gt;&lt;td bgcolor=\&quot;#e0e0ff\&quot; colspan=\&quot;2\&quot; width=\&quot;500\&quot;&gt;\r\n&quot;</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <span class="stringliteral">&quot;&lt;h2&gt;&amp;nbsp;&amp;nbsp;Asterisk&amp;trade; HTTP Status&lt;/h2&gt;&lt;/td&gt;&lt;/tr&gt;\r\n&quot;</span>);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;&lt;tr&gt;&lt;td&gt;&lt;i&gt;Server&lt;/i&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;%s&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;\r\n&quot;</span>, <a class="code" href="../../dd/d43/http_8c.html#a5086e142ada070c22242a51c58f3da4a">http_server_name</a>);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;&lt;tr&gt;&lt;td&gt;&lt;i&gt;Prefix&lt;/i&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;%s&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;\r\n&quot;</span>, <a class="code" href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a>);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;&lt;tr&gt;&lt;td&gt;&lt;i&gt;Bind Address&lt;/i&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;%s&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;\r\n&quot;</span>,</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;             <a class="code" href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#aef37d79896cadcf96c364f8c5609fd2f">http_desc</a>.<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#ac2badb17597d7e81dc4d44e54d470a05">old_address</a>));</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;&lt;tr&gt;&lt;td&gt;&lt;i&gt;Bind Port&lt;/i&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;%s&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;\r\n&quot;</span>,</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;             <a class="code" href="../../db/df1/netsock2_8h.html#a9cda5e6ceb0f717967af581ea6e50f6d">ast_sockaddr_stringify_port</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#aef37d79896cadcf96c364f8c5609fd2f">http_desc</a>.<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#ac2badb17597d7e81dc4d44e54d470a05">old_address</a>));</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a>.<a class="code" href="../../d5/d90/structast__tls__config.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a>) {</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;&lt;tr&gt;&lt;td&gt;&lt;i&gt;SSL Bind Port&lt;/i&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;%s&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;\r\n&quot;</span>,</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                <a class="code" href="../../db/df1/netsock2_8h.html#a9cda5e6ceb0f717967af581ea6e50f6d">ast_sockaddr_stringify_port</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#ad04999a886797d6dfe4fc6f6742527f5">https_desc</a>.<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#ac2badb17597d7e81dc4d44e54d470a05">old_address</a>));</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;   }</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;&lt;tr&gt;&lt;td colspan=\&quot;2\&quot;&gt;&lt;hr&gt;&lt;/td&gt;&lt;/tr&gt;\r\n&quot;</span>);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   <span class="keywordflow">for</span> (v = get_vars; v; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;&lt;tr&gt;&lt;td&gt;&lt;i&gt;Submitted GET Variable &#39;%s&#39;&lt;/i&gt;&lt;/td&gt;&lt;td&gt;%s&lt;/td&gt;&lt;/tr&gt;\r\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   }</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;&lt;tr&gt;&lt;td colspan=\&quot;2\&quot;&gt;&lt;hr&gt;&lt;/td&gt;&lt;/tr&gt;\r\n&quot;</span>);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;   cookies = <a class="code" href="../../dd/d43/http_8c.html#a2e7522cd280df6ee043aad7bef980eb9">ast_http_get_cookies</a>(headers);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;   <span class="keywordflow">for</span> (v = cookies; v; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;&lt;tr&gt;&lt;td&gt;&lt;i&gt;Cookie &#39;%s&#39;&lt;/i&gt;&lt;/td&gt;&lt;td&gt;%s&lt;/td&gt;&lt;/tr&gt;\r\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   }</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(cookies);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;&lt;/table&gt;&lt;center&gt;&lt;font size=\&quot;-1\&quot;&gt;&lt;i&gt;Asterisk and Digium are registered trademarks of Digium, Inc.&lt;/i&gt;&lt;/font&gt;&lt;/center&gt;&lt;/body&gt;&lt;/html&gt;\r\n&quot;</span>);</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#a0448c9f4a66b6ee7994870b187e185b4">ast_http_send</a>(ser, <a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>, 200, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, out, 0, 0);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;}</div><div class="ttc" id="netsock2_8h_html_a6bf0e68e74c0a9ca9d25251b22e4d64a"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a></div><div class="ttdeci">static char * ast_sockaddr_stringify_addr(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() to return an address only. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00290">netsock2.h:290</a></div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="http_8c_html_a2e7522cd280df6ee043aad7bef980eb9"><div class="ttname"><a href="../../dd/d43/http_8c.html#a2e7522cd280df6ee043aad7bef980eb9">ast_http_get_cookies</a></div><div class="ttdeci">struct ast_variable * ast_http_get_cookies(struct ast_variable *headers)</div><div class="ttdoc">Get cookie from Request headers. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l01532">http.c:1532</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="netsock2_8h_html_a9cda5e6ceb0f717967af581ea6e50f6d"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a9cda5e6ceb0f717967af581ea6e50f6d">ast_sockaddr_stringify_port</a></div><div class="ttdeci">static char * ast_sockaddr_stringify_port(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() to return a port only. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00362">netsock2.h:362</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="http_8c_html_a1c80a21a7aa2d6eee02f11b48485a331"><div class="ttname"><a href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a></div><div class="ttdeci">static struct ast_tls_config http_tls_cfg</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00111">http.c:111</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a8b44a03925325ceaf2de7b079b1541a1"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a></div><div class="ttdeci">const char * method</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04335">res_pjsip.c:4335</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80efa74b1cb5c2ecb5e0bd9af5d46a7b78fd2"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa74b1cb5c2ecb5e0bd9af5d46a7b78fd2">AST_HTTP_GET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00058">http.h:58</a></div></div>
<div class="ttc" id="http_8c_html_aef37d79896cadcf96c364f8c5609fd2f"><div class="ttname"><a href="../../dd/d43/http_8c.html#aef37d79896cadcf96c364f8c5609fd2f">http_desc</a></div><div class="ttdeci">static struct ast_tcptls_session_args http_desc</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00118">http.c:118</a></div></div>
<div class="ttc" id="http_8c_html_a5086e142ada070c22242a51c58f3da4a"><div class="ttname"><a href="../../dd/d43/http_8c.html#a5086e142ada070c22242a51c58f3da4a">http_server_name</a></div><div class="ttdeci">static char http_server_name[MAX_SERVER_NAME_LENGTH]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00104">http.c:104</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="http_8c_html_ab0286838ed2b93e0d77fe9d7af8a37b5"><div class="ttname"><a href="../../dd/d43/http_8c.html#ab0286838ed2b93e0d77fe9d7af8a37b5">ast_http_request_close_on_completion</a></div><div class="ttdeci">void ast_http_request_close_on_completion(struct ast_tcptls_session_instance *ser)</div><div class="ttdoc">Request the HTTP connection be closed after this HTTP request. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00836">http.c:836</a></div></div>
<div class="ttc" id="http_8c_html_a0448c9f4a66b6ee7994870b187e185b4"><div class="ttname"><a href="../../dd/d43/http_8c.html#a0448c9f4a66b6ee7994870b187e185b4">ast_http_send</a></div><div class="ttdeci">void ast_http_send(struct ast_tcptls_session_instance *ser, enum ast_http_method method, int status_code, const char *status_title, struct ast_str *http_header, struct ast_str *out, int fd, unsigned int static_content)</div><div class="ttdoc">Generic function for sending HTTP/1.1 response. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00456">http.c:456</a></div></div>
<div class="ttc" id="structast__tcptls__session__args_html_ac2badb17597d7e81dc4d44e54d470a05"><div class="ttname"><a href="../../da/d2b/structast__tcptls__session__args.html#ac2badb17597d7e81dc4d44e54d470a05">ast_tcptls_session_args::old_address</a></div><div class="ttdeci">struct ast_sockaddr old_address</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00131">tcptls.h:131</a></div></div>
<div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80efaf8da4e60a407fb100dd10e20929ea162"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efaf8da4e60a407fb100dd10e20929ea162">AST_HTTP_HEAD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00060">http.h:60</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a48bc11919b2752df9d14ce89557cfb25"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00033">utils/frame.c:33</a></div></div>
<div class="ttc" id="http_8c_html_a6ab57c2e45049bd17a5cf6d0ce6e1ebe"><div class="ttname"><a href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a></div><div class="ttdeci">void ast_http_error(struct ast_tcptls_session_instance *ser, int status_code, const char *status_title, const char *text)</div><div class="ttdoc">Send HTTP error message and close socket. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00648">http.c:648</a></div></div>
<div class="ttc" id="http_8c_html_ad04999a886797d6dfe4fc6f6742527f5"><div class="ttname"><a href="../../dd/d43/http_8c.html#ad04999a886797d6dfe4fc6f6742527f5">https_desc</a></div><div class="ttdeci">static struct ast_tcptls_session_args https_desc</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00128">http.c:128</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
<div class="ttc" id="http_8c_html_a6f25bc812d09fedb86bf394c01061c56"><div class="ttname"><a href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a></div><div class="ttdeci">static char prefix[MAX_PREFIX]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00141">http.c:141</a></div></div>
<div class="ttc" id="structast__tls__config_html_a03e6cca0c879c0443efb431c30c14f76"><div class="ttname"><a href="../../d5/d90/structast__tls__config.html#a03e6cca0c879c0443efb431c30c14f76">ast_tls_config::enabled</a></div><div class="ttdeci">int enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00088">tcptls.h:88</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l02374">2374</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00265">ast_cli_register_multiple</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00316">AST_MODFLAG_GLOBAL_SYMBOLS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00317">AST_MODFLAG_LOAD_ORDER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00324">AST_MODPRI_CORE</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00102">AST_MODULE_LOAD_FAILURE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00121">AST_MODULE_SUPPORT_CORE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00741">reload()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l02334">reload_module()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l02343">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;{</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(<a class="code" href="../../dd/d43/http_8c.html#a62ac5f089c743a2d4113e518818000fa">cli_http</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dd/d43/http_8c.html#a62ac5f089c743a2d4113e518818000fa">cli_http</a>));</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d43/http_8c.html#a3ce71802a2d0296a3478fcfeb3c21aac">__ast_http_load</a>(0) ? <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388">AST_MODULE_LOAD_FAILURE</a> : <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="http_8c_html_a62ac5f089c743a2d4113e518818000fa"><div class="ttname"><a href="../../dd/d43/http_8c.html#a62ac5f089c743a2d4113e518818000fa">cli_http</a></div><div class="ttdeci">static struct ast_cli_entry cli_http[]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l02339">http.c:2339</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="http_8c_html_a3ce71802a2d0296a3478fcfeb3c21aac"><div class="ttname"><a href="../../dd/d43/http_8c.html#a3ce71802a2d0296a3478fcfeb3c21aac">__ast_http_load</a></div><div class="ttdeci">static int __ast_http_load(int reload)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l02077">http.c:2077</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388">AST_MODULE_LOAD_FAILURE</a></div><div class="ttdoc">Module could not be loaded properly. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00102">module.h:102</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a51d0195b6167cb6e4661f6aec72382e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51d0195b6167cb6e4661f6aec72382e9">&#9670;&nbsp;</a></span>parse_cookies()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a>* parse_cookies </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cookies</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01498">1498</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00219">ast_strip()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01639">ast_strip_quoted()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">ast_variable_new</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00142">ast_tcptls_session_args::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">parse()</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>, and <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00614">var</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l01532">ast_http_get_cookies()</a>.</p>
<div class="fragment"><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;{</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(cookies);</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;   <span class="keywordtype">char</span> *cur;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *vars = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;   <span class="keywordflow">while</span> ((cur = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;parse, <span class="stringliteral">&quot;;&quot;</span>))) {</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, *<a class="code" href="../../d5/d85/structval.html">val</a>;</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;      name = val = cur;</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;      <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;val, <span class="stringliteral">&quot;=&quot;</span>);</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(val)) {</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;      }</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;      name = <a class="code" href="../../d6/d90/strings_8h.html#ac92713b8d07a45720b2664be70810e55">ast_strip</a>(name);</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;      val = <a class="code" href="../../d6/d90/strings_8h.html#aeb597bdc9a1209c2e7dd8af04de43485">ast_strip_quoted</a>(val, <span class="stringliteral">&quot;\&quot;&quot;</span>, <span class="stringliteral">&quot;\&quot;&quot;</span>);</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(val)) {</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;      }</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;HTTP Cookie, Name: &#39;%s&#39;  Value: &#39;%s&#39;\n&quot;</span>, name, val);</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;      var = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(name, val, __FILE__);</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;      var-&gt;next = vars;</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;      vars = <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;   }</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;   <span class="keywordflow">return</span> vars;</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;}</div><div class="ttc" id="structval_html"><div class="ttname"><a href="../../d5/d85/structval.html">val</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd1/ast__expr2_8c_source.html#l00325">ast_expr2.c:325</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="strings_8h_html_aeb597bdc9a1209c2e7dd8af04de43485"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aeb597bdc9a1209c2e7dd8af04de43485">ast_strip_quoted</a></div><div class="ttdeci">char * ast_strip_quoted(char *s, const char *beg_quotes, const char *end_quotes)</div><div class="ttdoc">Strip leading/trailing whitespace and quotes from a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01639">main/utils.c:1639</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="strings_8h_html_ac92713b8d07a45720b2664be70810e55"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac92713b8d07a45720b2664be70810e55">ast_strip</a></div><div class="ttdeci">char * ast_strip(char *s)</div><div class="ttdoc">Strip leading/trailing whitespace from a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00219">strings.h:219</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a66581086d34dfe7ea86b0644bacef239"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a></div><div class="ttdeci">#define ast_variable_new(name, value, filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">include/asterisk/config.h:914</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2e006acff60d9b3d65d7d60f975d6747"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a></div><div class="ttdeci">static void parse(struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">chan_mgcp.c:1872</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7c6ac25ea7536c0bc9ed18cbcf917527"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c6ac25ea7536c0bc9ed18cbcf917527">&#9670;&nbsp;</a></span>reload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int reload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l02334">2334</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02374">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;{</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d43/http_8c.html#a3ce71802a2d0296a3478fcfeb3c21aac">__ast_http_load</a>(1);</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;}</div><div class="ttc" id="http_8c_html_a3ce71802a2d0296a3478fcfeb3c21aac"><div class="ttname"><a href="../../dd/d43/http_8c.html#a3ce71802a2d0296a3478fcfeb3c21aac">__ast_http_load</a></div><div class="ttdeci">static int __ast_http_load(int reload)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l02077">http.c:2077</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a96830ad81e8b0d664a6b681bc90edb92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96830ad81e8b0d664a6b681bc90edb92">&#9670;&nbsp;</a></span>remove_excess_lws()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void remove_excess_lws </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l01659">1659</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00157">ast_skip_blanks()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00200">ast_skip_nonblanks()</a>, and <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l01688">ast_http_header_parse()</a>.</p>
<div class="fragment"><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;{</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;   <span class="keywordtype">char</span> *p, *res = s;</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(strlen(s) + 1);</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;   <span class="keywordtype">char</span> *buf_end;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;   <span class="keywordflow">if</span> (!buf) {</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;   }</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;   buf_end = <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;   <span class="keywordflow">while</span> (*s &amp;&amp; *(s = <a class="code" href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a>(s))) {</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;      p = s;</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;      s = <a class="code" href="../../d6/d90/strings_8h.html#a0734e172f7ec5c8b5ed5ba0737874083">ast_skip_nonblanks</a>(s);</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;      <span class="keywordflow">if</span> (buf_end != buf) {</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;         *buf_end++ = <span class="charliteral">&#39; &#39;</span>;</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;      }</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;      memcpy(buf_end, p, s - p);</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;      buf_end += s - p;</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;   }</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;   *buf_end = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;   <span class="comment">/* safe since buf will always be less than or equal to res */</span></div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;   strcpy(res, buf);</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(buf);</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="strings_8h_html_a0734e172f7ec5c8b5ed5ba0737874083"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a0734e172f7ec5c8b5ed5ba0737874083">ast_skip_nonblanks</a></div><div class="ttdeci">char * ast_skip_nonblanks(const char *str)</div><div class="ttdoc">Gets a pointer to first whitespace character in a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00200">strings.h:200</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="strings_8h_html_af5693da955fa3bc73bc49c47b601fc7a"><div class="ttname"><a href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a></div><div class="ttdeci">char * ast_skip_blanks(const char *str)</div><div class="ttdoc">Gets a pointer to the first non-whitespace character in a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00157">strings.h:157</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fea3758bd8ff4b078886120bb6c5f12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fea3758bd8ff4b078886120bb6c5f12">&#9670;&nbsp;</a></span>static_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int static_callback </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a> *&#160;</td>
          <td class="paramname"><em>urih</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80ef">ast_http_method</a>&#160;</td>
          <td class="paramname"><em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>get_vars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00240">240</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00158">ast_config_AST_DATA_DIR</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00648">ast_http_error()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00203">ast_http_ftype2mtype()</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00058">AST_HTTP_GET</a>, <a class="el" href="../../dd/d56/http_8h_source.html#l00060">AST_HTTP_HEAD</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00217">ast_http_manid_from_vars()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00836">ast_http_request_close_on_completion()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00456">ast_http_send()</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l01739">ast_localtime()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l02524">ast_strftime()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07551">astman_is_authed()</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00148">mtype</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>
<div class="fragment"><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;{</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   <span class="keywordtype">char</span> *path;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *ftype;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dd/d43/http_8c.html#a3189f2c804f88ece5a83d4772e11ff9e">mtype</a>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;   <span class="keywordtype">char</span> wkspace[80];</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;   <span class="keyword">struct </span>stat st;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;   <span class="keywordtype">int</span> fd;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *http_header;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;   <span class="keyword">struct </span>timeval tv;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d84/structast__tm.html">ast_tm</a> tm;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;   <span class="keywordtype">char</span> timebuf[80], etag[23];</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;   <span class="keywordtype">int</span> not_modified = 0;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a> != <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa74b1cb5c2ecb5e0bd9af5d46a7b78fd2">AST_HTTP_GET</a> &amp;&amp; <a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a> != <a class="code" href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efaf8da4e60a407fb100dd10e20929ea162">AST_HTTP_HEAD</a>) {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a>(ser, 501, <span class="stringliteral">&quot;Not Implemented&quot;</span>, <span class="stringliteral">&quot;Attempt to use unimplemented / unsupported method&quot;</span>);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;   }</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   <span class="comment">/* Yuck.  I&#39;m not really sold on this, but if you don&#39;t deliver static content it</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">    * makes your configuration substantially more challenging, but this seems like a</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">    * rather irritating feature creep on Asterisk.</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">    * XXX: It is not clear to me what this comment means or if it is any longer</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">    *      relevant. */</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(uri)) {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="keywordflow">goto</span> out403;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;   }</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;   <span class="comment">/* Disallow any funny filenames at all (checking first character only??) */</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;   <span class="keywordflow">if</span> ((uri[0] &lt; 33) || strchr(<span class="stringliteral">&quot;./|~@#$%^&amp;*() \t&quot;</span>, uri[0])) {</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      <span class="keywordflow">goto</span> out403;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;   }</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   <span class="keywordflow">if</span> (strstr(uri, <span class="stringliteral">&quot;/..&quot;</span>)) {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="keywordflow">goto</span> out403;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;   }</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   <span class="keywordflow">if</span> ((ftype = strrchr(uri, <span class="charliteral">&#39;.&#39;</span>))) {</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      ftype++;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;   }</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   <span class="keywordflow">if</span> (!(mtype = <a class="code" href="../../dd/d43/http_8c.html#a23c0584001722249f242fc66a3d33caf">ast_http_ftype2mtype</a>(ftype))) {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      snprintf(wkspace, <span class="keyword">sizeof</span>(wkspace), <span class="stringliteral">&quot;text/%s&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(ftype, <span class="stringliteral">&quot;plain&quot;</span>));</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      mtype = wkspace;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;   }</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;   <span class="comment">/* Cap maximum length */</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   <span class="keywordflow">if</span> ((len = strlen(uri) + strlen(<a class="code" href="../../dd/df2/paths_8h.html#a63af4213b5b83f717398d8d62008a50d">ast_config_AST_DATA_DIR</a>) + strlen(<span class="stringliteral">&quot;/static-http/&quot;</span>) + 5) &gt; 1024) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="keywordflow">goto</span> out403;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   }</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;   path = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(len);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   sprintf(path, <span class="stringliteral">&quot;%s/static-http/%s&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a63af4213b5b83f717398d8d62008a50d">ast_config_AST_DATA_DIR</a>, uri);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   <span class="keywordflow">if</span> (stat(path, &amp;st)) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <span class="keywordflow">goto</span> out404;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   }</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   <span class="keywordflow">if</span> (S_ISDIR(st.st_mode)) {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <span class="keywordflow">goto</span> out404;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   }</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;   <span class="keywordflow">if</span> (strstr(path, <span class="stringliteral">&quot;/private/&quot;</span>) &amp;&amp; !<a class="code" href="../../db/d45/manager_8h.html#acb49e15f3ae80cc0ee0cfa3a250d00c0">astman_is_authed</a>(<a class="code" href="../../dd/d43/http_8c.html#add40a4aab8126b7700387d428c830f18">ast_http_manid_from_vars</a>(headers))) {</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <span class="keywordflow">goto</span> out403;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   }</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   fd = open(path, O_RDONLY);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   <span class="keywordflow">if</span> (fd &lt; 0) {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">goto</span> out403;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <span class="comment">/* make &quot;Etag:&quot; http header value */</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   snprintf(etag, <span class="keyword">sizeof</span>(etag), <span class="stringliteral">&quot;\&quot;%ld\&quot;&quot;</span>, (<span class="keywordtype">long</span>)st.st_mtime);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   <span class="comment">/* make &quot;Last-Modified:&quot; http header value */</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   tv.tv_sec = st.st_mtime;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   tv.tv_usec = 0;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   <a class="code" href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a>(timebuf, <span class="keyword">sizeof</span>(timebuf), <span class="stringliteral">&quot;%a, %d %b %Y %H:%M:%S GMT&quot;</span>, <a class="code" href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a>(&amp;tv, &amp;tm, <span class="stringliteral">&quot;GMT&quot;</span>));</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   <span class="comment">/* check received &quot;If-None-Match&quot; request header and Etag value for file */</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;   <span class="keywordflow">for</span> (v = headers; v; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;If-None-Match&quot;</span>)) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, etag)) {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            not_modified = 1;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;         }</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      }</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   http_header = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(255);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;   <span class="keywordflow">if</span> (!http_header) {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#ab0286838ed2b93e0d77fe9d7af8a37b5">ast_http_request_close_on_completion</a>(ser);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a>(ser, 500, <span class="stringliteral">&quot;Server Error&quot;</span>, <span class="stringliteral">&quot;Out of memory&quot;</span>);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      close(fd);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   }</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;http_header, 0, <span class="stringliteral">&quot;Content-type: %s\r\n&quot;</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <span class="stringliteral">&quot;ETag: %s\r\n&quot;</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="stringliteral">&quot;Last-Modified: %s\r\n&quot;</span>,</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      mtype,</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      etag,</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      timebuf);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;   <span class="comment">/* ast_http_send() frees http_header, so we don&#39;t need to do it before returning */</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   <span class="keywordflow">if</span> (not_modified) {</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#a0448c9f4a66b6ee7994870b187e185b4">ast_http_send</a>(ser, <a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>, 304, <span class="stringliteral">&quot;Not Modified&quot;</span>, http_header, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, 1);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#a0448c9f4a66b6ee7994870b187e185b4">ast_http_send</a>(ser, <a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>, 200, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, http_header, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, fd, 1); <span class="comment">/* static content flag is set */</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   close(fd);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;out404:</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a>(ser, 404, <span class="stringliteral">&quot;Not Found&quot;</span>, <span class="stringliteral">&quot;The requested URL was not found on this server.&quot;</span>);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;out403:</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#ab0286838ed2b93e0d77fe9d7af8a37b5">ast_http_request_close_on_completion</a>(ser);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;   <a class="code" href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a>(ser, 403, <span class="stringliteral">&quot;Access Denied&quot;</span>, <span class="stringliteral">&quot;You do not have permission to access the requested URL.&quot;</span>);</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="http_8c_html_add40a4aab8126b7700387d428c830f18"><div class="ttname"><a href="../../dd/d43/http_8c.html#add40a4aab8126b7700387d428c830f18">ast_http_manid_from_vars</a></div><div class="ttdeci">uint32_t ast_http_manid_from_vars(struct ast_variable *headers)</div><div class="ttdoc">Return manager id, if exist, from request headers. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00217">http.c:217</a></div></div>
<div class="ttc" id="localtime_8h_html_ae9fbda728350a9a5b9c09b29214d718e"><div class="ttname"><a href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a></div><div class="ttdeci">struct ast_tm * ast_localtime(const struct timeval *timep, struct ast_tm *p_tm, const char *zone)</div><div class="ttdoc">Timezone-independent version of localtime_r(3). </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l01739">localtime.c:1739</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="manager_8h_html_acb49e15f3ae80cc0ee0cfa3a250d00c0"><div class="ttname"><a href="../../db/d45/manager_8h.html#acb49e15f3ae80cc0ee0cfa3a250d00c0">astman_is_authed</a></div><div class="ttdeci">int astman_is_authed(uint32_t ident)</div><div class="ttdoc">Determinie if a manager session ident is authenticated. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l07551">manager.c:7551</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a8b44a03925325ceaf2de7b079b1541a1"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a></div><div class="ttdeci">const char * method</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04335">res_pjsip.c:4335</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80efa74b1cb5c2ecb5e0bd9af5d46a7b78fd2"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efa74b1cb5c2ecb5e0bd9af5d46a7b78fd2">AST_HTTP_GET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00058">http.h:58</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="paths_8h_html_a63af4213b5b83f717398d8d62008a50d"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a63af4213b5b83f717398d8d62008a50d">ast_config_AST_DATA_DIR</a></div><div class="ttdeci">const char * ast_config_AST_DATA_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00158">options.c:158</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="http_8c_html_a3189f2c804f88ece5a83d4772e11ff9e"><div class="ttname"><a href="../../dd/d43/http_8c.html#a3189f2c804f88ece5a83d4772e11ff9e">mtype</a></div><div class="ttdeci">const char * mtype</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00148">http.c:148</a></div></div>
<div class="ttc" id="http_8c_html_ab0286838ed2b93e0d77fe9d7af8a37b5"><div class="ttname"><a href="../../dd/d43/http_8c.html#ab0286838ed2b93e0d77fe9d7af8a37b5">ast_http_request_close_on_completion</a></div><div class="ttdeci">void ast_http_request_close_on_completion(struct ast_tcptls_session_instance *ser)</div><div class="ttdoc">Request the HTTP connection be closed after this HTTP request. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00836">http.c:836</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="http_8c_html_a0448c9f4a66b6ee7994870b187e185b4"><div class="ttname"><a href="../../dd/d43/http_8c.html#a0448c9f4a66b6ee7994870b187e185b4">ast_http_send</a></div><div class="ttdeci">void ast_http_send(struct ast_tcptls_session_instance *ser, enum ast_http_method method, int status_code, const char *status_title, struct ast_str *http_header, struct ast_str *out, int fd, unsigned int static_content)</div><div class="ttdoc">Generic function for sending HTTP/1.1 response. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00456">http.c:456</a></div></div>
<div class="ttc" id="localtime_8h_html_aa8e63928b14a347bd3973d680b885f93"><div class="ttname"><a href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a></div><div class="ttdeci">int ast_strftime(char *buf, size_t len, const char *format, const struct ast_tm *tm)</div><div class="ttdoc">Special version of strftime(3) that handles fractions of a second. Takes the same arguments as strfti...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l02524">localtime.c:2524</a></div></div>
<div class="ttc" id="http_8h_html_a16fb43ed7e6093a9dc96477ba37b80efaf8da4e60a407fb100dd10e20929ea162"><div class="ttname"><a href="../../dd/d56/http_8h.html#a16fb43ed7e6093a9dc96477ba37b80efaf8da4e60a407fb100dd10e20929ea162">AST_HTTP_HEAD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/http_8h_source.html#l00060">http.h:60</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="http_8c_html_a6ab57c2e45049bd17a5cf6d0ce6e1ebe"><div class="ttname"><a href="../../dd/d43/http_8c.html#a6ab57c2e45049bd17a5cf6d0ce6e1ebe">ast_http_error</a></div><div class="ttdeci">void ast_http_error(struct ast_tcptls_session_instance *ser, int status_code, const char *status_title, const char *text)</div><div class="ttdoc">Send HTTP error message and close socket. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00648">http.c:648</a></div></div>
<div class="ttc" id="http_8c_html_a23c0584001722249f242fc66a3d33caf"><div class="ttname"><a href="../../dd/d43/http_8c.html#a23c0584001722249f242fc66a3d33caf">ast_http_ftype2mtype</a></div><div class="ttdeci">const char * ast_http_ftype2mtype(const char *ftype)</div><div class="ttdoc">Return mime type based on extension. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00203">http.c:203</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
<div class="ttc" id="structast__tm_html"><div class="ttname"><a href="../../d5/d84/structast__tm.html">ast_tm</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/deb/localtime_8h_source.html#l00035">localtime.h:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l02343">2343</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00030">ast_cli_unregister_multiple()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00705">ast_http_uri_unlink()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00843">AST_RWLIST_REMOVE_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00849">ast_tcptls_server_stop()</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00093">ast_tls_config::capath</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00089">ast_tls_config::certfile</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00091">ast_tls_config::cipher</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00088">ast_tls_config::enabled</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00111">http_tls_cfg</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00090">ast_tls_config::pvtfile</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00142">static_uri_enabled</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l00143">status_uri_enabled</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02374">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;{</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d02/structhttp__uri__redirect.html">http_uri_redirect</a> *redirect;</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(<a class="code" href="../../dd/d43/http_8c.html#a62ac5f089c743a2d4113e518818000fa">cli_http</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dd/d43/http_8c.html#a62ac5f089c743a2d4113e518818000fa">cli_http</a>));</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;   <a class="code" href="../../d4/ddf/tcptls_8h.html#a1fd4aa5038c9a488acc0f8017fe94fda">ast_tcptls_server_stop</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#aef37d79896cadcf96c364f8c5609fd2f">http_desc</a>);</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a>.<a class="code" href="../../d5/d90/structast__tls__config.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a>) {</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;      <a class="code" href="../../d4/ddf/tcptls_8h.html#a1fd4aa5038c9a488acc0f8017fe94fda">ast_tcptls_server_stop</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#ad04999a886797d6dfe4fc6f6742527f5">https_desc</a>);</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;   }</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a>.<a class="code" href="../../d5/d90/structast__tls__config.html#a333dffcec025fcdbee0676476f401685">certfile</a>);</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a>.<a class="code" href="../../d5/d90/structast__tls__config.html#a8331a8443119478cd6b1daeb707a94dc">capath</a>);</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a>.<a class="code" href="../../d5/d90/structast__tls__config.html#a6005f11af6a60f4169876fcd075595ca">pvtfile</a>);</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a>.<a class="code" href="../../d5/d90/structast__tls__config.html#a3d12e13733aa5172b5cb091fbf8ea478">cipher</a>);</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#a5e7930049dbf3967931097a8f62333d6">status_uri_enabled</a>) {</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#abc4e71c538d9c1ad56b8e4a2e46bed35">ast_http_uri_unlink</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#a8b7fe7f8acc26c737d74df3696250165">status_uri</a>);</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;   }</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d43/http_8c.html#ad15ea39a758fbebb32d28a1060107f2b">static_uri_enabled</a>) {</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;      <a class="code" href="../../dd/d43/http_8c.html#abc4e71c538d9c1ad56b8e4a2e46bed35">ast_http_uri_unlink</a>(&amp;<a class="code" href="../../dd/d43/http_8c.html#ac5bbe302426a5b211e0f2a2bed2e7a75">static_uri</a>);</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;   }</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>);</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;   <span class="keywordflow">while</span> ((redirect = <a class="code" href="../../df/d90/linkedlists_8h.html#a3d3aa4fb3b4ba38ad8d6d255d97e037c">AST_RWLIST_REMOVE_HEAD</a>(&amp;<a class="code" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>, <a class="code" href="../../d3/d96/structentry.html">entry</a>))) {</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirect);</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;   }</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>);</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;}</div><div class="ttc" id="structast__tls__config_html_a6005f11af6a60f4169876fcd075595ca"><div class="ttname"><a href="../../d5/d90/structast__tls__config.html#a6005f11af6a60f4169876fcd075595ca">ast_tls_config::pvtfile</a></div><div class="ttdeci">char * pvtfile</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00090">tcptls.h:90</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="http_8c_html_ad15ea39a758fbebb32d28a1060107f2b"><div class="ttname"><a href="../../dd/d43/http_8c.html#ad15ea39a758fbebb32d28a1060107f2b">static_uri_enabled</a></div><div class="ttdeci">static int static_uri_enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00142">http.c:142</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="http_8c_html_a62ac5f089c743a2d4113e518818000fa"><div class="ttname"><a href="../../dd/d43/http_8c.html#a62ac5f089c743a2d4113e518818000fa">cli_http</a></div><div class="ttdeci">static struct ast_cli_entry cli_http[]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l02339">http.c:2339</a></div></div>
<div class="ttc" id="http_8c_html_a5e7930049dbf3967931097a8f62333d6"><div class="ttname"><a href="../../dd/d43/http_8c.html#a5e7930049dbf3967931097a8f62333d6">status_uri_enabled</a></div><div class="ttdeci">static int status_uri_enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00143">http.c:143</a></div></div>
<div class="ttc" id="http_8c_html_abc4e71c538d9c1ad56b8e4a2e46bed35"><div class="ttname"><a href="../../dd/d43/http_8c.html#abc4e71c538d9c1ad56b8e4a2e46bed35">ast_http_uri_unlink</a></div><div class="ttdeci">void ast_http_uri_unlink(struct ast_http_uri *urih)</div><div class="ttdoc">Unregister a URI handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00705">http.c:705</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structuri__redirects_html"><div class="ttname"><a href="../../d6/dd5/structuri__redirects.html">uri_redirects</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00175">http.c:175</a></div></div>
<div class="ttc" id="http_8c_html_a1c80a21a7aa2d6eee02f11b48485a331"><div class="ttname"><a href="../../dd/d43/http_8c.html#a1c80a21a7aa2d6eee02f11b48485a331">http_tls_cfg</a></div><div class="ttdeci">static struct ast_tls_config http_tls_cfg</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00111">http.c:111</a></div></div>
<div class="ttc" id="http_8c_html_aef37d79896cadcf96c364f8c5609fd2f"><div class="ttname"><a href="../../dd/d43/http_8c.html#aef37d79896cadcf96c364f8c5609fd2f">http_desc</a></div><div class="ttdeci">static struct ast_tcptls_session_args http_desc</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00118">http.c:118</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3d3aa4fb3b4ba38ad8d6d255d97e037c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3d3aa4fb3b4ba38ad8d6d255d97e037c">AST_RWLIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00843">linkedlists.h:843</a></div></div>
<div class="ttc" id="structast__tls__config_html_a333dffcec025fcdbee0676476f401685"><div class="ttname"><a href="../../d5/d90/structast__tls__config.html#a333dffcec025fcdbee0676476f401685">ast_tls_config::certfile</a></div><div class="ttdeci">char * certfile</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00089">tcptls.h:89</a></div></div>
<div class="ttc" id="http_8c_html_ac5bbe302426a5b211e0f2a2bed2e7a75"><div class="ttname"><a href="../../dd/d43/http_8c.html#ac5bbe302426a5b211e0f2a2bed2e7a75">static_uri</a></div><div class="ttdeci">static struct ast_http_uri static_uri</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00430">http.c:430</a></div></div>
<div class="ttc" id="structhttp__uri__redirect_html"><div class="ttname"><a href="../../db/d02/structhttp__uri__redirect.html">http_uri_redirect</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00169">http.c:169</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structast__tls__config_html_a8331a8443119478cd6b1daeb707a94dc"><div class="ttname"><a href="../../d5/d90/structast__tls__config.html#a8331a8443119478cd6b1daeb707a94dc">ast_tls_config::capath</a></div><div class="ttdeci">char * capath</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00093">tcptls.h:93</a></div></div>
<div class="ttc" id="tcptls_8h_html_a1fd4aa5038c9a488acc0f8017fe94fda"><div class="ttname"><a href="../../d4/ddf/tcptls_8h.html#a1fd4aa5038c9a488acc0f8017fe94fda">ast_tcptls_server_stop</a></div><div class="ttdeci">void ast_tcptls_server_stop(struct ast_tcptls_session_args *desc)</div><div class="ttdoc">Shutdown a running server if there is one. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9b/tcptls_8c_source.html#l00849">tcptls.c:849</a></div></div>
<div class="ttc" id="http_8c_html_ad04999a886797d6dfe4fc6f6742527f5"><div class="ttname"><a href="../../dd/d43/http_8c.html#ad04999a886797d6dfe4fc6f6742527f5">https_desc</a></div><div class="ttdeci">static struct ast_tcptls_session_args https_desc</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00128">http.c:128</a></div></div>
<div class="ttc" id="http_8c_html_a8b7fe7f8acc26c737d74df3696250165"><div class="ttname"><a href="../../dd/d43/http_8c.html#a8b7fe7f8acc26c737d74df3696250165">status_uri</a></div><div class="ttdeci">static struct ast_http_uri status_uri</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00421">http.c:421</a></div></div>
<div class="ttc" id="structast__tls__config_html_a3d12e13733aa5172b5cb091fbf8ea478"><div class="ttname"><a href="../../d5/d90/structast__tls__config.html#a3d12e13733aa5172b5cb091fbf8ea478">ast_tls_config::cipher</a></div><div class="ttdeci">char * cipher</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00091">tcptls.h:91</a></div></div>
<div class="ttc" id="structast__tls__config_html_a03e6cca0c879c0443efb431c30c14f76"><div class="ttname"><a href="../../d5/d90/structast__tls__config.html#a03e6cca0c879c0443efb431c30c14f76">ast_tls_config::enabled</a></div><div class="ttdeci">int enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00088">tcptls.h:88</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a835b27a90d895a488e4e14cc3d2dee8c">AST_MODFLAG_GLOBAL_SYMBOLS</a> | <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Built-<a class="el" href="../../da/d7c/utils_2frame_8h.html#aca392a8d3941cd0740aef3ad92545d67">in</a> HTTP Server&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .reload = reload_module, .load_pri = AST_MODPRI_CORE, .requires = &quot;extconfig&quot;, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l02388">2388</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

</div>
</div>
<a id="a8db57df0d65cdcb49f817ba20f1addfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8db57df0d65cdcb49f817ba20f1addfc">&#9670;&nbsp;</a></span>ast_http_methods_text</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../d8/d9e/structast__cfhttp__methods__text.html">ast_cfhttp_methods_text</a>  ast_http_methods_text[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l00190">ast_get_http_method()</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l02388">2388</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

</div>
</div>
<a id="a62ac5f089c743a2d4113e518818000fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62ac5f089c743a2d4113e518818000fa">&#9670;&nbsp;</a></span>cli_http</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> cli_http[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   { .handler =  <a class="code" href="../../dd/d43/http_8c.html#abd384ccb6510fda645ef76636af6642a">handle_show_http</a> , .summary =  <span class="stringliteral">&quot;Display HTTP server status&quot;</span> ,},</div><div class="line">}</div><div class="ttc" id="http_8c_html_abd384ccb6510fda645ef76636af6642a"><div class="ttname"><a href="../../dd/d43/http_8c.html#abd384ccb6510fda645ef76636af6642a">handle_show_http</a></div><div class="ttdeci">static char * handle_show_http(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l02279">http.c:2279</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l02339">2339</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

</div>
</div>
<a id="af9b32121c4ad80b0887a3d73fd24de5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9b32121c4ad80b0887a3d73fd24de5f">&#9670;&nbsp;</a></span>ext</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ext</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00147">147</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d4e/chan__console_8c_source.html#l00680">ast_ext_ctx()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00203">ast_http_ftype2mtype()</a>, <a class="el" href="../../df/dfb/media__cache_8c_source.html#l00285">ast_media_cache_create_or_update()</a>, <a class="el" href="../../df/dfb/media__cache_8c_source.html#l00197">ast_media_cache_retrieve()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07200">ast_rtp_interpret()</a>, <a class="el" href="../../df/dfb/media__cache_8c_source.html#l00150">bucket_file_update_path()</a>, <a class="el" href="../../d3/d4e/chan__console_8c_source.html#l00802">cli_console_dial()</a>, <a class="el" href="../../dc/d04/app__chanspy_8c_source.html#l00892">common_exec()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l05121">dahdi_call()</a>, <a class="el" href="../../d0/de2/app__directory_8c_source.html#l00768">do_directory()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00514">filehelper()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l01075">filename_parse()</a>, <a class="el" href="../../dd/d9a/pbx__config_8c_source.html#l00809">handle_cli_dialplan_save()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l00395">hintdevice_hash_cb()</a>, <a class="el" href="../../d3/d74/stored_8c_source.html#l00135">is_recording()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00074">json_array_from_list()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06554">misdn_call()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07855">misdn_request()</a>, <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00624">ooh323_request()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l05339">pbx_load_config()</a>, <a class="el" href="../../dd/d9a/pbx__config_8c_source.html#l01977">pbx_load_users()</a>, <a class="el" href="../../d0/d85/pval_8c_source.html#l05527">pvalGotoSetTarget()</a>, <a class="el" href="../../de/dfe/media__index_8c_source.html#l00510">read_dirs_cb()</a>, <a class="el" href="../../dd/dd5/app__record_8c_source.html#l00221">record_exec()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l02209">register_exten()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l08860">register_peer_exten()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03522">rtp_add_candidates_to_ice()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04891">rtp_raw_write()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l00735">set_rec_filename()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l30793">sip_request_call()</a>, and <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l02234">unregister_exten()</a>.</p>

</div>
</div>
<a id="aef37d79896cadcf96c364f8c5609fd2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef37d79896cadcf96c364f8c5609fd2f">&#9670;&nbsp;</a></span>http_desc</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../da/d2b/structast__tcptls__session__args.html">ast_tcptls_session_args</a> http_desc</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>we have up to two accepting threads, one for http, one for https </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00118">118</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

</div>
</div>
<a id="a5086e142ada070c22242a51c58f3da4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5086e142ada070c22242a51c58f3da4a">&#9670;&nbsp;</a></span>http_server_name</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char http_server_name[<a class="el" href="../../dd/d43/http_8c.html#af5c7bcd09f0d5f4bb9e09bd401130b95">MAX_SERVER_NAME_LENGTH</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00104">104</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00567">ast_http_create_response()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00456">ast_http_send()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l02279">handle_show_http()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l00368">httpstatus_callback()</a>.</p>

</div>
</div>
<a id="a1c80a21a7aa2d6eee02f11b48485a331"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c80a21a7aa2d6eee02f11b48485a331">&#9670;&nbsp;</a></span>http_tls_cfg</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d5/d90/structast__tls__config.html">ast_tls_config</a> http_tls_cfg</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00111">111</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l02279">handle_show_http()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00368">httpstatus_callback()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l02343">unload_module()</a>.</p>

</div>
</div>
<a id="ad04999a886797d6dfe4fc6f6742527f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad04999a886797d6dfe4fc6f6742527f5">&#9670;&nbsp;</a></span>https_desc</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../da/d2b/structast__tcptls__session__args.html">ast_tcptls_session_args</a> https_desc</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00128">128</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

</div>
</div>
<a id="ac966dd481c59b05f2c113dc4365d72f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac966dd481c59b05f2c113dc4365d72f6">&#9670;&nbsp;</a></span>mimetypes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }   mimetypes[]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Limit the kinds of files we're willing to serve up. </p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l00203">ast_http_ftype2mtype()</a>.</p>

</div>
</div>
<a id="a3189f2c804f88ece5a83d4772e11ff9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3189f2c804f88ece5a83d4772e11ff9e">&#9670;&nbsp;</a></span>mtype</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* mtype</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00148">148</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l00240">static_callback()</a>.</p>

</div>
</div>
<a id="a6f25bc812d09fedb86bf394c01061c56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f25bc812d09fedb86bf394c01061c56">&#9670;&nbsp;</a></span>prefix</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char prefix[<a class="el" href="../../d0/d0c/res__statsd_8c.html#aecb32037d29b6d4c9d903ba03b56f065">MAX_PREFIX</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d7/d80/_2usr_2src_2asterisk-18_85_80_2include_2asterisk_2strings_8h-example.html#a9">/usr/src/asterisk-18.5.0/include/asterisk/strings.h</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00141">141</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>, <a class="el" href="../../d1/d02/app__if_8c_source.html#l00179">_if_exec()</a>, <a class="el" href="../../d0/d8e/app__while_8c_source.html#l00197">_while_exec()</a>, <a class="el" href="../../d0/da6/aoc_8c_source.html#l01511">aoc_d_event()</a>, <a class="el" href="../../d0/da6/aoc_8c_source.html#l01560">aoc_e_event()</a>, <a class="el" href="../../d0/da6/aoc_8c_source.html#l01443">aoc_s_event()</a>, <a class="el" href="../../d0/dad/location_8c_source.html#l00081">aor_deleted_observer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00094">ast_begins_with()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00457">ast_db_deltree()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00531">ast_db_gettree()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00571">ast_db_gettree_by_prefix()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00233">ast_http_prefix()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00673">ast_http_uri_link()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l03143">ast_remotecontrol()</a>, <a class="el" href="../../d0/dad/location_8c_source.html#l00219">ast_sip_location_retrieve_aor_contacts_nolock_filtered()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l02162">console_print()</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01009">exec_clearhash()</a>, <a class="el" href="../../d9/d63/res__pjsip__config__wizard_8c_source.html#l00533">handle_auth()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00725">handle_cli_database_show()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l02279">handle_show_http()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01401">handle_uri()</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01114">hashkeys_read()</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01145">hashkeys_read2()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00368">httpstatus_callback()</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00607">process_config()</a>, <a class="el" href="../../d1/d3f/func__global_8c_source.html#l00148">shared_read()</a>, <a class="el" href="../../d1/d3f/func__global_8c_source.html#l00209">shared_write()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l01240">sip_options_apply_aor_configuration()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21842">sip_show_settings()</a>, <a class="el" href="../../d8/dce/res__sorcery__astdb_8c_source.html#l00066">sorcery_astdb_create()</a>, <a class="el" href="../../d8/dce/res__sorcery__astdb_8c_source.html#l00384">sorcery_astdb_delete()</a>, <a class="el" href="../../d8/dce/res__sorcery__astdb_8c_source.html#l00135">sorcery_astdb_retrieve_fields_common()</a>, <a class="el" href="../../d8/dce/res__sorcery__astdb_8c_source.html#l00191">sorcery_astdb_retrieve_id()</a>, <a class="el" href="../../d8/dce/res__sorcery__astdb_8c_source.html#l00278">sorcery_astdb_retrieve_regex()</a>, <a class="el" href="../../d8/dce/res__sorcery__astdb_8c_source.html#l00368">sorcery_astdb_update()</a>, <a class="el" href="../../d2/dea/res__sorcery__config_8c_source.html#l00236">sorcery_config_retrieve_prefix()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l01404">sorcery_memory_cache_retrieve_prefix()</a>, <a class="el" href="../../d8/db9/test_8c_source.html#l00300">test_xml_entry()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l01064">update_scoreboard()</a>, and <a class="el" href="../../d0/d8e/app__while_8c_source.html#l00319">while_continue_exec()</a>.</p>

</div>
</div>
<a id="a7aa5af3eb4d501b0c44c590507f751e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7aa5af3eb4d501b0c44c590507f751e8">&#9670;&nbsp;</a></span>session_count</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int session_count = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00109">109</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d60/res__fax_8c_source.html#l04273">cli_fax_show_sessions()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01937">httpd_helper_thread()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01751">is_media_state_valid()</a>, and <a class="el" href="../../d0/d60/res__fax_8c_source.html#l04349">manager_fax_sessions()</a>.</p>

</div>
</div>
<a id="a7fca7b13ef64698410758fcd096c048b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fca7b13ef64698410758fcd096c048b">&#9670;&nbsp;</a></span>session_inactivity</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int session_inactivity = <a class="el" href="../../dd/d43/http_8c.html#a8418419ee998a4151ff9d2d3e61694b1">DEFAULT_SESSION_INACTIVITY</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00107">107</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l01937">httpd_helper_thread()</a>.</p>

</div>
</div>
<a id="ad49ee0814a6efb14658ec87f2f6a86fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad49ee0814a6efb14658ec87f2f6a86fb">&#9670;&nbsp;</a></span>session_keep_alive</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int session_keep_alive = <a class="el" href="../../dd/d43/http_8c.html#aa35c8da693177f283276e6250ab2ea61">DEFAULT_SESSION_KEEP_ALIVE</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00108">108</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00456">ast_http_send()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l01937">httpd_helper_thread()</a>.</p>

</div>
</div>
<a id="af9b90c23264e36e6492a2eb8598c9bf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9b90c23264e36e6492a2eb8598c9bf0">&#9670;&nbsp;</a></span>session_limit</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int session_limit = <a class="el" href="../../dd/d43/http_8c.html#afe0d8ae0cb8f0a0e291943ce1140c766">DEFAULT_SESSION_LIMIT</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00106">106</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l01937">httpd_helper_thread()</a>.</p>

</div>
</div>
<a id="ac5bbe302426a5b211e0f2a2bed2e7a75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5bbe302426a5b211e0f2a2bed2e7a75">&#9670;&nbsp;</a></span>static_uri</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a> static_uri</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00430">430</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

</div>
</div>
<a id="ad15ea39a758fbebb32d28a1060107f2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad15ea39a758fbebb32d28a1060107f2b">&#9670;&nbsp;</a></span>static_uri_enabled</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int static_uri_enabled</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00142">142</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l02343">unload_module()</a>.</p>

</div>
</div>
<a id="a8b7fe7f8acc26c737d74df3696250165"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b7fe7f8acc26c737d74df3696250165">&#9670;&nbsp;</a></span>status_uri</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/d6c/structast__http__uri.html">ast_http_uri</a> status_uri</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00421">421</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

</div>
</div>
<a id="a5e7930049dbf3967931097a8f62333d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e7930049dbf3967931097a8f62333d6">&#9670;&nbsp;</a></span>status_uri_enabled</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int status_uri_enabled</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d43/http_8c_source.html#l00143">143</a> of file <a class="el" href="../../dd/d43/http_8c_source.html">http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l02343">unload_module()</a>.</p>

</div>
</div>
<a id="a2c6fa5595c4deca7f0f058a1e03d007f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c6fa5595c4deca7f0f058a1e03d007f">&#9670;&nbsp;</a></span>uri_redirects</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a>   <a class="el" href="../../d6/dd5/structuri__redirects.html">uri_redirects</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1ae2c5e2dfda054fa60ed7a905fee59c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ae2c5e2dfda054fa60ed7a905fee59c">&#9670;&nbsp;</a></span>uris</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/ddf/structuris.html">uris</a>   <a class="el" href="../../db/ddf/structuris.html">uris</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>list of supported handlers </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:45:59 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
