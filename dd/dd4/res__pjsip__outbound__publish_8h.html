<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: res_pjsip_outbound_publish.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_6d4b1cdb59e2db6ad82005b337288fef.html">asterisk</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">res_pjsip_outbound_publish.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../df/d90/linkedlists_8h_source.html">asterisk/linkedlists.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for res_pjsip_outbound_publish.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/ddb/res__pjsip__outbound__publish_8h__incl.png" border="0" usemap="#res__pjsip__outbound__publish_8h" alt=""/></div>
<map name="res__pjsip__outbound__publish_8h" id="res__pjsip__outbound__publish_8h">
<area shape="rect" id="node2" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="345,95,496,121"/>
<area shape="rect" id="node3" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="364,169,477,196"/>
<area shape="rect" id="node5" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="113,244,176,271"/>
<area shape="rect" id="node6" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="106,319,253,345"/>
<area shape="rect" id="node9" href="../../d3/dda/backtrace_8h.html" title="Asterisk backtrace generation. " alt="" coords="488,244,639,271"/>
<area shape="rect" id="node10" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="663,244,789,271"/>
<area shape="rect" id="node11" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="813,244,956,271"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/d3e/res__pjsip__outbound__publish_8h__dep__incl.png" border="0" usemap="#res__pjsip__outbound__publish_8hdep" alt=""/></div>
<map name="res__pjsip__outbound__publish_8hdep" id="res__pjsip__outbound__publish_8hdep">
<area shape="rect" id="node2" href="../../d2/d3d/res__pjsip__exten__state_8c.html" title="res_pjsip_exten_state.c" alt="" coords="5,102,177,129"/>
<area shape="rect" id="node3" href="../../df/d3a/res__pjsip__outbound__publish_8c.html" title="res_pjsip_outbound\l_publish.c" alt="" coords="202,95,349,136"/>
<area shape="rect" id="node4" href="../../dc/d7a/res__pjsip__publish__asterisk_8c.html" title="res_pjsip_publish_asterisk.c" alt="" coords="373,102,572,129"/>
</map>
</div>
</div>
<p><a href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callbacks that event publisher handlers will define.  <a href="../../de/d7d/structast__sip__event__publisher__handler.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0161add0b2a4e7baeb8c5765f22235f0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h.html#a0161add0b2a4e7baeb8c5765f22235f0">ast_sip_publish_client_add_datastore</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client, struct <a class="el" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore)</td></tr>
<tr class="memdesc:a0161add0b2a4e7baeb8c5765f22235f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a datastore to a SIP event publisher.  <a href="#a0161add0b2a4e7baeb8c5765f22235f0">More...</a><br /></td></tr>
<tr class="separator:a0161add0b2a4e7baeb8c5765f22235f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b50ad87195f077e1adfd02bd92bfe93"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h.html#a8b50ad87195f077e1adfd02bd92bfe93">ast_sip_publish_client_alloc_datastore</a> (const struct <a class="el" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> *info, const char *uid)</td></tr>
<tr class="memdesc:a8b50ad87195f077e1adfd02bd92bfe93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alternative for <a class="el" href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc()</a>  <a href="#a8b50ad87195f077e1adfd02bd92bfe93">More...</a><br /></td></tr>
<tr class="separator:a8b50ad87195f077e1adfd02bd92bfe93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefd7c57ffa48b8af08a6037348cc8051"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h.html#aefd7c57ffa48b8af08a6037348cc8051">ast_sip_publish_client_get</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:aefd7c57ffa48b8af08a6037348cc8051"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find a publish client using its name.  <a href="#aefd7c57ffa48b8af08a6037348cc8051">More...</a><br /></td></tr>
<tr class="separator:aefd7c57ffa48b8af08a6037348cc8051"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8dca3a60f8f4b4be12867de93989b85"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h.html#ac8dca3a60f8f4b4be12867de93989b85">ast_sip_publish_client_get_datastore</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:ac8dca3a60f8f4b4be12867de93989b85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve an event publisher datastore.  <a href="#ac8dca3a60f8f4b4be12867de93989b85">More...</a><br /></td></tr>
<tr class="separator:ac8dca3a60f8f4b4be12867de93989b85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a807976be434e855d4a6a404b33868954"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h.html#a807976be434e855d4a6a404b33868954">ast_sip_publish_client_get_from_uri</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client)</td></tr>
<tr class="memdesc:a807976be434e855d4a6a404b33868954"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the From URI the client will use.  <a href="#a807976be434e855d4a6a404b33868954">More...</a><br /></td></tr>
<tr class="separator:a807976be434e855d4a6a404b33868954"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6841edd064587ba1c1a2111edb051e9"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h.html#ac6841edd064587ba1c1a2111edb051e9">ast_sip_publish_client_get_to_uri</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client)</td></tr>
<tr class="memdesc:ac6841edd064587ba1c1a2111edb051e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the To URI the client will use.  <a href="#ac6841edd064587ba1c1a2111edb051e9">More...</a><br /></td></tr>
<tr class="separator:ac6841edd064587ba1c1a2111edb051e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a918109b62bf7506dead242df9686010b"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h.html#a918109b62bf7506dead242df9686010b">ast_sip_publish_client_get_user_from_uri</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client, const char *<a class="el" href="../../d8/dbc/structuser.html">user</a>, char *uri, size_t size)</td></tr>
<tr class="memdesc:a918109b62bf7506dead242df9686010b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the From URI the client will use for a specific user.  <a href="#a918109b62bf7506dead242df9686010b">More...</a><br /></td></tr>
<tr class="separator:a918109b62bf7506dead242df9686010b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedc1967055783ff865e4ba43c667f82f"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h.html#aedc1967055783ff865e4ba43c667f82f">ast_sip_publish_client_get_user_to_uri</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client, const char *<a class="el" href="../../d8/dbc/structuser.html">user</a>, char *uri, size_t size)</td></tr>
<tr class="memdesc:aedc1967055783ff865e4ba43c667f82f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the To URI the client will use for a specific user.  <a href="#aedc1967055783ff865e4ba43c667f82f">More...</a><br /></td></tr>
<tr class="separator:aedc1967055783ff865e4ba43c667f82f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ef92d9357070459c8d976bde50de446"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h.html#a9ef92d9357070459c8d976bde50de446">ast_sip_publish_client_remove</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client, const char *<a class="el" href="../../d8/dbc/structuser.html">user</a>)</td></tr>
<tr class="memdesc:a9ef92d9357070459c8d976bde50de446"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove the user from the client (stopping it from publishing)  <a href="#a9ef92d9357070459c8d976bde50de446">More...</a><br /></td></tr>
<tr class="separator:a9ef92d9357070459c8d976bde50de446"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0370232b5fce85a4edb5b940f0cc1019"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h.html#a0370232b5fce85a4edb5b940f0cc1019">ast_sip_publish_client_remove_datastore</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:a0370232b5fce85a4edb5b940f0cc1019"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a publication datastore from an event publisher.  <a href="#a0370232b5fce85a4edb5b940f0cc1019">More...</a><br /></td></tr>
<tr class="separator:a0370232b5fce85a4edb5b940f0cc1019"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fc13fb50475b59d055cbec2d8ece47c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h.html#a4fc13fb50475b59d055cbec2d8ece47c">ast_sip_publish_client_send</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client, const struct <a class="el" href="../../d5/d80/structast__sip__body.html">ast_sip_body</a> *body)</td></tr>
<tr class="memdesc:a4fc13fb50475b59d055cbec2d8ece47c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send an outgoing PUBLISH message using a client.  <a href="#a4fc13fb50475b59d055cbec2d8ece47c">More...</a><br /></td></tr>
<tr class="separator:a4fc13fb50475b59d055cbec2d8ece47c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa296a0da93960abee1c4e84efb6130fc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h.html#aa296a0da93960abee1c4e84efb6130fc">ast_sip_publish_client_user_send</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client, const char *<a class="el" href="../../d8/dbc/structuser.html">user</a>, const struct <a class="el" href="../../d5/d80/structast__sip__body.html">ast_sip_body</a> *body)</td></tr>
<tr class="memdesc:aa296a0da93960abee1c4e84efb6130fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send an outgoing PUBLISH message based on the user.  <a href="#aa296a0da93960abee1c4e84efb6130fc">More...</a><br /></td></tr>
<tr class="separator:aa296a0da93960abee1c4e84efb6130fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8898d2239bd93b0949c090b451a8d196"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h.html#a8898d2239bd93b0949c090b451a8d196">ast_sip_register_event_publisher_handler</a> (struct <a class="el" href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a> *<a class="el" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>)</td></tr>
<tr class="memdesc:a8898d2239bd93b0949c090b451a8d196"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register an event publisher handler.  <a href="#a8898d2239bd93b0949c090b451a8d196">More...</a><br /></td></tr>
<tr class="separator:a8898d2239bd93b0949c090b451a8d196"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19a9158e2cabc358e93d877e0b8b8b03"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h.html#a19a9158e2cabc358e93d877e0b8b8b03">ast_sip_unregister_event_publisher_handler</a> (struct <a class="el" href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a> *<a class="el" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>)</td></tr>
<tr class="memdesc:a19a9158e2cabc358e93d877e0b8b8b03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a publish handler.  <a href="#a19a9158e2cabc358e93d877e0b8b8b03">More...</a><br /></td></tr>
<tr class="separator:a19a9158e2cabc358e93d877e0b8b8b03"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a0161add0b2a4e7baeb8c5765f22235f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0161add0b2a4e7baeb8c5765f22235f0">&#9670;&nbsp;</a></span>ast_sip_publish_client_add_datastore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_publish_client_add_datastore </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *&#160;</td>
          <td class="paramname"><em>datastore</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a datastore to a SIP event publisher. </p>
<p>Note that SIP uses reference counted datastores. The datastore passed into this function must have been allocated using <a class="el" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc()</a> or there will be serious problems.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The publication client to add the datastore to </td></tr>
    <tr><td class="paramname">datastore</td><td>The datastore to be added to the subscription </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00724">724</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01549">ao2_link</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00232">ast_sip_outbound_publish_client::datastores</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00071">ast_datastore::info</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d9/db6/datastore_8h_source.html#l00069">ast_datastore::uid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00322">asterisk_start_devicestate_publishing()</a>, and <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00401">asterisk_start_mwi_publishing()</a>.</p>
<div class="fragment"><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;{</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(datastore != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a03ea21247b5d39b165343431b44131f1">info</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a2daadcdbac635c83b7bfc6375b4c9be4">uid</a>));</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a>(client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#abc32956d82e246471f4e5edbb3dda759">datastores</a>, datastore)) {</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;   }</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;}</div><div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__datastore_html_a2daadcdbac635c83b7bfc6375b4c9be4"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a2daadcdbac635c83b7bfc6375b4c9be4">ast_datastore::uid</a></div><div class="ttdeci">const char * uid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00069">datastore.h:69</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__datastore_html_a03ea21247b5d39b165343431b44131f1"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a03ea21247b5d39b165343431b44131f1">ast_datastore::info</a></div><div class="ttdeci">const struct ast_datastore_info * info</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00071">datastore.h:71</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_abc32956d82e246471f4e5edbb3dda759"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#abc32956d82e246471f4e5edbb3dda759">ast_sip_outbound_publish_client::datastores</a></div><div class="ttdeci">struct ao2_container * datastores</div><div class="ttdoc">Publisher datastores set up by handlers. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00232">res_pjsip_outbound_publish.c:232</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1ad9f122bcae95a470639402faa3d2ee"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a></div><div class="ttdeci">#define ao2_link(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01549">astobj2.h:1549</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b50ad87195f077e1adfd02bd92bfe93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b50ad87195f077e1adfd02bd92bfe93">&#9670;&nbsp;</a></span>ast_sip_publish_client_alloc_datastore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d5d/structast__datastore.html">ast_datastore</a>* ast_sip_publish_client_alloc_datastore </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>uid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Alternative for <a class="el" href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc()</a> </p>
<p>There are two major differences between this and <a class="el" href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc()</a> 1) This allocates a refcounted object 2) This will fill in a uid if one is not provided</p>
<p>DO NOT call <a class="el" href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14" title="Free a data store object. ">ast_datastore_free()</a> on a datastore allocated in this way since that function will attempt to free the datastore rather than play nicely with its refcount.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">info</td><td>Callbacks for datastore </td></tr>
    <tr><td class="paramname">uid</td><td>Identifier for datastore </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>Failed to allocate datastore </td></tr>
    <tr><td class="paramname">non-NULL</td><td>Newly allocated datastore </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00694">694</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../df/da9/uuid_8c_source.html#l00143">ast_uuid_generate_str()</a>, <a class="el" href="../../dd/d1d/uuid_8h_source.html#l00027">AST_UUID_STR_LEN</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00680">sip_outbound_publish_datastore_destroy()</a>, and <a class="el" href="../../d9/db6/datastore_8h_source.html#l00069">ast_datastore::uid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00322">asterisk_start_devicestate_publishing()</a>, and <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00401">asterisk_start_mwi_publishing()</a>.</p>
<div class="fragment"><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;{</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *, datastore, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *uid_ptr = uid;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   <span class="keywordtype">char</span> uuid_buf[<a class="code" href="../../dd/d1d/uuid_8h.html#a127408e53d34dca0c589a099fabf1e13">AST_UUID_STR_LEN</a>];</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   <span class="keywordflow">if</span> (!info) {</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   }</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   datastore = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*datastore), <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a468bb04658c3183f5d2e7acb85819a5e">sip_outbound_publish_datastore_destroy</a>);</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;   <span class="keywordflow">if</span> (!datastore) {</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   }</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   datastore-&gt;info = <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(uid)) {</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <span class="comment">/* They didn&#39;t provide an ID so we&#39;ll provide one ourself */</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      uid_ptr = <a class="code" href="../../dd/d1d/uuid_8h.html#abe6d0b550cd9a54964e7891960d1e5bc">ast_uuid_generate_str</a>(uuid_buf, <span class="keyword">sizeof</span>(uuid_buf));</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;   }</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;   datastore-&gt;uid = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(uid_ptr);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   <span class="keywordflow">if</span> (!datastore-&gt;uid) {</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;   }</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(datastore, +1);</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;   <span class="keywordflow">return</span> datastore;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;}</div><div class="ttc" id="uuid_8h_html_a127408e53d34dca0c589a099fabf1e13"><div class="ttname"><a href="../../dd/d1d/uuid_8h.html#a127408e53d34dca0c589a099fabf1e13">AST_UUID_STR_LEN</a></div><div class="ttdeci">#define AST_UUID_STR_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d1d/uuid_8h_source.html#l00027">uuid.h:27</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a468bb04658c3183f5d2e7acb85819a5e"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a468bb04658c3183f5d2e7acb85819a5e">sip_outbound_publish_datastore_destroy</a></div><div class="ttdeci">static void sip_outbound_publish_datastore_destroy(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00680">res_pjsip_outbound_publish.c:680</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="uuid_8h_html_abe6d0b550cd9a54964e7891960d1e5bc"><div class="ttname"><a href="../../dd/d1d/uuid_8h.html#abe6d0b550cd9a54964e7891960d1e5bc">ast_uuid_generate_str</a></div><div class="ttdeci">char * ast_uuid_generate_str(char *buf, size_t size)</div><div class="ttdoc">Generate a UUID string. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/da9/uuid_8c_source.html#l00143">uuid.c:143</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aefd7c57ffa48b8af08a6037348cc8051"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefd7c57ffa48b8af08a6037348cc8051">&#9670;&nbsp;</a></span>ast_sip_publish_client_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a>* ast_sip_publish_client_get </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find a publish client using its name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the publish client</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>failure </td></tr>
    <tr><td class="paramname">non-NULL</td><td>success</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The publish client is returned with its reference count increased and must be released using ao2_cleanup. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00528">528</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00242">ast_sip_outbound_publish_state::client</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00514">sip_publish_state_get()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00559">asterisk_publication_devicestate_refresh()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00650">asterisk_publication_mwi_refresh()</a>, and <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00741">send_refresh_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;{</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a> *<a class="code" href="../../d4/d88/structstate.html">state</a> = <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a12f73c896443f8205a405b0a795d709f">sip_publish_state_get</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;   <span class="keywordflow">if</span> (!state) {</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;   }</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>, +1);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(state, -1);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;   <span class="keywordflow">return</span> state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;}</div><div class="ttc" id="structast__sip__outbound__publish__state_html_a5592324b65dd693db5308f4d96e85edf"><div class="ttname"><a href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">ast_sip_outbound_publish_state::client</a></div><div class="ttdeci">struct ast_sip_outbound_publish_client * client</div><div class="ttdoc">Outbound publish client. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00242">res_pjsip_outbound_publish.c:242</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__state_html"><div class="ttname"><a href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a></div><div class="ttdoc">Outbound publish state information (persists for lifetime of a publish) </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00240">res_pjsip_outbound_publish.c:240</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a12f73c896443f8205a405b0a795d709f"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a12f73c896443f8205a405b0a795d709f">sip_publish_state_get</a></div><div class="ttdeci">static struct ast_sip_outbound_publish_state * sip_publish_state_get(const char *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00514">res_pjsip_outbound_publish.c:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac8dca3a60f8f4b4be12867de93989b85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8dca3a60f8f4b4be12867de93989b85">&#9670;&nbsp;</a></span>ast_sip_publish_client_get_datastore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d5d/structast__datastore.html">ast_datastore</a>* ast_sip_publish_client_get_datastore </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve an event publisher datastore. </p>
<p>The datastore retrieved will have its reference count incremented. When the caller is done with the datastore, the reference counted needs to be decremented using <a class="el" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The publication client from which to retrieve the datastore </td></tr>
    <tr><td class="paramname">name</td><td>The name of the datastore to retrieve </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>Failed to find the specified datastore </td></tr>
    <tr><td class="paramname">non-NULL</td><td>The specified datastore </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00737">737</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00232">ast_sip_outbound_publish_client::datastores</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00559">asterisk_publication_devicestate_refresh()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00650">asterisk_publication_mwi_refresh()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00374">asterisk_stop_devicestate_publishing()</a>, and <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00452">asterisk_stop_mwi_publishing()</a>.</p>
<div class="fragment"><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;{</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#abc32956d82e246471f4e5edbb3dda759">datastores</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>);</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_abc32956d82e246471f4e5edbb3dda759"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#abc32956d82e246471f4e5edbb3dda759">ast_sip_outbound_publish_client::datastores</a></div><div class="ttdeci">struct ao2_container * datastores</div><div class="ttdoc">Publisher datastores set up by handlers. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00232">res_pjsip_outbound_publish.c:232</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a807976be434e855d4a6a404b33868954"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a807976be434e855d4a6a404b33868954">&#9670;&nbsp;</a></span>ast_sip_publish_client_get_from_uri()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_sip_publish_client_get_from_uri </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the From URI the client will use. </p>
<dl class="section since"><dt>Since</dt><dd>14.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The publication client to get the From URI</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">From-uri</td><td>on success </td></tr>
    <tr><td class="paramname">Empty-string</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00541">541</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00206">sip_outbound_publisher::client</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::from_uri</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">ast_sip_outbound_publish_client::publish</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00241">publish</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::server_uri</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01085">sip_outbound_publish_client_add_publisher()</a>.</p>
<div class="fragment"><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;{</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a> = client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a>;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aa7c8f021112adf97deb38ba0c3f5595f">from_uri</a>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a9f4106ac09bd7c29f7fd3e4165b960ca">server_uri</a>, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;}</div><div class="ttc" id="res__corosync_8c_html_aa4002959b64099e84d20e09e38c2e51e"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a></div><div class="ttdeci">unsigned char publish</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00241">res_corosync.c:241</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a></div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00170">res_pjsip_outbound_publish.c:170</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_a9f4106ac09bd7c29f7fd3e4165b960ca"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#a9f4106ac09bd7c29f7fd3e4165b960ca">ast_sip_outbound_publish::server_uri</a></div><div class="ttdeci">const ast_string_field server_uri</div><div class="ttdoc">URI for the entity and server. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">res_pjsip_outbound_publish.c:187</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_aceaa60ac7eead8542c88ab531ce8e13c"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">ast_sip_outbound_publish_client::publish</a></div><div class="ttdeci">struct ast_sip_outbound_publish * publish</div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">res_pjsip_outbound_publish.c:230</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_aa7c8f021112adf97deb38ba0c3f5595f"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#aa7c8f021112adf97deb38ba0c3f5595f">ast_sip_outbound_publish::from_uri</a></div><div class="ttdeci">const ast_string_field from_uri</div><div class="ttdoc">URI for the From header. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">res_pjsip_outbound_publish.c:187</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac6841edd064587ba1c1a2111edb051e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6841edd064587ba1c1a2111edb051e9">&#9670;&nbsp;</a></span>ast_sip_publish_client_get_to_uri()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_sip_publish_client_get_to_uri </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the To URI the client will use. </p>
<dl class="section since"><dt>Since</dt><dd>14.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The publication client to get the To URI</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">From-uri</td><td>on success </td></tr>
    <tr><td class="paramname">Empty-string</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00591">591</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">ast_sip_outbound_publish_client::publish</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00241">publish</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::server_uri</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::to_uri</a>.</p>
<div class="fragment"><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;{</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a> = client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a>;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aefbf78be3e0926162efdb9da3c8ce3ab">to_uri</a>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a9f4106ac09bd7c29f7fd3e4165b960ca">server_uri</a>, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;}</div><div class="ttc" id="res__corosync_8c_html_aa4002959b64099e84d20e09e38c2e51e"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a></div><div class="ttdeci">unsigned char publish</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00241">res_corosync.c:241</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a></div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00170">res_pjsip_outbound_publish.c:170</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_a9f4106ac09bd7c29f7fd3e4165b960ca"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#a9f4106ac09bd7c29f7fd3e4165b960ca">ast_sip_outbound_publish::server_uri</a></div><div class="ttdeci">const ast_string_field server_uri</div><div class="ttdoc">URI for the entity and server. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">res_pjsip_outbound_publish.c:187</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_aceaa60ac7eead8542c88ab531ce8e13c"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">ast_sip_outbound_publish_client::publish</a></div><div class="ttdeci">struct ast_sip_outbound_publish * publish</div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">res_pjsip_outbound_publish.c:230</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_aefbf78be3e0926162efdb9da3c8ce3ab"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#aefbf78be3e0926162efdb9da3c8ce3ab">ast_sip_outbound_publish::to_uri</a></div><div class="ttdeci">const ast_string_field to_uri</div><div class="ttdoc">URI for the To header. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">res_pjsip_outbound_publish.c:187</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a918109b62bf7506dead242df9686010b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a918109b62bf7506dead242df9686010b">&#9670;&nbsp;</a></span>ast_sip_publish_client_get_user_from_uri()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_sip_publish_client_get_user_from_uri </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the From URI the client will use for a specific user. </p>
<dl class="section since"><dt>Since</dt><dd>14.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The publication client to get the From URI of a user </td></tr>
    <tr><td class="paramname">user</td><td>The user to retrieve the From URI for </td></tr>
    <tr><td class="paramname">uri</td><td>A buffer to place the URI into </td></tr>
    <tr><td class="paramname">size</td><td>The size of the buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">From-uri</td><td>on success </td></tr>
    <tr><td class="paramname">Empty-string</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00575">575</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00208">sip_outbound_publisher::from_uri</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00551">sip_outbound_publish_client_get_publisher()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00619">exten_state_publisher_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;{</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *publisher;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   publisher = <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#accea5ae19549158c46949a82179df9d3">sip_outbound_publish_client_get_publisher</a>(client, <a class="code" href="../../d8/dbc/structuser.html">user</a>);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   <span class="keywordflow">if</span> (!publisher) {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;   }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(uri, publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a06c3771afa0dcaff49f544ee5c4fb588">from_uri</a>, size);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   <span class="keywordflow">return</span> uri;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_accea5ae19549158c46949a82179df9d3"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#accea5ae19549158c46949a82179df9d3">sip_outbound_publish_client_get_publisher</a></div><div class="ttdeci">static struct sip_outbound_publisher * sip_outbound_publish_client_get_publisher(struct ast_sip_outbound_publish_client *client, const char *user)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00551">res_pjsip_outbound_publish.c:551</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_a06c3771afa0dcaff49f544ee5c4fb588"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#a06c3771afa0dcaff49f544ee5c4fb588">sip_outbound_publisher::from_uri</a></div><div class="ttdeci">char * from_uri</div><div class="ttdoc">The From URI for this specific publisher. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00208">res_pjsip_outbound_publish.c:208</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00198">res_pjsip_outbound_publish.c:198</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aedc1967055783ff865e4ba43c667f82f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedc1967055783ff865e4ba43c667f82f">&#9670;&nbsp;</a></span>ast_sip_publish_client_get_user_to_uri()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_sip_publish_client_get_user_to_uri </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the To URI the client will use for a specific user. </p>
<dl class="section since"><dt>Since</dt><dd>14.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The publication client to get the To URI of a user </td></tr>
    <tr><td class="paramname">user</td><td>The user to retrieve the To URI for </td></tr>
    <tr><td class="paramname">uri</td><td>A buffer to place the URI into </td></tr>
    <tr><td class="paramname">size</td><td>The size of the buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">To-uri</td><td>on success </td></tr>
    <tr><td class="paramname">Empty-string</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00598">598</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00551">sip_outbound_publish_client_get_publisher()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00210">sip_outbound_publisher::to_uri</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00619">exten_state_publisher_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;{</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *publisher;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   publisher = <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#accea5ae19549158c46949a82179df9d3">sip_outbound_publish_client_get_publisher</a>(client, <a class="code" href="../../d8/dbc/structuser.html">user</a>);</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;   <span class="keywordflow">if</span> (!publisher) {</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;   }</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(uri, publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#ac3b3aa4c20470116b0bc804a5df1d9ee">to_uri</a>, size);</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   <span class="keywordflow">return</span> uri;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_ac3b3aa4c20470116b0bc804a5df1d9ee"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#ac3b3aa4c20470116b0bc804a5df1d9ee">sip_outbound_publisher::to_uri</a></div><div class="ttdeci">char * to_uri</div><div class="ttdoc">The To URI for this specific publisher. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00210">res_pjsip_outbound_publish.c:210</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_accea5ae19549158c46949a82179df9d3"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#accea5ae19549158c46949a82179df9d3">sip_outbound_publish_client_get_publisher</a></div><div class="ttdeci">static struct sip_outbound_publisher * sip_outbound_publish_client_get_publisher(struct ast_sip_outbound_publish_client *client, const char *user)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00551">res_pjsip_outbound_publish.c:551</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00198">res_pjsip_outbound_publish.c:198</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9ef92d9357070459c8d976bde50de446"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ef92d9357070459c8d976bde50de446">&#9670;&nbsp;</a></span>ast_sip_publish_client_remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_publish_client_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>user</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove the user from the client (stopping it from publishing) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The publication client </td></tr>
    <tr><td class="paramname">user</td><td>The user to remove </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01125">1125</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00255">load_lock</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01048">OBJ_NODATA</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01043">OBJ_UNLINK</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00234">ast_sip_outbound_publish_client::publishers</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00597">SCOPED_WRLOCK</a>.</p>
<div class="fragment"><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;{</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a79bf74a5170fe5967176ef1e73002e8b">SCOPED_WRLOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;<a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a25cf316b20bd47aef1b5dbda389d12b9">load_lock</a>);</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#adb838b688e98c705b8668af938b5f85a">publishers</a>, <a class="code" href="../../d8/dbc/structuser.html">user</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>);</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;}</div><div class="ttc" id="res__pjsip__outbound__publish_8c_html_a25cf316b20bd47aef1b5dbda389d12b9"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a25cf316b20bd47aef1b5dbda389d12b9">load_lock</a></div><div class="ttdeci">static ast_rwlock_t load_lock</div><div class="ttdoc">Used for locking while loading/reloading. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00255">res_pjsip_outbound_publish.c:255</a></div></div>
<div class="ttc" id="lock_8h_html_a79bf74a5170fe5967176ef1e73002e8b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a79bf74a5170fe5967176ef1e73002e8b">SCOPED_WRLOCK</a></div><div class="ttdeci">#define SCOPED_WRLOCK(varname, lock)</div><div class="ttdoc">scoped lock specialization for write locks </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00597">lock.h:597</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01048">astobj2.h:1048</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01043">astobj2.h:1043</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_adb838b688e98c705b8668af938b5f85a"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#adb838b688e98c705b8668af938b5f85a">ast_sip_outbound_publish_client::publishers</a></div><div class="ttdeci">struct ao2_container * publishers</div><div class="ttdoc">Container of all the client publishing objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00234">res_pjsip_outbound_publish.c:234</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0370232b5fce85a4edb5b940f0cc1019"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0370232b5fce85a4edb5b940f0cc1019">&#9670;&nbsp;</a></span>ast_sip_publish_client_remove_datastore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_publish_client_remove_datastore </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove a publication datastore from an event publisher. </p>
<p>This operation may cause the datastore's <a class="el" href="../../da/dfd/gsm__destroy_8c.html#aafde19f7d36ca163a143579c1b125b6d">free()</a> callback to be called if the reference count reaches zero.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The publication client to remove the datastore from </td></tr>
    <tr><td class="paramname">name</td><td>The name of the datastore to remove </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00743">743</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00232">ast_sip_outbound_publish_client::datastores</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01048">OBJ_NODATA</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01043">OBJ_UNLINK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00322">asterisk_start_devicestate_publishing()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00401">asterisk_start_mwi_publishing()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00374">asterisk_stop_devicestate_publishing()</a>, and <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00452">asterisk_stop_mwi_publishing()</a>.</p>
<div class="fragment"><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;{</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#abc32956d82e246471f4e5edbb3dda759">datastores</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>);</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01048">astobj2.h:1048</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01043">astobj2.h:1043</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_abc32956d82e246471f4e5edbb3dda759"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#abc32956d82e246471f4e5edbb3dda759">ast_sip_outbound_publish_client::datastores</a></div><div class="ttdeci">struct ao2_container * datastores</div><div class="ttdoc">Publisher datastores set up by handlers. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00232">res_pjsip_outbound_publish.c:232</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fc13fb50475b59d055cbec2d8ece47c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc13fb50475b59d055cbec2d8ece47c">&#9670;&nbsp;</a></span>ast_sip_publish_client_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_publish_client_send </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d5/d80/structast__sip__body.html">ast_sip_body</a> *&#160;</td>
          <td class="paramname"><em>body</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send an outgoing PUBLISH message using a client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The publication client to send from </td></tr>
    <tr><td class="paramname">body</td><td>An optional body to add to the PUBLISH</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>failure </td></tr>
    <tr><td class="paramname">0</td><td>success </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00842">842</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01743">ao2_callback_data</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01048">OBJ_NODATA</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00796">publisher_client_send()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00234">ast_sip_outbound_publish_client::publishers</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00602">SCOPED_AO2LOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00173">asterisk_publisher_devstate_cb()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00232">asterisk_publisher_mwistate_cb()</a>, and <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00741">send_refresh_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;{</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, client);</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a63fd831fe48aed32d3ef992ad8e45293">ao2_callback_data</a>(client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#adb838b688e98c705b8668af938b5f85a">publishers</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>,</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;           <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeb36f6fc22f2185a5606263a3745a2c8">publisher_client_send</a>, (<span class="keywordtype">void</span> *)body, &amp;res);</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;}</div><div class="ttc" id="res__pjsip__outbound__publish_8c_html_aeb36f6fc22f2185a5606263a3745a2c8"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeb36f6fc22f2185a5606263a3745a2c8">publisher_client_send</a></div><div class="ttdeci">static int publisher_client_send(void *obj, void *arg, void *data, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00796">res_pjsip_outbound_publish.c:796</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01048">astobj2.h:1048</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_a63fd831fe48aed32d3ef992ad8e45293"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a63fd831fe48aed32d3ef992ad8e45293">ao2_callback_data</a></div><div class="ttdeci">#define ao2_callback_data(container, flags, cb_fn, arg, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01743">astobj2.h:1743</a></div></div>
<div class="ttc" id="lock_8h_html_a2cfb325ed371eb6e629446bac4676e9f"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a></div><div class="ttdeci">#define SCOPED_AO2LOCK(varname, obj)</div><div class="ttdoc">scoped lock specialization for ao2 mutexes. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00602">lock.h:602</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_adb838b688e98c705b8668af938b5f85a"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#adb838b688e98c705b8668af938b5f85a">ast_sip_outbound_publish_client::publishers</a></div><div class="ttdeci">struct ao2_container * publishers</div><div class="ttdoc">Container of all the client publishing objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00234">res_pjsip_outbound_publish.c:234</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa296a0da93960abee1c4e84efb6130fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa296a0da93960abee1c4e84efb6130fc">&#9670;&nbsp;</a></span>ast_sip_publish_client_user_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_publish_client_user_send </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d5/d80/structast__sip__body.html">ast_sip_body</a> *&#160;</td>
          <td class="paramname"><em>body</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send an outgoing PUBLISH message based on the user. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The publication client to send from </td></tr>
    <tr><td class="paramname">user</td><td>The user to send to </td></tr>
    <tr><td class="paramname">body</td><td>An optional body to add to the PUBLISH</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>failure </td></tr>
    <tr><td class="paramname">0</td><td>success </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01109">1109</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00796">publisher_client_send()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00551">sip_outbound_publish_client_get_publisher()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00619">exten_state_publisher_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;{</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *publisher;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;   publisher = <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#accea5ae19549158c46949a82179df9d3">sip_outbound_publish_client_get_publisher</a>(client, <a class="code" href="../../d8/dbc/structuser.html">user</a>);</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;   <span class="keywordflow">if</span> (!publisher) {</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;   }</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;   <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeb36f6fc22f2185a5606263a3745a2c8">publisher_client_send</a>(publisher, (<span class="keywordtype">void</span> *)body, &amp;res, 0);</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;}</div><div class="ttc" id="res__pjsip__outbound__publish_8c_html_aeb36f6fc22f2185a5606263a3745a2c8"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeb36f6fc22f2185a5606263a3745a2c8">publisher_client_send</a></div><div class="ttdeci">static int publisher_client_send(void *obj, void *arg, void *data, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00796">res_pjsip_outbound_publish.c:796</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_accea5ae19549158c46949a82179df9d3"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#accea5ae19549158c46949a82179df9d3">sip_outbound_publish_client_get_publisher</a></div><div class="ttdeci">static struct sip_outbound_publisher * sip_outbound_publish_client_get_publisher(struct ast_sip_outbound_publish_client *client, const char *user)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00551">res_pjsip_outbound_publish.c:551</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00198">res_pjsip_outbound_publish.c:198</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8898d2239bd93b0949c090b451a8d196"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8898d2239bd93b0949c090b451a8d196">&#9670;&nbsp;</a></span>ast_sip_register_event_publisher_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_register_event_publisher_handler </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a> *&#160;</td>
          <td class="paramname"><em>handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register an event publisher handler. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Handler was registered successfully </td></tr>
    <tr><td class="paramname">non-zero</td><td>Handler was not registered successfully </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00614">614</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00043">ast_sip_event_publisher_handler::event_name</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00350">find_publisher_handler_for_event_name()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00581">SCOPED_LOCK</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00470">sip_outbound_publish_synchronize()</a>, <a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00054">ast_sip_event_publisher_handler::start_publishing</a>, <a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00064">ast_sip_event_publisher_handler::stop_publishing</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00345">sub_add_handler()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00960">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;{</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a> *existing;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;<a class="code" href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>);</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   <span class="keywordflow">if</span> (!handler-&gt;<a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html#a37bc14558569a05a854d7b4f7d2d58ce">start_publishing</a> || !handler-&gt;<a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html#afd18a36401e176aa953c43a7e8a9c836">stop_publishing</a>) {</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Handler does not implement required callbacks. Cannot register\n&quot;</span>);</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(handler-&gt;<a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html#aeccf279e6fca0e5f8536fdf76c838728">event_name</a>)) {</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;No event package specified for event publisher handler. Cannot register\n&quot;</span>);</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   }</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   existing = <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeea9ed171992fb252a3ae3c70e1e6f15">find_publisher_handler_for_event_name</a>(handler-&gt;<a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html#aeccf279e6fca0e5f8536fdf76c838728">event_name</a>);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   <span class="keywordflow">if</span> (existing) {</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to register event publisher handler for event %s. &quot;</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            <span class="stringliteral">&quot;A handler is already registered\n&quot;</span>, handler-&gt;<a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html#aeccf279e6fca0e5f8536fdf76c838728">event_name</a>);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   }</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;   <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a1a73dd176f879a093de29f61e684d881">sub_add_handler</a>(handler);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2a2485b09b24a61b64b6d5295946f031">sip_outbound_publish_synchronize</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structast__sip__event__publisher__handler_html_a37bc14558569a05a854d7b4f7d2d58ce"><div class="ttname"><a href="../../de/d7d/structast__sip__event__publisher__handler.html#a37bc14558569a05a854d7b4f7d2d58ce">ast_sip_event_publisher_handler::start_publishing</a></div><div class="ttdeci">int(* start_publishing)(struct ast_sip_outbound_publish *configuration, struct ast_sip_outbound_publish_client *client)</div><div class="ttdoc">Called when a publisher should start publishing. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00054">res_pjsip_outbound_publish.h:54</a></div></div>
<div class="ttc" id="structpublisher__handlers_html"><div class="ttname"><a href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00343">res_pjsip_outbound_publish.c:343</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__sip__event__publisher__handler_html_afd18a36401e176aa953c43a7e8a9c836"><div class="ttname"><a href="../../de/d7d/structast__sip__event__publisher__handler.html#afd18a36401e176aa953c43a7e8a9c836">ast_sip_event_publisher_handler::stop_publishing</a></div><div class="ttdeci">int(* stop_publishing)(struct ast_sip_outbound_publish_client *client)</div><div class="ttdoc">Called when a publisher should stop publishing. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00064">res_pjsip_outbound_publish.h:64</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__sip__event__publisher__handler_html"><div class="ttname"><a href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a></div><div class="ttdoc">Callbacks that event publisher handlers will define. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00041">res_pjsip_outbound_publish.h:41</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="structast__sip__event__publisher__handler_html_aeccf279e6fca0e5f8536fdf76c838728"><div class="ttname"><a href="../../de/d7d/structast__sip__event__publisher__handler.html#aeccf279e6fca0e5f8536fdf76c838728">ast_sip_event_publisher_handler::event_name</a></div><div class="ttdeci">const char * event_name</div><div class="ttdoc">The name of the event this handler deals with. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00043">res_pjsip_outbound_publish.h:43</a></div></div>
<div class="ttc" id="lock_8h_html_a8b9d9f2f2c41ecf3c70587c2510dddfc"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a></div><div class="ttdeci">#define SCOPED_LOCK(varname, lock, lockfunc, unlockfunc)</div><div class="ttdoc">Scoped Locks. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00581">lock.h:581</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_aeea9ed171992fb252a3ae3c70e1e6f15"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeea9ed171992fb252a3ae3c70e1e6f15">find_publisher_handler_for_event_name</a></div><div class="ttdeci">static struct ast_sip_event_publisher_handler * find_publisher_handler_for_event_name(const char *event_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00350">res_pjsip_outbound_publish.c:350</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a1a73dd176f879a093de29f61e684d881"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a1a73dd176f879a093de29f61e684d881">sub_add_handler</a></div><div class="ttdeci">static void sub_add_handler(struct ast_sip_event_publisher_handler *handler)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00345">res_pjsip_outbound_publish.c:345</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a2a2485b09b24a61b64b6d5295946f031"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2a2485b09b24a61b64b6d5295946f031">sip_outbound_publish_synchronize</a></div><div class="ttdeci">static void sip_outbound_publish_synchronize(struct ast_sip_event_publisher_handler *removed)</div><div class="ttdoc">Helper function which starts or stops publish clients when applicable. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00470">res_pjsip_outbound_publish.c:470</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a19a9158e2cabc358e93d877e0b8b8b03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19a9158e2cabc358e93d877e0b8b8b03">&#9670;&nbsp;</a></span>ast_sip_unregister_event_publisher_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_unregister_event_publisher_handler </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a> *&#160;</td>
          <td class="paramname"><em>handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister a publish handler. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00641">641</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00569">AST_RWLIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00131">sip_outbound_publish_message::next</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00581">SCOPED_LOCK</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00470">sip_outbound_publish_synchronize()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00862">load_module()</a>, and <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00942">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;{</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a> *iter;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;<a class="code" href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>);</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a>, iter, <a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html#a1f11c56c9ea6e8e88dddb687ef4b8861">next</a>) {</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <span class="keywordflow">if</span> (handler == iter) {</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a>(<a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html#a1f11c56c9ea6e8e88dddb687ef4b8861">next</a>);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      }</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;   }</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2a2485b09b24a61b64b6d5295946f031">sip_outbound_publish_synchronize</a>(handler);</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structpublisher__handlers_html"><div class="ttname"><a href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00343">res_pjsip_outbound_publish.c:343</a></div></div>
<div class="ttc" id="structast__sip__event__publisher__handler_html"><div class="ttname"><a href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a></div><div class="ttdoc">Callbacks that event publisher handlers will define. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00041">res_pjsip_outbound_publish.h:41</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="structast__sip__event__publisher__handler_html_a1f11c56c9ea6e8e88dddb687ef4b8861"><div class="ttname"><a href="../../de/d7d/structast__sip__event__publisher__handler.html#a1f11c56c9ea6e8e88dddb687ef4b8861">ast_sip_event_publisher_handler::next</a></div><div class="ttdeci">struct ast_sip_event_publisher_handler * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00066">res_pjsip_outbound_publish.h:66</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a02212548652c9eb0f3db38dc4e4bd285"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00569">linkedlists.h:569</a></div></div>
<div class="ttc" id="lock_8h_html_a8b9d9f2f2c41ecf3c70587c2510dddfc"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a></div><div class="ttdeci">#define SCOPED_LOCK(varname, lock, lockfunc, unlockfunc)</div><div class="ttdoc">Scoped Locks. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00581">lock.h:581</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a2a2485b09b24a61b64b6d5295946f031"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2a2485b09b24a61b64b6d5295946f031">sip_outbound_publish_synchronize</a></div><div class="ttdeci">static void sip_outbound_publish_synchronize(struct ast_sip_event_publisher_handler *removed)</div><div class="ttdoc">Helper function which starts or stops publish clients when applicable. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00470">res_pjsip_outbound_publish.c:470</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:31 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
