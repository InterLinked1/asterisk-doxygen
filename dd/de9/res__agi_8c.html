<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: res_agi.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_7b47cca4d318623bb4270ab1fb592ef5.html">res</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">res_agi.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>AGI - the Asterisk Gateway Interface.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;sys/time.h&gt;</code><br />
<code>#include &lt;sys/wait.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../dd/df2/paths_8h_source.html">asterisk/paths.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d94/network_8h_source.html">asterisk/network.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d4d/file_8h_source.html">asterisk/file.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/de0/pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d4a/astdb_8h_source.html">asterisk/astdb.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d47/callerid_8h_source.html">asterisk/callerid.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db0/cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/db2/image_8h_source.html">asterisk/image.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/dce/say_8h_source.html">asterisk/say.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html">asterisk/app.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d08/dsp_8h_source.html">asterisk/dsp.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d07/musiconhold_8h_source.html">asterisk/musiconhold.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d42/lock_8h_source.html">asterisk/lock.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d90/strings_8h_source.html">asterisk/strings.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d45/manager_8h_source.html">asterisk/manager.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/db9/ast__version_8h_source.html">asterisk/ast_version.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/dd7/speech_8h_source.html">asterisk/speech.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d45/term_8h_source.html">asterisk/term.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d99/xmldoc_8h_source.html">asterisk/xmldoc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/srv_8h_source.html">asterisk/srv.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/ddc/test_8h_source.html">asterisk/test.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/df1/netsock2_8h_source.html">asterisk/netsock2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d4a/stasis__channels_8h_source.html">asterisk/stasis_channels.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d25/stasis__message__router_8h_source.html">asterisk/stasis_message_router.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d1c/format__cache_8h_source.html">asterisk/format_cache.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d2b/agi_8h_source.html">asterisk/agi.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for res_agi.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d41/res__agi_8c__incl.png" border="0" usemap="#res__agi_8c" alt=""/></div>
<map name="res__agi_8c" id="res__agi_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="211,87,295,114"/>
<area shape="rect" id="node12" href="../../dd/df2/paths_8h.html" title="Asterisk file paths, configured in asterisk.conf. " alt="" coords="887,87,1011,114"/>
<area shape="rect" id="node13" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="1003,319,1141,345"/>
<area shape="rect" id="node23" href="../../d2/d4d/file_8h.html" title="Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. " alt="" coords="2123,169,2229,196"/>
<area shape="rect" id="node25" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1569,169,1708,196"/>
<area shape="rect" id="node26" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1487,319,1601,345"/>
<area shape="rect" id="node27" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1581,244,1696,271"/>
<area shape="rect" id="node28" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="2915,319,3045,345"/>
<area shape="rect" id="node29" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="2366,87,2477,114"/>
<area shape="rect" id="node30" href="../../d1/d99/xmldoc_8h.html" title="Asterisk XML Documentation API. " alt="" coords="3018,169,3153,196"/>
<area shape="rect" id="node31" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="1359,169,1495,196"/>
<area shape="rect" id="node32" href="../../de/d4a/astdb_8h.html" title="Persistant data storage (akin to *doze registry) " alt="" coords="1857,87,1981,114"/>
<area shape="rect" id="node33" href="../../de/d47/callerid_8h.html" title="CallerID (and other GR30) management and generation Includes code and algorithms from the Zapata libr..." alt="" coords="2005,87,2139,114"/>
<area shape="rect" id="node34" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="3756,169,3857,196"/>
<area shape="rect" id="node35" href="../../d5/db2/image_8h.html" title="General Asterisk channel definitions for image handling. " alt="" coords="2213,87,2341,114"/>
<area shape="rect" id="node36" href="../../db/dce/say_8h.html" title="Say numbers and dates (maybe words one day too) " alt="" coords="1725,87,1833,114"/>
<area shape="rect" id="node37" href="../../d3/d93/include_2asterisk_2app_8h.html" title="Application convenience functions, designed to give consistent look and feel to Asterisk apps..." alt="" coords="2501,87,2613,114"/>
<area shape="rect" id="node38" href="../../d3/d08/dsp_8h.html" title="Convenient Signal Processing routines. " alt="" coords="2638,87,2749,114"/>
<area shape="rect" id="node39" href="../../dc/d07/musiconhold_8h.html" title="Music on hold handling. " alt="" coords="2773,87,2942,114"/>
<area shape="rect" id="node40" href="../../db/d45/manager_8h.html" title="The AMI &#45; Asterisk Manager Interface &#45; is a TCP protocol created to manage Asterisk with third&#45;party ..." alt="" coords="1138,87,1283,114"/>
<area shape="rect" id="node41" href="../../d5/db9/ast__version_8h.html" title="Asterisk version information. " alt="" coords="3018,87,3179,114"/>
<area shape="rect" id="node42" href="../../d6/dd7/speech_8h.html" title="Generic Speech Recognition API. " alt="" coords="3203,87,3338,114"/>
<area shape="rect" id="node43" href="../../db/d45/term_8h.html" title="Handy terminal functions for vt* terms. " alt="" coords="3362,87,3481,114"/>
<area shape="rect" id="node44" href="../../d5/d60/srv_8h.html" title="Support for DNS SRV records, used in to locate SIP services. " alt="" coords="3505,87,3612,114"/>
<area shape="rect" id="node45" href="../../d2/ddc/test_8h.html" title="Test Framework API. " alt="" coords="3818,87,3931,114"/>
<area shape="rect" id="node46" href="../../db/df1/netsock2_8h.html" title="Network socket handling. " alt="" coords="569,319,716,345"/>
<area shape="rect" id="node47" href="../../d9/d4a/stasis__channels_8h.html" title="asterisk/stasis_channels.h" alt="" coords="1511,87,1700,114"/>
<area shape="rect" id="node48" href="../../d4/d25/stasis__message__router_8h.html" title="asterisk/stasis_message\l_router.h" alt="" coords="3956,80,4135,121"/>
<area shape="rect" id="node49" href="../../db/d1c/format__cache_8h.html" title="Media Format Cache API. " alt="" coords="4159,87,4335,114"/>
<area shape="rect" id="node50" href="../../dc/d2b/agi_8h.html" title="AGI Extension interfaces &#45; Asterisk Gateway Interface. " alt="" coords="3687,87,3793,114"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="5,169,160,196"/>
<area shape="rect" id="node4" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="185,169,322,196"/>
<area shape="rect" id="node5" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="346,169,481,196"/>
</map>
</div>
</div>
<p><a href="../../dd/de9/res__agi_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/db1/structagi__cmd.html">agi_cmd</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/de8/structagi__commands.html">agi_commands</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aac3502538abd25c04158ea6d06c182d6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#aac3502538abd25c04158ea6d06c182d6">AGI_BUF_INITSIZE</a>&#160;&#160;&#160;256</td></tr>
<tr class="separator:aac3502538abd25c04158ea6d06c182d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acac9c67d43a9e0d04c732fc06665f6dd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#acac9c67d43a9e0d04c732fc06665f6dd">AGI_BUF_LEN</a>&#160;&#160;&#160;2048</td></tr>
<tr class="separator:acac9c67d43a9e0d04c732fc06665f6dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2bed8203ffc925f64cf3b48cd3a2910"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#aa2bed8203ffc925f64cf3b48cd3a2910">AGI_BUF_SIZE</a>&#160;&#160;&#160;1024</td></tr>
<tr class="separator:aa2bed8203ffc925f64cf3b48cd3a2910"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafc38adf75f284d5cf7e6f11a55bb29f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#aafc38adf75f284d5cf7e6f11a55bb29f">AGI_NANDFS_RETRY</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:aafc38adf75f284d5cf7e6f11a55bb29f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc5c6270557bf6ddf0ddf1952d9c600a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#acc5c6270557bf6ddf0ddf1952d9c600a">AGI_PORT</a>&#160;&#160;&#160;4573</td></tr>
<tr class="separator:acc5c6270557bf6ddf0ddf1952d9c600a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bf7e6988af21440def19908daafd708"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a1bf7e6988af21440def19908daafd708">AMI_BUF_SIZE</a>&#160;&#160;&#160;2048</td></tr>
<tr class="separator:a1bf7e6988af21440def19908daafd708"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a805616595a796949ade4a78edc628f99"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a805616595a796949ade4a78edc628f99">AST_API_MODULE</a></td></tr>
<tr class="separator:a805616595a796949ade4a78edc628f99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fcc4663e437ae0fd8b0d388050c2559"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a5fcc4663e437ae0fd8b0d388050c2559">ASYNC_AGI_BREAK</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:a5fcc4663e437ae0fd8b0d388050c2559"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b35d7eb31c6eba73c2e1fb493621d7c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a7b35d7eb31c6eba73c2e1fb493621d7c">MAX_AGI_CONNECT</a>&#160;&#160;&#160;2000</td></tr>
<tr class="separator:a7b35d7eb31c6eba73c2e1fb493621d7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29b7451465deac204c5f7cb1f9c6e1fc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a29b7451465deac204c5f7cb1f9c6e1fc">MAX_ARGS</a>&#160;&#160;&#160;128</td></tr>
<tr class="separator:a29b7451465deac204c5f7cb1f9c6e1fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eb73c104b484cf18752169509cebfe2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a1eb73c104b484cf18752169509cebfe2">MAX_CMD_LEN</a>&#160;&#160;&#160;80</td></tr>
<tr class="separator:a1eb73c104b484cf18752169509cebfe2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca50e62ba80a3860828c9a45c65e171c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#aca50e62ba80a3860828c9a45c65e171c">SRV_PREFIX</a>&#160;&#160;&#160;&quot;_agi._tcp.&quot;</td></tr>
<tr class="separator:aca50e62ba80a3860828c9a45c65e171c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af528891ceae298f0adb4f75de973e843"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#af528891ceae298f0adb4f75de973e843">TONE_BLOCK_SIZE</a>&#160;&#160;&#160;200</td></tr>
<tr class="separator:af528891ceae298f0adb4f75de973e843"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:abf2ce6b2eb38d1067cfda4f19081f5b1"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a> { <br />
&#160;&#160;<a class="el" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a> = -1, 
<a class="el" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8">AGI_RESULT_SUCCESS</a>, 
<a class="el" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1aac30d4ae19361cc243414b0ec32cbb78">AGI_RESULT_SUCCESS_FAST</a>, 
<a class="el" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a97eab5e05f42bf8b5da0575a67e10d7c">AGI_RESULT_SUCCESS_ASYNC</a>, 
<br />
&#160;&#160;<a class="el" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1ac0f8286bb33122eee66cbe710f3f5ada">AGI_RESULT_NOTFOUND</a>, 
<a class="el" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a3efef4607e59ada98318f948f398d8fe">AGI_RESULT_HANGUP</a>
<br />
 }</td></tr>
<tr class="separator:abf2ce6b2eb38d1067cfda4f19081f5b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac0e0031a3312b986f52c97a9f9222f9c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ac0e0031a3312b986f52c97a9f9222f9c">__init_agi_buf</a> (void)</td></tr>
<tr class="separator:ac0e0031a3312b986f52c97a9f9222f9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa22a76ef4f33c70bc5f7099136a30727"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#aa22a76ef4f33c70bc5f7099136a30727">action_add_agi_cmd</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="memdesc:aa22a76ef4f33c70bc5f7099136a30727"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a new command to execute by the Async AGI application.  <a href="#aa22a76ef4f33c70bc5f7099136a30727">More...</a><br /></td></tr>
<tr class="separator:aa22a76ef4f33c70bc5f7099136a30727"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76d81c59eb3c123fe6e6c483b410394d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a76d81c59eb3c123fe6e6c483b410394d">add_agi_cmd</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *cmd_buff, const char *cmd_id)</td></tr>
<tr class="separator:a76d81c59eb3c123fe6e6c483b410394d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9383e938a35233f3b55a3c93a1e8ccca"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a9383e938a35233f3b55a3c93a1e8ccca">add_to_agi</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</td></tr>
<tr class="separator:a9383e938a35233f3b55a3c93a1e8ccca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9d9a3d50a3f090631ea19ef8ff9871b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#af9d9a3d50a3f090631ea19ef8ff9871b">agi_async_end_to_ami</a> (struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:af9d9a3d50a3f090631ea19ef8ff9871b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add52df81dc56b4b3b009e82dcdaf5cbd"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#add52df81dc56b4b3b009e82dcdaf5cbd">agi_async_exec_to_ami</a> (struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:add52df81dc56b4b3b009e82dcdaf5cbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa331556f90c1e5963ce69038e78f6d06"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#aa331556f90c1e5963ce69038e78f6d06">agi_async_start_to_ami</a> (struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:aa331556f90c1e5963ce69038e78f6d06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6ec2aaaa7422892fcf24c44ffc3a768"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#aa6ec2aaaa7422892fcf24c44ffc3a768">agi_channel_to_ami</a> (const char *<a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:aa6ec2aaaa7422892fcf24c44ffc3a768"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ae8b32514354ab1dd2b62121ed88593"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a2ae8b32514354ab1dd2b62121ed88593">agi_destroy_commands_cb</a> (void *data)</td></tr>
<tr class="separator:a2ae8b32514354ab1dd2b62121ed88593"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93f9c23e24eadb9e9d9e0c44597d15dd"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a93f9c23e24eadb9e9d9e0c44597d15dd">agi_exec</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *data)</td></tr>
<tr class="separator:a93f9c23e24eadb9e9d9e0c44597d15dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30e56b9b56c62f1a0cc32809f843873b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a30e56b9b56c62f1a0cc32809f843873b">agi_exec_end_to_ami</a> (struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:a30e56b9b56c62f1a0cc32809f843873b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79265756631f718546eb3198a8a2bef9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a79265756631f718546eb3198a8a2bef9">agi_exec_full</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *data, int enhanced, int dead)</td></tr>
<tr class="separator:a79265756631f718546eb3198a8a2bef9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9fd39b93cf79f1a4f6341cd28429099"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ad9fd39b93cf79f1a4f6341cd28429099">agi_exec_start_to_ami</a> (struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:ad9fd39b93cf79f1a4f6341cd28429099"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada0f44d1c6c2dbd51b7e81aae69399d3"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ada0f44d1c6c2dbd51b7e81aae69399d3">agi_handle_command</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, int dead)</td></tr>
<tr class="separator:ada0f44d1c6c2dbd51b7e81aae69399d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a990ea57f634560839acbaa3047fc4942"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a990ea57f634560839acbaa3047fc4942">ast_agi_register</a> (struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *mod, <a class="el" href="../../dc/d52/structagi__command.html">agi_command</a> *cmd)</td></tr>
<tr class="separator:a990ea57f634560839acbaa3047fc4942"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0bde1af9d469a32161ab8f45857592a"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ae0bde1af9d469a32161ab8f45857592a">ast_agi_register_multiple</a> (struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *mod, struct <a class="el" href="../../dc/d52/structagi__command.html">agi_command</a> *cmd, unsigned int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</td></tr>
<tr class="separator:ae0bde1af9d469a32161ab8f45857592a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adee1cbdd14817c3a077b8dd109f7934a"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a> (int fd, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, char *fmt,...)</td></tr>
<tr class="separator:adee1cbdd14817c3a077b8dd109f7934a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a576d2a78660b5eba358b1d26547b8132"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a576d2a78660b5eba358b1d26547b8132">ast_agi_unregister</a> (<a class="el" href="../../dc/d52/structagi__command.html">agi_command</a> *cmd)</td></tr>
<tr class="separator:a576d2a78660b5eba358b1d26547b8132"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32bc910dfa4883b8db27783be9038c7b"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a32bc910dfa4883b8db27783be9038c7b">ast_agi_unregister_multiple</a> (struct <a class="el" href="../../dc/d52/structagi__command.html">agi_command</a> *cmd, unsigned int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</td></tr>
<tr class="separator:a32bc910dfa4883b8db27783be9038c7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06806f3c6d0f8a44e80884526d243f3a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a06806f3c6d0f8a44e80884526d243f3a">AST_TEST_DEFINE</a> (test_agi_null_docs)</td></tr>
<tr class="separator:a06806f3c6d0f8a44e80884526d243f3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44c30f6f76341061e7609cc4e3a182e5"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a44c30f6f76341061e7609cc4e3a182e5">async_agi_read_frame</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</td></tr>
<tr class="separator:a44c30f6f76341061e7609cc4e3a182e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af64d7541f1e306713302a091faccdf6f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#af64d7541f1e306713302a091faccdf6f">deadagi_exec</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *data)</td></tr>
<tr class="separator:af64d7541f1e306713302a091faccdf6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ca1f7eb610de13f31b7db49bd40efc3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a5ca1f7eb610de13f31b7db49bd40efc3">eagi_exec</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *data)</td></tr>
<tr class="separator:a5ca1f7eb610de13f31b7db49bd40efc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ab6d0ac0364f96dbc74ed96db27a094"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dc/d52/structagi__command.html">agi_command</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a2ab6d0ac0364f96dbc74ed96db27a094">find_command</a> (const char *const cmds[], int exact)</td></tr>
<tr class="separator:a2ab6d0ac0364f96dbc74ed96db27a094"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb2a37e60e82e5519f36a120c2bae28e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#aeb2a37e60e82e5519f36a120c2bae28e">free_agi_cmd</a> (struct <a class="el" href="../../d4/db1/structagi__cmd.html">agi_cmd</a> *cmd)</td></tr>
<tr class="separator:aeb2a37e60e82e5519f36a120c2bae28e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95dd50b690e045a32abb12b8e99974a0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a95dd50b690e045a32abb12b8e99974a0">get_agi_cmd</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../d4/db1/structagi__cmd.html">agi_cmd</a> **cmd)</td></tr>
<tr class="memdesc:a95dd50b690e045a32abb12b8e99974a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the list head to the requested channel's AGI datastore.  <a href="#a95dd50b690e045a32abb12b8e99974a0">More...</a><br /></td></tr>
<tr class="separator:a95dd50b690e045a32abb12b8e99974a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace6cfe95442dc1b082a430b65a9c5d80"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ace6cfe95442dc1b082a430b65a9c5d80">handle_answer</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:ace6cfe95442dc1b082a430b65a9c5d80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1881926c45b748cefdc6ee8ce024ebc2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a1881926c45b748cefdc6ee8ce024ebc2">handle_asyncagi_break</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:a1881926c45b748cefdc6ee8ce024ebc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ed03057563059e94b5897a3aa454872"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a9ed03057563059e94b5897a3aa454872">handle_autohangup</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:a9ed03057563059e94b5897a3aa454872"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7d2a780396cec37e0338824492fcf73"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ae7d2a780396cec37e0338824492fcf73">handle_channelstatus</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:ae7d2a780396cec37e0338824492fcf73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a034905bb151521b05105619714ea3e71"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a034905bb151521b05105619714ea3e71">handle_cli_agi_add_cmd</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="memdesc:a034905bb151521b05105619714ea3e71"><td class="mdescLeft">&#160;</td><td class="mdescRight">CLI command to add applications to execute in Async AGI.  <a href="#a034905bb151521b05105619714ea3e71">More...</a><br /></td></tr>
<tr class="separator:a034905bb151521b05105619714ea3e71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7a0ac6d2a6cc6e05e9feecd79cb4523"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ac7a0ac6d2a6cc6e05e9feecd79cb4523">handle_cli_agi_debug</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:ac7a0ac6d2a6cc6e05e9feecd79cb4523"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f67d4734b2f69a4aebb922daeb2b0ca"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a8f67d4734b2f69a4aebb922daeb2b0ca">handle_cli_agi_dump_html</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a8f67d4734b2f69a4aebb922daeb2b0ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b0d8b11441dae16714234648845d4cf"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a1b0d8b11441dae16714234648845d4cf">handle_cli_agi_show</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a1b0d8b11441dae16714234648845d4cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdde9073d142012fc7c7b4403a372fbe"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#abdde9073d142012fc7c7b4403a372fbe">handle_connection</a> (const char *agiurl, const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> addr, const int netsockfd)</td></tr>
<tr class="separator:abdde9073d142012fc7c7b4403a372fbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9f9971ea196458d3388b01c9a42d22b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ab9f9971ea196458d3388b01c9a42d22b">handle_controlstreamfile</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:ab9f9971ea196458d3388b01c9a42d22b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82cecf1082da0ab9fdae62cce5402409"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a82cecf1082da0ab9fdae62cce5402409">handle_dbdel</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:a82cecf1082da0ab9fdae62cce5402409"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c9c09127c0312fccdb939d4eb53d31d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a3c9c09127c0312fccdb939d4eb53d31d">handle_dbdeltree</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:a3c9c09127c0312fccdb939d4eb53d31d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa53ffc9cad232502426b748888a38a57"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#aa53ffc9cad232502426b748888a38a57">handle_dbget</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:aa53ffc9cad232502426b748888a38a57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e873daed55c3f1a06c264f6b96e3f0c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a4e873daed55c3f1a06c264f6b96e3f0c">handle_dbput</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:a4e873daed55c3f1a06c264f6b96e3f0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8a0a121355c39051c8f2f0cea3feed8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#aa8a0a121355c39051c8f2f0cea3feed8">handle_exec</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:aa8a0a121355c39051c8f2f0cea3feed8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13e35a0e6acfa96b9e48def1bb023b2d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a13e35a0e6acfa96b9e48def1bb023b2d">handle_getdata</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:a13e35a0e6acfa96b9e48def1bb023b2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97c7d603632d5bb0bfc527feb385be1b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a97c7d603632d5bb0bfc527feb385be1b">handle_getoption</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="memdesc:a97c7d603632d5bb0bfc527feb385be1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">get option - really similar to the handle_streamfile, but with a timeout  <a href="#a97c7d603632d5bb0bfc527feb385be1b">More...</a><br /></td></tr>
<tr class="separator:a97c7d603632d5bb0bfc527feb385be1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acef5f5748554f819339fe8838f988e33"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#acef5f5748554f819339fe8838f988e33">handle_getvariable</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:acef5f5748554f819339fe8838f988e33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abadec846525eeb6056fc4c2b3d993250"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#abadec846525eeb6056fc4c2b3d993250">handle_getvariablefull</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:abadec846525eeb6056fc4c2b3d993250"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15bee3c2a3d5a51bc584293139656523"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a15bee3c2a3d5a51bc584293139656523">handle_hangup</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:a15bee3c2a3d5a51bc584293139656523"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bb7f30afbd30476b7569b9cc518fd45"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a6bb7f30afbd30476b7569b9cc518fd45">handle_noop</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int arg, const char *const argv[])</td></tr>
<tr class="separator:a6bb7f30afbd30476b7569b9cc518fd45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acccf573c262402359126137f5b67a491"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#acccf573c262402359126137f5b67a491">handle_recordfile</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:acccf573c262402359126137f5b67a491"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6528c693ea08cc8b771afef8ba4f1b4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ad6528c693ea08cc8b771afef8ba4f1b4">handle_recvchar</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:ad6528c693ea08cc8b771afef8ba4f1b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3eeeb37b22f82fc528660795e6e02bee"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a3eeeb37b22f82fc528660795e6e02bee">handle_recvtext</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:a3eeeb37b22f82fc528660795e6e02bee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc75df98fe97859011d66ed5bb6b184f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#afc75df98fe97859011d66ed5bb6b184f">handle_sayalpha</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:afc75df98fe97859011d66ed5bb6b184f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae00d940d4ec2958468aee413725ac513"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ae00d940d4ec2958468aee413725ac513">handle_saydate</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:ae00d940d4ec2958468aee413725ac513"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0aa9abadca4eb88d9360f12bb2e3a378"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a0aa9abadca4eb88d9360f12bb2e3a378">handle_saydatetime</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:a0aa9abadca4eb88d9360f12bb2e3a378"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c1449bbed69db775073c3fb0d2375e5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a6c1449bbed69db775073c3fb0d2375e5">handle_saydigits</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:a6c1449bbed69db775073c3fb0d2375e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabf8d780b0cecf93e9a9efe9c3bf7ce9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#aabf8d780b0cecf93e9a9efe9c3bf7ce9">handle_saynumber</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="memdesc:aabf8d780b0cecf93e9a9efe9c3bf7ce9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Say number in various language syntaxes.  <a href="#aabf8d780b0cecf93e9a9efe9c3bf7ce9">More...</a><br /></td></tr>
<tr class="separator:aabf8d780b0cecf93e9a9efe9c3bf7ce9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a569e8f64742d4e033fe335a6bc175596"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a569e8f64742d4e033fe335a6bc175596">handle_sayphonetic</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:a569e8f64742d4e033fe335a6bc175596"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbe60f9a710e1b555f3f623ad4c29f3c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#adbe60f9a710e1b555f3f623ad4c29f3c">handle_saytime</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:adbe60f9a710e1b555f3f623ad4c29f3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ed59e6d895329300f4ce2d5ca8300fe"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a8ed59e6d895329300f4ce2d5ca8300fe">handle_sendimage</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:a8ed59e6d895329300f4ce2d5ca8300fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad52c8f4244697dbc4d79dd2713664ef0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ad52c8f4244697dbc4d79dd2713664ef0">handle_sendtext</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:ad52c8f4244697dbc4d79dd2713664ef0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe33e71550638da136e4ac0e2ebc8448"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#abe33e71550638da136e4ac0e2ebc8448">handle_setcallerid</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:abe33e71550638da136e4ac0e2ebc8448"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4266427ff4e324e47da6e06156e874b0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a4266427ff4e324e47da6e06156e874b0">handle_setcontext</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:a4266427ff4e324e47da6e06156e874b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0e2d7f92017ae543ddcfa55816b362e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#aa0e2d7f92017ae543ddcfa55816b362e">handle_setextension</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:aa0e2d7f92017ae543ddcfa55816b362e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa06f97453ace3804ebf829e938469a5b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#aa06f97453ace3804ebf829e938469a5b">handle_setmusic</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:aa06f97453ace3804ebf829e938469a5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a067bfb03d9e468754ee0e08aa3fd9c4e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a067bfb03d9e468754ee0e08aa3fd9c4e">handle_setpriority</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:a067bfb03d9e468754ee0e08aa3fd9c4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51fe095014fbf6ab62fcae95de6643e6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a51fe095014fbf6ab62fcae95de6643e6">handle_setvariable</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:a51fe095014fbf6ab62fcae95de6643e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a401b5394fc83d6fb2208944042667a8e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a401b5394fc83d6fb2208944042667a8e">handle_speechactivategrammar</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:a401b5394fc83d6fb2208944042667a8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02c253f989b6ece253bf70339d42d0e0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a02c253f989b6ece253bf70339d42d0e0">handle_speechcreate</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:a02c253f989b6ece253bf70339d42d0e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5a2a0a078d552cc2a6d07af8b92981d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ae5a2a0a078d552cc2a6d07af8b92981d">handle_speechdeactivategrammar</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:ae5a2a0a078d552cc2a6d07af8b92981d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6d9ed1ead5a7ac633b238463a9854e7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ac6d9ed1ead5a7ac633b238463a9854e7">handle_speechdestroy</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:ac6d9ed1ead5a7ac633b238463a9854e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fddeb0930885c59ad64a25d8c9d2e7a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a6fddeb0930885c59ad64a25d8c9d2e7a">handle_speechloadgrammar</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:a6fddeb0930885c59ad64a25d8c9d2e7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9e6c961b76029dd2b4aa0873b7cb558"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ab9e6c961b76029dd2b4aa0873b7cb558">handle_speechrecognize</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:ab9e6c961b76029dd2b4aa0873b7cb558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a848c2fd13d98017e42c1c9f01944534b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a848c2fd13d98017e42c1c9f01944534b">handle_speechset</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:a848c2fd13d98017e42c1c9f01944534b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d4041b646f60f84acd4b16539de8ac3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a4d4041b646f60f84acd4b16539de8ac3">handle_speechunloadgrammar</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:a4d4041b646f60f84acd4b16539de8ac3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3c12b796d6d7102e20bb1cb7e6ba6ac"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ac3c12b796d6d7102e20bb1cb7e6ba6ac">handle_streamfile</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:ac3c12b796d6d7102e20bb1cb7e6ba6ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6eefdc9f7f62d2162b741334ed970c48"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a6eefdc9f7f62d2162b741334ed970c48">handle_tddmode</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:a6eefdc9f7f62d2162b741334ed970c48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18f43bbbea0ca4a94653e14d001c2374"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a18f43bbbea0ca4a94653e14d001c2374">handle_verbose</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:a18f43bbbea0ca4a94653e14d001c2374"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74d56f87ca5b49ee185d03ed7bec89b8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a74d56f87ca5b49ee185d03ed7bec89b8">handle_waitfordigit</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int argc, const char *const argv[])</td></tr>
<tr class="separator:a74d56f87ca5b49ee185d03ed7bec89b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c9dced746c667d15344f3dd5047ac94"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a9c9dced746c667d15344f3dd5047ac94">help_workhorse</a> (int fd, const char *const <a class="el" href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a>[])</td></tr>
<tr class="separator:a9c9dced746c667d15344f3dd5047ac94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6b085612a89ffb1f4be4bfa50d6b518"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ac6b085612a89ffb1f4be4bfa50d6b518">launch_asyncagi</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, int argc, char *argv[], int *efd)</td></tr>
<tr class="separator:ac6b085612a89ffb1f4be4bfa50d6b518"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c51b461f83780e2100cecf7c510d639"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a3c51b461f83780e2100cecf7c510d639">launch_ha_netscript</a> (char *agiurl, char *argv[], int *fds)</td></tr>
<tr class="separator:a3c51b461f83780e2100cecf7c510d639"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64747d68dc7acc932d0a6657971bedac"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a64747d68dc7acc932d0a6657971bedac">launch_netscript</a> (char *agiurl, char *argv[], int *fds)</td></tr>
<tr class="separator:a64747d68dc7acc932d0a6657971bedac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa23fd9388c9b50f7c6ce209c3c1e4ac4"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#aa23fd9388c9b50f7c6ce209c3c1e4ac4">launch_script</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, char *script, int argc, char *argv[], int *fds, int *efd, int *opid)</td></tr>
<tr class="separator:aa23fd9388c9b50f7c6ce209c3c1e4ac4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0feb6a676d8f22a35d95b9b851e1e3a6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a0feb6a676d8f22a35d95b9b851e1e3a6">parse_args</a> (char *s, int *<a class="el" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>, const char *argv[])</td></tr>
<tr class="separator:a0feb6a676d8f22a35d95b9b851e1e3a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfcc084fb5283b70e7eb6498a6bd6ed3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#abfcc084fb5283b70e7eb6498a6bd6ed3">publish_async_exec_end</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, int command_id, const char *command, int result_code, const char *<a class="el" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>)</td></tr>
<tr class="separator:abfcc084fb5283b70e7eb6498a6bd6ed3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85e832090276a7a7c018400e2f70c853"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a85e832090276a7a7c018400e2f70c853">run_agi</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, char *<a class="el" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a>, <a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *agi, int pid, int *<a class="el" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>, int dead, int argc, char *argv[])</td></tr>
<tr class="separator:a85e832090276a7a7c018400e2f70c853"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a91f6f01be62db91c4a91250f3d513d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a1a91f6f01be62db91c4a91250f3d513d">setup_env</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, char *<a class="el" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a>, int fd, int enhanced, int argc, char *argv[])</td></tr>
<tr class="separator:a1a91f6f01be62db91c4a91250f3d513d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a858a0c285f521084ef968a81472e5458"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a858a0c285f521084ef968a81472e5458">speech_streamfile</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *filename, const char *preflang, int offset)</td></tr>
<tr class="separator:a858a0c285f521084ef968a81472e5458"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad05490300365a874998a160201631fc6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ad05490300365a874998a160201631fc6">STASIS_MESSAGE_TYPE_DEFN_LOCAL</a> (agi_exec_start_type,.<a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c.html#ae8731a90be4dc2d8272b7dfd8a001d4c">to_ami</a>=<a class="el" href="../../dd/de9/res__agi_8c.html#ad9fd39b93cf79f1a4f6341cd28429099">agi_exec_start_to_ami</a>,)</td></tr>
<tr class="separator:ad05490300365a874998a160201631fc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad681b8b4fdd6f4148af90bb3d64e094a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ad681b8b4fdd6f4148af90bb3d64e094a">STASIS_MESSAGE_TYPE_DEFN_LOCAL</a> (agi_exec_end_type,.<a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c.html#ae8731a90be4dc2d8272b7dfd8a001d4c">to_ami</a>=<a class="el" href="../../dd/de9/res__agi_8c.html#a30e56b9b56c62f1a0cc32809f843873b">agi_exec_end_to_ami</a>,)</td></tr>
<tr class="separator:ad681b8b4fdd6f4148af90bb3d64e094a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace6c9e6c8a363be1117309acee064376"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ace6c9e6c8a363be1117309acee064376">STASIS_MESSAGE_TYPE_DEFN_LOCAL</a> (agi_async_start_type,.<a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c.html#ae8731a90be4dc2d8272b7dfd8a001d4c">to_ami</a>=<a class="el" href="../../dd/de9/res__agi_8c.html#aa331556f90c1e5963ce69038e78f6d06">agi_async_start_to_ami</a>,)</td></tr>
<tr class="separator:ace6c9e6c8a363be1117309acee064376"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a714cf7f51e428784bd6c649e3df0b6f1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a714cf7f51e428784bd6c649e3df0b6f1">STASIS_MESSAGE_TYPE_DEFN_LOCAL</a> (agi_async_exec_type,.<a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c.html#ae8731a90be4dc2d8272b7dfd8a001d4c">to_ami</a>=<a class="el" href="../../dd/de9/res__agi_8c.html#add52df81dc56b4b3b009e82dcdaf5cbd">agi_async_exec_to_ami</a>,)</td></tr>
<tr class="separator:a714cf7f51e428784bd6c649e3df0b6f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42295d52f5c98a47df26430c898a8589"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a42295d52f5c98a47df26430c898a8589">STASIS_MESSAGE_TYPE_DEFN_LOCAL</a> (agi_async_end_type,.<a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c.html#ae8731a90be4dc2d8272b7dfd8a001d4c">to_ami</a>=<a class="el" href="../../dd/de9/res__agi_8c.html#af9d9a3d50a3f090631ea19ef8ff9871b">agi_async_end_to_ami</a>,)</td></tr>
<tr class="separator:a42295d52f5c98a47df26430c898a8589"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affb3399334791eb3ca41f76ad70296dc"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#affb3399334791eb3ca41f76ad70296dc">write_html_escaped</a> (FILE *htmlfile, char *<a class="el" href="../../d8/d30/main_2security__events_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>)</td></tr>
<tr class="memdesc:affb3399334791eb3ca41f76ad70296dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert string to use HTML escaped characters.  <a href="#affb3399334791eb3ca41f76ad70296dc">More...</a><br /></td></tr>
<tr class="separator:affb3399334791eb3ca41f76ad70296dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6eff3837450235005ee9361ae08999fe"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a6eff3837450235005ee9361ae08999fe">write_htmldump</a> (const char *filename)</td></tr>
<tr class="separator:a6eff3837450235005ee9361ae08999fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a835b27a90d895a488e4e14cc3d2dee8c">AST_MODFLAG_GLOBAL_SYMBOLS</a> | <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Asterisk Gateway Interface (<a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a>)&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .load_pri = AST_MODPRI_APP_DEPEND, .requires = &quot;res_speech&quot;, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80c30395a4c4fa9d8164ebc3608010e6"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a80c30395a4c4fa9d8164ebc3608010e6">agi_buf</a> = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../dd/de9/res__agi_8c.html#ac0e0031a3312b986f52c97a9f9222f9c">__init_agi_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td></tr>
<tr class="separator:a80c30395a4c4fa9d8164ebc3608010e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13ffc43504a9b4d6609f9fb8fe893806"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d7/de8/structagi__commands.html">agi_commands</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a13ffc43504a9b4d6609f9fb8fe893806">agi_commands</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:a13ffc43504a9b4d6609f9fb8fe893806"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae10f9ba9071ef79384ddcd6a37315b40"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ae10f9ba9071ef79384ddcd6a37315b40">agi_commands_datastore_info</a></td></tr>
<tr class="separator:ae10f9ba9071ef79384ddcd6a37315b40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e4d6534e259785ec604fa072e049325"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a9e4d6534e259785ec604fa072e049325">agidebug</a> = 0</td></tr>
<tr class="separator:a9e4d6534e259785ec604fa072e049325"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e5f57131367eff409b9e0bd7b31aa1a"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a9e5f57131367eff409b9e0bd7b31aa1a">app</a> = &quot;AGI&quot;</td></tr>
<tr class="separator:a9e5f57131367eff409b9e0bd7b31aa1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11397b735518c6d8ecf8d046cb627d92"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a11397b735518c6d8ecf8d046cb627d92">cli_agi</a> []</td></tr>
<tr class="separator:a11397b735518c6d8ecf8d046cb627d92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaa94f6da87a703160a7acb2fd67422d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dc/d52/structagi__command.html">agi_command</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#aaaa94f6da87a703160a7acb2fd67422d">commands</a> []</td></tr>
<tr class="memdesc:aaaa94f6da87a703160a7acb2fd67422d"><td class="mdescLeft">&#160;</td><td class="mdescRight">AGI commands list.  <a href="#aaaa94f6da87a703160a7acb2fd67422d">More...</a><br /></td></tr>
<tr class="separator:aaaa94f6da87a703160a7acb2fd67422d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88932dc53060370d87a1bed5af51d968"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a88932dc53060370d87a1bed5af51d968">deadapp</a> = &quot;DeadAGI&quot;</td></tr>
<tr class="separator:a88932dc53060370d87a1bed5af51d968"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04c472070a5f7bb59a453e5243bbcd8d"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de9/res__agi_8c.html#a04c472070a5f7bb59a453e5243bbcd8d">eapp</a> = &quot;EAGI&quot;</td></tr>
<tr class="separator:a04c472070a5f7bb59a453e5243bbcd8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>AGI - the Asterisk Gateway Interface. </p>
<dl class="section author"><dt>Author</dt><dd>Mark Spencer <a href="#" onclick="location.href='mai'+'lto:'+'mar'+'ks'+'ter'+'@d'+'igi'+'um'+'.co'+'m'; return false;">marks<span style="display: none;">.nosp@m.</span>ter@<span style="display: none;">.nosp@m.</span>digiu<span style="display: none;">.nosp@m.</span>m.co<span style="display: none;">.nosp@m.</span>m</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aac3502538abd25c04158ea6d06c182d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac3502538abd25c04158ea6d06c182d6">&#9670;&nbsp;</a></span>AGI_BUF_INITSIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AGI_BUF_INITSIZE&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01484">1484</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>.</p>

</div>
</div>
<a id="acac9c67d43a9e0d04c732fc06665f6dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acac9c67d43a9e0d04c732fc06665f6dd">&#9670;&nbsp;</a></span>AGI_BUF_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AGI_BUF_LEN&#160;&#160;&#160;2048</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01391">1391</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04112">run_agi()</a>.</p>

</div>
</div>
<a id="aa2bed8203ffc925f64cf3b48cd3a2910"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2bed8203ffc925f64cf3b48cd3a2910">&#9670;&nbsp;</a></span>AGI_BUF_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AGI_BUF_SIZE&#160;&#160;&#160;1024</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01787">launch_asyncagi()</a>.</p>

</div>
</div>
<a id="aafc38adf75f284d5cf7e6f11a55bb29f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafc38adf75f284d5cf7e6f11a55bb29f">&#9670;&nbsp;</a></span>AGI_NANDFS_RETRY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AGI_NANDFS_RETRY&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01390">1390</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04112">run_agi()</a>.</p>

</div>
</div>
<a id="acc5c6270557bf6ddf0ddf1952d9c600a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc5c6270557bf6ddf0ddf1952d9c600a">&#9670;&nbsp;</a></span>AGI_PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AGI_PORT&#160;&#160;&#160;4573</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01407">1407</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02053">launch_netscript()</a>.</p>

</div>
</div>
<a id="a1bf7e6988af21440def19908daafd708"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bf7e6988af21440def19908daafd708">&#9670;&nbsp;</a></span>AMI_BUF_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AMI_BUF_SIZE&#160;&#160;&#160;2048</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01787">launch_asyncagi()</a>.</p>

</div>
</div>
<a id="a805616595a796949ade4a78edc628f99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a805616595a796949ade4a78edc628f99">&#9670;&nbsp;</a></span>AST_API_MODULE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_API_MODULE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l00071">71</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

</div>
</div>
<a id="a5fcc4663e437ae0fd8b0d388050c2559"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fcc4663e437ae0fd8b0d388050c2559">&#9670;&nbsp;</a></span>ASYNC_AGI_BREAK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ASYNC_AGI_BREAK&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Special return code for "asyncagi break" command. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01410">1410</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04021">agi_handle_command()</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02376">handle_asyncagi_break()</a>.</p>

</div>
</div>
<a id="a7b35d7eb31c6eba73c2e1fb493621d7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b35d7eb31c6eba73c2e1fb493621d7c">&#9670;&nbsp;</a></span>MAX_AGI_CONNECT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_AGI_CONNECT&#160;&#160;&#160;2000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01405">1405</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02012">handle_connection()</a>.</p>

</div>
</div>
<a id="a29b7451465deac204c5f7cb1f9c6e1fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29b7451465deac204c5f7cb1f9c6e1fc">&#9670;&nbsp;</a></span>MAX_ARGS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_ARGS&#160;&#160;&#160;128</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01388">1388</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04494">agi_exec_full()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04021">agi_handle_command()</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03947">parse_args()</a>.</p>

</div>
</div>
<a id="a1eb73c104b484cf18752169509cebfe2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1eb73c104b484cf18752169509cebfe2">&#9670;&nbsp;</a></span>MAX_CMD_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_CMD_LEN&#160;&#160;&#160;80</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01389">1389</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03783">ast_agi_register()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03827">ast_agi_unregister()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04284">handle_cli_agi_show()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03757">help_workhorse()</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04418">write_htmldump()</a>.</p>

</div>
</div>
<a id="aca50e62ba80a3860828c9a45c65e171c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca50e62ba80a3860828c9a45c65e171c">&#9670;&nbsp;</a></span>SRV_PREFIX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SRV_PREFIX&#160;&#160;&#160;&quot;_agi._tcp.&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01392">1392</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02146">launch_ha_netscript()</a>.</p>

</div>
</div>
<a id="af528891ceae298f0adb4f75de973e843"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af528891ceae298f0adb4f75de973e843">&#9670;&nbsp;</a></span>TONE_BLOCK_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TONE_BLOCK_SIZE&#160;&#160;&#160;200</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01402">1402</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="abf2ce6b2eb38d1067cfda4f19081f5b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf2ce6b2eb38d1067cfda4f19081f5b1">&#9670;&nbsp;</a></span>agi_result</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af"></a>AGI_RESULT_FAILURE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8"></a>AGI_RESULT_SUCCESS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="abf2ce6b2eb38d1067cfda4f19081f5b1aac30d4ae19361cc243414b0ec32cbb78"></a>AGI_RESULT_SUCCESS_FAST&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="abf2ce6b2eb38d1067cfda4f19081f5b1a97eab5e05f42bf8b5da0575a67e10d7c"></a>AGI_RESULT_SUCCESS_ASYNC&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="abf2ce6b2eb38d1067cfda4f19081f5b1ac0f8286bb33122eee66cbe710f3f5ada"></a>AGI_RESULT_NOTFOUND&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="abf2ce6b2eb38d1067cfda4f19081f5b1a3efef4607e59ada98318f948f398d8fe"></a>AGI_RESULT_HANGUP&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01412">1412</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;                {</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a> = -1,</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8">AGI_RESULT_SUCCESS</a>,</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1aac30d4ae19361cc243414b0ec32cbb78">AGI_RESULT_SUCCESS_FAST</a>,</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a97eab5e05f42bf8b5da0575a67e10d7c">AGI_RESULT_SUCCESS_ASYNC</a>,</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1ac0f8286bb33122eee66cbe710f3f5ada">AGI_RESULT_NOTFOUND</a>,</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a3efef4607e59ada98318f948f398d8fe">AGI_RESULT_HANGUP</a>,</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;};</div><div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1a3efef4607e59ada98318f948f398d8fe"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a3efef4607e59ada98318f948f398d8fe">AGI_RESULT_HANGUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01418">res_agi.c:1418</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1a97eab5e05f42bf8b5da0575a67e10d7c"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a97eab5e05f42bf8b5da0575a67e10d7c">AGI_RESULT_SUCCESS_ASYNC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01416">res_agi.c:1416</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1aac30d4ae19361cc243414b0ec32cbb78"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1aac30d4ae19361cc243414b0ec32cbb78">AGI_RESULT_SUCCESS_FAST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01415">res_agi.c:1415</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1ac0f8286bb33122eee66cbe710f3f5ada"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1ac0f8286bb33122eee66cbe710f3f5ada">AGI_RESULT_NOTFOUND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01417">res_agi.c:1417</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01413">res_agi.c:1413</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8">AGI_RESULT_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01414">res_agi.c:1414</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ac0e0031a3312b986f52c97a9f9222f9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0e0031a3312b986f52c97a9f9222f9c">&#9670;&nbsp;</a></span>__init_agi_buf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __init_agi_buf </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01483">1483</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;{</div></div><!-- fragment -->
</div>
</div>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04715">4715</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04715">4715</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

</div>
</div>
<a id="aa22a76ef4f33c70bc5f7099136a30727"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa22a76ef4f33c70bc5f7099136a30727">&#9670;&nbsp;</a></span>action_add_agi_cmd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_add_agi_cmd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a new command to execute by the Async AGI application. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td></td></tr>
    <tr><td class="paramname">m</td><td>It will append the application to the specified channel's queue if the channel is not inside Async AGI application it will return an error </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success or incorrect use </td></tr>
    <tr><td class="paramname">1</td><td>on failure to add the command ( most likely because the channel is not in Async AGI loop ) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01709">1709</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01580">add_agi_cmd()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04021">agi_handle_command()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02559">request()</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02318">setup_env()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04682">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;{</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel&quot;</span>);</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *cmdbuff = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Command&quot;</span>);</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *cmdid   = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;CommandID&quot;</span>);</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[256];</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(channel) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cmdbuff)) {</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Both, Channel and Command are *required*&quot;</span>);</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;   }</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;   <span class="keywordflow">if</span> (!(chan = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(channel))) {</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;      snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;Channel %s does not exist.&quot;</span>, channel);</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, buf);</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;   }</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/de9/res__agi_8c.html#a76d81c59eb3c123fe6e6c483b410394d">add_agi_cmd</a>(chan, cmdbuff, cmdid)) {</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;Failed to add AGI command to channel %s queue&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, buf);</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;      chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;   }</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Added AGI command to queue&quot;</span>);</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="res__agi_8c_html_a76d81c59eb3c123fe6e6c483b410394d"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a76d81c59eb3c123fe6e6c483b410394d">add_agi_cmd</a></div><div class="ttdeci">static int add_agi_cmd(struct ast_channel *chan, const char *cmd_buff, const char *cmd_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01580">res_agi.c:1580</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Get header from mananger transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a76d81c59eb3c123fe6e6c483b410394d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76d81c59eb3c123fe6e6c483b410394d">&#9670;&nbsp;</a></span>add_agi_cmd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int add_agi_cmd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmd_buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmd_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01580">1580</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c.html#a13ffc43504a9b4d6609f9fb8fe893806">agi_commands</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02404">ast_channel_datastore_find()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00172">AST_LIST_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01517">agi_cmd::cmd_buffer</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01518">agi_cmd::cmd_id</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00070">ast_datastore::data</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01709">action_add_agi_cmd()</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01657">handle_cli_agi_add_cmd()</a>.</p>
<div class="fragment"><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;{</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *store;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db1/structagi__cmd.html">agi_cmd</a> *cmd;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#acdb4f56da6b3071d02dcce20072852b0">AST_LIST_HEAD</a>(, <a class="code" href="../../d4/db1/structagi__cmd.html">agi_cmd</a>) *<a class="code" href="../../dd/de9/res__agi_8c.html#a13ffc43504a9b4d6609f9fb8fe893806">agi_commands</a>;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;   store = <a class="code" href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, &amp;<a class="code" href="../../dd/de9/res__agi_8c.html#ae10f9ba9071ef79384ddcd6a37315b40">agi_commands_datastore_info</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;   <span class="keywordflow">if</span> (!store) {</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Channel %s is not setup for Async AGI.\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;   }</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;   <a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a> = store-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;   cmd = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*cmd));</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;   <span class="keywordflow">if</span> (!cmd) {</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;   }</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;   cmd-&gt;<a class="code" href="../../d4/db1/structagi__cmd.html#a3fe154717b79d32dd6366ce4b0cb6b38">cmd_buffer</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(cmd_buff);</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;   <span class="keywordflow">if</span> (!cmd-&gt;<a class="code" href="../../d4/db1/structagi__cmd.html#a3fe154717b79d32dd6366ce4b0cb6b38">cmd_buffer</a>) {</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cmd);</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;   }</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;   cmd-&gt;<a class="code" href="../../d4/db1/structagi__cmd.html#a550a7cedad446097b6e55bbd744412b1">cmd_id</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../d4/db1/structagi__cmd.html#a550a7cedad446097b6e55bbd744412b1">cmd_id</a>);</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;   <span class="keywordflow">if</span> (!cmd-&gt;<a class="code" href="../../d4/db1/structagi__cmd.html#a550a7cedad446097b6e55bbd744412b1">cmd_id</a>) {</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cmd-&gt;<a class="code" href="../../d4/db1/structagi__cmd.html#a3fe154717b79d32dd6366ce4b0cb6b38">cmd_buffer</a>);</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cmd);</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;   }</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(<a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a>);</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(<a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a>, cmd, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(<a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a>);</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;}</div><div class="ttc" id="structagi__commands_html"><div class="ttname"><a href="../../d7/de8/structagi__commands.html">agi_commands</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l03755">res_agi.c:3755</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="linkedlists_8h_html_acdb4f56da6b3071d02dcce20072852b0"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#acdb4f56da6b3071d02dcce20072852b0">AST_LIST_HEAD</a></div><div class="ttdeci">#define AST_LIST_HEAD(name, type)</div><div class="ttdoc">Defines a structure to be used to hold a list of specified type. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00172">linkedlists.h:172</a></div></div>
<div class="ttc" id="structagi__cmd_html"><div class="ttname"><a href="../../d4/db1/structagi__cmd.html">agi_cmd</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01516">res_agi.c:1516</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="channel_8h_html_aad1e09cd7c79237d05cffb45d6cdfd7c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a></div><div class="ttdeci">struct ast_datastore * ast_channel_datastore_find(struct ast_channel *chan, const struct ast_datastore_info *info, const char *uid)</div><div class="ttdoc">Find a datastore on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02404">channel.c:2404</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structagi__cmd_html_a550a7cedad446097b6e55bbd744412b1"><div class="ttname"><a href="../../d4/db1/structagi__cmd.html#a550a7cedad446097b6e55bbd744412b1">agi_cmd::cmd_id</a></div><div class="ttdeci">char * cmd_id</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01518">res_agi.c:1518</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="res__agi_8c_html_ae10f9ba9071ef79384ddcd6a37315b40"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#ae10f9ba9071ef79384ddcd6a37315b40">agi_commands_datastore_info</a></div><div class="ttdeci">static const struct ast_datastore_info agi_commands_datastore_info</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01544">res_agi.c:1544</a></div></div>
<div class="ttc" id="res__agi_8c_html_a13ffc43504a9b4d6609f9fb8fe893806"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a13ffc43504a9b4d6609f9fb8fe893806">agi_commands</a></div><div class="ttdeci">static struct agi_commands agi_commands</div></div>
<div class="ttc" id="structast__datastore_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">ast_datastore::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00070">datastore.h:70</a></div></div>
<div class="ttc" id="structagi__cmd_html_a3fe154717b79d32dd6366ce4b0cb6b38"><div class="ttname"><a href="../../d4/db1/structagi__cmd.html#a3fe154717b79d32dd6366ce4b0cb6b38">agi_cmd::cmd_buffer</a></div><div class="ttdeci">char * cmd_buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01517">res_agi.c:1517</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9383e938a35233f3b55a3c93a1e8ccca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9383e938a35233f3b55a3c93a1e8ccca">&#9670;&nbsp;</a></span>add_to_agi()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int add_to_agi </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01613">1613</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02390">ast_channel_datastore_add()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02404">ast_channel_datastore_find()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00089">ast_datastore_alloc</a>, <a class="el" href="../../d7/d7a/datastore_8c_source.html#l00068">ast_datastore_free()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00172">AST_LIST_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00625">AST_LIST_HEAD_INIT</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00070">ast_datastore::data</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01787">launch_asyncagi()</a>.</p>
<div class="fragment"><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;{</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore;</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#acdb4f56da6b3071d02dcce20072852b0">AST_LIST_HEAD</a>(, <a class="code" href="../../d4/db1/structagi__cmd.html">agi_cmd</a>) *agi_cmds_list;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;   <span class="comment">/* check if already on AGI */</span></div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;   datastore = <a class="code" href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, &amp;<a class="code" href="../../dd/de9/res__agi_8c.html#ae10f9ba9071ef79384ddcd6a37315b40">agi_commands_datastore_info</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;   <span class="keywordflow">if</span> (datastore) {</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;      <span class="comment">/* we already have an AGI datastore, let&#39;s just</span></div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;<span class="comment">         return success */</span></div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;   }</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;   <span class="comment">/* the channel has never been on Async AGI,</span></div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;<span class="comment">      let&#39;s allocate it&#39;s datastore */</span></div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;   datastore = <a class="code" href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc</a>(&amp;<a class="code" href="../../dd/de9/res__agi_8c.html#ae10f9ba9071ef79384ddcd6a37315b40">agi_commands_datastore_info</a>, <span class="stringliteral">&quot;AGI&quot;</span>);</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;   <span class="keywordflow">if</span> (!datastore) {</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;   }</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;   agi_cmds_list = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*agi_cmds_list));</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;   <span class="keywordflow">if</span> (!agi_cmds_list) {</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to allocate Async AGI commands list.\n&quot;</span>);</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;      <a class="code" href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a>(datastore);</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;   }</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;   datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a> = agi_cmds_list;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6f42d3bf45cc9af6f794d9d1cf8c45ca">AST_LIST_HEAD_INIT</a>(agi_cmds_list);</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a>(chan, datastore);</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="linkedlists_8h_html_acdb4f56da6b3071d02dcce20072852b0"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#acdb4f56da6b3071d02dcce20072852b0">AST_LIST_HEAD</a></div><div class="ttdeci">#define AST_LIST_HEAD(name, type)</div><div class="ttdoc">Defines a structure to be used to hold a list of specified type. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00172">linkedlists.h:172</a></div></div>
<div class="ttc" id="structagi__cmd_html"><div class="ttname"><a href="../../d4/db1/structagi__cmd.html">agi_cmd</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01516">res_agi.c:1516</a></div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="channel_8h_html_aad1e09cd7c79237d05cffb45d6cdfd7c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a></div><div class="ttdeci">struct ast_datastore * ast_channel_datastore_find(struct ast_channel *chan, const struct ast_datastore_info *info, const char *uid)</div><div class="ttdoc">Find a datastore on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02404">channel.c:2404</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="datastore_8h_html_aee27286888b30c6448a9bce928040a14"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a></div><div class="ttdeci">int ast_datastore_free(struct ast_datastore *datastore)</div><div class="ttdoc">Free a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7a/datastore_8c_source.html#l00068">datastore.c:68</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6f42d3bf45cc9af6f794d9d1cf8c45ca"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6f42d3bf45cc9af6f794d9d1cf8c45ca">AST_LIST_HEAD_INIT</a></div><div class="ttdeci">#define AST_LIST_HEAD_INIT(head)</div><div class="ttdoc">Initializes a list head structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00625">linkedlists.h:625</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="res__agi_8c_html_ae10f9ba9071ef79384ddcd6a37315b40"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#ae10f9ba9071ef79384ddcd6a37315b40">agi_commands_datastore_info</a></div><div class="ttdeci">static const struct ast_datastore_info agi_commands_datastore_info</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01544">res_agi.c:1544</a></div></div>
<div class="ttc" id="structast__datastore_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">ast_datastore::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00070">datastore.h:70</a></div></div>
<div class="ttc" id="datastore_8h_html_a666afb07fd77d50782cc10f83e029159"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc</a></div><div class="ttdeci">#define ast_datastore_alloc(info, uid)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00089">datastore.h:89</a></div></div>
<div class="ttc" id="channel_8h_html_a1ed3e98d33d5587948a0e2ef67a81f52"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a></div><div class="ttdeci">int ast_channel_datastore_add(struct ast_channel *chan, struct ast_datastore *datastore)</div><div class="ttdoc">Add a datastore to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02390">channel.c:2390</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af9d9a3d50a3f090631ea19ef8ff9871b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9d9a3d50a3f090631ea19ef8ff9871b">&#9670;&nbsp;</a></span>agi_async_end_to_ami()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a>* agi_async_end_to_ami </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01460">1460</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01455">agi_async_exec_to_ami()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01450">agi_async_start_to_ami()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01421">agi_channel_to_ami()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01445">agi_exec_end_to_ami()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01440">agi_exec_start_to_ami()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03909">find_command()</a>, <a class="el" href="../../dd/de9/res__agi_8c.html#ad05490300365a874998a160201631fc6">STASIS_MESSAGE_TYPE_DEFN_LOCAL()</a>, and <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00542">to_ami()</a>.</p>
<div class="fragment"><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;{</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#aa6ec2aaaa7422892fcf24c44ffc3a768">agi_channel_to_ami</a>(<span class="stringliteral">&quot;AsyncAGIEnd&quot;</span>, message);</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;}</div><div class="ttc" id="res__agi_8c_html_aa6ec2aaaa7422892fcf24c44ffc3a768"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#aa6ec2aaaa7422892fcf24c44ffc3a768">agi_channel_to_ami</a></div><div class="ttdeci">static struct ast_manager_event_blob * agi_channel_to_ami(const char *type, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01421">res_agi.c:1421</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="add52df81dc56b4b3b009e82dcdaf5cbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add52df81dc56b4b3b009e82dcdaf5cbd">&#9670;&nbsp;</a></span>agi_async_exec_to_ami()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a>* agi_async_exec_to_ami </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01455">1455</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01421">agi_channel_to_ami()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01460">agi_async_end_to_ami()</a>.</p>
<div class="fragment"><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;{</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#aa6ec2aaaa7422892fcf24c44ffc3a768">agi_channel_to_ami</a>(<span class="stringliteral">&quot;AsyncAGIExec&quot;</span>, message);</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;}</div><div class="ttc" id="res__agi_8c_html_aa6ec2aaaa7422892fcf24c44ffc3a768"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#aa6ec2aaaa7422892fcf24c44ffc3a768">agi_channel_to_ami</a></div><div class="ttdeci">static struct ast_manager_event_blob * agi_channel_to_ami(const char *type, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01421">res_agi.c:1421</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa331556f90c1e5963ce69038e78f6d06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa331556f90c1e5963ce69038e78f6d06">&#9670;&nbsp;</a></span>agi_async_start_to_ami()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a>* agi_async_start_to_ami </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01450">1450</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01421">agi_channel_to_ami()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01460">agi_async_end_to_ami()</a>.</p>
<div class="fragment"><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;{</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#aa6ec2aaaa7422892fcf24c44ffc3a768">agi_channel_to_ami</a>(<span class="stringliteral">&quot;AsyncAGIStart&quot;</span>, message);</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;}</div><div class="ttc" id="res__agi_8c_html_aa6ec2aaaa7422892fcf24c44ffc3a768"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#aa6ec2aaaa7422892fcf24c44ffc3a768">agi_channel_to_ami</a></div><div class="ttdeci">static struct ast_manager_event_blob * agi_channel_to_ami(const char *type, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01421">res_agi.c:1421</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa6ec2aaaa7422892fcf24c44ffc3a768"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6ec2aaaa7422892fcf24c44ffc3a768">&#9670;&nbsp;</a></span>agi_channel_to_ami()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a>* agi_channel_to_ami </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01421">1421</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d0/d1c/manager__channels_8c_source.html#l00561">ast_manager_build_channel_state_string()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l09727">ast_manager_event_blob_create()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01821">ast_manager_str_from_json_object()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00188">ast_channel_blob::blob</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00084">EVENT_FLAG_AGI</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00186">ast_channel_blob::snapshot</a>, and <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01460">agi_async_end_to_ami()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01455">agi_async_exec_to_ami()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01450">agi_async_start_to_ami()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01445">agi_exec_end_to_ami()</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01440">agi_exec_start_to_ami()</a>.</p>
<div class="fragment"><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;{</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/df0/structast__channel__blob.html">ast_channel_blob</a> *obj = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(message);</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, channel_string, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, event_string, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;   channel_string = <a class="code" href="../../db/d45/manager_8h.html#a777cde87d12b331902f862ec44641688">ast_manager_build_channel_state_string</a>(obj-&gt;<a class="code" href="../../db/df0/structast__channel__blob.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>);</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;   event_string = <a class="code" href="../../df/d72/group__Group__AMI.html#ga2a7a78b91c9ba54f89c9b5a9e7435027">ast_manager_str_from_json_object</a>(obj-&gt;<a class="code" href="../../db/df0/structast__channel__blob.html#ad2b8e22df32b99651f727cd9a8dcb9f3">blob</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;   <span class="keywordflow">if</span> (!channel_string || !event_string) {</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;   }</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/d45/manager_8h.html#a3ace32eaf9a3fc2f7d15121c64bf8ecd">ast_manager_event_blob_create</a>(<a class="code" href="../../db/d45/manager_8h.html#ac7370fe764f1305cdb3c543d3964d5ed">EVENT_FLAG_AGI</a>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>,</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span>,</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(channel_string),</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(event_string));</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="structast__channel__blob_html_ad2b8e22df32b99651f727cd9a8dcb9f3"><div class="ttname"><a href="../../db/df0/structast__channel__blob.html#ad2b8e22df32b99651f727cd9a8dcb9f3">ast_channel_blob::blob</a></div><div class="ttdeci">struct ast_json * blob</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00188">stasis_channels.h:188</a></div></div>
<div class="ttc" id="structast__channel__blob_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../db/df0/structast__channel__blob.html#a36584c0251e54a7af4892d63f7a28c77">ast_channel_blob::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00186">stasis_channels.h:186</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="manager_8h_html_a3ace32eaf9a3fc2f7d15121c64bf8ecd"><div class="ttname"><a href="../../db/d45/manager_8h.html#a3ace32eaf9a3fc2f7d15121c64bf8ecd">ast_manager_event_blob_create</a></div><div class="ttdeci">struct ast_manager_event_blob * ast_manager_event_blob_create(int event_flags, const char *manager_event, const char *extra_fields_fmt,...)</div><div class="ttdoc">Construct a ast_manager_event_blob. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l09727">manager.c:9727</a></div></div>
<div class="ttc" id="structast__channel__blob_html"><div class="ttname"><a href="../../db/df0/structast__channel__blob.html">ast_channel_blob</a></div><div class="ttdoc">Blob of data associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00184">stasis_channels.h:184</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga2a7a78b91c9ba54f89c9b5a9e7435027"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga2a7a78b91c9ba54f89c9b5a9e7435027">ast_manager_str_from_json_object</a></div><div class="ttdeci">struct ast_str * ast_manager_str_from_json_object(struct ast_json *blob, key_exclusion_cb exclusion_cb)</div><div class="ttdoc">Convert a JSON object into an AMI compatible string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01821">manager.c:1821</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="manager_8h_html_ac7370fe764f1305cdb3c543d3964d5ed"><div class="ttname"><a href="../../db/d45/manager_8h.html#ac7370fe764f1305cdb3c543d3964d5ed">EVENT_FLAG_AGI</a></div><div class="ttdeci">#define EVENT_FLAG_AGI</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00084">manager.h:84</a></div></div>
<div class="ttc" id="manager_8h_html_a777cde87d12b331902f862ec44641688"><div class="ttname"><a href="../../db/d45/manager_8h.html#a777cde87d12b331902f862ec44641688">ast_manager_build_channel_state_string</a></div><div class="ttdeci">struct ast_str * ast_manager_build_channel_state_string(const struct ast_channel_snapshot *snapshot)</div><div class="ttdoc">Generate the AMI message body from a channel snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1c/manager__channels_8c_source.html#l00561">manager_channels.c:561</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2ae8b32514354ab1dd2b62121ed88593"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ae8b32514354ab1dd2b62121ed88593">&#9670;&nbsp;</a></span>agi_destroy_commands_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void agi_destroy_commands_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01530">1530</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00172">AST_LIST_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00652">AST_LIST_HEAD_DESTROY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01522">free_agi_cmd()</a>.</p>
<div class="fragment"><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;{</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db1/structagi__cmd.html">agi_cmd</a> *cmd;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#acdb4f56da6b3071d02dcce20072852b0">AST_LIST_HEAD</a>(, <a class="code" href="../../d4/db1/structagi__cmd.html">agi_cmd</a>) *chan_cmds = data;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(chan_cmds);</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;   <span class="keywordflow">while</span> ( (cmd = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(chan_cmds, <a class="code" href="../../d3/d96/structentry.html">entry</a>)) ) {</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#aeb2a37e60e82e5519f36a120c2bae28e">free_agi_cmd</a>(cmd);</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;   }</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(chan_cmds);</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a47bafe663a14b91827082787d7654d7c">AST_LIST_HEAD_DESTROY</a>(chan_cmds);</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(chan_cmds);</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="linkedlists_8h_html_acdb4f56da6b3071d02dcce20072852b0"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#acdb4f56da6b3071d02dcce20072852b0">AST_LIST_HEAD</a></div><div class="ttdeci">#define AST_LIST_HEAD(name, type)</div><div class="ttdoc">Defines a structure to be used to hold a list of specified type. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00172">linkedlists.h:172</a></div></div>
<div class="ttc" id="structagi__cmd_html"><div class="ttname"><a href="../../d4/db1/structagi__cmd.html">agi_cmd</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01516">res_agi.c:1516</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a47bafe663a14b91827082787d7654d7c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a47bafe663a14b91827082787d7654d7c">AST_LIST_HEAD_DESTROY</a></div><div class="ttdeci">#define AST_LIST_HEAD_DESTROY(head)</div><div class="ttdoc">Destroys a list head structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00652">linkedlists.h:652</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="res__agi_8c_html_aeb2a37e60e82e5519f36a120c2bae28e"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#aeb2a37e60e82e5519f36a120c2bae28e">free_agi_cmd</a></div><div class="ttdeci">static void free_agi_cmd(struct agi_cmd *cmd)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01522">res_agi.c:1522</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a93f9c23e24eadb9e9d9e0c44597d15dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93f9c23e24eadb9e9d9e0c44597d15dd">&#9670;&nbsp;</a></span>agi_exec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int agi_exec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04561">4561</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04494">agi_exec_full()</a>, and <a class="el" href="../../d4/d28/channel_8c_source.html#l00445">ast_check_hangup()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04611">deadagi_exec()</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04682">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;{</div><div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan))</div><div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#a79265756631f718546eb3198a8a2bef9">agi_exec_full</a>(chan, data, 0, 0);</div><div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#a79265756631f718546eb3198a8a2bef9">agi_exec_full</a>(chan, data, 0, 1);</div><div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;}</div><div class="ttc" id="channel_8h_html_a9c63fff1d736568d1ee332dd7ea502bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a></div><div class="ttdeci">int ast_check_hangup(struct ast_channel *chan)</div><div class="ttdoc">Check to see if a channel is needing hang up. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00445">channel.c:445</a></div></div>
<div class="ttc" id="res__agi_8c_html_a79265756631f718546eb3198a8a2bef9"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a79265756631f718546eb3198a8a2bef9">agi_exec_full</a></div><div class="ttdeci">static int agi_exec_full(struct ast_channel *chan, const char *data, int enhanced, int dead)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l04494">res_agi.c:4494</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a30e56b9b56c62f1a0cc32809f843873b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30e56b9b56c62f1a0cc32809f843873b">&#9670;&nbsp;</a></span>agi_exec_end_to_ami()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a>* agi_exec_end_to_ami </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01445">1445</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01421">agi_channel_to_ami()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01460">agi_async_end_to_ami()</a>.</p>
<div class="fragment"><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;{</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#aa6ec2aaaa7422892fcf24c44ffc3a768">agi_channel_to_ami</a>(<span class="stringliteral">&quot;AGIExecEnd&quot;</span>, message);</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;}</div><div class="ttc" id="res__agi_8c_html_aa6ec2aaaa7422892fcf24c44ffc3a768"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#aa6ec2aaaa7422892fcf24c44ffc3a768">agi_channel_to_ami</a></div><div class="ttdeci">static struct ast_manager_event_blob * agi_channel_to_ami(const char *type, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01421">res_agi.c:1421</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a79265756631f718546eb3198a8a2bef9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79265756631f718546eb3198a8a2bef9">&#9670;&nbsp;</a></span>agi_exec_full()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int agi_exec_full </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>enhanced</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dead</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04494">4494</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01413">AGI_RESULT_FAILURE</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01418">AGI_RESULT_HANGUP</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01417">AGI_RESULT_NOTFOUND</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01414">AGI_RESULT_SUCCESS</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01416">AGI_RESULT_SUCCESS_ASYNC</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01415">AGI_RESULT_SUCCESS_FAST</a>, <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02814">ast_answer()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03108">ast_safe_fork_cleanup()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">AST_STANDARD_APP_ARGS</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00042">AST_STATE_UP</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02200">launch_script()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01388">MAX_ARGS</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04112">run_agi()</a>, and <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00146">status</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04561">agi_exec()</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04569">eagi_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;{</div><div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a> res;</div><div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;   <span class="keywordtype">int</span> fds[2], efd = -1, pid = -1;</div><div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(arg)[<a class="code" href="../../dd/de9/res__agi_8c.html#a29b7451465deac204c5f7cb1f9c6e1fc">MAX_ARGS</a>];</div><div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;   );</div><div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;   <a class="code" href="../../d1/db7/structagi__state.html">AGI</a> agi;</div><div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;</div><div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(data)) {</div><div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;AGI requires an argument (script)\n&quot;</span>);</div><div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;   }</div><div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;   <span class="keywordflow">if</span> (dead)</div><div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Hungup channel detected, running agi in dead mode.\n&quot;</span>);</div><div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;   memset(&amp;agi, 0, <span class="keyword">sizeof</span>(agi));</div><div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;   buf = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, buf);</div><div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;   <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.arg[<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.argc] = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;    <span class="comment">/* Answer if need be */</span></div><div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;   <span class="keywordflow">if</span> (chan-&gt;_state != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>) {</div><div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a>(chan))</div><div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;   }</div><div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;   res = <a class="code" href="../../dd/de9/res__agi_8c.html#aa23fd9388c9b50f7c6ce209c3c1e4ac4">launch_script</a>(chan, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.arg[0], <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.argc, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.arg, fds, enhanced ? &amp;efd : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;pid);</div><div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;   <span class="comment">/* Async AGI do not require run_agi(), so just proceed if normal AGI</span></div><div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;<span class="comment">      or Fast AGI are setup with success. */</span></div><div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8">AGI_RESULT_SUCCESS</a> || res == <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1aac30d4ae19361cc243414b0ec32cbb78">AGI_RESULT_SUCCESS_FAST</a>) {</div><div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a> = 0;</div><div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;      agi.fd = fds[1];</div><div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;      agi.ctrl = fds[0];</div><div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;      agi.audio = efd;</div><div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;      agi.fast = (res == <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1aac30d4ae19361cc243414b0ec32cbb78">AGI_RESULT_SUCCESS_FAST</a>) ? 1 : 0;</div><div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;      res = <a class="code" href="../../dd/de9/res__agi_8c.html#a85e832090276a7a7c018400e2f70c853">run_agi</a>(chan, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.arg[0], &amp;agi, pid, &amp;status, dead, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.argc, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.arg);</div><div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;      <span class="comment">/* If the fork&#39;d process returns non-zero, set AGISTATUS to FAILURE */</span></div><div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;      <span class="keywordflow">if</span> ((res == <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8">AGI_RESULT_SUCCESS</a> || res == <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1aac30d4ae19361cc243414b0ec32cbb78">AGI_RESULT_SUCCESS_FAST</a>) &amp;&amp; status)</div><div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;         res = <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;      <span class="keywordflow">if</span> (fds[1] != fds[0])</div><div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;         close(fds[1]);</div><div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;      <span class="keywordflow">if</span> (efd &gt; -1)</div><div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;         close(efd);</div><div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;   }</div><div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a1044fae6847dc8986a212af0af492a23">ast_safe_fork_cleanup</a>();</div><div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;</div><div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;   <span class="keywordflow">switch</span> (res) {</div><div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8">AGI_RESULT_SUCCESS</a>:</div><div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1aac30d4ae19361cc243414b0ec32cbb78">AGI_RESULT_SUCCESS_FAST</a>:</div><div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a97eab5e05f42bf8b5da0575a67e10d7c">AGI_RESULT_SUCCESS_ASYNC</a>:</div><div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AGISTATUS&quot;</span>, <span class="stringliteral">&quot;SUCCESS&quot;</span>);</div><div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>:</div><div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AGISTATUS&quot;</span>, <span class="stringliteral">&quot;FAILURE&quot;</span>);</div><div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1ac0f8286bb33122eee66cbe710f3f5ada">AGI_RESULT_NOTFOUND</a>:</div><div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AGISTATUS&quot;</span>, <span class="stringliteral">&quot;NOTFOUND&quot;</span>);</div><div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a3efef4607e59ada98318f948f398d8fe">AGI_RESULT_HANGUP</a>:</div><div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AGISTATUS&quot;</span>, <span class="stringliteral">&quot;HANGUP&quot;</span>);</div><div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;   }</div><div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;</div><div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;}</div><div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1a3efef4607e59ada98318f948f398d8fe"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a3efef4607e59ada98318f948f398d8fe">AGI_RESULT_HANGUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01418">res_agi.c:1418</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a></div><div class="ttdeci">agi_result</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01412">res_agi.c:1412</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1a97eab5e05f42bf8b5da0575a67e10d7c"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a97eab5e05f42bf8b5da0575a67e10d7c">AGI_RESULT_SUCCESS_ASYNC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01416">res_agi.c:1416</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00042">channelstate.h:42</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1aac30d4ae19361cc243414b0ec32cbb78"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1aac30d4ae19361cc243414b0ec32cbb78">AGI_RESULT_SUCCESS_FAST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01415">res_agi.c:1415</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1ac0f8286bb33122eee66cbe710f3f5ada"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1ac0f8286bb33122eee66cbe710f3f5ada">AGI_RESULT_NOTFOUND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01417">res_agi.c:1417</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a1044fae6847dc8986a212af0af492a23"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a1044fae6847dc8986a212af0af492a23">ast_safe_fork_cleanup</a></div><div class="ttdeci">void ast_safe_fork_cleanup(void)</div><div class="ttdoc">Common routine to cleanup after fork&amp;#39;ed process is complete (if reaping was stopped) ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l03108">main/app.c:3108</a></div></div>
<div class="ttc" id="res__agi_8c_html_a85e832090276a7a7c018400e2f70c853"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a85e832090276a7a7c018400e2f70c853">run_agi</a></div><div class="ttdeci">static enum agi_result run_agi(struct ast_channel *chan, char *request, AGI *agi, int pid, int *status, int dead, int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l04112">res_agi.c:4112</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01413">res_agi.c:1413</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="res__agi_8c_html_aa23fd9388c9b50f7c6ce209c3c1e4ac4"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#aa23fd9388c9b50f7c6ce209c3c1e4ac4">launch_script</a></div><div class="ttdeci">static enum agi_result launch_script(struct ast_channel *chan, char *script, int argc, char *argv[], int *fds, int *efd, int *opid)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l02200">res_agi.c:2200</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8">AGI_RESULT_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01414">res_agi.c:1414</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="channel_8h_html_aec583a3e25358ee552a4f3df53914cd0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a></div><div class="ttdeci">int ast_answer(struct ast_channel *chan)</div><div class="ttdoc">Answer a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02814">channel.c:2814</a></div></div>
<div class="ttc" id="res__agi_8c_html_a29b7451465deac204c5f7cb1f9c6e1fc"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a29b7451465deac204c5f7cb1f9c6e1fc">MAX_ARGS</a></div><div class="ttdeci">#define MAX_ARGS</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01388">res_agi.c:1388</a></div></div>
<div class="ttc" id="structagi__state_html"><div class="ttname"><a href="../../d1/db7/structagi__state.html">agi_state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00034">agi.h:34</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad9fd39b93cf79f1a4f6341cd28429099"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9fd39b93cf79f1a4f6341cd28429099">&#9670;&nbsp;</a></span>agi_exec_start_to_ami()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a>* agi_exec_start_to_ami </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01440">1440</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01421">agi_channel_to_ami()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01460">agi_async_end_to_ami()</a>.</p>
<div class="fragment"><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;{</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#aa6ec2aaaa7422892fcf24c44ffc3a768">agi_channel_to_ami</a>(<span class="stringliteral">&quot;AGIExecStart&quot;</span>, message);</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;}</div><div class="ttc" id="res__agi_8c_html_aa6ec2aaaa7422892fcf24c44ffc3a768"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#aa6ec2aaaa7422892fcf24c44ffc3a768">agi_channel_to_ami</a></div><div class="ttdeci">static struct ast_manager_event_blob * agi_channel_to_ami(const char *type, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01421">res_agi.c:1421</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ada0f44d1c6c2dbd51b7e81aae69399d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada0f44d1c6c2dbd51b7e81aae69399d3">&#9670;&nbsp;</a></span>agi_handle_command()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a> agi_handle_command </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dead</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04021">4021</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01413">AGI_RESULT_FAILURE</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01414">AGI_RESULT_SUCCESS</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01416">AGI_RESULT_SUCCESS_ASYNC</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01120">ast_channel_publish_cached_blob()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00591">ast_json_pack()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00455">ast_module_running_ref</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00469">ast_module_unref</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02064">ast_random()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01410">ASYNC_AGI_BREAK</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00052">agi_command::dead</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03909">find_command()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00046">agi_command::handler</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01388">MAX_ARGS</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00060">agi_command::mod</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03947">parse_args()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04010">publish_async_exec_end()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00042">RESULT_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>, and <a class="el" href="../../dc/d2b/agi_8h_source.html#l00050">agi_command::usage</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01709">action_add_agi_cmd()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01787">launch_asyncagi()</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04112">run_agi()</a>.</p>
<div class="fragment"><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;{</div><div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *argv[<a class="code" href="../../dd/de9/res__agi_8c.html#a29b7451465deac204c5f7cb1f9c6e1fc">MAX_ARGS</a>] = {0};</div><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;   <span class="keywordtype">int</span> argc = <a class="code" href="../../dd/de9/res__agi_8c.html#a29b7451465deac204c5f7cb1f9c6e1fc">MAX_ARGS</a>;</div><div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;   <a class="code" href="../../dc/d52/structagi__command.html">agi_command</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;   <span class="keywordtype">char</span> *ami_cmd = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>);</div><div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *ami_res;</div><div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;   <span class="keywordtype">int</span> command_id = <a class="code" href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a>();</div><div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;   <span class="keywordtype">int</span> resultcode = 0;</div><div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, startblob, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;</div><div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;   startblob = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: i, s: s}&quot;</span>,</div><div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;              <span class="stringliteral">&quot;CommandId&quot;</span>, command_id,</div><div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;              <span class="stringliteral">&quot;Command&quot;</span>, ami_cmd);</div><div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga565fc39c360b014dd5d4054fa72bbae8">ast_channel_publish_cached_blob</a>(chan, agi_exec_start_type(), startblob);</div><div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;</div><div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#a0feb6a676d8f22a35d95b9b851e1e3a6">parse_args</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, &amp;argc, argv);</div><div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;   c = <a class="code" href="../../dd/de9/res__agi_8c.html#a2ab6d0ac0364f96dbc74ed96db27a094">find_command</a>(argv, 0);</div><div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;   <span class="keywordflow">if</span> (!c || !<a class="code" href="../../d5/d16/module_8h.html#ad2dd3dce05926913c40b883cc7cff0a8">ast_module_running_ref</a>(c-&gt;<a class="code" href="../../dc/d52/structagi__command.html#a782aff512368932b8d71b3633f88cb04">mod</a>)) {</div><div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;      ami_res = <span class="stringliteral">&quot;Invalid or unknown command&quot;</span>;</div><div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;      resultcode = 510;</div><div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;</div><div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;%d %s\n&quot;</span>, resultcode, ami_res);</div><div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;</div><div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#abfcc084fb5283b70e7eb6498a6bd6ed3">publish_async_exec_end</a>(chan, command_id, ami_cmd, resultcode, ami_res);</div><div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;</div><div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8">AGI_RESULT_SUCCESS</a>;</div><div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;   }</div><div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;</div><div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;   <span class="keywordflow">if</span> (!dead || (dead &amp;&amp; c-&gt;<a class="code" href="../../dc/d52/structagi__command.html#aba4d8edbd5cd7c809d47d25ad55bf8e5">dead</a>)) {</div><div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;      res = c-&gt;<a class="code" href="../../dc/d52/structagi__command.html#a2f6384684a07d1327f9c4525e2eacd76">handler</a>(chan, agi, argc, argv);</div><div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;      <span class="keywordflow">switch</span> (res) {</div><div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>:</div><div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;         ami_res = <span class="stringliteral">&quot;Usage&quot;</span>;</div><div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;         resultcode = 520;</div><div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;</div><div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;         <a class="code" href="../../dd/de9/res__agi_8c.html#abfcc084fb5283b70e7eb6498a6bd6ed3">publish_async_exec_end</a>(chan, command_id, ami_cmd, resultcode, ami_res);</div><div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;</div><div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(c-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ab879c8fbae669c13a54421b2a9effa55">usage</a>)) {</div><div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;            <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;520 Invalid command syntax.  Proper usage not available.\n&quot;</span>);</div><div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;            <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;520-Invalid command syntax.  Proper usage follows:\n&quot;</span>);</div><div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;            <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;%s\n&quot;</span>, c-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ab879c8fbae669c13a54421b2a9effa55">usage</a>);</div><div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;            <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;520 End of proper usage.\n&quot;</span>);</div><div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;         }</div><div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;</div><div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>:</div><div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;         ami_res = <span class="stringliteral">&quot;Failure&quot;</span>;</div><div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;         resultcode = -1;</div><div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;</div><div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;         <a class="code" href="../../dd/de9/res__agi_8c.html#abfcc084fb5283b70e7eb6498a6bd6ed3">publish_async_exec_end</a>(chan, command_id, ami_cmd, resultcode, ami_res);</div><div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;</div><div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;         <span class="comment">/* The RESULT_FAILURE code is usually because the channel hungup. */</span></div><div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../dd/de9/res__agi_8c.html#a5fcc4663e437ae0fd8b0d388050c2559">ASYNC_AGI_BREAK</a>:</div><div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;         ami_res = <span class="stringliteral">&quot;Success&quot;</span>;</div><div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;         resultcode = 200;</div><div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;</div><div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;         <a class="code" href="../../dd/de9/res__agi_8c.html#abfcc084fb5283b70e7eb6498a6bd6ed3">publish_async_exec_end</a>(chan, command_id, ami_cmd, resultcode, ami_res);</div><div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;</div><div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a97eab5e05f42bf8b5da0575a67e10d7c">AGI_RESULT_SUCCESS_ASYNC</a>;</div><div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>:</div><div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;         ami_res = <span class="stringliteral">&quot;Success&quot;</span>;</div><div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;         resultcode = 200;</div><div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;</div><div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;         <a class="code" href="../../dd/de9/res__agi_8c.html#abfcc084fb5283b70e7eb6498a6bd6ed3">publish_async_exec_end</a>(chan, command_id, ami_cmd, resultcode, ami_res);</div><div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;</div><div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;         ami_res = <span class="stringliteral">&quot;Unknown Result&quot;</span>;</div><div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;         resultcode = 200;</div><div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;</div><div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;         <a class="code" href="../../dd/de9/res__agi_8c.html#abfcc084fb5283b70e7eb6498a6bd6ed3">publish_async_exec_end</a>(chan, command_id, ami_cmd, resultcode, ami_res);</div><div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;</div><div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;      }</div><div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;      ami_res = <span class="stringliteral">&quot;Command Not Permitted on a dead channel or intercept routine&quot;</span>;</div><div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;      resultcode = 511;</div><div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;</div><div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;%d %s\n&quot;</span>, resultcode, ami_res);</div><div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;</div><div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#abfcc084fb5283b70e7eb6498a6bd6ed3">publish_async_exec_end</a>(chan, command_id, ami_cmd, resultcode, ami_res);</div><div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;   }</div><div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#a15896c26e51e8162df5eb9a0124c841f">ast_module_unref</a>(c-&gt;<a class="code" href="../../dc/d52/structagi__command.html#a782aff512368932b8d71b3633f88cb04">mod</a>);</div><div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;</div><div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8">AGI_RESULT_SUCCESS</a>;</div><div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;}</div><div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="res__agi_8c_html_a0feb6a676d8f22a35d95b9b851e1e3a6"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a0feb6a676d8f22a35d95b9b851e1e3a6">parse_args</a></div><div class="ttdeci">static int parse_args(char *s, int *max, const char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l03947">res_agi.c:3947</a></div></div>
<div class="ttc" id="structagi__command_html_a2f6384684a07d1327f9c4525e2eacd76"><div class="ttname"><a href="../../dc/d52/structagi__command.html#a2f6384684a07d1327f9c4525e2eacd76">agi_command::handler</a></div><div class="ttdeci">int(*const handler)(struct ast_channel *chan, AGI *agi, int argc, const char *const argv[])</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00046">agi.h:46</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1a97eab5e05f42bf8b5da0575a67e10d7c"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a97eab5e05f42bf8b5da0575a67e10d7c">AGI_RESULT_SUCCESS_ASYNC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01416">res_agi.c:1416</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga565fc39c360b014dd5d4054fa72bbae8"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga565fc39c360b014dd5d4054fa72bbae8">ast_channel_publish_cached_blob</a></div><div class="ttdeci">void ast_channel_publish_cached_blob(struct ast_channel *chan, struct stasis_message_type *type, struct ast_json *blob)</div><div class="ttdoc">Publish a channel blob message using the latest snapshot from the cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01120">stasis_channels.c:1120</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="structagi__command_html_ab879c8fbae669c13a54421b2a9effa55"><div class="ttname"><a href="../../dc/d52/structagi__command.html#ab879c8fbae669c13a54421b2a9effa55">agi_command::usage</a></div><div class="ttdeci">const char *const usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00050">agi.h:50</a></div></div>
<div class="ttc" id="structagi__command_html_a782aff512368932b8d71b3633f88cb04"><div class="ttname"><a href="../../dc/d52/structagi__command.html#a782aff512368932b8d71b3633f88cb04">agi_command::mod</a></div><div class="ttdeci">struct ast_module * mod</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00060">agi.h:60</a></div></div>
<div class="ttc" id="res__agi_8c_html_abfcc084fb5283b70e7eb6498a6bd6ed3"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abfcc084fb5283b70e7eb6498a6bd6ed3">publish_async_exec_end</a></div><div class="ttdeci">static void publish_async_exec_end(struct ast_channel *chan, int command_id, const char *command, int result_code, const char *result)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l04010">res_agi.c:4010</a></div></div>
<div class="ttc" id="res__agi_8c_html_a2ab6d0ac0364f96dbc74ed96db27a094"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a2ab6d0ac0364f96dbc74ed96db27a094">find_command</a></div><div class="ttdeci">static agi_command * find_command(const char *const cmds[], int exact)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l03909">res_agi.c:3909</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="module_8h_html_a15896c26e51e8162df5eb9a0124c841f"><div class="ttname"><a href="../../d5/d16/module_8h.html#a15896c26e51e8162df5eb9a0124c841f">ast_module_unref</a></div><div class="ttdeci">#define ast_module_unref(mod)</div><div class="ttdoc">Release a reference to the module. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00469">module.h:469</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structagi__command_html_aba4d8edbd5cd7c809d47d25ad55bf8e5"><div class="ttname"><a href="../../dc/d52/structagi__command.html#aba4d8edbd5cd7c809d47d25ad55bf8e5">agi_command::dead</a></div><div class="ttdeci">const int dead</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00052">agi.h:52</a></div></div>
<div class="ttc" id="res__agi_8c_html_a5fcc4663e437ae0fd8b0d388050c2559"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a5fcc4663e437ae0fd8b0d388050c2559">ASYNC_AGI_BREAK</a></div><div class="ttdeci">#define ASYNC_AGI_BREAK</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01410">res_agi.c:1410</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="utils_8h_html_a7b4f10b070e95ba413e258a3e4b03c20"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a></div><div class="ttdeci">long int ast_random(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02064">main/utils.c:2064</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01413">res_agi.c:1413</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structagi__command_html"><div class="ttname"><a href="../../dc/d52/structagi__command.html">agi_command</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00042">agi.h:42</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8">AGI_RESULT_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01414">res_agi.c:1414</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="module_8h_html_ad2dd3dce05926913c40b883cc7cff0a8"><div class="ttname"><a href="../../d5/d16/module_8h.html#ad2dd3dce05926913c40b883cc7cff0a8">ast_module_running_ref</a></div><div class="ttdeci">#define ast_module_running_ref(mod)</div><div class="ttdoc">Hold a reference to the module if it is running. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00455">module.h:455</a></div></div>
<div class="ttc" id="res__agi_8c_html_a29b7451465deac204c5f7cb1f9c6e1fc"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a29b7451465deac204c5f7cb1f9c6e1fc">MAX_ARGS</a></div><div class="ttdeci">#define MAX_ARGS</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01388">res_agi.c:1388</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="cli_8h_html_aea87ce97f86effb2c4df6274d4aac567"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a></div><div class="ttdeci">#define RESULT_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00042">cli.h:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a990ea57f634560839acbaa3047fc4942"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a990ea57f634560839acbaa3047fc4942">&#9670;&nbsp;</a></span>ast_agi_register()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>() ast_agi_register </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td>
          <td class="paramname"><em>mod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d52/structagi__command.html">agi_command</a> *&#160;</td>
          <td class="paramname"><em>cmd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03783">3783</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00483">ast_join</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d1/d99/xmldoc_8h_source.html#l00032">AST_STATIC_DOC</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d1/d99/xmldoc_8h_source.html#l00031">AST_XML_DOC</a>, <a class="el" href="../../d8/d2f/xmldoc_8c_source.html#l02250">ast_xmldoc_build_description()</a>, <a class="el" href="../../d8/d2f/xmldoc_8c_source.html#l01698">ast_xmldoc_build_seealso()</a>, <a class="el" href="../../d8/d2f/xmldoc_8c_source.html#l02227">ast_xmldoc_build_synopsis()</a>, <a class="el" href="../../d8/d2f/xmldoc_8c_source.html#l01253">ast_xmldoc_build_syntax()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03909">find_command()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01389">MAX_CMD_LEN</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03863">ast_agi_register_multiple()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04625">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d1/d71/app__stack_8c_source.html#l01295">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;{</div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;   <span class="keywordtype">char</span> fullcmd[<a class="code" href="../../dd/de9/res__agi_8c.html#a1eb73c104b484cf18752169509cebfe2">MAX_CMD_LEN</a>];</div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;</div><div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aea6bd3799329d5811098c41b6c201c45">ast_join</a>(fullcmd, <span class="keyword">sizeof</span>(fullcmd), cmd-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ad9605fda9da9c3b6965fb5f78a8c6cfd">cmda</a>);</div><div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;</div><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dd/de9/res__agi_8c.html#a2ab6d0ac0364f96dbc74ed96db27a094">find_command</a>(cmd-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ad9605fda9da9c3b6965fb5f78a8c6cfd">cmda</a>, 1)) {</div><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;      *((<span class="keyword">enum</span> <a class="code" href="../../d1/d99/xmldoc_8h.html#a8717a951656993c40bd851ebf50f58e3">ast_doc_src</a> *) &amp;cmd-&gt;<a class="code" href="../../dc/d52/structagi__command.html#aa871ca3c361d229d4e37edf3c6016cc1">docsrc</a>) = <a class="code" href="../../d1/d99/xmldoc_8h.html#a8717a951656993c40bd851ebf50f58e3a7273ed64a1fd4a93692986eac376124a">AST_STATIC_DOC</a>;</div><div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cmd-&gt;<a class="code" href="../../dc/d52/structagi__command.html#a54841ced0ab497a0d3a8d5f244159a6b">summary</a>) &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cmd-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ab879c8fbae669c13a54421b2a9effa55">usage</a>)) {</div><div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;<span class="preprocessor">#ifdef AST_XML_DOCS</span></div><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;         *((<span class="keywordtype">char</span> **) &amp;cmd-&gt;<a class="code" href="../../dc/d52/structagi__command.html#a54841ced0ab497a0d3a8d5f244159a6b">summary</a>) = <a class="code" href="../../d1/d99/xmldoc_8h.html#ada5725df0394b62d812bc36d3471b702">ast_xmldoc_build_synopsis</a>(<span class="stringliteral">&quot;agi&quot;</span>, fullcmd, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;         *((<span class="keywordtype">char</span> **) &amp;cmd-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ab879c8fbae669c13a54421b2a9effa55">usage</a>) = <a class="code" href="../../d1/d99/xmldoc_8h.html#a8f573b7eed021cfcb8c3e7a839c98c73">ast_xmldoc_build_description</a>(<span class="stringliteral">&quot;agi&quot;</span>, fullcmd, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;         *((<span class="keywordtype">char</span> **) &amp;cmd-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ad6a56ddbc0ac64c90a74204e7ef656b8">syntax</a>) = <a class="code" href="../../d1/d99/xmldoc_8h.html#a5c52185fee8531c7e071227b4e5b2ae6">ast_xmldoc_build_syntax</a>(<span class="stringliteral">&quot;agi&quot;</span>, fullcmd, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;         *((<span class="keywordtype">char</span> **) &amp;cmd-&gt;<a class="code" href="../../dc/d52/structagi__command.html#acbb7097e2a2a730df31c412bb547e247">seealso</a>) = <a class="code" href="../../d1/d99/xmldoc_8h.html#a5213452e6be61321a64293e54e4b550b">ast_xmldoc_build_seealso</a>(<span class="stringliteral">&quot;agi&quot;</span>, fullcmd, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;         *((<span class="keyword">enum</span> <a class="code" href="../../d1/d99/xmldoc_8h.html#a8717a951656993c40bd851ebf50f58e3">ast_doc_src</a> *) &amp;cmd-&gt;<a class="code" href="../../dc/d52/structagi__command.html#aa871ca3c361d229d4e37edf3c6016cc1">docsrc</a>) = <a class="code" href="../../d1/d99/xmldoc_8h.html#a8717a951656993c40bd851ebf50f58e3a24212840b7b1b0e9c1eebc8cfd89ab3e">AST_XML_DOC</a>;</div><div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;<span class="preprocessor">#ifndef HAVE_NULLSAFE_PRINTF</span></div><div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;         <span class="keywordflow">if</span> (!cmd-&gt;<a class="code" href="../../dc/d52/structagi__command.html#a54841ced0ab497a0d3a8d5f244159a6b">summary</a>) {</div><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;            *((<span class="keywordtype">char</span> **) &amp;cmd-&gt;<a class="code" href="../../dc/d52/structagi__command.html#a54841ced0ab497a0d3a8d5f244159a6b">summary</a>) = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;         }</div><div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;         <span class="keywordflow">if</span> (!cmd-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ab879c8fbae669c13a54421b2a9effa55">usage</a>) {</div><div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;            *((<span class="keywordtype">char</span> **) &amp;cmd-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ab879c8fbae669c13a54421b2a9effa55">usage</a>) = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;         }</div><div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;         <span class="keywordflow">if</span> (!cmd-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ad6a56ddbc0ac64c90a74204e7ef656b8">syntax</a>) {</div><div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;            *((<span class="keywordtype">char</span> **) &amp;cmd-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ad6a56ddbc0ac64c90a74204e7ef656b8">syntax</a>) = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;         }</div><div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;         <span class="keywordflow">if</span> (!cmd-&gt;<a class="code" href="../../dc/d52/structagi__command.html#acbb7097e2a2a730df31c412bb547e247">seealso</a>) {</div><div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;            *((<span class="keywordtype">char</span> **) &amp;cmd-&gt;<a class="code" href="../../dc/d52/structagi__command.html#acbb7097e2a2a730df31c412bb547e247">seealso</a>) = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;         }</div><div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;      }</div><div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;</div><div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;      cmd-&gt;<a class="code" href="../../dc/d52/structagi__command.html#a782aff512368932b8d71b3633f88cb04">mod</a> = mod;</div><div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a>);</div><div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a>, cmd, list);</div><div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a>);</div><div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;AGI Command &#39;%s&#39; registered\n&quot;</span>,fullcmd);</div><div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Command already registered!\n&quot;</span>);</div><div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;   }</div><div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;}</div><div class="ttc" id="structagi__command_html_a54841ced0ab497a0d3a8d5f244159a6b"><div class="ttname"><a href="../../dc/d52/structagi__command.html#a54841ced0ab497a0d3a8d5f244159a6b">agi_command::summary</a></div><div class="ttdeci">const char *const summary</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00048">agi.h:48</a></div></div>
<div class="ttc" id="structagi__command_html_acbb7097e2a2a730df31c412bb547e247"><div class="ttname"><a href="../../dc/d52/structagi__command.html#acbb7097e2a2a730df31c412bb547e247">agi_command::seealso</a></div><div class="ttdeci">const char *const seealso</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00056">agi.h:56</a></div></div>
<div class="ttc" id="structagi__commands_html"><div class="ttname"><a href="../../d7/de8/structagi__commands.html">agi_commands</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l03755">res_agi.c:3755</a></div></div>
<div class="ttc" id="xmldoc_8h_html_a8717a951656993c40bd851ebf50f58e3a7273ed64a1fd4a93692986eac376124a"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html#a8717a951656993c40bd851ebf50f58e3a7273ed64a1fd4a93692986eac376124a">AST_STATIC_DOC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d99/xmldoc_8h_source.html#l00032">xmldoc.h:32</a></div></div>
<div class="ttc" id="strings_8h_html_aea6bd3799329d5811098c41b6c201c45"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aea6bd3799329d5811098c41b6c201c45">ast_join</a></div><div class="ttdeci">#define ast_join(s, len, w)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00483">strings.h:483</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structagi__command_html_ab879c8fbae669c13a54421b2a9effa55"><div class="ttname"><a href="../../dc/d52/structagi__command.html#ab879c8fbae669c13a54421b2a9effa55">agi_command::usage</a></div><div class="ttdeci">const char *const usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00050">agi.h:50</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="xmldoc_8h_html_a8f573b7eed021cfcb8c3e7a839c98c73"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html#a8f573b7eed021cfcb8c3e7a839c98c73">ast_xmldoc_build_description</a></div><div class="ttdeci">char * ast_xmldoc_build_description(const char *type, const char *name, const char *module)</div><div class="ttdoc">Generate description documentation from XML. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d2f/xmldoc_8c_source.html#l02250">xmldoc.c:2250</a></div></div>
<div class="ttc" id="structagi__command_html_a782aff512368932b8d71b3633f88cb04"><div class="ttname"><a href="../../dc/d52/structagi__command.html#a782aff512368932b8d71b3633f88cb04">agi_command::mod</a></div><div class="ttdeci">struct ast_module * mod</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00060">agi.h:60</a></div></div>
<div class="ttc" id="xmldoc_8h_html_a8717a951656993c40bd851ebf50f58e3a24212840b7b1b0e9c1eebc8cfd89ab3e"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html#a8717a951656993c40bd851ebf50f58e3a24212840b7b1b0e9c1eebc8cfd89ab3e">AST_XML_DOC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d99/xmldoc_8h_source.html#l00031">xmldoc.h:31</a></div></div>
<div class="ttc" id="res__agi_8c_html_a2ab6d0ac0364f96dbc74ed96db27a094"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a2ab6d0ac0364f96dbc74ed96db27a094">find_command</a></div><div class="ttdeci">static agi_command * find_command(const char *const cmds[], int exact)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l03909">res_agi.c:3909</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="xmldoc_8h_html_ada5725df0394b62d812bc36d3471b702"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html#ada5725df0394b62d812bc36d3471b702">ast_xmldoc_build_synopsis</a></div><div class="ttdeci">char * ast_xmldoc_build_synopsis(const char *type, const char *name, const char *module)</div><div class="ttdoc">Generate synopsis documentation from XML. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d2f/xmldoc_8c_source.html#l02227">xmldoc.c:2227</a></div></div>
<div class="ttc" id="xmldoc_8h_html_a8717a951656993c40bd851ebf50f58e3"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html#a8717a951656993c40bd851ebf50f58e3">ast_doc_src</a></div><div class="ttdeci">ast_doc_src</div><div class="ttdoc">From where the documentation come from, this structure is useful for use it inside application/functi...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d99/xmldoc_8h_source.html#l00030">xmldoc.h:30</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="res__agi_8c_html_a1eb73c104b484cf18752169509cebfe2"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a1eb73c104b484cf18752169509cebfe2">MAX_CMD_LEN</a></div><div class="ttdeci">#define MAX_CMD_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01389">res_agi.c:1389</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structagi__command_html_ad6a56ddbc0ac64c90a74204e7ef656b8"><div class="ttname"><a href="../../dc/d52/structagi__command.html#ad6a56ddbc0ac64c90a74204e7ef656b8">agi_command::syntax</a></div><div class="ttdeci">const char *const syntax</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00054">agi.h:54</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="structagi__command_html_ad9605fda9da9c3b6965fb5f78a8c6cfd"><div class="ttname"><a href="../../dc/d52/structagi__command.html#ad9605fda9da9c3b6965fb5f78a8c6cfd">agi_command::cmda</a></div><div class="ttdeci">const char *const cmda[AST_MAX_CMD_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00043">agi.h:43</a></div></div>
<div class="ttc" id="xmldoc_8h_html_a5c52185fee8531c7e071227b4e5b2ae6"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html#a5c52185fee8531c7e071227b4e5b2ae6">ast_xmldoc_build_syntax</a></div><div class="ttdeci">char * ast_xmldoc_build_syntax(const char *type, const char *name, const char *module)</div><div class="ttdoc">Get the syntax for a specified application or function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d2f/xmldoc_8c_source.html#l01253">xmldoc.c:1253</a></div></div>
<div class="ttc" id="xmldoc_8h_html_a5213452e6be61321a64293e54e4b550b"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html#a5213452e6be61321a64293e54e4b550b">ast_xmldoc_build_seealso</a></div><div class="ttdeci">char * ast_xmldoc_build_seealso(const char *type, const char *name, const char *module)</div><div class="ttdoc">Parse the &lt;see-also&gt; node content. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d2f/xmldoc_8c_source.html#l01698">xmldoc.c:1698</a></div></div>
<div class="ttc" id="structagi__command_html_aa871ca3c361d229d4e37edf3c6016cc1"><div class="ttname"><a href="../../dc/d52/structagi__command.html#aa871ca3c361d229d4e37edf3c6016cc1">agi_command::docsrc</a></div><div class="ttdeci">enum ast_doc_src docsrc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00058">agi.h:58</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae0bde1af9d469a32161ab8f45857592a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0bde1af9d469a32161ab8f45857592a">&#9670;&nbsp;</a></span>ast_agi_register_multiple()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>() ast_agi_register_multiple </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td>
          <td class="paramname"><em>mod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dc/d52/structagi__command.html">agi_command</a> *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03863">3863</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03783">ast_agi_register()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03827">ast_agi_unregister()</a>, and <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d2b/agi_8h_source.html#l00091">__stub__ast_agi_unregister()</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04682">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;{</div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, x = 0;</div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;</div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>; i++) {</div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/de9/res__agi_8c.html#a990ea57f634560839acbaa3047fc4942">ast_agi_register</a>(mod, cmd + i) == 1) {</div><div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;         x++;</div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;      }</div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;</div><div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;      <span class="comment">/* registration failed, unregister everything</span></div><div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;<span class="comment">         that had been registered up to that point</span></div><div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;<span class="comment">      */</span></div><div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;      <span class="keywordflow">for</span> (; x &gt; 0; x--) {</div><div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;         <span class="comment">/* we are intentionally ignoring the</span></div><div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;<span class="comment">            result of ast_agi_unregister() here,</span></div><div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;<span class="comment">            but it should be safe to do so since</span></div><div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;<span class="comment">            we just registered these commands and</span></div><div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;<span class="comment">            the only possible way for unregistration</span></div><div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;<span class="comment">            to fail is if the command is not</span></div><div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;<span class="comment">            registered</span></div><div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;         (void) <a class="code" href="../../dd/de9/res__agi_8c.html#a576d2a78660b5eba358b1d26547b8132">ast_agi_unregister</a>(cmd + x - 1);</div><div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;      }</div><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;   }</div><div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;</div><div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;}</div><div class="ttc" id="res__agi_8c_html_a576d2a78660b5eba358b1d26547b8132"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a576d2a78660b5eba358b1d26547b8132">ast_agi_unregister</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_unregister(agi_command *cmd)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l03827">res_agi.c:3827</a></div></div>
<div class="ttc" id="res__agi_8c_html_a990ea57f634560839acbaa3047fc4942"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a990ea57f634560839acbaa3047fc4942">ast_agi_register</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_register(struct ast_module *mod, agi_command *cmd)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l03783">res_agi.c:3783</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adee1cbdd14817c3a077b8dd109f7934a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adee1cbdd14817c3a077b8dd109f7934a">&#9670;&nbsp;</a></span>ast_agi_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>() ast_agi_send </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">1486</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01483">agi_buf</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01484">AGI_BUF_INITSIZE</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01400">agidebug</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01592">ast_carefulwrite()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00982">ast_str_set_va()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00688">ast_str_strlen()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00861">ast_str_thread_get()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02207">ast_verbose()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d2b/agi_8h_source.html#l00127">__stub__ast_agi_unregister_multiple()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04021">agi_handle_command()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02364">handle_answer()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02376">handle_asyncagi_break()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03078">handle_autohangup()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03179">handle_channelstatus()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02495">handle_controlstreamfile()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03334">handle_dbdel()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03345">handle_dbdeltree()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03290">handle_dbget()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03323">handle_dbput()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03128">handle_exec()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02834">handle_getdata()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02616">handle_getoption()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03216">handle_getvariable()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03239">handle_getvariablefull()</a>, <a class="el" href="../../d1/d71/app__stack_8c_source.html#l01118">handle_gosub()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03100">handle_hangup()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03391">handle_noop()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02899">handle_recordfile()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02414">handle_recvchar()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02434">handle_recvtext()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02716">handle_sayalpha()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02756">handle_saydate()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02786">handle_saydatetime()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02700">handle_saydigits()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02685">handle_saynumber()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02820">handle_sayphonetic()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02771">handle_saytime()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02479">handle_sendimage()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02395">handle_sendtext()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03158">handle_setcallerid()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02861">handle_setcontext()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02871">handle_setextension()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03397">handle_setmusic()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02880">handle_setpriority()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03203">handle_setvariable()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03501">handle_speechactivategrammar()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03410">handle_speechcreate()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03519">handle_speechdeactivategrammar()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03452">handle_speechdestroy()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03465">handle_speechloadgrammar()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03556">handle_speechrecognize()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03434">handle_speechset()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03483">handle_speechunloadgrammar()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02557">handle_streamfile()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02451">handle_tddmode()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03273">handle_verbose()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02382">handle_waitfordigit()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02053">launch_netscript()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04112">run_agi()</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02318">setup_env()</a>.</p>
<div class="fragment"><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;{</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;   va_list ap;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;   <span class="keywordflow">if</span> (!(buf = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../dd/de9/res__agi_8c.html#a80c30395a4c4fa9d8164ebc3608010e6">agi_buf</a>, <a class="code" href="../../dd/de9/res__agi_8c.html#aac3502538abd25c04158ea6d06c182d6">AGI_BUF_INITSIZE</a>)))</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;   va_start(ap, fmt);</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;   res = <a class="code" href="../../d6/d90/strings_8h.html#a271350c7540474095b75cbea17d4837a">ast_str_set_va</a>(&amp;buf, 0, fmt, ap);</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;   va_end(ap);</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;   <span class="keywordflow">if</span> (res == -1) {</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Out of memory\n&quot;</span>);</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;   }</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/de9/res__agi_8c.html#a9e4d6534e259785ec604fa072e049325">agidebug</a>) {</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;      <span class="keywordflow">if</span> (chan) {</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;&lt;%s&gt;AGI Tx &gt;&gt; %s&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(buf));</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;AGI Tx &gt;&gt; %s&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(buf));</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      }</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;   }</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d60/utils_8h.html#a38faf2987c375335b2773964aabf69b3">ast_carefulwrite</a>(fd, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(buf), <a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(buf), 100);</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;}</div><div class="ttc" id="res__agi_8c_html_a9e4d6534e259785ec604fa072e049325"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a9e4d6534e259785ec604fa072e049325">agidebug</a></div><div class="ttdeci">static int agidebug</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01400">res_agi.c:1400</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="utils_8h_html_a38faf2987c375335b2773964aabf69b3"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a38faf2987c375335b2773964aabf69b3">ast_carefulwrite</a></div><div class="ttdeci">int ast_carefulwrite(int fd, char *s, int len, int timeoutms)</div><div class="ttdoc">Try to write string, but wait no more than ms milliseconds before timing out. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01592">main/utils.c:1592</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="strings_8h_html_a271350c7540474095b75cbea17d4837a"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a271350c7540474095b75cbea17d4837a">ast_str_set_va</a></div><div class="ttdeci">int ast_str_set_va(struct ast_str **buf, ssize_t max_len, const char *fmt, va_list ap)</div><div class="ttdoc">Set a dynamic string from a va_list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00982">strings.h:982</a></div></div>
<div class="ttc" id="extconf_8c_html_a81d26348827b996085d4cb6be3e2c348"><div class="ttname"><a href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a></div><div class="ttdeci">void ast_verbose(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02207">extconf.c:2207</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="res__agi_8c_html_aac3502538abd25c04158ea6d06c182d6"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#aac3502538abd25c04158ea6d06c182d6">AGI_BUF_INITSIZE</a></div><div class="ttdeci">#define AGI_BUF_INITSIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01484">res_agi.c:1484</a></div></div>
<div class="ttc" id="res__agi_8c_html_a80c30395a4c4fa9d8164ebc3608010e6"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a80c30395a4c4fa9d8164ebc3608010e6">agi_buf</a></div><div class="ttdeci">static struct ast_threadstorage agi_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01483">res_agi.c:1483</a></div></div>
<div class="ttc" id="strings_8h_html_aabc005bd1c7e249e8f8659d57d4500b6"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a></div><div class="ttdeci">size_t ast_str_strlen(const struct ast_str *buf)</div><div class="ttdoc">Returns the current length of the string stored within buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00688">strings.h:688</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="strings_8h_html_afe8f5f844f2fd5f5bd5d0be5ef671481"><div class="ttname"><a href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a></div><div class="ttdeci">struct ast_str * ast_str_thread_get(struct ast_threadstorage *ts, size_t init_len)</div><div class="ttdoc">Retrieve a thread locally stored dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00861">strings.h:861</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a576d2a78660b5eba358b1d26547b8132"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a576d2a78660b5eba358b1d26547b8132">&#9670;&nbsp;</a></span>ast_agi_unregister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>() ast_agi_unregister </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d52/structagi__command.html">agi_command</a> *&#160;</td>
          <td class="paramname"><em>cmd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03827">3827</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00483">ast_join</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00569">AST_RWLIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d1/d99/xmldoc_8h_source.html#l00031">AST_XML_DOC</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00058">agi_command::docsrc</a>, <a class="el" href="../../dc/d52/structagi__command.html#af00a83dd0d12d02e79d4014beeacabfa">agi_command::list</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01389">MAX_CMD_LEN</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00056">agi_command::seealso</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00048">agi_command::summary</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00054">agi_command::syntax</a>, and <a class="el" href="../../dc/d2b/agi_8h_source.html#l00050">agi_command::usage</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d2b/agi_8h_source.html#l00078">__stub__ast_agi_register()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03863">ast_agi_register_multiple()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03893">ast_agi_unregister_multiple()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04625">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d1/d71/app__stack_8c_source.html#l01278">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;{</div><div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d52/structagi__command.html">agi_command</a> *e;</div><div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;   <span class="keywordtype">int</span> unregistered = 0;</div><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;   <span class="keywordtype">char</span> fullcmd[<a class="code" href="../../dd/de9/res__agi_8c.html#a1eb73c104b484cf18752169509cebfe2">MAX_CMD_LEN</a>];</div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;</div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aea6bd3799329d5811098c41b6c201c45">ast_join</a>(fullcmd, <span class="keyword">sizeof</span>(fullcmd), cmd-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ad9605fda9da9c3b6965fb5f78a8c6cfd">cmda</a>);</div><div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;</div><div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a>);</div><div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a>, e, <a class="code" href="../../dc/d52/structagi__command.html#af00a83dd0d12d02e79d4014beeacabfa">list</a>) {</div><div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;      <span class="keywordflow">if</span> (cmd == e) {</div><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a>(<a class="code" href="../../dc/d52/structagi__command.html#af00a83dd0d12d02e79d4014beeacabfa">list</a>);</div><div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;<span class="preprocessor">#ifdef AST_XML_DOCS</span></div><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;         <span class="keywordflow">if</span> (e-&gt;<a class="code" href="../../dc/d52/structagi__command.html#aa871ca3c361d229d4e37edf3c6016cc1">docsrc</a> == <a class="code" href="../../d1/d99/xmldoc_8h.html#a8717a951656993c40bd851ebf50f58e3a24212840b7b1b0e9c1eebc8cfd89ab3e">AST_XML_DOC</a>) {</div><div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>((<span class="keywordtype">char</span> *) e-&gt;<a class="code" href="../../dc/d52/structagi__command.html#a54841ced0ab497a0d3a8d5f244159a6b">summary</a>);</div><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>((<span class="keywordtype">char</span> *) e-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ab879c8fbae669c13a54421b2a9effa55">usage</a>);</div><div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>((<span class="keywordtype">char</span> *) e-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ad6a56ddbc0ac64c90a74204e7ef656b8">syntax</a>);</div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>((<span class="keywordtype">char</span> *) e-&gt;<a class="code" href="../../dc/d52/structagi__command.html#acbb7097e2a2a730df31c412bb547e247">seealso</a>);</div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;            *((<span class="keywordtype">char</span> **) &amp;e-&gt;<a class="code" href="../../dc/d52/structagi__command.html#a54841ced0ab497a0d3a8d5f244159a6b">summary</a>) = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;            *((<span class="keywordtype">char</span> **) &amp;e-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ab879c8fbae669c13a54421b2a9effa55">usage</a>) = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;            *((<span class="keywordtype">char</span> **) &amp;e-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ad6a56ddbc0ac64c90a74204e7ef656b8">syntax</a>) = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;            *((<span class="keywordtype">char</span> **) &amp;e-&gt;<a class="code" href="../../dc/d52/structagi__command.html#acbb7097e2a2a730df31c412bb547e247">seealso</a>) = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;         }</div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;         unregistered=1;</div><div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;      }</div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;   }</div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a>);</div><div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;   <span class="keywordflow">if</span> (unregistered) {</div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;AGI Command &#39;%s&#39; unregistered\n&quot;</span>,fullcmd);</div><div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;   }</div><div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;   <span class="keywordflow">return</span> unregistered;</div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;}</div><div class="ttc" id="structagi__command_html_a54841ced0ab497a0d3a8d5f244159a6b"><div class="ttname"><a href="../../dc/d52/structagi__command.html#a54841ced0ab497a0d3a8d5f244159a6b">agi_command::summary</a></div><div class="ttdeci">const char *const summary</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00048">agi.h:48</a></div></div>
<div class="ttc" id="structagi__command_html_acbb7097e2a2a730df31c412bb547e247"><div class="ttname"><a href="../../dc/d52/structagi__command.html#acbb7097e2a2a730df31c412bb547e247">agi_command::seealso</a></div><div class="ttdeci">const char *const seealso</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00056">agi.h:56</a></div></div>
<div class="ttc" id="structagi__commands_html"><div class="ttname"><a href="../../d7/de8/structagi__commands.html">agi_commands</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l03755">res_agi.c:3755</a></div></div>
<div class="ttc" id="strings_8h_html_aea6bd3799329d5811098c41b6c201c45"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aea6bd3799329d5811098c41b6c201c45">ast_join</a></div><div class="ttdeci">#define ast_join(s, len, w)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00483">strings.h:483</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="structagi__command_html_ab879c8fbae669c13a54421b2a9effa55"><div class="ttname"><a href="../../dc/d52/structagi__command.html#ab879c8fbae669c13a54421b2a9effa55">agi_command::usage</a></div><div class="ttdeci">const char *const usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00050">agi.h:50</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="xmldoc_8h_html_a8717a951656993c40bd851ebf50f58e3a24212840b7b1b0e9c1eebc8cfd89ab3e"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html#a8717a951656993c40bd851ebf50f58e3a24212840b7b1b0e9c1eebc8cfd89ab3e">AST_XML_DOC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d99/xmldoc_8h_source.html#l00031">xmldoc.h:31</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="res__agi_8c_html_a1eb73c104b484cf18752169509cebfe2"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a1eb73c104b484cf18752169509cebfe2">MAX_CMD_LEN</a></div><div class="ttdeci">#define MAX_CMD_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01389">res_agi.c:1389</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a02212548652c9eb0f3db38dc4e4bd285"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00569">linkedlists.h:569</a></div></div>
<div class="ttc" id="structagi__command_html_ad6a56ddbc0ac64c90a74204e7ef656b8"><div class="ttname"><a href="../../dc/d52/structagi__command.html#ad6a56ddbc0ac64c90a74204e7ef656b8">agi_command::syntax</a></div><div class="ttdeci">const char *const syntax</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00054">agi.h:54</a></div></div>
<div class="ttc" id="structagi__command_html"><div class="ttname"><a href="../../dc/d52/structagi__command.html">agi_command</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00042">agi.h:42</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="structagi__command_html_ad9605fda9da9c3b6965fb5f78a8c6cfd"><div class="ttname"><a href="../../dc/d52/structagi__command.html#ad9605fda9da9c3b6965fb5f78a8c6cfd">agi_command::cmda</a></div><div class="ttdeci">const char *const cmda[AST_MAX_CMD_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00043">agi.h:43</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structagi__command_html_af00a83dd0d12d02e79d4014beeacabfa"><div class="ttname"><a href="../../dc/d52/structagi__command.html#af00a83dd0d12d02e79d4014beeacabfa">agi_command::list</a></div><div class="ttdeci">struct agi_command::@219 list</div></div>
<div class="ttc" id="structagi__command_html_aa871ca3c361d229d4e37edf3c6016cc1"><div class="ttname"><a href="../../dc/d52/structagi__command.html#aa871ca3c361d229d4e37edf3c6016cc1">agi_command::docsrc</a></div><div class="ttdeci">enum ast_doc_src docsrc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00058">agi.h:58</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a32bc910dfa4883b8db27783be9038c7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32bc910dfa4883b8db27783be9038c7b">&#9670;&nbsp;</a></span>ast_agi_unregister_multiple()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>() ast_agi_unregister_multiple </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d52/structagi__command.html">agi_command</a> *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03893">3893</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03827">ast_agi_unregister()</a>, and <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d2b/agi_8h_source.html#l00110">__stub__ast_agi_register_multiple()</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04664">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;{</div><div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div><div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;</div><div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>; i++) {</div><div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;      <span class="comment">/* remember whether any of the unregistration</span></div><div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;<span class="comment">         attempts failed... there is no recourse if</span></div><div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;<span class="comment">         any of them do</span></div><div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;<span class="comment">      */</span></div><div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;      res |= <a class="code" href="../../dd/de9/res__agi_8c.html#a576d2a78660b5eba358b1d26547b8132">ast_agi_unregister</a>(cmd + i);</div><div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;   }</div><div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;</div><div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;}</div><div class="ttc" id="res__agi_8c_html_a576d2a78660b5eba358b1d26547b8132"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a576d2a78660b5eba358b1d26547b8132">ast_agi_unregister</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_unregister(agi_command *cmd)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l03827">res_agi.c:3827</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04715">4715</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

</div>
</div>
<a id="a06806f3c6d0f8a44e80884526d243f3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06806f3c6d0f8a44e80884526d243f3a">&#9670;&nbsp;</a></span>AST_TEST_DEFINE()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">test_agi_null_docs&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04625">4625</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03783">ast_agi_register()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03827">ast_agi_unregister()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03391">handle_noop()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00342">ast_module_info::self</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00054">agi_command::syntax</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../dc/d2b/agi_8h_source.html#l00050">agi_command::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;{</div><div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;   <span class="keywordtype">int</span> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d52/structagi__command.html">agi_command</a> noop_command =</div><div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;      { { <span class="stringliteral">&quot;testnoop&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> }, <a class="code" href="../../dd/de9/res__agi_8c.html#a6bb7f30afbd30476b7569b9cc518fd45">handle_noop</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0 };</div><div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;</div><div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;null_agi_docs&quot;</span>;</div><div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/res/agi/&quot;</span>;</div><div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;AGI command with no documentation&quot;</span>;</div><div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test whether an AGI command with no documentation will crash Asterisk&quot;</span>;</div><div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;   }</div><div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;</div><div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/de9/res__agi_8c.html#a990ea57f634560839acbaa3047fc4942">ast_agi_register</a>(<a class="code" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>-&gt;<a class="code" href="../../dd/d5f/structast__module__info.html#a1aff0615d43e1dfa5c72c1c7d1c6d709">self</a>, &amp;noop_command) == 0) {</div><div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Unable to register testnoop command, because res_agi is not loaded.\n&quot;</span>);</div><div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;   }</div><div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;</div><div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;<span class="preprocessor">#ifndef HAVE_NULLSAFE_PRINTF</span></div><div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;   <span class="comment">/* Test for condition without actually crashing Asterisk */</span></div><div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;   <span class="keywordflow">if</span> (noop_command.<a class="code" href="../../dc/d52/structagi__command.html#ab879c8fbae669c13a54421b2a9effa55">usage</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;AGI testnoop usage was not updated properly.\n&quot;</span>);</div><div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;   }</div><div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;   <span class="keywordflow">if</span> (noop_command.<a class="code" href="../../dc/d52/structagi__command.html#ad6a56ddbc0ac64c90a74204e7ef656b8">syntax</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;AGI testnoop syntax was not updated properly.\n&quot;</span>);</div><div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;   }</div><div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;</div><div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#a576d2a78660b5eba358b1d26547b8132">ast_agi_unregister</a>(&amp;noop_command);</div><div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;}</div><div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="structast__module__info_html"><div class="ttname"><a href="../../dd/d5f/structast__module__info.html">ast_module_info</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00336">module.h:336</a></div></div>
<div class="ttc" id="res__agi_8c_html_a576d2a78660b5eba358b1d26547b8132"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a576d2a78660b5eba358b1d26547b8132">ast_agi_unregister</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_unregister(agi_command *cmd)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l03827">res_agi.c:3827</a></div></div>
<div class="ttc" id="structagi__command_html_ab879c8fbae669c13a54421b2a9effa55"><div class="ttname"><a href="../../dc/d52/structagi__command.html#ab879c8fbae669c13a54421b2a9effa55">agi_command::usage</a></div><div class="ttdeci">const char *const usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00050">agi.h:50</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="structast__module__info_html_a1aff0615d43e1dfa5c72c1c7d1c6d709"><div class="ttname"><a href="../../dd/d5f/structast__module__info.html#a1aff0615d43e1dfa5c72c1c7d1c6d709">ast_module_info::self</a></div><div class="ttdeci">struct ast_module * self</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00342">module.h:342</a></div></div>
<div class="ttc" id="res__agi_8c_html_a990ea57f634560839acbaa3047fc4942"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a990ea57f634560839acbaa3047fc4942">ast_agi_register</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_register(struct ast_module *mod, agi_command *cmd)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l03783">res_agi.c:3783</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="structagi__command_html_ad6a56ddbc0ac64c90a74204e7ef656b8"><div class="ttname"><a href="../../dc/d52/structagi__command.html#ad6a56ddbc0ac64c90a74204e7ef656b8">agi_command::syntax</a></div><div class="ttdeci">const char *const syntax</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00054">agi.h:54</a></div></div>
<div class="ttc" id="structagi__command_html"><div class="ttname"><a href="../../dc/d52/structagi__command.html">agi_command</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00042">agi.h:42</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="res__agi_8c_html_a6bb7f30afbd30476b7569b9cc518fd45"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a6bb7f30afbd30476b7569b9cc518fd45">handle_noop</a></div><div class="ttdeci">static int handle_noop(struct ast_channel *chan, AGI *agi, int arg, const char *const argv[])</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l03391">res_agi.c:3391</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a44c30f6f76341061e7609cc4e3a182e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44c30f6f76341061e7609cc4e3a182e5">&#9670;&nbsp;</a></span>async_agi_read_frame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a> async_agi_read_frame </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01759">1759</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01418">AGI_RESULT_HANGUP</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01414">AGI_RESULT_SUCCESS</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00278">AST_CONTROL_HANGUP</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">AST_FRAME_CONTROL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04302">ast_read()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01787">launch_asyncagi()</a>.</p>
<div class="fragment"><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;{</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;   f = <a class="code" href="../../d5/d7b/channel_8h.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a>(chan);</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;   <span class="keywordflow">if</span> (!f) {</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;No frame read on channel %s, going out ...\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a3efef4607e59ada98318f948f398d8fe">AGI_RESULT_HANGUP</a>;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;   }</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;   <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>) {</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;<span class="comment">       * Is there any other frame we should care about besides</span></div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;<span class="comment">       * AST_CONTROL_HANGUP?</span></div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;      <span class="keywordflow">switch</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>) {</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a>:</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Got HANGUP frame on channel %s, going out ...\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a3efef4607e59ada98318f948f398d8fe">AGI_RESULT_HANGUP</a>;</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;      }</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;   }</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;   <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8">AGI_RESULT_SUCCESS</a>;</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;}</div><div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1a3efef4607e59ada98318f948f398d8fe"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a3efef4607e59ada98318f948f398d8fe">AGI_RESULT_HANGUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01418">res_agi.c:1418</a></div></div>
<div class="ttc" id="channel_8h_html_a7ef6737309dc9e8b6c4a7cb4800638b1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a></div><div class="ttdeci">struct ast_frame * ast_read(struct ast_channel *chan)</div><div class="ttdoc">Reads a frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04302">channel.c:4302</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8">AGI_RESULT_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01414">res_agi.c:1414</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00278">include/asterisk/frame.h:278</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af64d7541f1e306713302a091faccdf6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af64d7541f1e306713302a091faccdf6f">&#9670;&nbsp;</a></span>deadagi_exec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int deadagi_exec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04611">4611</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04561">agi_exec()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04682">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;{</div><div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;DeadAGI has been deprecated, please use AGI in all cases!\n&quot;</span>);</div><div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#a93f9c23e24eadb9e9d9e0c44597d15dd">agi_exec</a>(chan, <a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>);</div><div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__agi_8c_html_a93f9c23e24eadb9e9d9e0c44597d15dd"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a93f9c23e24eadb9e9d9e0c44597d15dd">agi_exec</a></div><div class="ttdeci">static int agi_exec(struct ast_channel *chan, const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l04561">res_agi.c:4561</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5ca1f7eb610de13f31b7db49bd40efc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ca1f7eb610de13f31b7db49bd40efc3">&#9670;&nbsp;</a></span>eagi_exec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int eagi_exec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04569">4569</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04494">agi_exec_full()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00856">ast_channel_readformat()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00445">ast_check_hangup()</a>, <a class="el" href="../../db/d1c/format__cache_8h_source.html#l00286">ast_format_cache_get</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00041">ast_format_slin</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05849">ast_set_read_format()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_builtin_getvar_helper()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04682">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;{</div><div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *readformat;</div><div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *requested_format = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *requested_format_name;</div><div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;</div><div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan)) {</div><div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;EAGI cannot be run on a dead/hungup channel, please use AGI.\n&quot;</span>);</div><div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;   }</div><div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;</div><div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;   requested_format_name = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;EAGI_AUDIO_FORMAT&quot;</span>);</div><div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;   <span class="keywordflow">if</span> (requested_format_name) {</div><div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;      requested_format = <a class="code" href="../../db/d1c/format__cache_8h.html#a729e49563608ebaed919c901257dc623">ast_format_cache_get</a>(requested_format_name);</div><div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;      <span class="keywordflow">if</span> (requested_format) {</div><div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;&lt;%s&gt; Setting EAGI audio pipe format to %s\n&quot;</span>,</div><div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;                <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(requested_format));</div><div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not find requested format: %s\n&quot;</span>, requested_format_name);</div><div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;      }</div><div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;   }</div><div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;</div><div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;   readformat = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a>(chan));</div><div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a>(chan, requested_format ?: <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>)) {</div><div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to set channel &#39;%s&#39; to linear mode\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(requested_format);</div><div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(readformat);</div><div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;   }</div><div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;   res = <a class="code" href="../../dd/de9/res__agi_8c.html#a79265756631f718546eb3198a8a2bef9">agi_exec_full</a>(chan, data, 1, 0);</div><div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;   <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a>(chan, readformat)) {</div><div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to restore channel &#39;%s&#39; to format %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan),</div><div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;            <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(readformat));</div><div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;      }</div><div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;   }</div><div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(requested_format);</div><div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(readformat);</div><div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="pbx_8h_html_a98c5425b90ec7c5e136a40f529170b1b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a></div><div class="ttdeci">const char * pbx_builtin_getvar_helper(struct ast_channel *chan, const char *name)</div><div class="ttdoc">Return a pointer to the value of the corresponding channel variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_variables.c:1000</a></div></div>
<div class="ttc" id="format__cache_8h_html_a729e49563608ebaed919c901257dc623"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a729e49563608ebaed919c901257dc623">ast_format_cache_get</a></div><div class="ttdeci">#define ast_format_cache_get(name)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d1c/format__cache_8h_source.html#l00286">format_cache.h:286</a></div></div>
<div class="ttc" id="channel_8h_html_aaced431562223538a94e0e69cf94151a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a></div><div class="ttdeci">struct ast_format * ast_channel_readformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00856">channel_internal_api.c:856</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="channel_8h_html_a9107a83365cbf327cc0d12cb0dbd28d8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a></div><div class="ttdeci">int ast_set_read_format(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdoc">Sets read format on channel chan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05849">channel.c:5849</a></div></div>
<div class="ttc" id="channel_8h_html_a9c63fff1d736568d1ee332dd7ea502bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a></div><div class="ttdeci">int ast_check_hangup(struct ast_channel *chan)</div><div class="ttdoc">Check to see if a channel is needing hang up. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00445">channel.c:445</a></div></div>
<div class="ttc" id="res__agi_8c_html_a79265756631f718546eb3198a8a2bef9"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a79265756631f718546eb3198a8a2bef9">agi_exec_full</a></div><div class="ttdeci">static int agi_exec_full(struct ast_channel *chan, const char *data, int enhanced, int dead)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l04494">res_agi.c:4494</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="format__cache_8h_html_a771d7c34570e8e492c25a0c2eb41889d"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a></div><div class="ttdeci">struct ast_format * ast_format_slin</div><div class="ttdoc">Built-in cached signed linear 8kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00041">format_cache.c:41</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2ab6d0ac0364f96dbc74ed96db27a094"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ab6d0ac0364f96dbc74ed96db27a094">&#9670;&nbsp;</a></span>find_command()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dc/d52/structagi__command.html">agi_command</a> * find_command </td>
          <td>(</td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>cmds</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>exact</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03909">3909</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00043">agi_command::cmda</a>, <a class="el" href="../../dc/d52/structagi__command.html#af00a83dd0d12d02e79d4014beeacabfa">agi_command::list</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l02315">match()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01460">agi_async_end_to_ami()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04021">agi_handle_command()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03783">ast_agi_register()</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04284">handle_cli_agi_show()</a>.</p>
<div class="fragment"><div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;{</div><div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;   <span class="keywordtype">int</span> y, <a class="code" href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a>;</div><div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d52/structagi__command.html">agi_command</a> *e;</div><div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;</div><div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a>);</div><div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a>, e, <a class="code" href="../../dc/d52/structagi__command.html#af00a83dd0d12d02e79d4014beeacabfa">list</a>) {</div><div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;      <span class="keywordflow">if</span> (!e-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ad9605fda9da9c3b6965fb5f78a8c6cfd">cmda</a>[0])</div><div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;      <span class="comment">/* start optimistic */</span></div><div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;      match = 1;</div><div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;      <span class="keywordflow">for</span> (y = 0; match &amp;&amp; cmds[y]; y++) {</div><div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;         <span class="comment">/* If there are no more words in the command (and we&#39;re looking for</span></div><div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;<span class="comment">            an exact match) or there is a difference between the two words,</span></div><div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;<span class="comment">            then this is not a match */</span></div><div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;         <span class="keywordflow">if</span> (!e-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ad9605fda9da9c3b6965fb5f78a8c6cfd">cmda</a>[y] &amp;&amp; !exact)</div><div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;         <span class="comment">/* don&#39;t segfault if the next part of a command doesn&#39;t exist */</span></div><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;         <span class="keywordflow">if</span> (!e-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ad9605fda9da9c3b6965fb5f78a8c6cfd">cmda</a>[y]) {</div><div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a>);</div><div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;         }</div><div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;         <span class="keywordflow">if</span> (strcasecmp(e-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ad9605fda9da9c3b6965fb5f78a8c6cfd">cmda</a>[y], cmds[y]))</div><div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;            match = 0;</div><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;      }</div><div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;      <span class="comment">/* If more words are needed to complete the command then this is not</span></div><div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;<span class="comment">         a candidate (unless we&#39;re looking for a really inexact answer  */</span></div><div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;      <span class="keywordflow">if</span> ((exact &gt; -1) &amp;&amp; e-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ad9605fda9da9c3b6965fb5f78a8c6cfd">cmda</a>[y])</div><div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;         match = 0;</div><div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;      <span class="keywordflow">if</span> (match) {</div><div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a>);</div><div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;         <span class="keywordflow">return</span> e;</div><div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;      }</div><div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;   }</div><div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a>);</div><div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;}</div><div class="ttc" id="structagi__commands_html"><div class="ttname"><a href="../../d7/de8/structagi__commands.html">agi_commands</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l03755">res_agi.c:3755</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_a7dd0190efe1c61151a9dbab078bdb263"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a></div><div class="ttdeci">static int match(struct ast_sockaddr *addr, unsigned short callno, unsigned short dcallno, const struct chan_iax2_pvt *cur, int check_dcallno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l02315">chan_iax2.c:2315</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structagi__command_html"><div class="ttname"><a href="../../dc/d52/structagi__command.html">agi_command</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00042">agi.h:42</a></div></div>
<div class="ttc" id="structagi__command_html_ad9605fda9da9c3b6965fb5f78a8c6cfd"><div class="ttname"><a href="../../dc/d52/structagi__command.html#ad9605fda9da9c3b6965fb5f78a8c6cfd">agi_command::cmda</a></div><div class="ttdeci">const char *const cmda[AST_MAX_CMD_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00043">agi.h:43</a></div></div>
<div class="ttc" id="structagi__command_html_af00a83dd0d12d02e79d4014beeacabfa"><div class="ttname"><a href="../../dc/d52/structagi__command.html#af00a83dd0d12d02e79d4014beeacabfa">agi_command::list</a></div><div class="ttdeci">struct agi_command::@219 list</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeb2a37e60e82e5519f36a120c2bae28e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb2a37e60e82e5519f36a120c2bae28e">&#9670;&nbsp;</a></span>free_agi_cmd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void free_agi_cmd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/db1/structagi__cmd.html">agi_cmd</a> *&#160;</td>
          <td class="paramname"><em>cmd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01522">1522</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01517">agi_cmd::cmd_buffer</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01518">agi_cmd::cmd_id</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01530">agi_destroy_commands_cb()</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01787">launch_asyncagi()</a>.</p>
<div class="fragment"><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;{</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cmd-&gt;<a class="code" href="../../d4/db1/structagi__cmd.html#a3fe154717b79d32dd6366ce4b0cb6b38">cmd_buffer</a>);</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cmd-&gt;<a class="code" href="../../d4/db1/structagi__cmd.html#a550a7cedad446097b6e55bbd744412b1">cmd_id</a>);</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cmd);</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;}</div><div class="ttc" id="structagi__cmd_html_a550a7cedad446097b6e55bbd744412b1"><div class="ttname"><a href="../../d4/db1/structagi__cmd.html#a550a7cedad446097b6e55bbd744412b1">agi_cmd::cmd_id</a></div><div class="ttdeci">char * cmd_id</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01518">res_agi.c:1518</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structagi__cmd_html_a3fe154717b79d32dd6366ce4b0cb6b38"><div class="ttname"><a href="../../d4/db1/structagi__cmd.html#a3fe154717b79d32dd6366ce4b0cb6b38">agi_cmd::cmd_buffer</a></div><div class="ttdeci">char * cmd_buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01517">res_agi.c:1517</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a95dd50b690e045a32abb12b8e99974a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95dd50b690e045a32abb12b8e99974a0">&#9670;&nbsp;</a></span>get_agi_cmd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int get_agi_cmd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/db1/structagi__cmd.html">agi_cmd</a> **&#160;</td>
          <td class="paramname"><em>cmd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the list head to the requested channel's AGI datastore. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel datastore is requested for </td></tr>
    <tr><td class="paramname">cmd</td><td>Pointer to the struct pointer which will reference the head of the agi command list.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if the datastore was valid and the list head was retrieved appropriately (even if it's NULL and the list is empty) </td></tr>
    <tr><td class="paramname">-1</td><td>if the datastore could not be retrieved causing an error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01558">1558</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c.html#a13ffc43504a9b4d6609f9fb8fe893806">agi_commands</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02404">ast_channel_datastore_find()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00172">AST_LIST_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00070">ast_datastore::data</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01787">launch_asyncagi()</a>.</p>
<div class="fragment"><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;{</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *store;</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#acdb4f56da6b3071d02dcce20072852b0">AST_LIST_HEAD</a>(, <a class="code" href="../../d4/db1/structagi__cmd.html">agi_cmd</a>) *<a class="code" href="../../dd/de9/res__agi_8c.html#a13ffc43504a9b4d6609f9fb8fe893806">agi_commands</a>;</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;   store = <a class="code" href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, &amp;<a class="code" href="../../dd/de9/res__agi_8c.html#ae10f9ba9071ef79384ddcd6a37315b40">agi_commands_datastore_info</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;   <span class="keywordflow">if</span> (!store) {</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Huh? Async AGI datastore disappeared on Channel %s!\n&quot;</span>,</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;      *cmd = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;   }</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;   <a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a> = store-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(<a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a>);</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;   *cmd = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(<a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a>, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(<a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a>);</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;}</div><div class="ttc" id="structagi__commands_html"><div class="ttname"><a href="../../d7/de8/structagi__commands.html">agi_commands</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l03755">res_agi.c:3755</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="linkedlists_8h_html_acdb4f56da6b3071d02dcce20072852b0"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#acdb4f56da6b3071d02dcce20072852b0">AST_LIST_HEAD</a></div><div class="ttdeci">#define AST_LIST_HEAD(name, type)</div><div class="ttdoc">Defines a structure to be used to hold a list of specified type. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00172">linkedlists.h:172</a></div></div>
<div class="ttc" id="structagi__cmd_html"><div class="ttname"><a href="../../d4/db1/structagi__cmd.html">agi_cmd</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01516">res_agi.c:1516</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="channel_8h_html_aad1e09cd7c79237d05cffb45d6cdfd7c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a></div><div class="ttdeci">struct ast_datastore * ast_channel_datastore_find(struct ast_channel *chan, const struct ast_datastore_info *info, const char *uid)</div><div class="ttdoc">Find a datastore on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02404">channel.c:2404</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="res__agi_8c_html_ae10f9ba9071ef79384ddcd6a37315b40"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#ae10f9ba9071ef79384ddcd6a37315b40">agi_commands_datastore_info</a></div><div class="ttdeci">static const struct ast_datastore_info agi_commands_datastore_info</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01544">res_agi.c:1544</a></div></div>
<div class="ttc" id="res__agi_8c_html_a13ffc43504a9b4d6609f9fb8fe893806"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a13ffc43504a9b4d6609f9fb8fe893806">agi_commands</a></div><div class="ttdeci">static struct agi_commands agi_commands</div></div>
<div class="ttc" id="structast__datastore_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">ast_datastore::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00070">datastore.h:70</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ace6cfe95442dc1b082a430b65a9c5d80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace6cfe95442dc1b082a430b65a9c5d80">&#9670;&nbsp;</a></span>handle_answer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_answer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02364">2364</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02814">ast_answer()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00042">AST_STATE_UP</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00042">RESULT_FAILURE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;{</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;   <span class="comment">/* Answer the channel */</span></div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(chan) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>)</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;      res = <a class="code" href="../../d5/d7b/channel_8h.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a>(chan);</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d\n&quot;</span>, res);</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;   <span class="keywordflow">return</span> (res &gt;= 0) ? <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a> : <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>;</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;}</div><div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00042">channelstate.h:42</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="channel_8h_html_aec583a3e25358ee552a4f3df53914cd0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a></div><div class="ttdeci">int ast_answer(struct ast_channel *chan)</div><div class="ttdoc">Answer a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02814">channel.c:2814</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="cli_8h_html_aea87ce97f86effb2c4df6274d4aac567"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a></div><div class="ttdeci">#define RESULT_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00042">cli.h:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1881926c45b748cefdc6ee8ce024ebc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1881926c45b748cefdc6ee8ce024ebc2">&#9670;&nbsp;</a></span>handle_asyncagi_break()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_asyncagi_break </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02376">2376</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01410">ASYNC_AGI_BREAK</a>, and <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>.</p>
<div class="fragment"><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;{</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#a5fcc4663e437ae0fd8b0d388050c2559">ASYNC_AGI_BREAK</a>;</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;}</div><div class="ttc" id="res__agi_8c_html_a5fcc4663e437ae0fd8b0d388050c2559"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a5fcc4663e437ae0fd8b0d388050c2559">ASYNC_AGI_BREAK</a></div><div class="ttdeci">#define ASYNC_AGI_BREAK</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01410">res_agi.c:1410</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9ed03057563059e94b5897a3aa454872"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ed03057563059e94b5897a3aa454872">&#9670;&nbsp;</a></span>handle_autohangup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_autohangup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03078">3078</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00510">ast_channel_setwhentohangup_tv()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>, and <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00086">timeout</a>.</p>
<div class="fragment"><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;{</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;   <span class="keywordtype">double</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;   <span class="keyword">struct </span>timeval whentohangup = { 0, 0 };</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;   <span class="keywordflow">if</span> (argc != 3)</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;   <span class="keywordflow">if</span> (sscanf(argv[2], <span class="stringliteral">&quot;%30lf&quot;</span>, &amp;timeout) != 1)</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;   <span class="keywordflow">if</span> (timeout &lt; 0)</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;      timeout = 0;</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;   <span class="keywordflow">if</span> (timeout) {</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;      whentohangup.tv_sec = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;      whentohangup.tv_usec = (timeout - whentohangup.tv_sec) * 1000000.0;</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;   }</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ac03c2ec5ac8e7a6ef9c5d92f91880927">ast_channel_setwhentohangup_tv</a>(chan, whentohangup);</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="channel_8h_html_ac03c2ec5ac8e7a6ef9c5d92f91880927"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac03c2ec5ac8e7a6ef9c5d92f91880927">ast_channel_setwhentohangup_tv</a></div><div class="ttdeci">void ast_channel_setwhentohangup_tv(struct ast_channel *chan, struct timeval offset)</div><div class="ttdoc">Set when to hang a channel up. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00510">channel.c:510</a></div></div>
<div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae7d2a780396cec37e0338824492fcf73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7d2a780396cec37e0338824492fcf73">&#9670;&nbsp;</a></span>handle_channelstatus()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_channelstatus </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03179">3179</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00910">ast_channel_snapshot_get_latest_by_name()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>, and <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00153">ast_channel_snapshot::state</a>.</p>
<div class="fragment"><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;{</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;   <span class="keywordflow">if</span> (argc == 2) {</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;      <span class="comment">/* no argument: supply info on the current channel */</span></div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%u\n&quot;</span>, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(chan));</div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argc == 3) {</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *snapshot;</div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;      <span class="comment">/* one argument: look for info on the specified channel */</span></div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;      snapshot = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga9f6ac21322df947f71ae53d0164f5f92">ast_channel_snapshot_get_latest_by_name</a>(argv[2]);</div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;      <span class="keywordflow">if</span> (snapshot) {</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;         <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%u\n&quot;</span>, snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab772a54f7effa7ab06616e36ae30988a">state</a>);</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(snapshot, -1);</div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;      }</div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;      <span class="comment">/* if we get this far no channel name matched the argument given */</span></div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=-1\n&quot;</span>);</div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;   }</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga9f6ac21322df947f71ae53d0164f5f92"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga9f6ac21322df947f71ae53d0164f5f92">ast_channel_snapshot_get_latest_by_name</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_get_latest_by_name(const char *name)</div><div class="ttdoc">Obtain the latest ast_channel_snapshot from the Stasis Message Bus API cache. This is an ao2 object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00910">stasis_channels.c:910</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ab772a54f7effa7ab06616e36ae30988a"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab772a54f7effa7ab06616e36ae30988a">ast_channel_snapshot::state</a></div><div class="ttdeci">enum ast_channel_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00153">stasis_channels.h:153</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a034905bb151521b05105619714ea3e71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a034905bb151521b05105619714ea3e71">&#9670;&nbsp;</a></span>handle_cli_agi_add_cmd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_agi_add_cmd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>CLI command to add applications to execute in Async AGI. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td></td></tr>
    <tr><td class="paramname">cmd</td><td></td></tr>
    <tr><td class="paramname">a</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">CLI_SUCCESS</td><td>on success </td></tr>
    <tr><td class="paramname">NULL</td><td>when init or tab completion is used </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01657">1657</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01580">add_agi_cmd()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l01830">ast_complete_channels()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00162">ast_cli_args::line</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00165">ast_cli_args::n</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00164">ast_cli_args::pos</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00163">ast_cli_args::word</a>.</p>
<div class="fragment"><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;{</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;agi exec&quot;</span>;</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> = <span class="stringliteral">&quot;Usage: agi exec &lt;channel name&gt; &lt;app and arguments&gt; [id]\n&quot;</span></div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;            <span class="stringliteral">&quot;       Add AGI command to the execute queue of the specified channel in Async AGI\n&quot;</span>;</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 2)</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a3a116acde8f18aa530e5b4a6df420273">ast_complete_channels</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">line</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>, 2);</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;   }</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; 4) {</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;   }</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;   <span class="keywordflow">if</span> (!(chan = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]))) {</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Channel %s does not exist.\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]);</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;   }</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/de9/res__agi_8c.html#a76d81c59eb3c123fe6e6c483b410394d">add_agi_cmd</a>(chan, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt; 4 ? a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4] : <span class="stringliteral">&quot;&quot;</span>))) {</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Failed to add AGI command to queue of channel %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;      chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;   }</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Added AGI command to channel %s queue\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="res__agi_8c_html_a76d81c59eb3c123fe6e6c483b410394d"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a76d81c59eb3c123fe6e6c483b410394d">add_agi_cmd</a></div><div class="ttdeci">static int add_agi_cmd(struct ast_channel *chan, const char *cmd_buff, const char *cmd_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01580">res_agi.c:1580</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__args_html_a2a7a1aa13a4f14075411123a4495593c"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">ast_cli_args::line</a></div><div class="ttdeci">const char * line</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00162">cli.h:162</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_acfc02ec89670db29251fda6a66602ce2"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">ast_cli_args::n</a></div><div class="ttdeci">const int n</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00165">cli.h:165</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__args_html_adc1f34651f7bbfa3ba5af27db5f53817"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">ast_cli_args::word</a></div><div class="ttdeci">const char * word</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00163">cli.h:163</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structast__cli__args_html_a4b911d12699acbbb5a8b62355b35bae8"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">ast_cli_args::pos</a></div><div class="ttdeci">const int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00164">cli.h:164</a></div></div>
<div class="ttc" id="cli_8h_html_a3a116acde8f18aa530e5b4a6df420273"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a3a116acde8f18aa530e5b4a6df420273">ast_complete_channels</a></div><div class="ttdeci">char * ast_complete_channels(const char *line, const char *word, int pos, int state, int rpos)</div><div class="ttdoc">Command completion for the list of active channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/main_2cli_8c_source.html#l01830">main/cli.c:1830</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac7a0ac6d2a6cc6e05e9feecd79cb4523"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7a0ac6d2a6cc6e05e9feecd79cb4523">&#9670;&nbsp;</a></span>handle_cli_agi_debug()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_agi_debug </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03362">3362</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01400">agidebug</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00185">ast_cli_entry::args</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;{</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;agi set debug [on|off]&quot;</span>;</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;         <span class="stringliteral">&quot;Usage: agi set debug [on|off]\n&quot;</span></div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;         <span class="stringliteral">&quot;       Enables/disables dumping of AGI transactions for\n&quot;</span></div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;         <span class="stringliteral">&quot;       debugging purposes.\n&quot;</span>;</div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;   }</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;</div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>)</div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;</div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;   <span class="keywordflow">if</span> (strncasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;off&quot;</span>, 3) == 0) {</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#a9e4d6534e259785ec604fa072e049325">agidebug</a> = 0;</div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;on&quot;</span>, 2) == 0) {</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#a9e4d6534e259785ec604fa072e049325">agidebug</a> = 1;</div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;   }</div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;AGI Debugging %sabled\n&quot;</span>, <a class="code" href="../../dd/de9/res__agi_8c.html#a9e4d6534e259785ec604fa072e049325">agidebug</a> ? <span class="stringliteral">&quot;En&quot;</span> : <span class="stringliteral">&quot;Dis&quot;</span>);</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;}</div><div class="ttc" id="res__agi_8c_html_a9e4d6534e259785ec604fa072e049325"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a9e4d6534e259785ec604fa072e049325">agidebug</a></div><div class="ttdeci">static int agidebug</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01400">res_agi.c:1400</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__entry_html_a1bd7a8575ca2650132d636d65dcda2f6"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">ast_cli_entry::args</a></div><div class="ttdeci">int args</div><div class="ttdoc">This gets set in ast_cli_register() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00185">cli.h:185</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8f67d4734b2f69a4aebb922daeb2b0ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f67d4734b2f69a4aebb922daeb2b0ca">&#9670;&nbsp;</a></span>handle_cli_agi_dump_html()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_agi_dump_html </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04470">4470</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00185">ast_cli_entry::args</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04418">write_htmldump()</a>.</p>
<div class="fragment"><div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;{</div><div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;agi dump html&quot;</span>;</div><div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;         <span class="stringliteral">&quot;Usage: agi dump html &lt;filename&gt;\n&quot;</span></div><div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;         <span class="stringliteral">&quot;       Dumps the AGI command list in HTML format to the given\n&quot;</span></div><div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;         <span class="stringliteral">&quot;       file.\n&quot;</span>;</div><div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;   }</div><div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a> + 1)</div><div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;</div><div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/de9/res__agi_8c.html#a6eff3837450235005ee9361ae08999fe">write_htmldump</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>]) &lt; 0) {</div><div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Could not create file &#39;%s&#39;\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>]);</div><div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;   }</div><div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;AGI HTML commands dumped to: %s\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>]);</div><div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__entry_html_a1bd7a8575ca2650132d636d65dcda2f6"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">ast_cli_entry::args</a></div><div class="ttdeci">int args</div><div class="ttdoc">This gets set in ast_cli_register() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00185">cli.h:185</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="res__agi_8c_html_a6eff3837450235005ee9361ae08999fe"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a6eff3837450235005ee9361ae08999fe">write_htmldump</a></div><div class="ttdeci">static int write_htmldump(const char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l04418">res_agi.c:4418</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1b0d8b11441dae16714234648845d4cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b0d8b11441dae16714234648845d4cf">&#9670;&nbsp;</a></span>handle_cli_agi_show()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_agi_show </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04284">4284</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00185">ast_cli_entry::args</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00483">ast_join</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../db/d45/term_8h_source.html#l00071">AST_TERM_MAX_ESCAPE_CHARS</a>, <a class="el" href="../../d1/d99/xmldoc_8h_source.html#l00031">AST_XML_DOC</a>, <a class="el" href="../../d8/d2f/xmldoc_8c_source.html#l00242">ast_xmldoc_printable()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../db/d45/term_8h_source.html#l00059">COLOR_CYAN</a>, <a class="el" href="../../db/d45/term_8h_source.html#l00057">COLOR_MAGENTA</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00052">agi_command::dead</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00058">agi_command::docsrc</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03909">find_command()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03757">help_workhorse()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01389">MAX_CMD_LEN</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00056">agi_command::seealso</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00048">agi_command::summary</a>, <a class="el" href="../../d0/db6/app__mysql_8c_source.html#l00064">synopsis</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00054">agi_command::syntax</a>, <a class="el" href="../../d5/de5/term_8c_source.html#l00184">term_color()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00050">agi_command::usage</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;{</div><div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d52/structagi__command.html">agi_command</a> *command;</div><div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;   <span class="keywordtype">char</span> fullcmd[<a class="code" href="../../dd/de9/res__agi_8c.html#a1eb73c104b484cf18752169509cebfe2">MAX_CMD_LEN</a>];</div><div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a> = 0;</div><div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;</div><div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;agi show commands [topic]&quot;</span>;</div><div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;         <span class="stringliteral">&quot;Usage: agi show commands [topic] &lt;topic&gt;\n&quot;</span></div><div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;         <span class="stringliteral">&quot;       When called with a topic as an argument, displays usage\n&quot;</span></div><div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;         <span class="stringliteral">&quot;       information on the given command.  If called without a\n&quot;</span></div><div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;         <span class="stringliteral">&quot;       topic, it provides a list of AGI commands.\n&quot;</span>;</div><div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;   }</div><div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a> - 1 || (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt;= e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a> &amp;&amp; strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a> - 1], <span class="stringliteral">&quot;topic&quot;</span>)))</div><div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt; e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a> - 1) {</div><div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;      command = <a class="code" href="../../dd/de9/res__agi_8c.html#a2ab6d0ac0364f96dbc74ed96db27a094">find_command</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a> + e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>, 1);</div><div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;      <span class="keywordflow">if</span> (command) {</div><div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;         <span class="keywordtype">char</span> *<a class="code" href="../../d0/db6/app__mysql_8c.html#afbb30cae381f627fb08e1acdac926270">synopsis</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *description = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *<a class="code" href="../../dc/d52/structagi__command.html#ad6a56ddbc0ac64c90a74204e7ef656b8">syntax</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *<a class="code" href="../../dc/d52/structagi__command.html#acbb7097e2a2a730df31c412bb547e247">seealso</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;         <span class="keywordtype">char</span> <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>[30 + <a class="code" href="../../dd/de9/res__agi_8c.html#a1eb73c104b484cf18752169509cebfe2">MAX_CMD_LEN</a>];              <span class="comment">/* &#39;-= Info about...&#39; */</span></div><div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;         <span class="keywordtype">char</span> infotitle[30 + <a class="code" href="../../dd/de9/res__agi_8c.html#a1eb73c104b484cf18752169509cebfe2">MAX_CMD_LEN</a> + <a class="code" href="../../db/d45/term_8h.html#ad133ecb973ac53154526e3255bfa2759">AST_TERM_MAX_ESCAPE_CHARS</a>];  <span class="comment">/* &#39;-= Info about...&#39; with colors */</span></div><div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;         <span class="keywordtype">char</span> syntitle[11 + <a class="code" href="../../db/d45/term_8h.html#ad133ecb973ac53154526e3255bfa2759">AST_TERM_MAX_ESCAPE_CHARS</a>];        <span class="comment">/* [Syntax]\n with colors */</span></div><div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;         <span class="keywordtype">char</span> desctitle[15 + <a class="code" href="../../db/d45/term_8h.html#ad133ecb973ac53154526e3255bfa2759">AST_TERM_MAX_ESCAPE_CHARS</a>];       <span class="comment">/* [Description]\n with colors */</span></div><div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;         <span class="keywordtype">char</span> deadtitle[13 + <a class="code" href="../../db/d45/term_8h.html#ad133ecb973ac53154526e3255bfa2759">AST_TERM_MAX_ESCAPE_CHARS</a>];       <span class="comment">/* [Runs Dead]\n with colors */</span></div><div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;         <span class="keywordtype">char</span> deadcontent[3 + <a class="code" href="../../db/d45/term_8h.html#ad133ecb973ac53154526e3255bfa2759">AST_TERM_MAX_ESCAPE_CHARS</a>];      <span class="comment">/* &#39;Yes&#39; or &#39;No&#39; with colors */</span></div><div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;         <span class="keywordtype">char</span> seealsotitle[12 + <a class="code" href="../../db/d45/term_8h.html#ad133ecb973ac53154526e3255bfa2759">AST_TERM_MAX_ESCAPE_CHARS</a>];    <span class="comment">/* [See Also]\n with colors */</span></div><div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;         <span class="keywordtype">char</span> stxtitle[10 + <a class="code" href="../../db/d45/term_8h.html#ad133ecb973ac53154526e3255bfa2759">AST_TERM_MAX_ESCAPE_CHARS</a>];        <span class="comment">/* [Syntax]\n with colors */</span></div><div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;         <span class="keywordtype">size_t</span> synlen, desclen, seealsolen, stxlen;</div><div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;</div><div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;         <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(syntitle, <span class="stringliteral">&quot;[Synopsis]\n&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a>, 0, <span class="keyword">sizeof</span>(syntitle));</div><div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;         <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(desctitle, <span class="stringliteral">&quot;[Description]\n&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a>, 0, <span class="keyword">sizeof</span>(desctitle));</div><div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;         <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(deadtitle, <span class="stringliteral">&quot;[Runs Dead]\n&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a>, 0, <span class="keyword">sizeof</span>(deadtitle));</div><div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;         <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(seealsotitle, <span class="stringliteral">&quot;[See Also]\n&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a>, 0, <span class="keyword">sizeof</span>(seealsotitle));</div><div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;         <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(stxtitle, <span class="stringliteral">&quot;[Syntax]\n&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a>, 0, <span class="keyword">sizeof</span>(stxtitle));</div><div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;         <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(deadcontent, command-&gt;<a class="code" href="../../dc/d52/structagi__command.html#aba4d8edbd5cd7c809d47d25ad55bf8e5">dead</a> ? <span class="stringliteral">&quot;Yes&quot;</span> : <span class="stringliteral">&quot;No&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a82573859711fce56f1aa0a76b18a9b18">COLOR_CYAN</a>, 0, <span class="keyword">sizeof</span>(deadcontent));</div><div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;</div><div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#aea6bd3799329d5811098c41b6c201c45">ast_join</a>(fullcmd, <span class="keyword">sizeof</span>(fullcmd), a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a> + e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>);</div><div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;         snprintf(info, <span class="keyword">sizeof</span>(info), <span class="stringliteral">&quot;\n  -= Info about agi &#39;%s&#39; =- &quot;</span>, fullcmd);</div><div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;         <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(infotitle, info, <a class="code" href="../../db/d45/term_8h.html#a82573859711fce56f1aa0a76b18a9b18">COLOR_CYAN</a>, 0, <span class="keyword">sizeof</span>(infotitle));</div><div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;<span class="preprocessor">#ifdef AST_XML_DOCS</span></div><div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;         <span class="keywordflow">if</span> (command-&gt;<a class="code" href="../../dc/d52/structagi__command.html#aa871ca3c361d229d4e37edf3c6016cc1">docsrc</a> == <a class="code" href="../../d1/d99/xmldoc_8h.html#a8717a951656993c40bd851ebf50f58e3a24212840b7b1b0e9c1eebc8cfd89ab3e">AST_XML_DOC</a>) {</div><div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;            synopsis = <a class="code" href="../../d1/d99/xmldoc_8h.html#a637de870dfc83d0694f588c5a814ce38">ast_xmldoc_printable</a>(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(command-&gt;<a class="code" href="../../dc/d52/structagi__command.html#a54841ced0ab497a0d3a8d5f244159a6b">summary</a>, <span class="stringliteral">&quot;Not available&quot;</span>), 1);</div><div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;            description = <a class="code" href="../../d1/d99/xmldoc_8h.html#a637de870dfc83d0694f588c5a814ce38">ast_xmldoc_printable</a>(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(command-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ab879c8fbae669c13a54421b2a9effa55">usage</a>, <span class="stringliteral">&quot;Not available&quot;</span>), 1);</div><div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;            seealso = <a class="code" href="../../d1/d99/xmldoc_8h.html#a637de870dfc83d0694f588c5a814ce38">ast_xmldoc_printable</a>(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(command-&gt;<a class="code" href="../../dc/d52/structagi__command.html#acbb7097e2a2a730df31c412bb547e247">seealso</a>, <span class="stringliteral">&quot;Not available&quot;</span>), 1);</div><div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;            <span class="keywordflow">if</span> (!seealso || !description || !synopsis) {</div><div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;               error = 1;</div><div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;               <span class="keywordflow">goto</span> return_cleanup;</div><div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;            }</div><div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;         } <span class="keywordflow">else</span></div><div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;         {</div><div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;            synlen = strlen(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(command-&gt;<a class="code" href="../../dc/d52/structagi__command.html#a54841ced0ab497a0d3a8d5f244159a6b">summary</a>, <span class="stringliteral">&quot;Not available&quot;</span>)) + <a class="code" href="../../db/d45/term_8h.html#ad133ecb973ac53154526e3255bfa2759">AST_TERM_MAX_ESCAPE_CHARS</a>;</div><div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;            synopsis = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(synlen);</div><div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;</div><div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;            desclen = strlen(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(command-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ab879c8fbae669c13a54421b2a9effa55">usage</a>, <span class="stringliteral">&quot;Not available&quot;</span>)) + <a class="code" href="../../db/d45/term_8h.html#ad133ecb973ac53154526e3255bfa2759">AST_TERM_MAX_ESCAPE_CHARS</a>;</div><div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;            description = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(desclen);</div><div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;</div><div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;            seealsolen = strlen(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(command-&gt;<a class="code" href="../../dc/d52/structagi__command.html#acbb7097e2a2a730df31c412bb547e247">seealso</a>, <span class="stringliteral">&quot;Not available&quot;</span>)) + <a class="code" href="../../db/d45/term_8h.html#ad133ecb973ac53154526e3255bfa2759">AST_TERM_MAX_ESCAPE_CHARS</a>;</div><div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;            seealso = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(seealsolen);</div><div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;</div><div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;            <span class="keywordflow">if</span> (!synopsis || !description || !seealso) {</div><div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;               error = 1;</div><div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;               <span class="keywordflow">goto</span> return_cleanup;</div><div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;            }</div><div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;            <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(synopsis, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(command-&gt;<a class="code" href="../../dc/d52/structagi__command.html#a54841ced0ab497a0d3a8d5f244159a6b">summary</a>, <span class="stringliteral">&quot;Not available&quot;</span>), <a class="code" href="../../db/d45/term_8h.html#a82573859711fce56f1aa0a76b18a9b18">COLOR_CYAN</a>, 0, synlen);</div><div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;            <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(description, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(command-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ab879c8fbae669c13a54421b2a9effa55">usage</a>, <span class="stringliteral">&quot;Not available&quot;</span>), <a class="code" href="../../db/d45/term_8h.html#a82573859711fce56f1aa0a76b18a9b18">COLOR_CYAN</a>, 0, desclen);</div><div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;            <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(seealso, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(command-&gt;<a class="code" href="../../dc/d52/structagi__command.html#acbb7097e2a2a730df31c412bb547e247">seealso</a>, <span class="stringliteral">&quot;Not available&quot;</span>), <a class="code" href="../../db/d45/term_8h.html#a82573859711fce56f1aa0a76b18a9b18">COLOR_CYAN</a>, 0, seealsolen);</div><div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;         }</div><div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;</div><div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;         stxlen = strlen(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(command-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ad6a56ddbc0ac64c90a74204e7ef656b8">syntax</a>, <span class="stringliteral">&quot;Not available&quot;</span>)) + <a class="code" href="../../db/d45/term_8h.html#ad133ecb973ac53154526e3255bfa2759">AST_TERM_MAX_ESCAPE_CHARS</a>;</div><div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;         syntax = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(stxlen);</div><div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;         <span class="keywordflow">if</span> (!syntax) {</div><div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;            error = 1;</div><div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;            <span class="keywordflow">goto</span> return_cleanup;</div><div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;         }</div><div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;         <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(syntax, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(command-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ad6a56ddbc0ac64c90a74204e7ef656b8">syntax</a>, <span class="stringliteral">&quot;Not available&quot;</span>), <a class="code" href="../../db/d45/term_8h.html#a82573859711fce56f1aa0a76b18a9b18">COLOR_CYAN</a>, 0, stxlen);</div><div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;</div><div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s\n\n%s%s\n\n%s%s\n\n%s%s\n\n%s%s\n\n%s%s\n\n&quot;</span>, infotitle, stxtitle, syntax,</div><div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;               desctitle, description, syntitle, synopsis, deadtitle, deadcontent,</div><div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;               seealsotitle, seealso);</div><div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;return_cleanup:</div><div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(synopsis);</div><div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(description);</div><div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(syntax);</div><div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(seealso);</div><div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dd/de9/res__agi_8c.html#a2ab6d0ac0364f96dbc74ed96db27a094">find_command</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a> + e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>, -1)) {</div><div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#a9c9dced746c667d15344f3dd5047ac94">help_workhorse</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a> + e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>);</div><div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#aea6bd3799329d5811098c41b6c201c45">ast_join</a>(fullcmd, <span class="keyword">sizeof</span>(fullcmd), a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a> + e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>);</div><div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;No such command &#39;%s&#39;.\n&quot;</span>, fullcmd);</div><div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;         }</div><div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;      }</div><div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#a9c9dced746c667d15344f3dd5047ac94">help_workhorse</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;   }</div><div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;   <span class="keywordflow">return</span> (error ? <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a> : <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>);</div><div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;}</div><div class="ttc" id="structagi__command_html_a54841ced0ab497a0d3a8d5f244159a6b"><div class="ttname"><a href="../../dc/d52/structagi__command.html#a54841ced0ab497a0d3a8d5f244159a6b">agi_command::summary</a></div><div class="ttdeci">const char *const summary</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00048">agi.h:48</a></div></div>
<div class="ttc" id="app__mysql_8c_html_afbb30cae381f627fb08e1acdac926270"><div class="ttname"><a href="../../d0/db6/app__mysql_8c.html#afbb30cae381f627fb08e1acdac926270">synopsis</a></div><div class="ttdeci">static const char synopsis[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/db6/app__mysql_8c_source.html#l00064">app_mysql.c:64</a></div></div>
<div class="ttc" id="structagi__command_html_acbb7097e2a2a730df31c412bb547e247"><div class="ttname"><a href="../../dc/d52/structagi__command.html#acbb7097e2a2a730df31c412bb547e247">agi_command::seealso</a></div><div class="ttdeci">const char *const seealso</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00056">agi.h:56</a></div></div>
<div class="ttc" id="res__agi_8c_html_a9c9dced746c667d15344f3dd5047ac94"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a9c9dced746c667d15344f3dd5047ac94">help_workhorse</a></div><div class="ttdeci">static char * help_workhorse(int fd, const char *const match[])</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l03757">res_agi.c:3757</a></div></div>
<div class="ttc" id="strings_8h_html_aea6bd3799329d5811098c41b6c201c45"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aea6bd3799329d5811098c41b6c201c45">ast_join</a></div><div class="ttdeci">#define ast_join(s, len, w)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00483">strings.h:483</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="term_8h_html_a82573859711fce56f1aa0a76b18a9b18"><div class="ttname"><a href="../../db/d45/term_8h.html#a82573859711fce56f1aa0a76b18a9b18">COLOR_CYAN</a></div><div class="ttdeci">#define COLOR_CYAN</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/term_8h_source.html#l00059">term.h:59</a></div></div>
<div class="ttc" id="structagi__command_html_ab879c8fbae669c13a54421b2a9effa55"><div class="ttname"><a href="../../dc/d52/structagi__command.html#ab879c8fbae669c13a54421b2a9effa55">agi_command::usage</a></div><div class="ttdeci">const char *const usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00050">agi.h:50</a></div></div>
<div class="ttc" id="xmldoc_8h_html_a8717a951656993c40bd851ebf50f58e3a24212840b7b1b0e9c1eebc8cfd89ab3e"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html#a8717a951656993c40bd851ebf50f58e3a24212840b7b1b0e9c1eebc8cfd89ab3e">AST_XML_DOC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d99/xmldoc_8h_source.html#l00031">xmldoc.h:31</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="res__agi_8c_html_a2ab6d0ac0364f96dbc74ed96db27a094"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a2ab6d0ac0364f96dbc74ed96db27a094">find_command</a></div><div class="ttdeci">static agi_command * find_command(const char *const cmds[], int exact)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l03909">res_agi.c:3909</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__entry_html_a1bd7a8575ca2650132d636d65dcda2f6"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">ast_cli_entry::args</a></div><div class="ttdeci">int args</div><div class="ttdoc">This gets set in ast_cli_register() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00185">cli.h:185</a></div></div>
<div class="ttc" id="res__agi_8c_html_a1eb73c104b484cf18752169509cebfe2"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a1eb73c104b484cf18752169509cebfe2">MAX_CMD_LEN</a></div><div class="ttdeci">#define MAX_CMD_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01389">res_agi.c:1389</a></div></div>
<div class="ttc" id="term_8h_html_ad133ecb973ac53154526e3255bfa2759"><div class="ttname"><a href="../../db/d45/term_8h.html#ad133ecb973ac53154526e3255bfa2759">AST_TERM_MAX_ESCAPE_CHARS</a></div><div class="ttdeci">#define AST_TERM_MAX_ESCAPE_CHARS</div><div class="ttdoc">Maximum number of characters needed for a color escape sequence, and another one for a trailing reset...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/term_8h_source.html#l00071">term.h:71</a></div></div>
<div class="ttc" id="structagi__command_html_aba4d8edbd5cd7c809d47d25ad55bf8e5"><div class="ttname"><a href="../../dc/d52/structagi__command.html#aba4d8edbd5cd7c809d47d25ad55bf8e5">agi_command::dead</a></div><div class="ttdeci">const int dead</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00052">agi.h:52</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structagi__command_html_ad6a56ddbc0ac64c90a74204e7ef656b8"><div class="ttname"><a href="../../dc/d52/structagi__command.html#ad6a56ddbc0ac64c90a74204e7ef656b8">agi_command::syntax</a></div><div class="ttdeci">const char *const syntax</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00054">agi.h:54</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="structagi__command_html"><div class="ttname"><a href="../../dc/d52/structagi__command.html">agi_command</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00042">agi.h:42</a></div></div>
<div class="ttc" id="term_8h_html_a7b6c72116c334f40bf7c1e50e793c93b"><div class="ttname"><a href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a></div><div class="ttdeci">char * term_color(char *outbuf, const char *inbuf, int fgcolor, int bgcolor, int maxout)</div><div class="ttdoc">Colorize a specified string by adding terminal color codes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de5/term_8c_source.html#l00184">term.c:184</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="xmldoc_8h_html_a637de870dfc83d0694f588c5a814ce38"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html#a637de870dfc83d0694f588c5a814ce38">ast_xmldoc_printable</a></div><div class="ttdeci">char * ast_xmldoc_printable(const char *bwinput, int withcolors)</div><div class="ttdoc">Colorize and put delimiters (instead of tags) to the xmldoc output. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d2f/xmldoc_8c_source.html#l00242">xmldoc.c:242</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="structagi__command_html_aa871ca3c361d229d4e37edf3c6016cc1"><div class="ttname"><a href="../../dc/d52/structagi__command.html#aa871ca3c361d229d4e37edf3c6016cc1">agi_command::docsrc</a></div><div class="ttdeci">enum ast_doc_src docsrc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00058">agi.h:58</a></div></div>
<div class="ttc" id="term_8h_html_a8deb0beccea721b35bdb1b4f7264fe75"><div class="ttname"><a href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a></div><div class="ttdeci">#define COLOR_MAGENTA</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/term_8h_source.html#l00057">term.h:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abdde9073d142012fc7c7b4403a372fbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdde9073d142012fc7c7b4403a372fbe">&#9670;&nbsp;</a></span>handle_connection()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_connection </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>agiurl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a>&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>netsockfd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02012">2012</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/dfb/poll-compat_8h_source.html#l00088">ast_poll</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01405">MAX_AGI_CONNECT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02053">launch_netscript()</a>.</p>
<div class="fragment"><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;{</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;   <span class="keyword">struct </span>pollfd pfds[1];</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;   <span class="keywordtype">int</span> res, conresult;</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;   socklen_t reslen;</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;   reslen = <span class="keyword">sizeof</span>(conresult);</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;   pfds[0].fd = netsockfd;</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;   pfds[0].events = POLLOUT;</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;   <span class="keywordflow">while</span> ((res = <a class="code" href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a>(pfds, 1, <a class="code" href="../../dd/de9/res__agi_8c.html#a7b35d7eb31c6eba73c2e1fb493621d7c">MAX_AGI_CONNECT</a>)) != 1) {</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EINTR) {</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;         <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;FastAGI connection to &#39;%s&#39; timed out after MAX_AGI_CONNECT (%d) milliseconds.\n&quot;</span>,</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;               agiurl, <a class="code" href="../../dd/de9/res__agi_8c.html#a7b35d7eb31c6eba73c2e1fb493621d7c">MAX_AGI_CONNECT</a>);</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Connect to &#39;%s&#39; failed: %s\n&quot;</span>, agiurl, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;         }</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;      }</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;   }</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;   <span class="keywordflow">if</span> (getsockopt(pfds[0].fd, SOL_SOCKET, SO_ERROR, &amp;conresult, &amp;reslen) &lt; 0) {</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Connection to %s failed with error: %s\n&quot;</span>,</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;addr), strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;   }</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;   <span class="keywordflow">if</span> (conresult) {</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Connecting to &#39;%s&#39; failed for url &#39;%s&#39;: %s\n&quot;</span>,</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;addr), agiurl, strerror(conresult));</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;   }</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="poll-compat_8h_html_a5a0c58fa8311e94cd0ed34382aa822f9"><div class="ttname"><a href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a></div><div class="ttdeci">#define ast_poll(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/poll-compat_8h_source.html#l00088">poll-compat.h:88</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="res__agi_8c_html_a7b35d7eb31c6eba73c2e1fb493621d7c"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a7b35d7eb31c6eba73c2e1fb493621d7c">MAX_AGI_CONNECT</a></div><div class="ttdeci">#define MAX_AGI_CONNECT</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01405">res_agi.c:1405</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab9f9971ea196458d3388b01c9a42d22b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9f9971ea196458d3388b01c9a42d22b">&#9670;&nbsp;</a></span>handle_controlstreamfile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_controlstreamfile </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02495">2495</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00333">AST_CONTROL_STREAM_STOP</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01319">ast_control_streamfile()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00042">RESULT_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l00932">skipms</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01096">stop</a>, and <a class="el" href="../../d3/d5a/ccss_8c_source.html#l03193">suspend()</a>.</p>
<div class="fragment"><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;{</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;   <span class="keywordtype">int</span> res = 0, <a class="code" href="../../dc/df4/app__voicemail_8c.html#a1df943a05a384a407a19cf8831b2d237">skipms</a> = 3000;</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *fwd = <span class="stringliteral">&quot;#&quot;</span>, *rev = <span class="stringliteral">&quot;*&quot;</span>, *<a class="code" href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *<a class="code" href="../../df/d44/app__meetme_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <span class="comment">/* Default values */</span></div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;   <span class="keywordtype">char</span> stopkeybuf[2];</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;   <span class="keywordtype">long</span> offsetms = 0;</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;   <span class="keywordtype">char</span> offsetbuf[20];</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;   <span class="keywordflow">if</span> (argc &lt; 5 || argc &gt; 10) {</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;   }</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(argv[4])) {</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;      stop = argv[4];</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;   }</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;   <span class="keywordflow">if</span> ((argc &gt; 5) &amp;&amp; (sscanf(argv[5], <span class="stringliteral">&quot;%30d&quot;</span>, &amp;<a class="code" href="../../dc/df4/app__voicemail_8c.html#a1df943a05a384a407a19cf8831b2d237">skipms</a>) != 1)) {</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;   }</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;   <span class="keywordflow">if</span> (argc &gt; 6 &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(argv[6])) {</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;      fwd = argv[6];</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;   }</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;   <span class="keywordflow">if</span> (argc &gt; 7 &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(argv[7])) {</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;      rev = argv[7];</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;   }</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;   <span class="keywordflow">if</span> (argc &gt; 8 &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(argv[8])) {</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;      <a class="code" href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a> = argv[8];</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;   }</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;   <span class="keywordflow">if</span> (argc &gt; 9 &amp;&amp; (sscanf(argv[9], <span class="stringliteral">&quot;%30ld&quot;</span>, &amp;offsetms) != 1)) {</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;   }</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;   res = <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a3405b1282cefdceebba734b8e756c55d">ast_control_streamfile</a>(chan, argv[3], fwd, rev, stop, <a class="code" href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/df4/app__voicemail_8c.html#a1df943a05a384a407a19cf8831b2d237">skipms</a>, &amp;offsetms);</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;   <span class="comment">/* If we stopped on one of our stop keys, return 0  */</span></div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;   <span class="keywordflow">if</span> (res &gt; 0 &amp;&amp; stop &amp;&amp; strchr(stop, res)) {</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;CPLAYBACKSTATUS&quot;</span>, <span class="stringliteral">&quot;USERSTOPPED&quot;</span>);</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;      snprintf(stopkeybuf, <span class="keyword">sizeof</span>(stopkeybuf), <span class="stringliteral">&quot;%c&quot;</span>, res);</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;CPLAYBACKSTOPKEY&quot;</span>, stopkeybuf);</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res &gt; 0 &amp;&amp; res == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa95eb913e6cbbac8a34e69905245fdf4">AST_CONTROL_STREAM_STOP</a>) {</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;CPLAYBACKSTATUS&quot;</span>, <span class="stringliteral">&quot;REMOTESTOPPED&quot;</span>);</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;      res = 0;</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;CPLAYBACKSTATUS&quot;</span>, <span class="stringliteral">&quot;ERROR&quot;</span>);</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;CPLAYBACKSTATUS&quot;</span>, <span class="stringliteral">&quot;SUCCESS&quot;</span>);</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;      }</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;   }</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;   snprintf(offsetbuf, <span class="keyword">sizeof</span>(offsetbuf), <span class="stringliteral">&quot;%ld&quot;</span>, offsetms);</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;CPLAYBACKOFFSET&quot;</span>, offsetbuf);</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d endpos=%ld\n&quot;</span>, res, offsetms);</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;   <span class="keywordflow">return</span> (res &gt;= 0) ? <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a> : <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>;</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a111277a0849f92b793ed6aa1efe54462"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a></div><div class="ttdeci">unsigned int stop</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01096">app_meetme.c:1096</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a3405b1282cefdceebba734b8e756c55d"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a3405b1282cefdceebba734b8e756c55d">ast_control_streamfile</a></div><div class="ttdeci">int ast_control_streamfile(struct ast_channel *chan, const char *file, const char *fwd, const char *rev, const char *stop, const char *pause, const char *restart, int skipms, long *offsetms)</div><div class="ttdoc">Stream a file with fast forward, pause, reverse, restart. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01319">main/app.c:1319</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_a1df943a05a384a407a19cf8831b2d237"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#a1df943a05a384a407a19cf8831b2d237">skipms</a></div><div class="ttdeci">static int skipms</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00932">app_voicemail.c:932</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="ccss_8c_html_a8bd1c39b4993f80f1bf674e3a1d717dd"><div class="ttname"><a href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a></div><div class="ttdeci">static void suspend(struct cc_core_instance *core_instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/ccss_8c_source.html#l03193">ccss.c:3193</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa95eb913e6cbbac8a34e69905245fdf4"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa95eb913e6cbbac8a34e69905245fdf4">AST_CONTROL_STREAM_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00333">include/asterisk/frame.h:333</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="cli_8h_html_aea87ce97f86effb2c4df6274d4aac567"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a></div><div class="ttdeci">#define RESULT_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00042">cli.h:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a82cecf1082da0ab9fdae62cce5402409"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82cecf1082da0ab9fdae62cce5402409">&#9670;&nbsp;</a></span>handle_dbdel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_dbdel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03334">3334</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00429">ast_db_del()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;{</div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;</div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;   <span class="keywordflow">if</span> (argc != 4)</div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;   res = <a class="code" href="../../de/d4a/astdb_8h.html#a71e8d5ab1757b184683a99125d1c8160">ast_db_del</a>(argv[2], argv[3]);</div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%c\n&quot;</span>, res ? <span class="charliteral">&#39;0&#39;</span> : <span class="charliteral">&#39;1&#39;</span>);</div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="astdb_8h_html_a71e8d5ab1757b184683a99125d1c8160"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#a71e8d5ab1757b184683a99125d1c8160">ast_db_del</a></div><div class="ttdeci">int ast_db_del(const char *family, const char *key)</div><div class="ttdoc">Delete entry in astdb. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00429">main/db.c:429</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c9c09127c0312fccdb939d4eb53d31d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c9c09127c0312fccdb939d4eb53d31d">&#9670;&nbsp;</a></span>handle_dbdeltree()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_dbdeltree </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03345">3345</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00457">ast_db_deltree()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;{</div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;   <span class="keywordtype">int</span> num_deleted;</div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;</div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;   <span class="keywordflow">if</span> ((argc &lt; 3) || (argc &gt; 4)) {</div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;   }</div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;   <span class="keywordflow">if</span> (argc == 4) {</div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;      num_deleted = <a class="code" href="../../de/d4a/astdb_8h.html#af251d986cfe884ffd5ca864531253f62">ast_db_deltree</a>(argv[2], argv[3]);</div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;      num_deleted = <a class="code" href="../../de/d4a/astdb_8h.html#af251d986cfe884ffd5ca864531253f62">ast_db_deltree</a>(argv[2], <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;   }</div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%c\n&quot;</span>, num_deleted &gt; 0 ? <span class="charliteral">&#39;0&#39;</span> : <span class="charliteral">&#39;1&#39;</span>);</div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="astdb_8h_html_af251d986cfe884ffd5ca864531253f62"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#af251d986cfe884ffd5ca864531253f62">ast_db_deltree</a></div><div class="ttdeci">int ast_db_deltree(const char *family, const char *keytree)</div><div class="ttdoc">Delete one or more entries in astdb. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00457">main/db.c:457</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa53ffc9cad232502426b748888a38a57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa53ffc9cad232502426b748888a38a57">&#9670;&nbsp;</a></span>handle_dbget()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_dbget </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03290">3290</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00412">ast_db_get()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00780">ast_str_make_space</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00699">ast_str_size()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00688">ast_str_strlen()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00663">ast_str_update()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;{</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;   <span class="keywordflow">if</span> (argc != 4)</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;</div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;   <span class="keywordflow">if</span> (!(buf = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(16))) {</div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=-1\n&quot;</span>);</div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;   }</div><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;</div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;   <span class="keywordflow">do</span> {</div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;      res = <a class="code" href="../../de/d4a/astdb_8h.html#a6ab91701fa0db9fad7759fe42a581c17">ast_db_get</a>(argv[2], argv[3], <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(buf), <a class="code" href="../../d6/d90/strings_8h.html#ae99d6f51ac4be6b72f8b63892cd949e1">ast_str_size</a>(buf));</div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa64825674476f476402283fe4bd7ee51">ast_str_update</a>(buf);</div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(buf) &lt; <a class="code" href="../../d6/d90/strings_8h.html#ae99d6f51ac4be6b72f8b63892cd949e1">ast_str_size</a>(buf) - 1) {</div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;      }</div><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#aa3d67163f6a94e575ee602933adf1eab">ast_str_make_space</a>(&amp;buf, <a class="code" href="../../d6/d90/strings_8h.html#ae99d6f51ac4be6b72f8b63892cd949e1">ast_str_size</a>(buf) * 2)) {</div><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;      }</div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;   } <span class="keywordflow">while</span> (1);</div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;</div><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;   <span class="keywordflow">if</span> (res)</div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=1 (%s)\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(buf));</div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;</div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(buf);</div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;}</div><div class="ttc" id="strings_8h_html_ae99d6f51ac4be6b72f8b63892cd949e1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ae99d6f51ac4be6b72f8b63892cd949e1">ast_str_size</a></div><div class="ttdeci">size_t ast_str_size(const struct ast_str *buf)</div><div class="ttdoc">Returns the current maximum length (without reallocation) of the current buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00699">strings.h:699</a></div></div>
<div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="strings_8h_html_aa3d67163f6a94e575ee602933adf1eab"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3d67163f6a94e575ee602933adf1eab">ast_str_make_space</a></div><div class="ttdeci">#define ast_str_make_space(buf, new_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00780">strings.h:780</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astdb_8h_html_a6ab91701fa0db9fad7759fe42a581c17"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#a6ab91701fa0db9fad7759fe42a581c17">ast_db_get</a></div><div class="ttdeci">int ast_db_get(const char *family, const char *key, char *value, int valuelen)</div><div class="ttdoc">Get key value specified by family/key. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00412">main/db.c:412</a></div></div>
<div class="ttc" id="strings_8h_html_aabc005bd1c7e249e8f8659d57d4500b6"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a></div><div class="ttdeci">size_t ast_str_strlen(const struct ast_str *buf)</div><div class="ttdoc">Returns the current length of the string stored within buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00688">strings.h:688</a></div></div>
<div class="ttc" id="strings_8h_html_aa64825674476f476402283fe4bd7ee51"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa64825674476f476402283fe4bd7ee51">ast_str_update</a></div><div class="ttdeci">void ast_str_update(struct ast_str *buf)</div><div class="ttdoc">Update the length of the buffer, after using ast_str merely as a buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00663">strings.h:663</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4e873daed55c3f1a06c264f6b96e3f0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e873daed55c3f1a06c264f6b96e3f0c">&#9670;&nbsp;</a></span>handle_dbput()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_dbput </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03323">3323</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00327">ast_db_put()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;{</div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;</div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;   <span class="keywordflow">if</span> (argc != 5)</div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;   res = <a class="code" href="../../de/d4a/astdb_8h.html#a0f14f6bff4f412c88b50aba34d3a5e35">ast_db_put</a>(argv[2], argv[3], argv[4]);</div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%c\n&quot;</span>, res ? <span class="charliteral">&#39;0&#39;</span> : <span class="charliteral">&#39;1&#39;</span>);</div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="astdb_8h_html_a0f14f6bff4f412c88b50aba34d3a5e35"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#a0f14f6bff4f412c88b50aba34d3a5e35">ast_db_put</a></div><div class="ttdeci">int ast_db_put(const char *family, const char *key, const char *value)</div><div class="ttdoc">Store value addressed by family/key. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00327">main/db.c:327</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa8a0a121355c39051c8f2f0cea3feed8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8a0a121355c39051c8f2f0cea3feed8">&#9670;&nbsp;</a></span>handle_exec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_exec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03128">3128</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l11235">ast_channel_clear_flag()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01260">ast_channel_flags()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01023">AST_FLAG_DISABLE_WORKAROUNDS</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dd/d16/pbx__app_8c_source.html#l00471">pbx_exec()</a>, <a class="el" href="../../d2/db7/ael__main_8c_source.html#l00165">pbx_findapp()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>.</p>
<div class="fragment"><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;{</div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;   <span class="keywordtype">int</span> res, workaround;</div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/da3/structast__app.html">ast_app</a> *app_to_exec;</div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;   <span class="keywordflow">if</span> (argc &lt; 2)</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;AGI Script Executing Application: (%s) Options: (%s)\n&quot;</span>, argv[1], argc &gt;= 3 ? argv[2] : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;</div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;   <span class="keywordflow">if</span> ((app_to_exec = <a class="code" href="../../db/de0/pbx_8h.html#ad4a6912dcd2ad44a186d0a284afafc51">pbx_findapp</a>(argv[1]))) {</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;      <span class="keywordflow">if</span> (!(workaround = <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ad3827e45a36d53f7570b8cd2ed8fad67">AST_FLAG_DISABLE_WORKAROUNDS</a>))) {</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ad3827e45a36d53f7570b8cd2ed8fad67">AST_FLAG_DISABLE_WORKAROUNDS</a>);</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;      }</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;      res = <a class="code" href="../../db/de0/pbx_8h.html#a6e3dbc57c03c23543354ef108c31fac8">pbx_exec</a>(chan, app_to_exec, argc == 2 ? <span class="stringliteral">&quot;&quot;</span> : argv[2]);</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;      <span class="keywordflow">if</span> (!workaround) {</div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a1d9fcff85d7adbe0bd54f88eb927998c">ast_channel_clear_flag</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ad3827e45a36d53f7570b8cd2ed8fad67">AST_FLAG_DISABLE_WORKAROUNDS</a>);</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;      }</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Could not find application (%s)\n&quot;</span>, argv[1]);</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;      res = -2;</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;   }</div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d\n&quot;</span>, res);</div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;   <span class="comment">/* Even though this is wrong, users are depending upon this result. */</span></div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e3dbc57c03c23543354ef108c31fac8"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e3dbc57c03c23543354ef108c31fac8">pbx_exec</a></div><div class="ttdeci">int pbx_exec(struct ast_channel *c, struct ast_app *app, const char *data)</div><div class="ttdoc">Execute an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00471">pbx_app.c:471</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="channel_8h_html_a1d9fcff85d7adbe0bd54f88eb927998c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1d9fcff85d7adbe0bd54f88eb927998c">ast_channel_clear_flag</a></div><div class="ttdeci">void ast_channel_clear_flag(struct ast_channel *chan, unsigned int flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l11235">channel.c:11235</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5ad3827e45a36d53f7570b8cd2ed8fad67"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ad3827e45a36d53f7570b8cd2ed8fad67">AST_FLAG_DISABLE_WORKAROUNDS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01023">channel.h:1023</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structast__app_html"><div class="ttname"><a href="../../d0/da3/structast__app.html">ast_app</a></div><div class="ttdoc">ast_app: A registered application </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00045">pbx_app.c:45</a></div></div>
<div class="ttc" id="channel_8h_html_a91de92158876186d28ba1773877f2732"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a></div><div class="ttdeci">struct ast_flags * ast_channel_flags(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01260">channel_internal_api.c:1260</a></div></div>
<div class="ttc" id="pbx_8h_html_ad4a6912dcd2ad44a186d0a284afafc51"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ad4a6912dcd2ad44a186d0a284afafc51">pbx_findapp</a></div><div class="ttdeci">struct ast_app * pbx_findapp(const char *app)</div><div class="ttdoc">Look up an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db7/ael__main_8c_source.html#l00165">ael_main.c:165</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a13e35a0e6acfa96b9e48def1bb023b2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13e35a0e6acfa96b9e48def1bb023b2d">&#9670;&nbsp;</a></span>handle_getdata()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_getdata </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02834">2834</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00250">ast_app_getdata_full()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00036">agi_state::audio</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00037">agi_state::ctrl</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/dc2/f2c_8h_source.html#l00198">max</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>, and <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00086">timeout</a>.</p>
<div class="fragment"><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;{</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;   <span class="keywordtype">int</span> res, <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;   <span class="keywordtype">char</span> data[1024];</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;   <span class="keywordflow">if</span> (argc &lt; 3)</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;   <span class="keywordflow">if</span> (argc &gt;= 4)</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;      timeout = atoi(argv[3]);</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;      timeout = 0;</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;   <span class="keywordflow">if</span> (argc &gt;= 5)</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;      max = atoi(argv[4]);</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;      max = 1024;</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;   res = <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a102e325938d4d6617af28b7f1afce7ef">ast_app_getdata_full</a>(chan, argv[2], data, max, timeout, agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a220009426c8518be4b294a02b1194906">audio</a>, agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">ctrl</a>);</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;   <span class="keywordflow">if</span> (res == 2)        <span class="comment">/* New command */</span></div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res == 1)</div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%s (timeout)\n&quot;</span>, data);</div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res &lt; 0 )</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=-1\n&quot;</span>);</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%s\n&quot;</span>, data);</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="structagi__state_html_a0f787778e7019ca3a8bdf0bd17b9efca"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">agi_state::ctrl</a></div><div class="ttdeci">int ctrl</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00037">agi.h:37</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a102e325938d4d6617af28b7f1afce7ef"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a102e325938d4d6617af28b7f1afce7ef">ast_app_getdata_full</a></div><div class="ttdeci">int ast_app_getdata_full(struct ast_channel *c, const char *prompt, char *s, int maxlen, int timeout, int audiofd, int ctrlfd)</div><div class="ttdoc">Full version with audiofd and controlfd. NOTE: returns &amp;#39;2&amp;#39; on ctrlfd available, not &amp;#39;1&amp;#39; like other fu...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00250">main/app.c:250</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="structagi__state_html_a220009426c8518be4b294a02b1194906"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a220009426c8518be4b294a02b1194906">agi_state::audio</a></div><div class="ttdeci">int audio</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00036">agi.h:36</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="f2c_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00198">f2c.h:198</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a97c7d603632d5bb0bfc527feb385be1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97c7d603632d5bb0bfc527feb385be1b">&#9670;&nbsp;</a></span>handle_getoption()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_getoption </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>get option - really similar to the handle_streamfile, but with a timeout </p>

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02616">2616</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01020">ast_applystream()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00721">ast_channel_pbx()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00621">ast_channel_stream()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00755">ast_openstream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00812">ast_openvstream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01026">ast_playstream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01038">ast_seekstream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00187">ast_stopstream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01048">ast_tellstream()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l03248">ast_waitfordigit_full()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01785">ast_waitstream_full()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00036">agi_state::audio</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00037">agi_state::ctrl</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l00212">ast_pbx::dtimeoutms</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00042">RESULT_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00086">timeout</a>, and <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00110">ast_filestream::vfs</a>.</p>
<div class="fragment"><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;{</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *fs, *<a class="code" href="../../db/dbc/structast__filestream.html#a084d8f087c50442f51245ec3333abac4">vfs</a>;</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;   <span class="keywordtype">long</span> sample_offset = 0, max_length;</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> = 0;</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *edigits = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;   <span class="keywordflow">if</span> ( argc &lt; 4 || argc &gt; 5 )</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;   <span class="keywordflow">if</span> ( argv[3] )</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;      edigits = argv[3];</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;   <span class="keywordflow">if</span> ( argc == 5 )</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;      timeout = atoi(argv[4]);</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a>(chan)-&gt;dtimeoutms) {</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;      <span class="comment">/* by default dtimeout is set to 5sec */</span></div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;      timeout = <a class="code" href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a>(chan)-&gt;<a class="code" href="../../d6/d83/structast__pbx.html#a80a133d151de25445e8dfd09953a0872">dtimeoutms</a>; <span class="comment">/* in msec */</span></div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;   }</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;   <span class="keywordflow">if</span> (!(fs = <a class="code" href="../../d2/d4d/file_8h.html#ad85c951fa1d6988d2d7e169833a951a8">ast_openstream</a>(chan, argv[2], <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan)))) {</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=-1 endpos=%ld\n&quot;</span>, sample_offset);</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to open %s\n&quot;</span>, argv[2]);</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>;</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;   }</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;   <span class="keywordflow">if</span> ((vfs = <a class="code" href="../../d2/d4d/file_8h.html#aeed49fff2d6008a89f996230988d944d">ast_openvstream</a>(chan, argv[2], <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))))</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Ooh, found a video stream, too\n&quot;</span>);</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Playing &#39;%s&#39; (escape_digits=%s) (timeout %d)\n&quot;</span>, argv[2], edigits, timeout);</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;   <a class="code" href="../../d2/d4d/file_8h.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a>(fs, 0, SEEK_END);</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;   max_length = <a class="code" href="../../d2/d4d/file_8h.html#a01771a318e7adea51499040f27b4278a">ast_tellstream</a>(fs);</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;   <a class="code" href="../../d2/d4d/file_8h.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a>(fs, sample_offset, SEEK_SET);</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;   res = <a class="code" href="../../d2/d4d/file_8h.html#a618e3120b6d019312ef2d617d9f14571">ast_applystream</a>(chan, fs);</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;   <span class="keywordflow">if</span> (vfs)</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#a618e3120b6d019312ef2d617d9f14571">ast_applystream</a>(chan, vfs);</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;   <a class="code" href="../../d2/d4d/file_8h.html#ad59224750b8b617f9590b28b88457b14">ast_playstream</a>(fs);</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;   <span class="keywordflow">if</span> (vfs)</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#ad59224750b8b617f9590b28b88457b14">ast_playstream</a>(vfs);</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;   res = <a class="code" href="../../d2/d4d/file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, argv[3], agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a220009426c8518be4b294a02b1194906">audio</a>, agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">ctrl</a>);</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;   <span class="comment">/* this is to check for if ast_waitstream closed the stream, we probably are at</span></div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;<span class="comment">    * the end of the stream, return that amount, else check for the amount */</span></div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;   sample_offset = (<a class="code" href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a>(chan))?<a class="code" href="../../d2/d4d/file_8h.html#a01771a318e7adea51499040f27b4278a">ast_tellstream</a>(fs):max_length;</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;   <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;   <span class="keywordflow">if</span> (res == 1) {</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;      <span class="comment">/* Stop this command, don&#39;t print a result line, as there is a new command */</span></div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;   }</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;   <span class="comment">/* If the user didnt press a key, wait for digitTimeout*/</span></div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;   <span class="keywordflow">if</span> (res == 0 ) {</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;      res = <a class="code" href="../../d5/d7b/channel_8h.html#af600a6bfab348c89a7cceb8f024f58fe">ast_waitfordigit_full</a>(chan, timeout, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a220009426c8518be4b294a02b1194906">audio</a>, agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">ctrl</a>);</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;      <span class="comment">/* Make sure the new result is in the escape digits of the GET OPTION */</span></div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;      <span class="keywordflow">if</span> ( !strchr(edigits,res) )</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;         res=0;</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;   }</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d endpos=%ld\n&quot;</span>, res, sample_offset);</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;   <span class="keywordflow">return</span> (res &gt;= 0) ? <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a> : <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>;</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="structagi__state_html_a0f787778e7019ca3a8bdf0bd17b9efca"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">agi_state::ctrl</a></div><div class="ttdeci">int ctrl</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00037">agi.h:37</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="file_8h_html_a01771a318e7adea51499040f27b4278a"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a01771a318e7adea51499040f27b4278a">ast_tellstream</a></div><div class="ttdeci">off_t ast_tellstream(struct ast_filestream *fs)</div><div class="ttdoc">Tell where we are in a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01048">file.c:1048</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="file_8h_html_ad59224750b8b617f9590b28b88457b14"><div class="ttname"><a href="../../d2/d4d/file_8h.html#ad59224750b8b617f9590b28b88457b14">ast_playstream</a></div><div class="ttdeci">int ast_playstream(struct ast_filestream *s)</div><div class="ttdoc">Play a open stream on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01026">file.c:1026</a></div></div>
<div class="ttc" id="file_8h_html_aeed49fff2d6008a89f996230988d944d"><div class="ttname"><a href="../../d2/d4d/file_8h.html#aeed49fff2d6008a89f996230988d944d">ast_openvstream</a></div><div class="ttdeci">struct ast_filestream * ast_openvstream(struct ast_channel *chan, const char *filename, const char *preflang)</div><div class="ttdoc">Opens stream for use in seeking, playing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00812">file.c:812</a></div></div>
<div class="ttc" id="channel_8h_html_a488b7d6f7488bedc53be45d4ef4471c9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a></div><div class="ttdeci">struct ast_pbx * ast_channel_pbx(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00721">channel_internal_api.c:721</a></div></div>
<div class="ttc" id="file_8h_html_a618e3120b6d019312ef2d617d9f14571"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a618e3120b6d019312ef2d617d9f14571">ast_applystream</a></div><div class="ttdeci">int ast_applystream(struct ast_channel *chan, struct ast_filestream *s)</div><div class="ttdoc">Applys a open stream to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01020">file.c:1020</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="file_8h_html_a36f6bba05952162d5d1ee7fb9819bd07"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a></div><div class="ttdeci">int ast_seekstream(struct ast_filestream *fs, off_t sample_offset, int whence)</div><div class="ttdoc">Seeks into stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01038">file.c:1038</a></div></div>
<div class="ttc" id="structagi__state_html_a220009426c8518be4b294a02b1194906"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a220009426c8518be4b294a02b1194906">agi_state::audio</a></div><div class="ttdeci">int audio</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00036">agi.h:36</a></div></div>
<div class="ttc" id="channel_8h_html_a043ef90a065fe177af7b21a6045b6506"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a></div><div class="ttdeci">struct ast_filestream * ast_channel_stream(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00621">channel_internal_api.c:621</a></div></div>
<div class="ttc" id="file_8h_html_a3089874cd5223053f670c8499e911ec4"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a></div><div class="ttdeci">int ast_waitstream_full(struct ast_channel *c, const char *breakon, int audiofd, int monfd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01785">file.c:1785</a></div></div>
<div class="ttc" id="structast__filestream_html"><div class="ttname"><a href="../../db/dbc/structast__filestream.html">ast_filestream</a></div><div class="ttdoc">This structure is allocated by file.c in one chunk, together with buf_size and desc_size bytes of mem...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00101">mod_format.h:101</a></div></div>
<div class="ttc" id="structast__pbx_html_a80a133d151de25445e8dfd09953a0872"><div class="ttname"><a href="../../d6/d83/structast__pbx.html#a80a133d151de25445e8dfd09953a0872">ast_pbx::dtimeoutms</a></div><div class="ttdeci">int dtimeoutms</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00212">pbx.h:212</a></div></div>
<div class="ttc" id="channel_8h_html_a9abe31fe40dcd03cd2957e5309e32ac6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a></div><div class="ttdeci">const char * ast_channel_language(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structast__filestream_html_a084d8f087c50442f51245ec3333abac4"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#a084d8f087c50442f51245ec3333abac4">ast_filestream::vfs</a></div><div class="ttdeci">struct ast_filestream * vfs</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00110">mod_format.h:110</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="channel_8h_html_af600a6bfab348c89a7cceb8f024f58fe"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af600a6bfab348c89a7cceb8f024f58fe">ast_waitfordigit_full</a></div><div class="ttdeci">int ast_waitfordigit_full(struct ast_channel *c, int ms, const char *breakon, int audiofd, int ctrlfd)</div><div class="ttdoc">Wait for a digit Same as ast_waitfordigit() with audio fd for outputting read audio and ctrlfd to mon...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03248">channel.c:3248</a></div></div>
<div class="ttc" id="file_8h_html_a3092bf11d4bba66f646562759608b1bc"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a></div><div class="ttdeci">int ast_stopstream(struct ast_channel *c)</div><div class="ttdoc">Stops a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00187">file.c:187</a></div></div>
<div class="ttc" id="cli_8h_html_aea87ce97f86effb2c4df6274d4aac567"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a></div><div class="ttdeci">#define RESULT_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00042">cli.h:42</a></div></div>
<div class="ttc" id="file_8h_html_ad85c951fa1d6988d2d7e169833a951a8"><div class="ttname"><a href="../../d2/d4d/file_8h.html#ad85c951fa1d6988d2d7e169833a951a8">ast_openstream</a></div><div class="ttdeci">struct ast_filestream * ast_openstream(struct ast_channel *chan, const char *filename, const char *preflang)</div><div class="ttdoc">Opens stream for use in seeking, playing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00755">file.c:755</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acef5f5748554f819339fe8838f988e33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acef5f5748554f819339fe8838f988e33">&#9670;&nbsp;</a></span>handle_getvariable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_getvariable </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03216">3216</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../db/d70/pbx__functions_8c_source.html#l00599">ast_func_read()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l00235">pbx_retrieve_variable()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;{</div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;   <span class="keywordtype">char</span> *ret;</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;   <span class="keywordtype">char</span> tempstr[1024] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;</div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;   <span class="keywordflow">if</span> (argc != 3)</div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;</div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;   <span class="comment">/* check if we want to execute an ast_custom_function */</span></div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(argv[2]) &amp;&amp; (argv[2][strlen(argv[2]) - 1] == <span class="charliteral">&#39;)&#39;</span>)) {</div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;      ret = <a class="code" href="../../db/de0/pbx_8h.html#aa4e9618aa036a586af7d7663afd9b507">ast_func_read</a>(chan, argv[2], tempstr, <span class="keyword">sizeof</span>(tempstr)) ? <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> : tempstr;</div><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#aaf906a18ba2dcd53c35f59869757521f">pbx_retrieve_variable</a>(chan, argv[2], &amp;ret, tempstr, <span class="keyword">sizeof</span>(tempstr), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;   }</div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;</div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;   <span class="keywordflow">if</span> (ret)</div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=1 (%s)\n&quot;</span>, ret);</div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;</div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;}</div><div class="ttc" id="pbx_8h_html_aa4e9618aa036a586af7d7663afd9b507"><div class="ttname"><a href="../../db/de0/pbx_8h.html#aa4e9618aa036a586af7d7663afd9b507">ast_func_read</a></div><div class="ttdeci">int ast_func_read(struct ast_channel *chan, const char *function, char *workspace, size_t len)</div><div class="ttdoc">executes a read operation on a function </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d70/pbx__functions_8c_source.html#l00599">pbx_functions.c:599</a></div></div>
<div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="pbx_8h_html_aaf906a18ba2dcd53c35f59869757521f"><div class="ttname"><a href="../../db/de0/pbx_8h.html#aaf906a18ba2dcd53c35f59869757521f">pbx_retrieve_variable</a></div><div class="ttdeci">void pbx_retrieve_variable(struct ast_channel *c, const char *var, char **ret, char *workspace, int workspacelen, struct varshead *headp)</div><div class="ttdoc">Retrieve the value of a builtin variable or variable from the channel variable stack. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l00235">pbx_variables.c:235</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abadec846525eeb6056fc4c2b3d993250"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abadec846525eeb6056fc4c2b3d993250">&#9670;&nbsp;</a></span>handle_getvariablefull()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_getvariablefull </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03239">3239</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02970">ast_channel_ref</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l00616">ast_str_substitute_variables()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>, and <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00147">str</a>.</p>
<div class="fragment"><div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;{</div><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan2 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;</div><div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;   <span class="keywordflow">if</span> (argc != 4 &amp;&amp; argc != 5) {</div><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;   }</div><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;</div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;   <span class="keywordflow">if</span> (argc == 5) {</div><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;      chan2 = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(argv[4]);</div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;      chan2 = <a class="code" href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a>(chan);</div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;   }</div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;</div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;   <span class="keywordflow">if</span> (chan2) {</div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(16);</div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;      <span class="keywordflow">if</span> (!str) {</div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;         <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;      }</div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a556749361c7b9109134c8d00ab4ef6bf">ast_str_substitute_variables</a>(&amp;str, 0, chan2, argv[3]);</div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=1 (%s)\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(str));</div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(str);</div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;   }</div><div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;</div><div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;   <span class="keywordflow">if</span> (chan2) {</div><div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;      chan2 = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan2);</div><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;   }</div><div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;</div><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="pbx_8h_html_a556749361c7b9109134c8d00ab4ef6bf"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a556749361c7b9109134c8d00ab4ef6bf">ast_str_substitute_variables</a></div><div class="ttdeci">void ast_str_substitute_variables(struct ast_str **buf, ssize_t maxlen, struct ast_channel *chan, const char *templ)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l00616">pbx_variables.c:616</a></div></div>
<div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="channel_8h_html_a6801c703e767d6f760c54c8b86a30024"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a></div><div class="ttdeci">#define ast_channel_ref(c)</div><div class="ttdoc">Increase channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02970">channel.h:2970</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a15bee3c2a3d5a51bc584293139656523"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15bee3c2a3d5a51bc584293139656523">&#9670;&nbsp;</a></span>handle_hangup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_hangup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03100">3100</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02504">ast_set_hangupsource()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02476">ast_softhangup()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01149">AST_SOFTHANGUP_EXPLICIT</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;{</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;   <span class="keywordflow">if</span> (argc == 1) {</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;      <span class="comment">/* no argument: hangup the current channel */</span></div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aa9a1d01546e0fc0047e56ba589790b6f">ast_set_hangupsource</a>(chan, <span class="stringliteral">&quot;dialplan/agi&quot;</span>, 0);</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac2d6607253f7e8b272d4e845474eaa9b">ast_softhangup</a>(chan,<a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2b3b711afc65059c4b51008c9fbc7aee">AST_SOFTHANGUP_EXPLICIT</a>);</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=1\n&quot;</span>);</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argc == 2) {</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;      <span class="comment">/* one argument: look for info on the specified channel */</span></div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;      <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(argv[1]))) {</div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;         <span class="comment">/* we have a matching channel */</span></div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aa9a1d01546e0fc0047e56ba589790b6f">ast_set_hangupsource</a>(c, <span class="stringliteral">&quot;dialplan/agi&quot;</span>, 0);</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ac2d6607253f7e8b272d4e845474eaa9b">ast_softhangup</a>(c, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2b3b711afc65059c4b51008c9fbc7aee">AST_SOFTHANGUP_EXPLICIT</a>);</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;         c = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(c);</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;         <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=1\n&quot;</span>);</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;      }</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;      <span class="comment">/* if we get this far no channel name matched the argument given */</span></div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=-1\n&quot;</span>);</div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;   }</div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a2b3b711afc65059c4b51008c9fbc7aee"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2b3b711afc65059c4b51008c9fbc7aee">AST_SOFTHANGUP_EXPLICIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01149">channel.h:1149</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="channel_8h_html_aa9a1d01546e0fc0047e56ba589790b6f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa9a1d01546e0fc0047e56ba589790b6f">ast_set_hangupsource</a></div><div class="ttdeci">void ast_set_hangupsource(struct ast_channel *chan, const char *source, int force)</div><div class="ttdoc">Set the source of the hangup in this channel and it&amp;#39;s bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02504">channel.c:2504</a></div></div>
<div class="ttc" id="channel_8h_html_ac2d6607253f7e8b272d4e845474eaa9b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2d6607253f7e8b272d4e845474eaa9b">ast_softhangup</a></div><div class="ttdeci">int ast_softhangup(struct ast_channel *chan, int reason)</div><div class="ttdoc">Softly hangup up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02476">channel.c:2476</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6bb7f30afbd30476b7569b9cc518fd45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bb7f30afbd30476b7569b9cc518fd45">&#9670;&nbsp;</a></span>handle_noop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_noop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03391">3391</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04625">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;{</div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;}</div><div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acccf573c262402359126137f5b67a491"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acccf573c262402359126137f5b67a491">&#9670;&nbsp;</a></span>handle_recordfile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_recordfile </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02899">2899</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01020">ast_applystream()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00856">ast_channel_readformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00625">ast_channel_stream_set()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01068">ast_closestream()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00295">AST_CONTROL_VIDUPDATE</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01770">ast_dsp_free()</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01996">ast_dsp_get_threshold_from_settings()</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01745">ast_dsp_new()</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01775">ast_dsp_set_threshold()</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01483">ast_dsp_silence()</a>, <a class="el" href="../../db/db2/asterisk_8h_source.html#l00032">AST_FILE_MODE</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00041">ast_format_slin</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">AST_FRAME_DTMF</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00103">AST_FRAME_VIDEO</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04322">ast_indicate()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04302">ast_read()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01038">ast_seekstream()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05849">ast_set_read_format()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01063">ast_stream_rewind()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01250">ast_streamfile()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01048">ast_tellstream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01043">ast_truncstream()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l03171">ast_waitfor()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01776">ast_waitstream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01361">ast_writefile()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00209">ast_writestream()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00042">RESULT_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, <a class="el" href="../../d3/d08/dsp_8h_source.html#l00073">THRESHOLD_SILENCE</a>, and <a class="el" href="../../d5/d3b/dsp_8c_source.html#l00409">ast_dsp::totalsilence</a>.</p>
<div class="fragment"><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;{</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *fs;</div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;   <span class="keyword">struct </span>timeval start;</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;   <span class="keywordtype">long</span> sample_offset = 0;</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;   <span class="keywordtype">int</span> ms;</div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/de5/structast__dsp.html">ast_dsp</a> *sildet=<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;         <span class="comment">/* silence detector dsp */</span></div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/de5/structast__dsp.html#a37f3ccbb8c8ee286cec59a4b0340e924">totalsilence</a> = 0;</div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;   <span class="keywordtype">int</span> dspsilence = 0;</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;   <span class="keywordtype">int</span> silence = 0;                <span class="comment">/* amount of silence to allow */</span></div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;   <span class="keywordtype">int</span> gotsilence = 0;             <span class="comment">/* did we timeout for silence? */</span></div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;   <span class="keywordtype">char</span> *silencestr = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *, rfmt, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;   <span class="comment">/* XXX EAGI FIXME XXX */</span></div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;   <span class="keywordflow">if</span> (argc &lt; 6)</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;   <span class="keywordflow">if</span> (sscanf(argv[5], <span class="stringliteral">&quot;%30d&quot;</span>, &amp;ms) != 1)</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;   <span class="keywordflow">if</span> (argc &gt; 6)</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;      silencestr = strchr(argv[6],<span class="charliteral">&#39;s&#39;</span>);</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;   <span class="keywordflow">if</span> ((argc &gt; 7) &amp;&amp; (!silencestr))</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;      silencestr = strchr(argv[7],<span class="charliteral">&#39;s&#39;</span>);</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;   <span class="keywordflow">if</span> ((argc &gt; 8) &amp;&amp; (!silencestr))</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;      silencestr = strchr(argv[8],<span class="charliteral">&#39;s&#39;</span>);</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;   <span class="keywordflow">if</span> (silencestr) {</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;      <span class="keywordflow">if</span> (strlen(silencestr) &gt; 2) {</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;         <span class="keywordflow">if</span> ((silencestr[0] == <span class="charliteral">&#39;s&#39;</span>) &amp;&amp; (silencestr[1] == <span class="charliteral">&#39;=&#39;</span>)) {</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;            silencestr++;</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;            silencestr++;</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;            <span class="keywordflow">if</span> (silencestr)</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;               silence = atoi(silencestr);</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;            <span class="keywordflow">if</span> (silence &gt; 0)</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;               silence *= 1000;</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;         }</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;      }</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;   }</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;   <span class="keywordflow">if</span> (silence &gt; 0) {</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;      rfmt = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a>(chan));</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;      res = <a class="code" href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a>(chan, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>);</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to set to linear mode, giving up\n&quot;</span>);</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;         <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d\n&quot;</span>, res);</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>;</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;      }</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;      sildet = <a class="code" href="../../d3/d08/dsp_8h.html#a0a60e93006c8e1ca8fda922ae0e0da2c">ast_dsp_new</a>();</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;      <span class="keywordflow">if</span> (!sildet) {</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create silence detector :(\n&quot;</span>);</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;         <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=-1\n&quot;</span>);</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>;</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;      }</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;      <a class="code" href="../../d3/d08/dsp_8h.html#a06a0b883127ba1f853e9e0fa5f29d81b">ast_dsp_set_threshold</a>(sildet, <a class="code" href="../../d3/d08/dsp_8h.html#aab28c68838eaed4e0c89460a4e554cca">ast_dsp_get_threshold_from_settings</a>(<a class="code" href="../../d3/d08/dsp_8h.html#a11a8ce2b7eba2230cab37aad708d9abfa40278495f8621707b864e57e1110d20f">THRESHOLD_SILENCE</a>));</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;   }</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;</div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;   <span class="comment">/* backward compatibility, if no offset given, arg[6] would have been</span></div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;<span class="comment">    * caught below and taken to be a beep, else if it is a digit then it is a</span></div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;<span class="comment">    * offset */</span></div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;   <span class="keywordflow">if</span> ((argc &gt;6) &amp;&amp; (sscanf(argv[6], <span class="stringliteral">&quot;%30ld&quot;</span>, &amp;sample_offset) != 1) &amp;&amp; (!strchr(argv[6], <span class="charliteral">&#39;=&#39;</span>)))</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;      res = <a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;beep&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan));</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;   <span class="keywordflow">if</span> ((argc &gt; 7) &amp;&amp; (!strchr(argv[7], <span class="charliteral">&#39;=&#39;</span>)))</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;      res = <a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;beep&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan));</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;   <span class="keywordflow">if</span> (!res)</div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;      res = <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, argv[4]);</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d (randomerror) endpos=%ld\n&quot;</span>, res, sample_offset);</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;      fs = <a class="code" href="../../d2/d4d/file_8h.html#a964f8ef393c07609d7b9e02937faed52">ast_writefile</a>(argv[2], argv[3], <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, O_CREAT | O_WRONLY | (sample_offset ? O_APPEND : 0), 0, <a class="code" href="../../db/db2/asterisk_8h.html#aa6293b2dae52a2b470494df672a26c42">AST_FILE_MODE</a>);</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;      <span class="keywordflow">if</span> (!fs) {</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;         res = -1;</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;         <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d (writefile)\n&quot;</span>, res);</div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;         <span class="keywordflow">if</span> (sildet)</div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;            <a class="code" href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a>(sildet);</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>;</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;      }</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;      <span class="comment">/* Request a video update */</span></div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528">AST_CONTROL_VIDUPDATE</a>);</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a1460c260bdadfa226b95598a7d9d44a7">ast_channel_stream_set</a>(chan, fs);</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#a618e3120b6d019312ef2d617d9f14571">ast_applystream</a>(chan,fs);</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;      <span class="comment">/* really should have checks */</span></div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a>(fs, sample_offset, SEEK_SET);</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#aa647ac352a00b559131f90ffffea2c3c">ast_truncstream</a>(fs);</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;      start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;      <span class="keywordflow">while</span> ((ms &lt; 0) || <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), start) &lt; ms) {</div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;         res = <a class="code" href="../../d5/d7b/channel_8h.html#a60e0bcaed001e8d5ed1ba0eb2644b3cc">ast_waitfor</a>(chan, ms - <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), start));</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;         <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a>(fs);</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;            <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d (waitfor) endpos=%ld\n&quot;</span>, res,sample_offset);</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;            <span class="keywordflow">if</span> (sildet)</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;               <a class="code" href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a>(sildet);</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>;</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;         }</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;         f = <a class="code" href="../../d5/d7b/channel_8h.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a>(chan);</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;         <span class="keywordflow">if</span> (!f) {</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a>(fs);</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;            <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d (hangup) endpos=%ld\n&quot;</span>, -1, sample_offset);</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;            <span class="keywordflow">if</span> (sildet)</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;               <a class="code" href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a>(sildet);</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>;</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;         }</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;         <span class="keywordflow">switch</span>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a>) {</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a>:</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;            <span class="keywordflow">if</span> (strchr(argv[4], f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>)) {</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;               <span class="comment">/* This is an interrupting chracter, so rewind to chop off any small</span></div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;<span class="comment">                  amount of DTMF that may have been recorded</span></div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;<span class="comment">               */</span></div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;               <a class="code" href="../../d2/d4d/file_8h.html#a4c7c02a659b09bb06dd63e1f42692666">ast_stream_rewind</a>(fs, 200);</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;               <a class="code" href="../../d2/d4d/file_8h.html#aa647ac352a00b559131f90ffffea2c3c">ast_truncstream</a>(fs);</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;               sample_offset = <a class="code" href="../../d2/d4d/file_8h.html#a01771a318e7adea51499040f27b4278a">ast_tellstream</a>(fs);</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;               <a class="code" href="../../d2/d4d/file_8h.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a>(fs);</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;               <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d (dtmf) endpos=%ld\n&quot;</span>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, sample_offset);</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;               <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;               <span class="keywordflow">if</span> (sildet)</div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;                  <a class="code" href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a>(sildet);</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;               <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;            }</div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>:</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#a3608386b919ef0949d2858cdeb02d12e">ast_writestream</a>(fs, f);</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;            <span class="comment">/* this is a safe place to check progress since we know that fs</span></div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;<span class="comment">             * is valid after a write, and it will then have our current</span></div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;<span class="comment">             * location */</span></div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;            sample_offset = <a class="code" href="../../d2/d4d/file_8h.html#a01771a318e7adea51499040f27b4278a">ast_tellstream</a>(fs);</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;            <span class="keywordflow">if</span> (silence &gt; 0) {</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;               dspsilence = 0;</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;               <a class="code" href="../../d3/d08/dsp_8h.html#a3f3b67988bffb3addfbc8a4688fa466d">ast_dsp_silence</a>(sildet, f, &amp;dspsilence);</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;               <span class="keywordflow">if</span> (dspsilence) {</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;                  totalsilence = dspsilence;</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;                  totalsilence = 0;</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;               }</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;               <span class="keywordflow">if</span> (totalsilence &gt; silence) {</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;                  <span class="comment">/* Ended happily with silence */</span></div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;                  gotsilence = 1;</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;               }</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;            }</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a>:</div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#a3608386b919ef0949d2858cdeb02d12e">ast_writestream</a>(fs, f);</div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;            <span class="comment">/* Ignore all other frames */</span></div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;         }</div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;         <span class="keywordflow">if</span> (gotsilence)</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;      }</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;      <span class="keywordflow">if</span> (gotsilence) {</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#a4c7c02a659b09bb06dd63e1f42692666">ast_stream_rewind</a>(fs, silence-1000);</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#aa647ac352a00b559131f90ffffea2c3c">ast_truncstream</a>(fs);</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;         sample_offset = <a class="code" href="../../d2/d4d/file_8h.html#a01771a318e7adea51499040f27b4278a">ast_tellstream</a>(fs);</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;      }</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a>(fs);</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d (timeout) endpos=%ld\n&quot;</span>, res, sample_offset);</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;   }</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;   <span class="keywordflow">if</span> (silence &gt; 0) {</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;      res = <a class="code" href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a>(chan, rfmt);</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;      <span class="keywordflow">if</span> (res)</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to restore read format on &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;      <a class="code" href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a>(sildet);</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;   }</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;}</div><div class="ttc" id="file_8h_html_a67c7e271b4ca70aca6d48fd48d121857"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a></div><div class="ttdeci">int ast_streamfile(struct ast_channel *c, const char *filename, const char *preflang)</div><div class="ttdoc">Streams a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01250">file.c:1250</a></div></div>
<div class="ttc" id="channel_8h_html_aef2af15a597c948e97628da6c5c84f28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a></div><div class="ttdeci">int ast_indicate(struct ast_channel *chan, int condition)</div><div class="ttdoc">Indicates condition of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04322">channel.c:4322</a></div></div>
<div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="dsp_8h_html_a0a57a1e374549eb2705068688f4046db"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a></div><div class="ttdeci">void ast_dsp_free(struct ast_dsp *dsp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01770">dsp.c:1770</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="dsp_8h_html_a0a60e93006c8e1ca8fda922ae0e0da2c"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a0a60e93006c8e1ca8fda922ae0e0da2c">ast_dsp_new</a></div><div class="ttdeci">struct ast_dsp * ast_dsp_new(void)</div><div class="ttdoc">Allocates a new dsp, assumes 8khz for internal sample rate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01745">dsp.c:1745</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="channel_8h_html_a7ef6737309dc9e8b6c4a7cb4800638b1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a></div><div class="ttdeci">struct ast_frame * ast_read(struct ast_channel *chan)</div><div class="ttdoc">Reads a frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04302">channel.c:4302</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a248afd6c02044259a386f6b7aee922a2"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a></div><div class="ttdeci">#define AST_FRAME_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">include/asterisk/frame.h:139</a></div></div>
<div class="ttc" id="asterisk_8h_html_aa6293b2dae52a2b470494df672a26c42"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#aa6293b2dae52a2b470494df672a26c42">AST_FILE_MODE</a></div><div class="ttdeci">#define AST_FILE_MODE</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db2/asterisk_8h_source.html#l00032">asterisk.h:32</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="structast__dsp_html_a37f3ccbb8c8ee286cec59a4b0340e924"><div class="ttname"><a href="../../d6/de5/structast__dsp.html#a37f3ccbb8c8ee286cec59a4b0340e924">ast_dsp::totalsilence</a></div><div class="ttdeci">int totalsilence</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l00409">dsp.c:409</a></div></div>
<div class="ttc" id="channel_8h_html_aaced431562223538a94e0e69cf94151a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a></div><div class="ttdeci">struct ast_format * ast_channel_readformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00856">channel_internal_api.c:856</a></div></div>
<div class="ttc" id="file_8h_html_a01771a318e7adea51499040f27b4278a"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a01771a318e7adea51499040f27b4278a">ast_tellstream</a></div><div class="ttdeci">off_t ast_tellstream(struct ast_filestream *fs)</div><div class="ttdoc">Tell where we are in a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01048">file.c:1048</a></div></div>
<div class="ttc" id="channel_8h_html_a1460c260bdadfa226b95598a7d9d44a7"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1460c260bdadfa226b95598a7d9d44a7">ast_channel_stream_set</a></div><div class="ttdeci">void ast_channel_stream_set(struct ast_channel *chan, struct ast_filestream *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00625">channel_internal_api.c:625</a></div></div>
<div class="ttc" id="dsp_8h_html_a11a8ce2b7eba2230cab37aad708d9abfa40278495f8621707b864e57e1110d20f"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a11a8ce2b7eba2230cab37aad708d9abfa40278495f8621707b864e57e1110d20f">THRESHOLD_SILENCE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d08/dsp_8h_source.html#l00073">dsp.h:73</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="channel_8h_html_a9107a83365cbf327cc0d12cb0dbd28d8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a></div><div class="ttdeci">int ast_set_read_format(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdoc">Sets read format on channel chan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05849">channel.c:5849</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__dsp_html"><div class="ttname"><a href="../../d6/de5/structast__dsp.html">ast_dsp</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l00405">dsp.c:405</a></div></div>
<div class="ttc" id="dsp_8h_html_a06a0b883127ba1f853e9e0fa5f29d81b"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a06a0b883127ba1f853e9e0fa5f29d81b">ast_dsp_set_threshold</a></div><div class="ttdeci">void ast_dsp_set_threshold(struct ast_dsp *dsp, int threshold)</div><div class="ttdoc">Set the minimum average magnitude threshold to determine talking by the DSP. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01775">dsp.c:1775</a></div></div>
<div class="ttc" id="file_8h_html_a618e3120b6d019312ef2d617d9f14571"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a618e3120b6d019312ef2d617d9f14571">ast_applystream</a></div><div class="ttdeci">int ast_applystream(struct ast_channel *chan, struct ast_filestream *s)</div><div class="ttdoc">Applys a open stream to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01020">file.c:1020</a></div></div>
<div class="ttc" id="file_8h_html_a4c7c02a659b09bb06dd63e1f42692666"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a4c7c02a659b09bb06dd63e1f42692666">ast_stream_rewind</a></div><div class="ttdeci">int ast_stream_rewind(struct ast_filestream *fs, off_t ms)</div><div class="ttdoc">Rewind stream ms. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01063">file.c:1063</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="file_8h_html_a964f8ef393c07609d7b9e02937faed52"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a964f8ef393c07609d7b9e02937faed52">ast_writefile</a></div><div class="ttdeci">struct ast_filestream * ast_writefile(const char *filename, const char *type, const char *comment, int flags, int check, mode_t mode)</div><div class="ttdoc">Starts writing a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01361">file.c:1361</a></div></div>
<div class="ttc" id="file_8h_html_a36f6bba05952162d5d1ee7fb9819bd07"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a></div><div class="ttdeci">int ast_seekstream(struct ast_filestream *fs, off_t sample_offset, int whence)</div><div class="ttdoc">Seeks into stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01038">file.c:1038</a></div></div>
<div class="ttc" id="file_8h_html_ab53bd2c3c55d509790c7f7620aac6373"><div class="ttname"><a href="../../d2/d4d/file_8h.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a></div><div class="ttdeci">int ast_closestream(struct ast_filestream *f)</div><div class="ttdoc">Closes a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01068">file.c:1068</a></div></div>
<div class="ttc" id="file_8h_html_aa647ac352a00b559131f90ffffea2c3c"><div class="ttname"><a href="../../d2/d4d/file_8h.html#aa647ac352a00b559131f90ffffea2c3c">ast_truncstream</a></div><div class="ttdeci">int ast_truncstream(struct ast_filestream *fs)</div><div class="ttdoc">Trunc stream at current location. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01043">file.c:1043</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528">AST_CONTROL_VIDUPDATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00295">include/asterisk/frame.h:295</a></div></div>
<div class="ttc" id="dsp_8h_html_a3f3b67988bffb3addfbc8a4688fa466d"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a3f3b67988bffb3addfbc8a4688fa466d">ast_dsp_silence</a></div><div class="ttdeci">int ast_dsp_silence(struct ast_dsp *dsp, struct ast_frame *f, int *totalsilence)</div><div class="ttdoc">Process the audio frame for silence. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01483">dsp.c:1483</a></div></div>
<div class="ttc" id="structast__filestream_html"><div class="ttname"><a href="../../db/dbc/structast__filestream.html">ast_filestream</a></div><div class="ttdoc">This structure is allocated by file.c in one chunk, together with buf_size and desc_size bytes of mem...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00101">mod_format.h:101</a></div></div>
<div class="ttc" id="channel_8h_html_a60e0bcaed001e8d5ed1ba0eb2644b3cc"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a60e0bcaed001e8d5ed1ba0eb2644b3cc">ast_waitfor</a></div><div class="ttdeci">int ast_waitfor(struct ast_channel *chan, int ms)</div><div class="ttdoc">Wait for input on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03171">channel.c:3171</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="file_8h_html_a3608386b919ef0949d2858cdeb02d12e"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a3608386b919ef0949d2858cdeb02d12e">ast_writestream</a></div><div class="ttdeci">int ast_writestream(struct ast_filestream *fs, struct ast_frame *f)</div><div class="ttdoc">Writes a frame to a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00209">file.c:209</a></div></div>
<div class="ttc" id="file_8h_html_affc21cb57c6bf72a2cb7ec8a379b2137"><div class="ttname"><a href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a></div><div class="ttdeci">int ast_waitstream(struct ast_channel *c, const char *breakon)</div><div class="ttdoc">Waits for a stream to stop or digit to be pressed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01776">file.c:1776</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="channel_8h_html_a9abe31fe40dcd03cd2957e5309e32ac6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a></div><div class="ttdeci">const char * ast_channel_language(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00103">include/asterisk/frame.h:103</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="format__cache_8h_html_a771d7c34570e8e492c25a0c2eb41889d"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a></div><div class="ttdeci">struct ast_format * ast_format_slin</div><div class="ttdoc">Built-in cached signed linear 8kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00041">format_cache.c:41</a></div></div>
<div class="ttc" id="dsp_8h_html_aab28c68838eaed4e0c89460a4e554cca"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#aab28c68838eaed4e0c89460a4e554cca">ast_dsp_get_threshold_from_settings</a></div><div class="ttdeci">int ast_dsp_get_threshold_from_settings(enum threshold which)</div><div class="ttdoc">Get silence threshold from dsp.conf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01996">dsp.c:1996</a></div></div>
<div class="ttc" id="cli_8h_html_aea87ce97f86effb2c4df6274d4aac567"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a></div><div class="ttdeci">#define RESULT_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00042">cli.h:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad6528c693ea08cc8b771afef8ba4f1b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6528c693ea08cc8b771afef8ba4f1b4">&#9670;&nbsp;</a></span>handle_recvchar()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_recvchar </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02414">2414</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04751">ast_recvchar()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00042">RESULT_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;{</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;   <span class="keywordflow">if</span> (argc != 3)</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;   res = <a class="code" href="../../d5/d7b/channel_8h.html#a5d6470615a8701722e9d3c6c6fca01d0">ast_recvchar</a>(chan,atoi(argv[2]));</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;   <span class="keywordflow">if</span> (res == 0) {</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d (timeout)\n&quot;</span>, res);</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;   }</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;   <span class="keywordflow">if</span> (res &gt; 0) {</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d\n&quot;</span>, res);</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;   }</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d (hangup)\n&quot;</span>, res);</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>;</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;}</div><div class="ttc" id="channel_8h_html_a5d6470615a8701722e9d3c6c6fca01d0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a5d6470615a8701722e9d3c6c6fca01d0">ast_recvchar</a></div><div class="ttdeci">int ast_recvchar(struct ast_channel *chan, int timeout)</div><div class="ttdoc">Receives a text character from a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04751">channel.c:4751</a></div></div>
<div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="cli_8h_html_aea87ce97f86effb2c4df6274d4aac567"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a></div><div class="ttdeci">#define RESULT_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00042">cli.h:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3eeeb37b22f82fc528660795e6e02bee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3eeeb37b22f82fc528660795e6e02bee">&#9670;&nbsp;</a></span>handle_recvtext()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_recvtext </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02434">2434</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04762">ast_recvtext()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;{</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;   <span class="keywordflow">if</span> (argc != 3)</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;   buf = <a class="code" href="../../d5/d7b/channel_8h.html#abb507e6b148bf773fb546ac5c931f264">ast_recvtext</a>(chan, atoi(argv[2]));</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;   <span class="keywordflow">if</span> (buf) {</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=1 (%s)\n&quot;</span>, buf);</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(buf);</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=-1\n&quot;</span>);</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;   }</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="channel_8h_html_abb507e6b148bf773fb546ac5c931f264"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abb507e6b148bf773fb546ac5c931f264">ast_recvtext</a></div><div class="ttdeci">char * ast_recvtext(struct ast_channel *chan, int timeout)</div><div class="ttdoc">Receives a text string from a channel Read a string of text from a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04762">channel.c:4762</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afc75df98fe97859011d66ed5bb6b184f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc75df98fe97859011d66ed5bb6b184f">&#9670;&nbsp;</a></span>handle_sayalpha()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_sayalpha </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02716">2716</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language()</a>, <a class="el" href="../../db/dce/say_8h_source.html#l00166">AST_SAY_CASE_ALL</a>, <a class="el" href="../../db/dce/say_8h_source.html#l00164">AST_SAY_CASE_LOWER</a>, <a class="el" href="../../db/dce/say_8h_source.html#l00163">AST_SAY_CASE_NONE</a>, <a class="el" href="../../db/dce/say_8h_source.html#l00165">AST_SAY_CASE_UPPER</a>, <a class="el" href="../../db/dce/say_8h_source.html#l00175">ast_say_character_str_full</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00036">agi_state::audio</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00037">agi_state::ctrl</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00042">RESULT_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;{</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;   <span class="keywordtype">int</span> sensitivity = <a class="code" href="../../db/dce/say_8h.html#ab73ba7bbfc3824448a2cd4f0c6d050c6ade020c4d50637c2dd5eeb9dc7905a04f">AST_SAY_CASE_NONE</a>;</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;   <span class="keywordflow">if</span> (argc &lt; 4 || argc &gt; 5) {</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;   }</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;   <span class="keywordflow">if</span> (argc &gt; 4) {</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;      <span class="keywordflow">switch</span> (argv[4][0]) {</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;a&#39;</span>:</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;A&#39;</span>:</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;         sensitivity = <a class="code" href="../../db/dce/say_8h.html#ab73ba7bbfc3824448a2cd4f0c6d050c6aa65d5cb923e93c55a3387e2e3e2e4526">AST_SAY_CASE_ALL</a>;</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;l&#39;</span>:</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;L&#39;</span>:</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;         sensitivity = <a class="code" href="../../db/dce/say_8h.html#ab73ba7bbfc3824448a2cd4f0c6d050c6a88ed5ed953c3eed9aefeaaa874593d54">AST_SAY_CASE_LOWER</a>;</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>:</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;N&#39;</span>:</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;         sensitivity = <a class="code" href="../../db/dce/say_8h.html#ab73ba7bbfc3824448a2cd4f0c6d050c6ade020c4d50637c2dd5eeb9dc7905a04f">AST_SAY_CASE_NONE</a>;</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;u&#39;</span>:</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;U&#39;</span>:</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;         sensitivity = <a class="code" href="../../db/dce/say_8h.html#ab73ba7bbfc3824448a2cd4f0c6d050c6acc8eb687e54f4d56c01132864ed6a9a9">AST_SAY_CASE_UPPER</a>;</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;\0&#39;</span>:</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;      }</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;   }</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;   res = <a class="code" href="../../db/dce/say_8h.html#a7ef8984468db709b3a9a9d13a260177a">ast_say_character_str_full</a>(chan, argv[2], argv[3], <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan), sensitivity, agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a220009426c8518be4b294a02b1194906">audio</a>, agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">ctrl</a>);</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;   <span class="keywordflow">if</span> (res == 1) <span class="comment">/* New command */</span></div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d\n&quot;</span>, res);</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;   <span class="keywordflow">return</span> (res &gt;= 0) ? <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a> : <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>;</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="structagi__state_html_a0f787778e7019ca3a8bdf0bd17b9efca"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">agi_state::ctrl</a></div><div class="ttdeci">int ctrl</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00037">agi.h:37</a></div></div>
<div class="ttc" id="say_8h_html_ab73ba7bbfc3824448a2cd4f0c6d050c6acc8eb687e54f4d56c01132864ed6a9a9"><div class="ttname"><a href="../../db/dce/say_8h.html#ab73ba7bbfc3824448a2cd4f0c6d050c6acc8eb687e54f4d56c01132864ed6a9a9">AST_SAY_CASE_UPPER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dce/say_8h_source.html#l00165">say.h:165</a></div></div>
<div class="ttc" id="say_8h_html_ab73ba7bbfc3824448a2cd4f0c6d050c6a88ed5ed953c3eed9aefeaaa874593d54"><div class="ttname"><a href="../../db/dce/say_8h.html#ab73ba7bbfc3824448a2cd4f0c6d050c6a88ed5ed953c3eed9aefeaaa874593d54">AST_SAY_CASE_LOWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dce/say_8h_source.html#l00164">say.h:164</a></div></div>
<div class="ttc" id="say_8h_html_ab73ba7bbfc3824448a2cd4f0c6d050c6aa65d5cb923e93c55a3387e2e3e2e4526"><div class="ttname"><a href="../../db/dce/say_8h.html#ab73ba7bbfc3824448a2cd4f0c6d050c6aa65d5cb923e93c55a3387e2e3e2e4526">AST_SAY_CASE_ALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dce/say_8h_source.html#l00166">say.h:166</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="structagi__state_html_a220009426c8518be4b294a02b1194906"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a220009426c8518be4b294a02b1194906">agi_state::audio</a></div><div class="ttdeci">int audio</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00036">agi.h:36</a></div></div>
<div class="ttc" id="channel_8h_html_a9abe31fe40dcd03cd2957e5309e32ac6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a></div><div class="ttdeci">const char * ast_channel_language(const struct ast_channel *chan)</div></div>
<div class="ttc" id="say_8h_html_a7ef8984468db709b3a9a9d13a260177a"><div class="ttname"><a href="../../db/dce/say_8h.html#a7ef8984468db709b3a9a9d13a260177a">ast_say_character_str_full</a></div><div class="ttdeci">SAY_EXTERN int(* ast_say_character_str_full)(struct ast_channel *chan, const char *num, const char *ints, const char *lang, enum ast_say_case_sensitivity sensitivity, int audiofd, int ctrlfd) SAY_INIT(ast_say_character_str_full)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dce/say_8h_source.html#l00175">say.h:175</a></div></div>
<div class="ttc" id="say_8h_html_ab73ba7bbfc3824448a2cd4f0c6d050c6ade020c4d50637c2dd5eeb9dc7905a04f"><div class="ttname"><a href="../../db/dce/say_8h.html#ab73ba7bbfc3824448a2cd4f0c6d050c6ade020c4d50637c2dd5eeb9dc7905a04f">AST_SAY_CASE_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dce/say_8h_source.html#l00163">say.h:163</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="cli_8h_html_aea87ce97f86effb2c4df6274d4aac567"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a></div><div class="ttdeci">#define RESULT_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00042">cli.h:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae00d940d4ec2958468aee413725ac513"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae00d940d4ec2958468aee413725ac513">&#9670;&nbsp;</a></span>handle_saydate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_saydate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02756">2756</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language()</a>, <a class="el" href="../../db/dce/say_8h_source.html#l00185">ast_say_date</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00042">RESULT_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;{</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;   <span class="keywordtype">int</span> res, num;</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;   <span class="keywordflow">if</span> (argc != 4)</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;   <span class="keywordflow">if</span> (sscanf(argv[2], <span class="stringliteral">&quot;%30d&quot;</span>, &amp;num) != 1)</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;   res = <a class="code" href="../../db/dce/say_8h.html#a3e99e91f5d51882a3f70c3ffb073d349">ast_say_date</a>(chan, num, argv[3], <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan));</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;   <span class="keywordflow">if</span> (res == 1)</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d\n&quot;</span>, res);</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;   <span class="keywordflow">return</span> (res &gt;= 0) ? <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a> : <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>;</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="say_8h_html_a3e99e91f5d51882a3f70c3ffb073d349"><div class="ttname"><a href="../../db/dce/say_8h.html#a3e99e91f5d51882a3f70c3ffb073d349">ast_say_date</a></div><div class="ttdeci">SAY_EXTERN int(* ast_say_date)(struct ast_channel *chan, time_t t, const char *ints, const char *lang) SAY_INIT(ast_say_date)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dce/say_8h_source.html#l00185">say.h:185</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="channel_8h_html_a9abe31fe40dcd03cd2957e5309e32ac6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a></div><div class="ttdeci">const char * ast_channel_language(const struct ast_channel *chan)</div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="cli_8h_html_aea87ce97f86effb2c4df6274d4aac567"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a></div><div class="ttdeci">#define RESULT_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00042">cli.h:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0aa9abadca4eb88d9360f12bb2e3a378"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0aa9abadca4eb88d9360f12bb2e3a378">&#9670;&nbsp;</a></span>handle_saydatetime()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_saydatetime </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02786">2786</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02198">ast_get_time_t()</a>, <a class="el" href="../../db/dce/say_8h_source.html#l00189">ast_say_date_with_format</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00102">format</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00042">RESULT_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;{</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;   time_t unixtime;</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, *zone = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;   <span class="keywordflow">if</span> (argc &lt; 4)</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;   <span class="keywordflow">if</span> (argc &gt; 4) {</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;      format = argv[4];</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;      <span class="comment">/* XXX this doesn&#39;t belong here, but in the &#39;say&#39; module */</span></div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan), <span class="stringliteral">&quot;de&quot;</span>)) {</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;         format = <span class="stringliteral">&quot;A dBY HMS&quot;</span>;</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;         format = <span class="stringliteral">&quot;ABdY &#39;digits/at&#39; IMp&quot;</span>;</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;      }</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;   }</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;   <span class="keywordflow">if</span> (argc &gt; 5 &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(argv[5]))</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;      zone = argv[5];</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a3b5457e5f5679935093d94b0f788769e">ast_get_time_t</a>(argv[2], &amp;unixtime, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;   res = <a class="code" href="../../db/dce/say_8h.html#a7501ad5a3199320955b0386707878eb4">ast_say_date_with_format</a>(chan, unixtime, argv[3], <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan), format, zone);</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;   <span class="keywordflow">if</span> (res == 1)</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d\n&quot;</span>, res);</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;   <span class="keywordflow">return</span> (res &gt;= 0) ? <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a> : <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>;</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="strings_8h_html_a3b5457e5f5679935093d94b0f788769e"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a3b5457e5f5679935093d94b0f788769e">ast_get_time_t</a></div><div class="ttdeci">int ast_get_time_t(const char *src, time_t *dst, time_t _default, int *consumed)</div><div class="ttdoc">get values from config variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02198">main/utils.c:2198</a></div></div>
<div class="ttc" id="say_8h_html_a7501ad5a3199320955b0386707878eb4"><div class="ttname"><a href="../../db/dce/say_8h.html#a7501ad5a3199320955b0386707878eb4">ast_say_date_with_format</a></div><div class="ttdeci">SAY_EXTERN int(* ast_say_date_with_format)(struct ast_channel *chan, time_t t, const char *ints, const char *lang, const char *format, const char *timezone) SAY_INIT(ast_say_date_with_format)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dce/say_8h_source.html#l00189">say.h:189</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="channel_8h_html_a9abe31fe40dcd03cd2957e5309e32ac6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a></div><div class="ttdeci">const char * ast_channel_language(const struct ast_channel *chan)</div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a98f5e70e98f6dc48e3c5ba316066d540"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a></div><div class="ttdeci">static snd_pcm_format_t format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00102">chan_alsa.c:102</a></div></div>
<div class="ttc" id="cli_8h_html_aea87ce97f86effb2c4df6274d4aac567"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a></div><div class="ttdeci">#define RESULT_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00042">cli.h:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6c1449bbed69db775073c3fb0d2375e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c1449bbed69db775073c3fb0d2375e5">&#9670;&nbsp;</a></span>handle_saydigits()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_saydigits </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02700">2700</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language()</a>, <a class="el" href="../../db/dce/say_8h_source.html#l00143">ast_say_digit_str_full</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00036">agi_state::audio</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00037">agi_state::ctrl</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00042">RESULT_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;{</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;   <span class="keywordtype">int</span> res, num;</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;   <span class="keywordflow">if</span> (argc != 4)</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;   <span class="keywordflow">if</span> (sscanf(argv[2], <span class="stringliteral">&quot;%30d&quot;</span>, &amp;num) != 1)</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;   res = <a class="code" href="../../db/dce/say_8h.html#ab05d3e2a245fb9a199d6b628f901c221">ast_say_digit_str_full</a>(chan, argv[2], argv[3], <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan), agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a220009426c8518be4b294a02b1194906">audio</a>, agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">ctrl</a>);</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;   <span class="keywordflow">if</span> (res == 1) <span class="comment">/* New command */</span></div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d\n&quot;</span>, res);</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;   <span class="keywordflow">return</span> (res &gt;= 0) ? <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a> : <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>;</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="structagi__state_html_a0f787778e7019ca3a8bdf0bd17b9efca"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">agi_state::ctrl</a></div><div class="ttdeci">int ctrl</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00037">agi.h:37</a></div></div>
<div class="ttc" id="say_8h_html_ab05d3e2a245fb9a199d6b628f901c221"><div class="ttname"><a href="../../db/dce/say_8h.html#ab05d3e2a245fb9a199d6b628f901c221">ast_say_digit_str_full</a></div><div class="ttdeci">SAY_EXTERN int(* ast_say_digit_str_full)(struct ast_channel *chan, const char *num, const char *ints, const char *lang, int audiofd, int ctrlfd) SAY_INIT(ast_say_digit_str_full)</div><div class="ttdoc">Same as ast_say_digit_str() with audiofd for received audio and returns 1 on ctrlfd being readable...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dce/say_8h_source.html#l00143">say.h:143</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="structagi__state_html_a220009426c8518be4b294a02b1194906"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a220009426c8518be4b294a02b1194906">agi_state::audio</a></div><div class="ttdeci">int audio</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00036">agi.h:36</a></div></div>
<div class="ttc" id="channel_8h_html_a9abe31fe40dcd03cd2957e5309e32ac6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a></div><div class="ttdeci">const char * ast_channel_language(const struct ast_channel *chan)</div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="cli_8h_html_aea87ce97f86effb2c4df6274d4aac567"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a></div><div class="ttdeci">#define RESULT_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00042">cli.h:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aabf8d780b0cecf93e9a9efe9c3bf7ce9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabf8d780b0cecf93e9a9efe9c3bf7ce9">&#9670;&nbsp;</a></span>handle_saynumber()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_saynumber </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Say number in various language syntaxes. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02685">2685</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language()</a>, <a class="el" href="../../db/dce/say_8h_source.html#l00086">ast_say_number_full</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00036">agi_state::audio</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00037">agi_state::ctrl</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00042">RESULT_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;{</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;   <span class="keywordtype">int</span> res, num;</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;   <span class="keywordflow">if</span> (argc &lt; 4 || argc &gt; 5)</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;   <span class="keywordflow">if</span> (sscanf(argv[2], <span class="stringliteral">&quot;%30d&quot;</span>, &amp;num) != 1)</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;   res = <a class="code" href="../../db/dce/say_8h.html#a22eed2dcf42488b3e6cea2a987a67503">ast_say_number_full</a>(chan, num, argv[3], <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan), argc &gt; 4 ? argv[4] : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a220009426c8518be4b294a02b1194906">audio</a>, agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">ctrl</a>);</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;   <span class="keywordflow">if</span> (res == 1)</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d\n&quot;</span>, res);</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;   <span class="keywordflow">return</span> (res &gt;= 0) ? <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a> : <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>;</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;}</div><div class="ttc" id="say_8h_html_a22eed2dcf42488b3e6cea2a987a67503"><div class="ttname"><a href="../../db/dce/say_8h.html#a22eed2dcf42488b3e6cea2a987a67503">ast_say_number_full</a></div><div class="ttdeci">SAY_EXTERN int(* ast_say_number_full)(struct ast_channel *chan, int num, const char *ints, const char *lang, const char *options, int audiofd, int ctrlfd) SAY_INIT(ast_say_number_full)</div><div class="ttdoc">Same as ast_say_number() with audiofd for received audio and returns 1 on ctrlfd being readable...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dce/say_8h_source.html#l00086">say.h:86</a></div></div>
<div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="structagi__state_html_a0f787778e7019ca3a8bdf0bd17b9efca"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">agi_state::ctrl</a></div><div class="ttdeci">int ctrl</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00037">agi.h:37</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="structagi__state_html_a220009426c8518be4b294a02b1194906"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a220009426c8518be4b294a02b1194906">agi_state::audio</a></div><div class="ttdeci">int audio</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00036">agi.h:36</a></div></div>
<div class="ttc" id="channel_8h_html_a9abe31fe40dcd03cd2957e5309e32ac6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a></div><div class="ttdeci">const char * ast_channel_language(const struct ast_channel *chan)</div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="cli_8h_html_aea87ce97f86effb2c4df6274d4aac567"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a></div><div class="ttdeci">#define RESULT_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00042">cli.h:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a569e8f64742d4e033fe335a6bc175596"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a569e8f64742d4e033fe335a6bc175596">&#9670;&nbsp;</a></span>handle_sayphonetic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_sayphonetic </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02820">2820</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language()</a>, <a class="el" href="../../db/dce/say_8h_source.html#l00180">ast_say_phonetic_str_full</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00036">agi_state::audio</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00037">agi_state::ctrl</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00042">RESULT_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;{</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;   <span class="keywordflow">if</span> (argc != 4)</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;   res = <a class="code" href="../../db/dce/say_8h.html#a25da3fe3eff6311e1b56eba1283c3c71">ast_say_phonetic_str_full</a>(chan, argv[2], argv[3], <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan), agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a220009426c8518be4b294a02b1194906">audio</a>, agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">ctrl</a>);</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;   <span class="keywordflow">if</span> (res == 1) <span class="comment">/* New command */</span></div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d\n&quot;</span>, res);</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;   <span class="keywordflow">return</span> (res &gt;= 0) ? <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a> : <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>;</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="structagi__state_html_a0f787778e7019ca3a8bdf0bd17b9efca"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">agi_state::ctrl</a></div><div class="ttdeci">int ctrl</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00037">agi.h:37</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="structagi__state_html_a220009426c8518be4b294a02b1194906"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a220009426c8518be4b294a02b1194906">agi_state::audio</a></div><div class="ttdeci">int audio</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00036">agi.h:36</a></div></div>
<div class="ttc" id="channel_8h_html_a9abe31fe40dcd03cd2957e5309e32ac6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a></div><div class="ttdeci">const char * ast_channel_language(const struct ast_channel *chan)</div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="say_8h_html_a25da3fe3eff6311e1b56eba1283c3c71"><div class="ttname"><a href="../../db/dce/say_8h.html#a25da3fe3eff6311e1b56eba1283c3c71">ast_say_phonetic_str_full</a></div><div class="ttdeci">SAY_EXTERN int(* ast_say_phonetic_str_full)(struct ast_channel *chan, const char *num, const char *ints, const char *lang, int audiofd, int ctrlfd) SAY_INIT(ast_say_phonetic_str_full)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dce/say_8h_source.html#l00180">say.h:180</a></div></div>
<div class="ttc" id="cli_8h_html_aea87ce97f86effb2c4df6274d4aac567"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a></div><div class="ttdeci">#define RESULT_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00042">cli.h:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adbe60f9a710e1b555f3f623ad4c29f3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbe60f9a710e1b555f3f623ad4c29f3c">&#9670;&nbsp;</a></span>handle_saytime()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_saytime </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02771">2771</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language()</a>, <a class="el" href="../../db/dce/say_8h_source.html#l00183">ast_say_time</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00042">RESULT_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;{</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;   <span class="keywordtype">int</span> res, num;</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;   <span class="keywordflow">if</span> (argc != 4)</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;   <span class="keywordflow">if</span> (sscanf(argv[2], <span class="stringliteral">&quot;%30d&quot;</span>, &amp;num) != 1)</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;   res = <a class="code" href="../../db/dce/say_8h.html#a2d9857ca07a2f15a41b27c71a91035aa">ast_say_time</a>(chan, num, argv[3], <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan));</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;   <span class="keywordflow">if</span> (res == 1)</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d\n&quot;</span>, res);</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;   <span class="keywordflow">return</span> (res &gt;= 0) ? <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a> : <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>;</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;}</div><div class="ttc" id="say_8h_html_a2d9857ca07a2f15a41b27c71a91035aa"><div class="ttname"><a href="../../db/dce/say_8h.html#a2d9857ca07a2f15a41b27c71a91035aa">ast_say_time</a></div><div class="ttdeci">SAY_EXTERN int(* ast_say_time)(struct ast_channel *chan, time_t t, const char *ints, const char *lang) SAY_INIT(ast_say_time)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dce/say_8h_source.html#l00183">say.h:183</a></div></div>
<div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="channel_8h_html_a9abe31fe40dcd03cd2957e5309e32ac6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a></div><div class="ttdeci">const char * ast_channel_language(const struct ast_channel *chan)</div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="cli_8h_html_aea87ce97f86effb2c4df6274d4aac567"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a></div><div class="ttdeci">#define RESULT_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00042">cli.h:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8ed59e6d895329300f4ce2d5ca8300fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ed59e6d895329300f4ce2d5ca8300fe">&#9670;&nbsp;</a></span>handle_sendimage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_sendimage </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02479">2479</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00445">ast_check_hangup()</a>, <a class="el" href="../../d3/d10/image_8c_source.html#l00158">ast_send_image()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00042">RESULT_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;{</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;   <span class="keywordflow">if</span> (argc != 3) {</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;   }</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;   res = <a class="code" href="../../d5/db2/image_8h.html#a1548a8cc7d6677e4418e1db2e5ebfd9a">ast_send_image</a>(chan, argv[2]);</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan)) {</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;      res = 0;</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;   }</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d\n&quot;</span>, res);</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;   <span class="keywordflow">return</span> (res &gt;= 0) ? <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a> : <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>;</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="image_8h_html_a1548a8cc7d6677e4418e1db2e5ebfd9a"><div class="ttname"><a href="../../d5/db2/image_8h.html#a1548a8cc7d6677e4418e1db2e5ebfd9a">ast_send_image</a></div><div class="ttdeci">int ast_send_image(struct ast_channel *chan, const char *filename)</div><div class="ttdoc">Sends an image. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d10/image_8c_source.html#l00158">image.c:158</a></div></div>
<div class="ttc" id="channel_8h_html_a9c63fff1d736568d1ee332dd7ea502bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a></div><div class="ttdeci">int ast_check_hangup(struct ast_channel *chan)</div><div class="ttdoc">Check to see if a channel is needing hang up. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00445">channel.c:445</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="cli_8h_html_aea87ce97f86effb2c4df6274d4aac567"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a></div><div class="ttdeci">#define RESULT_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00042">cli.h:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad52c8f4244697dbc4d79dd2713664ef0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad52c8f4244697dbc4d79dd2713664ef0">&#9670;&nbsp;</a></span>handle_sendtext()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_sendtext </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02395">2395</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04854">ast_sendtext()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00042">RESULT_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;{</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;   <span class="keywordflow">if</span> (argc != 3)</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;   <span class="comment">/* At the moment, the parser (perhaps broken) returns with</span></div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;<span class="comment">      the last argument PLUS the newline at the end of the input</span></div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;<span class="comment">      buffer. This probably needs to be fixed, but I wont do that</span></div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;<span class="comment">      because other stuff may break as a result. The right way</span></div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;<span class="comment">      would probably be to strip off the trailing newline before</span></div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;<span class="comment">      parsing, then here, add a newline at the end of the string</span></div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;<span class="comment">      before sending it to ast_sendtext --DUDE */</span></div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;   res = <a class="code" href="../../d5/d7b/channel_8h.html#a83631e0dc02a50802cf857caa3fdc1d7">ast_sendtext</a>(chan, argv[2]);</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d\n&quot;</span>, res);</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;   <span class="keywordflow">return</span> (res &gt;= 0) ? <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a> : <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>;</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="cli_8h_html_aea87ce97f86effb2c4df6274d4aac567"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a></div><div class="ttdeci">#define RESULT_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00042">cli.h:42</a></div></div>
<div class="ttc" id="channel_8h_html_a83631e0dc02a50802cf857caa3fdc1d7"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a83631e0dc02a50802cf857caa3fdc1d7">ast_sendtext</a></div><div class="ttdeci">int ast_sendtext(struct ast_channel *chan, const char *text)</div><div class="ttdoc">Sends text to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04854">channel.c:4854</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abe33e71550638da136e4ac0e2ebc8448"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe33e71550638da136e4ac0e2ebc8448">&#9670;&nbsp;</a></span>handle_setcallerid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_setcallerid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03158">3158</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01008">ast_callerid_parse()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07434">ast_set_callerid()</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00947">ast_shrink_phone_number()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>
<div class="fragment"><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;{</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[256]=<span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;   <span class="keywordtype">char</span> *l = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *n = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;</div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;   <span class="keywordflow">if</span> (argv[2]) {</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(tmp, argv[2], <span class="keyword">sizeof</span>(tmp));</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;      <a class="code" href="../../de/d47/callerid_8h.html#a39e03ca4e8df3a1d2c75e888d76201df">ast_callerid_parse</a>(tmp, &amp;n, &amp;l);</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;      <span class="keywordflow">if</span> (l)</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;         <a class="code" href="../../de/d47/callerid_8h.html#a6a61669b28d0f994e44db5e3baab6ef2">ast_shrink_phone_number</a>(l);</div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;         l = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;      <span class="keywordflow">if</span> (!n)</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;         n = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a88d833a56ea7de33e230281c5c12b75d">ast_set_callerid</a>(chan, l, n, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;   }</div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=1\n&quot;</span>);</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;}</div><div class="ttc" id="channel_8h_html_a88d833a56ea7de33e230281c5c12b75d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a88d833a56ea7de33e230281c5c12b75d">ast_set_callerid</a></div><div class="ttdeci">void ast_set_callerid(struct ast_channel *chan, const char *cid_num, const char *cid_name, const char *cid_ani)</div><div class="ttdoc">Set caller ID number, name and ANI and generate AMI event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07434">channel.c:7434</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="callerid_8h_html_a6a61669b28d0f994e44db5e3baab6ef2"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a6a61669b28d0f994e44db5e3baab6ef2">ast_shrink_phone_number</a></div><div class="ttdeci">void ast_shrink_phone_number(char *n)</div><div class="ttdoc">Shrink a phone number in place to just digits (more accurately it just removes ()&amp;#39;s, .&amp;#39;s, and -&amp;#39;s... </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00947">callerid.c:947</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="callerid_8h_html_a39e03ca4e8df3a1d2c75e888d76201df"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a39e03ca4e8df3a1d2c75e888d76201df">ast_callerid_parse</a></div><div class="ttdeci">int ast_callerid_parse(char *instr, char **name, char **location)</div><div class="ttdoc">Destructively parse inbuf into name and location (or number) </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01008">callerid.c:1008</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4266427ff4e324e47da6e06156e874b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4266427ff4e324e47da6e06156e874b0">&#9670;&nbsp;</a></span>handle_setcontext()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_setcontext </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02861">2861</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00348">ast_channel_context_set()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;{</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;   <span class="keywordflow">if</span> (argc != 3)</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aca211972dac7b8f3f08a283bfe0aa8bf">ast_channel_context_set</a>(chan, argv[2]);</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="channel_8h_html_aca211972dac7b8f3f08a283bfe0aa8bf"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aca211972dac7b8f3f08a283bfe0aa8bf">ast_channel_context_set</a></div><div class="ttdeci">void ast_channel_context_set(struct ast_channel *chan, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00348">channel_internal_api.c:348</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa0e2d7f92017ae543ddcfa55816b362e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0e2d7f92017ae543ddcfa55816b362e">&#9670;&nbsp;</a></span>handle_setextension()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_setextension </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02871">2871</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00357">ast_channel_exten_set()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;{</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;   <span class="keywordflow">if</span> (argc != 3)</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a>(chan, argv[2]);</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="channel_8h_html_a018b7a29cef2d62074dc46e9aaad0d1a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a></div><div class="ttdeci">void ast_channel_exten_set(struct ast_channel *chan, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00357">channel_internal_api.c:357</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa06f97453ace3804ebf829e938469a5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa06f97453ace3804ebf829e938469a5b">&#9670;&nbsp;</a></span>handle_setmusic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_setmusic </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03397">3397</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07866">ast_moh_start()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07876">ast_moh_stop()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;{</div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;   <span class="keywordflow">if</span> (argc &lt; 3) {</div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;   }</div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;   <span class="keywordflow">if</span> (!strncasecmp(argv[2], <span class="stringliteral">&quot;on&quot;</span>, 2))</div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;      <a class="code" href="../../dc/d07/musiconhold_8h.html#a2acec01f2fddd8ca494d874003815cf7">ast_moh_start</a>(chan, argc &gt; 3 ? argv[3] : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, NULL);</div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(argv[2], <span class="stringliteral">&quot;off&quot;</span>, 3))</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;      <a class="code" href="../../dc/d07/musiconhold_8h.html#a52fead32f69533450f3c05b2e6960149">ast_moh_stop</a>(chan);</div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="musiconhold_8h_html_a52fead32f69533450f3c05b2e6960149"><div class="ttname"><a href="../../dc/d07/musiconhold_8h.html#a52fead32f69533450f3c05b2e6960149">ast_moh_stop</a></div><div class="ttdeci">void ast_moh_stop(struct ast_channel *chan)</div><div class="ttdoc">Turn off music on hold on a given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07876">channel.c:7876</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="musiconhold_8h_html_a2acec01f2fddd8ca494d874003815cf7"><div class="ttname"><a href="../../dc/d07/musiconhold_8h.html#a2acec01f2fddd8ca494d874003815cf7">ast_moh_start</a></div><div class="ttdeci">int ast_moh_start(struct ast_channel *chan, const char *mclass, const char *interpclass)</div><div class="ttdoc">Turn on music on hold on a given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07866">channel.c:7866</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a067bfb03d9e468754ee0e08aa3fd9c4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a067bfb03d9e468754ee0e08aa3fd9c4e">&#9670;&nbsp;</a></span>handle_setpriority()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_setpriority </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02880">2880</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00344">ast_channel_context()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00353">ast_channel_exten()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l06987">ast_explicit_goto()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04184">ast_findlabel_extension()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>, and <a class="el" href="../../d6/d90/strings_8h_source.html#l00085">S_COR</a>.</p>
<div class="fragment"><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;{</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;   <span class="keywordtype">int</span> pri;</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;   <span class="keywordflow">if</span> (argc != 3)</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;</div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;   <span class="keywordflow">if</span> (sscanf(argv[2], <span class="stringliteral">&quot;%30d&quot;</span>, &amp;pri) != 1) {</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;      pri = <a class="code" href="../../db/de0/pbx_8h.html#a0be9518646cf9aca4878b313cc02e901">ast_findlabel_extension</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(chan), argv[2],</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.valid, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;      <span class="keywordflow">if</span> (pri &lt; 1)</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;   }</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a9f840db4b5ef461ac2c0c975a57c9e89">ast_explicit_goto</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, pri);</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="pbx_8h_html_a9f840db4b5ef461ac2c0c975a57c9e89"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a9f840db4b5ef461ac2c0c975a57c9e89">ast_explicit_goto</a></div><div class="ttdeci">int ast_explicit_goto(struct ast_channel *chan, const char *context, const char *exten, int priority)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l06987">pbx.c:6987</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="strings_8h_html_a38a896048b2ca84076864505f0aa8f01"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a></div><div class="ttdeci">#define S_COR(a, b, c)</div><div class="ttdoc">returns the equivalent of logic or for strings, with an additional boolean check: second one if not e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00085">strings.h:85</a></div></div>
<div class="ttc" id="channel_8h_html_aa8b52fbc8168e939bc5553502367d46a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a></div><div class="ttdeci">const char * ast_channel_exten(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00353">channel_internal_api.c:353</a></div></div>
<div class="ttc" id="pbx_8h_html_a0be9518646cf9aca4878b313cc02e901"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a0be9518646cf9aca4878b313cc02e901">ast_findlabel_extension</a></div><div class="ttdeci">int ast_findlabel_extension(struct ast_channel *c, const char *context, const char *exten, const char *label, const char *callerid)</div><div class="ttdoc">Find the priority of an extension that has the specified label. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04184">pbx.c:4184</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="channel_8h_html_a582dee4d5ea9b2ff6f309f0c5239f6bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a></div><div class="ttdeci">const char * ast_channel_context(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00344">channel_internal_api.c:344</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a51fe095014fbf6ab62fcae95de6643e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51fe095014fbf6ab62fcae95de6643e6">&#9670;&nbsp;</a></span>handle_setvariable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_setvariable </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03203">3203</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;{</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;   <span class="keywordflow">if</span> (argc != 4) {</div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;   }</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;</div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;   <span class="keywordflow">if</span> (argv[3])</div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, argv[2], argv[3]);</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=1\n&quot;</span>);</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a401b5394fc83d6fb2208944042667a8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a401b5394fc83d6fb2208944042667a8e">&#9670;&nbsp;</a></span>handle_speechactivategrammar()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_speechactivategrammar </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03501">3501</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../db/d2a/res__speech_8c_source.html#l00065">ast_speech_grammar_activate()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>, and <a class="el" href="../../dc/d2b/agi_8h_source.html#l00039">agi_state::speech</a>.</p>
<div class="fragment"><div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;{</div><div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;   <span class="keywordflow">if</span> (argc != 4)</div><div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;</div><div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;   <span class="keywordflow">if</span> (!agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">speech</a>) {</div><div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;   }</div><div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;</div><div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd7/speech_8h.html#aa1c6c934a30bd481a73981aa492a5dae">ast_speech_grammar_activate</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">speech</a>, argv[3]))</div><div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=1\n&quot;</span>);</div><div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;</div><div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="speech_8h_html_aa1c6c934a30bd481a73981aa492a5dae"><div class="ttname"><a href="../../d6/dd7/speech_8h.html#aa1c6c934a30bd481a73981aa492a5dae">ast_speech_grammar_activate</a></div><div class="ttdeci">int ast_speech_grammar_activate(struct ast_speech *speech, const char *grammar_name)</div><div class="ttdoc">Activate a grammar on a speech structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2a/res__speech_8c_source.html#l00065">res_speech.c:65</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="structagi__state_html_ada1cd33a25b7c7dfc19466d2bfc2645d"><div class="ttname"><a href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">agi_state::speech</a></div><div class="ttdeci">struct ast_speech * speech</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00039">agi.h:39</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a02c253f989b6ece253bf70339d42d0e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02c253f989b6ece253bf70339d42d0e0">&#9670;&nbsp;</a></span>handle_speechcreate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_speechcreate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03410">3410</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00103">ast_format_cap_append</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00041">ast_format_slin</a>, <a class="el" href="../../db/d2a/res__speech_8c_source.html#l00180">ast_speech_new()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00042">RESULT_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>, and <a class="el" href="../../dc/d2b/agi_8h_source.html#l00039">agi_state::speech</a>.</p>
<div class="fragment"><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;{</div><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap;</div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;</div><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;   <span class="comment">/* If a structure already exists, return an error */</span></div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;   <span class="keywordflow">if</span> (agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">speech</a>) {</div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;   }</div><div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;</div><div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;   <span class="keywordflow">if</span> (!(cap = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>))) {</div><div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>;</div><div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;   }</div><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(cap, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>, 0);</div><div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;   <span class="keywordflow">if</span> ((agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">speech</a> = <a class="code" href="../../d6/dd7/speech_8h.html#abc345662bf167a1f82cc6ec06ec36a18">ast_speech_new</a>(argv[2], cap))) {</div><div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=1\n&quot;</span>);</div><div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;   }</div><div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cap, -1);</div><div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;</div><div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="format__cap_8h_html_ab4d69f2179ed5ca138c9b3d85334217f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a></div><div class="ttdeci">#define ast_format_cap_append(cap, format, framing)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00103">format_cap.h:103</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="structagi__state_html_ada1cd33a25b7c7dfc19466d2bfc2645d"><div class="ttname"><a href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">agi_state::speech</a></div><div class="ttdeci">struct ast_speech * speech</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00039">agi.h:39</a></div></div>
<div class="ttc" id="speech_8h_html_abc345662bf167a1f82cc6ec06ec36a18"><div class="ttname"><a href="../../d6/dd7/speech_8h.html#abc345662bf167a1f82cc6ec06ec36a18">ast_speech_new</a></div><div class="ttdeci">struct ast_speech * ast_speech_new(const char *engine_name, const struct ast_format_cap *formats)</div><div class="ttdoc">Create a new speech structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2a/res__speech_8c_source.html#l00180">res_speech.c:180</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="format__cache_8h_html_a771d7c34570e8e492c25a0c2eb41889d"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a></div><div class="ttdeci">struct ast_format * ast_format_slin</div><div class="ttdoc">Built-in cached signed linear 8kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00041">format_cache.c:41</a></div></div>
<div class="ttc" id="cli_8h_html_aea87ce97f86effb2c4df6274d4aac567"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a></div><div class="ttdeci">#define RESULT_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00042">cli.h:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae5a2a0a078d552cc2a6d07af8b92981d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5a2a0a078d552cc2a6d07af8b92981d">&#9670;&nbsp;</a></span>handle_speechdeactivategrammar()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_speechdeactivategrammar </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03519">3519</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../db/d2a/res__speech_8c_source.html#l00071">ast_speech_grammar_deactivate()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>, and <a class="el" href="../../dc/d2b/agi_8h_source.html#l00039">agi_state::speech</a>.</p>
<div class="fragment"><div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;{</div><div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;   <span class="keywordflow">if</span> (argc != 4)</div><div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;</div><div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;   <span class="keywordflow">if</span> (!agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">speech</a>) {</div><div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;   }</div><div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;</div><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd7/speech_8h.html#a25ad3a3563d155362db5bedffb8edb03">ast_speech_grammar_deactivate</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">speech</a>, argv[3]))</div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=1\n&quot;</span>);</div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;</div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="speech_8h_html_a25ad3a3563d155362db5bedffb8edb03"><div class="ttname"><a href="../../d6/dd7/speech_8h.html#a25ad3a3563d155362db5bedffb8edb03">ast_speech_grammar_deactivate</a></div><div class="ttdeci">int ast_speech_grammar_deactivate(struct ast_speech *speech, const char *grammar_name)</div><div class="ttdoc">Deactivate a grammar on a speech structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2a/res__speech_8c_source.html#l00071">res_speech.c:71</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="structagi__state_html_ada1cd33a25b7c7dfc19466d2bfc2645d"><div class="ttname"><a href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">agi_state::speech</a></div><div class="ttdeci">struct ast_speech * speech</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00039">agi.h:39</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac6d9ed1ead5a7ac633b238463a9854e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6d9ed1ead5a7ac633b238463a9854e7">&#9670;&nbsp;</a></span>handle_speechdestroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_speechdestroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03452">3452</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../db/d2a/res__speech_8c_source.html#l00240">ast_speech_destroy()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>, and <a class="el" href="../../dc/d2b/agi_8h_source.html#l00039">agi_state::speech</a>.</p>
<div class="fragment"><div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;{</div><div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;   <span class="keywordflow">if</span> (agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">speech</a>) {</div><div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;      <a class="code" href="../../d6/dd7/speech_8h.html#a7ebc9d3250a75a2cb7ee2f7c15eb8228">ast_speech_destroy</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">speech</a>);</div><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;      agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">speech</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=1\n&quot;</span>);</div><div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;   }</div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;</div><div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;}</div><div class="ttc" id="speech_8h_html_a7ebc9d3250a75a2cb7ee2f7c15eb8228"><div class="ttname"><a href="../../d6/dd7/speech_8h.html#a7ebc9d3250a75a2cb7ee2f7c15eb8228">ast_speech_destroy</a></div><div class="ttdeci">int ast_speech_destroy(struct ast_speech *speech)</div><div class="ttdoc">Destroy a speech structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2a/res__speech_8c_source.html#l00240">res_speech.c:240</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="structagi__state_html_ada1cd33a25b7c7dfc19466d2bfc2645d"><div class="ttname"><a href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">agi_state::speech</a></div><div class="ttdeci">struct ast_speech * speech</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00039">agi.h:39</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6fddeb0930885c59ad64a25d8c9d2e7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fddeb0930885c59ad64a25d8c9d2e7a">&#9670;&nbsp;</a></span>handle_speechloadgrammar()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_speechloadgrammar </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03465">3465</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../db/d2a/res__speech_8c_source.html#l00077">ast_speech_grammar_load()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>, and <a class="el" href="../../dc/d2b/agi_8h_source.html#l00039">agi_state::speech</a>.</p>
<div class="fragment"><div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;{</div><div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;   <span class="keywordflow">if</span> (argc != 5)</div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;</div><div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;   <span class="keywordflow">if</span> (!agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">speech</a>) {</div><div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;   }</div><div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;</div><div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd7/speech_8h.html#a9bb52080e61d47aa1ba5d5d3fdf5e5e8">ast_speech_grammar_load</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">speech</a>, argv[3], argv[4]))</div><div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=1\n&quot;</span>);</div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;</div><div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="structagi__state_html_ada1cd33a25b7c7dfc19466d2bfc2645d"><div class="ttname"><a href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">agi_state::speech</a></div><div class="ttdeci">struct ast_speech * speech</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00039">agi.h:39</a></div></div>
<div class="ttc" id="speech_8h_html_a9bb52080e61d47aa1ba5d5d3fdf5e5e8"><div class="ttname"><a href="../../d6/dd7/speech_8h.html#a9bb52080e61d47aa1ba5d5d3fdf5e5e8">ast_speech_grammar_load</a></div><div class="ttdeci">int ast_speech_grammar_load(struct ast_speech *speech, const char *grammar_name, const char *grammar)</div><div class="ttdoc">Load a grammar on a speech structure (not globally) </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2a/res__speech_8c_source.html#l00077">res_speech.c:77</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab9e6c961b76029dd2b4aa0873b7cb558"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9e6c961b76029dd2b4aa0873b7cb558">&#9670;&nbsp;</a></span>handle_speechrecognize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_speechrecognize </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03556">3556</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01919">ast_build_string()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00729">ast_channel_sched()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00621">ast_channel_stream()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00461">ast_channel_streamid()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01231">ast_channel_timingfunc()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00077">ast_clear_flag</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00278">AST_CONTROL_HANGUP</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00041">ast_format_slin</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">AST_FRAME_CONTROL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">AST_FRAME_DTMF</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00438">AST_LIST_NEXT</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04302">ast_read()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00755">ast_sched_runq()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00431">ast_sched_wait()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05849">ast_set_read_format()</a>, <a class="el" href="../../db/d2a/res__speech_8c_source.html#l00267">ast_speech_change_state()</a>, <a class="el" href="../../d6/dd7/speech_8h_source.html#l00032">AST_SPEECH_QUIET</a>, <a class="el" href="../../db/d2a/res__speech_8c_source.html#l00089">ast_speech_results_get()</a>, <a class="el" href="../../db/d2a/res__speech_8c_source.html#l00121">ast_speech_start()</a>, <a class="el" href="../../d6/dd7/speech_8h_source.html#l00042">AST_SPEECH_STATE_DONE</a>, <a class="el" href="../../d6/dd7/speech_8h_source.html#l00039">AST_SPEECH_STATE_NOT_READY</a>, <a class="el" href="../../d6/dd7/speech_8h_source.html#l00040">AST_SPEECH_STATE_READY</a>, <a class="el" href="../../d6/dd7/speech_8h_source.html#l00041">AST_SPEECH_STATE_WAIT</a>, <a class="el" href="../../db/d2a/res__speech_8c_source.html#l00143">ast_speech_write()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00187">ast_stopstream()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01048">ast_tellstream()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l03171">ast_waitfor()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d6/dd7/speech_8h_source.html#l00116">ast_speech_result::grammar</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../d6/dd7/speech_8h_source.html#l00053">ast_speech::lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/dd7/speech_8h_source.html#l00057">ast_speech::processing_sound</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l02725">prompt</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>, <a class="el" href="../../d6/dd7/speech_8h_source.html#l00065">ast_speech::results</a>, <a class="el" href="../../d6/dd7/speech_8h_source.html#l00112">ast_speech_result::score</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00039">agi_state::speech</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03537">speech_streamfile()</a>, <a class="el" href="../../d6/dd7/speech_8h_source.html#l00059">ast_speech::state</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, <a class="el" href="../../d6/dd7/speech_8h_source.html#l00110">ast_speech_result::text</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00086">timeout</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>
<div class="fragment"><div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;{</div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d95/structast__speech.html">ast_speech</a> *speech = agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">speech</a>;</div><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#a299365a3d8977a6c410c6cd924e33136">prompt</a>;</div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;   <span class="keywordtype">char</span> dtmf = 0, <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[4096] = <span class="stringliteral">&quot;&quot;</span>, *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> = <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> = 0, offset = 0, res = 0, i = 0;</div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;   <span class="keywordtype">long</span> current_offset = 0;</div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *reason = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *fr = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d5d/structast__speech__result.html">ast_speech_result</a> *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;   <span class="keywordtype">size_t</span> left = <span class="keyword">sizeof</span>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>);</div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;   time_t start = 0, current;</div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;</div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;   <span class="keywordflow">if</span> (argc &lt; 4)</div><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;</div><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;   <span class="keywordflow">if</span> (!speech) {</div><div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;   }</div><div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;</div><div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;   prompt = argv[2];</div><div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;   timeout = atoi(argv[3]);</div><div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;</div><div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;   <span class="comment">/* If offset is specified then convert from text to integer */</span></div><div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;   <span class="keywordflow">if</span> (argc == 5)</div><div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;      offset = atoi(argv[4]);</div><div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;</div><div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;   <span class="comment">/* We want frames coming in signed linear */</span></div><div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a>(chan, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>)) {</div><div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;   }</div><div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;</div><div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;   <span class="comment">/* Setup speech structure */</span></div><div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;   <span class="keywordflow">if</span> (speech-&gt;<a class="code" href="../../d9/d95/structast__speech.html#a89f234133d3efe315836311cbf21c64b">state</a> == <a class="code" href="../../d6/dd7/speech_8h.html#ad00266cfb9f168bb819ab079f04b9fccaae5f488f35a7f67e2e4627cbe8cde42e">AST_SPEECH_STATE_NOT_READY</a> || speech-&gt;<a class="code" href="../../d9/d95/structast__speech.html#a89f234133d3efe315836311cbf21c64b">state</a> == <a class="code" href="../../d6/dd7/speech_8h.html#ad00266cfb9f168bb819ab079f04b9fcca391d9b14c01f4da04e8c8536392e1708">AST_SPEECH_STATE_DONE</a>) {</div><div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;      <a class="code" href="../../d6/dd7/speech_8h.html#abbf9d09efade60713aeba70e516cbbe5">ast_speech_change_state</a>(speech, <a class="code" href="../../d6/dd7/speech_8h.html#ad00266cfb9f168bb819ab079f04b9fccaae5f488f35a7f67e2e4627cbe8cde42e">AST_SPEECH_STATE_NOT_READY</a>);</div><div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;      <a class="code" href="../../d6/dd7/speech_8h.html#a35ee983d0c54de09ca8d3ffd1223c9ae">ast_speech_start</a>(speech);</div><div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;   }</div><div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;</div><div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;   <span class="comment">/* Start playing prompt */</span></div><div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#a858a0c285f521084ef968a81472e5458">speech_streamfile</a>(chan, prompt, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan), offset);</div><div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;</div><div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;   <span class="comment">/* Go into loop reading in frames, passing to speech thingy, checking for hangup, all that jazz */</span></div><div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;   <span class="keywordflow">while</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(reason)) {</div><div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;      <span class="comment">/* Run scheduled items */</span></div><div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;                <a class="code" href="../../d7/d00/sched_8h.html#aa9c3d54f142eee0bad110fbb825c0787">ast_sched_runq</a>(<a class="code" href="../../d5/d7b/channel_8h.html#acd3470664b6a002c9a379a69ddad4cb2">ast_channel_sched</a>(chan));</div><div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;</div><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;      <span class="comment">/* See maximum time of waiting */</span></div><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;      <span class="keywordflow">if</span> ((res = <a class="code" href="../../d7/d00/sched_8h.html#af13fcd6652b8dcafae35c2fa35e80a8d">ast_sched_wait</a>(<a class="code" href="../../d5/d7b/channel_8h.html#acd3470664b6a002c9a379a69ddad4cb2">ast_channel_sched</a>(chan))) &lt; 0)</div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;         res = 1000;</div><div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;</div><div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;      <span class="comment">/* Wait for frame */</span></div><div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a60e0bcaed001e8d5ed1ba0eb2644b3cc">ast_waitfor</a>(chan, res) &gt; 0) {</div><div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;         <span class="keywordflow">if</span> (!(fr = <a class="code" href="../../d5/d7b/channel_8h.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a>(chan))) {</div><div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;            reason = <span class="stringliteral">&quot;hangup&quot;</span>;</div><div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;         }</div><div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;      }</div><div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;</div><div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;      <span class="comment">/* Perform timeout check */</span></div><div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;      <span class="keywordflow">if</span> ((timeout &gt; 0) &amp;&amp; (start &gt; 0)) {</div><div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;         time(&amp;current);</div><div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;         <span class="keywordflow">if</span> ((current - start) &gt;= timeout) {</div><div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;            reason = <span class="stringliteral">&quot;timeout&quot;</span>;</div><div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;            <span class="keywordflow">if</span> (fr)</div><div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;               <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(fr);</div><div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;         }</div><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;      }</div><div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;</div><div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;      <span class="comment">/* Check the speech structure for any changes */</span></div><div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;speech-&gt;<a class="code" href="../../d9/d95/structast__speech.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;</div><div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;      <span class="comment">/* See if we need to quiet the audio stream playback */</span></div><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(speech, <a class="code" href="../../d6/dd7/speech_8h.html#afa3ec79b3c936aaa74aa6b54ddfacb77a4199180a8b7c0b860d869eb05e3788cf">AST_SPEECH_QUIET</a>) &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a>(chan)) {</div><div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;         current_offset = <a class="code" href="../../d2/d4d/file_8h.html#a01771a318e7adea51499040f27b4278a">ast_tellstream</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a>(chan));</div><div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(speech, <a class="code" href="../../d6/dd7/speech_8h.html#afa3ec79b3c936aaa74aa6b54ddfacb77a4199180a8b7c0b860d869eb05e3788cf">AST_SPEECH_QUIET</a>);</div><div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;      }</div><div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;</div><div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;      <span class="comment">/* Check each state */</span></div><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;      <span class="keywordflow">switch</span> (speech-&gt;<a class="code" href="../../d9/d95/structast__speech.html#a89f234133d3efe315836311cbf21c64b">state</a>) {</div><div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/dd7/speech_8h.html#ad00266cfb9f168bb819ab079f04b9fcca604726916ee0089820cf89082f3b092f">AST_SPEECH_STATE_READY</a>:</div><div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;         <span class="comment">/* If the stream is done, start timeout calculation */</span></div><div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;         <span class="keywordflow">if</span> ((timeout &gt; 0) &amp;&amp; start == 0 &amp;&amp; ((!<a class="code" href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a>(chan)) || (<a class="code" href="../../d5/d7b/channel_8h.html#aca669cf3bcacc3152088c9e5057f4239">ast_channel_streamid</a>(chan) == -1 &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#ab23fb6dcd2315d22d59b5101b8ca5417">ast_channel_timingfunc</a>(chan) == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;            time(&amp;start);</div><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;         }</div><div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;         <span class="comment">/* Write audio frame data into speech engine if possible */</span></div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;         <span class="keywordflow">if</span> (fr &amp;&amp; fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>)</div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;            <a class="code" href="../../d6/dd7/speech_8h.html#a4ae1a7f76105b9f218161faed71590e4">ast_speech_write</a>(speech, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>);</div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/dd7/speech_8h.html#ad00266cfb9f168bb819ab079f04b9fccab25d197057f8858ca88fc66814403f2f">AST_SPEECH_STATE_WAIT</a>:</div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;         <span class="comment">/* Cue waiting sound if not already playing */</span></div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;         <span class="keywordflow">if</span> ((!<a class="code" href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a>(chan)) || (<a class="code" href="../../d5/d7b/channel_8h.html#aca669cf3bcacc3152088c9e5057f4239">ast_channel_streamid</a>(chan) == -1 &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#ab23fb6dcd2315d22d59b5101b8ca5417">ast_channel_timingfunc</a>(chan) == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;            <span class="comment">/* If a processing sound exists, or is not none - play it */</span></div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(speech-&gt;<a class="code" href="../../d9/d95/structast__speech.html#a40e56819be5b8279e0eb05561d5c1f9a">processing_sound</a>) &amp;&amp; strcasecmp(speech-&gt;<a class="code" href="../../d9/d95/structast__speech.html#a40e56819be5b8279e0eb05561d5c1f9a">processing_sound</a>, <span class="stringliteral">&quot;none&quot;</span>))</div><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;               <a class="code" href="../../dd/de9/res__agi_8c.html#a858a0c285f521084ef968a81472e5458">speech_streamfile</a>(chan, speech-&gt;<a class="code" href="../../d9/d95/structast__speech.html#a40e56819be5b8279e0eb05561d5c1f9a">processing_sound</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan), 0);</div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;         }</div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/dd7/speech_8h.html#ad00266cfb9f168bb819ab079f04b9fcca391d9b14c01f4da04e8c8536392e1708">AST_SPEECH_STATE_DONE</a>:</div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;         <span class="comment">/* Get the results */</span></div><div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;         speech-&gt;<a class="code" href="../../d9/d95/structast__speech.html#af339908db8f5c3797e8a6684027a300c">results</a> = <a class="code" href="../../d6/dd7/speech_8h.html#a982ace0eabd45d35786070ff32687c64">ast_speech_results_get</a>(speech);</div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;         <span class="comment">/* Change state to not ready */</span></div><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;         <a class="code" href="../../d6/dd7/speech_8h.html#abbf9d09efade60713aeba70e516cbbe5">ast_speech_change_state</a>(speech, <a class="code" href="../../d6/dd7/speech_8h.html#ad00266cfb9f168bb819ab079f04b9fccaae5f488f35a7f67e2e4627cbe8cde42e">AST_SPEECH_STATE_NOT_READY</a>);</div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;         reason = <span class="stringliteral">&quot;speech&quot;</span>;</div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;      }</div><div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;speech-&gt;<a class="code" href="../../d9/d95/structast__speech.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;</div><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;      <span class="comment">/* Check frame for DTMF or hangup */</span></div><div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;      <span class="keywordflow">if</span> (fr) {</div><div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;         <span class="keywordflow">if</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a>) {</div><div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;            reason = <span class="stringliteral">&quot;dtmf&quot;</span>;</div><div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;            dtmf = fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>;</div><div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a> &amp;&amp; fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a>) {</div><div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;            reason = <span class="stringliteral">&quot;hangup&quot;</span>;</div><div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;         }</div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(fr);</div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;      }</div><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;   }</div><div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;</div><div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(reason, <span class="stringliteral">&quot;speech&quot;</span>)) {</div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;      <span class="comment">/* Build string containing speech results */</span></div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;                <span class="keywordflow">for</span> (result = speech-&gt;<a class="code" href="../../d9/d95/structast__speech.html#af339908db8f5c3797e8a6684027a300c">results</a>; result; result = <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(result, list)) {</div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;         <span class="comment">/* Build result string */</span></div><div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a603020160399d4876ec09fd299ebcaf9">ast_build_string</a>(&amp;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, &amp;left, <span class="stringliteral">&quot;%sscore%d=%d text%d=\&quot;%s\&quot; grammar%d=%s&quot;</span>, (i &gt; 0 ? <span class="stringliteral">&quot; &quot;</span> : <span class="stringliteral">&quot;&quot;</span>), i, result-&gt;<a class="code" href="../../d7/d5d/structast__speech__result.html#aef160b7437d94056f1dc59646cd5b87d">score</a>, i, result-&gt;<a class="code" href="../../d7/d5d/structast__speech__result.html#a5633b1433389cec21ade3811bbe9ca5b">text</a>, i, result-&gt;<a class="code" href="../../d7/d5d/structast__speech__result.html#a87785573be04a91c0d79c9f3b61976ad">grammar</a>);</div><div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;                        <span class="comment">/* Increment result count */</span></div><div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;         i++;</div><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;      }</div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;                <span class="comment">/* Print out */</span></div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=1 (speech) endpos=%ld results=%d %s\n&quot;</span>, current_offset, i, <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>);</div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(reason, <span class="stringliteral">&quot;dtmf&quot;</span>)) {</div><div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=1 (digit) digit=%c endpos=%ld\n&quot;</span>, dtmf, current_offset);</div><div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(reason, <span class="stringliteral">&quot;hangup&quot;</span>) || !strcasecmp(reason, <span class="stringliteral">&quot;timeout&quot;</span>)) {</div><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=1 (%s) endpos=%ld\n&quot;</span>, reason, current_offset);</div><div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0 endpos=%ld\n&quot;</span>, current_offset);</div><div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;   }</div><div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;</div><div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;}</div><div class="ttc" id="speech_8h_html_ad00266cfb9f168bb819ab079f04b9fcca604726916ee0089820cf89082f3b092f"><div class="ttname"><a href="../../d6/dd7/speech_8h.html#ad00266cfb9f168bb819ab079f04b9fcca604726916ee0089820cf89082f3b092f">AST_SPEECH_STATE_READY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/speech_8h_source.html#l00040">speech.h:40</a></div></div>
<div class="ttc" id="structast__speech_html_a89f234133d3efe315836311cbf21c64b"><div class="ttname"><a href="../../d9/d95/structast__speech.html#a89f234133d3efe315836311cbf21c64b">ast_speech::state</a></div><div class="ttdeci">int state</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/speech_8h_source.html#l00059">speech.h:59</a></div></div>
<div class="ttc" id="speech_8h_html_ad00266cfb9f168bb819ab079f04b9fccaae5f488f35a7f67e2e4627cbe8cde42e"><div class="ttname"><a href="../../d6/dd7/speech_8h.html#ad00266cfb9f168bb819ab079f04b9fccaae5f488f35a7f67e2e4627cbe8cde42e">AST_SPEECH_STATE_NOT_READY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/speech_8h_source.html#l00039">speech.h:39</a></div></div>
<div class="ttc" id="speech_8h_html_a35ee983d0c54de09ca8d3ffd1223c9ae"><div class="ttname"><a href="../../d6/dd7/speech_8h.html#a35ee983d0c54de09ca8d3ffd1223c9ae">ast_speech_start</a></div><div class="ttdeci">void ast_speech_start(struct ast_speech *speech)</div><div class="ttdoc">Indicate to the speech engine that audio is now going to start being written. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2a/res__speech_8c_source.html#l00121">res_speech.c:121</a></div></div>
<div class="ttc" id="sched_8h_html_aa9c3d54f142eee0bad110fbb825c0787"><div class="ttname"><a href="../../d7/d00/sched_8h.html#aa9c3d54f142eee0bad110fbb825c0787">ast_sched_runq</a></div><div class="ttdeci">int ast_sched_runq(struct ast_sched_context *con)</div><div class="ttdoc">Runs the queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00755">sched.c:755</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="structast__speech_html"><div class="ttname"><a href="../../d9/d95/structast__speech.html">ast_speech</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/speech_8h_source.html#l00051">speech.h:51</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ae234825bcb65b88c0554b995ff1b8ba6"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a></div><div class="ttdeci">#define AST_LIST_NEXT(elm, field)</div><div class="ttdoc">Returns the next entry in the list after the given entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00438">linkedlists.h:438</a></div></div>
<div class="ttc" id="channel_8h_html_a7ef6737309dc9e8b6c4a7cb4800638b1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a></div><div class="ttdeci">struct ast_frame * ast_read(struct ast_channel *chan)</div><div class="ttdoc">Reads a frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04302">channel.c:4302</a></div></div>
<div class="ttc" id="speech_8h_html_a982ace0eabd45d35786070ff32687c64"><div class="ttname"><a href="../../d6/dd7/speech_8h.html#a982ace0eabd45d35786070ff32687c64">ast_speech_results_get</a></div><div class="ttdeci">struct ast_speech_result * ast_speech_results_get(struct ast_speech *speech)</div><div class="ttdoc">Get speech recognition results. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2a/res__speech_8c_source.html#l00089">res_speech.c:89</a></div></div>
<div class="ttc" id="res__agi_8c_html_a858a0c285f521084ef968a81472e5458"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a858a0c285f521084ef968a81472e5458">speech_streamfile</a></div><div class="ttdeci">static int speech_streamfile(struct ast_channel *chan, const char *filename, const char *preflang, int offset)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l03537">res_agi.c:3537</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a248afd6c02044259a386f6b7aee922a2"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a></div><div class="ttdeci">#define AST_FRAME_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">include/asterisk/frame.h:139</a></div></div>
<div class="ttc" id="structast__speech__result_html_a87785573be04a91c0d79c9f3b61976ad"><div class="ttname"><a href="../../d7/d5d/structast__speech__result.html#a87785573be04a91c0d79c9f3b61976ad">ast_speech_result::grammar</a></div><div class="ttdeci">char * grammar</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/speech_8h_source.html#l00116">speech.h:116</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="file_8h_html_a01771a318e7adea51499040f27b4278a"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a01771a318e7adea51499040f27b4278a">ast_tellstream</a></div><div class="ttdeci">off_t ast_tellstream(struct ast_filestream *fs)</div><div class="ttdoc">Tell where we are in a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01048">file.c:1048</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="strings_8h_html_a603020160399d4876ec09fd299ebcaf9"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a603020160399d4876ec09fd299ebcaf9">ast_build_string</a></div><div class="ttdeci">int ast_build_string(char **buffer, size_t *space, const char *fmt,...)</div><div class="ttdoc">Build a string in a buffer, designed to be called repeatedly. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01919">main/utils.c:1919</a></div></div>
<div class="ttc" id="channel_8h_html_a9107a83365cbf327cc0d12cb0dbd28d8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a></div><div class="ttdeci">int ast_set_read_format(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdoc">Sets read format on channel chan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05849">channel.c:5849</a></div></div>
<div class="ttc" id="speech_8h_html_abbf9d09efade60713aeba70e516cbbe5"><div class="ttname"><a href="../../d6/dd7/speech_8h.html#abbf9d09efade60713aeba70e516cbbe5">ast_speech_change_state</a></div><div class="ttdeci">int ast_speech_change_state(struct ast_speech *speech, int state)</div><div class="ttdoc">Change state of a speech structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2a/res__speech_8c_source.html#l00267">res_speech.c:267</a></div></div>
<div class="ttc" id="structast__speech__result_html"><div class="ttname"><a href="../../d7/d5d/structast__speech__result.html">ast_speech_result</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/speech_8h_source.html#l00108">speech.h:108</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="speech_8h_html_ad00266cfb9f168bb819ab079f04b9fcca391d9b14c01f4da04e8c8536392e1708"><div class="ttname"><a href="../../d6/dd7/speech_8h.html#ad00266cfb9f168bb819ab079f04b9fcca391d9b14c01f4da04e8c8536392e1708">AST_SPEECH_STATE_DONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/speech_8h_source.html#l00042">speech.h:42</a></div></div>
<div class="ttc" id="structast__speech_html_af339908db8f5c3797e8a6684027a300c"><div class="ttname"><a href="../../d9/d95/structast__speech.html#af339908db8f5c3797e8a6684027a300c">ast_speech::results</a></div><div class="ttdeci">struct ast_speech_result * results</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/speech_8h_source.html#l00065">speech.h:65</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="channel_8h_html_acd3470664b6a002c9a379a69ddad4cb2"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#acd3470664b6a002c9a379a69ddad4cb2">ast_channel_sched</a></div><div class="ttdeci">struct ast_sched_context * ast_channel_sched(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00729">channel_internal_api.c:729</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00278">include/asterisk/frame.h:278</a></div></div>
<div class="ttc" id="speech_8h_html_ad00266cfb9f168bb819ab079f04b9fccab25d197057f8858ca88fc66814403f2f"><div class="ttname"><a href="../../d6/dd7/speech_8h.html#ad00266cfb9f168bb819ab079f04b9fccab25d197057f8858ca88fc66814403f2f">AST_SPEECH_STATE_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/speech_8h_source.html#l00041">speech.h:41</a></div></div>
<div class="ttc" id="channel_8h_html_aca669cf3bcacc3152088c9e5057f4239"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aca669cf3bcacc3152088c9e5057f4239">ast_channel_streamid</a></div><div class="ttdeci">int ast_channel_streamid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00461">channel_internal_api.c:461</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="structagi__state_html_ada1cd33a25b7c7dfc19466d2bfc2645d"><div class="ttname"><a href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">agi_state::speech</a></div><div class="ttdeci">struct ast_speech * speech</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00039">agi.h:39</a></div></div>
<div class="ttc" id="channel_8h_html_a043ef90a065fe177af7b21a6045b6506"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a></div><div class="ttdeci">struct ast_filestream * ast_channel_stream(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00621">channel_internal_api.c:621</a></div></div>
<div class="ttc" id="utils_8h_html_a7b260320610a09017a9416398acd0a70"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a></div><div class="ttdeci">#define ast_clear_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00077">utils.h:77</a></div></div>
<div class="ttc" id="speech_8h_html_afa3ec79b3c936aaa74aa6b54ddfacb77a4199180a8b7c0b860d869eb05e3788cf"><div class="ttname"><a href="../../d6/dd7/speech_8h.html#afa3ec79b3c936aaa74aa6b54ddfacb77a4199180a8b7c0b860d869eb05e3788cf">AST_SPEECH_QUIET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/speech_8h_source.html#l00032">speech.h:32</a></div></div>
<div class="ttc" id="structast__speech_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d9/d95/structast__speech.html#adf04f66344e3fb0a6f6a69bf39d19902">ast_speech::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/speech_8h_source.html#l00053">speech.h:53</a></div></div>
<div class="ttc" id="channel_8h_html_a60e0bcaed001e8d5ed1ba0eb2644b3cc"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a60e0bcaed001e8d5ed1ba0eb2644b3cc">ast_waitfor</a></div><div class="ttdeci">int ast_waitfor(struct ast_channel *chan, int ms)</div><div class="ttdoc">Wait for input on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03171">channel.c:3171</a></div></div>
<div class="ttc" id="structast__speech__result_html_a5633b1433389cec21ade3811bbe9ca5b"><div class="ttname"><a href="../../d7/d5d/structast__speech__result.html#a5633b1433389cec21ade3811bbe9ca5b">ast_speech_result::text</a></div><div class="ttdeci">char * text</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/speech_8h_source.html#l00110">speech.h:110</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="sched_8h_html_af13fcd6652b8dcafae35c2fa35e80a8d"><div class="ttname"><a href="../../d7/d00/sched_8h.html#af13fcd6652b8dcafae35c2fa35e80a8d">ast_sched_wait</a></div><div class="ttdeci">int ast_sched_wait(struct ast_sched_context *con) attribute_warn_unused_result</div><div class="ttdoc">Determines number of seconds until the next outstanding event to take place. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00431">sched.c:431</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="channel_8h_html_a9abe31fe40dcd03cd2957e5309e32ac6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a></div><div class="ttdeci">const char * ast_channel_language(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structast__speech_html_a40e56819be5b8279e0eb05561d5c1f9a"><div class="ttname"><a href="../../d9/d95/structast__speech.html#a40e56819be5b8279e0eb05561d5c1f9a">ast_speech::processing_sound</a></div><div class="ttdeci">char * processing_sound</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/speech_8h_source.html#l00057">speech.h:57</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="asterisk_8c_html_a299365a3d8977a6c410c6cd924e33136"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a299365a3d8977a6c410c6cd924e33136">prompt</a></div><div class="ttdeci">static struct ast_str * prompt</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02725">asterisk.c:2725</a></div></div>
<div class="ttc" id="speech_8h_html_a4ae1a7f76105b9f218161faed71590e4"><div class="ttname"><a href="../../d6/dd7/speech_8h.html#a4ae1a7f76105b9f218161faed71590e4">ast_speech_write</a></div><div class="ttdeci">int ast_speech_write(struct ast_speech *speech, void *data, int len)</div><div class="ttdoc">Write audio to the speech engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2a/res__speech_8c_source.html#l00143">res_speech.c:143</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="format__cache_8h_html_a771d7c34570e8e492c25a0c2eb41889d"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a></div><div class="ttdeci">struct ast_format * ast_format_slin</div><div class="ttdoc">Built-in cached signed linear 8kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00041">format_cache.c:41</a></div></div>
<div class="ttc" id="channel_8h_html_ab23fb6dcd2315d22d59b5101b8ca5417"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab23fb6dcd2315d22d59b5101b8ca5417">ast_channel_timingfunc</a></div><div class="ttdeci">ast_timing_func_t ast_channel_timingfunc(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01231">channel_internal_api.c:1231</a></div></div>
<div class="ttc" id="structast__speech__result_html_aef160b7437d94056f1dc59646cd5b87d"><div class="ttname"><a href="../../d7/d5d/structast__speech__result.html#aef160b7437d94056f1dc59646cd5b87d">ast_speech_result::score</a></div><div class="ttdeci">int score</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/speech_8h_source.html#l00112">speech.h:112</a></div></div>
<div class="ttc" id="file_8h_html_a3092bf11d4bba66f646562759608b1bc"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a></div><div class="ttdeci">int ast_stopstream(struct ast_channel *c)</div><div class="ttdoc">Stops a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00187">file.c:187</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a848c2fd13d98017e42c1c9f01944534b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a848c2fd13d98017e42c1c9f01944534b">&#9670;&nbsp;</a></span>handle_speechset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_speechset </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03434">3434</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../db/d2a/res__speech_8c_source.html#l00168">ast_speech_change()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>, and <a class="el" href="../../dc/d2b/agi_8h_source.html#l00039">agi_state::speech</a>.</p>
<div class="fragment"><div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;{</div><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;   <span class="comment">/* Check for minimum arguments */</span></div><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;   <span class="keywordflow">if</span> (argc != 4)</div><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;</div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;   <span class="comment">/* Check to make sure speech structure exists */</span></div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;   <span class="keywordflow">if</span> (!agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">speech</a>) {</div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;   }</div><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;</div><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;   <a class="code" href="../../d6/dd7/speech_8h.html#a4c1485723e06fd56dc15e4878dfe726e">ast_speech_change</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">speech</a>, argv[2], argv[3]);</div><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=1\n&quot;</span>);</div><div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;</div><div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="structagi__state_html_ada1cd33a25b7c7dfc19466d2bfc2645d"><div class="ttname"><a href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">agi_state::speech</a></div><div class="ttdeci">struct ast_speech * speech</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00039">agi.h:39</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="speech_8h_html_a4c1485723e06fd56dc15e4878dfe726e"><div class="ttname"><a href="../../d6/dd7/speech_8h.html#a4c1485723e06fd56dc15e4878dfe726e">ast_speech_change</a></div><div class="ttdeci">int ast_speech_change(struct ast_speech *speech, const char *name, const char *value)</div><div class="ttdoc">Change an engine specific attribute. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2a/res__speech_8c_source.html#l00168">res_speech.c:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4d4041b646f60f84acd4b16539de8ac3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d4041b646f60f84acd4b16539de8ac3">&#9670;&nbsp;</a></span>handle_speechunloadgrammar()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_speechunloadgrammar </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03483">3483</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../db/d2a/res__speech_8c_source.html#l00083">ast_speech_grammar_unload()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>, and <a class="el" href="../../dc/d2b/agi_8h_source.html#l00039">agi_state::speech</a>.</p>
<div class="fragment"><div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;{</div><div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;   <span class="keywordflow">if</span> (argc != 4)</div><div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;</div><div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;   <span class="keywordflow">if</span> (!agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">speech</a>) {</div><div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;   }</div><div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;</div><div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd7/speech_8h.html#a31a35473c04575ff6e67bb126cb8f70d">ast_speech_grammar_unload</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">speech</a>, argv[3]))</div><div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=1\n&quot;</span>);</div><div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;</div><div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="speech_8h_html_a31a35473c04575ff6e67bb126cb8f70d"><div class="ttname"><a href="../../d6/dd7/speech_8h.html#a31a35473c04575ff6e67bb126cb8f70d">ast_speech_grammar_unload</a></div><div class="ttdeci">int ast_speech_grammar_unload(struct ast_speech *speech, const char *grammar_name)</div><div class="ttdoc">Unload a grammar. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2a/res__speech_8c_source.html#l00083">res_speech.c:83</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="structagi__state_html_ada1cd33a25b7c7dfc19466d2bfc2645d"><div class="ttname"><a href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">agi_state::speech</a></div><div class="ttdeci">struct ast_speech * speech</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00039">agi.h:39</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3c12b796d6d7102e20bb1cb7e6ba6ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3c12b796d6d7102e20bb1cb7e6ba6ac">&#9670;&nbsp;</a></span>handle_streamfile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_streamfile </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02557">2557</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01020">ast_applystream()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00621">ast_channel_stream()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00860">ast_channel_writeformat()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00755">ast_openstream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00812">ast_openvstream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01026">ast_playstream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01038">ast_seekstream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00187">ast_stopstream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01048">ast_tellstream()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01785">ast_waitstream_full()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00036">agi_state::audio</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00037">agi_state::ctrl</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00042">RESULT_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, and <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00110">ast_filestream::vfs</a>.</p>
<div class="fragment"><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;{</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *fs, *<a class="code" href="../../db/dbc/structast__filestream.html#a084d8f087c50442f51245ec3333abac4">vfs</a>;</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;   <span class="keywordtype">long</span> sample_offset = 0, max_length;</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *edigits = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;   <span class="keywordflow">if</span> (argc &lt; 4 || argc &gt; 5) {</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;   }</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;   <span class="keywordflow">if</span> (argv[3]) {</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;      edigits = argv[3];</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;   }</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;   <span class="keywordflow">if</span> ((argc &gt; 4) &amp;&amp; (sscanf(argv[4], <span class="stringliteral">&quot;%30ld&quot;</span>, &amp;sample_offset) != 1)) {</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;   }</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;   <span class="keywordflow">if</span> (!(fs = <a class="code" href="../../d2/d4d/file_8h.html#ad85c951fa1d6988d2d7e169833a951a8">ast_openstream</a>(chan, argv[2], <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan)))) {</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=-1 endpos=%ld\n&quot;</span>, sample_offset);</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>;</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;   }</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;   <span class="keywordflow">if</span> ((vfs = <a class="code" href="../../d2/d4d/file_8h.html#aeed49fff2d6008a89f996230988d944d">ast_openvstream</a>(chan, argv[2], <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan)))) {</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Ooh, found a video stream, too\n&quot;</span>);</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;   }</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;&lt;%s&gt; Playing &#39;%s.%s&#39; (escape_digits=%s) (sample_offset %ld) (language &#39;%s&#39;)\n&quot;</span>,</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), argv[2], <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(chan)),</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;      edigits, sample_offset, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan), <span class="stringliteral">&quot;default&quot;</span>));</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;   <a class="code" href="../../d2/d4d/file_8h.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a>(fs, 0, SEEK_END);</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;   max_length = <a class="code" href="../../d2/d4d/file_8h.html#a01771a318e7adea51499040f27b4278a">ast_tellstream</a>(fs);</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;   <a class="code" href="../../d2/d4d/file_8h.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a>(fs, sample_offset, SEEK_SET);</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;   res = <a class="code" href="../../d2/d4d/file_8h.html#a618e3120b6d019312ef2d617d9f14571">ast_applystream</a>(chan, fs);</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;   <span class="keywordflow">if</span> (vfs) {</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#a618e3120b6d019312ef2d617d9f14571">ast_applystream</a>(chan, vfs);</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;   }</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;   <a class="code" href="../../d2/d4d/file_8h.html#ad59224750b8b617f9590b28b88457b14">ast_playstream</a>(fs);</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;   <span class="keywordflow">if</span> (vfs) {</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#ad59224750b8b617f9590b28b88457b14">ast_playstream</a>(vfs);</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;   }</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;   res = <a class="code" href="../../d2/d4d/file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(chan, argv[3], agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a220009426c8518be4b294a02b1194906">audio</a>, agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">ctrl</a>);</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;   <span class="comment">/* this is to check for if ast_waitstream closed the stream, we probably are at</span></div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;<span class="comment">    * the end of the stream, return that amount, else check for the amount */</span></div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;   sample_offset = (<a class="code" href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a>(chan)) ? <a class="code" href="../../d2/d4d/file_8h.html#a01771a318e7adea51499040f27b4278a">ast_tellstream</a>(fs) : max_length;</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;   <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;   <span class="keywordflow">if</span> (res == 1) {</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;      <span class="comment">/* Stop this command, don&#39;t print a result line, as there is a new command */</span></div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;   }</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d endpos=%ld\n&quot;</span>, res, sample_offset);</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;PLAYBACKSTATUS&quot;</span>, res ? <span class="stringliteral">&quot;FAILED&quot;</span> : <span class="stringliteral">&quot;SUCCESS&quot;</span>);</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;   <span class="keywordflow">return</span> (res &gt;= 0) ? <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a> : <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>;</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="structagi__state_html_a0f787778e7019ca3a8bdf0bd17b9efca"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">agi_state::ctrl</a></div><div class="ttdeci">int ctrl</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00037">agi.h:37</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="file_8h_html_a01771a318e7adea51499040f27b4278a"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a01771a318e7adea51499040f27b4278a">ast_tellstream</a></div><div class="ttdeci">off_t ast_tellstream(struct ast_filestream *fs)</div><div class="ttdoc">Tell where we are in a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01048">file.c:1048</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="file_8h_html_ad59224750b8b617f9590b28b88457b14"><div class="ttname"><a href="../../d2/d4d/file_8h.html#ad59224750b8b617f9590b28b88457b14">ast_playstream</a></div><div class="ttdeci">int ast_playstream(struct ast_filestream *s)</div><div class="ttdoc">Play a open stream on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01026">file.c:1026</a></div></div>
<div class="ttc" id="file_8h_html_aeed49fff2d6008a89f996230988d944d"><div class="ttname"><a href="../../d2/d4d/file_8h.html#aeed49fff2d6008a89f996230988d944d">ast_openvstream</a></div><div class="ttdeci">struct ast_filestream * ast_openvstream(struct ast_channel *chan, const char *filename, const char *preflang)</div><div class="ttdoc">Opens stream for use in seeking, playing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00812">file.c:812</a></div></div>
<div class="ttc" id="file_8h_html_a618e3120b6d019312ef2d617d9f14571"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a618e3120b6d019312ef2d617d9f14571">ast_applystream</a></div><div class="ttdeci">int ast_applystream(struct ast_channel *chan, struct ast_filestream *s)</div><div class="ttdoc">Applys a open stream to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01020">file.c:1020</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="file_8h_html_a36f6bba05952162d5d1ee7fb9819bd07"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a></div><div class="ttdeci">int ast_seekstream(struct ast_filestream *fs, off_t sample_offset, int whence)</div><div class="ttdoc">Seeks into stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01038">file.c:1038</a></div></div>
<div class="ttc" id="structagi__state_html_a220009426c8518be4b294a02b1194906"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a220009426c8518be4b294a02b1194906">agi_state::audio</a></div><div class="ttdeci">int audio</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00036">agi.h:36</a></div></div>
<div class="ttc" id="channel_8h_html_a043ef90a065fe177af7b21a6045b6506"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a></div><div class="ttdeci">struct ast_filestream * ast_channel_stream(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00621">channel_internal_api.c:621</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="file_8h_html_a3089874cd5223053f670c8499e911ec4"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a></div><div class="ttdeci">int ast_waitstream_full(struct ast_channel *c, const char *breakon, int audiofd, int monfd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01785">file.c:1785</a></div></div>
<div class="ttc" id="structast__filestream_html"><div class="ttname"><a href="../../db/dbc/structast__filestream.html">ast_filestream</a></div><div class="ttdoc">This structure is allocated by file.c in one chunk, together with buf_size and desc_size bytes of mem...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00101">mod_format.h:101</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_a9abe31fe40dcd03cd2957e5309e32ac6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a></div><div class="ttdeci">const char * ast_channel_language(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structast__filestream_html_a084d8f087c50442f51245ec3333abac4"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#a084d8f087c50442f51245ec3333abac4">ast_filestream::vfs</a></div><div class="ttdeci">struct ast_filestream * vfs</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00110">mod_format.h:110</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="channel_8h_html_a1dc625bd14a7875b04bfe0c388858929"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a></div><div class="ttdeci">struct ast_format * ast_channel_writeformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00860">channel_internal_api.c:860</a></div></div>
<div class="ttc" id="file_8h_html_a3092bf11d4bba66f646562759608b1bc"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a></div><div class="ttdeci">int ast_stopstream(struct ast_channel *c)</div><div class="ttdoc">Stops a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00187">file.c:187</a></div></div>
<div class="ttc" id="cli_8h_html_aea87ce97f86effb2c4df6274d4aac567"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a></div><div class="ttdeci">#define RESULT_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00042">cli.h:42</a></div></div>
<div class="ttc" id="file_8h_html_ad85c951fa1d6988d2d7e169833a951a8"><div class="ttname"><a href="../../d2/d4d/file_8h.html#ad85c951fa1d6988d2d7e169833a951a8">ast_openstream</a></div><div class="ttdeci">struct ast_filestream * ast_openstream(struct ast_channel *chan, const char *filename, const char *preflang)</div><div class="ttdoc">Opens stream for use in seeking, playing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00755">file.c:755</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6eefdc9f7f62d2162b741334ed970c48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6eefdc9f7f62d2162b741334ed970c48">&#9670;&nbsp;</a></span>handle_tddmode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_tddmode </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02451">2451</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07522">ast_channel_setoption()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00435">AST_OPTION_TDD</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;{</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;   <span class="keywordtype">int</span> res, x;</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;   <span class="keywordflow">if</span> (argc != 3)</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;   <span class="keywordflow">if</span> (!strncasecmp(argv[2],<span class="stringliteral">&quot;on&quot;</span>,2)) {</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;      x = 1;</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;   } <span class="keywordflow">else</span>  {</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;      x = 0;</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;   }</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;   <span class="keywordflow">if</span> (!strncasecmp(argv[2],<span class="stringliteral">&quot;mate&quot;</span>,4))  {</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;      x = 2;</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;   }</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;   <span class="keywordflow">if</span> (!strncasecmp(argv[2],<span class="stringliteral">&quot;tdd&quot;</span>,3)) {</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;      x = 1;</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;   }</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;   res = <a class="code" href="../../d5/d7b/channel_8h.html#adcfd8d241b6de48068ead143ac29978d">ast_channel_setoption</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aa27da183a0551e3f9497a8064e24b0b6">AST_OPTION_TDD</a>, &amp;x, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>), 0);</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;      <span class="comment">/* Set channel option failed */</span></div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=0\n&quot;</span>);</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=1\n&quot;</span>);</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;   }</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aa27da183a0551e3f9497a8064e24b0b6"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aa27da183a0551e3f9497a8064e24b0b6">AST_OPTION_TDD</a></div><div class="ttdeci">#define AST_OPTION_TDD</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00435">include/asterisk/frame.h:435</a></div></div>
<div class="ttc" id="channel_8h_html_adcfd8d241b6de48068ead143ac29978d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#adcfd8d241b6de48068ead143ac29978d">ast_channel_setoption</a></div><div class="ttdeci">int ast_channel_setoption(struct ast_channel *channel, int option, void *data, int datalen, int block)</div><div class="ttdoc">Sets an option on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07522">channel.c:7522</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a18f43bbbea0ca4a94653e14d001c2374"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18f43bbbea0ca4a94653e14d001c2374">&#9670;&nbsp;</a></span>handle_verbose()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_verbose </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03273">3273</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00334">ast_channel_data()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;{</div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;   <span class="keywordtype">int</span> level = 0;</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;</div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;   <span class="keywordflow">if</span> (argc &lt; 2)</div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;</div><div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;   <span class="keywordflow">if</span> (argv[2])</div><div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;      sscanf(argv[2], <span class="stringliteral">&quot;%30d&quot;</span>, &amp;level);</div><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;</div><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(level, <span class="stringliteral">&quot;%s: %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a531fd832a2f8b0f4156735043a6158e1">ast_channel_data</a>(chan), argv[1]);</div><div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;</div><div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=1\n&quot;</span>);</div><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;</div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="channel_8h_html_a531fd832a2f8b0f4156735043a6158e1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a531fd832a2f8b0f4156735043a6158e1">ast_channel_data</a></div><div class="ttdeci">const char * ast_channel_data(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00334">channel_internal_api.c:334</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a74d56f87ca5b49ee185d03ed7bec89b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74d56f87ca5b49ee185d03ed7bec89b8">&#9670;&nbsp;</a></span>handle_waitfordigit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_waitfordigit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02382">2382</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l03248">ast_waitfordigit_full()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00036">agi_state::audio</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00037">agi_state::ctrl</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00042">RESULT_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00041">RESULT_SHOWUSAGE</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;{</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;   <span class="keywordtype">int</span> res, to;</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;   <span class="keywordflow">if</span> (argc != 4)</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;   <span class="keywordflow">if</span> (sscanf(argv[3], <span class="stringliteral">&quot;%30d&quot;</span>, &amp;to) != 1)</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a>;</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;   res = <a class="code" href="../../d5/d7b/channel_8h.html#af600a6bfab348c89a7cceb8f024f58fe">ast_waitfordigit_full</a>(chan, to, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a220009426c8518be4b294a02b1194906">audio</a>, agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">ctrl</a>);</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;200 result=%d\n&quot;</span>, res);</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;   <span class="keywordflow">return</span> (res &gt;= 0) ? <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a> : <a class="code" href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a>;</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;}</div><div class="ttc" id="cli_8h_html_a76ed22cec1f42c93a5b4eed8d967338f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a76ed22cec1f42c93a5b4eed8d967338f">RESULT_SHOWUSAGE</a></div><div class="ttdeci">#define RESULT_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00041">cli.h:41</a></div></div>
<div class="ttc" id="structagi__state_html_a0f787778e7019ca3a8bdf0bd17b9efca"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">agi_state::ctrl</a></div><div class="ttdeci">int ctrl</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00037">agi.h:37</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="structagi__state_html_a220009426c8518be4b294a02b1194906"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a220009426c8518be4b294a02b1194906">agi_state::audio</a></div><div class="ttdeci">int audio</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00036">agi.h:36</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="channel_8h_html_af600a6bfab348c89a7cceb8f024f58fe"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af600a6bfab348c89a7cceb8f024f58fe">ast_waitfordigit_full</a></div><div class="ttdeci">int ast_waitfordigit_full(struct ast_channel *c, int ms, const char *breakon, int audiofd, int ctrlfd)</div><div class="ttdoc">Wait for a digit Same as ast_waitfordigit() with audio fd for outputting read audio and ctrlfd to mon...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03248">channel.c:3248</a></div></div>
<div class="ttc" id="cli_8h_html_aea87ce97f86effb2c4df6274d4aac567"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea87ce97f86effb2c4df6274d4aac567">RESULT_FAILURE</a></div><div class="ttdeci">#define RESULT_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00042">cli.h:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9c9dced746c667d15344f3dd5047ac94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c9dced746c667d15344f3dd5047ac94">&#9670;&nbsp;</a></span>help_workhorse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* help_workhorse </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>match</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03757">3757</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00483">ast_join</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00043">agi_command::cmda</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00052">agi_command::dead</a>, <a class="el" href="../../dc/d52/structagi__command.html#af00a83dd0d12d02e79d4014beeacabfa">agi_command::list</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01389">MAX_CMD_LEN</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, and <a class="el" href="../../dc/d2b/agi_8h_source.html#l00048">agi_command::summary</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04284">handle_cli_agi_show()</a>.</p>
<div class="fragment"><div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;{</div><div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;   <span class="keywordtype">char</span> fullcmd[<a class="code" href="../../dd/de9/res__agi_8c.html#a1eb73c104b484cf18752169509cebfe2">MAX_CMD_LEN</a>], matchstr[<a class="code" href="../../dd/de9/res__agi_8c.html#a1eb73c104b484cf18752169509cebfe2">MAX_CMD_LEN</a>];</div><div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d52/structagi__command.html">agi_command</a> *e;</div><div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;</div><div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a>)</div><div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aea6bd3799329d5811098c41b6c201c45">ast_join</a>(matchstr, <span class="keyword">sizeof</span>(matchstr), <a class="code" href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a>);</div><div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;</div><div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%5.5s %30.30s   %s\n&quot;</span>,<span class="stringliteral">&quot;Dead&quot;</span>,<span class="stringliteral">&quot;Command&quot;</span>,<span class="stringliteral">&quot;Description&quot;</span>);</div><div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a>);</div><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a>, e, <a class="code" href="../../dc/d52/structagi__command.html#af00a83dd0d12d02e79d4014beeacabfa">list</a>) {</div><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;      <span class="keywordflow">if</span> (!e-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ad9605fda9da9c3b6965fb5f78a8c6cfd">cmda</a>[0])</div><div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;      <span class="comment">/* Hide commands that start with &#39;_&#39; */</span></div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;      <span class="keywordflow">if</span> ((e-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ad9605fda9da9c3b6965fb5f78a8c6cfd">cmda</a>[0])[0] == <span class="charliteral">&#39;_&#39;</span>)</div><div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aea6bd3799329d5811098c41b6c201c45">ast_join</a>(fullcmd, <span class="keyword">sizeof</span>(fullcmd), e-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ad9605fda9da9c3b6965fb5f78a8c6cfd">cmda</a>);</div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a> &amp;&amp; strncasecmp(matchstr, fullcmd, strlen(matchstr)))</div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%5.5s %30.30s   %s\n&quot;</span>, e-&gt;<a class="code" href="../../dc/d52/structagi__command.html#aba4d8edbd5cd7c809d47d25ad55bf8e5">dead</a> ? <span class="stringliteral">&quot;Yes&quot;</span> : <span class="stringliteral">&quot;No&quot;</span> , fullcmd, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(e-&gt;<a class="code" href="../../dc/d52/structagi__command.html#a54841ced0ab497a0d3a8d5f244159a6b">summary</a>, <span class="stringliteral">&quot;Not available&quot;</span>));</div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;   }</div><div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a>);</div><div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;</div><div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;}</div><div class="ttc" id="structagi__command_html_a54841ced0ab497a0d3a8d5f244159a6b"><div class="ttname"><a href="../../dc/d52/structagi__command.html#a54841ced0ab497a0d3a8d5f244159a6b">agi_command::summary</a></div><div class="ttdeci">const char *const summary</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00048">agi.h:48</a></div></div>
<div class="ttc" id="structagi__commands_html"><div class="ttname"><a href="../../d7/de8/structagi__commands.html">agi_commands</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l03755">res_agi.c:3755</a></div></div>
<div class="ttc" id="strings_8h_html_aea6bd3799329d5811098c41b6c201c45"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aea6bd3799329d5811098c41b6c201c45">ast_join</a></div><div class="ttdeci">#define ast_join(s, len, w)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00483">strings.h:483</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_a7dd0190efe1c61151a9dbab078bdb263"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a></div><div class="ttdeci">static int match(struct ast_sockaddr *addr, unsigned short callno, unsigned short dcallno, const struct chan_iax2_pvt *cur, int check_dcallno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l02315">chan_iax2.c:2315</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="res__agi_8c_html_a1eb73c104b484cf18752169509cebfe2"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a1eb73c104b484cf18752169509cebfe2">MAX_CMD_LEN</a></div><div class="ttdeci">#define MAX_CMD_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01389">res_agi.c:1389</a></div></div>
<div class="ttc" id="structagi__command_html_aba4d8edbd5cd7c809d47d25ad55bf8e5"><div class="ttname"><a href="../../dc/d52/structagi__command.html#aba4d8edbd5cd7c809d47d25ad55bf8e5">agi_command::dead</a></div><div class="ttdeci">const int dead</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00052">agi.h:52</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structagi__command_html"><div class="ttname"><a href="../../dc/d52/structagi__command.html">agi_command</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00042">agi.h:42</a></div></div>
<div class="ttc" id="structagi__command_html_ad9605fda9da9c3b6965fb5f78a8c6cfd"><div class="ttname"><a href="../../dc/d52/structagi__command.html#ad9605fda9da9c3b6965fb5f78a8c6cfd">agi_command::cmda</a></div><div class="ttdeci">const char *const cmda[AST_MAX_CMD_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00043">agi.h:43</a></div></div>
<div class="ttc" id="structagi__command_html_af00a83dd0d12d02e79d4014beeacabfa"><div class="ttname"><a href="../../dc/d52/structagi__command.html#af00a83dd0d12d02e79d4014beeacabfa">agi_command::list</a></div><div class="ttdeci">struct agi_command::@219 list</div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac6b085612a89ffb1f4be4bfa50d6b518"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6b085612a89ffb1f4be4bfa50d6b518">&#9670;&nbsp;</a></span>launch_asyncagi()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a> launch_asyncagi </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>efd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01787">1787</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01613">add_to_agi()</a>, <a class="el" href="../../dd/de9/res__agi_8c.html#aa2bed8203ffc925f64cf3b48cd3a2910">AGI_BUF_SIZE</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04021">agi_handle_command()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01413">AGI_RESULT_FAILURE</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01414">AGI_RESULT_SUCCESS</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01416">AGI_RESULT_SUCCESS_ASYNC</a>, <a class="el" href="../../dd/de9/res__agi_8c.html#a1bf7e6988af21440def19908daafd708">AMI_BUF_SIZE</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01120">ast_channel_publish_cached_blob()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00445">ast_check_hangup()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00459">ast_check_hangup_locked()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00404">ast_json_object_set()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00591">ast_json_pack()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00268">ast_json_string_create()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/d2a/res__speech_8c_source.html#l00240">ast_speech_destroy()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00577">ast_uri_encode()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00573">ast_uri_http</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l03171">ast_waitfor()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01759">async_agi_read_frame()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00036">agi_state::audio</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01517">agi_cmd::cmd_buffer</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01518">agi_cmd::cmd_id</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00037">agi_state::ctrl</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00038">agi_state::fast</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01522">free_agi_cmd()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01558">get_agi_cmd()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02318">setup_env()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00039">agi_state::speech</a>, and <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00086">timeout</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02200">launch_script()</a>.</p>
<div class="fragment"><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;{</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;<span class="comment">/* This buffer sizes might cause truncation if the AGI command writes more data</span></div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;<span class="comment">   than AGI_BUF_SIZE as result. But let&#39;s be serious, is there an AGI command</span></div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;<span class="comment">   that writes a response larger than 1024 bytes?, I don&#39;t think so, most of</span></div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;<span class="comment">   them are just result=blah stuff. However probably if GET VARIABLE is called</span></div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;<span class="comment">   and the variable has large amount of data, that could be a problem. We could</span></div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;<span class="comment">   make this buffers dynamic, but let&#39;s leave that as a second step.</span></div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;<span class="comment">   AMI_BUF_SIZE is twice AGI_BUF_SIZE just for the sake of choosing a safe</span></div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;<span class="comment">   number. Some characters of AGI buf will be url encoded to be sent to manager</span></div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;<span class="comment">   clients.  An URL encoded character will take 3 bytes, but again, to cause</span></div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;<span class="comment">   truncation more than about 70% of the AGI buffer should be URL encoded for</span></div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;<span class="comment">   that to happen.  Not likely at all.</span></div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;<span class="comment">   On the other hand. I wonder if read() could eventually return less data than</span></div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;<span class="comment">   the amount already available in the pipe? If so, how to deal with that?</span></div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;<span class="comment">   So far, my tests on Linux have not had any problems.</span></div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;<span class="preprocessor">#define AGI_BUF_SIZE 1024</span></div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;<span class="preprocessor">#define AMI_BUF_SIZE 2048</span></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a> cmd_status;</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db1/structagi__cmd.html">agi_cmd</a> *cmd;</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;   <span class="keywordtype">int</span> fds[2];</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;   <span class="keywordtype">int</span> hungup;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> = 100;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;   <span class="keywordtype">char</span> agi_buffer[<a class="code" href="../../dd/de9/res__agi_8c.html#aa2bed8203ffc925f64cf3b48cd3a2910">AGI_BUF_SIZE</a> + 1];</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;   <span class="keywordtype">char</span> ami_buffer[<a class="code" href="../../dd/de9/res__agi_8c.html#a1bf7e6988af21440def19908daafd708">AMI_BUF_SIZE</a>];</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a> returnstatus = <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8">AGI_RESULT_SUCCESS</a>;</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;   <a class="code" href="../../d1/db7/structagi__state.html">AGI</a> async_agi;</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, startblob, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;   <span class="keywordflow">if</span> (efd) {</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Async AGI does not support Enhanced AGI yet\n&quot;</span>);</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;   }</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;   <span class="comment">/* add AsyncAGI datastore to the channel */</span></div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/de9/res__agi_8c.html#a9383e938a35233f3b55a3c93a1e8ccca">add_to_agi</a>(chan)) {</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to start Async AGI on channel %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;   }</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;   <span class="comment">/* this pipe allows us to create a &quot;fake&quot; AGI struct to use</span></div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;<span class="comment">      the AGI commands */</span></div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;   res = pipe(fds);</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create Async AGI pipe\n&quot;</span>);</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;<span class="comment">       * Intentionally do not remove the datastore added with</span></div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;<span class="comment">       * add_to_agi() the from channel.  It will be removed when the</span></div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;<span class="comment">       * channel is hung up anyway.</span></div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;   }</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;   <span class="comment">/* handlers will get the pipe write fd and we read the AGI responses</span></div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;<span class="comment">      from the pipe read fd */</span></div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;   async_agi.<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a> = fds[1];</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;   async_agi.<a class="code" href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">ctrl</a> = fds[1];</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;   async_agi.<a class="code" href="../../d1/db7/structagi__state.html#a220009426c8518be4b294a02b1194906">audio</a> = -1; <span class="comment">/* no audio support */</span></div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;   async_agi.<a class="code" href="../../d1/db7/structagi__state.html#aa9106f15c17bda42c4e5dc9e0fd96572">fast</a> = 0;</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;   async_agi.<a class="code" href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">speech</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;   <span class="comment">/* notify possible manager users of a new channel ready to</span></div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;<span class="comment">      receive commands */</span></div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#a1a91f6f01be62db91c4a91250f3d513d">setup_env</a>(chan, <span class="stringliteral">&quot;async&quot;</span>, fds[1], 0, argc, argv);</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;   <span class="comment">/* read the environment */</span></div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;   res = read(fds[0], agi_buffer, <a class="code" href="../../dd/de9/res__agi_8c.html#aa2bed8203ffc925f64cf3b48cd3a2910">AGI_BUF_SIZE</a>);</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;   <span class="keywordflow">if</span> (res &lt;= 0) {</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to read from Async AGI pipe on channel %s: %s\n&quot;</span>,</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), res &lt; 0 ? strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>) : <span class="stringliteral">&quot;EOF&quot;</span>);</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;      returnstatus = <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;      <span class="keywordflow">goto</span> async_agi_abort;</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;   }</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;   agi_buffer[res] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;   <span class="comment">/* encode it and send it thru the manager so whoever is going to take</span></div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;<span class="comment">      care of AGI commands on this channel can decide which AGI commands</span></div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;<span class="comment">      to execute based on the setup info */</span></div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a6c73f6351bc9ca577360cf4af2231c3d">ast_uri_encode</a>(agi_buffer, ami_buffer, <a class="code" href="../../dd/de9/res__agi_8c.html#a1bf7e6988af21440def19908daafd708">AMI_BUF_SIZE</a>, <a class="code" href="../../d5/d60/utils_8h.html#a7f200bdbb0ccc080852f2279a1d470dc">ast_uri_http</a>);</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;   startblob = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s}&quot;</span>, <span class="stringliteral">&quot;Env&quot;</span>, ami_buffer);</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga565fc39c360b014dd5d4054fa72bbae8">ast_channel_publish_cached_blob</a>(chan, agi_async_start_type(), startblob);</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;   hungup = <a class="code" href="../../d5/d7b/channel_8h.html#a723ac44c92b9edb6c1a731e01edacb4a">ast_check_hangup_locked</a>(chan);</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;<span class="comment">       * Process as many commands as we can.  Commands are added via</span></div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;<span class="comment">       * the manager or the cli threads.</span></div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;      <span class="keywordflow">while</span> (!hungup) {</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, execblob, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;         res = <a class="code" href="../../dd/de9/res__agi_8c.html#a95dd50b690e045a32abb12b8e99974a0">get_agi_cmd</a>(chan, &amp;cmd);</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;         <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;            returnstatus = <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;            <span class="keywordflow">goto</span> async_agi_done;</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!cmd) {</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;         }</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;         <span class="comment">/* OK, we have a command, let&#39;s call the command handler. */</span></div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;         cmd_status = <a class="code" href="../../dd/de9/res__agi_8c.html#ada0f44d1c6c2dbd51b7e81aae69399d3">agi_handle_command</a>(chan, &amp;async_agi, cmd-&gt;<a class="code" href="../../d4/db1/structagi__cmd.html#a3fe154717b79d32dd6366ce4b0cb6b38">cmd_buffer</a>, 0);</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;<span class="comment">          * The command handler must have written to our fake AGI struct</span></div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;<span class="comment">          * fd (the pipe), let&#39;s read the response.</span></div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;         res = read(fds[0], agi_buffer, <a class="code" href="../../dd/de9/res__agi_8c.html#aa2bed8203ffc925f64cf3b48cd3a2910">AGI_BUF_SIZE</a>);</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;         <span class="keywordflow">if</span> (res &lt;= 0) {</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to read from Async AGI pipe on channel %s: %s\n&quot;</span>,</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), res &lt; 0 ? strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>) : <span class="stringliteral">&quot;EOF&quot;</span>);</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;            <a class="code" href="../../dd/de9/res__agi_8c.html#aeb2a37e60e82e5519f36a120c2bae28e">free_agi_cmd</a>(cmd);</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;            returnstatus = <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;            <span class="keywordflow">goto</span> async_agi_done;</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;         }</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;<span class="comment">          * We have a response, let&#39;s send the response thru the manager.</span></div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;<span class="comment">          * Include the CommandID if it was specified when the command</span></div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;<span class="comment">          * was added.</span></div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;         agi_buffer[res] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a6c73f6351bc9ca577360cf4af2231c3d">ast_uri_encode</a>(agi_buffer, ami_buffer, <a class="code" href="../../dd/de9/res__agi_8c.html#a1bf7e6988af21440def19908daafd708">AMI_BUF_SIZE</a>, <a class="code" href="../../d5/d60/utils_8h.html#a7f200bdbb0ccc080852f2279a1d470dc">ast_uri_http</a>);</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;         execblob = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s}&quot;</span>, <span class="stringliteral">&quot;Result&quot;</span>, ami_buffer);</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;         <span class="keywordflow">if</span> (execblob &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cmd-&gt;<a class="code" href="../../d4/db1/structagi__cmd.html#a550a7cedad446097b6e55bbd744412b1">cmd_id</a>)) {</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;            <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(execblob, <span class="stringliteral">&quot;CommandId&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a>(cmd-&gt;<a class="code" href="../../d4/db1/structagi__cmd.html#a550a7cedad446097b6e55bbd744412b1">cmd_id</a>));</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;         }</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga565fc39c360b014dd5d4054fa72bbae8">ast_channel_publish_cached_blob</a>(chan, agi_async_exec_type(), execblob);</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;         <a class="code" href="../../dd/de9/res__agi_8c.html#aeb2a37e60e82e5519f36a120c2bae28e">free_agi_cmd</a>(cmd);</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;<span class="comment">          * Check the command status to determine if we should continue</span></div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;<span class="comment">          * executing more commands.</span></div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;         hungup = <a class="code" href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan);</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;         <span class="keywordflow">switch</span> (cmd_status) {</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>:</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;            <span class="keywordflow">if</span> (!hungup) {</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;               <span class="comment">/* The failure was not because of a hangup. */</span></div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;               returnstatus = <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;               <span class="keywordflow">goto</span> async_agi_done;</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;            }</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a97eab5e05f42bf8b5da0575a67e10d7c">AGI_RESULT_SUCCESS_ASYNC</a>:</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;            <span class="comment">/* Only the &quot;asyncagi break&quot; command does this. */</span></div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;            returnstatus = <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a97eab5e05f42bf8b5da0575a67e10d7c">AGI_RESULT_SUCCESS_ASYNC</a>;</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;            <span class="keywordflow">goto</span> async_agi_done;</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;         }</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;      }</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;      <span class="keywordflow">if</span> (!hungup) {</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;         <span class="comment">/* Wait a bit for a frame to read or to poll for a new command. */</span></div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;         res = <a class="code" href="../../d5/d7b/channel_8h.html#a60e0bcaed001e8d5ed1ba0eb2644b3cc">ast_waitfor</a>(chan, timeout);</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;         <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;ast_waitfor returned &lt;= 0 on chan %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;            returnstatus = <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;         }</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;<span class="comment">          * Read the channel control queue until it is dry so we can</span></div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;<span class="comment">          * quit.</span></div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;         res = 1;</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;      }</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;      <span class="keywordflow">if</span> (0 &lt; res) {</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;         <span class="keywordflow">do</span> {</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;            cmd_status = <a class="code" href="../../dd/de9/res__agi_8c.html#a44c30f6f76341061e7609cc4e3a182e5">async_agi_read_frame</a>(chan);</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;            <span class="keywordflow">if</span> (cmd_status != <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8">AGI_RESULT_SUCCESS</a>) {</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;               returnstatus = cmd_status;</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;               <span class="keywordflow">goto</span> async_agi_done;</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;            }</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;            hungup = <a class="code" href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan);</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;         } <span class="keywordflow">while</span> (hungup);</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;         hungup = <a class="code" href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan);</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;      }</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;   }</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;async_agi_done:</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;   <span class="keywordflow">if</span> (async_agi.<a class="code" href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">speech</a>) {</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;      <a class="code" href="../../d6/dd7/speech_8h.html#a7ebc9d3250a75a2cb7ee2f7c15eb8228">ast_speech_destroy</a>(async_agi.<a class="code" href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">speech</a>);</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;   }</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;   <span class="comment">/* notify manager users this channel cannot be controlled anymore by Async AGI */</span></div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga565fc39c360b014dd5d4054fa72bbae8">ast_channel_publish_cached_blob</a>(chan, agi_async_end_type(), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;async_agi_abort:</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;   <span class="comment">/* close the pipe */</span></div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;   close(fds[0]);</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;   close(fds[1]);</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;<span class="comment">    * Intentionally do not remove the datastore added with</span></div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;<span class="comment">    * add_to_agi() the from channel.  There might be commands still</span></div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;<span class="comment">    * in the queue or in-flight to us and AsyncAGI may get called</span></div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;<span class="comment">    * again.  The datastore destructor will be called on channel</span></div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;<span class="comment">    * destruction anyway.</span></div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;   <span class="keywordflow">if</span> (returnstatus == <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8">AGI_RESULT_SUCCESS</a>) {</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;      returnstatus = <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a97eab5e05f42bf8b5da0575a67e10d7c">AGI_RESULT_SUCCESS_ASYNC</a>;</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;   }</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;   <span class="keywordflow">return</span> returnstatus;</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;<span class="preprocessor">#undef AGI_BUF_SIZE</span></div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;<span class="preprocessor">#undef AMI_BUF_SIZE</span></div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;}</div><div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a></div><div class="ttdeci">agi_result</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01412">res_agi.c:1412</a></div></div>
<div class="ttc" id="speech_8h_html_a7ebc9d3250a75a2cb7ee2f7c15eb8228"><div class="ttname"><a href="../../d6/dd7/speech_8h.html#a7ebc9d3250a75a2cb7ee2f7c15eb8228">ast_speech_destroy</a></div><div class="ttdeci">int ast_speech_destroy(struct ast_speech *speech)</div><div class="ttdoc">Destroy a speech structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2a/res__speech_8c_source.html#l00240">res_speech.c:240</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1a97eab5e05f42bf8b5da0575a67e10d7c"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a97eab5e05f42bf8b5da0575a67e10d7c">AGI_RESULT_SUCCESS_ASYNC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01416">res_agi.c:1416</a></div></div>
<div class="ttc" id="res__agi_8c_html_a44c30f6f76341061e7609cc4e3a182e5"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a44c30f6f76341061e7609cc4e3a182e5">async_agi_read_frame</a></div><div class="ttdeci">static enum agi_result async_agi_read_frame(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01759">res_agi.c:1759</a></div></div>
<div class="ttc" id="structagi__cmd_html"><div class="ttname"><a href="../../d4/db1/structagi__cmd.html">agi_cmd</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01516">res_agi.c:1516</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga565fc39c360b014dd5d4054fa72bbae8"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga565fc39c360b014dd5d4054fa72bbae8">ast_channel_publish_cached_blob</a></div><div class="ttdeci">void ast_channel_publish_cached_blob(struct ast_channel *chan, struct stasis_message_type *type, struct ast_json *blob)</div><div class="ttdoc">Publish a channel blob message using the latest snapshot from the cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01120">stasis_channels.c:1120</a></div></div>
<div class="ttc" id="channel_8h_html_a723ac44c92b9edb6c1a731e01edacb4a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a723ac44c92b9edb6c1a731e01edacb4a">ast_check_hangup_locked</a></div><div class="ttdeci">int ast_check_hangup_locked(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00459">channel.c:459</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="utils_8h_html_a6c73f6351bc9ca577360cf4af2231c3d"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a6c73f6351bc9ca577360cf4af2231c3d">ast_uri_encode</a></div><div class="ttdeci">char * ast_uri_encode(const char *string, char *outbuf, int buflen, struct ast_flags spec)</div><div class="ttdoc">Turn text string to URI-encoded XX version. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00577">main/utils.c:577</a></div></div>
<div class="ttc" id="res__agi_8c_html_a1bf7e6988af21440def19908daafd708"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a1bf7e6988af21440def19908daafd708">AMI_BUF_SIZE</a></div><div class="ttdeci">#define AMI_BUF_SIZE</div></div>
<div class="ttc" id="structagi__state_html_a0f787778e7019ca3a8bdf0bd17b9efca"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">agi_state::ctrl</a></div><div class="ttdeci">int ctrl</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00037">agi.h:37</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__agi_8c_html_a95dd50b690e045a32abb12b8e99974a0"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a95dd50b690e045a32abb12b8e99974a0">get_agi_cmd</a></div><div class="ttdeci">static int get_agi_cmd(struct ast_channel *chan, struct agi_cmd **cmd)</div><div class="ttdoc">Retrieve the list head to the requested channel&amp;#39;s AGI datastore. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01558">res_agi.c:1558</a></div></div>
<div class="ttc" id="json_8h_html_abc8b563c172cfaffa2b555195990f729"><div class="ttname"><a href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a></div><div class="ttdeci">int ast_json_object_set(struct ast_json *object, const char *key, struct ast_json *value)</div><div class="ttdoc">Set a field in a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00404">json.c:404</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structagi__cmd_html_a550a7cedad446097b6e55bbd744412b1"><div class="ttname"><a href="../../d4/db1/structagi__cmd.html#a550a7cedad446097b6e55bbd744412b1">agi_cmd::cmd_id</a></div><div class="ttdeci">char * cmd_id</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01518">res_agi.c:1518</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="json_8h_html_adc52f8d76b7fdd0c8d12987981fd5bf5"><div class="ttname"><a href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a></div><div class="ttdeci">struct ast_json * ast_json_string_create(const char *value)</div><div class="ttdoc">Construct a JSON string from value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00268">json.c:268</a></div></div>
<div class="ttc" id="res__agi_8c_html_a1a91f6f01be62db91c4a91250f3d513d"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a1a91f6f01be62db91c4a91250f3d513d">setup_env</a></div><div class="ttdeci">static void setup_env(struct ast_channel *chan, char *request, int fd, int enhanced, int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l02318">res_agi.c:2318</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01413">res_agi.c:1413</a></div></div>
<div class="ttc" id="channel_8h_html_a9c63fff1d736568d1ee332dd7ea502bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a></div><div class="ttdeci">int ast_check_hangup(struct ast_channel *chan)</div><div class="ttdoc">Check to see if a channel is needing hang up. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00445">channel.c:445</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8">AGI_RESULT_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01414">res_agi.c:1414</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__agi_8c_html_a9383e938a35233f3b55a3c93a1e8ccca"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a9383e938a35233f3b55a3c93a1e8ccca">add_to_agi</a></div><div class="ttdeci">static int add_to_agi(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01613">res_agi.c:1613</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="structagi__state_html_ada1cd33a25b7c7dfc19466d2bfc2645d"><div class="ttname"><a href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">agi_state::speech</a></div><div class="ttdeci">struct ast_speech * speech</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00039">agi.h:39</a></div></div>
<div class="ttc" id="structagi__state_html_a220009426c8518be4b294a02b1194906"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a220009426c8518be4b294a02b1194906">agi_state::audio</a></div><div class="ttdeci">int audio</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00036">agi.h:36</a></div></div>
<div class="ttc" id="res__agi_8c_html_ada0f44d1c6c2dbd51b7e81aae69399d3"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#ada0f44d1c6c2dbd51b7e81aae69399d3">agi_handle_command</a></div><div class="ttdeci">static enum agi_result agi_handle_command(struct ast_channel *chan, AGI *agi, char *buf, int dead)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l04021">res_agi.c:4021</a></div></div>
<div class="ttc" id="res__agi_8c_html_aa2bed8203ffc925f64cf3b48cd3a2910"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#aa2bed8203ffc925f64cf3b48cd3a2910">AGI_BUF_SIZE</a></div><div class="ttdeci">#define AGI_BUF_SIZE</div></div>
<div class="ttc" id="structagi__state_html_aa9106f15c17bda42c4e5dc9e0fd96572"><div class="ttname"><a href="../../d1/db7/structagi__state.html#aa9106f15c17bda42c4e5dc9e0fd96572">agi_state::fast</a></div><div class="ttdeci">unsigned int fast</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00038">agi.h:38</a></div></div>
<div class="ttc" id="channel_8h_html_a60e0bcaed001e8d5ed1ba0eb2644b3cc"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a60e0bcaed001e8d5ed1ba0eb2644b3cc">ast_waitfor</a></div><div class="ttdeci">int ast_waitfor(struct ast_channel *chan, int ms)</div><div class="ttdoc">Wait for input on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03171">channel.c:3171</a></div></div>
<div class="ttc" id="structagi__cmd_html_a3fe154717b79d32dd6366ce4b0cb6b38"><div class="ttname"><a href="../../d4/db1/structagi__cmd.html#a3fe154717b79d32dd6366ce4b0cb6b38">agi_cmd::cmd_buffer</a></div><div class="ttdeci">char * cmd_buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01517">res_agi.c:1517</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="res__agi_8c_html_aeb2a37e60e82e5519f36a120c2bae28e"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#aeb2a37e60e82e5519f36a120c2bae28e">free_agi_cmd</a></div><div class="ttdeci">static void free_agi_cmd(struct agi_cmd *cmd)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01522">res_agi.c:1522</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="utils_8h_html_a7f200bdbb0ccc080852f2279a1d470dc"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7f200bdbb0ccc080852f2279a1d470dc">ast_uri_http</a></div><div class="ttdeci">const struct ast_flags ast_uri_http</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00573">main/utils.c:573</a></div></div>
<div class="ttc" id="structagi__state_html"><div class="ttname"><a href="../../d1/db7/structagi__state.html">agi_state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00034">agi.h:34</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c51b461f83780e2100cecf7c510d639"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c51b461f83780e2100cecf7c510d639">&#9670;&nbsp;</a></span>launch_ha_netscript()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a> launch_ha_netscript </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>agiurl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>fds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02146">2146</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01413">AGI_RESULT_FAILURE</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01417">AGI_RESULT_NOTFOUND</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d76/srv_8c_source.html#l00248">ast_srv_cleanup()</a>, <a class="el" href="../../d6/d76/srv_8c_source.html#l00202">ast_srv_lookup()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../d0/d8a/muted_8c_source.html#l00077">host</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02053">launch_netscript()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00949">service</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01392">SRV_PREFIX</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02200">launch_script()</a>.</p>
<div class="fragment"><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;{</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a>, *script;</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/da6/structsrv__context.html">srv_context</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;   <span class="keywordtype">int</span> srv_ret;</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>[256];</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;   <span class="keywordtype">char</span> resolved_uri[1024];</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *srvhost;</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> srvport;</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;   <span class="comment">/* format of agiurl is &quot;hagi://host.domain[:port][/script/name]&quot; */</span></div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;   <span class="keywordflow">if</span> (strlen(agiurl) &lt; 7) { <span class="comment">/* Remove hagi:// */</span></div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;An error occurred parsing the AGI URI: %s&quot;</span>, agiurl);</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;   }</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;   host = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(agiurl + 7);</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;   <span class="comment">/* Strip off any script name */</span></div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;   <span class="keywordflow">if</span> ((script = strchr(host, <span class="charliteral">&#39;/&#39;</span>))) {</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;      *script++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;      script = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;   }</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;   <span class="keywordflow">if</span> (strchr(host, <span class="charliteral">&#39;:&#39;</span>)) {</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Specifying a port number disables SRV lookups: %s\n&quot;</span>, agiurl);</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#a64747d68dc7acc932d0a6657971bedac">launch_netscript</a>(agiurl + 1, argv, fds); <span class="comment">/* +1 to strip off leading h from hagi:// */</span></div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;   }</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;   snprintf(service, <span class="keyword">sizeof</span>(service), <span class="stringliteral">&quot;%s%s&quot;</span>, <a class="code" href="../../dd/de9/res__agi_8c.html#aca50e62ba80a3860828c9a45c65e171c">SRV_PREFIX</a>, host);</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;   <span class="keywordflow">while</span> (!(srv_ret = <a class="code" href="../../d5/d60/srv_8h.html#ae26681eecf287d73cc3f4cb64f275dbb">ast_srv_lookup</a>(&amp;context, service, &amp;srvhost, &amp;srvport))) {</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;      snprintf(resolved_uri, <span class="keyword">sizeof</span>(resolved_uri), <span class="stringliteral">&quot;agi://%s:%d/%s&quot;</span>, srvhost, srvport, script);</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;      result = <a class="code" href="../../dd/de9/res__agi_8c.html#a64747d68dc7acc932d0a6657971bedac">launch_netscript</a>(resolved_uri, argv, fds);</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;      <span class="keywordflow">if</span> (result == <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a> || result == <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1ac0f8286bb33122eee66cbe710f3f5ada">AGI_RESULT_NOTFOUND</a>) {</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;AGI request failed for host &#39;%s&#39; (%s:%d)\n&quot;</span>, host, srvhost, srvport);</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;         <span class="comment">/* The script launched so we must cleanup the context. */</span></div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;         <a class="code" href="../../d5/d60/srv_8h.html#a7ed69939a9cc906ffde86a71efdf35a5">ast_srv_cleanup</a>(&amp;context);</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;      }</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;   }</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;<span class="comment">    * The DNS SRV lookup failed or we ran out of servers to check.</span></div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;<span class="comment">    * ast_srv_lookup() has already cleaned up the context for us.</span></div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;   <span class="keywordflow">if</span> (srv_ret &lt; 0) {</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SRV lookup failed for %s\n&quot;</span>, agiurl);</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;   }</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;}</div><div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a></div><div class="ttdeci">agi_result</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01412">res_agi.c:1412</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="srv_8h_html_a7ed69939a9cc906ffde86a71efdf35a5"><div class="ttname"><a href="../../d5/d60/srv_8h.html#a7ed69939a9cc906ffde86a71efdf35a5">ast_srv_cleanup</a></div><div class="ttdeci">void ast_srv_cleanup(struct srv_context **context)</div><div class="ttdoc">Cleanup resources associated with ast_srv_lookup. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d76/srv_8c_source.html#l00248">srv.c:248</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a495cc24c1947d49a2b6de488a45c9d72"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a></div><div class="ttdeci">enum ast_cc_service_type service</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00949">chan_sip.c:949</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1ac0f8286bb33122eee66cbe710f3f5ada"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1ac0f8286bb33122eee66cbe710f3f5ada">AGI_RESULT_NOTFOUND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01417">res_agi.c:1417</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="muted_8c_html_a41c3a180b50c6b2ddcc1b6843a48f205"><div class="ttname"><a href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a></div><div class="ttdeci">static char host[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00077">muted.c:77</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01413">res_agi.c:1413</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structsrv__context_html"><div class="ttname"><a href="../../d8/da6/structsrv__context.html">srv_context</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d76/srv_8c_source.html#l00065">srv.c:65</a></div></div>
<div class="ttc" id="srv_8h_html_ae26681eecf287d73cc3f4cb64f275dbb"><div class="ttname"><a href="../../d5/d60/srv_8h.html#ae26681eecf287d73cc3f4cb64f275dbb">ast_srv_lookup</a></div><div class="ttdeci">int ast_srv_lookup(struct srv_context **context, const char *service, const char **host, unsigned short *port)</div><div class="ttdoc">Retrieve set of SRV lookups, in order. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d76/srv_8c_source.html#l00202">srv.c:202</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="res__agi_8c_html_aca50e62ba80a3860828c9a45c65e171c"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#aca50e62ba80a3860828c9a45c65e171c">SRV_PREFIX</a></div><div class="ttdeci">#define SRV_PREFIX</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01392">res_agi.c:1392</a></div></div>
<div class="ttc" id="res__agi_8c_html_a64747d68dc7acc932d0a6657971bedac"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a64747d68dc7acc932d0a6657971bedac">launch_netscript</a></div><div class="ttdeci">static enum agi_result launch_netscript(char *agiurl, char *argv[], int *fds)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l02053">res_agi.c:2053</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a64747d68dc7acc932d0a6657971bedac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64747d68dc7acc932d0a6657971bedac">&#9670;&nbsp;</a></span>launch_netscript()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a> launch_netscript </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>agiurl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>fds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02053">2053</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01407">AGI_PORT</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01413">AGI_RESULT_FAILURE</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01415">AGI_RESULT_SUCCESS_FAST</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00054">AST_AF_UNSPEC</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00595">ast_connect()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00521">ast_sockaddr_port</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00280">ast_sockaddr_resolve()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00537">ast_sockaddr_set_port</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l01043">ast_socket_nonblock</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02012">handle_connection()</a>, <a class="el" href="../../d0/d8a/muted_8c_source.html#l00077">host</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02146">launch_ha_netscript()</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02200">launch_script()</a>.</p>
<div class="fragment"><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;{</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;   <span class="keywordtype">int</span> s = 0;</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a>, *script;</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;   <span class="keywordtype">int</span> num_addrs = 0, i = 0;</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addrs;</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;   <span class="comment">/* agiurl is &quot;agi://host.domain[:port][/script/name]&quot; */</span></div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;   host = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(agiurl + 6);  <span class="comment">/* Remove agi:// */</span></div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;   <span class="comment">/* Strip off any script name */</span></div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;   <span class="keywordflow">if</span> ((script = strchr(host, <span class="charliteral">&#39;/&#39;</span>))) {</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;      *script++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;      script = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;   }</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;   <span class="keywordflow">if</span> (!(num_addrs = <a class="code" href="../../db/df1/netsock2_8h.html#a8ba6f5b5a9de09137dd18fe2d9592880">ast_sockaddr_resolve</a>(&amp;addrs, host, 0, <a class="code" href="../../db/df1/netsock2_8h.html#a27c1625aa5fde74a6dec3d424733c579a97dcf13ca2f2ce3ce4c66de236e6f3f7">AST_AF_UNSPEC</a>))) {</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to locate host &#39;%s&#39;\n&quot;</span>, host);</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;   }</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; num_addrs; i++) {</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a>(&amp;addrs[i])) {</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(&amp;addrs[i], <a class="code" href="../../dd/de9/res__agi_8c.html#acc5c6270557bf6ddf0ddf1952d9c600a">AGI_PORT</a>);</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;      }</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;      <span class="keywordflow">if</span> ((s = <a class="code" href="../../d5/d60/utils_8h.html#a4aacbe2dadb9b8befc5a76765ea6d14b">ast_socket_nonblock</a>(addrs[i].<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>.ss_family, SOCK_STREAM, IPPROTO_TCP)) &lt; 0) {</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create socket: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;      }</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#a16d4f77ca9af75e4afb60accca62e819">ast_connect</a>(s, &amp;addrs[i]) &amp;&amp; <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == EINPROGRESS) {</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dd/de9/res__agi_8c.html#abdde9073d142012fc7c7b4403a372fbe">handle_connection</a>(agiurl, addrs[i], s)) {</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;            close(s);</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;         }</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Connection to %s failed with unexpected error: %s\n&quot;</span>,</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;addrs[i]), strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;      }</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;   }</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(addrs);</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;   <span class="keywordflow">if</span> (i == num_addrs) {</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Couldn&#39;t connect to any host.  FastAGI failed.\n&quot;</span>);</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;   }</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(s, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;agi_network: yes\n&quot;</span>) &lt; 0) {</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EINTR) {</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Connect to &#39;%s&#39; failed: %s\n&quot;</span>, agiurl, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;         close(s);</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;      }</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;   }</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;   <span class="comment">/* If we have a script parameter, relay it to the fastagi server */</span></div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;   <span class="comment">/* Script parameters take the form of: AGI(agi://my.example.com/?extension=${EXTEN}) */</span></div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(script)) {</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(s, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;agi_network_script: %s\n&quot;</span>, script);</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;   }</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(4, <span class="stringliteral">&quot;Wow, connected!\n&quot;</span>);</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;   fds[0] = s;</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;   fds[1] = s;</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1aac30d4ae19361cc243414b0ec32cbb78">AGI_RESULT_SUCCESS_FAST</a>;</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="res__agi_8c_html_abdde9073d142012fc7c7b4403a372fbe"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abdde9073d142012fc7c7b4403a372fbe">handle_connection</a></div><div class="ttdeci">static int handle_connection(const char *agiurl, const struct ast_sockaddr addr, const int netsockfd)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l02012">res_agi.c:2012</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="utils_8h_html_a4aacbe2dadb9b8befc5a76765ea6d14b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4aacbe2dadb9b8befc5a76765ea6d14b">ast_socket_nonblock</a></div><div class="ttdeci">#define ast_socket_nonblock(domain, type, protocol)</div><div class="ttdoc">Create a non-blocking socket. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l01043">utils.h:1043</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1aac30d4ae19361cc243414b0ec32cbb78"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1aac30d4ae19361cc243414b0ec32cbb78">AGI_RESULT_SUCCESS_FAST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01415">res_agi.c:1415</a></div></div>
<div class="ttc" id="netsock2_8h_html_a51e2841175bf3ad58a4e11ad9fb2453f"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a></div><div class="ttdeci">#define ast_sockaddr_port(addr)</div><div class="ttdoc">Get the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00521">netsock2.h:521</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="muted_8c_html_a41c3a180b50c6b2ddcc1b6843a48f205"><div class="ttname"><a href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a></div><div class="ttdeci">static char host[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00077">muted.c:77</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01413">res_agi.c:1413</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="netsock2_8h_html_ac83e6bdec376b74d02da8d2f8e1af888"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a></div><div class="ttdeci">#define ast_sockaddr_set_port(addr, port)</div><div class="ttdoc">Sets the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00537">netsock2.h:537</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="netsock2_8h_html_a27c1625aa5fde74a6dec3d424733c579a97dcf13ca2f2ce3ce4c66de236e6f3f7"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a27c1625aa5fde74a6dec3d424733c579a97dcf13ca2f2ce3ce4c66de236e6f3f7">AST_AF_UNSPEC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00054">netsock2.h:54</a></div></div>
<div class="ttc" id="res__agi_8c_html_acc5c6270557bf6ddf0ddf1952d9c600a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#acc5c6270557bf6ddf0ddf1952d9c600a">AGI_PORT</a></div><div class="ttdeci">#define AGI_PORT</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01407">res_agi.c:1407</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="netsock2_8h_html_a16d4f77ca9af75e4afb60accca62e819"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a16d4f77ca9af75e4afb60accca62e819">ast_connect</a></div><div class="ttdeci">int ast_connect(int sockfd, const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around connect(2) that uses struct ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00595">netsock2.c:595</a></div></div>
<div class="ttc" id="netsock2_8h_html_a8ba6f5b5a9de09137dd18fe2d9592880"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a8ba6f5b5a9de09137dd18fe2d9592880">ast_sockaddr_resolve</a></div><div class="ttdeci">int ast_sockaddr_resolve(struct ast_sockaddr **addrs, const char *str, int flags, int family)</div><div class="ttdoc">Parses a string with an IPv4 or IPv6 address and place results into an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00280">netsock2.c:280</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa23fd9388c9b50f7c6ce209c3c1e4ac4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa23fd9388c9b50f7c6ce209c3c1e4ac4">&#9670;&nbsp;</a></span>launch_script()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a> launch_script </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>script</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>fds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>efd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>opid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02200">2200</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01413">AGI_RESULT_FAILURE</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01417">AGI_RESULT_NOTFOUND</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01414">AGI_RESULT_SUCCESS</a>, <a class="el" href="../../d1/d22/logger_8c_source.html#l00850">ast_child_verbose()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03042">ast_close_fds_above_n()</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00160">ast_config_AST_AGI_DIR</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00151">ast_config_AST_CONFIG_DIR</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00152">ast_config_AST_CONFIG_FILE</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00158">ast_config_AST_DATA_DIR</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00161">ast_config_AST_KEY_DIR</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00159">ast_config_AST_LOG_DIR</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00153">ast_config_AST_MODULE_DIR</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00155">ast_config_AST_MONITOR_DIR</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00162">ast_config_AST_RUN_DIR</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00154">ast_config_AST_SPOOL_DIR</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00157">ast_config_AST_VAR_DIR</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l01009">ast_fd_set_flags</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03047">ast_safe_fork()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01799">ast_set_priority()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01787">launch_asyncagi()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02146">launch_ha_netscript()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02053">launch_netscript()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a1c8b16a3abcb4dc450a0a62b42c554dd">setenv()</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04494">agi_exec_full()</a>.</p>
<div class="fragment"><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;{</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[256];</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;   <span class="keywordtype">int</span> pid, toast[2], fromast[2], audio[2], res;</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;   <span class="keyword">struct </span>stat st;</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;   <span class="keywordflow">if</span> (!strncasecmp(script, <span class="stringliteral">&quot;agi://&quot;</span>, 6)) {</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;      <span class="keywordflow">return</span> (efd == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ? <a class="code" href="../../dd/de9/res__agi_8c.html#a64747d68dc7acc932d0a6657971bedac">launch_netscript</a>(script, argv, fds) : <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;   }</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;   <span class="keywordflow">if</span> (!strncasecmp(script, <span class="stringliteral">&quot;hagi://&quot;</span>, 7)) {</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;      <span class="keywordflow">return</span> (efd == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ? <a class="code" href="../../dd/de9/res__agi_8c.html#a3c51b461f83780e2100cecf7c510d639">launch_ha_netscript</a>(script, argv, fds) : <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;   }</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;   <span class="keywordflow">if</span> (!strncasecmp(script, <span class="stringliteral">&quot;agi:async&quot;</span>, <span class="keyword">sizeof</span>(<span class="stringliteral">&quot;agi:async&quot;</span>) - 1)) {</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#ac6b085612a89ffb1f4be4bfa50d6b518">launch_asyncagi</a>(chan, argc, argv, efd);</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;   }</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;   <span class="keywordflow">if</span> (script[0] != <span class="charliteral">&#39;/&#39;</span>) {</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;      snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;%s/%s&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a9b39aef5b661559fc470307cb315a417">ast_config_AST_AGI_DIR</a>, script);</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;      script = <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;   }</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;   <span class="comment">/* Before even trying let&#39;s see if the file actually exists */</span></div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;   <span class="keywordflow">if</span> (stat(script, &amp;st)) {</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to execute &#39;%s&#39;: File does not exist.\n&quot;</span>, script);</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1ac0f8286bb33122eee66cbe710f3f5ada">AGI_RESULT_NOTFOUND</a>;</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;   }</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;   <span class="keywordflow">if</span> (pipe(toast)) {</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create toast pipe: %s\n&quot;</span>,strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;   }</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;   <span class="keywordflow">if</span> (pipe(fromast)) {</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;unable to create fromast pipe: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;      close(toast[0]);</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;      close(toast[1]);</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;   }</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;   <span class="keywordflow">if</span> (efd) {</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;      <span class="keywordflow">if</span> (pipe(audio)) {</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;unable to create audio pipe: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;         close(fromast[0]);</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;         close(fromast[1]);</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;         close(toast[0]);</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;         close(toast[1]);</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;      }</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;      res = <a class="code" href="../../d5/d60/utils_8h.html#a85392708ff0d7ed6fb86ff83f0e714c3">ast_fd_set_flags</a>(audio[1], O_NONBLOCK);</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;unable to set audio pipe parameters: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;         close(fromast[0]);</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;         close(fromast[1]);</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;         close(toast[0]);</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;         close(toast[1]);</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;         close(audio[0]);</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;         close(audio[1]);</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;      }</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;   }</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;   <span class="keywordflow">if</span> ((pid = <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a7a4c7e208ffc4d11a1918beb0e920ec0">ast_safe_fork</a>(1)) &lt; 0) {</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to fork(): %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;   }</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;   <span class="keywordflow">if</span> (!pid) {</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;      <span class="comment">/* Pass paths to AGI via environmental variables */</span></div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;      <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a1c8b16a3abcb4dc450a0a62b42c554dd">setenv</a>(<span class="stringliteral">&quot;AST_CONFIG_DIR&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a7d3836e5581e433c9f5edd30300cc187">ast_config_AST_CONFIG_DIR</a>, 1);</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;      <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a1c8b16a3abcb4dc450a0a62b42c554dd">setenv</a>(<span class="stringliteral">&quot;AST_CONFIG_FILE&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#adea5f0a0a8720d1dbb47ca434fe78778">ast_config_AST_CONFIG_FILE</a>, 1);</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;      <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a1c8b16a3abcb4dc450a0a62b42c554dd">setenv</a>(<span class="stringliteral">&quot;AST_MODULE_DIR&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a5852d8e3bf5485c09b0f3d2c2375eec3">ast_config_AST_MODULE_DIR</a>, 1);</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;      <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a1c8b16a3abcb4dc450a0a62b42c554dd">setenv</a>(<span class="stringliteral">&quot;AST_SPOOL_DIR&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a95c5b4ffe620dc96d1ea9311b35c4d4f">ast_config_AST_SPOOL_DIR</a>, 1);</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;      <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a1c8b16a3abcb4dc450a0a62b42c554dd">setenv</a>(<span class="stringliteral">&quot;AST_MONITOR_DIR&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#ae8b54021bf362dc04d5783fa3b4b4abd">ast_config_AST_MONITOR_DIR</a>, 1);</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;      <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a1c8b16a3abcb4dc450a0a62b42c554dd">setenv</a>(<span class="stringliteral">&quot;AST_VAR_DIR&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#ab6e1cd3d774ab1b31836a8777d3a812d">ast_config_AST_VAR_DIR</a>, 1);</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;      <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a1c8b16a3abcb4dc450a0a62b42c554dd">setenv</a>(<span class="stringliteral">&quot;AST_DATA_DIR&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a63af4213b5b83f717398d8d62008a50d">ast_config_AST_DATA_DIR</a>, 1);</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;      <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a1c8b16a3abcb4dc450a0a62b42c554dd">setenv</a>(<span class="stringliteral">&quot;AST_LOG_DIR&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#aea5e16ca2517e2093fdfa0e7fd112f0f">ast_config_AST_LOG_DIR</a>, 1);</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;      <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a1c8b16a3abcb4dc450a0a62b42c554dd">setenv</a>(<span class="stringliteral">&quot;AST_AGI_DIR&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a9b39aef5b661559fc470307cb315a417">ast_config_AST_AGI_DIR</a>, 1);</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;      <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a1c8b16a3abcb4dc450a0a62b42c554dd">setenv</a>(<span class="stringliteral">&quot;AST_KEY_DIR&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a0334adace37c0e8de8ea89c8651336a2">ast_config_AST_KEY_DIR</a>, 1);</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;      <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a1c8b16a3abcb4dc450a0a62b42c554dd">setenv</a>(<span class="stringliteral">&quot;AST_RUN_DIR&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a6014e29009d7db30e546a244c2cc95b6">ast_config_AST_RUN_DIR</a>, 1);</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;      <span class="comment">/* Don&#39;t run AGI scripts with realtime priority -- it causes audio stutter */</span></div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;      <a class="code" href="../../db/db2/asterisk_8h.html#ad649acedd512a45c748a440e78a281c9">ast_set_priority</a>(0);</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;      <span class="comment">/* Redirect stdin and out, provide enhanced audio channel if desired */</span></div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;      dup2(fromast[0], STDIN_FILENO);</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;      dup2(toast[1], STDOUT_FILENO);</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;      <span class="keywordflow">if</span> (efd)</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;         dup2(audio[0], STDERR_FILENO + 1);</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;         close(STDERR_FILENO + 1);</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;      <span class="comment">/* Close everything but stdin/out/error */</span></div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#afcbfdd6dfc8c5f0f549b0a5d7e263e97">ast_close_fds_above_n</a>(STDERR_FILENO + 1);</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;      <span class="comment">/* Execute script */</span></div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;      <span class="comment">/* XXX argv should be deprecated in favor of passing agi_argX paramaters */</span></div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;      execv(script, argv);</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;      <span class="comment">/* Can&#39;t use ast_log since FD&#39;s are closed */</span></div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#abe937354501761e17f2d2163d1f8ac87">ast_child_verbose</a>(1, <span class="stringliteral">&quot;Failed to execute &#39;%s&#39;: %s&quot;</span>, script, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;      <span class="comment">/* Special case to set status of AGI to failure */</span></div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;      fprintf(stdout, <span class="stringliteral">&quot;failure\n&quot;</span>);</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;      fflush(stdout);</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;      _exit(1);</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;   }</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Launched AGI Script %s\n&quot;</span>, script);</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;   fds[0] = toast[0];</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;   fds[1] = fromast[1];</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;   <span class="keywordflow">if</span> (efd)</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;      *efd = audio[1];</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;   <span class="comment">/* close what we&#39;re not using in the parent */</span></div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;   close(toast[1]);</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;   close(fromast[0]);</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;   <span class="keywordflow">if</span> (efd)</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;      close(audio[0]);</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;   *opid = pid;</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8">AGI_RESULT_SUCCESS</a>;</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;}</div><div class="ttc" id="paths_8h_html_a0334adace37c0e8de8ea89c8651336a2"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a0334adace37c0e8de8ea89c8651336a2">ast_config_AST_KEY_DIR</a></div><div class="ttdeci">const char * ast_config_AST_KEY_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00161">options.c:161</a></div></div>
<div class="ttc" id="paths_8h_html_a5852d8e3bf5485c09b0f3d2c2375eec3"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a5852d8e3bf5485c09b0f3d2c2375eec3">ast_config_AST_MODULE_DIR</a></div><div class="ttdeci">const char * ast_config_AST_MODULE_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00153">options.c:153</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_afcbfdd6dfc8c5f0f549b0a5d7e263e97"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#afcbfdd6dfc8c5f0f549b0a5d7e263e97">ast_close_fds_above_n</a></div><div class="ttdeci">void ast_close_fds_above_n(int n)</div><div class="ttdoc">Common routine for child processes, to close all fds prior to exec(2) </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l03042">main/app.c:3042</a></div></div>
<div class="ttc" id="res__agi_8c_html_ac6b085612a89ffb1f4be4bfa50d6b518"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#ac6b085612a89ffb1f4be4bfa50d6b518">launch_asyncagi</a></div><div class="ttdeci">static enum agi_result launch_asyncagi(struct ast_channel *chan, int argc, char *argv[], int *efd)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01787">res_agi.c:1787</a></div></div>
<div class="ttc" id="paths_8h_html_a6014e29009d7db30e546a244c2cc95b6"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a6014e29009d7db30e546a244c2cc95b6">ast_config_AST_RUN_DIR</a></div><div class="ttdeci">const char * ast_config_AST_RUN_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00162">options.c:162</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="logger_8h_html_abe937354501761e17f2d2163d1f8ac87"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#abe937354501761e17f2d2163d1f8ac87">ast_child_verbose</a></div><div class="ttdeci">void ast_child_verbose(int level, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/logger_8c_source.html#l00850">logger.c:850</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1ac0f8286bb33122eee66cbe710f3f5ada"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1ac0f8286bb33122eee66cbe710f3f5ada">AGI_RESULT_NOTFOUND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01417">res_agi.c:1417</a></div></div>
<div class="ttc" id="paths_8h_html_adea5f0a0a8720d1dbb47ca434fe78778"><div class="ttname"><a href="../../dd/df2/paths_8h.html#adea5f0a0a8720d1dbb47ca434fe78778">ast_config_AST_CONFIG_FILE</a></div><div class="ttdeci">const char * ast_config_AST_CONFIG_FILE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00152">options.c:152</a></div></div>
<div class="ttc" id="utils_8h_html_a85392708ff0d7ed6fb86ff83f0e714c3"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a85392708ff0d7ed6fb86ff83f0e714c3">ast_fd_set_flags</a></div><div class="ttdeci">#define ast_fd_set_flags(fd, flags)</div><div class="ttdoc">Set flags on the given file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l01009">utils.h:1009</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="paths_8h_html_a9b39aef5b661559fc470307cb315a417"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a9b39aef5b661559fc470307cb315a417">ast_config_AST_AGI_DIR</a></div><div class="ttdeci">const char * ast_config_AST_AGI_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00160">options.c:160</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01413">res_agi.c:1413</a></div></div>
<div class="ttc" id="asterisk_8h_html_ad649acedd512a45c748a440e78a281c9"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#ad649acedd512a45c748a440e78a281c9">ast_set_priority</a></div><div class="ttdeci">int ast_set_priority(int)</div><div class="ttdoc">We set ourselves to a high priority, that we might pre-empt everything else. If your PBX has heavy ac...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01799">asterisk.c:1799</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8">AGI_RESULT_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01414">res_agi.c:1414</a></div></div>
<div class="ttc" id="paths_8h_html_a63af4213b5b83f717398d8d62008a50d"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a63af4213b5b83f717398d8d62008a50d">ast_config_AST_DATA_DIR</a></div><div class="ttdeci">const char * ast_config_AST_DATA_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00158">options.c:158</a></div></div>
<div class="ttc" id="res__agi_8c_html_a3c51b461f83780e2100cecf7c510d639"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a3c51b461f83780e2100cecf7c510d639">launch_ha_netscript</a></div><div class="ttdeci">static enum agi_result launch_ha_netscript(char *agiurl, char *argv[], int *fds)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l02146">res_agi.c:2146</a></div></div>
<div class="ttc" id="paths_8h_html_a7d3836e5581e433c9f5edd30300cc187"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a7d3836e5581e433c9f5edd30300cc187">ast_config_AST_CONFIG_DIR</a></div><div class="ttdeci">const char * ast_config_AST_CONFIG_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00151">options.c:151</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a7a4c7e208ffc4d11a1918beb0e920ec0"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a7a4c7e208ffc4d11a1918beb0e920ec0">ast_safe_fork</a></div><div class="ttdeci">int ast_safe_fork(int stop_reaper)</div><div class="ttdoc">Common routine to safely fork without a chance of a signal handler firing badly in the child...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l03047">main/app.c:3047</a></div></div>
<div class="ttc" id="paths_8h_html_aea5e16ca2517e2093fdfa0e7fd112f0f"><div class="ttname"><a href="../../dd/df2/paths_8h.html#aea5e16ca2517e2093fdfa0e7fd112f0f">ast_config_AST_LOG_DIR</a></div><div class="ttdeci">const char * ast_config_AST_LOG_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00159">options.c:159</a></div></div>
<div class="ttc" id="paths_8h_html_ae8b54021bf362dc04d5783fa3b4b4abd"><div class="ttname"><a href="../../dd/df2/paths_8h.html#ae8b54021bf362dc04d5783fa3b4b4abd">ast_config_AST_MONITOR_DIR</a></div><div class="ttdeci">const char * ast_config_AST_MONITOR_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00155">options.c:155</a></div></div>
<div class="ttc" id="paths_8h_html_a95c5b4ffe620dc96d1ea9311b35c4d4f"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a95c5b4ffe620dc96d1ea9311b35c4d4f">ast_config_AST_SPOOL_DIR</a></div><div class="ttdeci">const char * ast_config_AST_SPOOL_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00154">options.c:154</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a1c8b16a3abcb4dc450a0a62b42c554dd"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a1c8b16a3abcb4dc450a0a62b42c554dd">setenv</a></div><div class="ttdeci">int setenv(const char *name, const char *value, int overwrite)</div></div>
<div class="ttc" id="paths_8h_html_ab6e1cd3d774ab1b31836a8777d3a812d"><div class="ttname"><a href="../../dd/df2/paths_8h.html#ab6e1cd3d774ab1b31836a8777d3a812d">ast_config_AST_VAR_DIR</a></div><div class="ttdeci">const char * ast_config_AST_VAR_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00157">options.c:157</a></div></div>
<div class="ttc" id="res__agi_8c_html_a64747d68dc7acc932d0a6657971bedac"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a64747d68dc7acc932d0a6657971bedac">launch_netscript</a></div><div class="ttdeci">static enum agi_result launch_netscript(char *agiurl, char *argv[], int *fds)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l02053">res_agi.c:2053</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04682">4682</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01709">action_add_agi_cmd()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04561">agi_exec()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01394">app</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03863">ast_agi_register_multiple()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00265">ast_cli_register_multiple</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00186">ast_manager_register_xml</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00316">AST_MODFLAG_GLOBAL_SYMBOLS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00317">AST_MODFLAG_LOAD_ORDER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00328">AST_MODPRI_APP_DEPEND</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00121">AST_MODULE_SUPPORT_CORE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00626">ast_register_application_xml</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00127">AST_TEST_REGISTER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04611">deadagi_exec()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01398">deadapp</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04569">eagi_exec()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01396">eapp</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00084">EVENT_FLAG_AGI</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00342">ast_module_info::self</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l01501">STASIS_MESSAGE_TYPE_INIT</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04664">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;{</div><div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;   <span class="keywordtype">int</span> err = 0;</div><div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;</div><div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;   err |= <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(agi_exec_start_type);</div><div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;   err |= <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(agi_exec_end_type);</div><div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;   err |= <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(agi_async_start_type);</div><div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;   err |= <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(agi_async_exec_type);</div><div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;   err |= <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(agi_async_end_type);</div><div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;</div><div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;   err |= <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(<a class="code" href="../../dd/de9/res__agi_8c.html#a11397b735518c6d8ecf8d046cb627d92">cli_agi</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dd/de9/res__agi_8c.html#a11397b735518c6d8ecf8d046cb627d92">cli_agi</a>));</div><div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;   err |= <a class="code" href="../../dd/de9/res__agi_8c.html#ae0bde1af9d469a32161ab8f45857592a">ast_agi_register_multiple</a>(<a class="code" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>-&gt;<a class="code" href="../../dd/d5f/structast__module__info.html#a1aff0615d43e1dfa5c72c1c7d1c6d709">self</a>, <a class="code" href="../../dd/de9/res__agi_8c.html#aaaa94f6da87a703160a7acb2fd67422d">commands</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dd/de9/res__agi_8c.html#aaaa94f6da87a703160a7acb2fd67422d">commands</a>));</div><div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;   err |= <a class="code" href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a>(<a class="code" href="../../dd/de9/res__agi_8c.html#a88932dc53060370d87a1bed5af51d968">deadapp</a>, <a class="code" href="../../dd/de9/res__agi_8c.html#af64d7541f1e306713302a091faccdf6f">deadagi_exec</a>);</div><div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;   err |= <a class="code" href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a>(<a class="code" href="../../dd/de9/res__agi_8c.html#a04c472070a5f7bb59a453e5243bbcd8d">eapp</a>, <a class="code" href="../../dd/de9/res__agi_8c.html#a5ca1f7eb610de13f31b7db49bd40efc3">eagi_exec</a>);</div><div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;   err |= <a class="code" href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a>(<span class="stringliteral">&quot;AGI&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#ac7370fe764f1305cdb3c543d3964d5ed">EVENT_FLAG_AGI</a>, <a class="code" href="../../dd/de9/res__agi_8c.html#aa22a76ef4f33c70bc5f7099136a30727">action_add_agi_cmd</a>);</div><div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;   err |= <a class="code" href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a>(<a class="code" href="../../dd/de9/res__agi_8c.html#a9e5f57131367eff409b9e0bd7b31aa1a">app</a>, <a class="code" href="../../dd/de9/res__agi_8c.html#a93f9c23e24eadb9e9d9e0c44597d15dd">agi_exec</a>);</div><div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;</div><div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(test_agi_null_docs);</div><div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;</div><div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;   <span class="keywordflow">if</span> (err) {</div><div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>();</div><div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;   }</div><div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;</div><div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="stasis_8h_html_a70cd046d8e3fd50de5c51aecb2830d2a"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a></div><div class="ttdeci">#define STASIS_MESSAGE_TYPE_INIT(name)</div><div class="ttdoc">Boiler-plate messaging macro for initializing message types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01501">stasis.h:1501</a></div></div>
<div class="ttc" id="structast__module__info_html"><div class="ttname"><a href="../../dd/d5f/structast__module__info.html">ast_module_info</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00336">module.h:336</a></div></div>
<div class="ttc" id="test_8h_html_a34f64a69c09d98ceb693b077efd7ef97"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a></div><div class="ttdeci">#define AST_TEST_REGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00127">test.h:127</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="res__agi_8c_html_a88932dc53060370d87a1bed5af51d968"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a88932dc53060370d87a1bed5af51d968">deadapp</a></div><div class="ttdeci">static char * deadapp</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01398">res_agi.c:1398</a></div></div>
<div class="ttc" id="res__agi_8c_html_a5ca1f7eb610de13f31b7db49bd40efc3"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a5ca1f7eb610de13f31b7db49bd40efc3">eagi_exec</a></div><div class="ttdeci">static int eagi_exec(struct ast_channel *chan, const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l04569">res_agi.c:4569</a></div></div>
<div class="ttc" id="res__agi_8c_html_aa22a76ef4f33c70bc5f7099136a30727"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#aa22a76ef4f33c70bc5f7099136a30727">action_add_agi_cmd</a></div><div class="ttdeci">static int action_add_agi_cmd(struct mansession *s, const struct message *m)</div><div class="ttdoc">Add a new command to execute by the Async AGI application. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01709">res_agi.c:1709</a></div></div>
<div class="ttc" id="res__agi_8c_html_a93f9c23e24eadb9e9d9e0c44597d15dd"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a93f9c23e24eadb9e9d9e0c44597d15dd">agi_exec</a></div><div class="ttdeci">static int agi_exec(struct ast_channel *chan, const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l04561">res_agi.c:4561</a></div></div>
<div class="ttc" id="structast__module__info_html_a1aff0615d43e1dfa5c72c1c7d1c6d709"><div class="ttname"><a href="../../dd/d5f/structast__module__info.html#a1aff0615d43e1dfa5c72c1c7d1c6d709">ast_module_info::self</a></div><div class="ttdeci">struct ast_module * self</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00342">module.h:342</a></div></div>
<div class="ttc" id="res__agi_8c_html_aaaa94f6da87a703160a7acb2fd67422d"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#aaaa94f6da87a703160a7acb2fd67422d">commands</a></div><div class="ttdeci">static struct agi_command commands[]</div><div class="ttdoc">AGI commands list. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l03706">res_agi.c:3706</a></div></div>
<div class="ttc" id="res__agi_8c_html_a11397b735518c6d8ecf8d046cb627d92"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a11397b735518c6d8ecf8d046cb627d92">cli_agi</a></div><div class="ttdeci">static struct ast_cli_entry cli_agi[]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l04617">res_agi.c:4617</a></div></div>
<div class="ttc" id="manager_8h_html_ac7370fe764f1305cdb3c543d3964d5ed"><div class="ttname"><a href="../../db/d45/manager_8h.html#ac7370fe764f1305cdb3c543d3964d5ed">EVENT_FLAG_AGI</a></div><div class="ttdeci">#define EVENT_FLAG_AGI</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00084">manager.h:84</a></div></div>
<div class="ttc" id="res__agi_8c_html_ae0bde1af9d469a32161ab8f45857592a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#ae0bde1af9d469a32161ab8f45857592a">ast_agi_register_multiple</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_register_multiple(struct ast_module *mod, struct agi_command *cmd, unsigned int len)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l03863">res_agi.c:3863</a></div></div>
<div class="ttc" id="res__agi_8c_html_a9e5f57131367eff409b9e0bd7b31aa1a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a9e5f57131367eff409b9e0bd7b31aa1a">app</a></div><div class="ttdeci">static char * app</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01394">res_agi.c:1394</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="res__agi_8c_html_a04c472070a5f7bb59a453e5243bbcd8d"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a04c472070a5f7bb59a453e5243bbcd8d">eapp</a></div><div class="ttdeci">static char * eapp</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01396">res_agi.c:1396</a></div></div>
<div class="ttc" id="res__agi_8c_html_af64d7541f1e306713302a091faccdf6f"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#af64d7541f1e306713302a091faccdf6f">deadagi_exec</a></div><div class="ttdeci">static int deadagi_exec(struct ast_channel *chan, const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l04611">res_agi.c:4611</a></div></div>
<div class="ttc" id="manager_8h_html_a5b63b8a8faede2d852e071e1f7b31c11"><div class="ttname"><a href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a></div><div class="ttdeci">#define ast_manager_register_xml(action, authority, func)</div><div class="ttdoc">Register a manager callback using XML documentation to describe the manager. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00186">manager.h:186</a></div></div>
<div class="ttc" id="res__agi_8c_html_ad09fa931f468002152a3cc2d5ce25eae"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a></div><div class="ttdeci">static int unload_module(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l04664">res_agi.c:4664</a></div></div>
<div class="ttc" id="module_8h_html_afba4eb7a910b10969041ae4cd488729d"><div class="ttname"><a href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a></div><div class="ttdeci">#define ast_register_application_xml(app, execute)</div><div class="ttdoc">Register an application using XML documentation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00626">module.h:626</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0feb6a676d8f22a35d95b9b851e1e3a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0feb6a676d8f22a35d95b9b851e1e3a6">&#9670;&nbsp;</a></span>parse_args()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int parse_args </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03947">3947</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01388">MAX_ARGS</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04021">agi_handle_command()</a>.</p>
<div class="fragment"><div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;{</div><div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;   <span class="keywordtype">int</span> x = 0, quoted = 0, escaped = 0, whitespace = 1;</div><div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;   <span class="keywordtype">char</span> *cur;</div><div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;</div><div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;   cur = s;</div><div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;   <span class="keywordflow">while</span>(*s) {</div><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;      <span class="keywordflow">switch</span>(*s) {</div><div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;&quot;&#39;</span>:</div><div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;         <span class="comment">/* If it&#39;s escaped, put a literal quote */</span></div><div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;         <span class="keywordflow">if</span> (escaped)</div><div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;            <span class="keywordflow">goto</span> normal;</div><div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;            quoted = !quoted;</div><div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;         <span class="keywordflow">if</span> (quoted &amp;&amp; whitespace) {</div><div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;            <span class="comment">/* If we&#39;re starting a quote, coming off white space start a new word, too */</span></div><div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;            argv[x++] = cur;</div><div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;            whitespace=0;</div><div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;         }</div><div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;         escaped = 0;</div><div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39; &#39;</span>:</div><div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;\t&#39;</span>:</div><div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;         <span class="keywordflow">if</span> (!quoted &amp;&amp; !escaped) {</div><div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;            <span class="comment">/* If we&#39;re not quoted, mark this as whitespace, and</span></div><div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;<span class="comment">               end the previous argument */</span></div><div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;            whitespace = 1;</div><div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;            *(cur++) = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;         } <span class="keywordflow">else</span></div><div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;            <span class="comment">/* Otherwise, just treat it as anything else */</span></div><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;            <span class="keywordflow">goto</span> normal;</div><div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;\\&#39;</span>:</div><div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;         <span class="comment">/* If we&#39;re escaped, print a literal, otherwise enable escaping */</span></div><div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;         <span class="keywordflow">if</span> (escaped) {</div><div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;            <span class="keywordflow">goto</span> normal;</div><div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;            escaped=1;</div><div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;         }</div><div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;normal:</div><div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;         <span class="keywordflow">if</span> (whitespace) {</div><div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;            <span class="keywordflow">if</span> (x &gt;= <a class="code" href="../../dd/de9/res__agi_8c.html#a29b7451465deac204c5f7cb1f9c6e1fc">MAX_ARGS</a> -1) {</div><div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Too many arguments, truncating\n&quot;</span>);</div><div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;            }</div><div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;            <span class="comment">/* Coming off of whitespace, start the next argument */</span></div><div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;            argv[x++] = cur;</div><div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;            whitespace=0;</div><div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;         }</div><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;         *(cur++) = *s;</div><div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;         escaped=0;</div><div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;      }</div><div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;      s++;</div><div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;   }</div><div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;   <span class="comment">/* Null terminate */</span></div><div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;   *(cur++) = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;   argv[x] = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;   *<a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> = x;</div><div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__agi_8c_html_a29b7451465deac204c5f7cb1f9c6e1fc"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a29b7451465deac204c5f7cb1f9c6e1fc">MAX_ARGS</a></div><div class="ttdeci">#define MAX_ARGS</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01388">res_agi.c:1388</a></div></div>
<div class="ttc" id="f2c_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00198">f2c.h:198</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abfcc084fb5283b70e7eb6498a6bd6ed3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfcc084fb5283b70e7eb6498a6bd6ed3">&#9670;&nbsp;</a></span>publish_async_exec_end()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void publish_async_exec_end </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>command_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>result_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04010">4010</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01120">ast_channel_publish_cached_blob()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00591">ast_json_pack()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04021">agi_handle_command()</a>.</p>
<div class="fragment"><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;{</div><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, blob, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;   blob = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: i, s: s, s: i, s: s}&quot;</span>,</div><div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;              <span class="stringliteral">&quot;CommandId&quot;</span>, command_id,</div><div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;              <span class="stringliteral">&quot;Command&quot;</span>, command,</div><div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;              <span class="stringliteral">&quot;ResultCode&quot;</span>, result_code,</div><div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;              <span class="stringliteral">&quot;Result&quot;</span>, <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>);</div><div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga565fc39c360b014dd5d4054fa72bbae8">ast_channel_publish_cached_blob</a>(chan, agi_exec_end_type(), blob);</div><div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;}</div><div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga565fc39c360b014dd5d4054fa72bbae8"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga565fc39c360b014dd5d4054fa72bbae8">ast_channel_publish_cached_blob</a></div><div class="ttdeci">void ast_channel_publish_cached_blob(struct ast_channel *chan, struct stasis_message_type *type, struct ast_json *blob)</div><div class="ttdoc">Publish a channel blob message using the latest snapshot from the cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01120">stasis_channels.c:1120</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a85e832090276a7a7c018400e2f70c853"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85e832090276a7a7c018400e2f70c853">&#9670;&nbsp;</a></span>run_agi()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a> run_agi </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a> *&#160;</td>
          <td class="paramname"><em>agi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dead</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Running in an interception routine is like DeadAGI mode. No touchy the channel frames. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04112">4112</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01391">AGI_BUF_LEN</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04021">agi_handle_command()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01390">AGI_NANDFS_RETRY</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01413">AGI_RESULT_FAILURE</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01418">AGI_RESULT_HANGUP</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01414">AGI_RESULT_SUCCESS</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01400">agidebug</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10430">ast_channel_get_intercept_mode()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00445">ast_check_hangup()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01968">ast_false()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04302">ast_read()</a>, <a class="el" href="../../db/d2a/res__speech_8c_source.html#l00240">ast_speech_destroy()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01951">ast_true()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02207">ast_verbose()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02997">ast_waitfor_nandfds()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00036">agi_state::audio</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00037">agi_state::ctrl</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00038">agi_state::fast</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00035">agi_state::fd</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_builtin_getvar_helper()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02318">setup_env()</a>, and <a class="el" href="../../dc/d2b/agi_8h_source.html#l00039">agi_state::speech</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04494">agi_exec_full()</a>.</p>
<div class="fragment"><div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;{</div><div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;   <span class="keywordtype">int</span> outfd;</div><div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;   <span class="keywordtype">int</span> ms;</div><div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;   <span class="keywordtype">int</span> needhup = 0;</div><div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a> returnstatus = <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8">AGI_RESULT_SUCCESS</a>;</div><div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[<a class="code" href="../../dd/de9/res__agi_8c.html#acac9c67d43a9e0d04c732fc06665f6dd">AGI_BUF_LEN</a>];</div><div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;   <span class="keywordtype">char</span> *res = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;   FILE *readf;</div><div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;   <span class="comment">/* how many times we&#39;ll retry if ast_waitfor_nandfs will return without either</span></div><div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;<span class="comment">     channel or file descriptor in case select is interrupted by a system call (EINTR) */</span></div><div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;   <span class="keywordtype">int</span> retry = <a class="code" href="../../dd/de9/res__agi_8c.html#aafc38adf75f284d5cf7e6f11a55bb29f">AGI_NANDFS_RETRY</a>;</div><div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;   <span class="keywordtype">int</span> send_sighup;</div><div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *sighup_str;</div><div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *exit_on_hangup_str;</div><div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;   <span class="keywordtype">int</span> exit_on_hangup;<span class="comment"></span></div><div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;<span class="comment">   /*! Running in an interception routine is like DeadAGI mode.  No touchy the channel frames. */</span></div><div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;   <span class="keywordtype">int</span> in_intercept = <a class="code" href="../../d5/d7b/channel_8h.html#a65b548fdac14462497431eb07bc45d63">ast_channel_get_intercept_mode</a>();</div><div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;</div><div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;   sighup_str = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;AGISIGHUP&quot;</span>);</div><div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;   send_sighup = !<a class="code" href="../../d6/d90/strings_8h.html#a6c3dc0bad204e9dd9890325c1c861e38">ast_false</a>(sighup_str);</div><div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;   exit_on_hangup_str = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;AGIEXITONHANGUP&quot;</span>);</div><div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;   exit_on_hangup = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(exit_on_hangup_str);</div><div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;</div><div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;   <span class="keywordflow">if</span> (!(readf = fdopen(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">ctrl</a>, <span class="stringliteral">&quot;r&quot;</span>))) {</div><div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to fdopen file descriptor\n&quot;</span>);</div><div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;      <span class="keywordflow">if</span> (send_sighup &amp;&amp; pid &gt; -1)</div><div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;         kill(pid, SIGHUP);</div><div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;      close(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">ctrl</a>);</div><div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;   }</div><div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;</div><div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;   setlinebuf(readf);</div><div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#a1a91f6f01be62db91c4a91250f3d513d">setup_env</a>(chan, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a>, agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, (agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a220009426c8518be4b294a02b1194906">audio</a> &gt; -1), argc, argv);</div><div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;      <span class="keywordflow">if</span> (needhup) {</div><div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;         needhup = 0;</div><div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;         dead = 1;</div><div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;         <span class="keywordflow">if</span> (send_sighup) {</div><div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;            <span class="keywordflow">if</span> (pid &gt; -1) {</div><div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;               kill(pid, SIGHUP);</div><div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#aa9106f15c17bda42c4e5dc9e0fd96572">fast</a>) {</div><div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;               <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;HANGUP\n&quot;</span>);</div><div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;            }</div><div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;         }</div><div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;         <span class="keywordflow">if</span> (exit_on_hangup) {</div><div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;         }</div><div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;      }</div><div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;      ms = -1;</div><div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;      <span class="keywordflow">if</span> (dead || in_intercept) {</div><div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;         c = <a class="code" href="../../d5/d7b/channel_8h.html#a5e62602ca9e229304f60ab5c2b32e13b">ast_waitfor_nandfds</a>(&amp;chan, 0, &amp;agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">ctrl</a>, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;outfd, &amp;ms);</div><div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan)) {</div><div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;         c = <a class="code" href="../../d5/d7b/channel_8h.html#a5e62602ca9e229304f60ab5c2b32e13b">ast_waitfor_nandfds</a>(&amp;chan, 1, &amp;agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">ctrl</a>, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;outfd, &amp;ms);</div><div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;<span class="comment">          * Read the channel control queue until it is dry so we can</span></div><div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;<span class="comment">          * switch to dead mode.</span></div><div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;         c = chan;</div><div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;      }</div><div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;      <span class="keywordflow">if</span> (c) {</div><div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;         retry = <a class="code" href="../../dd/de9/res__agi_8c.html#aafc38adf75f284d5cf7e6f11a55bb29f">AGI_NANDFS_RETRY</a>;</div><div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;         <span class="comment">/* Idle the channel until we get a command */</span></div><div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;         f = <a class="code" href="../../d5/d7b/channel_8h.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a>(c);</div><div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;         <span class="keywordflow">if</span> (!f) {</div><div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;%s hungup\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;            needhup = 1;</div><div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;            <span class="keywordflow">if</span> (!returnstatus) {</div><div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;               returnstatus = <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a3efef4607e59ada98318f948f398d8fe">AGI_RESULT_HANGUP</a>;</div><div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;            }</div><div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;            <span class="comment">/* If it&#39;s voice, write it to the audio pipe */</span></div><div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;            <span class="keywordflow">if</span> ((agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a220009426c8518be4b294a02b1194906">audio</a> &gt; -1) &amp;&amp; (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>)) {</div><div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;               <span class="comment">/* Write, ignoring errors */</span></div><div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;               <span class="keywordflow">if</span> (write(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a220009426c8518be4b294a02b1194906">audio</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>) &lt; 0) {</div><div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;               }</div><div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;            }</div><div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;         }</div><div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (outfd &gt; -1) {</div><div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;         <span class="keywordtype">size_t</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = <span class="keyword">sizeof</span>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>);</div><div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;         <span class="keywordtype">size_t</span> buflen = 0;</div><div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;         <span class="keyword">enum</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a> cmd_status;</div><div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;</div><div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;         retry = <a class="code" href="../../dd/de9/res__agi_8c.html#aafc38adf75f284d5cf7e6f11a55bb29f">AGI_NANDFS_RETRY</a>;</div><div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;         buf[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;</div><div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;         <span class="keywordflow">while</span> (len &gt; 1) {</div><div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;            res = fgets(buf + buflen, len, readf);</div><div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;            <span class="keywordflow">if</span> (feof(readf))</div><div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;            <span class="keywordflow">if</span> (ferror(readf) &amp;&amp; ((<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EINTR) &amp;&amp; (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EAGAIN)))</div><div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;            <span class="keywordflow">if</span> (res != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; !agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#aa9106f15c17bda42c4e5dc9e0fd96572">fast</a>)</div><div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;            buflen = strlen(buf);</div><div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;            <span class="keywordflow">if</span> (buflen &amp;&amp; buf[buflen - 1] == <span class="charliteral">&#39;\n&#39;</span>)</div><div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;            len = <span class="keyword">sizeof</span>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>) - buflen;</div><div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dd/de9/res__agi_8c.html#a9e4d6534e259785ec604fa072e049325">agidebug</a>)</div><div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;               <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;AGI Rx &lt;&lt; temp buffer %s - errno %s\nNo \\n received, checking again.\n&quot;</span>, buf, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;         }</div><div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;</div><div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;         <span class="keywordflow">if</span> (!buf[0]) {</div><div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;            <span class="comment">/* Program terminated */</span></div><div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;&lt;%s&gt;AGI Script %s completed, returning %d\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a>, returnstatus);</div><div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;            <span class="keywordflow">if</span> (pid &gt; 0)</div><div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;               waitpid(pid, <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>, 0);</div><div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;            <span class="comment">/* No need to kill the pid anymore, since they closed us */</span></div><div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;            pid = -1;</div><div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;         }</div><div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;</div><div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;         <span class="comment">/* Special case for inability to execute child process */</span></div><div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;         <span class="keywordflow">if</span> (*buf &amp;&amp; strncasecmp(buf, <span class="stringliteral">&quot;failure&quot;</span>, 7) == 0) {</div><div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;            returnstatus = <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;         }</div><div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;</div><div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;         <span class="comment">/* get rid of trailing newline, if any */</span></div><div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;         buflen = strlen(buf);</div><div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;         <span class="keywordflow">if</span> (buflen &amp;&amp; buf[buflen - 1] == <span class="charliteral">&#39;\n&#39;</span>) {</div><div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;            buf[buflen - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;         }</div><div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;</div><div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dd/de9/res__agi_8c.html#a9e4d6534e259785ec604fa072e049325">agidebug</a>)</div><div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;            <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;&lt;%s&gt;AGI Rx &lt;&lt; %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), buf);</div><div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;         cmd_status = <a class="code" href="../../dd/de9/res__agi_8c.html#ada0f44d1c6c2dbd51b7e81aae69399d3">agi_handle_command</a>(chan, agi, buf, dead || in_intercept);</div><div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;         <span class="keywordflow">switch</span> (cmd_status) {</div><div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>:</div><div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;            <span class="keywordflow">if</span> (dead || in_intercept || !<a class="code" href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan)) {</div><div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;               <span class="comment">/* The failure was not because of a hangup. */</span></div><div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;               returnstatus = <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;            }</div><div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;         }</div><div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;         <span class="keywordflow">if</span> (--retry &lt;= 0) {</div><div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No channel, no fd?\n&quot;</span>);</div><div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;            returnstatus = <a class="code" href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a>;</div><div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;         }</div><div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;      }</div><div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;   }</div><div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;</div><div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;   <span class="keywordflow">if</span> (agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">speech</a>) {</div><div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;      <a class="code" href="../../d6/dd7/speech_8h.html#a7ebc9d3250a75a2cb7ee2f7c15eb8228">ast_speech_destroy</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">speech</a>);</div><div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;   }</div><div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;   <span class="comment">/* Notify process */</span></div><div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;   <span class="keywordflow">if</span> (send_sighup) {</div><div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;      <span class="keywordflow">if</span> (pid &gt; -1) {</div><div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;         <span class="keywordflow">if</span> (kill(pid, SIGHUP)) {</div><div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;unable to send SIGHUP to AGI process %d: %s\n&quot;</span>, pid, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;         } <span class="keywordflow">else</span> { <span class="comment">/* Give the process a chance to die */</span></div><div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;            usleep(1);</div><div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;         }</div><div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;         waitpid(pid, <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>, WNOHANG);</div><div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#aa9106f15c17bda42c4e5dc9e0fd96572">fast</a>) {</div><div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;         <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(agi-&gt;<a class="code" href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, chan, <span class="stringliteral">&quot;HANGUP\n&quot;</span>);</div><div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;      }</div><div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;   }</div><div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;   fclose(readf);</div><div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;   <span class="keywordflow">return</span> returnstatus;</div><div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;}</div><div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1a3efef4607e59ada98318f948f398d8fe"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a3efef4607e59ada98318f948f398d8fe">AGI_RESULT_HANGUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01418">res_agi.c:1418</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1">agi_result</a></div><div class="ttdeci">agi_result</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01412">res_agi.c:1412</a></div></div>
<div class="ttc" id="speech_8h_html_a7ebc9d3250a75a2cb7ee2f7c15eb8228"><div class="ttname"><a href="../../d6/dd7/speech_8h.html#a7ebc9d3250a75a2cb7ee2f7c15eb8228">ast_speech_destroy</a></div><div class="ttdeci">int ast_speech_destroy(struct ast_speech *speech)</div><div class="ttdoc">Destroy a speech structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2a/res__speech_8c_source.html#l00240">res_speech.c:240</a></div></div>
<div class="ttc" id="res__agi_8c_html_a9e4d6534e259785ec604fa072e049325"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a9e4d6534e259785ec604fa072e049325">agidebug</a></div><div class="ttdeci">static int agidebug</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01400">res_agi.c:1400</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="res__agi_8c_html_aafc38adf75f284d5cf7e6f11a55bb29f"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#aafc38adf75f284d5cf7e6f11a55bb29f">AGI_NANDFS_RETRY</a></div><div class="ttdeci">#define AGI_NANDFS_RETRY</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01390">res_agi.c:1390</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="channel_8h_html_a7ef6737309dc9e8b6c4a7cb4800638b1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a></div><div class="ttdeci">struct ast_frame * ast_read(struct ast_channel *chan)</div><div class="ttdoc">Reads a frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04302">channel.c:4302</a></div></div>
<div class="ttc" id="structagi__state_html_a0f787778e7019ca3a8bdf0bd17b9efca"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a0f787778e7019ca3a8bdf0bd17b9efca">agi_state::ctrl</a></div><div class="ttdeci">int ctrl</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00037">agi.h:37</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="extconf_8c_html_a81d26348827b996085d4cb6be3e2c348"><div class="ttname"><a href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a></div><div class="ttdeci">void ast_verbose(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02207">extconf.c:2207</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="channel_8h_html_a5e62602ca9e229304f60ab5c2b32e13b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a5e62602ca9e229304f60ab5c2b32e13b">ast_waitfor_nandfds</a></div><div class="ttdeci">struct ast_channel * ast_waitfor_nandfds(struct ast_channel **chan, int n, int *fds, int nfds, int *exception, int *outfd, int *ms)</div><div class="ttdoc">Waits for activity on a group of channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02997">channel.c:2997</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="pbx_8h_html_a98c5425b90ec7c5e136a40f529170b1b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a></div><div class="ttdeci">const char * pbx_builtin_getvar_helper(struct ast_channel *chan, const char *name)</div><div class="ttdoc">Return a pointer to the value of the corresponding channel variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_variables.c:1000</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__agi_8c_html_a1a91f6f01be62db91c4a91250f3d513d"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a1a91f6f01be62db91c4a91250f3d513d">setup_env</a></div><div class="ttdeci">static void setup_env(struct ast_channel *chan, char *request, int fd, int enhanced, int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l02318">res_agi.c:2318</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a903160b240379ada59c275690cddd8af">AGI_RESULT_FAILURE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01413">res_agi.c:1413</a></div></div>
<div class="ttc" id="channel_8h_html_a9c63fff1d736568d1ee332dd7ea502bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a></div><div class="ttdeci">int ast_check_hangup(struct ast_channel *chan)</div><div class="ttdoc">Check to see if a channel is needing hang up. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00445">channel.c:445</a></div></div>
<div class="ttc" id="res__agi_8c_html_abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#abf2ce6b2eb38d1067cfda4f19081f5b1a493daf1d6c06bbf4b17b36929cc51fd8">AGI_RESULT_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01414">res_agi.c:1414</a></div></div>
<div class="ttc" id="strings_8h_html_a387a69b3871ca31061566a73f45d20f4"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a></div><div class="ttdeci">int attribute_pure ast_true(const char *val)</div><div class="ttdoc">Make sure something is true. Determine if a string containing a boolean value is &quot;true&quot;. This function checks to see whether a string passed to it is an indication of an &quot;true&quot; value. It checks to see if the string is &quot;yes&quot;, &quot;true&quot;, &quot;y&quot;, &quot;t&quot;, &quot;on&quot; or &quot;1&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01951">main/utils.c:1951</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="structagi__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a6f8059414f0228f0256115e024eeed4b">agi_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00035">agi.h:35</a></div></div>
<div class="ttc" id="structagi__state_html_ada1cd33a25b7c7dfc19466d2bfc2645d"><div class="ttname"><a href="../../d1/db7/structagi__state.html#ada1cd33a25b7c7dfc19466d2bfc2645d">agi_state::speech</a></div><div class="ttdeci">struct ast_speech * speech</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00039">agi.h:39</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structagi__state_html_a220009426c8518be4b294a02b1194906"><div class="ttname"><a href="../../d1/db7/structagi__state.html#a220009426c8518be4b294a02b1194906">agi_state::audio</a></div><div class="ttdeci">int audio</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00036">agi.h:36</a></div></div>
<div class="ttc" id="res__agi_8c_html_ada0f44d1c6c2dbd51b7e81aae69399d3"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#ada0f44d1c6c2dbd51b7e81aae69399d3">agi_handle_command</a></div><div class="ttdeci">static enum agi_result agi_handle_command(struct ast_channel *chan, AGI *agi, char *buf, int dead)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l04021">res_agi.c:4021</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a4e2e6fb7d874f0d2deddd2ecfc8afb32"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a></div><div class="ttdeci">static int request(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02559">chan_pjsip.c:2559</a></div></div>
<div class="ttc" id="structagi__state_html_aa9106f15c17bda42c4e5dc9e0fd96572"><div class="ttname"><a href="../../d1/db7/structagi__state.html#aa9106f15c17bda42c4e5dc9e0fd96572">agi_state::fast</a></div><div class="ttdeci">unsigned int fast</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00038">agi.h:38</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="strings_8h_html_a6c3dc0bad204e9dd9890325c1c861e38"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a6c3dc0bad204e9dd9890325c1c861e38">ast_false</a></div><div class="ttdeci">int attribute_pure ast_false(const char *val)</div><div class="ttdoc">Make sure something is false. Determine if a string containing a boolean value is &quot;false&quot;...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01968">main/utils.c:1968</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="res__agi_8c_html_acac9c67d43a9e0d04c732fc06665f6dd"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#acac9c67d43a9e0d04c732fc06665f6dd">AGI_BUF_LEN</a></div><div class="ttdeci">#define AGI_BUF_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01391">res_agi.c:1391</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="channel_8h_html_a65b548fdac14462497431eb07bc45d63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a65b548fdac14462497431eb07bc45d63">ast_channel_get_intercept_mode</a></div><div class="ttdeci">int ast_channel_get_intercept_mode(void)</div><div class="ttdoc">Am I currently running an intercept dialplan routine. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10430">channel.c:10430</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1a91f6f01be62db91c4a91250f3d513d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a91f6f01be62db91c4a91250f3d513d">&#9670;&nbsp;</a></span>setup_env()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void setup_env </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>enhanced</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02318">2318</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00344">ast_channel_context()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00904">ast_channel_dialed()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00353">ast_channel_exten()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00444">ast_channel_priority()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00908">ast_channel_redirecting()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00769">ast_channel_tech()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../d2/d0b/version_8c_source.html#l00016">ast_get_version()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01821">ast_party_id_presentation()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00085">S_COR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01709">action_add_agi_cmd()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01787">launch_asyncagi()</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04112">run_agi()</a>.</p>
<div class="fragment"><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;{</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;   <span class="keywordtype">int</span> count;</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;   <span class="comment">/* Print initial environment, with agi_request always being the first</span></div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;<span class="comment">      thing */</span></div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(fd, chan, <span class="stringliteral">&quot;agi_request: %s\n&quot;</span>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a>);</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(fd, chan, <span class="stringliteral">&quot;agi_channel: %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(fd, chan, <span class="stringliteral">&quot;agi_language: %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan));</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(fd, chan, <span class="stringliteral">&quot;agi_type: %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>);</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(fd, chan, <span class="stringliteral">&quot;agi_uniqueid: %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(chan));</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(fd, chan, <span class="stringliteral">&quot;agi_version: %s\n&quot;</span>, <a class="code" href="../../d5/db9/ast__version_8h.html#a7765c608aea948584928643ab3963b2a">ast_get_version</a>());</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;   <span class="comment">/* ANI/DNIS */</span></div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(fd, chan, <span class="stringliteral">&quot;agi_callerid: %s\n&quot;</span>,</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.valid, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str, <span class="stringliteral">&quot;unknown&quot;</span>));</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(fd, chan, <span class="stringliteral">&quot;agi_calleridname: %s\n&quot;</span>,</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>.valid, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>.str, <span class="stringliteral">&quot;unknown&quot;</span>));</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(fd, chan, <span class="stringliteral">&quot;agi_callingpres: %d\n&quot;</span>,</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a39aac47fef1240391fd97e055522fd83">ast_party_id_presentation</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<span class="keywordtype">id</span>));</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(fd, chan, <span class="stringliteral">&quot;agi_callingani2: %d\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;ani2);</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(fd, chan, <span class="stringliteral">&quot;agi_callington: %d\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.plan);</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(fd, chan, <span class="stringliteral">&quot;agi_callingtns: %d\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a63732831df3e7a0999b0900ec85c626a">ast_channel_dialed</a>(chan)-&gt;transit_network_select);</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(fd, chan, <span class="stringliteral">&quot;agi_dnid: %s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a63732831df3e7a0999b0900ec85c626a">ast_channel_dialed</a>(chan)-&gt;<a class="code" href="../../d6/d49/structnumber.html">number</a>.str, <span class="stringliteral">&quot;unknown&quot;</span>));</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(fd, chan, <span class="stringliteral">&quot;agi_rdnis: %s\n&quot;</span>,</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(chan)-&gt;from.number.valid, <a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(chan)-&gt;from.number.str, <span class="stringliteral">&quot;unknown&quot;</span>));</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;   <span class="comment">/* Context information */</span></div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(fd, chan, <span class="stringliteral">&quot;agi_context: %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(chan));</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(fd, chan, <span class="stringliteral">&quot;agi_extension: %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(chan));</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(fd, chan, <span class="stringliteral">&quot;agi_priority: %d\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a6610c8171ced0a69738622c11736ff5e">ast_channel_priority</a>(chan));</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(fd, chan, <span class="stringliteral">&quot;agi_enhanced: %s\n&quot;</span>, enhanced ? <span class="stringliteral">&quot;1.0&quot;</span> : <span class="stringliteral">&quot;0.0&quot;</span>);</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;   <span class="comment">/* User information */</span></div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(fd, chan, <span class="stringliteral">&quot;agi_accountcode: %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a>(chan) ? <a class="code" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a>(chan) : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(fd, chan, <span class="stringliteral">&quot;agi_threadid: %ld\n&quot;</span>, (<span class="keywordtype">long</span>)pthread_self());</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;   <span class="comment">/* Send any parameters to the fastagi server that have been passed via the agi application */</span></div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;   <span class="comment">/* Agi application paramaters take the form of: AGI(/path/to/example/script|${EXTEN}) */</span></div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;   <span class="keywordflow">for</span>(count = 1; count &lt; argc; count++)</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(fd, chan, <span class="stringliteral">&quot;agi_arg_%d: %s\n&quot;</span>, count, argv[count]);</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;   <span class="comment">/* End with empty return */</span></div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a>(fd, chan, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="ast__version_8h_html_a7765c608aea948584928643ab3963b2a"><div class="ttname"><a href="../../d5/db9/ast__version_8h.html#a7765c608aea948584928643ab3963b2a">ast_get_version</a></div><div class="ttdeci">const char * ast_get_version(void)</div><div class="ttdoc">Retrieve the Asterisk version string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0b/version_8c_source.html#l00016">version.c:16</a></div></div>
<div class="ttc" id="channel_8h_html_a39aac47fef1240391fd97e055522fd83"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a39aac47fef1240391fd97e055522fd83">ast_party_id_presentation</a></div><div class="ttdeci">int ast_party_id_presentation(const struct ast_party_id *id)</div><div class="ttdoc">Determine the overall presentation value for the given party. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01821">channel.c:1821</a></div></div>
<div class="ttc" id="channel_8h_html_a6610c8171ced0a69738622c11736ff5e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6610c8171ced0a69738622c11736ff5e">ast_channel_priority</a></div><div class="ttdeci">int ast_channel_priority(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00444">channel_internal_api.c:444</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="channel_8h_html_a1d6833a829f7402bbf9cf0383ae3ca00"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a></div><div class="ttdeci">const char * ast_channel_accountcode(const struct ast_channel *chan)</div></div>
<div class="ttc" id="strings_8h_html_a38a896048b2ca84076864505f0aa8f01"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a></div><div class="ttdeci">#define S_COR(a, b, c)</div><div class="ttdoc">returns the equivalent of logic or for strings, with an additional boolean check: second one if not e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00085">strings.h:85</a></div></div>
<div class="ttc" id="channel_8h_html_aa8b52fbc8168e939bc5553502367d46a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a></div><div class="ttdeci">const char * ast_channel_exten(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00353">channel_internal_api.c:353</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="channel_8h_html_a63732831df3e7a0999b0900ec85c626a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a63732831df3e7a0999b0900ec85c626a">ast_channel_dialed</a></div><div class="ttdeci">struct ast_party_dialed * ast_channel_dialed(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00904">channel_internal_api.c:904</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a4e2e6fb7d874f0d2deddd2ecfc8afb32"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a></div><div class="ttdeci">static int request(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02559">chan_pjsip.c:2559</a></div></div>
<div class="ttc" id="channel_8h_html_ad2334e69c466aec25ba3cbba53b7201b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a></div><div class="ttdeci">struct ast_party_redirecting * ast_channel_redirecting(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00908">channel_internal_api.c:908</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_a9abe31fe40dcd03cd2957e5309e32ac6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a></div><div class="ttdeci">const char * ast_channel_language(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_a582dee4d5ea9b2ff6f309f0c5239f6bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a></div><div class="ttdeci">const char * ast_channel_context(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00344">channel_internal_api.c:344</a></div></div>
<div class="ttc" id="res__agi_8c_html_adee1cbdd14817c3a077b8dd109f7934a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#adee1cbdd14817c3a077b8dd109f7934a">ast_agi_send</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_send(int fd, struct ast_channel *chan, char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01486">res_agi.c:1486</a></div></div>
<div class="ttc" id="channel_8h_html_af5dee96d4dcc88a95fce391c22d4d21f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a></div><div class="ttdeci">const struct ast_channel_tech * ast_channel_tech(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00769">channel_internal_api.c:769</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a858a0c285f521084ef968a81472e5458"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a858a0c285f521084ef968a81472e5458">&#9670;&nbsp;</a></span>speech_streamfile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int speech_streamfile </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>preflang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03537">3537</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d13/file_8c_source.html#l01020">ast_applystream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00755">ast_openstream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01026">ast_playstream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01038">ast_seekstream()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03556">handle_speechrecognize()</a>.</p>
<div class="fragment"><div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;{</div><div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *fs = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;</div><div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;   <span class="keywordflow">if</span> (!(fs = <a class="code" href="../../d2/d4d/file_8h.html#ad85c951fa1d6988d2d7e169833a951a8">ast_openstream</a>(chan, <a class="code" href="../../db/dbc/structast__filestream.html#aeac90097f29f7529968697163cea5c18">filename</a>, preflang)))</div><div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;</div><div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;   <span class="keywordflow">if</span> (offset)</div><div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a>(fs, offset, SEEK_SET);</div><div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;</div><div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4d/file_8h.html#a618e3120b6d019312ef2d617d9f14571">ast_applystream</a>(chan, fs))</div><div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;</div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4d/file_8h.html#ad59224750b8b617f9590b28b88457b14">ast_playstream</a>(fs))</div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;</div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="file_8h_html_ad59224750b8b617f9590b28b88457b14"><div class="ttname"><a href="../../d2/d4d/file_8h.html#ad59224750b8b617f9590b28b88457b14">ast_playstream</a></div><div class="ttdeci">int ast_playstream(struct ast_filestream *s)</div><div class="ttdoc">Play a open stream on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01026">file.c:1026</a></div></div>
<div class="ttc" id="file_8h_html_a618e3120b6d019312ef2d617d9f14571"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a618e3120b6d019312ef2d617d9f14571">ast_applystream</a></div><div class="ttdeci">int ast_applystream(struct ast_channel *chan, struct ast_filestream *s)</div><div class="ttdoc">Applys a open stream to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01020">file.c:1020</a></div></div>
<div class="ttc" id="file_8h_html_a36f6bba05952162d5d1ee7fb9819bd07"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a></div><div class="ttdeci">int ast_seekstream(struct ast_filestream *fs, off_t sample_offset, int whence)</div><div class="ttdoc">Seeks into stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01038">file.c:1038</a></div></div>
<div class="ttc" id="structast__filestream_html_aeac90097f29f7529968697163cea5c18"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#aeac90097f29f7529968697163cea5c18">ast_filestream::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00107">mod_format.h:107</a></div></div>
<div class="ttc" id="structast__filestream_html"><div class="ttname"><a href="../../db/dbc/structast__filestream.html">ast_filestream</a></div><div class="ttdoc">This structure is allocated by file.c in one chunk, together with buf_size and desc_size bytes of mem...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00101">mod_format.h:101</a></div></div>
<div class="ttc" id="file_8h_html_ad85c951fa1d6988d2d7e169833a951a8"><div class="ttname"><a href="../../d2/d4d/file_8h.html#ad85c951fa1d6988d2d7e169833a951a8">ast_openstream</a></div><div class="ttdeci">struct ast_filestream * ast_openstream(struct ast_channel *chan, const char *filename, const char *preflang)</div><div class="ttdoc">Opens stream for use in seeking, playing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00755">file.c:755</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad05490300365a874998a160201631fc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad05490300365a874998a160201631fc6">&#9670;&nbsp;</a></span>STASIS_MESSAGE_TYPE_DEFN_LOCAL() <span class="overload">[1/5]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STASIS_MESSAGE_TYPE_DEFN_LOCAL </td>
          <td>(</td>
          <td class="paramtype">agi_exec_start_type&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">.&#160;</td>
          <td class="paramname"><em>to_ami</em> = <code><a class="el" href="../../dd/de9/res__agi_8c.html#ad9fd39b93cf79f1a4f6341cd28429099">agi_exec_start_to_ami</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01460">agi_async_end_to_ami()</a>.</p>

</div>
</div>
<a id="ad681b8b4fdd6f4148af90bb3d64e094a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad681b8b4fdd6f4148af90bb3d64e094a">&#9670;&nbsp;</a></span>STASIS_MESSAGE_TYPE_DEFN_LOCAL() <span class="overload">[2/5]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STASIS_MESSAGE_TYPE_DEFN_LOCAL </td>
          <td>(</td>
          <td class="paramtype">agi_exec_end_type&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">.&#160;</td>
          <td class="paramname"><em>to_ami</em> = <code><a class="el" href="../../dd/de9/res__agi_8c.html#a30e56b9b56c62f1a0cc32809f843873b">agi_exec_end_to_ami</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ace6c9e6c8a363be1117309acee064376"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace6c9e6c8a363be1117309acee064376">&#9670;&nbsp;</a></span>STASIS_MESSAGE_TYPE_DEFN_LOCAL() <span class="overload">[3/5]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STASIS_MESSAGE_TYPE_DEFN_LOCAL </td>
          <td>(</td>
          <td class="paramtype">agi_async_start_type&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">.&#160;</td>
          <td class="paramname"><em>to_ami</em> = <code><a class="el" href="../../dd/de9/res__agi_8c.html#aa331556f90c1e5963ce69038e78f6d06">agi_async_start_to_ami</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a714cf7f51e428784bd6c649e3df0b6f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a714cf7f51e428784bd6c649e3df0b6f1">&#9670;&nbsp;</a></span>STASIS_MESSAGE_TYPE_DEFN_LOCAL() <span class="overload">[4/5]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STASIS_MESSAGE_TYPE_DEFN_LOCAL </td>
          <td>(</td>
          <td class="paramtype">agi_async_exec_type&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">.&#160;</td>
          <td class="paramname"><em>to_ami</em> = <code><a class="el" href="../../dd/de9/res__agi_8c.html#add52df81dc56b4b3b009e82dcdaf5cbd">agi_async_exec_to_ami</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a42295d52f5c98a47df26430c898a8589"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42295d52f5c98a47df26430c898a8589">&#9670;&nbsp;</a></span>STASIS_MESSAGE_TYPE_DEFN_LOCAL() <span class="overload">[5/5]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STASIS_MESSAGE_TYPE_DEFN_LOCAL </td>
          <td>(</td>
          <td class="paramtype">agi_async_end_type&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">.&#160;</td>
          <td class="paramname"><em>to_ami</em> = <code><a class="el" href="../../dd/de9/res__agi_8c.html#af9d9a3d50a3f090631ea19ef8ff9871b">agi_async_end_to_ami</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04664">4664</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01394">app</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03893">ast_agi_unregister_multiple()</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00030">ast_cli_unregister_multiple()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07258">ast_manager_unregister()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00128">AST_TEST_UNREGISTER</a>, <a class="el" href="../../dd/d16/pbx__app_8c_source.html#l00392">ast_unregister_application()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01398">deadapp</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01396">eapp</a>, and <a class="el" href="../../dd/d79/stasis_8h_source.html#l01523">STASIS_MESSAGE_TYPE_CLEANUP</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04682">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;{</div><div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(agi_exec_start_type);</div><div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(agi_exec_end_type);</div><div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(agi_async_start_type);</div><div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(agi_async_exec_type);</div><div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(agi_async_end_type);</div><div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;</div><div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(<a class="code" href="../../dd/de9/res__agi_8c.html#a11397b735518c6d8ecf8d046cb627d92">cli_agi</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dd/de9/res__agi_8c.html#a11397b735518c6d8ecf8d046cb627d92">cli_agi</a>));</div><div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;   <a class="code" href="../../dd/de9/res__agi_8c.html#a32bc910dfa4883b8db27783be9038c7b">ast_agi_unregister_multiple</a>(<a class="code" href="../../dd/de9/res__agi_8c.html#aaaa94f6da87a703160a7acb2fd67422d">commands</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dd/de9/res__agi_8c.html#aaaa94f6da87a703160a7acb2fd67422d">commands</a>));</div><div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(<a class="code" href="../../dd/de9/res__agi_8c.html#a04c472070a5f7bb59a453e5243bbcd8d">eapp</a>);</div><div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(<a class="code" href="../../dd/de9/res__agi_8c.html#a88932dc53060370d87a1bed5af51d968">deadapp</a>);</div><div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;AGI&quot;</span>);</div><div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(<a class="code" href="../../dd/de9/res__agi_8c.html#a9e5f57131367eff409b9e0bd7b31aa1a">app</a>);</div><div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(test_agi_null_docs);</div><div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="stasis_8h_html_a31197e193b1dfd6c122ff6d7c7f6b3fa"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a></div><div class="ttdeci">#define STASIS_MESSAGE_TYPE_CLEANUP(name)</div><div class="ttdoc">Boiler-plate messaging macro for cleaning up message types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01523">stasis.h:1523</a></div></div>
<div class="ttc" id="res__agi_8c_html_a88932dc53060370d87a1bed5af51d968"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a88932dc53060370d87a1bed5af51d968">deadapp</a></div><div class="ttdeci">static char * deadapp</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01398">res_agi.c:1398</a></div></div>
<div class="ttc" id="module_8h_html_ad2ca15621101154f29748cf1dac3c3cf"><div class="ttname"><a href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a></div><div class="ttdeci">int ast_unregister_application(const char *app)</div><div class="ttdoc">Unregister an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00392">pbx_app.c:392</a></div></div>
<div class="ttc" id="res__agi_8c_html_aaaa94f6da87a703160a7acb2fd67422d"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#aaaa94f6da87a703160a7acb2fd67422d">commands</a></div><div class="ttdeci">static struct agi_command commands[]</div><div class="ttdoc">AGI commands list. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l03706">res_agi.c:3706</a></div></div>
<div class="ttc" id="res__agi_8c_html_a11397b735518c6d8ecf8d046cb627d92"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a11397b735518c6d8ecf8d046cb627d92">cli_agi</a></div><div class="ttdeci">static struct ast_cli_entry cli_agi[]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l04617">res_agi.c:4617</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gafadf012f66a9fd7ecf985ec5b9dee101"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a></div><div class="ttdeci">int ast_manager_unregister(const char *action)</div><div class="ttdoc">Unregister a registered manager command. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l07258">manager.c:7258</a></div></div>
<div class="ttc" id="res__agi_8c_html_a32bc910dfa4883b8db27783be9038c7b"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a32bc910dfa4883b8db27783be9038c7b">ast_agi_unregister_multiple</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_agi_unregister_multiple(struct agi_command *cmd, unsigned int len)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l03893">res_agi.c:3893</a></div></div>
<div class="ttc" id="test_8h_html_a79bc64a935b14b1b181156e5ada58ead"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a></div><div class="ttdeci">#define AST_TEST_UNREGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00128">test.h:128</a></div></div>
<div class="ttc" id="res__agi_8c_html_a9e5f57131367eff409b9e0bd7b31aa1a"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a9e5f57131367eff409b9e0bd7b31aa1a">app</a></div><div class="ttdeci">static char * app</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01394">res_agi.c:1394</a></div></div>
<div class="ttc" id="res__agi_8c_html_a04c472070a5f7bb59a453e5243bbcd8d"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a04c472070a5f7bb59a453e5243bbcd8d">eapp</a></div><div class="ttdeci">static char * eapp</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01396">res_agi.c:1396</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="affb3399334791eb3ca41f76ad70296dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affb3399334791eb3ca41f76ad70296dc">&#9670;&nbsp;</a></span>write_html_escaped()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void write_html_escaped </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>htmlfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>str</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert string to use HTML escaped characters. </p>
<dl class="section note"><dt>Note</dt><dd>Maybe this should be a generic function? </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04390">4390</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00147">str</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04418">write_htmldump()</a>.</p>
<div class="fragment"><div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;{</div><div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;   <span class="keywordtype">char</span> *cur = <a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>;</div><div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;</div><div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;   <span class="keywordflow">while</span>(*cur) {</div><div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;      <span class="keywordflow">switch</span> (*cur) {</div><div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;&lt;&#39;</span>:</div><div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;         fprintf(htmlfile, <span class="stringliteral">&quot;%s&quot;</span>, <span class="stringliteral">&quot;&amp;lt;&quot;</span>);</div><div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;&gt;&#39;</span>:</div><div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;         fprintf(htmlfile, <span class="stringliteral">&quot;%s&quot;</span>, <span class="stringliteral">&quot;&amp;gt;&quot;</span>);</div><div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;&amp;&#39;</span>:</div><div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;         fprintf(htmlfile, <span class="stringliteral">&quot;%s&quot;</span>, <span class="stringliteral">&quot;&amp;amp;&quot;</span>);</div><div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;&quot;&#39;</span>:</div><div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;         fprintf(htmlfile, <span class="stringliteral">&quot;%s&quot;</span>, <span class="stringliteral">&quot;&amp;quot;&quot;</span>);</div><div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;         fprintf(htmlfile, <span class="stringliteral">&quot;%c&quot;</span>, *cur);</div><div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;      }</div><div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;      cur++;</div><div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;   }</div><div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;</div><div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;   <span class="keywordflow">return</span>;</div><div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;}</div><div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6eff3837450235005ee9361ae08999fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6eff3837450235005ee9361ae08999fe">&#9670;&nbsp;</a></span>write_htmldump()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int write_htmldump </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04418">4418</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00483">ast_join</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d8/d2f/xmldoc_8c_source.html#l00242">ast_xmldoc_printable()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00043">agi_command::cmda</a>, <a class="el" href="../../dc/d52/structagi__command.html#af00a83dd0d12d02e79d4014beeacabfa">agi_command::list</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01389">MAX_CMD_LEN</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00048">agi_command::summary</a>, <a class="el" href="../../dc/d2b/agi_8h_source.html#l00050">agi_command::usage</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04390">write_html_escaped()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04470">handle_cli_agi_dump_html()</a>.</p>
<div class="fragment"><div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;{</div><div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d52/structagi__command.html">agi_command</a> *command;</div><div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;   <span class="keywordtype">char</span> fullcmd[<a class="code" href="../../dd/de9/res__agi_8c.html#a1eb73c104b484cf18752169509cebfe2">MAX_CMD_LEN</a>];</div><div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;   FILE *htmlfile;</div><div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;</div><div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;   <span class="keywordflow">if</span> (!(htmlfile = fopen(filename, <span class="stringliteral">&quot;wt&quot;</span>)))</div><div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;</div><div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;   fprintf(htmlfile, <span class="stringliteral">&quot;&lt;HTML&gt;\n&lt;HEAD&gt;\n&lt;TITLE&gt;AGI Commands&lt;/TITLE&gt;\n&lt;/HEAD&gt;\n&quot;</span>);</div><div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;   fprintf(htmlfile, <span class="stringliteral">&quot;&lt;BODY&gt;\n&lt;CENTER&gt;&lt;B&gt;&lt;H1&gt;AGI Commands&lt;/H1&gt;&lt;/B&gt;&lt;/CENTER&gt;\n\n&quot;</span>);</div><div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;   fprintf(htmlfile, <span class="stringliteral">&quot;&lt;TABLE BORDER=\&quot;0\&quot; CELLSPACING=\&quot;10\&quot;&gt;\n&quot;</span>);</div><div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;</div><div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a>);</div><div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a>, command, <a class="code" href="../../dc/d52/structagi__command.html#af00a83dd0d12d02e79d4014beeacabfa">list</a>) {</div><div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;      <span class="keywordtype">char</span> *tempstr, *stringp;</div><div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;</div><div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;      <span class="keywordflow">if</span> (!command-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ad9605fda9da9c3b6965fb5f78a8c6cfd">cmda</a>[0])  <span class="comment">/* end ? */</span></div><div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;      <span class="comment">/* Hide commands that start with &#39;_&#39; */</span></div><div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;      <span class="keywordflow">if</span> ((command-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ad9605fda9da9c3b6965fb5f78a8c6cfd">cmda</a>[0])[0] == <span class="charliteral">&#39;_&#39;</span>)</div><div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aea6bd3799329d5811098c41b6c201c45">ast_join</a>(fullcmd, <span class="keyword">sizeof</span>(fullcmd), command-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ad9605fda9da9c3b6965fb5f78a8c6cfd">cmda</a>);</div><div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;</div><div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;      fprintf(htmlfile, <span class="stringliteral">&quot;&lt;TR&gt;&lt;TD&gt;&lt;TABLE BORDER=\&quot;1\&quot; CELLPADDING=\&quot;5\&quot; WIDTH=\&quot;100%%\&quot;&gt;\n&quot;</span>);</div><div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;      fprintf(htmlfile, <span class="stringliteral">&quot;&lt;TR&gt;&lt;TH ALIGN=\&quot;CENTER\&quot;&gt;&lt;B&gt;%s - %s&lt;/B&gt;&lt;/TH&gt;&lt;/TR&gt;\n&quot;</span>, fullcmd, command-&gt;<a class="code" href="../../dc/d52/structagi__command.html#a54841ced0ab497a0d3a8d5f244159a6b">summary</a>);</div><div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;<span class="preprocessor">#ifdef AST_XML_DOCS</span></div><div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;      stringp = <a class="code" href="../../d1/d99/xmldoc_8h.html#a637de870dfc83d0694f588c5a814ce38">ast_xmldoc_printable</a>(command-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ab879c8fbae669c13a54421b2a9effa55">usage</a>, 0);</div><div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;      stringp = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(command-&gt;<a class="code" href="../../dc/d52/structagi__command.html#ab879c8fbae669c13a54421b2a9effa55">usage</a>);</div><div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;      tempstr = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;stringp, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;</div><div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;      fprintf(htmlfile, <span class="stringliteral">&quot;&lt;TR&gt;&lt;TD ALIGN=\&quot;CENTER\&quot;&gt;&quot;</span>);</div><div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;      <a class="code" href="../../dd/de9/res__agi_8c.html#affb3399334791eb3ca41f76ad70296dc">write_html_escaped</a>(htmlfile, tempstr);</div><div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;      fprintf(htmlfile, <span class="stringliteral">&quot;&lt;/TD&gt;&lt;/TR&gt;\n&quot;</span>);</div><div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;      fprintf(htmlfile, <span class="stringliteral">&quot;&lt;TR&gt;&lt;TD ALIGN=\&quot;CENTER\&quot;&gt;\n&quot;</span>);</div><div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;</div><div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;      <span class="keywordflow">while</span> ((tempstr = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;stringp, <span class="stringliteral">&quot;\n&quot;</span>)) != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;         <a class="code" href="../../dd/de9/res__agi_8c.html#affb3399334791eb3ca41f76ad70296dc">write_html_escaped</a>(htmlfile, tempstr);</div><div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;         fprintf(htmlfile, <span class="stringliteral">&quot;&lt;BR&gt;\n&quot;</span>);</div><div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;      }</div><div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;      fprintf(htmlfile, <span class="stringliteral">&quot;&lt;/TD&gt;&lt;/TR&gt;\n&quot;</span>);</div><div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;      fprintf(htmlfile, <span class="stringliteral">&quot;&lt;/TABLE&gt;&lt;/TD&gt;&lt;/TR&gt;\n\n&quot;</span>);</div><div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(stringp);</div><div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;   }</div><div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/de8/structagi__commands.html">agi_commands</a>);</div><div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;   fprintf(htmlfile, <span class="stringliteral">&quot;&lt;/TABLE&gt;\n&lt;/BODY&gt;\n&lt;/HTML&gt;\n&quot;</span>);</div><div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;   fclose(htmlfile);</div><div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;}</div><div class="ttc" id="structagi__command_html_a54841ced0ab497a0d3a8d5f244159a6b"><div class="ttname"><a href="../../dc/d52/structagi__command.html#a54841ced0ab497a0d3a8d5f244159a6b">agi_command::summary</a></div><div class="ttdeci">const char *const summary</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00048">agi.h:48</a></div></div>
<div class="ttc" id="structagi__commands_html"><div class="ttname"><a href="../../d7/de8/structagi__commands.html">agi_commands</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l03755">res_agi.c:3755</a></div></div>
<div class="ttc" id="strings_8h_html_aea6bd3799329d5811098c41b6c201c45"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aea6bd3799329d5811098c41b6c201c45">ast_join</a></div><div class="ttdeci">#define ast_join(s, len, w)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00483">strings.h:483</a></div></div>
<div class="ttc" id="structagi__command_html_ab879c8fbae669c13a54421b2a9effa55"><div class="ttname"><a href="../../dc/d52/structagi__command.html#ab879c8fbae669c13a54421b2a9effa55">agi_command::usage</a></div><div class="ttdeci">const char *const usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00050">agi.h:50</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__agi_8c_html_a1eb73c104b484cf18752169509cebfe2"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a1eb73c104b484cf18752169509cebfe2">MAX_CMD_LEN</a></div><div class="ttdeci">#define MAX_CMD_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01389">res_agi.c:1389</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structagi__command_html"><div class="ttname"><a href="../../dc/d52/structagi__command.html">agi_command</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00042">agi.h:42</a></div></div>
<div class="ttc" id="structagi__command_html_ad9605fda9da9c3b6965fb5f78a8c6cfd"><div class="ttname"><a href="../../dc/d52/structagi__command.html#ad9605fda9da9c3b6965fb5f78a8c6cfd">agi_command::cmda</a></div><div class="ttdeci">const char *const cmda[AST_MAX_CMD_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/agi_8h_source.html#l00043">agi.h:43</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="xmldoc_8h_html_a637de870dfc83d0694f588c5a814ce38"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html#a637de870dfc83d0694f588c5a814ce38">ast_xmldoc_printable</a></div><div class="ttdeci">char * ast_xmldoc_printable(const char *bwinput, int withcolors)</div><div class="ttdoc">Colorize and put delimiters (instead of tags) to the xmldoc output. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d2f/xmldoc_8c_source.html#l00242">xmldoc.c:242</a></div></div>
<div class="ttc" id="structagi__command_html_af00a83dd0d12d02e79d4014beeacabfa"><div class="ttname"><a href="../../dc/d52/structagi__command.html#af00a83dd0d12d02e79d4014beeacabfa">agi_command::list</a></div><div class="ttdeci">struct agi_command::@219 list</div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="res__agi_8c_html_affb3399334791eb3ca41f76ad70296dc"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#affb3399334791eb3ca41f76ad70296dc">write_html_escaped</a></div><div class="ttdeci">static void write_html_escaped(FILE *htmlfile, char *str)</div><div class="ttdoc">Convert string to use HTML escaped characters. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l04390">res_agi.c:4390</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a835b27a90d895a488e4e14cc3d2dee8c">AST_MODFLAG_GLOBAL_SYMBOLS</a> | <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Asterisk Gateway Interface (<a class="el" href="../../dc/d2b/agi_8h.html#a39b22d4db1429ead3b34f15168814ce8">AGI</a>)&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .load_pri = AST_MODPRI_APP_DEPEND, .requires = &quot;res_speech&quot;, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04715">4715</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

</div>
</div>
<a id="a80c30395a4c4fa9d8164ebc3608010e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80c30395a4c4fa9d8164ebc3608010e6">&#9670;&nbsp;</a></span>agi_buf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a> agi_buf = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../dd/de9/res__agi_8c.html#ac0e0031a3312b986f52c97a9f9222f9c">__init_agi_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01483">1483</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>.</p>

</div>
</div>
<a id="a13ffc43504a9b4d6609f9fb8fe893806"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13ffc43504a9b4d6609f9fb8fe893806">&#9670;&nbsp;</a></span>agi_commands</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d7/de8/structagi__commands.html">agi_commands</a>   <a class="el" href="../../d7/de8/structagi__commands.html">agi_commands</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01580">add_agi_cmd()</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01558">get_agi_cmd()</a>.</p>

</div>
</div>
<a id="ae10f9ba9071ef79384ddcd6a37315b40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae10f9ba9071ef79384ddcd6a37315b40">&#9670;&nbsp;</a></span>agi_commands_datastore_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> agi_commands_datastore_info</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .type = <span class="stringliteral">&quot;AsyncAGI&quot;</span>,</div><div class="line">   .destroy = <a class="code" href="../../dd/de9/res__agi_8c.html#a2ae8b32514354ab1dd2b62121ed88593">agi_destroy_commands_cb</a></div><div class="line">}</div><div class="ttc" id="res__agi_8c_html_a2ae8b32514354ab1dd2b62121ed88593"><div class="ttname"><a href="../../dd/de9/res__agi_8c.html#a2ae8b32514354ab1dd2b62121ed88593">agi_destroy_commands_cb</a></div><div class="ttdeci">static void agi_destroy_commands_cb(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/res__agi_8c_source.html#l01530">res_agi.c:1530</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01544">1544</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

</div>
</div>
<a id="a9e4d6534e259785ec604fa072e049325"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e4d6534e259785ec604fa072e049325">&#9670;&nbsp;</a></span>agidebug</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int agidebug = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01400">1400</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03362">handle_cli_agi_debug()</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04112">run_agi()</a>.</p>

</div>
</div>
<a id="a9e5f57131367eff409b9e0bd7b31aa1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e5f57131367eff409b9e0bd7b31aa1a">&#9670;&nbsp;</a></span>app</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* app = &quot;AGI&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01394">1394</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04682">load_module()</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04664">unload_module()</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04715">4715</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

</div>
</div>
<a id="a11397b735518c6d8ecf8d046cb627d92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11397b735518c6d8ecf8d046cb627d92">&#9670;&nbsp;</a></span>cli_agi</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> cli_agi[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04617">4617</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

</div>
</div>
<a id="aaaa94f6da87a703160a7acb2fd67422d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaaa94f6da87a703160a7acb2fd67422d">&#9670;&nbsp;</a></span>commands</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dc/d52/structagi__command.html">agi_command</a> commands[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>AGI commands list. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03706">3706</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00432">dundi_showframe()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l02847">xmpp_component_service_discovery_get_hook()</a>.</p>

</div>
</div>
<a id="a88932dc53060370d87a1bed5af51d968"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88932dc53060370d87a1bed5af51d968">&#9670;&nbsp;</a></span>deadapp</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* deadapp = &quot;DeadAGI&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01398">1398</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04682">load_module()</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04664">unload_module()</a>.</p>

</div>
</div>
<a id="a04c472070a5f7bb59a453e5243bbcd8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04c472070a5f7bb59a453e5243bbcd8d">&#9670;&nbsp;</a></span>eapp</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* eapp = &quot;EAGI&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01396">1396</a> of file <a class="el" href="../../dd/de9/res__agi_8c_source.html">res_agi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04682">load_module()</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04664">unload_module()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:20 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
