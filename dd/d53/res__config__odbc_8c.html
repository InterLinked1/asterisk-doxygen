<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: res_config_odbc.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_7b47cca4d318623bb4270ab1fb592ef5.html">res</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">res_config_odbc.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>odbc+odbc plugin for portable configuration engine  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d4d/file_8h_source.html">asterisk/file.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/de0/pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html">asterisk/config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d42/lock_8h_source.html">asterisk/lock.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d96/res__odbc_8h_source.html">asterisk/res_odbc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d0f/stringfields_8h_source.html">asterisk/stringfields.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for res_config_odbc.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/db8/res__config__odbc_8c__incl.png" border="0" usemap="#res__config__odbc_8c" alt=""/></div>
<map name="res__config__odbc_8c" id="res__config__odbc_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="546,453,630,480"/>
<area shape="rect" id="node14" href="../../d2/d4d/file_8h.html" title="Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. " alt="" coords="123,80,229,107"/>
<area shape="rect" id="node17" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1187,155,1325,181"/>
<area shape="rect" id="node19" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1783,379,1897,405"/>
<area shape="rect" id="node20" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1181,677,1294,704"/>
<area shape="rect" id="node22" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="2149,453,2307,480"/>
<area shape="rect" id="node31" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="2086,304,2213,331"/>
<area shape="rect" id="node41" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="993,80,1103,107"/>
<area shape="rect" id="node46" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="2229,80,2365,107"/>
<area shape="rect" id="node47" href="../../de/d96/res__odbc_8h.html" title="ODBC resource manager. " alt="" coords="2551,379,2697,405"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="456,528,611,555"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="1581,603,1718,629"/>
<area shape="rect" id="node13" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="635,528,770,555"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="460,603,607,629"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="1214,752,1357,779"/>
<area shape="rect" id="node18" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="1509,304,1653,331"/>
<area shape="rect" id="node24" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="1597,528,1731,555"/>
<area shape="rect" id="node25" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1010,603,1161,629"/>
<area shape="rect" id="node26" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="1326,304,1485,331"/>
<area shape="rect" id="node28" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="1897,229,2061,256"/>
<area shape="rect" id="node29" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="1123,304,1250,331"/>
<area shape="rect" id="node30" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="405,229,552,256"/>
<area shape="rect" id="node32" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="1203,229,1309,256"/>
<area shape="rect" id="node33" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="897,304,1047,331"/>
<area shape="rect" id="node34" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="1537,229,1698,256"/>
<area shape="rect" id="node35" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="557,379,728,405"/>
<area shape="rect" id="node36" href="../../de/dc8/ccss_8h.html" title="Call Completion Supplementary Services API. " alt="" coords="627,229,743,256"/>
<area shape="rect" id="node38" href="../../db/d3c/framehook_8h.html" title="FrameHook Architecture. " alt="" coords="920,229,1077,256"/>
<area shape="rect" id="node39" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="1677,304,1803,331"/>
<area shape="rect" id="node40" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="1722,229,1873,256"/>
<area shape="rect" id="node23" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="1857,453,1988,480"/>
<area shape="rect" id="node21" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="2024,752,2171,779"/>
<area shape="rect" id="node27" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="1340,379,1471,405"/>
<area shape="rect" id="node37" href="../../da/da2/devicestate_8h.html" title="Device state management. " alt="" coords="659,304,821,331"/>
<area shape="rect" id="node42" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="517,155,643,181"/>
<area shape="rect" id="node43" href="../../d6/dd7/presencestate_8h.html" title="Presence state management. " alt="" coords="667,155,847,181"/>
<area shape="rect" id="node44" href="../../d6/da0/hashtab_8h.html" title="Generic (perhaps overly so) hashtable implementation Hash Table support in Asterisk. " alt="" coords="190,528,330,555"/>
<area shape="rect" id="node45" href="../../d1/d99/xmldoc_8h.html" title="Asterisk XML Documentation API. " alt="" coords="2239,379,2374,405"/>
</map>
</div>
</div>
<p><a href="../../dd/d53/res__config__odbc_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dda/structconfig__odbc__obj.html">config_odbc_obj</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d27/structcustom__prepare__struct.html">custom_prepare_struct</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d37/structupdate2__prepare__struct.html">update2_prepare_struct</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a213ff212b1abd119f58f61f5576e13d4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#a213ff212b1abd119f58f61f5576e13d4">CHECK_SIZE</a>(n)</td></tr>
<tr class="separator:a213ff212b1abd119f58f61f5576e13d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e3336432063231e3a6545c7146ff397"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#a4e3336432063231e3a6545c7146ff397">ENCODE_CHUNK</a>(buffer,  s)</td></tr>
<tr class="separator:a4e3336432063231e3a6545c7146ff397"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0552f2f0194e062f156929a78374dd55"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#a0552f2f0194e062f156929a78374dd55">SQL_BUF_SIZE</a>&#160;&#160;&#160;1024</td></tr>
<tr class="separator:a0552f2f0194e062f156929a78374dd55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18da797c1ab7394473a9b3c7e13e6f89"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#a18da797c1ab7394473a9b3c7e13e6f89">warn_length</a>(col,  size)&#160;&#160;&#160;<a class="el" href="../../d4/dc5/extconf_8c.html#acb8ee436a0c80c66dfcdec6b6bcc6196">ast_log</a>(<a class="el" href="../../d4/dc5/extconf_8c.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, &quot;Realtime <a class="el" href="../../db/d94/cel__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a> %s@%s: <a class="el" href="../../de/d4b/structcolumn.html">column</a> '%s' is not long enough to contain realtime data (needs %<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a>)\n&quot;, table, database, col-&gt;<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, size)</td></tr>
<tr class="separator:a18da797c1ab7394473a9b3c7e13e6f89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0fc1cb3fe8e03194386842057d38085"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#ac0fc1cb3fe8e03194386842057d38085">warn_type</a>(col,  <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>)&#160;&#160;&#160;<a class="el" href="../../d4/dc5/extconf_8c.html#acb8ee436a0c80c66dfcdec6b6bcc6196">ast_log</a>(<a class="el" href="../../d4/dc5/extconf_8c.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, &quot;Realtime <a class="el" href="../../db/d94/cel__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a> %s@%s: <a class="el" href="../../de/d4b/structcolumn.html">column</a> '%s' is of the incorrect <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a> (%<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a>) to contain the required realtime data\n&quot;, table, database, col-&gt;<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, col-&gt;<a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>)</td></tr>
<tr class="separator:ac0fc1cb3fe8e03194386842057d38085"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2cdda2f51ca0d0f04ec61841eb58ddb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#af2cdda2f51ca0d0f04ec61841eb58ddb">WARN_TYPE_OR_LENGTH</a>(n)</td></tr>
<tr class="separator:af2cdda2f51ca0d0f04ec61841eb58ddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a00755f72dd367d528e7ccfd7e37421fe"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#a00755f72dd367d528e7ccfd7e37421fe">__init_rowdata_buf</a> (void)</td></tr>
<tr class="separator:a00755f72dd367d528e7ccfd7e37421fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ff160eb8cc768ef928c90bb61ded670"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#a2ff160eb8cc768ef928c90bb61ded670">__init_sql_buf</a> (void)</td></tr>
<tr class="separator:a2ff160eb8cc768ef928c90bb61ded670"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb539ed4449dca3ae69f5509be91984e"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d18/structast__config.html">ast_config</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#afb539ed4449dca3ae69f5509be91984e">config_odbc</a> (const char *database, const char *<a class="el" href="../../db/d94/cel__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, const char *file, struct <a class="el" href="../../dd/d18/structast__config.html">ast_config</a> *cfg, struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a> flags, const char *sugg_incl, const char *who_asked)</td></tr>
<tr class="separator:afb539ed4449dca3ae69f5509be91984e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6e7f282a8bd52604b583b42e7db4488"><td class="memItemLeft" align="right" valign="top">static SQLHSTMT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#ac6e7f282a8bd52604b583b42e7db4488">config_odbc_prepare</a> (struct <a class="el" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *obj, void *data)</td></tr>
<tr class="separator:ac6e7f282a8bd52604b583b42e7db4488"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fb0770b5d483240183affa19304b681"><td class="memItemLeft" align="right" valign="top">static SQLHSTMT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#a9fb0770b5d483240183affa19304b681">custom_prepare</a> (struct <a class="el" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *obj, void *data)</td></tr>
<tr class="separator:a9fb0770b5d483240183affa19304b681"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3116baa90e2706ec3400f9a67f740350"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#a3116baa90e2706ec3400f9a67f740350">decode_chunk</a> (char *chunk)</td></tr>
<tr class="separator:a3116baa90e2706ec3400f9a67f740350"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed0e5761d2a525fa309d016b08d32d35"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#aed0e5761d2a525fa309d016b08d32d35">destroy_odbc</a> (const char *database, const char *<a class="el" href="../../db/d94/cel__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, const char *keyfield, const char *lookup, const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *fields)</td></tr>
<tr class="memdesc:aed0e5761d2a525fa309d016b08d32d35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Excute an DELETE query.  <a href="#aed0e5761d2a525fa309d016b08d32d35">More...</a><br /></td></tr>
<tr class="separator:aed0e5761d2a525fa309d016b08d32d35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a8606b15adc846dc5c28493b55173bf"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#a7a8606b15adc846dc5c28493b55173bf">is_text</a> (const struct <a class="el" href="../../d0/d5f/structodbc__cache__columns.html">odbc_cache_columns</a> *<a class="el" href="../../de/d4b/structcolumn.html">column</a>)</td></tr>
<tr class="separator:a7a8606b15adc846dc5c28493b55173bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e0c176edfdaa2db390e9becabf752f1"><td class="memItemLeft" align="right" valign="top">static SQLHSTMT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#a2e0c176edfdaa2db390e9becabf752f1">length_determination_odbc_prepare</a> (struct <a class="el" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *obj, void *data)</td></tr>
<tr class="separator:a2e0c176edfdaa2db390e9becabf752f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f3dad4720f125bd072cb0ea6dd3db2e"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d18/structast__config.html">ast_config</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#a7f3dad4720f125bd072cb0ea6dd3db2e">realtime_multi_odbc</a> (const char *database, const char *<a class="el" href="../../db/d94/cel__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *fields)</td></tr>
<tr class="memdesc:a7f3dad4720f125bd072cb0ea6dd3db2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Excute an Select query and return <a class="el" href="../../dd/d18/structast__config.html">ast_config</a> list.  <a href="#a7f3dad4720f125bd072cb0ea6dd3db2e">More...</a><br /></td></tr>
<tr class="separator:a7f3dad4720f125bd072cb0ea6dd3db2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a383ad16b2323bfa24b1b4bef35c5c182"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#a383ad16b2323bfa24b1b4bef35c5c182">realtime_odbc</a> (const char *database, const char *<a class="el" href="../../db/d94/cel__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *fields)</td></tr>
<tr class="memdesc:a383ad16b2323bfa24b1b4bef35c5c182"><td class="mdescLeft">&#160;</td><td class="mdescRight">Excute an SQL query and return <a class="el" href="../../dd/d02/structast__variable.html" title="Structure for variables, used for configurations and for channel variables. ">ast_variable</a> list.  <a href="#a383ad16b2323bfa24b1b4bef35c5c182">More...</a><br /></td></tr>
<tr class="separator:a383ad16b2323bfa24b1b4bef35c5c182"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c6ac25ea7536c0bc9ed18cbcf917527"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#a7c6ac25ea7536c0bc9ed18cbcf917527">reload_module</a> (void)</td></tr>
<tr class="separator:a7c6ac25ea7536c0bc9ed18cbcf917527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dc1c580fd0e6f5ab56a9d9569ca44aa"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#a3dc1c580fd0e6f5ab56a9d9569ca44aa">require_odbc</a> (const char *database, const char *<a class="el" href="../../db/d94/cel__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, va_list ap)</td></tr>
<tr class="separator:a3dc1c580fd0e6f5ab56a9d9569ca44aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad986c4f95a0ccb3b7d2294913024e45d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#ad986c4f95a0ccb3b7d2294913024e45d">store_odbc</a> (const char *database, const char *<a class="el" href="../../db/d94/cel__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *fields)</td></tr>
<tr class="memdesc:ad986c4f95a0ccb3b7d2294913024e45d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Excute an INSERT query.  <a href="#ad986c4f95a0ccb3b7d2294913024e45d">More...</a><br /></td></tr>
<tr class="separator:ad986c4f95a0ccb3b7d2294913024e45d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abde1733d6eda1c716207c2150275a0f7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#abde1733d6eda1c716207c2150275a0f7">unload_odbc</a> (const char *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>, const char *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>)</td></tr>
<tr class="separator:abde1733d6eda1c716207c2150275a0f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbec95ffa18c63da7acb5b03bee9140e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#abbec95ffa18c63da7acb5b03bee9140e">update2_odbc</a> (const char *database, const char *<a class="el" href="../../db/d94/cel__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *lookup_fields, const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *update_fields)</td></tr>
<tr class="memdesc:abbec95ffa18c63da7acb5b03bee9140e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute an UPDATE query.  <a href="#abbec95ffa18c63da7acb5b03bee9140e">More...</a><br /></td></tr>
<tr class="separator:abbec95ffa18c63da7acb5b03bee9140e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6186be46bd20ad42812bfd719cfef978"><td class="memItemLeft" align="right" valign="top">static SQLHSTMT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#a6186be46bd20ad42812bfd719cfef978">update2_prepare</a> (struct <a class="el" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *obj, void *data)</td></tr>
<tr class="separator:a6186be46bd20ad42812bfd719cfef978"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fc1f822b80a7760400c5e6cfe26df7c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#a6fc1f822b80a7760400c5e6cfe26df7c">update_odbc</a> (const char *database, const char *<a class="el" href="../../db/d94/cel__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, const char *keyfield, const char *lookup, const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *fields)</td></tr>
<tr class="memdesc:a6fc1f822b80a7760400c5e6cfe26df7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Excute an UPDATE query.  <a href="#a6fc1f822b80a7760400c5e6cfe26df7c">More...</a><br /></td></tr>
<tr class="separator:a6fc1f822b80a7760400c5e6cfe26df7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Realtime ODBC configuration&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .reload = reload_module, .load_pri = AST_MODPRI_REALTIME_DRIVER, .requires = &quot;extconfig,res_odbc&quot;, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0db7ee1d52bac64062bb76ed957432bb"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d3/d26/structast__config__engine.html">ast_config_engine</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#a0db7ee1d52bac64062bb76ed957432bb">odbc_engine</a></td></tr>
<tr class="separator:a0db7ee1d52bac64062bb76ed957432bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a603158b374bae475b94fc201bbeb2f19"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#a603158b374bae475b94fc201bbeb2f19">rowdata_buf</a> = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../dd/d53/res__config__odbc_8c.html#a00755f72dd367d528e7ccfd7e37421fe">__init_rowdata_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td></tr>
<tr class="separator:a603158b374bae475b94fc201bbeb2f19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc4bfa5a94710e6f323a1033f82425b3"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d53/res__config__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a> = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a2ff160eb8cc768ef928c90bb61ded670">__init_sql_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td></tr>
<tr class="separator:afc4bfa5a94710e6f323a1033f82425b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>odbc+odbc plugin for portable configuration engine </p>
<dl class="section author"><dt>Author</dt><dd>Mark Spencer <a href="#" onclick="location.href='mai'+'lto:'+'mar'+'ks'+'ter'+'@d'+'igi'+'um'+'.co'+'m'; return false;">marks<span style="display: none;">.nosp@m.</span>ter@<span style="display: none;">.nosp@m.</span>digiu<span style="display: none;">.nosp@m.</span>m.co<span style="display: none;">.nosp@m.</span>m</a> </dd>
<dd>
Anthony Minessale II <a href="#" onclick="location.href='mai'+'lto:'+'ant'+'hm'+'ct@'+'ya'+'hoo'+'.c'+'om'; return false;">anthm<span style="display: none;">.nosp@m.</span>ct@y<span style="display: none;">.nosp@m.</span>ahoo.<span style="display: none;">.nosp@m.</span>com</a></dd></dl>
<ul>
<li><a href="http://www.unixodbc.org">http://www.unixodbc.org</a> </li>
</ul>

<p class="definition">Definition in file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a213ff212b1abd119f58f61f5576e13d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a213ff212b1abd119f58f61f5576e13d4">&#9670;&nbsp;</a></span>CHECK_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CHECK_SIZE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">if</span> (col-&gt;size &lt; n) {      \</div><div class="line">                     warn_length(col, n);  \</div><div class="line">                  }                         \</div><div class="line">                  break;</div></div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l01076">require_odbc()</a>.</p>

</div>
</div>
<a id="a4e3336432063231e3a6545c7146ff397"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e3336432063231e3a6545c7146ff397">&#9670;&nbsp;</a></span>ENCODE_CHUNK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ENCODE_CHUNK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">buffer, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00065">65</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00101">custom_prepare()</a>.</p>

</div>
</div>
<a id="a0552f2f0194e062f156929a78374dd55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0552f2f0194e062f156929a78374dd55">&#9670;&nbsp;</a></span>SQL_BUF_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SQL_BUF_SIZE&#160;&#160;&#160;1024</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initial SQL query buffer size to allocate. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00050">50</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00941">config_odbc()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00824">destroy_odbc()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00342">realtime_multi_odbc()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00170">realtime_odbc()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00741">store_odbc()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00675">update2_odbc()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00604">update2_prepare()</a>, and <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00516">update_odbc()</a>.</p>

</div>
</div>
<a id="a18da797c1ab7394473a9b3c7e13e6f89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18da797c1ab7394473a9b3c7e13e6f89">&#9670;&nbsp;</a></span>warn_length</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define warn_length</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">col, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">size&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="../../d4/dc5/extconf_8c.html#acb8ee436a0c80c66dfcdec6b6bcc6196">ast_log</a>(<a class="el" href="../../d4/dc5/extconf_8c.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, &quot;Realtime <a class="el" href="../../db/d94/cel__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a> %s@%s: <a class="el" href="../../de/d4b/structcolumn.html">column</a> '%s' is not long enough to contain realtime data (needs %<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a>)\n&quot;, table, database, col-&gt;<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, size)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l01073">1073</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l01076">require_odbc()</a>.</p>

</div>
</div>
<a id="ac0fc1cb3fe8e03194386842057d38085"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0fc1cb3fe8e03194386842057d38085">&#9670;&nbsp;</a></span>warn_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define warn_type</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">col, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="../../d4/dc5/extconf_8c.html#acb8ee436a0c80c66dfcdec6b6bcc6196">ast_log</a>(<a class="el" href="../../d4/dc5/extconf_8c.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, &quot;Realtime <a class="el" href="../../db/d94/cel__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a> %s@%s: <a class="el" href="../../de/d4b/structcolumn.html">column</a> '%s' is of the incorrect <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a> (%<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a>) to contain the required realtime data\n&quot;, table, database, col-&gt;<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, col-&gt;<a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l01074">1074</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l01076">require_odbc()</a>.</p>

</div>
</div>
<a id="af2cdda2f51ca0d0f04ec61841eb58ddb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2cdda2f51ca0d0f04ec61841eb58ddb">&#9670;&nbsp;</a></span>WARN_TYPE_OR_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WARN_TYPE_OR_LENGTH</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">if</span> (!<a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ab5697a07c1985cb66b0c2f1090e48631">ast_rq_is_int</a>(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>)) {  \</div><div class="line">                     warn_type(col, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>);    \</div><div class="line">                  } <span class="keywordflow">else</span> {                     \</div><div class="line">                     warn_length(col, n);  \</div><div class="line">                  }</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ab5697a07c1985cb66b0c2f1090e48631"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ab5697a07c1985cb66b0c2f1090e48631">ast_rq_is_int</a></div><div class="ttdeci">int ast_rq_is_int(require_type type)</div><div class="ttdoc">Check if require type is an integer type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01240">include/asterisk/config.h:1240</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l01076">require_odbc()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a00755f72dd367d528e7ccfd7e37421fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00755f72dd367d528e7ccfd7e37421fe">&#9670;&nbsp;</a></span>__init_rowdata_buf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __init_rowdata_buf </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00053">53</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;{</div></div><!-- fragment -->
</div>
</div>
<a id="a2ff160eb8cc768ef928c90bb61ded670"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ff160eb8cc768ef928c90bb61ded670">&#9670;&nbsp;</a></span>__init_sql_buf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __init_sql_buf </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00052">52</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;{</div></div><!-- fragment -->
</div>
</div>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l01277">1277</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l01277">1277</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l01277">1277</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

</div>
</div>
<a id="afb539ed4449dca3ae69f5509be91984e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb539ed4449dca3ae69f5509be91984e">&#9670;&nbsp;</a></span>config_odbc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/d18/structast__config.html">ast_config</a>* config_odbc </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d18/structast__config.html">ast_config</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sugg_incl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>who_asked</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00941">941</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02835">ast_category_append()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00832">ast_category_new_dynamic</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02783">ast_config_get_current_category()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l03112">ast_config_internal_load()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00407">ast_odbc_prepare_and_execute()</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00813">ast_odbc_release_obj()</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00121">ast_odbc_request_obj2</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00861">ast_str_thread_get()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01178">ast_variable_append()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">ast_variable_new</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00881">config_odbc_obj::cat_metric</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00882">config_odbc_obj::category</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00914">config_odbc_prepare()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01092">last</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00890">length_determination_odbc_prepare()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00042">RES_ODBC_CONNECTED</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00880">config_odbc_obj::sql</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00052">sql_buf</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00050">SQL_BUF_SIZE</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00883">config_odbc_obj::var_name</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00884">config_odbc_obj::var_val</a>, and <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00885">config_odbc_obj::var_val_size</a>.</p>
<div class="fragment"><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;{</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *new_v;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/db2/structast__category.html">ast_category</a> *cur_cat;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *obj;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *sql = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../dd/d53/res__config__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a>, <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a0552f2f0194e062f156929a78374dd55">SQL_BUF_SIZE</a>);</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> last_cat_metric = 0;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;   SQLSMALLINT rowcount = 0;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;   SQLHSTMT stmt;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ae9dd6bdb4c5c0529195a03583d0d4a8d">last</a>[128] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dda/structconfig__odbc__obj.html">config_odbc_obj</a> q;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> loader_flags = { 0 };</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> connected_flag = { <a class="code" href="../../de/d96/res__odbc_8h.html#a0341d081395407fd92061819ba76eb96aaf8f8c27bee047ce6b85c03a118ed8cd">RES_ODBC_CONNECTED</a> };</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;   memset(&amp;q, 0, <span class="keyword">sizeof</span>(q));</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a> || !strcmp (<a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, <span class="stringliteral">&quot;res_config_odbc.conf&quot;</span>) || !sql) {</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;      <span class="comment">/* cant configure myself with myself ! */</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;   }</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;   obj = <a class="code" href="../../de/d96/res__odbc_8h.html#a0978c986996da2ecb07140f13af20171">ast_odbc_request_obj2</a>(database, connected_flag);</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;   <span class="keywordflow">if</span> (!obj)</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;sql, 0, <span class="stringliteral">&quot;SELECT MAX(LENGTH(var_val)) FROM %s WHERE filename=&#39;%s&#39;&quot;</span>,</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;      <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>);</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;   q.sql = <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql);</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;   stmt = <a class="code" href="../../de/d96/res__odbc_8h.html#ad1e82a2b1ba4eda1924d8b8f591de065">ast_odbc_prepare_and_execute</a>(obj, <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a2e0c176edfdaa2db390e9becabf752f1">length_determination_odbc_prepare</a>, &amp;q);</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;   <span class="keywordflow">if</span> (!stmt) {</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL select error! [%s]\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;   }</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;   res = SQLNumResultCols(stmt, &amp;rowcount);</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;   <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL NumResultCols error! [%s]\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;   }</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;   <span class="keywordflow">if</span> (!rowcount) {</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;found nothing\n&quot;</span>);</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      <span class="keywordflow">return</span> cfg;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;   }</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;   <span class="comment">/* There will be only one result for this, the maximum length of a variable value */</span></div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;   <span class="keywordflow">if</span> (SQLFetch(stmt) == SQL_NO_DATA) {</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Failed to determine maximum length of a configuration value\n&quot;</span>);</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;      SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;   }</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;   <span class="comment">/* Reset stuff to a fresh state for the actual query which will retrieve all configuration */</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;   SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;sql, 0, <span class="stringliteral">&quot;SELECT cat_metric, category, var_name, var_val FROM %s &quot;</span>, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>);</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;sql, 0, <span class="stringliteral">&quot;WHERE filename=&#39;%s&#39; AND commented=0 &quot;</span>, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>);</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;sql, 0, <span class="stringliteral">&quot;ORDER BY cat_metric DESC, var_metric ASC, category, var_name &quot;</span>);</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;   q.sql = <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql);</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;   q.var_val_size += 1;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;   q.var_val = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(q.var_val_size);</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;   <span class="keywordflow">if</span> (!q.var_val) {</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Could not create buffer for reading in configuration values for &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>);</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;   }</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;   stmt = <a class="code" href="../../de/d96/res__odbc_8h.html#ad1e82a2b1ba4eda1924d8b8f591de065">ast_odbc_prepare_and_execute</a>(obj, <a class="code" href="../../dd/d53/res__config__odbc_8c.html#ac6e7f282a8bd52604b583b42e7db4488">config_odbc_prepare</a>, &amp;q);</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;   <span class="keywordflow">if</span> (!stmt) {</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL select error! [%s]\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(q.var_val);</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;   }</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;   res = SQLNumResultCols(stmt, &amp;rowcount);</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;   <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL NumResultCols error! [%s]\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;      SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(q.var_val);</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;   }</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;   <span class="keywordflow">if</span> (!rowcount) {</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;found nothing\n&quot;</span>);</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(q.var_val);</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      <span class="keywordflow">return</span> cfg;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;   }</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;   cur_cat = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a8318c1db5441bf86e175ed45b4fb73c7">ast_config_get_current_category</a>(cfg);</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;   <span class="keywordflow">while</span> ((res = SQLFetch(stmt)) != SQL_NO_DATA) {</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      <span class="keywordflow">if</span> (!strcmp (q.var_name, <span class="stringliteral">&quot;#include&quot;</span>)) {</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a721d5cd60abda2bdd96838336dc09669">ast_config_internal_load</a>(q.var_val, cfg, loader_flags, <span class="stringliteral">&quot;&quot;</span>, who_asked)) {</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;            SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;            <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(q.var_val);</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;         }</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      }</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <span class="keywordflow">if</span> (strcmp(last, q.category) || last_cat_metric != q.cat_metric) {</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;         cur_cat = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ae5deebf8bc8c13fdd4a4dad0110d8b9b">ast_category_new_dynamic</a>(q.category);</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;         <span class="keywordflow">if</span> (!cur_cat) {</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;         }</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;         strcpy(last, q.category);</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;         last_cat_metric   = q.cat_metric;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;         <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aa422e1cc73c1ac4db7ed8cd1a0e36e1a">ast_category_append</a>(cfg, cur_cat);</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;      }</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      new_v = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(q.var_name, q.var_val, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a57a3200e5b440d7135eaf0450ea559fe">ast_variable_append</a>(cur_cat, new_v);</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;   }</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;   SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;   <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(q.var_val);</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;   <span class="keywordflow">return</span> cfg;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;}</div><div class="ttc" id="res__config__odbc_8c_html_ac6e7f282a8bd52604b583b42e7db4488"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#ac6e7f282a8bd52604b583b42e7db4488">config_odbc_prepare</a></div><div class="ttdeci">static SQLHSTMT config_odbc_prepare(struct odbc_obj *obj, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00914">res_config_odbc.c:914</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_a0552f2f0194e062f156929a78374dd55"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a0552f2f0194e062f156929a78374dd55">SQL_BUF_SIZE</a></div><div class="ttdeci">#define SQL_BUF_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00050">res_config_odbc.c:50</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_a2e0c176edfdaa2db390e9becabf752f1"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a2e0c176edfdaa2db390e9becabf752f1">length_determination_odbc_prepare</a></div><div class="ttdeci">static SQLHSTMT length_determination_odbc_prepare(struct odbc_obj *obj, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00890">res_config_odbc.c:890</a></div></div>
<div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a0341d081395407fd92061819ba76eb96aaf8f8c27bee047ce6b85c03a118ed8cd"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a0341d081395407fd92061819ba76eb96aaf8f8c27bee047ce6b85c03a118ed8cd">RES_ODBC_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00042">res_odbc.h:42</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a8318c1db5441bf86e175ed45b4fb73c7"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a8318c1db5441bf86e175ed45b4fb73c7">ast_config_get_current_category</a></div><div class="ttdeci">struct ast_category * ast_config_get_current_category(const struct ast_config *cfg)</div><div class="ttdoc">Retrieve the current category name being built. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02783">extconf.c:2783</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a0978c986996da2ecb07140f13af20171"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a0978c986996da2ecb07140f13af20171">ast_odbc_request_obj2</a></div><div class="ttdeci">#define ast_odbc_request_obj2(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00121">res_odbc.h:121</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__category_html"><div class="ttname"><a href="../../d7/db2/structast__category.html">ast_category</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00225">main/config.c:225</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a721d5cd60abda2bdd96838336dc09669"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a721d5cd60abda2bdd96838336dc09669">ast_config_internal_load</a></div><div class="ttdeci">struct ast_config * ast_config_internal_load(const char *configfile, struct ast_config *cfg, struct ast_flags flags, const char *suggested_incl_file, const char *who_asked)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03112">main/config.c:3112</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_a68d1e6e752f2cf81551fac543cae108a"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a></div><div class="ttdeci">static char * table</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00058">cdr_odbc.c:58</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structodbc__obj_html"><div class="ttname"><a href="../../df/d36/structodbc__obj.html">odbc_obj</a></div><div class="ttdoc">ODBC container. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00046">res_odbc.h:46</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ae9dd6bdb4c5c0529195a03583d0d4a8d"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ae9dd6bdb4c5c0529195a03583d0d4a8d">last</a></div><div class="ttdeci">struct sla_ringing_trunk * last</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01092">app_meetme.c:1092</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a66581086d34dfe7ea86b0644bacef239"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a></div><div class="ttdeci">#define ast_variable_new(name, value, filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">include/asterisk/config.h:914</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="structconfig__odbc__obj_html"><div class="ttname"><a href="../../dc/dda/structconfig__odbc__obj.html">config_odbc_obj</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00879">res_config_odbc.c:879</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_afc4bfa5a94710e6f323a1033f82425b3"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a></div><div class="ttdeci">static struct ast_threadstorage sql_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00052">res_config_odbc.c:52</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ae5deebf8bc8c13fdd4a4dad0110d8b9b"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ae5deebf8bc8c13fdd4a4dad0110d8b9b">ast_category_new_dynamic</a></div><div class="ttdeci">#define ast_category_new_dynamic(name)</div><div class="ttdoc">Create a category that is not backed by a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00832">include/asterisk/config.h:832</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a57a3200e5b440d7135eaf0450ea559fe"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a57a3200e5b440d7135eaf0450ea559fe">ast_variable_append</a></div><div class="ttdeci">void ast_variable_append(struct ast_category *category, struct ast_variable *variable)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01178">extconf.c:1178</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aa422e1cc73c1ac4db7ed8cd1a0e36e1a"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aa422e1cc73c1ac4db7ed8cd1a0e36e1a">ast_category_append</a></div><div class="ttdeci">void ast_category_append(struct ast_config *config, struct ast_category *cat)</div><div class="ttdoc">Appends a category to a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02835">extconf.c:2835</a></div></div>
<div class="ttc" id="res__odbc_8h_html_ad1e82a2b1ba4eda1924d8b8f591de065"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#ad1e82a2b1ba4eda1924d8b8f591de065">ast_odbc_prepare_and_execute</a></div><div class="ttdeci">SQLHSTMT ast_odbc_prepare_and_execute(struct odbc_obj *obj, SQLHSTMT(*prepare_cb)(struct odbc_obj *obj, void *data), void *data)</div><div class="ttdoc">Prepares, executes, and returns the resulting statement handle. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00407">res_odbc.c:407</a></div></div>
<div class="ttc" id="strings_8h_html_afe8f5f844f2fd5f5bd5d0be5ef671481"><div class="ttname"><a href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a></div><div class="ttdeci">struct ast_str * ast_str_thread_get(struct ast_threadstorage *ts, size_t init_len)</div><div class="ttdoc">Retrieve a thread locally stored dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00861">strings.h:861</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a78d14d1dd01c269c9c0a47b49475eeea"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a></div><div class="ttdeci">void ast_odbc_release_obj(struct odbc_obj *obj)</div><div class="ttdoc">Releases an ODBC object previously allocated by ast_odbc_request_obj() </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00813">res_odbc.c:813</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac6e7f282a8bd52604b583b42e7db4488"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6e7f282a8bd52604b583b42e7db4488">&#9670;&nbsp;</a></span>config_odbc_prepare()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static SQLHSTMT config_odbc_prepare </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00914">914</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00463">ast_odbc_prepare()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00881">config_odbc_obj::cat_metric</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00882">config_odbc_obj::category</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00047">odbc_obj::con</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00886">config_odbc_obj::err</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00880">config_odbc_obj::sql</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00883">config_odbc_obj::var_name</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00884">config_odbc_obj::var_val</a>, and <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00885">config_odbc_obj::var_val_size</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00941">config_odbc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;{</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dda/structconfig__odbc__obj.html">config_odbc_obj</a> *q = data;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;   SQLHSTMT sth;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;   res = SQLAllocHandle(SQL_HANDLE_STMT, obj-&gt;<a class="code" href="../../df/d36/structodbc__obj.html#ae83918cc26dc7acd65bbec1712593054">con</a>, &amp;sth);</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;   <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;Failure in AllocStatement %d\n&quot;</span>, res);</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;   }</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;   res = <a class="code" href="../../de/d96/res__odbc_8h.html#a6c76549f7fd9feafdca9bf90f57f224a">ast_odbc_prepare</a>(obj, sth, q-&gt;<a class="code" href="../../dc/dda/structconfig__odbc__obj.html#aa29adf0df91c751c5cae685ca18a251f">sql</a>);</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;   <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;Error in PREPARE %d\n&quot;</span>, res);</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      SQLFreeHandle(SQL_HANDLE_STMT, sth);</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;   }</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;   SQLBindCol(sth, 1, SQL_C_ULONG, &amp;q-&gt;<a class="code" href="../../dc/dda/structconfig__odbc__obj.html#ab6bb5904c99ac1f6e8d0c5c01906bcee">cat_metric</a>, <span class="keyword">sizeof</span>(q-&gt;<a class="code" href="../../dc/dda/structconfig__odbc__obj.html#ab6bb5904c99ac1f6e8d0c5c01906bcee">cat_metric</a>), &amp;q-&gt;<a class="code" href="../../dc/dda/structconfig__odbc__obj.html#ae0939ba7a2bc12cb6133bdc725042d53">err</a>);</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;   SQLBindCol(sth, 2, SQL_C_CHAR, q-&gt;<a class="code" href="../../dc/dda/structconfig__odbc__obj.html#ac8e3112aeb70e89066f72305634d9f27">category</a>, <span class="keyword">sizeof</span>(q-&gt;<a class="code" href="../../dc/dda/structconfig__odbc__obj.html#ac8e3112aeb70e89066f72305634d9f27">category</a>), &amp;q-&gt;<a class="code" href="../../dc/dda/structconfig__odbc__obj.html#ae0939ba7a2bc12cb6133bdc725042d53">err</a>);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;   SQLBindCol(sth, 3, SQL_C_CHAR, q-&gt;<a class="code" href="../../dc/dda/structconfig__odbc__obj.html#a22ce82b4fe59529e6991e574277c993c">var_name</a>, <span class="keyword">sizeof</span>(q-&gt;<a class="code" href="../../dc/dda/structconfig__odbc__obj.html#a22ce82b4fe59529e6991e574277c993c">var_name</a>), &amp;q-&gt;<a class="code" href="../../dc/dda/structconfig__odbc__obj.html#ae0939ba7a2bc12cb6133bdc725042d53">err</a>);</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;   SQLBindCol(sth, 4, SQL_C_CHAR, q-&gt;<a class="code" href="../../dc/dda/structconfig__odbc__obj.html#a183fbca5747339460be87a955783b634">var_val</a>, q-&gt;<a class="code" href="../../dc/dda/structconfig__odbc__obj.html#aac5e8f60e0219a825acf9e415b7f1ac2">var_val_size</a>, &amp;q-&gt;<a class="code" href="../../dc/dda/structconfig__odbc__obj.html#ae0939ba7a2bc12cb6133bdc725042d53">err</a>);</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;   <span class="keywordflow">return</span> sth;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;}</div><div class="ttc" id="structodbc__obj_html_ae83918cc26dc7acd65bbec1712593054"><div class="ttname"><a href="../../df/d36/structodbc__obj.html#ae83918cc26dc7acd65bbec1712593054">odbc_obj::con</a></div><div class="ttdeci">SQLHDBC con</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00047">res_odbc.h:47</a></div></div>
<div class="ttc" id="structconfig__odbc__obj_html_aa29adf0df91c751c5cae685ca18a251f"><div class="ttname"><a href="../../dc/dda/structconfig__odbc__obj.html#aa29adf0df91c751c5cae685ca18a251f">config_odbc_obj::sql</a></div><div class="ttdeci">char * sql</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00880">res_config_odbc.c:880</a></div></div>
<div class="ttc" id="structconfig__odbc__obj_html_ab6bb5904c99ac1f6e8d0c5c01906bcee"><div class="ttname"><a href="../../dc/dda/structconfig__odbc__obj.html#ab6bb5904c99ac1f6e8d0c5c01906bcee">config_odbc_obj::cat_metric</a></div><div class="ttdeci">unsigned long cat_metric</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00881">res_config_odbc.c:881</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a6c76549f7fd9feafdca9bf90f57f224a"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a6c76549f7fd9feafdca9bf90f57f224a">ast_odbc_prepare</a></div><div class="ttdeci">int ast_odbc_prepare(struct odbc_obj *obj, SQLHSTMT *stmt, const char *sql)</div><div class="ttdoc">Prepares a SQL query on a statement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00463">res_odbc.c:463</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="structconfig__odbc__obj_html_a22ce82b4fe59529e6991e574277c993c"><div class="ttname"><a href="../../dc/dda/structconfig__odbc__obj.html#a22ce82b4fe59529e6991e574277c993c">config_odbc_obj::var_name</a></div><div class="ttdeci">char var_name[128]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00883">res_config_odbc.c:883</a></div></div>
<div class="ttc" id="structconfig__odbc__obj_html_aac5e8f60e0219a825acf9e415b7f1ac2"><div class="ttname"><a href="../../dc/dda/structconfig__odbc__obj.html#aac5e8f60e0219a825acf9e415b7f1ac2">config_odbc_obj::var_val_size</a></div><div class="ttdeci">unsigned long var_val_size</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00885">res_config_odbc.c:885</a></div></div>
<div class="ttc" id="structconfig__odbc__obj_html"><div class="ttname"><a href="../../dc/dda/structconfig__odbc__obj.html">config_odbc_obj</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00879">res_config_odbc.c:879</a></div></div>
<div class="ttc" id="structconfig__odbc__obj_html_ac8e3112aeb70e89066f72305634d9f27"><div class="ttname"><a href="../../dc/dda/structconfig__odbc__obj.html#ac8e3112aeb70e89066f72305634d9f27">config_odbc_obj::category</a></div><div class="ttdeci">char category[128]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00882">res_config_odbc.c:882</a></div></div>
<div class="ttc" id="structconfig__odbc__obj_html_a183fbca5747339460be87a955783b634"><div class="ttname"><a href="../../dc/dda/structconfig__odbc__obj.html#a183fbca5747339460be87a955783b634">config_odbc_obj::var_val</a></div><div class="ttdeci">char * var_val</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00884">res_config_odbc.c:884</a></div></div>
<div class="ttc" id="structconfig__odbc__obj_html_ae0939ba7a2bc12cb6133bdc725042d53"><div class="ttname"><a href="../../dc/dda/structconfig__odbc__obj.html#ae0939ba7a2bc12cb6133bdc725042d53">config_odbc_obj::err</a></div><div class="ttdeci">SQLLEN err</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00886">res_config_odbc.c:886</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9fb0770b5d483240183affa19304b681"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fb0770b5d483240183affa19304b681">&#9670;&nbsp;</a></span>custom_prepare()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static SQLHSTMT custom_prepare </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00101">101</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00463">ast_odbc_prepare()</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00524">ast_odbc_print_errors()</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00047">odbc_obj::con</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00065">ENCODE_CHUNK</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00060">custom_prepare_struct::encoding</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00057">custom_prepare_struct::extra</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00061">custom_prepare_struct::fields</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00062">custom_prepare_struct::skip</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00056">custom_prepare_struct::sql</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00824">destroy_odbc()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00342">realtime_multi_odbc()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00170">realtime_odbc()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00741">store_odbc()</a>, and <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00516">update_odbc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;{</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;   <span class="keywordtype">int</span> res, x = 1, count = 0;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d27/structcustom__prepare__struct.html">custom_prepare_struct</a> *cps = data;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *field;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;   <span class="keywordtype">char</span> encodebuf[1024];</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;   SQLHSTMT stmt;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;   res = SQLAllocHandle(SQL_HANDLE_STMT, obj-&gt;<a class="code" href="../../df/d36/structodbc__obj.html#ae83918cc26dc7acd65bbec1712593054">con</a>, &amp;stmt);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;   <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL Alloc Handle failed!\n&quot;</span>);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;   }</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Skip: %llu; SQL: %s\n&quot;</span>, cps-&gt;<a class="code" href="../../d8/d27/structcustom__prepare__struct.html#a6ee44de20e6dfc70683517f91ecbc053">skip</a>, cps-&gt;<a class="code" href="../../d8/d27/structcustom__prepare__struct.html#aecb2dd0da01a12f0e48213d6d9f3c5af">sql</a>);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;   res = <a class="code" href="../../de/d96/res__odbc_8h.html#a6c76549f7fd9feafdca9bf90f57f224a">ast_odbc_prepare</a>(obj, stmt, cps-&gt;<a class="code" href="../../d8/d27/structcustom__prepare__struct.html#aecb2dd0da01a12f0e48213d6d9f3c5af">sql</a>);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      <span class="keywordflow">if</span> (res == SQL_ERROR) {</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;         <a class="code" href="../../de/d96/res__odbc_8h.html#ae8bac75406e67636f01296b915d8183f">ast_odbc_print_errors</a>(SQL_HANDLE_STMT, stmt, <span class="stringliteral">&quot;SQL Prepare&quot;</span>);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      }</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL Prepare failed! [%s]\n&quot;</span>, cps-&gt;<a class="code" href="../../d8/d27/structcustom__prepare__struct.html#aecb2dd0da01a12f0e48213d6d9f3c5af">sql</a>);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      SQLFreeHandle (SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;   }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;   <span class="keywordflow">for</span> (field = cps-&gt;<a class="code" href="../../d8/d27/structcustom__prepare__struct.html#aed2d94a6fe15ec228d25838ea61f6a94">fields</a>; field; field = field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *newval = field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      <span class="keywordflow">if</span> ((1LL &lt;&lt; count++) &amp; cps-&gt;<a class="code" href="../../d8/d27/structcustom__prepare__struct.html#a6ee44de20e6dfc70683517f91ecbc053">skip</a>) {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Skipping field &#39;%s&#39;=&#39;%s&#39; (%llo/%llo)\n&quot;</span>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, newval, 1ULL &lt;&lt; (count - 1), cps-&gt;<a class="code" href="../../d8/d27/structcustom__prepare__struct.html#a6ee44de20e6dfc70683517f91ecbc053">skip</a>);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      }</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Parameter %d (&#39;%s&#39;) = &#39;%s&#39;\n&quot;</span>, x, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, newval);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <span class="keywordflow">if</span> (strchr(newval, <span class="charliteral">&#39;;&#39;</span>) || strchr(newval, <span class="charliteral">&#39;^&#39;</span>)) {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;         <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a4e3336432063231e3a6545c7146ff397">ENCODE_CHUNK</a>(encodebuf, newval);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;         <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cps, <a class="code" href="../../dd/d22/cdr__pgsql_8c.html#abfd0452ce0a5ba319ea4d624dc209250">encoding</a>[x], encodebuf);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;         newval = cps-&gt;<a class="code" href="../../d8/d27/structcustom__prepare__struct.html#a5cdf40e9b661e0cebcd4cf6ab909bc50">encoding</a>[x];</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      SQLBindParameter(stmt, x++, SQL_PARAM_INPUT, SQL_C_CHAR, SQL_CHAR, strlen(newval), 0, (<span class="keywordtype">void</span> *)newval, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;   }</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cps-&gt;<a class="code" href="../../d8/d27/structcustom__prepare__struct.html#a270601ef08727b13b7b159b0a9dcc18b">extra</a>)) {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *newval = cps-&gt;<a class="code" href="../../d8/d27/structcustom__prepare__struct.html#a270601ef08727b13b7b159b0a9dcc18b">extra</a>;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Parameter %d = &#39;%s&#39;\n&quot;</span>, x, newval);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="keywordflow">if</span> (strchr(newval, <span class="charliteral">&#39;;&#39;</span>) || strchr(newval, <span class="charliteral">&#39;^&#39;</span>)) {</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;         <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a4e3336432063231e3a6545c7146ff397">ENCODE_CHUNK</a>(encodebuf, newval);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;         <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cps, <a class="code" href="../../dd/d22/cdr__pgsql_8c.html#abfd0452ce0a5ba319ea4d624dc209250">encoding</a>[x], encodebuf);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;         newval = cps-&gt;<a class="code" href="../../d8/d27/structcustom__prepare__struct.html#a5cdf40e9b661e0cebcd4cf6ab909bc50">encoding</a>[x];</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      }</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      SQLBindParameter(stmt, x++, SQL_PARAM_INPUT, SQL_C_CHAR, SQL_CHAR, strlen(newval), 0, (<span class="keywordtype">void</span> *)newval, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   }</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;   <span class="keywordflow">return</span> stmt;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;}</div><div class="ttc" id="structodbc__obj_html_ae83918cc26dc7acd65bbec1712593054"><div class="ttname"><a href="../../df/d36/structodbc__obj.html#ae83918cc26dc7acd65bbec1712593054">odbc_obj::con</a></div><div class="ttdeci">SQLHDBC con</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00047">res_odbc.h:47</a></div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html_aecb2dd0da01a12f0e48213d6d9f3c5af"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html#aecb2dd0da01a12f0e48213d6d9f3c5af">custom_prepare_struct::sql</a></div><div class="ttdeci">const char * sql</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00056">res_config_odbc.c:56</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a6c76549f7fd9feafdca9bf90f57f224a"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a6c76549f7fd9feafdca9bf90f57f224a">ast_odbc_prepare</a></div><div class="ttdeci">int ast_odbc_prepare(struct odbc_obj *obj, SQLHSTMT *stmt, const char *sql)</div><div class="ttdoc">Prepares a SQL query on a statement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00463">res_odbc.c:463</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html_aed2d94a6fe15ec228d25838ea61f6a94"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html#aed2d94a6fe15ec228d25838ea61f6a94">custom_prepare_struct::fields</a></div><div class="ttdeci">const struct ast_variable * fields</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00061">res_config_odbc.c:61</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="res__odbc_8h_html_ae8bac75406e67636f01296b915d8183f"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#ae8bac75406e67636f01296b915d8183f">ast_odbc_print_errors</a></div><div class="ttdeci">struct ast_str * ast_odbc_print_errors(SQLSMALLINT handle_type, SQLHANDLE handle, const char *operation)</div><div class="ttdoc">Shortcut for printing errors to logs after a failed SQL operation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00524">res_odbc.c:524</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html">custom_prepare_struct</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00055">res_config_odbc.c:55</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html_a5cdf40e9b661e0cebcd4cf6ab909bc50"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html#a5cdf40e9b661e0cebcd4cf6ab909bc50">custom_prepare_struct::encoding</a></div><div class="ttdeci">const ast_string_field encoding[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00060">res_config_odbc.c:60</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html_a270601ef08727b13b7b159b0a9dcc18b"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html#a270601ef08727b13b7b159b0a9dcc18b">custom_prepare_struct::extra</a></div><div class="ttdeci">const char * extra</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00057">res_config_odbc.c:57</a></div></div>
<div class="ttc" id="cdr__pgsql_8c_html_abfd0452ce0a5ba319ea4d624dc209250"><div class="ttname"><a href="../../dd/d22/cdr__pgsql_8c.html#abfd0452ce0a5ba319ea4d624dc209250">encoding</a></div><div class="ttdeci">static char * encoding</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d22/cdr__pgsql_8c_source.html#l00074">cdr_pgsql.c:74</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_a4e3336432063231e3a6545c7146ff397"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a4e3336432063231e3a6545c7146ff397">ENCODE_CHUNK</a></div><div class="ttdeci">#define ENCODE_CHUNK(buffer, s)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00065">res_config_odbc.c:65</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html_a6ee44de20e6dfc70683517f91ecbc053"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html#a6ee44de20e6dfc70683517f91ecbc053">custom_prepare_struct::skip</a></div><div class="ttdeci">unsigned long long skip</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00062">res_config_odbc.c:62</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3116baa90e2706ec3400f9a67f740350"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3116baa90e2706ec3400f9a67f740350">&#9670;&nbsp;</a></span>decode_chunk()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void decode_chunk </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>chunk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00085">85</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00342">realtime_multi_odbc()</a>, and <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00170">realtime_odbc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;{</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;   <span class="keywordflow">for</span> (; *chunk; chunk++) {</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <span class="keywordflow">if</span> (*chunk == <span class="charliteral">&#39;^&#39;</span> &amp;&amp; strchr(<span class="stringliteral">&quot;0123456789ABCDEF&quot;</span>, chunk[1]) &amp;&amp; strchr(<span class="stringliteral">&quot;0123456789ABCDEF&quot;</span>, chunk[2])) {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;         sscanf(chunk + 1, <span class="stringliteral">&quot;%02hhX&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)chunk);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;         memmove(chunk + 1, chunk + 3, strlen(chunk + 3) + 1);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      }</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;   }</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="aed0e5761d2a525fa309d016b08d32d35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed0e5761d2a525fa309d016b08d32d35">&#9670;&nbsp;</a></span>destroy_odbc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int destroy_odbc </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>keyfield</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>lookup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>fields</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Excute an DELETE query. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">database</td><td></td></tr>
    <tr><td class="paramname">table</td><td></td></tr>
    <tr><td class="paramname">keyfield</td><td>where clause field </td></tr>
    <tr><td class="paramname">lookup</td><td>value of field for where clause </td></tr>
    <tr><td class="paramname">ap</td><td>list containing one or more field/value set(s)</td></tr>
  </table>
  </dd>
</dl>
<p>Delete a row from a database table, prepare the sql statement using keyfield and lookup control the number of records to change. Additional params to match rows are stored in ap list. Sub-in the values to the prepared statement and execute it.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">number</td><td>of rows affected </td></tr>
    <tr><td class="paramname">-1</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00824">824</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00407">ast_odbc_prepare_and_execute()</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00813">ast_odbc_release_obj()</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00121">ast_odbc_request_obj2</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00861">ast_str_thread_get()</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00368">ast_string_field_free_memory</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00353">ast_string_field_init</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00101">custom_prepare()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00057">custom_prepare_struct::extra</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00061">custom_prepare_struct::fields</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00042">RES_ODBC_CONNECTED</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00056">custom_prepare_struct::sql</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00052">sql_buf</a>, and <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00050">SQL_BUF_SIZE</a>.</p>
<div class="fragment"><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;{</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *obj;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;   SQLHSTMT stmt;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;   SQLLEN rowcount=0;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *sql = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../dd/d53/res__config__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a>, <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a0552f2f0194e062f156929a78374dd55">SQL_BUF_SIZE</a>);</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *field;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d27/structcustom__prepare__struct.html">custom_prepare_struct</a> cps = { .<a class="code" href="../../d8/d27/structcustom__prepare__struct.html#a270601ef08727b13b7b159b0a9dcc18b">extra</a> = lookup, .fields = <a class="code" href="../../d8/d27/structcustom__prepare__struct.html#aed2d94a6fe15ec228d25838ea61f6a94">fields</a>, };</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> connected_flag = { <a class="code" href="../../de/d96/res__odbc_8h.html#a0341d081395407fd92061819ba76eb96aaf8f8c27bee047ce6b85c03a118ed8cd">RES_ODBC_CONNECTED</a> };</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a> || !sql) {</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;   }</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;   obj = <a class="code" href="../../de/d96/res__odbc_8h.html#a0978c986996da2ecb07140f13af20171">ast_odbc_request_obj2</a>(database, connected_flag);</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;   <span class="keywordflow">if</span> (!obj) {</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;   }</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;sql, 0, <span class="stringliteral">&quot;DELETE FROM %s WHERE &quot;</span>, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>);</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;   <span class="keywordflow">for</span> (field = fields; field; field = field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;sql, 0, <span class="stringliteral">&quot;%s=? AND &quot;</span>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;   }</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;sql, 0, <span class="stringliteral">&quot;%s=?&quot;</span>, keyfield);</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;   cps.<a class="code" href="../../d8/d27/structcustom__prepare__struct.html#aecb2dd0da01a12f0e48213d6d9f3c5af">sql</a> = <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql);</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a>(&amp;cps, 256)) {</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;   }</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;   stmt = <a class="code" href="../../de/d96/res__odbc_8h.html#ad1e82a2b1ba4eda1924d8b8f591de065">ast_odbc_prepare_and_execute</a>(obj, <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a9fb0770b5d483240183affa19304b681">custom_prepare</a>, &amp;cps);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a>(&amp;cps);</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;   <span class="keywordflow">if</span> (!stmt) {</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;   }</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;   res = SQLRowCount(stmt, &amp;rowcount);</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;   SQLFreeHandle (SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;   <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;   <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL Row Count error! [%s]\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;   }</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;   <span class="keywordflow">if</span> (rowcount &gt;= 0)</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)rowcount;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;}</div><div class="ttc" id="res__config__odbc_8c_html_a0552f2f0194e062f156929a78374dd55"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a0552f2f0194e062f156929a78374dd55">SQL_BUF_SIZE</a></div><div class="ttdeci">#define SQL_BUF_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00050">res_config_odbc.c:50</a></div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html_aecb2dd0da01a12f0e48213d6d9f3c5af"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html#aecb2dd0da01a12f0e48213d6d9f3c5af">custom_prepare_struct::sql</a></div><div class="ttdeci">const char * sql</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00056">res_config_odbc.c:56</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a0341d081395407fd92061819ba76eb96aaf8f8c27bee047ce6b85c03a118ed8cd"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a0341d081395407fd92061819ba76eb96aaf8f8c27bee047ce6b85c03a118ed8cd">RES_ODBC_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00042">res_odbc.h:42</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a0978c986996da2ecb07140f13af20171"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a0978c986996da2ecb07140f13af20171">ast_odbc_request_obj2</a></div><div class="ttdeci">#define ast_odbc_request_obj2(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00121">res_odbc.h:121</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html_aed2d94a6fe15ec228d25838ea61f6a94"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html#aed2d94a6fe15ec228d25838ea61f6a94">custom_prepare_struct::fields</a></div><div class="ttdeci">const struct ast_variable * fields</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00061">res_config_odbc.c:61</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_a68d1e6e752f2cf81551fac543cae108a"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a></div><div class="ttdeci">static char * table</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00058">cdr_odbc.c:58</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structodbc__obj_html"><div class="ttname"><a href="../../df/d36/structodbc__obj.html">odbc_obj</a></div><div class="ttdoc">ODBC container. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00046">res_odbc.h:46</a></div></div>
<div class="ttc" id="stringfields_8h_html_a871274fa4fd2687c7a44849a84df3665"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a></div><div class="ttdeci">#define ast_string_field_init(x, size)</div><div class="ttdoc">Initialize a field pool and fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00353">stringfields.h:353</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_a9fb0770b5d483240183affa19304b681"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a9fb0770b5d483240183affa19304b681">custom_prepare</a></div><div class="ttdeci">static SQLHSTMT custom_prepare(struct odbc_obj *obj, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00101">res_config_odbc.c:101</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_afc4bfa5a94710e6f323a1033f82425b3"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a></div><div class="ttdeci">static struct ast_threadstorage sql_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00052">res_config_odbc.c:52</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html">custom_prepare_struct</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00055">res_config_odbc.c:55</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="res__odbc_8h_html_ad1e82a2b1ba4eda1924d8b8f591de065"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#ad1e82a2b1ba4eda1924d8b8f591de065">ast_odbc_prepare_and_execute</a></div><div class="ttdeci">SQLHSTMT ast_odbc_prepare_and_execute(struct odbc_obj *obj, SQLHSTMT(*prepare_cb)(struct odbc_obj *obj, void *data), void *data)</div><div class="ttdoc">Prepares, executes, and returns the resulting statement handle. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00407">res_odbc.c:407</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html_a270601ef08727b13b7b159b0a9dcc18b"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html#a270601ef08727b13b7b159b0a9dcc18b">custom_prepare_struct::extra</a></div><div class="ttdeci">const char * extra</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00057">res_config_odbc.c:57</a></div></div>
<div class="ttc" id="strings_8h_html_afe8f5f844f2fd5f5bd5d0be5ef671481"><div class="ttname"><a href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a></div><div class="ttdeci">struct ast_str * ast_str_thread_get(struct ast_threadstorage *ts, size_t init_len)</div><div class="ttdoc">Retrieve a thread locally stored dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00861">strings.h:861</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a78d14d1dd01c269c9c0a47b49475eeea"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a></div><div class="ttdeci">void ast_odbc_release_obj(struct odbc_obj *obj)</div><div class="ttdoc">Releases an ODBC object previously allocated by ast_odbc_request_obj() </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00813">res_odbc.c:813</a></div></div>
<div class="ttc" id="stringfields_8h_html_abf60f862ae6a141d2f86a0f5e82792de"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a></div><div class="ttdeci">#define ast_string_field_free_memory(x)</div><div class="ttdoc">free all memory - to be called before destroying the object </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00368">stringfields.h:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7a8606b15adc846dc5c28493b55173bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a8606b15adc846dc5c28493b55173bf">&#9670;&nbsp;</a></span>is_text()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int is_text </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d0/d5f/structodbc__cache__columns.html">odbc_cache_columns</a> *&#160;</td>
          <td class="paramname"><em>column</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00095">95</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00061">odbc_cache_columns::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00516">update_odbc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;{</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;   <span class="keywordflow">return</span> column-&gt;<a class="code" href="../../d0/d5f/structodbc__cache__columns.html#a713b6299f1d41d81cf4fec75082f0033">type</a> == SQL_CHAR || column-&gt;<a class="code" href="../../d0/d5f/structodbc__cache__columns.html#a713b6299f1d41d81cf4fec75082f0033">type</a> == SQL_VARCHAR || column-&gt;<a class="code" href="../../d0/d5f/structodbc__cache__columns.html#a713b6299f1d41d81cf4fec75082f0033">type</a> == SQL_LONGVARCHAR</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      || column-&gt;<a class="code" href="../../d0/d5f/structodbc__cache__columns.html#a713b6299f1d41d81cf4fec75082f0033">type</a> == SQL_WCHAR || column-&gt;<a class="code" href="../../d0/d5f/structodbc__cache__columns.html#a713b6299f1d41d81cf4fec75082f0033">type</a> == SQL_WVARCHAR || column-&gt;<a class="code" href="../../d0/d5f/structodbc__cache__columns.html#a713b6299f1d41d81cf4fec75082f0033">type</a> == SQL_WLONGVARCHAR;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;}</div><div class="ttc" id="structodbc__cache__columns_html_a713b6299f1d41d81cf4fec75082f0033"><div class="ttname"><a href="../../d0/d5f/structodbc__cache__columns.html#a713b6299f1d41d81cf4fec75082f0033">odbc_cache_columns::type</a></div><div class="ttdeci">SQLSMALLINT type</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00061">res_odbc.h:61</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2e0c176edfdaa2db390e9becabf752f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e0c176edfdaa2db390e9becabf752f1">&#9670;&nbsp;</a></span>length_determination_odbc_prepare()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static SQLHSTMT length_determination_odbc_prepare </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00890">890</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00463">ast_odbc_prepare()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00047">odbc_obj::con</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00886">config_odbc_obj::err</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00880">config_odbc_obj::sql</a>, and <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00885">config_odbc_obj::var_val_size</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00941">config_odbc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;{</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dda/structconfig__odbc__obj.html">config_odbc_obj</a> *q = data;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;   SQLHSTMT sth;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;   res = SQLAllocHandle(SQL_HANDLE_STMT, obj-&gt;<a class="code" href="../../df/d36/structodbc__obj.html#ae83918cc26dc7acd65bbec1712593054">con</a>, &amp;sth);</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;   <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;Failure in AllocStatement %d\n&quot;</span>, res);</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;   }</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;   res = <a class="code" href="../../de/d96/res__odbc_8h.html#a6c76549f7fd9feafdca9bf90f57f224a">ast_odbc_prepare</a>(obj, sth, q-&gt;<a class="code" href="../../dc/dda/structconfig__odbc__obj.html#aa29adf0df91c751c5cae685ca18a251f">sql</a>);</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;   <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;Error in PREPARE %d\n&quot;</span>, res);</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      SQLFreeHandle(SQL_HANDLE_STMT, sth);</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;   }</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;   SQLBindCol(sth, 1, SQL_C_ULONG, &amp;q-&gt;<a class="code" href="../../dc/dda/structconfig__odbc__obj.html#aac5e8f60e0219a825acf9e415b7f1ac2">var_val_size</a>, <span class="keyword">sizeof</span>(q-&gt;<a class="code" href="../../dc/dda/structconfig__odbc__obj.html#aac5e8f60e0219a825acf9e415b7f1ac2">var_val_size</a>), &amp;q-&gt;<a class="code" href="../../dc/dda/structconfig__odbc__obj.html#ae0939ba7a2bc12cb6133bdc725042d53">err</a>);</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;   <span class="keywordflow">return</span> sth;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;}</div><div class="ttc" id="structodbc__obj_html_ae83918cc26dc7acd65bbec1712593054"><div class="ttname"><a href="../../df/d36/structodbc__obj.html#ae83918cc26dc7acd65bbec1712593054">odbc_obj::con</a></div><div class="ttdeci">SQLHDBC con</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00047">res_odbc.h:47</a></div></div>
<div class="ttc" id="structconfig__odbc__obj_html_aa29adf0df91c751c5cae685ca18a251f"><div class="ttname"><a href="../../dc/dda/structconfig__odbc__obj.html#aa29adf0df91c751c5cae685ca18a251f">config_odbc_obj::sql</a></div><div class="ttdeci">char * sql</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00880">res_config_odbc.c:880</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a6c76549f7fd9feafdca9bf90f57f224a"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a6c76549f7fd9feafdca9bf90f57f224a">ast_odbc_prepare</a></div><div class="ttdeci">int ast_odbc_prepare(struct odbc_obj *obj, SQLHSTMT *stmt, const char *sql)</div><div class="ttdoc">Prepares a SQL query on a statement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00463">res_odbc.c:463</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="structconfig__odbc__obj_html_aac5e8f60e0219a825acf9e415b7f1ac2"><div class="ttname"><a href="../../dc/dda/structconfig__odbc__obj.html#aac5e8f60e0219a825acf9e415b7f1ac2">config_odbc_obj::var_val_size</a></div><div class="ttdeci">unsigned long var_val_size</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00885">res_config_odbc.c:885</a></div></div>
<div class="ttc" id="structconfig__odbc__obj_html"><div class="ttname"><a href="../../dc/dda/structconfig__odbc__obj.html">config_odbc_obj</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00879">res_config_odbc.c:879</a></div></div>
<div class="ttc" id="structconfig__odbc__obj_html_ae0939ba7a2bc12cb6133bdc725042d53"><div class="ttname"><a href="../../dc/dda/structconfig__odbc__obj.html#ae0939ba7a2bc12cb6133bdc725042d53">config_odbc_obj::err</a></div><div class="ttdeci">SQLLEN err</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00886">res_config_odbc.c:886</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l01258">1258</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l02990">ast_config_engine_register()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l01265">reload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;{</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#af15c271e1708b251fc938b30baba18f1">ast_config_engine_register</a>(&amp;<a class="code" href="../../dd/d53/res__config__odbc_8c.html#a0db7ee1d52bac64062bb76ed957432bb">odbc_engine</a>);</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;}</div><div class="ttc" id="include_2asterisk_2config_8h_html_af15c271e1708b251fc938b30baba18f1"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#af15c271e1708b251fc938b30baba18f1">ast_config_engine_register</a></div><div class="ttdeci">int ast_config_engine_register(struct ast_config_engine *newconfig)</div><div class="ttdoc">Register config engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l02990">main/config.c:2990</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_a0db7ee1d52bac64062bb76ed957432bb"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a0db7ee1d52bac64062bb76ed957432bb">odbc_engine</a></div><div class="ttdeci">static struct ast_config_engine odbc_engine</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l01238">res_config_odbc.c:1238</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f3dad4720f125bd072cb0ea6dd3db2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f3dad4720f125bd072cb0ea6dd3db2e">&#9670;&nbsp;</a></span>realtime_multi_odbc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/d18/structast__config.html">ast_config</a>* realtime_multi_odbc </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>fields</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Excute an Select query and return <a class="el" href="../../dd/d18/structast__config.html">ast_config</a> list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">database</td><td></td></tr>
    <tr><td class="paramname">table</td><td></td></tr>
    <tr><td class="paramname">ap</td><td>list containing one or more field/operator/value set.</td></tr>
  </table>
  </dd>
</dl>
<p>Select database and preform query on table, prepare the sql statement Sub-in the values to the prepared statement and execute it. Execute this prepared query against several ODBC connected databases. Return results as an <a class="el" href="../../dd/d18/structast__config.html">ast_config</a> variable.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">var</td><td>on success </td></tr>
    <tr><td class="paramname">NULL</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00342">342</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02835">ast_category_append()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02847">ast_category_destroy()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00837">ast_category_new_anonymous</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l01362">ast_category_rename()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l03276">ast_config_new()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00842">ast_odbc_backslash_is_escape()</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00407">ast_odbc_prepare_and_execute()</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00813">ast_odbc_release_obj()</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00121">ast_odbc_request_obj2</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00780">ast_str_make_space</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00653">ast_str_reset()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00699">ast_str_size()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00688">ast_str_strlen()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00861">ast_str_thread_get()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00663">ast_str_update()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00368">ast_string_field_free_memory</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00353">ast_string_field_init</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00219">ast_strip()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01178">ast_variable_append()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">ast_variable_new</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00101">custom_prepare()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00085">decode_chunk()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00061">custom_prepare_struct::fields</a>, <a class="el" href="../../d6/d05/test__scoped__lock_8c_source.html#l00039">indicator</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00042">RES_ODBC_CONNECTED</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00053">rowdata_buf</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00056">custom_prepare_struct::sql</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00052">sql_buf</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00050">SQL_BUF_SIZE</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr()</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>, and <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00614">var</a>.</p>
<div class="fragment"><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;{</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *obj;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   SQLHSTMT stmt;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;   <span class="keywordtype">char</span> coltitle[256];</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *sql = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../dd/d53/res__config__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a>, <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a0552f2f0194e062f156929a78374dd55">SQL_BUF_SIZE</a>);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *rowdata = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../dd/d53/res__config__odbc_8c.html#a603158b374bae475b94fc201bbeb2f19">rowdata_buf</a>, 128);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *initfield;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   <span class="keywordtype">char</span> *op;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *field = fields;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;   <span class="keywordtype">char</span> *stringp;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   <span class="keywordtype">char</span> *chunk;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   SQLSMALLINT collen;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>=<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg=<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/db2/structast__category.html">ast_category</a> *cat=<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> connected_flag = { <a class="code" href="../../de/d96/res__odbc_8h.html#a0341d081395407fd92061819ba76eb96aaf8f8c27bee047ce6b85c03a118ed8cd">RES_ODBC_CONNECTED</a> };</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;   SQLULEN colsize;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   SQLSMALLINT colcount=0;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;   SQLSMALLINT datatype;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;   SQLSMALLINT decimaldigits;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;   SQLSMALLINT nullable;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;   SQLLEN <a class="code" href="../../d6/d05/test__scoped__lock_8c.html#afc81d7a4954c250760ba59913e08cc65">indicator</a>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d27/structcustom__prepare__struct.html">custom_prepare_struct</a> cps = { .<a class="code" href="../../d8/d27/structcustom__prepare__struct.html#aed2d94a6fe15ec228d25838ea61f6a94">fields</a> = <a class="code" href="../../d8/d27/structcustom__prepare__struct.html#aed2d94a6fe15ec228d25838ea61f6a94">fields</a>, };</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a> || !field || !sql || !rowdata) {</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   }</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;   obj = <a class="code" href="../../de/d96/res__odbc_8h.html#a0978c986996da2ecb07140f13af20171">ast_odbc_request_obj2</a>(database, connected_flag);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   <span class="keywordflow">if</span> (!obj) {</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   }</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   initfield = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;   <span class="keywordflow">if</span> ((op = strchr(initfield, <span class="charliteral">&#39; &#39;</span>))) {</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      *op = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;   }</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   op = !strchr(field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="charliteral">&#39; &#39;</span>) ? <span class="stringliteral">&quot; =&quot;</span> : <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;sql, 0, <span class="stringliteral">&quot;SELECT * FROM %s WHERE %s%s ?%s&quot;</span>, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, op,</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a>(field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;LIKE&quot;</span>) &amp;&amp; !<a class="code" href="../../de/d96/res__odbc_8h.html#a9fb64cb1a2fcc8c4f627fba961f84a4e">ast_odbc_backslash_is_escape</a>(obj) ? <span class="stringliteral">&quot; ESCAPE &#39;\\\\&#39;&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;   <span class="keywordflow">while</span> ((field = field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>)) {</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      op = !strchr(field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="charliteral">&#39; &#39;</span>) ? <span class="stringliteral">&quot; =&quot;</span> : <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;sql, 0, <span class="stringliteral">&quot; AND %s%s ?%s&quot;</span>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, op,</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;         <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a>(field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;LIKE&quot;</span>) &amp;&amp; !<a class="code" href="../../de/d96/res__odbc_8h.html#a9fb64cb1a2fcc8c4f627fba961f84a4e">ast_odbc_backslash_is_escape</a>(obj) ? <span class="stringliteral">&quot; ESCAPE &#39;\\\\&#39;&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;   }</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;sql, 0, <span class="stringliteral">&quot; ORDER BY %s&quot;</span>, initfield);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;   cps.<a class="code" href="../../d8/d27/structcustom__prepare__struct.html#aecb2dd0da01a12f0e48213d6d9f3c5af">sql</a> = <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a>(&amp;cps, 256)) {</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   }</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;   stmt = <a class="code" href="../../de/d96/res__odbc_8h.html#ad1e82a2b1ba4eda1924d8b8f591de065">ast_odbc_prepare_and_execute</a>(obj, <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a9fb0770b5d483240183affa19304b681">custom_prepare</a>, &amp;cps);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a>(&amp;cps);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   <span class="keywordflow">if</span> (!stmt) {</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   res = SQLNumResultCols(stmt, &amp;colcount);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL Column Count error! [%s]\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   }</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   cfg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a3aac6b809a257df6ea7c3d2a9d22b9f5">ast_config_new</a>();</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   <span class="keywordflow">if</span> (!cfg) {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Out of memory!\n&quot;</span>);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;   }</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;   <span class="keywordflow">while</span> ((res=SQLFetch(stmt)) != SQL_NO_DATA) {</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      var = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL Fetch error! [%s]\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      }</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      cat = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a5f8ade30f8f91f2ab790fdebd560662d">ast_category_new_anonymous</a>();</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <span class="keywordflow">if</span> (!cat) {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      }</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      <span class="keywordflow">for</span> (x=0;x&lt;colcount;x++) {</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;         colsize = 0;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;         collen = <span class="keyword">sizeof</span>(coltitle);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;         res = SQLDescribeCol(stmt, x + 1, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)coltitle, <span class="keyword">sizeof</span>(coltitle), &amp;collen,</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                  &amp;datatype, &amp;colsize, &amp;decimaldigits, &amp;nullable);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;         <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL Describe Column error! [%s]\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a94ba5ab9fffe6dd755ee95db7ff2432f">ast_category_destroy</a>(cat);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            <span class="keywordflow">goto</span> next_sql_fetch;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;         }</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a>(rowdata);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;         indicator = 0;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;         res = SQLGetData(stmt, x + 1, SQL_CHAR, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(rowdata), <a class="code" href="../../d6/d90/strings_8h.html#ae99d6f51ac4be6b72f8b63892cd949e1">ast_str_size</a>(rowdata), &amp;indicator);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#aa64825674476f476402283fe4bd7ee51">ast_str_update</a>(rowdata);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;         <span class="keywordflow">if</span> (indicator == SQL_NULL_DATA) {</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;         }</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;         <span class="keywordflow">if</span> ((res == SQL_SUCCESS) || (res == SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            <span class="keywordflow">if</span> (indicator != <a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(rowdata)) {</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;               <span class="comment">/* If the available space was not enough to contain the row data enlarge and read in the rest */</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#aa3d67163f6a94e575ee602933adf1eab">ast_str_make_space</a>(&amp;rowdata, indicator + 1);</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;               res = SQLGetData(stmt, x + 1, SQL_CHAR, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(rowdata) + <a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(rowdata),</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                  <a class="code" href="../../d6/d90/strings_8h.html#ae99d6f51ac4be6b72f8b63892cd949e1">ast_str_size</a>(rowdata) - <a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(rowdata), &amp;indicator);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#aa64825674476f476402283fe4bd7ee51">ast_str_update</a>(rowdata);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            }</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;         }</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;         <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL Get Data error! [%s]\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a94ba5ab9fffe6dd755ee95db7ff2432f">ast_category_destroy</a>(cat);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <span class="keywordflow">goto</span> next_sql_fetch;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;         }</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;         stringp = <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(rowdata);</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;         <span class="keywordflow">if</span> (!strncmp(coltitle, <span class="stringliteral">&quot;@&quot;</span>, 1)) {</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            <span class="comment">/* The &#39;@&#39; prefix indicates it&#39;s a sorcery extended field.</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">             * Because ast_load_realtime_fields eliminates empty entries and makes blank (single whitespace)</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">             * entries empty and keeps them, the empty or NULL values are encoded</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">             * as a string containing a single whitespace. */</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            var = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(coltitle, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(stringp,<span class="stringliteral">&quot; &quot;</span>), <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a57a3200e5b440d7135eaf0450ea559fe">ast_variable_append</a>(cat, var);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            <span class="keywordflow">while</span> (stringp) {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;               chunk = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;stringp, <span class="stringliteral">&quot;;&quot;</span>);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;               <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d6/d90/strings_8h.html#ac92713b8d07a45720b2664be70810e55">ast_strip</a>(chunk))) {</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                  <span class="keywordflow">if</span> (strchr(chunk, <span class="charliteral">&#39;^&#39;</span>)) {</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                     <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a3116baa90e2706ec3400f9a67f740350">decode_chunk</a>(chunk);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                  }</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                  <span class="keywordflow">if</span> (!strcmp(initfield, coltitle)) {</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                     <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a2a5612ff8eb3595c1be1df75be4d870f">ast_category_rename</a>(cat, chunk);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                  }</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                  var = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(coltitle, chunk, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                  <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a57a3200e5b440d7135eaf0450ea559fe">ast_variable_append</a>(cat, var);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;               }</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            }</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;         }</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      }</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aa422e1cc73c1ac4db7ed8cd1a0e36e1a">ast_category_append</a>(cfg, cat);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;next_sql_fetch:;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   }</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   <span class="keywordflow">return</span> cfg;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;}</div><div class="ttc" id="res__config__odbc_8c_html_a0552f2f0194e062f156929a78374dd55"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a0552f2f0194e062f156929a78374dd55">SQL_BUF_SIZE</a></div><div class="ttdeci">#define SQL_BUF_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00050">res_config_odbc.c:50</a></div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a9fb64cb1a2fcc8c4f627fba961f84a4e"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a9fb64cb1a2fcc8c4f627fba961f84a4e">ast_odbc_backslash_is_escape</a></div><div class="ttdeci">int ast_odbc_backslash_is_escape(struct odbc_obj *obj)</div><div class="ttdoc">Checks if the database natively supports backslash as an escape character. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00842">res_odbc.c:842</a></div></div>
<div class="ttc" id="strings_8h_html_ae99d6f51ac4be6b72f8b63892cd949e1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ae99d6f51ac4be6b72f8b63892cd949e1">ast_str_size</a></div><div class="ttdeci">size_t ast_str_size(const struct ast_str *buf)</div><div class="ttdoc">Returns the current maximum length (without reallocation) of the current buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00699">strings.h:699</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html_aecb2dd0da01a12f0e48213d6d9f3c5af"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html#aecb2dd0da01a12f0e48213d6d9f3c5af">custom_prepare_struct::sql</a></div><div class="ttdeci">const char * sql</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00056">res_config_odbc.c:56</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="test__scoped__lock_8c_html_afc81d7a4954c250760ba59913e08cc65"><div class="ttname"><a href="../../d6/d05/test__scoped__lock_8c.html#afc81d7a4954c250760ba59913e08cc65">indicator</a></div><div class="ttdeci">static int indicator</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d05/test__scoped__lock_8c_source.html#l00039">test_scoped_lock.c:39</a></div></div>
<div class="ttc" id="strings_8h_html_aa3d67163f6a94e575ee602933adf1eab"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3d67163f6a94e575ee602933adf1eab">ast_str_make_space</a></div><div class="ttdeci">#define ast_str_make_space(buf, new_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00780">strings.h:780</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a0341d081395407fd92061819ba76eb96aaf8f8c27bee047ce6b85c03a118ed8cd"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a0341d081395407fd92061819ba76eb96aaf8f8c27bee047ce6b85c03a118ed8cd">RES_ODBC_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00042">res_odbc.h:42</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a0978c986996da2ecb07140f13af20171"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a0978c986996da2ecb07140f13af20171">ast_odbc_request_obj2</a></div><div class="ttdeci">#define ast_odbc_request_obj2(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00121">res_odbc.h:121</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a94ba5ab9fffe6dd755ee95db7ff2432f"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a94ba5ab9fffe6dd755ee95db7ff2432f">ast_category_destroy</a></div><div class="ttdeci">void ast_category_destroy(struct ast_category *cat)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02847">extconf.c:2847</a></div></div>
<div class="ttc" id="structast__category_html"><div class="ttname"><a href="../../d7/db2/structast__category.html">ast_category</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00225">main/config.c:225</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html_aed2d94a6fe15ec228d25838ea61f6a94"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html#aed2d94a6fe15ec228d25838ea61f6a94">custom_prepare_struct::fields</a></div><div class="ttdeci">const struct ast_variable * fields</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00061">res_config_odbc.c:61</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a5f8ade30f8f91f2ab790fdebd560662d"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a5f8ade30f8f91f2ab790fdebd560662d">ast_category_new_anonymous</a></div><div class="ttdeci">#define ast_category_new_anonymous()</div><div class="ttdoc">Create a nameless category that is not backed by a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00837">include/asterisk/config.h:837</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_a68d1e6e752f2cf81551fac543cae108a"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a></div><div class="ttdeci">static char * table</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00058">cdr_odbc.c:58</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a2a5612ff8eb3595c1be1df75be4d870f"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a2a5612ff8eb3595c1be1df75be4d870f">ast_category_rename</a></div><div class="ttdeci">void ast_category_rename(struct ast_category *cat, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l01362">main/config.c:1362</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structodbc__obj_html"><div class="ttname"><a href="../../df/d36/structodbc__obj.html">odbc_obj</a></div><div class="ttdoc">ODBC container. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00046">res_odbc.h:46</a></div></div>
<div class="ttc" id="stringfields_8h_html_a871274fa4fd2687c7a44849a84df3665"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a></div><div class="ttdeci">#define ast_string_field_init(x, size)</div><div class="ttdoc">Initialize a field pool and fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00353">stringfields.h:353</a></div></div>
<div class="ttc" id="strings_8h_html_ac92713b8d07a45720b2664be70810e55"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac92713b8d07a45720b2664be70810e55">ast_strip</a></div><div class="ttdeci">char * ast_strip(char *s)</div><div class="ttdoc">Strip leading/trailing whitespace from a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00219">strings.h:219</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a66581086d34dfe7ea86b0644bacef239"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a></div><div class="ttdeci">#define ast_variable_new(name, value, filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">include/asterisk/config.h:914</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_a603158b374bae475b94fc201bbeb2f19"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a603158b374bae475b94fc201bbeb2f19">rowdata_buf</a></div><div class="ttdeci">static struct ast_threadstorage rowdata_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00053">res_config_odbc.c:53</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a3aac6b809a257df6ea7c3d2a9d22b9f5"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a3aac6b809a257df6ea7c3d2a9d22b9f5">ast_config_new</a></div><div class="ttdeci">struct ast_config * ast_config_new(void)</div><div class="ttdoc">Create a new base configuration structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l03276">extconf.c:3276</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_a9fb0770b5d483240183affa19304b681"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a9fb0770b5d483240183affa19304b681">custom_prepare</a></div><div class="ttdeci">static SQLHSTMT custom_prepare(struct odbc_obj *obj, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00101">res_config_odbc.c:101</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a0d78ab95e54db8c72a64038cfefb5161"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a></div><div class="ttdeci">char * strcasestr(const char *, const char *)</div></div>
<div class="ttc" id="structast__config_html"><div class="ttname"><a href="../../dd/d18/structast__config.html">ast_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00249">main/config.c:249</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_afc4bfa5a94710e6f323a1033f82425b3"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a></div><div class="ttdeci">static struct ast_threadstorage sql_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00052">res_config_odbc.c:52</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html">custom_prepare_struct</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00055">res_config_odbc.c:55</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a57a3200e5b440d7135eaf0450ea559fe"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a57a3200e5b440d7135eaf0450ea559fe">ast_variable_append</a></div><div class="ttdeci">void ast_variable_append(struct ast_category *category, struct ast_variable *variable)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01178">extconf.c:1178</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aa422e1cc73c1ac4db7ed8cd1a0e36e1a"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aa422e1cc73c1ac4db7ed8cd1a0e36e1a">ast_category_append</a></div><div class="ttdeci">void ast_category_append(struct ast_config *config, struct ast_category *cat)</div><div class="ttdoc">Appends a category to a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02835">extconf.c:2835</a></div></div>
<div class="ttc" id="strings_8h_html_a8239b9ad10367bfc936e9b60ff7706a8"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a></div><div class="ttdeci">void ast_str_reset(struct ast_str *buf)</div><div class="ttdoc">Reset the content of a dynamic string. Useful before a series of ast_str_append. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00653">strings.h:653</a></div></div>
<div class="ttc" id="strings_8h_html_aabc005bd1c7e249e8f8659d57d4500b6"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a></div><div class="ttdeci">size_t ast_str_strlen(const struct ast_str *buf)</div><div class="ttdoc">Returns the current length of the string stored within buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00688">strings.h:688</a></div></div>
<div class="ttc" id="res__odbc_8h_html_ad1e82a2b1ba4eda1924d8b8f591de065"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#ad1e82a2b1ba4eda1924d8b8f591de065">ast_odbc_prepare_and_execute</a></div><div class="ttdeci">SQLHSTMT ast_odbc_prepare_and_execute(struct odbc_obj *obj, SQLHSTMT(*prepare_cb)(struct odbc_obj *obj, void *data), void *data)</div><div class="ttdoc">Prepares, executes, and returns the resulting statement handle. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00407">res_odbc.c:407</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="strings_8h_html_aa64825674476f476402283fe4bd7ee51"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa64825674476f476402283fe4bd7ee51">ast_str_update</a></div><div class="ttdeci">void ast_str_update(struct ast_str *buf)</div><div class="ttdoc">Update the length of the buffer, after using ast_str merely as a buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00663">strings.h:663</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_a3116baa90e2706ec3400f9a67f740350"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a3116baa90e2706ec3400f9a67f740350">decode_chunk</a></div><div class="ttdeci">static void decode_chunk(char *chunk)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00085">res_config_odbc.c:85</a></div></div>
<div class="ttc" id="strings_8h_html_afe8f5f844f2fd5f5bd5d0be5ef671481"><div class="ttname"><a href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a></div><div class="ttdeci">struct ast_str * ast_str_thread_get(struct ast_threadstorage *ts, size_t init_len)</div><div class="ttdoc">Retrieve a thread locally stored dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00861">strings.h:861</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a78d14d1dd01c269c9c0a47b49475eeea"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a></div><div class="ttdeci">void ast_odbc_release_obj(struct odbc_obj *obj)</div><div class="ttdoc">Releases an ODBC object previously allocated by ast_odbc_request_obj() </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00813">res_odbc.c:813</a></div></div>
<div class="ttc" id="stringfields_8h_html_abf60f862ae6a141d2f86a0f5e82792de"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a></div><div class="ttdeci">#define ast_string_field_free_memory(x)</div><div class="ttdoc">free all memory - to be called before destroying the object </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00368">stringfields.h:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a383ad16b2323bfa24b1b4bef35c5c182"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a383ad16b2323bfa24b1b4bef35c5c182">&#9670;&nbsp;</a></span>realtime_odbc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a>* realtime_odbc </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>fields</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Excute an SQL query and return <a class="el" href="../../dd/d02/structast__variable.html" title="Structure for variables, used for configurations and for channel variables. ">ast_variable</a> list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">database</td><td></td></tr>
    <tr><td class="paramname">table</td><td></td></tr>
    <tr><td class="paramname">ap</td><td>list containing one or more field/operator/value set.</td></tr>
  </table>
  </dd>
</dl>
<p>Select database and preform query on table, prepare the sql statement Sub-in the values to the prepared statement and execute it. Return results as a <a class="el" href="../../dd/d02/structast__variable.html" title="Structure for variables, used for configurations and for channel variables. ">ast_variable</a> list.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">var</td><td>on success </td></tr>
    <tr><td class="paramname">NULL</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00170">170</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00842">ast_odbc_backslash_is_escape()</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00407">ast_odbc_prepare_and_execute()</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00813">ast_odbc_release_obj()</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00121">ast_odbc_request_obj2</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00780">ast_str_make_space</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00653">ast_str_reset()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00699">ast_str_size()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00688">ast_str_strlen()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00861">ast_str_thread_get()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00663">ast_str_update()</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00368">ast_string_field_free_memory</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00353">ast_string_field_init</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00219">ast_strip()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">ast_variable_new</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01263">ast_variables_destroy()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00101">custom_prepare()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00085">decode_chunk()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00061">custom_prepare_struct::fields</a>, <a class="el" href="../../d6/d05/test__scoped__lock_8c_source.html#l00039">indicator</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00042">RES_ODBC_CONNECTED</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00053">rowdata_buf</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00056">custom_prepare_struct::sql</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00052">sql_buf</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00050">SQL_BUF_SIZE</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr()</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>, and <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00614">var</a>.</p>
<div class="fragment"><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;{</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *obj;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;   SQLHSTMT stmt;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   <span class="keywordtype">char</span> coltitle[256];</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *sql = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../dd/d53/res__config__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a>, <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a0552f2f0194e062f156929a78374dd55">SQL_BUF_SIZE</a>);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *rowdata = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../dd/d53/res__config__odbc_8c.html#a603158b374bae475b94fc201bbeb2f19">rowdata_buf</a>, 128);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   <span class="keywordtype">char</span> *op;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *field = fields;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   <span class="keywordtype">char</span> *stringp;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;   <span class="keywordtype">char</span> *chunk;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;   SQLSMALLINT collen;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>=<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *prev=<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   SQLULEN colsize;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   SQLSMALLINT colcount=0;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;   SQLSMALLINT datatype;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   SQLSMALLINT decimaldigits;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;   SQLSMALLINT nullable;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;   SQLLEN <a class="code" href="../../d6/d05/test__scoped__lock_8c.html#afc81d7a4954c250760ba59913e08cc65">indicator</a>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d27/structcustom__prepare__struct.html">custom_prepare_struct</a> cps = { .<a class="code" href="../../d8/d27/structcustom__prepare__struct.html#aed2d94a6fe15ec228d25838ea61f6a94">fields</a> = <a class="code" href="../../d8/d27/structcustom__prepare__struct.html#aed2d94a6fe15ec228d25838ea61f6a94">fields</a>, };</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> connected_flag = { <a class="code" href="../../de/d96/res__odbc_8h.html#a0341d081395407fd92061819ba76eb96aaf8f8c27bee047ce6b85c03a118ed8cd">RES_ODBC_CONNECTED</a> };</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a> || !field || !sql || !rowdata) {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;   }</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   obj = <a class="code" href="../../de/d96/res__odbc_8h.html#a0978c986996da2ecb07140f13af20171">ast_odbc_request_obj2</a>(database, connected_flag);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;   <span class="keywordflow">if</span> (!obj) {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;No database handle available with the name of &#39;%s&#39; (check res_odbc.conf)\n&quot;</span>, database);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;   op = !strchr(field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="charliteral">&#39; &#39;</span>) ? <span class="stringliteral">&quot; =&quot;</span> : <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;sql, 0, <span class="stringliteral">&quot;SELECT * FROM %s WHERE %s%s ?%s&quot;</span>, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, op,</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a>(field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;LIKE&quot;</span>) &amp;&amp; !<a class="code" href="../../de/d96/res__odbc_8h.html#a9fb64cb1a2fcc8c4f627fba961f84a4e">ast_odbc_backslash_is_escape</a>(obj) ? <span class="stringliteral">&quot; ESCAPE &#39;\\\\&#39;&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   <span class="keywordflow">while</span> ((field = field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>)) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      op = !strchr(field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="charliteral">&#39; &#39;</span>) ? <span class="stringliteral">&quot; =&quot;</span> : <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;sql, 0, <span class="stringliteral">&quot; AND %s%s ?%s&quot;</span>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, op,</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;         <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a>(field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;LIKE&quot;</span>) &amp;&amp; !<a class="code" href="../../de/d96/res__odbc_8h.html#a9fb64cb1a2fcc8c4f627fba961f84a4e">ast_odbc_backslash_is_escape</a>(obj) ? <span class="stringliteral">&quot; ESCAPE &#39;\\\\&#39;&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   cps.<a class="code" href="../../d8/d27/structcustom__prepare__struct.html#aecb2dd0da01a12f0e48213d6d9f3c5af">sql</a> = <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a>(&amp;cps, 256)) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;   }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;   stmt = <a class="code" href="../../de/d96/res__odbc_8h.html#ad1e82a2b1ba4eda1924d8b8f591de065">ast_odbc_prepare_and_execute</a>(obj, <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a9fb0770b5d483240183affa19304b681">custom_prepare</a>, &amp;cps);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a>(&amp;cps);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;   <span class="keywordflow">if</span> (!stmt) {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;   }</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;   res = SQLNumResultCols(stmt, &amp;colcount);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL Column Count error! [%s]\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      SQLFreeHandle (SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;   }</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;   res = SQLFetch(stmt);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;   <span class="keywordflow">if</span> (res == SQL_NO_DATA) {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      SQLFreeHandle (SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;   }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;   <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL Fetch error! [%s]\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      SQLFreeHandle (SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; colcount; x++) {</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      colsize = 0;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      collen = <span class="keyword">sizeof</span>(coltitle);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      res = SQLDescribeCol(stmt, x + 1, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)coltitle, <span class="keyword">sizeof</span>(coltitle), &amp;collen,</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;               &amp;datatype, &amp;colsize, &amp;decimaldigits, &amp;nullable);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL Describe Column error! [%s]\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;         <span class="keywordflow">if</span> (var)</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(var);</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;         <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a>(rowdata);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      indicator = 0;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      res = SQLGetData(stmt, x + 1, SQL_CHAR, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(rowdata), <a class="code" href="../../d6/d90/strings_8h.html#ae99d6f51ac4be6b72f8b63892cd949e1">ast_str_size</a>(rowdata), &amp;indicator);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa64825674476f476402283fe4bd7ee51">ast_str_update</a>(rowdata);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <span class="keywordflow">if</span> (indicator == SQL_NULL_DATA) {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a>(rowdata);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(rowdata)) {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;         <span class="comment">/* Because we encode the empty string for a NULL, we will encode</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">          * actual empty strings as a string containing a single whitespace. */</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;rowdata, -1, <span class="stringliteral">&quot;%s&quot;</span>, <span class="stringliteral">&quot; &quot;</span>);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((res == SQL_SUCCESS) || (res == SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;         <span class="keywordflow">if</span> (indicator != <a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(rowdata)) {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <span class="comment">/* If the available space was not enough to contain the row data enlarge and read in the rest */</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#aa3d67163f6a94e575ee602933adf1eab">ast_str_make_space</a>(&amp;rowdata, indicator + 1);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            res = SQLGetData(stmt, x + 1, SQL_CHAR, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(rowdata) + <a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(rowdata),</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#ae99d6f51ac4be6b72f8b63892cd949e1">ast_str_size</a>(rowdata) - <a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(rowdata), &amp;indicator);</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#aa64825674476f476402283fe4bd7ee51">ast_str_update</a>(rowdata);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;         }</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL Get Data error! [%s]\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;         <span class="keywordflow">if</span> (var)</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(var);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;         <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      }</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      stringp = <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(rowdata);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="keywordflow">if</span> (!strncmp(coltitle, <span class="stringliteral">&quot;@&quot;</span>, 1)) {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;         <span class="comment">/* The &#39;@&#39; prefix indicates it&#39;s a sorcery extended field.</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">          * Because ast_load_realtime_fields eliminates empty entries and makes blank (single whitespace)</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">          * entries empty and keeps them, the empty or NULL values are encoded</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">          * as a string containing a single whitespace. */</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;         <span class="keywordflow">if</span> (prev) {</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            prev-&gt;next = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(coltitle, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(stringp,<span class="stringliteral">&quot; &quot;</span>), <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <span class="keywordflow">if</span> (prev-&gt;next) {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;               prev = prev-&gt;next;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            prev = var = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(coltitle, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(stringp,<span class="stringliteral">&quot; &quot;</span>), <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;         }</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;         <span class="keywordflow">while</span> (stringp) {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            chunk = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;stringp, <span class="stringliteral">&quot;;&quot;</span>);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d6/d90/strings_8h.html#ac92713b8d07a45720b2664be70810e55">ast_strip</a>(chunk))) {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;               <span class="keywordflow">if</span> (strchr(chunk, <span class="charliteral">&#39;^&#39;</span>)) {</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                  <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a3116baa90e2706ec3400f9a67f740350">decode_chunk</a>(chunk);</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;               }</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;               <span class="keywordflow">if</span> (prev) {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                  prev-&gt;next = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(coltitle, chunk, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                  <span class="keywordflow">if</span> (prev-&gt;next) {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                     prev = prev-&gt;next;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                  }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                  prev = var = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(coltitle, chunk, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;               }</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            }</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;         }</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   }</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;   SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;}</div><div class="ttc" id="res__config__odbc_8c_html_a0552f2f0194e062f156929a78374dd55"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a0552f2f0194e062f156929a78374dd55">SQL_BUF_SIZE</a></div><div class="ttdeci">#define SQL_BUF_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00050">res_config_odbc.c:50</a></div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a9fb64cb1a2fcc8c4f627fba961f84a4e"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a9fb64cb1a2fcc8c4f627fba961f84a4e">ast_odbc_backslash_is_escape</a></div><div class="ttdeci">int ast_odbc_backslash_is_escape(struct odbc_obj *obj)</div><div class="ttdoc">Checks if the database natively supports backslash as an escape character. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00842">res_odbc.c:842</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="strings_8h_html_ae99d6f51ac4be6b72f8b63892cd949e1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ae99d6f51ac4be6b72f8b63892cd949e1">ast_str_size</a></div><div class="ttdeci">size_t ast_str_size(const struct ast_str *buf)</div><div class="ttdoc">Returns the current maximum length (without reallocation) of the current buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00699">strings.h:699</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html_aecb2dd0da01a12f0e48213d6d9f3c5af"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html#aecb2dd0da01a12f0e48213d6d9f3c5af">custom_prepare_struct::sql</a></div><div class="ttdeci">const char * sql</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00056">res_config_odbc.c:56</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="test__scoped__lock_8c_html_afc81d7a4954c250760ba59913e08cc65"><div class="ttname"><a href="../../d6/d05/test__scoped__lock_8c.html#afc81d7a4954c250760ba59913e08cc65">indicator</a></div><div class="ttdeci">static int indicator</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d05/test__scoped__lock_8c_source.html#l00039">test_scoped_lock.c:39</a></div></div>
<div class="ttc" id="strings_8h_html_aa3d67163f6a94e575ee602933adf1eab"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3d67163f6a94e575ee602933adf1eab">ast_str_make_space</a></div><div class="ttdeci">#define ast_str_make_space(buf, new_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00780">strings.h:780</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a0341d081395407fd92061819ba76eb96aaf8f8c27bee047ce6b85c03a118ed8cd"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a0341d081395407fd92061819ba76eb96aaf8f8c27bee047ce6b85c03a118ed8cd">RES_ODBC_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00042">res_odbc.h:42</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a0978c986996da2ecb07140f13af20171"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a0978c986996da2ecb07140f13af20171">ast_odbc_request_obj2</a></div><div class="ttdeci">#define ast_odbc_request_obj2(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00121">res_odbc.h:121</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html_aed2d94a6fe15ec228d25838ea61f6a94"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html#aed2d94a6fe15ec228d25838ea61f6a94">custom_prepare_struct::fields</a></div><div class="ttdeci">const struct ast_variable * fields</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00061">res_config_odbc.c:61</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_a68d1e6e752f2cf81551fac543cae108a"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a></div><div class="ttdeci">static char * table</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00058">cdr_odbc.c:58</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structodbc__obj_html"><div class="ttname"><a href="../../df/d36/structodbc__obj.html">odbc_obj</a></div><div class="ttdoc">ODBC container. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00046">res_odbc.h:46</a></div></div>
<div class="ttc" id="stringfields_8h_html_a871274fa4fd2687c7a44849a84df3665"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a></div><div class="ttdeci">#define ast_string_field_init(x, size)</div><div class="ttdoc">Initialize a field pool and fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00353">stringfields.h:353</a></div></div>
<div class="ttc" id="strings_8h_html_ac92713b8d07a45720b2664be70810e55"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac92713b8d07a45720b2664be70810e55">ast_strip</a></div><div class="ttdeci">char * ast_strip(char *s)</div><div class="ttdoc">Strip leading/trailing whitespace from a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00219">strings.h:219</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a66581086d34dfe7ea86b0644bacef239"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a></div><div class="ttdeci">#define ast_variable_new(name, value, filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">include/asterisk/config.h:914</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_a603158b374bae475b94fc201bbeb2f19"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a603158b374bae475b94fc201bbeb2f19">rowdata_buf</a></div><div class="ttdeci">static struct ast_threadstorage rowdata_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00053">res_config_odbc.c:53</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_a9fb0770b5d483240183affa19304b681"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a9fb0770b5d483240183affa19304b681">custom_prepare</a></div><div class="ttdeci">static SQLHSTMT custom_prepare(struct odbc_obj *obj, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00101">res_config_odbc.c:101</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a0d78ab95e54db8c72a64038cfefb5161"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a></div><div class="ttdeci">char * strcasestr(const char *, const char *)</div></div>
<div class="ttc" id="res__config__odbc_8c_html_afc4bfa5a94710e6f323a1033f82425b3"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a></div><div class="ttdeci">static struct ast_threadstorage sql_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00052">res_config_odbc.c:52</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html">custom_prepare_struct</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00055">res_config_odbc.c:55</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="strings_8h_html_a8239b9ad10367bfc936e9b60ff7706a8"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a></div><div class="ttdeci">void ast_str_reset(struct ast_str *buf)</div><div class="ttdoc">Reset the content of a dynamic string. Useful before a series of ast_str_append. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00653">strings.h:653</a></div></div>
<div class="ttc" id="strings_8h_html_aabc005bd1c7e249e8f8659d57d4500b6"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a></div><div class="ttdeci">size_t ast_str_strlen(const struct ast_str *buf)</div><div class="ttdoc">Returns the current length of the string stored within buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00688">strings.h:688</a></div></div>
<div class="ttc" id="res__odbc_8h_html_ad1e82a2b1ba4eda1924d8b8f591de065"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#ad1e82a2b1ba4eda1924d8b8f591de065">ast_odbc_prepare_and_execute</a></div><div class="ttdeci">SQLHSTMT ast_odbc_prepare_and_execute(struct odbc_obj *obj, SQLHSTMT(*prepare_cb)(struct odbc_obj *obj, void *data), void *data)</div><div class="ttdoc">Prepares, executes, and returns the resulting statement handle. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00407">res_odbc.c:407</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="strings_8h_html_aa64825674476f476402283fe4bd7ee51"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa64825674476f476402283fe4bd7ee51">ast_str_update</a></div><div class="ttdeci">void ast_str_update(struct ast_str *buf)</div><div class="ttdoc">Update the length of the buffer, after using ast_str merely as a buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00663">strings.h:663</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_a3116baa90e2706ec3400f9a67f740350"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a3116baa90e2706ec3400f9a67f740350">decode_chunk</a></div><div class="ttdeci">static void decode_chunk(char *chunk)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00085">res_config_odbc.c:85</a></div></div>
<div class="ttc" id="strings_8h_html_afe8f5f844f2fd5f5bd5d0be5ef671481"><div class="ttname"><a href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a></div><div class="ttdeci">struct ast_str * ast_str_thread_get(struct ast_threadstorage *ts, size_t init_len)</div><div class="ttdoc">Retrieve a thread locally stored dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00861">strings.h:861</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a78d14d1dd01c269c9c0a47b49475eeea"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a></div><div class="ttdeci">void ast_odbc_release_obj(struct odbc_obj *obj)</div><div class="ttdoc">Releases an ODBC object previously allocated by ast_odbc_request_obj() </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00813">res_odbc.c:813</a></div></div>
<div class="ttc" id="stringfields_8h_html_abf60f862ae6a141d2f86a0f5e82792de"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a></div><div class="ttdeci">#define ast_string_field_free_memory(x)</div><div class="ttdoc">free all memory - to be called before destroying the object </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00368">stringfields.h:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7c6ac25ea7536c0bc9ed18cbcf917527"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c6ac25ea7536c0bc9ed18cbcf917527">&#9670;&nbsp;</a></span>reload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int reload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l01265">1265</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d16/module_8h_source.html#l00317">AST_MODFLAG_LOAD_ORDER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00323">AST_MODPRI_REALTIME_DRIVER</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00121">AST_MODULE_SUPPORT_CORE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l01258">load_module()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00741">reload()</a>, and <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l01251">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;{</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a3dc1c580fd0e6f5ab56a9d9569ca44aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dc1c580fd0e6f5ab56a9d9569ca44aa">&#9670;&nbsp;</a></span>require_odbc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int require_odbc </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>ap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l01076">1076</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00241">ast_odbc_find_table()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01240">ast_rq_is_int()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c.html#a213ff212b1abd119f58f61f5576e13d4">CHECK_SIZE</a>, <a class="el" href="../../d5/d5c/structodbc__cache__tables.html#a09f857e5d5d25c0d2065acfbb45afe6c">odbc_cache_tables::columns</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00060">odbc_cache_columns::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00076">RQ_CHAR</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00078">RQ_DATE</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00079">RQ_DATETIME</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00077">RQ_FLOAT</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00066">RQ_INTEGER1</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00068">RQ_INTEGER2</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00070">RQ_INTEGER3</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00072">RQ_INTEGER4</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00074">RQ_INTEGER8</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00067">RQ_UINTEGER1</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00069">RQ_UINTEGER2</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00071">RQ_UINTEGER3</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00073">RQ_UINTEGER4</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00075">RQ_UINTEGER8</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00062">odbc_cache_columns::size</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00061">odbc_cache_columns::type</a>, <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l01073">warn_length</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l01074">warn_type</a>, and <a class="el" href="../../dd/d53/res__config__odbc_8c.html#af2cdda2f51ca0d0f04ec61841eb58ddb">WARN_TYPE_OR_LENGTH</a>.</p>
<div class="fragment"><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;{</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d5c/structodbc__cache__tables.html">odbc_cache_tables</a> *tableptr = <a class="code" href="../../de/d96/res__odbc_8h.html#aa15ed6f1d16784d3e2961c0bef9352c8">ast_odbc_find_table</a>(database, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>);</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d5f/structodbc__cache__columns.html">odbc_cache_columns</a> *col;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;   <span class="keywordtype">char</span> *elm;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../d0/d5f/structodbc__cache__columns.html#a8f725e63e7aaa7e48a10d571d6bc5c44">size</a>;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;   <span class="keywordflow">if</span> (!tableptr) {</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;   }</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;   <span class="keywordflow">while</span> ((elm = va_arg(ap, <span class="keywordtype">char</span> *))) {</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      type = va_arg(ap, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3">require_type</a>);</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;      size = va_arg(ap, <span class="keywordtype">int</span>);</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      <span class="comment">/* Check if the field matches the criteria */</span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;tableptr-&gt;<a class="code" href="../../d5/d5c/structodbc__cache__tables.html#a09f857e5d5d25c0d2065acfbb45afe6c">columns</a>, col, list) {</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;         <span class="keywordflow">if</span> (strcmp(col-&gt;<a class="code" href="../../d0/d5f/structodbc__cache__columns.html#a5ac083a645d964373f022d03df4849c8">name</a>, elm) == 0) {</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;            <span class="comment">/* Type check, first.  Some fields are more particular than others */</span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;            <span class="keywordflow">switch</span> (col-&gt;<a class="code" href="../../d0/d5f/structodbc__cache__columns.html#a713b6299f1d41d81cf4fec75082f0033">type</a>) {</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;            <span class="keywordflow">case</span> SQL_CHAR:</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;            <span class="keywordflow">case</span> SQL_VARCHAR:</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;            <span class="keywordflow">case</span> SQL_LONGVARCHAR:</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="preprocessor">#ifdef HAVE_ODBC_WCHAR</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;            <span class="keywordflow">case</span> SQL_WCHAR:</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;            <span class="keywordflow">case</span> SQL_WVARCHAR:</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;            <span class="keywordflow">case</span> SQL_WLONGVARCHAR:</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;            <span class="keywordflow">case</span> SQL_BINARY:</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;            <span class="keywordflow">case</span> SQL_VARBINARY:</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;            <span class="keywordflow">case</span> SQL_LONGVARBINARY:</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            <span class="keywordflow">case</span> SQL_GUID:</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="preprocessor">#define CHECK_SIZE(n) \</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="preprocessor">                  if (col-&gt;size &lt; n) {      \</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="preprocessor">                     warn_length(col, n);  \</span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="preprocessor">                  }                         \</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="preprocessor">                  break;</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;               <span class="keywordflow">switch</span> (type) {</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;               <span class="keywordflow">case</span> <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3ae8c94d6fa08e17f6f86792727b201bf9">RQ_UINTEGER1</a>: <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a213ff212b1abd119f58f61f5576e13d4">CHECK_SIZE</a>(3)  <span class="comment">/*         255 */</span></div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;               case <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a7b4a9e81298a296d3e066ed369727cc4">RQ_INTEGER1</a>:  <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a213ff212b1abd119f58f61f5576e13d4">CHECK_SIZE</a>(4)  <span class="comment">/*        -128 */</span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;               case <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a1ab15af464bf1838c9ca91d32ca7a2a1">RQ_UINTEGER2</a>: <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a213ff212b1abd119f58f61f5576e13d4">CHECK_SIZE</a>(5)  <span class="comment">/*       65535 */</span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;               case <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3af1d7dd0d3aacafdef0d2f0d2db6d7112">RQ_INTEGER2</a>:  <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a213ff212b1abd119f58f61f5576e13d4">CHECK_SIZE</a>(6)  <span class="comment">/*      -32768 */</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;               case <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3ad3163600ec26815e26092d9eb3e4b0b5">RQ_UINTEGER3</a>:                <span class="comment">/*    16777215 */</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;               case <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a75d046b2f103381a62aeb81f42550404">RQ_INTEGER3</a>:  <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a213ff212b1abd119f58f61f5576e13d4">CHECK_SIZE</a>(8)  <span class="comment">/*    -8388608 */</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;               case <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a3d3293675f377a4398a25974cba3e7e1">RQ_DATE</a>:                     <span class="comment">/*  2008-06-09 */</span></div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;               case <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a27acda71d87003db19a6e0b4193a32be">RQ_UINTEGER4</a>: <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a213ff212b1abd119f58f61f5576e13d4">CHECK_SIZE</a>(10) <span class="comment">/*  4200000000 */</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;               case <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a8a9fbbd166ee4918cec8c9303fde70e8">RQ_INTEGER4</a>:  <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a213ff212b1abd119f58f61f5576e13d4">CHECK_SIZE</a>(11) <span class="comment">/* -2100000000 */</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;               case <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3acf1d0ae3a1d0e3ae12a1f05f485f07c9">RQ_DATETIME</a>:                 <span class="comment">/* 2008-06-09 16:03:47 */</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;               case <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a2e4fb4c24a3958e2fbd853d5c53cfbb4">RQ_UINTEGER8</a>: <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a213ff212b1abd119f58f61f5576e13d4">CHECK_SIZE</a>(19) <span class="comment">/* trust me    */</span></div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;               case <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3aaa7be840b4634cc84021f0c20a17275b">RQ_INTEGER8</a>:  <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a213ff212b1abd119f58f61f5576e13d4">CHECK_SIZE</a>(20) <span class="comment">/* ditto       */</span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;               case <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a1133e08bb8b498770188f728ca03e417">RQ_FLOAT</a>:</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;               case <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a75759a4654f061f8e7d6bd1ec7a3b4bb">RQ_CHAR</a>:      <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a213ff212b1abd119f58f61f5576e13d4">CHECK_SIZE</a>(size)</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;               }</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="preprocessor">#undef CHECK_SIZE</span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;            <span class="keywordflow">case</span> SQL_TYPE_DATE:</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;               <span class="keywordflow">if</span> (type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a3d3293675f377a4398a25974cba3e7e1">RQ_DATE</a>) {</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                  <a class="code" href="../../dd/d53/res__config__odbc_8c.html#ac0fc1cb3fe8e03194386842057d38085">warn_type</a>(col, type);</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;               }</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;            <span class="keywordflow">case</span> SQL_TYPE_TIMESTAMP:</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;            <span class="keywordflow">case</span> SQL_TIMESTAMP:</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;               <span class="keywordflow">if</span> (type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a3d3293675f377a4398a25974cba3e7e1">RQ_DATE</a> &amp;&amp; type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3acf1d0ae3a1d0e3ae12a1f05f485f07c9">RQ_DATETIME</a>) {</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                  <a class="code" href="../../dd/d53/res__config__odbc_8c.html#ac0fc1cb3fe8e03194386842057d38085">warn_type</a>(col, type);</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;               }</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            <span class="keywordflow">case</span> SQL_BIT:</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;               <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a18da797c1ab7394473a9b3c7e13e6f89">warn_length</a>(col, size);</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<span class="preprocessor">#define WARN_TYPE_OR_LENGTH(n)   \</span></div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;<span class="preprocessor">                  if (!ast_rq_is_int(type)) {  \</span></div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="preprocessor">                     warn_type(col, type);    \</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="preprocessor">                  } else {                     \</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="preprocessor">                     warn_length(col, n);  \</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="preprocessor">                  }</span></div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;            <span class="keywordflow">case</span> SQL_TINYINT:</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;               <span class="keywordflow">if</span> (type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3ae8c94d6fa08e17f6f86792727b201bf9">RQ_UINTEGER1</a>) {</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                  <a class="code" href="../../dd/d53/res__config__odbc_8c.html#af2cdda2f51ca0d0f04ec61841eb58ddb">WARN_TYPE_OR_LENGTH</a>(size)</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;               }</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;            <span class="keywordflow">case</span> SQL_C_STINYINT:</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;               <span class="keywordflow">if</span> (type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a7b4a9e81298a296d3e066ed369727cc4">RQ_INTEGER1</a>) {</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                  <a class="code" href="../../dd/d53/res__config__odbc_8c.html#af2cdda2f51ca0d0f04ec61841eb58ddb">WARN_TYPE_OR_LENGTH</a>(size)</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;               }</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;            <span class="keywordflow">case</span> SQL_C_USHORT:</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;               <span class="keywordflow">if</span> (type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3ae8c94d6fa08e17f6f86792727b201bf9">RQ_UINTEGER1</a> &amp;&amp; type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a7b4a9e81298a296d3e066ed369727cc4">RQ_INTEGER1</a> &amp;&amp; type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a1ab15af464bf1838c9ca91d32ca7a2a1">RQ_UINTEGER2</a>) {</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                  <a class="code" href="../../dd/d53/res__config__odbc_8c.html#af2cdda2f51ca0d0f04ec61841eb58ddb">WARN_TYPE_OR_LENGTH</a>(size)</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;               }</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;            <span class="keywordflow">case</span> SQL_SMALLINT:</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;            <span class="keywordflow">case</span> SQL_C_SSHORT:</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;               <span class="keywordflow">if</span> (type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3ae8c94d6fa08e17f6f86792727b201bf9">RQ_UINTEGER1</a> &amp;&amp; type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a7b4a9e81298a296d3e066ed369727cc4">RQ_INTEGER1</a> &amp;&amp; type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3af1d7dd0d3aacafdef0d2f0d2db6d7112">RQ_INTEGER2</a>) {</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                  <a class="code" href="../../dd/d53/res__config__odbc_8c.html#af2cdda2f51ca0d0f04ec61841eb58ddb">WARN_TYPE_OR_LENGTH</a>(size)</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;               }</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;            <span class="keywordflow">case</span> SQL_C_ULONG:</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;               <span class="keywordflow">if</span> (type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3ae8c94d6fa08e17f6f86792727b201bf9">RQ_UINTEGER1</a> &amp;&amp; type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a7b4a9e81298a296d3e066ed369727cc4">RQ_INTEGER1</a> &amp;&amp;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                  type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a1ab15af464bf1838c9ca91d32ca7a2a1">RQ_UINTEGER2</a> &amp;&amp; type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3af1d7dd0d3aacafdef0d2f0d2db6d7112">RQ_INTEGER2</a> &amp;&amp;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                  type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3ad3163600ec26815e26092d9eb3e4b0b5">RQ_UINTEGER3</a> &amp;&amp; type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a75d046b2f103381a62aeb81f42550404">RQ_INTEGER3</a> &amp;&amp;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                  type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a8a9fbbd166ee4918cec8c9303fde70e8">RQ_INTEGER4</a>) {</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                  <a class="code" href="../../dd/d53/res__config__odbc_8c.html#af2cdda2f51ca0d0f04ec61841eb58ddb">WARN_TYPE_OR_LENGTH</a>(size)</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;               }</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;            <span class="keywordflow">case</span> SQL_INTEGER:</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;            <span class="keywordflow">case</span> SQL_C_SLONG:</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;               <span class="keywordflow">if</span> (type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3ae8c94d6fa08e17f6f86792727b201bf9">RQ_UINTEGER1</a> &amp;&amp; type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a7b4a9e81298a296d3e066ed369727cc4">RQ_INTEGER1</a> &amp;&amp;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                  type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a1ab15af464bf1838c9ca91d32ca7a2a1">RQ_UINTEGER2</a> &amp;&amp; type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3af1d7dd0d3aacafdef0d2f0d2db6d7112">RQ_INTEGER2</a> &amp;&amp;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                  type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3ad3163600ec26815e26092d9eb3e4b0b5">RQ_UINTEGER3</a> &amp;&amp; type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a75d046b2f103381a62aeb81f42550404">RQ_INTEGER3</a> &amp;&amp;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                  type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a8a9fbbd166ee4918cec8c9303fde70e8">RQ_INTEGER4</a>) {</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                  <a class="code" href="../../dd/d53/res__config__odbc_8c.html#af2cdda2f51ca0d0f04ec61841eb58ddb">WARN_TYPE_OR_LENGTH</a>(size)</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;               }</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;            <span class="keywordflow">case</span> SQL_C_UBIGINT:</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;               <span class="keywordflow">if</span> (type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3ae8c94d6fa08e17f6f86792727b201bf9">RQ_UINTEGER1</a> &amp;&amp; type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a7b4a9e81298a296d3e066ed369727cc4">RQ_INTEGER1</a> &amp;&amp;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                  type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a1ab15af464bf1838c9ca91d32ca7a2a1">RQ_UINTEGER2</a> &amp;&amp; type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3af1d7dd0d3aacafdef0d2f0d2db6d7112">RQ_INTEGER2</a> &amp;&amp;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                  type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3ad3163600ec26815e26092d9eb3e4b0b5">RQ_UINTEGER3</a> &amp;&amp; type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a75d046b2f103381a62aeb81f42550404">RQ_INTEGER3</a> &amp;&amp;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                  type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a27acda71d87003db19a6e0b4193a32be">RQ_UINTEGER4</a> &amp;&amp; type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a8a9fbbd166ee4918cec8c9303fde70e8">RQ_INTEGER4</a> &amp;&amp;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                  type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3aaa7be840b4634cc84021f0c20a17275b">RQ_INTEGER8</a>) {</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                  <a class="code" href="../../dd/d53/res__config__odbc_8c.html#af2cdda2f51ca0d0f04ec61841eb58ddb">WARN_TYPE_OR_LENGTH</a>(size)</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;               }</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;            <span class="keywordflow">case</span> SQL_BIGINT:</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;            <span class="keywordflow">case</span> SQL_C_SBIGINT:</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;               <span class="keywordflow">if</span> (type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3ae8c94d6fa08e17f6f86792727b201bf9">RQ_UINTEGER1</a> &amp;&amp; type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a7b4a9e81298a296d3e066ed369727cc4">RQ_INTEGER1</a> &amp;&amp;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                  type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a1ab15af464bf1838c9ca91d32ca7a2a1">RQ_UINTEGER2</a> &amp;&amp; type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3af1d7dd0d3aacafdef0d2f0d2db6d7112">RQ_INTEGER2</a> &amp;&amp;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                  type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3ad3163600ec26815e26092d9eb3e4b0b5">RQ_UINTEGER3</a> &amp;&amp; type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a75d046b2f103381a62aeb81f42550404">RQ_INTEGER3</a> &amp;&amp;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                  type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a27acda71d87003db19a6e0b4193a32be">RQ_UINTEGER4</a> &amp;&amp; type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a8a9fbbd166ee4918cec8c9303fde70e8">RQ_INTEGER4</a> &amp;&amp;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                  type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3aaa7be840b4634cc84021f0c20a17275b">RQ_INTEGER8</a>) {</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                  <a class="code" href="../../dd/d53/res__config__odbc_8c.html#af2cdda2f51ca0d0f04ec61841eb58ddb">WARN_TYPE_OR_LENGTH</a>(size)</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;               }</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<span class="preprocessor">#undef WARN_TYPE_OR_LENGTH</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;            <span class="keywordflow">case</span> SQL_NUMERIC:</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;            <span class="keywordflow">case</span> SQL_DECIMAL:</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;            <span class="keywordflow">case</span> SQL_FLOAT:</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;            <span class="keywordflow">case</span> SQL_REAL:</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;            <span class="keywordflow">case</span> SQL_DOUBLE:</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;               <span class="keywordflow">if</span> (!<a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ab5697a07c1985cb66b0c2f1090e48631">ast_rq_is_int</a>(type) &amp;&amp; type != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a1133e08bb8b498770188f728ca03e417">RQ_FLOAT</a>) {</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                  <a class="code" href="../../dd/d53/res__config__odbc_8c.html#ac0fc1cb3fe8e03194386842057d38085">warn_type</a>(col, type);</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;               }</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Realtime table %s@%s: column type (%d) unrecognized for column &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>, database, col-&gt;<a class="code" href="../../d0/d5f/structodbc__cache__columns.html#a713b6299f1d41d81cf4fec75082f0033">type</a>, elm);</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;            }</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;         }</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;      }</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      <span class="keywordflow">if</span> (!col) {</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Realtime table %s@%s requires column &#39;%s&#39;, but that column does not exist!\n&quot;</span>, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>, database, elm);</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      }</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;   }</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;tableptr-&gt;<a class="code" href="../../d5/d5c/structodbc__cache__tables.html#a09f857e5d5d25c0d2065acfbb45afe6c">columns</a>);</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;}</div><div class="ttc" id="include_2asterisk_2config_8h_html_abbca034b0a98715c687b808347af82a3"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3">require_type</a></div><div class="ttdeci">require_type</div><div class="ttdoc">Types used in ast_realtime_require_field. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00065">include/asterisk/config.h:65</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_abbca034b0a98715c687b808347af82a3a1133e08bb8b498770188f728ca03e417"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a1133e08bb8b498770188f728ca03e417">RQ_FLOAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00077">include/asterisk/config.h:77</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_a213ff212b1abd119f58f61f5576e13d4"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a213ff212b1abd119f58f61f5576e13d4">CHECK_SIZE</a></div><div class="ttdeci">#define CHECK_SIZE(n)</div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_abbca034b0a98715c687b808347af82a3a75d046b2f103381a62aeb81f42550404"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a75d046b2f103381a62aeb81f42550404">RQ_INTEGER3</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00070">include/asterisk/config.h:70</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_abbca034b0a98715c687b808347af82a3ae8c94d6fa08e17f6f86792727b201bf9"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3ae8c94d6fa08e17f6f86792727b201bf9">RQ_UINTEGER1</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00067">include/asterisk/config.h:67</a></div></div>
<div class="ttc" id="structodbc__cache__columns_html"><div class="ttname"><a href="../../d0/d5f/structodbc__cache__columns.html">odbc_cache_columns</a></div><div class="ttdoc">These structures are used for adaptive capabilities. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00059">res_odbc.h:59</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_abbca034b0a98715c687b808347af82a3a3d3293675f377a4398a25974cba3e7e1"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a3d3293675f377a4398a25974cba3e7e1">RQ_DATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00078">include/asterisk/config.h:78</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_a68d1e6e752f2cf81551fac543cae108a"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a></div><div class="ttdeci">static char * table</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00058">cdr_odbc.c:58</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_abbca034b0a98715c687b808347af82a3a27acda71d87003db19a6e0b4193a32be"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a27acda71d87003db19a6e0b4193a32be">RQ_UINTEGER4</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00073">include/asterisk/config.h:73</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_abbca034b0a98715c687b808347af82a3acf1d0ae3a1d0e3ae12a1f05f485f07c9"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3acf1d0ae3a1d0e3ae12a1f05f485f07c9">RQ_DATETIME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00079">include/asterisk/config.h:79</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_abbca034b0a98715c687b808347af82a3af1d7dd0d3aacafdef0d2f0d2db6d7112"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3af1d7dd0d3aacafdef0d2f0d2db6d7112">RQ_INTEGER2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00068">include/asterisk/config.h:68</a></div></div>
<div class="ttc" id="res__odbc_8h_html_aa15ed6f1d16784d3e2961c0bef9352c8"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#aa15ed6f1d16784d3e2961c0bef9352c8">ast_odbc_find_table</a></div><div class="ttdeci">struct odbc_cache_tables * ast_odbc_find_table(const char *database, const char *tablename)</div><div class="ttdoc">Find or create an entry describing the table specified. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00241">res_odbc.c:241</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_abbca034b0a98715c687b808347af82a3aaa7be840b4634cc84021f0c20a17275b"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3aaa7be840b4634cc84021f0c20a17275b">RQ_INTEGER8</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00074">include/asterisk/config.h:74</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_a18da797c1ab7394473a9b3c7e13e6f89"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a18da797c1ab7394473a9b3c7e13e6f89">warn_length</a></div><div class="ttdeci">#define warn_length(col, size)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l01073">res_config_odbc.c:1073</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_abbca034b0a98715c687b808347af82a3a2e4fb4c24a3958e2fbd853d5c53cfbb4"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a2e4fb4c24a3958e2fbd853d5c53cfbb4">RQ_UINTEGER8</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00075">include/asterisk/config.h:75</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_abbca034b0a98715c687b808347af82a3a8a9fbbd166ee4918cec8c9303fde70e8"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a8a9fbbd166ee4918cec8c9303fde70e8">RQ_INTEGER4</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00072">include/asterisk/config.h:72</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_abbca034b0a98715c687b808347af82a3a75759a4654f061f8e7d6bd1ec7a3b4bb"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a75759a4654f061f8e7d6bd1ec7a3b4bb">RQ_CHAR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00076">include/asterisk/config.h:76</a></div></div>
<div class="ttc" id="structodbc__cache__columns_html_a8f725e63e7aaa7e48a10d571d6bc5c44"><div class="ttname"><a href="../../d0/d5f/structodbc__cache__columns.html#a8f725e63e7aaa7e48a10d571d6bc5c44">odbc_cache_columns::size</a></div><div class="ttdeci">SQLINTEGER size</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00062">res_odbc.h:62</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_abbca034b0a98715c687b808347af82a3ad3163600ec26815e26092d9eb3e4b0b5"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3ad3163600ec26815e26092d9eb3e4b0b5">RQ_UINTEGER3</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00071">include/asterisk/config.h:71</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_af2cdda2f51ca0d0f04ec61841eb58ddb"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#af2cdda2f51ca0d0f04ec61841eb58ddb">WARN_TYPE_OR_LENGTH</a></div><div class="ttdeci">#define WARN_TYPE_OR_LENGTH(n)</div></div>
<div class="ttc" id="structodbc__cache__columns_html_a5ac083a645d964373f022d03df4849c8"><div class="ttname"><a href="../../d0/d5f/structodbc__cache__columns.html#a5ac083a645d964373f022d03df4849c8">odbc_cache_columns::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00060">res_odbc.h:60</a></div></div>
<div class="ttc" id="structodbc__cache__tables_html"><div class="ttname"><a href="../../d5/d5c/structodbc__cache__tables.html">odbc_cache_tables</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00070">res_odbc.h:70</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_abbca034b0a98715c687b808347af82a3a1ab15af464bf1838c9ca91d32ca7a2a1"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a1ab15af464bf1838c9ca91d32ca7a2a1">RQ_UINTEGER2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00069">include/asterisk/config.h:69</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_ac0fc1cb3fe8e03194386842057d38085"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#ac0fc1cb3fe8e03194386842057d38085">warn_type</a></div><div class="ttdeci">#define warn_type(col, type)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l01074">res_config_odbc.c:1074</a></div></div>
<div class="ttc" id="structodbc__cache__columns_html_a713b6299f1d41d81cf4fec75082f0033"><div class="ttname"><a href="../../d0/d5f/structodbc__cache__columns.html#a713b6299f1d41d81cf4fec75082f0033">odbc_cache_columns::type</a></div><div class="ttdeci">SQLSMALLINT type</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00061">res_odbc.h:61</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ab5697a07c1985cb66b0c2f1090e48631"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ab5697a07c1985cb66b0c2f1090e48631">ast_rq_is_int</a></div><div class="ttdeci">int ast_rq_is_int(require_type type)</div><div class="ttdoc">Check if require type is an integer type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01240">include/asterisk/config.h:1240</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_abbca034b0a98715c687b808347af82a3a7b4a9e81298a296d3e066ed369727cc4"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a7b4a9e81298a296d3e066ed369727cc4">RQ_INTEGER1</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00066">include/asterisk/config.h:66</a></div></div>
<div class="ttc" id="structodbc__cache__tables_html_a09f857e5d5d25c0d2065acfbb45afe6c"><div class="ttname"><a href="../../d5/d5c/structodbc__cache__tables.html#a09f857e5d5d25c0d2065acfbb45afe6c">odbc_cache_tables::columns</a></div><div class="ttdeci">struct odbc_cache_tables::_columns columns</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad986c4f95a0ccb3b7d2294913024e45d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad986c4f95a0ccb3b7d2294913024e45d">&#9670;&nbsp;</a></span>store_odbc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int store_odbc </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>fields</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Excute an INSERT query. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">database</td><td></td></tr>
    <tr><td class="paramname">table</td><td></td></tr>
    <tr><td class="paramname">ap</td><td>list containing one or more field/value set(s)</td></tr>
  </table>
  </dd>
</dl>
<p>Insert a new record into database table, prepare the sql statement. All values to be changed are stored in ap list. Sub-in the values to the prepared statement and execute it.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">number</td><td>of rows affected </td></tr>
    <tr><td class="paramname">-1</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00741">741</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00407">ast_odbc_prepare_and_execute()</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00813">ast_odbc_release_obj()</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00121">ast_odbc_request_obj2</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00861">ast_str_thread_get()</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00368">ast_string_field_free_memory</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00353">ast_string_field_init</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00101">custom_prepare()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00061">custom_prepare_struct::fields</a>, <a class="el" href="../../d7/dbb/res__crypto_8c.html#a8a693dfece66e7d97b54bf506ed25b86">keys</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00042">RES_ODBC_CONNECTED</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00056">custom_prepare_struct::sql</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00052">sql_buf</a>, and <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00050">SQL_BUF_SIZE</a>.</p>
<div class="fragment"><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;{</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *obj;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;   SQLHSTMT stmt;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;   SQLLEN rowcount=0;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *field = fields;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../d7/dbb/res__crypto_8c.html#a8a693dfece66e7d97b54bf506ed25b86">keys</a>;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *vals;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *sql = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../dd/d53/res__config__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a>, <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a0552f2f0194e062f156929a78374dd55">SQL_BUF_SIZE</a>);</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d27/structcustom__prepare__struct.html">custom_prepare_struct</a> cps = { .<a class="code" href="../../d8/d27/structcustom__prepare__struct.html#aed2d94a6fe15ec228d25838ea61f6a94">fields</a> = <a class="code" href="../../d8/d27/structcustom__prepare__struct.html#aed2d94a6fe15ec228d25838ea61f6a94">fields</a>, };</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> connected_flag = { <a class="code" href="../../de/d96/res__odbc_8h.html#a0341d081395407fd92061819ba76eb96aaf8f8c27bee047ce6b85c03a118ed8cd">RES_ODBC_CONNECTED</a> };</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;   keys = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(<a class="code" href="../../dd/d53/res__config__odbc_8c.html#a0552f2f0194e062f156929a78374dd55">SQL_BUF_SIZE</a> / 2);</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;   vals = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(<a class="code" href="../../dd/d53/res__config__odbc_8c.html#a0552f2f0194e062f156929a78374dd55">SQL_BUF_SIZE</a> / 4);</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a> || !field || !keys || !vals || !sql) {</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(vals);</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(keys);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;   }</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;   obj = <a class="code" href="../../de/d96/res__odbc_8h.html#a0978c986996da2ecb07140f13af20171">ast_odbc_request_obj2</a>(database, connected_flag);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;   <span class="keywordflow">if</span> (!obj) {</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(vals);</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(keys);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;   }</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;keys, 0, <span class="stringliteral">&quot;%s&quot;</span>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;vals, 0, <span class="stringliteral">&quot;?&quot;</span>);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;   <span class="keywordflow">while</span> ((field = field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>)) {</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;keys, 0, <span class="stringliteral">&quot;, %s&quot;</span>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;vals, 0, <span class="stringliteral">&quot;, ?&quot;</span>);</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;   }</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;sql, 0, <span class="stringliteral">&quot;INSERT INTO %s (%s) VALUES (%s)&quot;</span>,</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(keys), <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(vals));</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(vals);</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(keys);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;   cps.<a class="code" href="../../d8/d27/structcustom__prepare__struct.html#aecb2dd0da01a12f0e48213d6d9f3c5af">sql</a> = <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql);</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a>(&amp;cps, 256)) {</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;   }</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   stmt = <a class="code" href="../../de/d96/res__odbc_8h.html#ad1e82a2b1ba4eda1924d8b8f591de065">ast_odbc_prepare_and_execute</a>(obj, <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a9fb0770b5d483240183affa19304b681">custom_prepare</a>, &amp;cps);</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a>(&amp;cps);</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;   <span class="keywordflow">if</span> (!stmt) {</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;   }</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;   res = SQLRowCount(stmt, &amp;rowcount);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;   SQLFreeHandle (SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;   <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL Row Count error! [%s]\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;   }</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;   <span class="keywordflow">if</span> (rowcount &gt;= 0)</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)rowcount;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;}</div><div class="ttc" id="res__config__odbc_8c_html_a0552f2f0194e062f156929a78374dd55"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a0552f2f0194e062f156929a78374dd55">SQL_BUF_SIZE</a></div><div class="ttdeci">#define SQL_BUF_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00050">res_config_odbc.c:50</a></div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html_aecb2dd0da01a12f0e48213d6d9f3c5af"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html#aecb2dd0da01a12f0e48213d6d9f3c5af">custom_prepare_struct::sql</a></div><div class="ttdeci">const char * sql</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00056">res_config_odbc.c:56</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a0341d081395407fd92061819ba76eb96aaf8f8c27bee047ce6b85c03a118ed8cd"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a0341d081395407fd92061819ba76eb96aaf8f8c27bee047ce6b85c03a118ed8cd">RES_ODBC_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00042">res_odbc.h:42</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a0978c986996da2ecb07140f13af20171"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a0978c986996da2ecb07140f13af20171">ast_odbc_request_obj2</a></div><div class="ttdeci">#define ast_odbc_request_obj2(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00121">res_odbc.h:121</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html_aed2d94a6fe15ec228d25838ea61f6a94"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html#aed2d94a6fe15ec228d25838ea61f6a94">custom_prepare_struct::fields</a></div><div class="ttdeci">const struct ast_variable * fields</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00061">res_config_odbc.c:61</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_a68d1e6e752f2cf81551fac543cae108a"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a></div><div class="ttdeci">static char * table</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00058">cdr_odbc.c:58</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structodbc__obj_html"><div class="ttname"><a href="../../df/d36/structodbc__obj.html">odbc_obj</a></div><div class="ttdoc">ODBC container. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00046">res_odbc.h:46</a></div></div>
<div class="ttc" id="stringfields_8h_html_a871274fa4fd2687c7a44849a84df3665"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a></div><div class="ttdeci">#define ast_string_field_init(x, size)</div><div class="ttdoc">Initialize a field pool and fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00353">stringfields.h:353</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_a9fb0770b5d483240183affa19304b681"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a9fb0770b5d483240183affa19304b681">custom_prepare</a></div><div class="ttdeci">static SQLHSTMT custom_prepare(struct odbc_obj *obj, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00101">res_config_odbc.c:101</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_afc4bfa5a94710e6f323a1033f82425b3"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a></div><div class="ttdeci">static struct ast_threadstorage sql_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00052">res_config_odbc.c:52</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html">custom_prepare_struct</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00055">res_config_odbc.c:55</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="res__odbc_8h_html_ad1e82a2b1ba4eda1924d8b8f591de065"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#ad1e82a2b1ba4eda1924d8b8f591de065">ast_odbc_prepare_and_execute</a></div><div class="ttdeci">SQLHSTMT ast_odbc_prepare_and_execute(struct odbc_obj *obj, SQLHSTMT(*prepare_cb)(struct odbc_obj *obj, void *data), void *data)</div><div class="ttdoc">Prepares, executes, and returns the resulting statement handle. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00407">res_odbc.c:407</a></div></div>
<div class="ttc" id="strings_8h_html_afe8f5f844f2fd5f5bd5d0be5ef671481"><div class="ttname"><a href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a></div><div class="ttdeci">struct ast_str * ast_str_thread_get(struct ast_threadstorage *ts, size_t init_len)</div><div class="ttdoc">Retrieve a thread locally stored dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00861">strings.h:861</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a78d14d1dd01c269c9c0a47b49475eeea"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a></div><div class="ttdeci">void ast_odbc_release_obj(struct odbc_obj *obj)</div><div class="ttdoc">Releases an ODBC object previously allocated by ast_odbc_request_obj() </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00813">res_odbc.c:813</a></div></div>
<div class="ttc" id="res__crypto_8c_html_a8a693dfece66e7d97b54bf506ed25b86"><div class="ttname"><a href="../../d7/dbb/res__crypto_8c.html#a8a693dfece66e7d97b54bf506ed25b86">keys</a></div><div class="ttdeci">static struct keys keys</div></div>
<div class="ttc" id="stringfields_8h_html_abf60f862ae6a141d2f86a0f5e82792de"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a></div><div class="ttdeci">#define ast_string_field_free_memory(x)</div><div class="ttdoc">free all memory - to be called before destroying the object </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00368">stringfields.h:368</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l01251">1251</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l03006">ast_config_engine_deregister()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l01265">reload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;{</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7028ff4b11d7167ee4030b4d3e123d76">ast_config_engine_deregister</a>(&amp;<a class="code" href="../../dd/d53/res__config__odbc_8c.html#a0db7ee1d52bac64062bb76ed957432bb">odbc_engine</a>);</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;}</div><div class="ttc" id="include_2asterisk_2config_8h_html_a7028ff4b11d7167ee4030b4d3e123d76"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a7028ff4b11d7167ee4030b4d3e123d76">ast_config_engine_deregister</a></div><div class="ttdeci">int ast_config_engine_deregister(struct ast_config_engine *del)</div><div class="ttdoc">Deregister config engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03006">main/config.c:3006</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_a0db7ee1d52bac64062bb76ed957432bb"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a0db7ee1d52bac64062bb76ed957432bb">odbc_engine</a></div><div class="ttdeci">static struct ast_config_engine odbc_engine</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l01238">res_config_odbc.c:1238</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abde1733d6eda1c716207c2150275a0f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abde1733d6eda1c716207c2150275a0f7">&#9670;&nbsp;</a></span>unload_odbc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_odbc </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l01233">1233</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00352">ast_odbc_clear_cache()</a>.</p>
<div class="fragment"><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;{</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d96/res__odbc_8h.html#a8632a3816d017c47147342465a488301">ast_odbc_clear_cache</a>(<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>, <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>);</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;}</div><div class="ttc" id="res__odbc_8h_html_a8632a3816d017c47147342465a488301"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a8632a3816d017c47147342465a488301">ast_odbc_clear_cache</a></div><div class="ttdeci">int ast_odbc_clear_cache(const char *database, const char *tablename)</div><div class="ttdoc">Remove a cache entry from memory This function may be called to clear entries created and cached by t...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00352">res_odbc.c:352</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a025ede890af287961d3a98d0e634a62b"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a></div><div class="ttdeci">static struct test_val b</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00047">test_linkedlists.c:47</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a13dd15487fee89a002d17ef3aff62d02"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a></div><div class="ttdeci">static struct test_val a</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">test_linkedlists.c:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abbec95ffa18c63da7acb5b03bee9140e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbec95ffa18c63da7acb5b03bee9140e">&#9670;&nbsp;</a></span>update2_odbc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int update2_odbc </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>lookup_fields</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>update_fields</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Execute an UPDATE query. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">database</td><td></td></tr>
    <tr><td class="paramname">table</td><td></td></tr>
    <tr><td class="paramname">ap</td><td>list containing one or more field/value set(s).</td></tr>
  </table>
  </dd>
</dl>
<p>Update a database table, preparing the sql statement from a list of key/value pairs specified in ap. The lookup pairs are specified first and are separated from the update pairs by a sentinel value. Sub-in the values to the prepared statement and execute it.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">number</td><td>of rows affected </td></tr>
    <tr><td class="paramname">-1</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00675">675</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00241">ast_odbc_find_table()</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00407">ast_odbc_prepare_and_execute()</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00813">ast_odbc_release_obj()</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00216">ast_odbc_release_table</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00122">ast_odbc_request_obj</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00861">ast_str_thread_get()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00597">update2_prepare_struct::database</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00599">update2_prepare_struct::lookup_fields</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00056">custom_prepare_struct::sql</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00052">sql_buf</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00050">SQL_BUF_SIZE</a>, <a class="el" href="../../d8/d56/cdr__odbc_8c_source.html#l00058">table</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00601">update2_prepare_struct::tableptr</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00604">update2_prepare()</a>, and <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00600">update2_prepare_struct::update_fields</a>.</p>
<div class="fragment"><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;{</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *obj;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   SQLHSTMT stmt;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d37/structupdate2__prepare__struct.html">update2_prepare_struct</a> ups = {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      .<a class="code" href="../../d4/d37/structupdate2__prepare__struct.html#a53d0c97c2202a2386262cfeca447b392">database</a> = <a class="code" href="../../d4/d37/structupdate2__prepare__struct.html#a53d0c97c2202a2386262cfeca447b392">database</a>,</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      .table = <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>,</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      .lookup_fields = <a class="code" href="../../d4/d37/structupdate2__prepare__struct.html#a1c83a5962627cce139c31df8f188cb54">lookup_fields</a>,</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      .update_fields = <a class="code" href="../../d4/d37/structupdate2__prepare__struct.html#a65d27610a3da654d4506ae15216421c6">update_fields</a>,</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;   };</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *sql;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;   SQLLEN rowcount = 0;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;   ups.<a class="code" href="../../d4/d37/structupdate2__prepare__struct.html#ae3d5014f0a7f68ed2577579c8b2a7eff">tableptr</a> = <a class="code" href="../../de/d96/res__odbc_8h.html#aa15ed6f1d16784d3e2961c0bef9352c8">ast_odbc_find_table</a>(database, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   <span class="keywordflow">if</span> (!ups.<a class="code" href="../../d4/d37/structupdate2__prepare__struct.html#ae3d5014f0a7f68ed2577579c8b2a7eff">tableptr</a>) {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not retrieve metadata for table &#39;%s@%s&#39;. Update will fail!\n&quot;</span>, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>, database);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;   }</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   <span class="keywordflow">if</span> (!(obj = <a class="code" href="../../de/d96/res__odbc_8h.html#a28d298bdd4e1e12cb43b5c98d2128c90">ast_odbc_request_obj</a>(database, 0))) {</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a9aaeb9d433261beabf9ae1cc24566397">ast_odbc_release_table</a>(ups.<a class="code" href="../../d4/d37/structupdate2__prepare__struct.html#ae3d5014f0a7f68ed2577579c8b2a7eff">tableptr</a>);</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   }</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   <span class="keywordflow">if</span> (!(stmt = <a class="code" href="../../de/d96/res__odbc_8h.html#ad1e82a2b1ba4eda1924d8b8f591de065">ast_odbc_prepare_and_execute</a>(obj, <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a6186be46bd20ad42812bfd719cfef978">update2_prepare</a>, &amp;ups))) {</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a9aaeb9d433261beabf9ae1cc24566397">ast_odbc_release_table</a>(ups.<a class="code" href="../../d4/d37/structupdate2__prepare__struct.html#ae3d5014f0a7f68ed2577579c8b2a7eff">tableptr</a>);</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   }</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;   <span class="comment">/* We don&#39;t need the table anymore */</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   <a class="code" href="../../de/d96/res__odbc_8h.html#a9aaeb9d433261beabf9ae1cc24566397">ast_odbc_release_table</a>(ups.<a class="code" href="../../d4/d37/structupdate2__prepare__struct.html#ae3d5014f0a7f68ed2577579c8b2a7eff">tableptr</a>);</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   res = SQLRowCount(stmt, &amp;rowcount);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;   SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;   <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;   <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      <span class="comment">/* Since only a single thread can access this memory, we can retrieve what would otherwise be lost. */</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      sql = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../dd/d53/res__config__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a>, <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a0552f2f0194e062f156929a78374dd55">SQL_BUF_SIZE</a>);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(sql != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL Row Count error! [%s]\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   }</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;   <span class="keywordflow">if</span> (rowcount &gt;= 0) {</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) rowcount;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   }</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;}</div><div class="ttc" id="structupdate2__prepare__struct_html"><div class="ttname"><a href="../../d4/d37/structupdate2__prepare__struct.html">update2_prepare_struct</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00596">res_config_odbc.c:596</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_a0552f2f0194e062f156929a78374dd55"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a0552f2f0194e062f156929a78374dd55">SQL_BUF_SIZE</a></div><div class="ttdeci">#define SQL_BUF_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00050">res_config_odbc.c:50</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a9aaeb9d433261beabf9ae1cc24566397"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a9aaeb9d433261beabf9ae1cc24566397">ast_odbc_release_table</a></div><div class="ttdeci">#define ast_odbc_release_table(ptr)</div><div class="ttdoc">Release a table returned from ast_odbc_find_table. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00216">res_odbc.h:216</a></div></div>
<div class="ttc" id="structupdate2__prepare__struct_html_ae3d5014f0a7f68ed2577579c8b2a7eff"><div class="ttname"><a href="../../d4/d37/structupdate2__prepare__struct.html#ae3d5014f0a7f68ed2577579c8b2a7eff">update2_prepare_struct::tableptr</a></div><div class="ttdeci">struct odbc_cache_tables * tableptr</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00601">res_config_odbc.c:601</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_a6186be46bd20ad42812bfd719cfef978"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a6186be46bd20ad42812bfd719cfef978">update2_prepare</a></div><div class="ttdeci">static SQLHSTMT update2_prepare(struct odbc_obj *obj, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00604">res_config_odbc.c:604</a></div></div>
<div class="ttc" id="structupdate2__prepare__struct_html_a65d27610a3da654d4506ae15216421c6"><div class="ttname"><a href="../../d4/d37/structupdate2__prepare__struct.html#a65d27610a3da654d4506ae15216421c6">update2_prepare_struct::update_fields</a></div><div class="ttdeci">const struct ast_variable * update_fields</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00600">res_config_odbc.c:600</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_a68d1e6e752f2cf81551fac543cae108a"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a></div><div class="ttdeci">static char * table</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00058">cdr_odbc.c:58</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structodbc__obj_html"><div class="ttname"><a href="../../df/d36/structodbc__obj.html">odbc_obj</a></div><div class="ttdoc">ODBC container. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00046">res_odbc.h:46</a></div></div>
<div class="ttc" id="res__odbc_8h_html_aa15ed6f1d16784d3e2961c0bef9352c8"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#aa15ed6f1d16784d3e2961c0bef9352c8">ast_odbc_find_table</a></div><div class="ttdeci">struct odbc_cache_tables * ast_odbc_find_table(const char *database, const char *tablename)</div><div class="ttdoc">Find or create an entry describing the table specified. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00241">res_odbc.c:241</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a28d298bdd4e1e12cb43b5c98d2128c90"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a28d298bdd4e1e12cb43b5c98d2128c90">ast_odbc_request_obj</a></div><div class="ttdeci">#define ast_odbc_request_obj(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00122">res_odbc.h:122</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_afc4bfa5a94710e6f323a1033f82425b3"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a></div><div class="ttdeci">static struct ast_threadstorage sql_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00052">res_config_odbc.c:52</a></div></div>
<div class="ttc" id="res__odbc_8h_html_ad1e82a2b1ba4eda1924d8b8f591de065"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#ad1e82a2b1ba4eda1924d8b8f591de065">ast_odbc_prepare_and_execute</a></div><div class="ttdeci">SQLHSTMT ast_odbc_prepare_and_execute(struct odbc_obj *obj, SQLHSTMT(*prepare_cb)(struct odbc_obj *obj, void *data), void *data)</div><div class="ttdoc">Prepares, executes, and returns the resulting statement handle. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00407">res_odbc.c:407</a></div></div>
<div class="ttc" id="strings_8h_html_afe8f5f844f2fd5f5bd5d0be5ef671481"><div class="ttname"><a href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a></div><div class="ttdeci">struct ast_str * ast_str_thread_get(struct ast_threadstorage *ts, size_t init_len)</div><div class="ttdoc">Retrieve a thread locally stored dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00861">strings.h:861</a></div></div>
<div class="ttc" id="structupdate2__prepare__struct_html_a1c83a5962627cce139c31df8f188cb54"><div class="ttname"><a href="../../d4/d37/structupdate2__prepare__struct.html#a1c83a5962627cce139c31df8f188cb54">update2_prepare_struct::lookup_fields</a></div><div class="ttdeci">const struct ast_variable * lookup_fields</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00599">res_config_odbc.c:599</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a78d14d1dd01c269c9c0a47b49475eeea"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a></div><div class="ttdeci">void ast_odbc_release_obj(struct odbc_obj *obj)</div><div class="ttdoc">Releases an ODBC object previously allocated by ast_odbc_request_obj() </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00813">res_odbc.c:813</a></div></div>
<div class="ttc" id="structupdate2__prepare__struct_html_a53d0c97c2202a2386262cfeca447b392"><div class="ttname"><a href="../../d4/d37/structupdate2__prepare__struct.html#a53d0c97c2202a2386262cfeca447b392">update2_prepare_struct::database</a></div><div class="ttdeci">const char * database</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00597">res_config_odbc.c:597</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6186be46bd20ad42812bfd719cfef978"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6186be46bd20ad42812bfd719cfef978">&#9670;&nbsp;</a></span>update2_prepare()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static SQLHSTMT update2_prepare </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00604">604</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00341">ast_odbc_find_column()</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00463">ast_odbc_prepare()</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00524">ast_odbc_print_errors()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00861">ast_str_thread_get()</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00047">odbc_obj::con</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00597">update2_prepare_struct::database</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01092">first</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00599">update2_prepare_struct::lookup_fields</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00052">sql_buf</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00050">SQL_BUF_SIZE</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00598">update2_prepare_struct::table</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00601">update2_prepare_struct::tableptr</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00600">update2_prepare_struct::update_fields</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00675">update2_odbc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;{</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;   <span class="keywordtype">int</span> res, x = 1, <a class="code" href="../../df/d44/app__meetme_8c.html#a18b6f1cf748d864dd085819a7d4e6680">first</a> = 1;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d37/structupdate2__prepare__struct.html">update2_prepare_struct</a> *ups = data;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *field;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *sql = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../dd/d53/res__config__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a>, <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a0552f2f0194e062f156929a78374dd55">SQL_BUF_SIZE</a>);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;   SQLHSTMT stmt;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   <span class="keywordflow">if</span> (!sql) {</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;   }</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   res = SQLAllocHandle(SQL_HANDLE_STMT, obj-&gt;<a class="code" href="../../df/d36/structodbc__obj.html#ae83918cc26dc7acd65bbec1712593054">con</a>, &amp;stmt);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL Alloc Handle failed!\n&quot;</span>);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;   }</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;sql, 0, <span class="stringliteral">&quot;UPDATE %s SET &quot;</span>, ups-&gt;<a class="code" href="../../d4/d37/structupdate2__prepare__struct.html#a490f3d07e6b7376ac6a95b62ed1633d0">table</a>);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;   <span class="keywordflow">for</span> (field = ups-&gt;<a class="code" href="../../d4/d37/structupdate2__prepare__struct.html#a65d27610a3da654d4506ae15216421c6">update_fields</a>; field; field = field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../de/d96/res__odbc_8h.html#afa284d7796514825c1783efdd5f29c68">ast_odbc_find_column</a>(ups-&gt;<a class="code" href="../../d4/d37/structupdate2__prepare__struct.html#ae3d5014f0a7f68ed2577579c8b2a7eff">tableptr</a>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)) {</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;sql, 0, <span class="stringliteral">&quot;%s%s=? &quot;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a18b6f1cf748d864dd085819a7d4e6680">first</a> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;, &quot;</span>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;         SQLBindParameter(stmt, x++, SQL_PARAM_INPUT, SQL_C_CHAR, SQL_CHAR, strlen(field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>), 0, (<span class="keywordtype">void</span> *)field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#a18b6f1cf748d864dd085819a7d4e6680">first</a> = 0;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Not updating column &#39;%s&#39; in &#39;%s@%s&#39; because that column does not exist!\n&quot;</span>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, ups-&gt;<a class="code" href="../../d4/d37/structupdate2__prepare__struct.html#a490f3d07e6b7376ac6a95b62ed1633d0">table</a>, ups-&gt;<a class="code" href="../../d4/d37/structupdate2__prepare__struct.html#a53d0c97c2202a2386262cfeca447b392">database</a>);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      }</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   }</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;sql, 0, <span class="stringliteral">&quot;WHERE&quot;</span>);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a18b6f1cf748d864dd085819a7d4e6680">first</a> = 1;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;   <span class="keywordflow">for</span> (field = ups-&gt;<a class="code" href="../../d4/d37/structupdate2__prepare__struct.html#a1c83a5962627cce139c31df8f188cb54">lookup_fields</a>; field; field = field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../de/d96/res__odbc_8h.html#afa284d7796514825c1783efdd5f29c68">ast_odbc_find_column</a>(ups-&gt;<a class="code" href="../../d4/d37/structupdate2__prepare__struct.html#ae3d5014f0a7f68ed2577579c8b2a7eff">tableptr</a>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)) {</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;One or more of the criteria columns &#39;%s&#39; on &#39;%s@%s&#39; for this update does not exist!\n&quot;</span>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, ups-&gt;<a class="code" href="../../d4/d37/structupdate2__prepare__struct.html#a490f3d07e6b7376ac6a95b62ed1633d0">table</a>, ups-&gt;<a class="code" href="../../d4/d37/structupdate2__prepare__struct.html#a53d0c97c2202a2386262cfeca447b392">database</a>);</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;         SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      }</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;sql, 0, <span class="stringliteral">&quot;%s %s=?&quot;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a18b6f1cf748d864dd085819a7d4e6680">first</a> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot; AND&quot;</span>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      SQLBindParameter(stmt, x++, SQL_PARAM_INPUT, SQL_C_CHAR, SQL_CHAR, strlen(field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>), 0, (<span class="keywordtype">void</span> *)field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a18b6f1cf748d864dd085819a7d4e6680">first</a> = 0;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;   }</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;   res = <a class="code" href="../../de/d96/res__odbc_8h.html#a6c76549f7fd9feafdca9bf90f57f224a">ast_odbc_prepare</a>(obj, stmt, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;   <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <span class="keywordflow">if</span> (res == SQL_ERROR) {</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;         <a class="code" href="../../de/d96/res__odbc_8h.html#ae8bac75406e67636f01296b915d8183f">ast_odbc_print_errors</a>(SQL_HANDLE_STMT, stmt, <span class="stringliteral">&quot;SQL Prepare&quot;</span>);</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      }</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL Prepare failed! [%s]\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   }</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;   <span class="keywordflow">return</span> stmt;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;}</div><div class="ttc" id="structupdate2__prepare__struct_html"><div class="ttname"><a href="../../d4/d37/structupdate2__prepare__struct.html">update2_prepare_struct</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00596">res_config_odbc.c:596</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_a0552f2f0194e062f156929a78374dd55"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a0552f2f0194e062f156929a78374dd55">SQL_BUF_SIZE</a></div><div class="ttdeci">#define SQL_BUF_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00050">res_config_odbc.c:50</a></div></div>
<div class="ttc" id="structodbc__obj_html_ae83918cc26dc7acd65bbec1712593054"><div class="ttname"><a href="../../df/d36/structodbc__obj.html#ae83918cc26dc7acd65bbec1712593054">odbc_obj::con</a></div><div class="ttdeci">SQLHDBC con</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00047">res_odbc.h:47</a></div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="structupdate2__prepare__struct_html_ae3d5014f0a7f68ed2577579c8b2a7eff"><div class="ttname"><a href="../../d4/d37/structupdate2__prepare__struct.html#ae3d5014f0a7f68ed2577579c8b2a7eff">update2_prepare_struct::tableptr</a></div><div class="ttdeci">struct odbc_cache_tables * tableptr</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00601">res_config_odbc.c:601</a></div></div>
<div class="ttc" id="structupdate2__prepare__struct_html_a65d27610a3da654d4506ae15216421c6"><div class="ttname"><a href="../../d4/d37/structupdate2__prepare__struct.html#a65d27610a3da654d4506ae15216421c6">update2_prepare_struct::update_fields</a></div><div class="ttdeci">const struct ast_variable * update_fields</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00600">res_config_odbc.c:600</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a6c76549f7fd9feafdca9bf90f57f224a"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a6c76549f7fd9feafdca9bf90f57f224a">ast_odbc_prepare</a></div><div class="ttdeci">int ast_odbc_prepare(struct odbc_obj *obj, SQLHSTMT *stmt, const char *sql)</div><div class="ttdoc">Prepares a SQL query on a statement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00463">res_odbc.c:463</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="res__odbc_8h_html_afa284d7796514825c1783efdd5f29c68"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#afa284d7796514825c1783efdd5f29c68">ast_odbc_find_column</a></div><div class="ttdeci">struct odbc_cache_columns * ast_odbc_find_column(struct odbc_cache_tables *table, const char *colname)</div><div class="ttdoc">Find a column entry within a cached table structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00341">res_odbc.c:341</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="res__odbc_8h_html_ae8bac75406e67636f01296b915d8183f"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#ae8bac75406e67636f01296b915d8183f">ast_odbc_print_errors</a></div><div class="ttdeci">struct ast_str * ast_odbc_print_errors(SQLSMALLINT handle_type, SQLHANDLE handle, const char *operation)</div><div class="ttdoc">Shortcut for printing errors to logs after a failed SQL operation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00524">res_odbc.c:524</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a18b6f1cf748d864dd085819a7d4e6680"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a18b6f1cf748d864dd085819a7d4e6680">first</a></div><div class="ttdeci">struct sla_ringing_trunk * first</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01092">app_meetme.c:1092</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_afc4bfa5a94710e6f323a1033f82425b3"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a></div><div class="ttdeci">static struct ast_threadstorage sql_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00052">res_config_odbc.c:52</a></div></div>
<div class="ttc" id="structupdate2__prepare__struct_html_a490f3d07e6b7376ac6a95b62ed1633d0"><div class="ttname"><a href="../../d4/d37/structupdate2__prepare__struct.html#a490f3d07e6b7376ac6a95b62ed1633d0">update2_prepare_struct::table</a></div><div class="ttdeci">const char * table</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00598">res_config_odbc.c:598</a></div></div>
<div class="ttc" id="strings_8h_html_afe8f5f844f2fd5f5bd5d0be5ef671481"><div class="ttname"><a href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a></div><div class="ttdeci">struct ast_str * ast_str_thread_get(struct ast_threadstorage *ts, size_t init_len)</div><div class="ttdoc">Retrieve a thread locally stored dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00861">strings.h:861</a></div></div>
<div class="ttc" id="structupdate2__prepare__struct_html_a1c83a5962627cce139c31df8f188cb54"><div class="ttname"><a href="../../d4/d37/structupdate2__prepare__struct.html#a1c83a5962627cce139c31df8f188cb54">update2_prepare_struct::lookup_fields</a></div><div class="ttdeci">const struct ast_variable * lookup_fields</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00599">res_config_odbc.c:599</a></div></div>
<div class="ttc" id="structupdate2__prepare__struct_html_a53d0c97c2202a2386262cfeca447b392"><div class="ttname"><a href="../../d4/d37/structupdate2__prepare__struct.html#a53d0c97c2202a2386262cfeca447b392">update2_prepare_struct::database</a></div><div class="ttdeci">const char * database</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00597">res_config_odbc.c:597</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6fc1f822b80a7760400c5e6cfe26df7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fc1f822b80a7760400c5e6cfe26df7c">&#9670;&nbsp;</a></span>update_odbc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int update_odbc </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>keyfield</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>lookup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>fields</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Excute an UPDATE query. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">database</td><td></td></tr>
    <tr><td class="paramname">table</td><td></td></tr>
    <tr><td class="paramname">keyfield</td><td>where clause field </td></tr>
    <tr><td class="paramname">lookup</td><td>value of field for where clause </td></tr>
    <tr><td class="paramname">ap</td><td>list containing one or more field/value set(s).</td></tr>
  </table>
  </dd>
</dl>
<p>Update a database table, prepare the sql statement using keyfield and lookup control the number of records to change. All values to be changed are stored in ap list. Sub-in the values to the prepared statement and execute it.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">number</td><td>of rows affected </td></tr>
    <tr><td class="paramname">-1</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00516">516</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00341">ast_odbc_find_column()</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00241">ast_odbc_find_table()</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00407">ast_odbc_prepare_and_execute()</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00813">ast_odbc_release_obj()</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00216">ast_odbc_release_table</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00121">ast_odbc_request_obj2</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00861">ast_str_thread_get()</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00368">ast_string_field_free_memory</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00353">ast_string_field_init</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00101">custom_prepare()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00057">custom_prepare_struct::extra</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00061">custom_prepare_struct::fields</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00095">is_text()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00065">odbc_cache_columns::nullable</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00042">RES_ODBC_CONNECTED</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00062">custom_prepare_struct::skip</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00056">custom_prepare_struct::sql</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00052">sql_buf</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00050">SQL_BUF_SIZE</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>
<div class="fragment"><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;{</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *obj;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;   SQLHSTMT stmt;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;   SQLLEN rowcount=0;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *sql = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../dd/d53/res__config__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a>, <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a0552f2f0194e062f156929a78374dd55">SQL_BUF_SIZE</a>);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *field = fields;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;   <span class="keywordtype">int</span> res, count = 0, paramcount = 0;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d27/structcustom__prepare__struct.html">custom_prepare_struct</a> cps = { .<a class="code" href="../../d8/d27/structcustom__prepare__struct.html#a270601ef08727b13b7b159b0a9dcc18b">extra</a> = lookup, .fields = <a class="code" href="../../d8/d27/structcustom__prepare__struct.html#aed2d94a6fe15ec228d25838ea61f6a94">fields</a>, };</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d5c/structodbc__cache__tables.html">odbc_cache_tables</a> *tableptr;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d5f/structodbc__cache__columns.html">odbc_cache_columns</a> *<a class="code" href="../../de/d4b/structcolumn.html">column</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> connected_flag = { <a class="code" href="../../de/d96/res__odbc_8h.html#a0341d081395407fd92061819ba76eb96aaf8f8c27bee047ce6b85c03a118ed8cd">RES_ODBC_CONNECTED</a> };</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a> || !field || !keyfield || !sql) {</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;   }</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;   tableptr = <a class="code" href="../../de/d96/res__odbc_8h.html#aa15ed6f1d16784d3e2961c0bef9352c8">ast_odbc_find_table</a>(database, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;   <span class="keywordflow">if</span> (!(obj = <a class="code" href="../../de/d96/res__odbc_8h.html#a0978c986996da2ecb07140f13af20171">ast_odbc_request_obj2</a>(database, connected_flag))) {</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a9aaeb9d433261beabf9ae1cc24566397">ast_odbc_release_table</a>(tableptr);</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;   }</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;   <span class="keywordflow">if</span> (tableptr &amp;&amp; !<a class="code" href="../../de/d96/res__odbc_8h.html#afa284d7796514825c1783efdd5f29c68">ast_odbc_find_column</a>(tableptr, keyfield)) {</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Key field &#39;%s&#39; does not exist in table &#39;%s@%s&#39;.  Update will fail\n&quot;</span>, keyfield, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>, database);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   }</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;sql, 0, <span class="stringliteral">&quot;UPDATE %s SET &quot;</span>, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;   <span class="keywordflow">while</span> (field) {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <span class="keywordflow">if</span> ((tableptr &amp;&amp; (column = <a class="code" href="../../de/d96/res__odbc_8h.html#afa284d7796514825c1783efdd5f29c68">ast_odbc_find_column</a>(tableptr, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>))) || count &gt;= 64) {</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;         <span class="keywordflow">if</span> (paramcount++) {</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;sql, 0, <span class="stringliteral">&quot;, &quot;</span>);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;         }</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;         <span class="comment">/* NULL test for non-text columns */</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;         <span class="keywordflow">if</span> (count &lt; 64 &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>) &amp;&amp; column-&gt;<a class="code" href="../../d0/d5f/structodbc__cache__columns.html#afa2cba5460bd1d85a31e95654006db4a">nullable</a> &amp;&amp; !<a class="code" href="../../dd/d53/res__config__odbc_8c.html#a7a8606b15adc846dc5c28493b55173bf">is_text</a>(column)) {</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;sql, 0, <span class="stringliteral">&quot;%s=NULL&quot;</span>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            cps.<a class="code" href="../../d8/d27/structcustom__prepare__struct.html#a6ee44de20e6dfc70683517f91ecbc053">skip</a> |= (1LL &lt;&lt; count);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            <span class="comment">/* Value is not an empty string, or column is of text type, or we couldn&#39;t fit any more into cps.skip (count &gt;= 64 ?!). */</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;sql, 0, <span class="stringliteral">&quot;%s=?&quot;</span>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;         }</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      } <span class="keywordflow">else</span> { <span class="comment">/* the column does not exist in the table */</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;         cps.<a class="code" href="../../d8/d27/structcustom__prepare__struct.html#a6ee44de20e6dfc70683517f91ecbc053">skip</a> |= (1LL &lt;&lt; count);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      }</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      ++count;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      field = field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   }</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;sql, 0, <span class="stringliteral">&quot; WHERE %s=?&quot;</span>, keyfield);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   <a class="code" href="../../de/d96/res__odbc_8h.html#a9aaeb9d433261beabf9ae1cc24566397">ast_odbc_release_table</a>(tableptr);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   cps.<a class="code" href="../../d8/d27/structcustom__prepare__struct.html#aecb2dd0da01a12f0e48213d6d9f3c5af">sql</a> = <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a>(&amp;cps, 256)) {</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;   }</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   stmt = <a class="code" href="../../de/d96/res__odbc_8h.html#ad1e82a2b1ba4eda1924d8b8f591de065">ast_odbc_prepare_and_execute</a>(obj, <a class="code" href="../../dd/d53/res__config__odbc_8c.html#a9fb0770b5d483240183affa19304b681">custom_prepare</a>, &amp;cps);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a>(&amp;cps);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   <span class="keywordflow">if</span> (!stmt) {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   }</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   res = SQLRowCount(stmt, &amp;rowcount);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   SQLFreeHandle (SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(obj);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;   <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL Row Count error! [%s]\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;   }</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;   <span class="keywordflow">if</span> (rowcount &gt;= 0) {</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) rowcount;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;}</div><div class="ttc" id="res__config__odbc_8c_html_a0552f2f0194e062f156929a78374dd55"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a0552f2f0194e062f156929a78374dd55">SQL_BUF_SIZE</a></div><div class="ttdeci">#define SQL_BUF_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00050">res_config_odbc.c:50</a></div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a9aaeb9d433261beabf9ae1cc24566397"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a9aaeb9d433261beabf9ae1cc24566397">ast_odbc_release_table</a></div><div class="ttdeci">#define ast_odbc_release_table(ptr)</div><div class="ttdoc">Release a table returned from ast_odbc_find_table. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00216">res_odbc.h:216</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html_aecb2dd0da01a12f0e48213d6d9f3c5af"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html#aecb2dd0da01a12f0e48213d6d9f3c5af">custom_prepare_struct::sql</a></div><div class="ttdeci">const char * sql</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00056">res_config_odbc.c:56</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="structodbc__cache__columns_html_afa2cba5460bd1d85a31e95654006db4a"><div class="ttname"><a href="../../d0/d5f/structodbc__cache__columns.html#afa2cba5460bd1d85a31e95654006db4a">odbc_cache_columns::nullable</a></div><div class="ttdeci">SQLSMALLINT nullable</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00065">res_odbc.h:65</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a0341d081395407fd92061819ba76eb96aaf8f8c27bee047ce6b85c03a118ed8cd"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a0341d081395407fd92061819ba76eb96aaf8f8c27bee047ce6b85c03a118ed8cd">RES_ODBC_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00042">res_odbc.h:42</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a0978c986996da2ecb07140f13af20171"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a0978c986996da2ecb07140f13af20171">ast_odbc_request_obj2</a></div><div class="ttdeci">#define ast_odbc_request_obj2(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00121">res_odbc.h:121</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structodbc__cache__columns_html"><div class="ttname"><a href="../../d0/d5f/structodbc__cache__columns.html">odbc_cache_columns</a></div><div class="ttdoc">These structures are used for adaptive capabilities. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00059">res_odbc.h:59</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html_aed2d94a6fe15ec228d25838ea61f6a94"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html#aed2d94a6fe15ec228d25838ea61f6a94">custom_prepare_struct::fields</a></div><div class="ttdeci">const struct ast_variable * fields</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00061">res_config_odbc.c:61</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_a68d1e6e752f2cf81551fac543cae108a"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a></div><div class="ttdeci">static char * table</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00058">cdr_odbc.c:58</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structodbc__obj_html"><div class="ttname"><a href="../../df/d36/structodbc__obj.html">odbc_obj</a></div><div class="ttdoc">ODBC container. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00046">res_odbc.h:46</a></div></div>
<div class="ttc" id="res__odbc_8h_html_afa284d7796514825c1783efdd5f29c68"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#afa284d7796514825c1783efdd5f29c68">ast_odbc_find_column</a></div><div class="ttdeci">struct odbc_cache_columns * ast_odbc_find_column(struct odbc_cache_tables *table, const char *colname)</div><div class="ttdoc">Find a column entry within a cached table structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00341">res_odbc.c:341</a></div></div>
<div class="ttc" id="stringfields_8h_html_a871274fa4fd2687c7a44849a84df3665"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a></div><div class="ttdeci">#define ast_string_field_init(x, size)</div><div class="ttdoc">Initialize a field pool and fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00353">stringfields.h:353</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="res__odbc_8h_html_aa15ed6f1d16784d3e2961c0bef9352c8"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#aa15ed6f1d16784d3e2961c0bef9352c8">ast_odbc_find_table</a></div><div class="ttdeci">struct odbc_cache_tables * ast_odbc_find_table(const char *database, const char *tablename)</div><div class="ttdoc">Find or create an entry describing the table specified. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00241">res_odbc.c:241</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_a9fb0770b5d483240183affa19304b681"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a9fb0770b5d483240183affa19304b681">custom_prepare</a></div><div class="ttdeci">static SQLHSTMT custom_prepare(struct odbc_obj *obj, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00101">res_config_odbc.c:101</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_afc4bfa5a94710e6f323a1033f82425b3"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a></div><div class="ttdeci">static struct ast_threadstorage sql_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00052">res_config_odbc.c:52</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html">custom_prepare_struct</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00055">res_config_odbc.c:55</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="res__odbc_8h_html_ad1e82a2b1ba4eda1924d8b8f591de065"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#ad1e82a2b1ba4eda1924d8b8f591de065">ast_odbc_prepare_and_execute</a></div><div class="ttdeci">SQLHSTMT ast_odbc_prepare_and_execute(struct odbc_obj *obj, SQLHSTMT(*prepare_cb)(struct odbc_obj *obj, void *data), void *data)</div><div class="ttdoc">Prepares, executes, and returns the resulting statement handle. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00407">res_odbc.c:407</a></div></div>
<div class="ttc" id="structcolumn_html"><div class="ttname"><a href="../../de/d4b/structcolumn.html">column</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00098">cdr_mysql.c:98</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html_a270601ef08727b13b7b159b0a9dcc18b"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html#a270601ef08727b13b7b159b0a9dcc18b">custom_prepare_struct::extra</a></div><div class="ttdeci">const char * extra</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00057">res_config_odbc.c:57</a></div></div>
<div class="ttc" id="structodbc__cache__tables_html"><div class="ttname"><a href="../../d5/d5c/structodbc__cache__tables.html">odbc_cache_tables</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00070">res_odbc.h:70</a></div></div>
<div class="ttc" id="strings_8h_html_afe8f5f844f2fd5f5bd5d0be5ef671481"><div class="ttname"><a href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a></div><div class="ttdeci">struct ast_str * ast_str_thread_get(struct ast_threadstorage *ts, size_t init_len)</div><div class="ttdoc">Retrieve a thread locally stored dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00861">strings.h:861</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a78d14d1dd01c269c9c0a47b49475eeea"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a></div><div class="ttdeci">void ast_odbc_release_obj(struct odbc_obj *obj)</div><div class="ttdoc">Releases an ODBC object previously allocated by ast_odbc_request_obj() </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00813">res_odbc.c:813</a></div></div>
<div class="ttc" id="res__config__odbc_8c_html_a7a8606b15adc846dc5c28493b55173bf"><div class="ttname"><a href="../../dd/d53/res__config__odbc_8c.html#a7a8606b15adc846dc5c28493b55173bf">is_text</a></div><div class="ttdeci">static int is_text(const struct odbc_cache_columns *column)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00095">res_config_odbc.c:95</a></div></div>
<div class="ttc" id="stringfields_8h_html_abf60f862ae6a141d2f86a0f5e82792de"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a></div><div class="ttdeci">#define ast_string_field_free_memory(x)</div><div class="ttdoc">free all memory - to be called before destroying the object </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00368">stringfields.h:368</a></div></div>
<div class="ttc" id="structcustom__prepare__struct_html_a6ee44de20e6dfc70683517f91ecbc053"><div class="ttname"><a href="../../d8/d27/structcustom__prepare__struct.html#a6ee44de20e6dfc70683517f91ecbc053">custom_prepare_struct::skip</a></div><div class="ttdeci">unsigned long long skip</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/res__config__odbc_8c_source.html#l00062">res_config_odbc.c:62</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Realtime ODBC configuration&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .reload = reload_module, .load_pri = AST_MODPRI_REALTIME_DRIVER, .requires = &quot;extconfig,res_odbc&quot;, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l01277">1277</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l01277">1277</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

</div>
</div>
<a id="a0db7ee1d52bac64062bb76ed957432bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0db7ee1d52bac64062bb76ed957432bb">&#9670;&nbsp;</a></span>odbc_engine</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d3/d26/structast__config__engine.html">ast_config_engine</a> odbc_engine</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l01238">1238</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

</div>
</div>
<a id="a603158b374bae475b94fc201bbeb2f19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a603158b374bae475b94fc201bbeb2f19">&#9670;&nbsp;</a></span>rowdata_buf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a> rowdata_buf = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../dd/d53/res__config__odbc_8c.html#a00755f72dd367d528e7ccfd7e37421fe">__init_rowdata_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00053">53</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00342">realtime_multi_odbc()</a>, and <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00170">realtime_odbc()</a>.</p>

</div>
</div>
<a id="afc4bfa5a94710e6f323a1033f82425b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc4bfa5a94710e6f323a1033f82425b3">&#9670;&nbsp;</a></span>sql_buf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a> sql_buf = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a2ff160eb8cc768ef928c90bb61ded670">__init_sql_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00052">52</a> of file <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html">res_config_odbc.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00941">config_odbc()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00824">destroy_odbc()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00342">realtime_multi_odbc()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00170">realtime_odbc()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00741">store_odbc()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00675">update2_odbc()</a>, <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00604">update2_prepare()</a>, and <a class="el" href="../../dd/d53/res__config__odbc_8c_source.html#l00516">update_odbc()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:22 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
